{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"themes\\itsneko\\source\\css\\gitment.css","path":"css/gitment.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\css\\matery.css","path":"css/matery.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\css\\my-gitalk.css","path":"css/my-gitalk.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\css\\my.css","path":"css/my.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\fonts\\华文行楷.ttf","path":"fonts/华文行楷.ttf","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\js\\activate-power-mode.js","path":"js/activate-power-mode.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\js\\artitalk.js","path":"js/artitalk.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\js\\click_show_text.js","path":"js/click_show_text.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\js\\linkcard.js","path":"js/linkcard.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\js\\matery.js","path":"js/matery.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\js\\moments.js","path":"js/moments.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\js\\search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\avatar.jpg","path":"medias/avatar.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\bggrid.png","path":"medias/bggrid.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\candy.png","path":"medias/candy.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\clock.png","path":"medias/clock.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\comment_bg.png","path":"medias/comment_bg.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\comment_bg1.webp","path":"medias/comment_bg1.webp","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\favicon.webp","path":"medias/favicon.webp","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\icp.png","path":"medias/icp.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\laba.png","path":"medias/laba.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\loading.svg","path":"medias/loading.svg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\logo.png","path":"medias/logo.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\logo.webp","path":"medias/logo.webp","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\map-visit.png","path":"medias/map-visit.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\map-visit原来.png","path":"medias/map-visit原来.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\miao.jpg","path":"medias/miao.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\qrcode_for_gh.jpg","path":"medias/qrcode_for_gh.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\robot.png","path":"medias/robot.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\robothui.png","path":"medias/robothui.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\yinghua.png","path":"medias/yinghua.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\animate\\animate.min.css","path":"libs/animate/animate.min.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\aos\\aos.css","path":"libs/aos/aos.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\aos\\aos.js","path":"libs/aos/aos.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\aplayer\\APlayer.min.css","path":"libs/aplayer/APlayer.min.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\aplayer\\APlayer.min.js","path":"libs/aplayer/APlayer.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\background\\canvas-nest.js","path":"libs/background/canvas-nest.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\background\\ribbon-dynamic.js","path":"libs/background/ribbon-dynamic.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\background\\ribbon-refresh.min.js","path":"libs/background/ribbon-refresh.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\background\\ribbon.min.js","path":"libs/background/ribbon.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\codeBlock\\codeBlockFuction.js","path":"libs/codeBlock/codeBlockFuction.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\codeBlock\\codeCopy.js","path":"libs/codeBlock/codeCopy.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\codeBlock\\codeLang.js","path":"libs/codeBlock/codeLang.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\codeBlock\\codeShrink.js","path":"libs/codeBlock/codeShrink.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\cryptojs\\crypto-js.min.js","path":"libs/cryptojs/crypto-js.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\dplayer\\DPlayer.min.css","path":"libs/dplayer/DPlayer.min.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\dplayer\\DPlayer.min.js","path":"libs/dplayer/DPlayer.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\echarts\\echarts.min.js","path":"libs/echarts/echarts.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\gitalk\\gitalk.css","path":"libs/gitalk/gitalk.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\gitalk\\gitalk.min.js","path":"libs/gitalk/gitalk.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\gitment\\gitment-default.css","path":"libs/gitment/gitment-default.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\gitment\\gitment.js","path":"libs/gitment/gitment.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\instantpage\\instantpage.js","path":"libs/instantpage/instantpage.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\jqcloud\\jqcloud-1.0.4.min.js","path":"libs/jqcloud/jqcloud-1.0.4.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\jqcloud\\jqcloud.css","path":"libs/jqcloud/jqcloud.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\jquery\\jquery.min.js","path":"libs/jquery/jquery.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\masonry\\masonry.pkgd.min.js","path":"libs/masonry/masonry.pkgd.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\materialize\\materialize.min.css","path":"libs/materialize/materialize.min.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\materialize\\materialize.min.js","path":"libs/materialize/materialize.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\others\\busuanzi.pure.mini.js","path":"libs/others/busuanzi.pure.mini.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\others\\clicklove.js","path":"libs/others/clicklove.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\scrollprogress\\scrollProgress.min.js","path":"libs/scrollprogress/scrollProgress.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\tocbot\\tocbot.css","path":"libs/tocbot/tocbot.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\tocbot\\tocbot.min.js","path":"libs/tocbot/tocbot.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\valine\\Valine.min.js","path":"libs/valine/Valine.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\valine\\av-min.js","path":"libs/valine/av-min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\banner\\0.jpg","path":"medias/banner/0.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\banner\\001.JPG","path":"medias/banner/001.JPG","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\banner\\1.jpg","path":"medias/banner/1.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\banner\\2.jpg","path":"medias/banner/2.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\banner\\3.jpg","path":"medias/banner/3.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\banner\\4.jpg","path":"medias/banner/4.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\banner\\5.jpg","path":"medias/banner/5.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\banner\\6.jpg","path":"medias/banner/6.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\banner\\7.jpg","path":"medias/banner/7.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\project-img\\es6pic.jpg","path":"medias/project-img/es6pic.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\project-img\\jspic.jpg","path":"medias/project-img/jspic.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\project-img\\jspicnoknow.jpg","path":"medias/project-img/jspicnoknow.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\project-img\\jssecret.jpg","path":"medias/project-img/jssecret.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\project-img\\vue-mall.png","path":"medias/project-img/vue-mall.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\project-img\\vue_system.png","path":"medias/project-img/vue_system.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\reward\\alipay.jpg","path":"medias/reward/alipay.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\reward\\wechat.png","path":"medias/reward/wechat.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\baozhu.png","path":"medias/spring-img/baozhu.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\caishen.png","path":"medias/spring-img/caishen.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\denglong.png","path":"medias/spring-img/denglong.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\dragon-boat.png","path":"medias/spring-img/dragon-boat.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\dragon.png","path":"medias/spring-img/dragon.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\fish.png","path":"medias/spring-img/fish.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\fudai.png","path":"medias/spring-img/fudai.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\fudao.png","path":"medias/spring-img/fudao.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\gu1.png","path":"medias/spring-img/gu1.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\gugu.png","path":"medias/spring-img/gugu.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\homes.png","path":"medias/spring-img/homes.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\huadeng.png","path":"medias/spring-img/huadeng.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\jiaozi.png","path":"medias/spring-img/jiaozi.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\lion.png","path":"medias/spring-img/lion.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\maozi.png","path":"medias/spring-img/maozi.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\miaohui.png","path":"medias/spring-img/miaohui.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\nianhuo.png","path":"medias/spring-img/nianhuo.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\shanzi.png","path":"medias/spring-img/shanzi.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\spring.png","path":"medias/spring-img/spring.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\tang.png","path":"medias/spring-img/tang.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\toc-banner\\aboutme.JPG","path":"medias/toc-banner/aboutme.JPG","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\toc-banner\\aboutme1.jpg","path":"medias/toc-banner/aboutme1.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\toc-banner\\aticalmode.jpg","path":"medias/toc-banner/aticalmode.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\medias\\toc-banner\\suibi1.jpg","path":"medias/toc-banner/suibi1.jpg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\MyGallery\\css\\baguetteBox.css","path":"libs/MyGallery/css/baguetteBox.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\MyGallery\\js\\baguetteBox.js","path":"libs/MyGallery/js/baguetteBox.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\css\\all.css","path":"libs/awesome/css/all.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-brands-400.eot","path":"libs/awesome/webfonts/fa-brands-400.eot","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-brands-400.svg","path":"libs/awesome/webfonts/fa-brands-400.svg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-brands-400.woff","path":"libs/awesome/webfonts/fa-brands-400.woff","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-brands-400.ttf","path":"libs/awesome/webfonts/fa-brands-400.ttf","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-brands-400.woff2","path":"libs/awesome/webfonts/fa-brands-400.woff2","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-regular-400.eot","path":"libs/awesome/webfonts/fa-regular-400.eot","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-regular-400.svg","path":"libs/awesome/webfonts/fa-regular-400.svg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-regular-400.ttf","path":"libs/awesome/webfonts/fa-regular-400.ttf","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-regular-400.woff","path":"libs/awesome/webfonts/fa-regular-400.woff","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-solid-900.eot","path":"libs/awesome/webfonts/fa-solid-900.eot","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-regular-400.woff2","path":"libs/awesome/webfonts/fa-regular-400.woff2","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-solid-900.svg","path":"libs/awesome/webfonts/fa-solid-900.svg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-solid-900.ttf","path":"libs/awesome/webfonts/fa-solid-900.ttf","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-solid-900.woff","path":"libs/awesome/webfonts/fa-solid-900.woff","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-solid-900.woff2","path":"libs/awesome/webfonts/fa-solid-900.woff2","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\css\\lightgallery.min.css","path":"libs/lightGallery/css/lightgallery.min.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\fonts\\lg.eot","path":"libs/lightGallery/fonts/lg.eot","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\fonts\\lg.svg","path":"libs/lightGallery/fonts/lg.svg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\fonts\\lg.woff","path":"libs/lightGallery/fonts/lg.woff","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\fonts\\lg.ttf","path":"libs/lightGallery/fonts/lg.ttf","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\img\\loading.gif","path":"libs/lightGallery/img/loading.gif","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\img\\video-play.png","path":"libs/lightGallery/img/video-play.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\img\\vimeo-play.png","path":"libs/lightGallery/img/vimeo-play.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\img\\youtube-play.png","path":"libs/lightGallery/img/youtube-play.png","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\js\\lightgallery-all.min.js","path":"libs/lightGallery/js/lightgallery-all.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\share\\css\\share.min.css","path":"libs/share/css/share.min.css","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\share\\fonts\\iconfont.eot","path":"libs/share/fonts/iconfont.eot","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\share\\fonts\\iconfont.svg","path":"libs/share/fonts/iconfont.svg","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\share\\fonts\\iconfont.woff","path":"libs/share/fonts/iconfont.woff","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\share\\fonts\\iconfont.ttf","path":"libs/share/fonts/iconfont.ttf","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\share\\js\\jquery.share.min.js","path":"libs/share/js/jquery.share.min.js","modified":1,"renderable":1},{"_id":"themes\\itsneko\\source\\libs\\share\\js\\social-share.min.js","path":"libs/share/js/social-share.min.js","modified":1,"renderable":1},{"_id":"source\\CNAME","path":"CNAME","modified":1,"renderable":0},{"_id":"source\\codes\\dictionary.php","path":"codes/dictionary.php","modified":1,"renderable":0},{"_id":"source\\images\\20220824-rain.jpg","path":"images/20220824-rain.jpg","modified":1,"renderable":0},{"_id":"source\\images\\builder-pattern-1.jpg","path":"images/builder-pattern-1.jpg","modified":1,"renderable":0},{"_id":"source\\images\\cross_domain_1.png","path":"images/cross_domain_1.png","modified":1,"renderable":0},{"_id":"source\\images\\doc_mysql_1.png","path":"images/doc_mysql_1.png","modified":1,"renderable":0},{"_id":"source\\images\\doc_mysql_2.png","path":"images/doc_mysql_2.png","modified":1,"renderable":0},{"_id":"source\\images\\doc_mysql_3.png","path":"images/doc_mysql_3.png","modified":1,"renderable":0},{"_id":"source\\images\\doc_mysql_4.png","path":"images/doc_mysql_4.png","modified":1,"renderable":0},{"_id":"source\\images\\goframe_note_1.png","path":"images/goframe_note_1.png","modified":1,"renderable":0},{"_id":"source\\images\\goland_1.png","path":"images/goland_1.png","modified":1,"renderable":0},{"_id":"source\\images\\goland_2.png","path":"images/goland_2.png","modified":1,"renderable":0},{"_id":"source\\images\\hexo_notes_2.png","path":"images/hexo_notes_2.png","modified":1,"renderable":0},{"_id":"source\\images\\happy.jpg","path":"images/happy.jpg","modified":1,"renderable":0},{"_id":"source\\images\\install_cacti_on_linux_1.png","path":"images/install_cacti_on_linux_1.png","modified":1,"renderable":0},{"_id":"source\\images\\install_cacti_on_linux_2.png","path":"images/install_cacti_on_linux_2.png","modified":1,"renderable":0},{"_id":"source\\images\\install_cacti_on_linux_3.png","path":"images/install_cacti_on_linux_3.png","modified":1,"renderable":0},{"_id":"source\\images\\linux_command_1.png","path":"images/linux_command_1.png","modified":1,"renderable":0},{"_id":"source\\images\\linux_install_nodejs_1.png","path":"images/linux_install_nodejs_1.png","modified":1,"renderable":0},{"_id":"source\\images\\linux_install_nodejs_2.png","path":"images/linux_install_nodejs_2.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_binlog_1.png","path":"images/mysql_binlog_1.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_binlog_2.png","path":"images/mysql_binlog_2.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_binlog_4.png","path":"images/mysql_binlog_4.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_binlog_3.png","path":"images/mysql_binlog_3.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_join_1.png","path":"images/mysql_join_1.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_1.png","path":"images/mysql_json_1.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_explain_1.png","path":"images/mysql_explain_1.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_10.png","path":"images/mysql_json_10.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_11.png","path":"images/mysql_json_11.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_12.png","path":"images/mysql_json_12.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_13.png","path":"images/mysql_json_13.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_14.png","path":"images/mysql_json_14.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_2.png","path":"images/mysql_json_2.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_3.png","path":"images/mysql_json_3.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_4.png","path":"images/mysql_json_4.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_5.png","path":"images/mysql_json_5.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_6.png","path":"images/mysql_json_6.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_7.png","path":"images/mysql_json_7.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_8.png","path":"images/mysql_json_8.png","modified":1,"renderable":0},{"_id":"source\\images\\mysql_json_9.png","path":"images/mysql_json_9.png","modified":1,"renderable":0},{"_id":"source\\images\\notepad_note_1.png","path":"images/notepad_note_1.png","modified":1,"renderable":0},{"_id":"source\\images\\notepad_note_2.png","path":"images/notepad_note_2.png","modified":1,"renderable":0},{"_id":"source\\images\\notepad_note_3.png","path":"images/notepad_note_3.png","modified":1,"renderable":0},{"_id":"source\\images\\notepad_note_4.png","path":"images/notepad_note_4.png","modified":1,"renderable":0},{"_id":"source\\images\\notepad_note_5.png","path":"images/notepad_note_5.png","modified":1,"renderable":0},{"_id":"source\\images\\php_bat_1.png","path":"images/php_bat_1.png","modified":1,"renderable":0},{"_id":"source\\images\\php_es_1.png","path":"images/php_es_1.png","modified":1,"renderable":0},{"_id":"source\\images\\php_es_2.png","path":"images/php_es_2.png","modified":1,"renderable":0},{"_id":"source\\images\\php_excel_note_1.png","path":"images/php_excel_note_1.png","modified":1,"renderable":0},{"_id":"source\\images\\php_excel_note_2.png","path":"images/php_excel_note_2.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_auth_format_1.png","path":"images/phpstorm_auth_format_1.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_auth_format_2.png","path":"images/phpstorm_auth_format_2.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_auth_format_3.png","path":"images/phpstorm_auth_format_3.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_auth_format_5.png","path":"images/phpstorm_auth_format_5.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_auth_format_4.png","path":"images/phpstorm_auth_format_4.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_auth_format_7.png","path":"images/phpstorm_auth_format_7.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_auth_format_6.png","path":"images/phpstorm_auth_format_6.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_auth_format_8.png","path":"images/phpstorm_auth_format_8.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_notes_1.png","path":"images/phpstorm_notes_1.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_notes_2.png","path":"images/phpstorm_notes_2.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_notes_3.png","path":"images/phpstorm_notes_3.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_show_dir_2.png","path":"images/phpstorm_show_dir_2.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_show_dir_1.png","path":"images/phpstorm_show_dir_1.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_show_history_1.png","path":"images/phpstorm_show_history_1.png","modified":1,"renderable":0},{"_id":"source\\images\\prototype-pattern-1.png","path":"images/prototype-pattern-1.png","modified":1,"renderable":0},{"_id":"source\\images\\phpstorm_show_history_2.png","path":"images/phpstorm_show_history_2.png","modified":1,"renderable":0},{"_id":"source\\images\\redis_monitor_1.png","path":"images/redis_monitor_1.png","modified":1,"renderable":0},{"_id":"source\\images\\redis_note_1.png","path":"images/redis_note_1.png","modified":1,"renderable":0},{"_id":"source\\images\\redis_note_2.png","path":"images/redis_note_2.png","modified":1,"renderable":0},{"_id":"source\\images\\redis_note_3.png","path":"images/redis_note_3.png","modified":1,"renderable":0},{"_id":"source\\images\\redis_note_4.png","path":"images/redis_note_4.png","modified":1,"renderable":0},{"_id":"source\\images\\show_mysql_version_on_linux_1.png","path":"images/show_mysql_version_on_linux_1.png","modified":1,"renderable":0},{"_id":"source\\images\\show_mysql_version_on_linux_2.png","path":"images/show_mysql_version_on_linux_2.png","modified":1,"renderable":0},{"_id":"source\\images\\show_mysql_version_on_linux_3.png","path":"images/show_mysql_version_on_linux_3.png","modified":1,"renderable":0},{"_id":"source\\images\\show_mysql_version_on_linux_4.png","path":"images/show_mysql_version_on_linux_4.png","modified":1,"renderable":0},{"_id":"source\\images\\simple-factory-pattern-1.jpg","path":"images/simple-factory-pattern-1.jpg","modified":1,"renderable":0},{"_id":"source\\images\\soft_design_1.png","path":"images/soft_design_1.png","modified":1,"renderable":0},{"_id":"source\\images\\split_txt_1.png","path":"images/split_txt_1.png","modified":1,"renderable":0},{"_id":"source\\images\\split_txt_2.png","path":"images/split_txt_2.png","modified":1,"renderable":0},{"_id":"source\\images\\split_txt_3.png","path":"images/split_txt_3.png","modified":1,"renderable":0},{"_id":"source\\images\\tec_manage_1.png","path":"images/tec_manage_1.png","modified":1,"renderable":0},{"_id":"source\\images\\test_ab_1.png","path":"images/test_ab_1.png","modified":1,"renderable":0},{"_id":"source\\images\\test_ab_2.png","path":"images/test_ab_2.png","modified":1,"renderable":0},{"_id":"source\\images\\test_ab_3.png","path":"images/test_ab_3.png","modified":1,"renderable":0},{"_id":"source\\images\\thinkphp_note_1.png","path":"images/thinkphp_note_1.png","modified":1,"renderable":0},{"_id":"source\\images\\use_mysql_on_linux_1.png","path":"images/use_mysql_on_linux_1.png","modified":1,"renderable":0},{"_id":"source\\images\\use_mysql_on_linux_2.png","path":"images/use_mysql_on_linux_2.png","modified":1,"renderable":0},{"_id":"source\\images\\window_move_desktop_1.png","path":"images/window_move_desktop_1.png","modified":1,"renderable":0},{"_id":"source\\images\\window_move_desktop_2.png","path":"images/window_move_desktop_2.png","modified":1,"renderable":0},{"_id":"source\\images\\window_move_desktop_3.png","path":"images/window_move_desktop_3.png","modified":1,"renderable":0},{"_id":"source\\images\\window_move_desktop_4.png","path":"images/window_move_desktop_4.png","modified":1,"renderable":0},{"_id":"source\\images\\window_move_desktop_5.png","path":"images/window_move_desktop_5.png","modified":1,"renderable":0},{"_id":"source\\images\\wx_msg_push_1.png","path":"images/wx_msg_push_1.png","modified":1,"renderable":0},{"_id":"source\\images\\wx_msg_push_2.png","path":"images/wx_msg_push_2.png","modified":1,"renderable":0},{"_id":"source\\images\\xdebug_1.png","path":"images/xdebug_1.png","modified":1,"renderable":0},{"_id":"source\\images\\xdebug_2.png","path":"images/xdebug_2.png","modified":1,"renderable":0},{"_id":"source\\images\\xdebug_3.png","path":"images/xdebug_3.png","modified":1,"renderable":0},{"_id":"source\\images\\xdebug_4.png","path":"images/xdebug_4.png","modified":1,"renderable":0},{"_id":"source\\images\\xdebug_5.png","path":"images/xdebug_5.png","modified":1,"renderable":0},{"_id":"source\\images\\xdebug_6.png","path":"images/xdebug_6.png","modified":1,"renderable":0},{"_id":"source\\vue-practice\\vue.js","path":"vue-practice/vue.js","modified":1,"renderable":0},{"_id":"source\\vue-practice\\01-todolist\\index.html","path":"vue-practice/01-todolist/index.html","modified":1,"renderable":0},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\1.jpg","path":"gallery/2016.4——牛背山之旅/images/1.jpg","modified":1,"renderable":0},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\10.jpg","path":"gallery/2016.4——牛背山之旅/images/10.jpg","modified":1,"renderable":0},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\2.jpg","path":"gallery/2016.4——牛背山之旅/images/2.jpg","modified":1,"renderable":0},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\3.jpg","path":"gallery/2016.4——牛背山之旅/images/3.jpg","modified":1,"renderable":0},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\4.jpg","path":"gallery/2016.4——牛背山之旅/images/4.jpg","modified":1,"renderable":0},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\5.jpg","path":"gallery/2016.4——牛背山之旅/images/5.jpg","modified":1,"renderable":0},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\6.jpg","path":"gallery/2016.4——牛背山之旅/images/6.jpg","modified":1,"renderable":0},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\7.jpg","path":"gallery/2016.4——牛背山之旅/images/7.jpg","modified":1,"renderable":0},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\8.jpg","path":"gallery/2016.4——牛背山之旅/images/8.jpg","modified":1,"renderable":0},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\9.jpg","path":"gallery/2016.4——牛背山之旅/images/9.jpg","modified":1,"renderable":0}],"Cache":[{"_id":"source\\404.md","hash":"bc3f45d4cee6ab48bc2eb44c78cdda2d4d5df2f0","modified":1716261558083},{"_id":"source\\CNAME","hash":"6fa3d17077b164778ed28f3ae6a719d973da8558","modified":1716261558083},{"_id":"source\\_data\\friends.json","hash":"37d1453d2328f0eb1aaf0235d7c7a810f18f27fb","modified":1716261558084},{"_id":"source\\_data\\collection.json","hash":"8e68ec5aaf044fd88c7edeec63861913a26712fb","modified":1716261558084},{"_id":"source\\_data\\gallery.json","hash":"7178ee9f9c83796209f94abeca4f0b2349b5282e","modified":1716261558084},{"_id":"source\\_posts\\关于itsNeko开源博客介绍.md.bak","hash":"bd51eac15342979bdf300b06560285f02ce8324a","modified":1729216470905},{"_id":"source\\_posts\\技术文章模板.md.bak","hash":"387a16fd7124142855d5f9f60d242baf2bbd7ade","modified":1729216559902},{"_id":"source\\_posts\\随笔文章模板.md.bak","hash":"974539c75aa629d523471609ac935bee5c141f04","modified":1729216012322},{"_id":"source\\books\\index.md","hash":"e5c1dfb5d4c959536ee506e6244009a30e8f863e","modified":1716261558138},{"_id":"source\\categories\\index.md","hash":"8f0f68cef239b521f89a6a5f2c59c05d2fb28f84","modified":1716261558139},{"_id":"source\\about\\index.md","hash":"f3bc30a9543f13c560a2c3ea8244692b7529e0d5","modified":1716261558138},{"_id":"source\\codes\\dictionary.php","hash":"8ffeff1652419fe8ef5df9611594ac17c301c10a","modified":1716261558163},{"_id":"source\\codes\\md5.min.js","hash":"5ad60095f74ca0a9d9cd595bc4a3fa089bf8feb9","modified":1716261558164},{"_id":"source\\collection\\index.md","hash":"a7f51f9e006c738d35410d00bd23c33ad9f97a01","modified":1716261558164},{"_id":"source\\contact\\index.md","hash":"b8fcbcd83336019e2a9aa8258df4f468666ff872","modified":1716261558164},{"_id":"source\\donate\\index.md","hash":"4470c230f56b367cc04f2f766c0ef6a7b125da8b","modified":1716261558164},{"_id":"source\\gallery\\index.md","hash":"8cc6b02faa2863f0e05ae3df5f3ec8ddc35e0e01","modified":1716261558293},{"_id":"source\\images\\builder-pattern-1.jpg","hash":"34a6c03013223718eaa0c7636beb78d46b35f6e7","modified":1716261558325},{"_id":"source\\images\\doc_mysql_1.png","hash":"3db1cf21d4e67470fe7898026f43c600f090eef3","modified":1716261558326},{"_id":"source\\images\\doc_mysql_2.png","hash":"cd32099beafdd47c475daa70857b7a45d1f46c30","modified":1716261558327},{"_id":"source\\images\\doc_mysql_3.png","hash":"5d47f98e2dc6951816d279009930fa68551f17e8","modified":1716261558327},{"_id":"source\\images\\doc_mysql_4.png","hash":"23bcb3da648d22e943d5cbba8d7cde03e2753449","modified":1716261558328},{"_id":"source\\images\\goframe_note_1.png","hash":"413346c721df5130e69785f6e5556f79e42f15e8","modified":1716261558328},{"_id":"source\\images\\hexo_notes_2.png","hash":"71e7313670c2d8bf6817d5fb37c3291ddb645aba","modified":1716261558330},{"_id":"source\\images\\install_cacti_on_linux_1.png","hash":"f4ed1ccad16b5769c728f9ab6815909b01624fb4","modified":1716261558331},{"_id":"source\\images\\install_cacti_on_linux_3.png","hash":"8fe3dac30163d600415565b57d763b220ba8687c","modified":1716261558332},{"_id":"source\\images\\linux_command_1.png","hash":"b80d4cc94726607774f406a04b721cd5a01384f8","modified":1716261558332},{"_id":"source\\images\\linux_install_nodejs_1.png","hash":"fa6c8dbab61ab6ae5b1d3f5edd1256229ccaaf45","modified":1716261558333},{"_id":"source\\images\\linux_install_nodejs_2.png","hash":"30bebc05e6a6b1176c1f20400406eda5781030f6","modified":1716261558333},{"_id":"source\\images\\mysql_binlog_1.png","hash":"0dad6428b0c10e9510ff11fb0540fef8a06297ae","modified":1716261558333},{"_id":"source\\images\\mysql_binlog_2.png","hash":"d84165bae1bb641aa1f3d9a72af80e8b12b2aa88","modified":1716261558334},{"_id":"source\\images\\mysql_binlog_4.png","hash":"bd1c4ee34d349b352a9791db363dddce70342f13","modified":1716261558334},{"_id":"source\\images\\mysql_binlog_3.png","hash":"0d7796aaf949930238aa8d86eb790c167ef8a1e0","modified":1716261558334},{"_id":"source\\images\\mysql_json_1.png","hash":"a99351e227c63db4d313cffda4cbb1fd10ef2430","modified":1716261558336},{"_id":"source\\images\\mysql_explain_1.png","hash":"92a555e7f5791a79a6a6e603a8c1aeffc7d8fa7e","modified":1716261558335},{"_id":"source\\images\\mysql_json_10.png","hash":"bf1003076ff463b32d17df50f53fbb70ecd7fbda","modified":1716261558337},{"_id":"source\\images\\mysql_json_11.png","hash":"96ccdfc872acc319fd8db2b129a972fb0636cb7a","modified":1716261558337},{"_id":"source\\images\\mysql_json_12.png","hash":"b470d02d2876055e168999fc4d7fd965e9ebf2e7","modified":1716261558337},{"_id":"source\\images\\mysql_json_13.png","hash":"950f6f2ae482dcb0931794147b410358b6887c6c","modified":1716261558338},{"_id":"source\\images\\mysql_json_14.png","hash":"4904e15212997c6c52f1fcbf582a9fa0c7dfda00","modified":1716261558338},{"_id":"source\\images\\mysql_json_2.png","hash":"2ebe822563284d7a41f96674f234bca2beaf379b","modified":1716261558339},{"_id":"source\\images\\mysql_json_3.png","hash":"9c4cdf6592896930097256a044253912c1bcfd2f","modified":1716261558339},{"_id":"source\\images\\mysql_json_4.png","hash":"e4a16ff55798e631c6410aee54ddec6dbf2a1d94","modified":1716261558339},{"_id":"source\\images\\mysql_json_5.png","hash":"4e01029549cfe542bb80fb52e5f90480962771aa","modified":1716261558340},{"_id":"source\\images\\mysql_json_6.png","hash":"052bbd325a833ef7a41f73127958507273f84121","modified":1716261558340},{"_id":"source\\images\\mysql_json_7.png","hash":"d5ab26a2c68d9ea11c3338e4a4e19e13693e8d5c","modified":1716261558341},{"_id":"source\\images\\mysql_json_8.png","hash":"fba6352cf2ff124e83171c3d9a3a162894bd32d0","modified":1716261558341},{"_id":"source\\images\\mysql_json_9.png","hash":"9c6ff2284a999b6736c9a9a0d0e43b964e5e15bd","modified":1716261558341},{"_id":"source\\images\\notepad_note_3.png","hash":"d751a257502a2b89b64e7cdaede363fae8af4983","modified":1716261558343},{"_id":"source\\images\\notepad_note_4.png","hash":"507d5d648acaa56e9eea92ea739cc075a099e299","modified":1716261558343},{"_id":"source\\images\\notepad_note_5.png","hash":"136a3d55c1bb0f287e7ae30a208a2f30f3172edb","modified":1716261558344},{"_id":"source\\images\\php_es_1.png","hash":"c3f9ff0fd16436ba0084215f6a3a88518b37ff52","modified":1716261558346},{"_id":"source\\images\\php_es_2.png","hash":"51bd256d5605c94c5c88aadcc71654cfa6c4cb44","modified":1716261558346},{"_id":"source\\images\\php_excel_note_1.png","hash":"59d1639452b1a92cf3309ed22c59198c83decab5","modified":1716261558347},{"_id":"source\\images\\php_excel_note_2.png","hash":"8d5ec6cbfe5edc268def963a6b5c75bb5eb3869d","modified":1716261558347},{"_id":"source\\images\\phpstorm_auth_format_1.png","hash":"a3433e773db0d668ead412985d07a6c3abfe4131","modified":1716261558348},{"_id":"source\\images\\phpstorm_auth_format_2.png","hash":"0cda6c6b191b32817a5ea5922bd20746dfd35f65","modified":1716261558348},{"_id":"source\\images\\phpstorm_auth_format_3.png","hash":"0e5a1c41eba1ab3fc1643984a15c281fac7bb86f","modified":1716261558349},{"_id":"source\\images\\phpstorm_auth_format_5.png","hash":"d0cd2cf651eb186e5979eaa7781c415ab5773aa5","modified":1716261558350},{"_id":"source\\images\\phpstorm_auth_format_4.png","hash":"007d1827ff107bd8325af138e8ca825257bae1b9","modified":1716261558350},{"_id":"source\\images\\phpstorm_auth_format_7.png","hash":"d6a8e0b6a5d1985f892c9b615c304cbbe42bf4c1","modified":1716261558350},{"_id":"source\\images\\phpstorm_auth_format_6.png","hash":"75c1e1fdea2d00551cd3b912a02c64bd7f56cb9e","modified":1716261558350},{"_id":"source\\images\\phpstorm_auth_format_8.png","hash":"90f23258934e6d8885dff476354dd81417a6cf6f","modified":1716261558351},{"_id":"source\\images\\phpstorm_notes_1.png","hash":"a0c0e9cf929d65bc22225722783b84c1cc69b53c","modified":1716261558351},{"_id":"source\\images\\phpstorm_show_dir_2.png","hash":"13443eb8de287232b11af68a5876ace9d5f123ca","modified":1716261558353},{"_id":"source\\images\\phpstorm_show_dir_1.png","hash":"67dcf29f2fddc3a71272377c133981ebed262667","modified":1716261558353},{"_id":"source\\images\\prototype-pattern-1.png","hash":"9ac4b232d275ecb67661923c5a2de3a5ad99b451","modified":1716261558356},{"_id":"source\\images\\redis_monitor_1.png","hash":"77aca7d9512f58d4b0916b6c2f31860aca25500f","modified":1720075433117},{"_id":"source\\images\\redis_note_1.png","hash":"d1cd8a9ab74e07926cee0e04fb3c0ba7a424c29a","modified":1716261558356},{"_id":"source\\images\\redis_note_2.png","hash":"5bcbf4cbe2295b067500a21f660e4291fa98c9bb","modified":1716261558357},{"_id":"source\\images\\redis_note_3.png","hash":"0d517f2af3fd92bbe0b812c9c861612aa3a7a89e","modified":1716261558358},{"_id":"source\\images\\redis_note_4.png","hash":"c1b4e1edca1d957c2022434f538cda392c955bf0","modified":1716261558358},{"_id":"source\\images\\show_mysql_version_on_linux_1.png","hash":"92776da9123a8ce1fddb5005bc23c08bf43c0276","modified":1716261558358},{"_id":"source\\images\\show_mysql_version_on_linux_2.png","hash":"77207eb58eb57309d7a30a9d3727779f26364310","modified":1716261558358},{"_id":"source\\images\\show_mysql_version_on_linux_3.png","hash":"f92d73246c964be7b598c2be34b3dc4cb1970808","modified":1716261558359},{"_id":"source\\images\\show_mysql_version_on_linux_4.png","hash":"3b8e3f0a39e20abac6147dc727935dc62190e16c","modified":1716261558359},{"_id":"source\\images\\simple-factory-pattern-1.jpg","hash":"08820001d5ddf010961e6a82f878143c2e58ce4c","modified":1716261558360},{"_id":"source\\images\\split_txt_1.png","hash":"d916ddfd09fe120bf6f8aa3a0ee31e7db9eaf8b5","modified":1716261558362},{"_id":"source\\images\\split_txt_2.png","hash":"f4acd47a727652edc34d5dc23583028fb1464276","modified":1716261558362},{"_id":"source\\images\\split_txt_3.png","hash":"309e21a1f62353938044266851278d8bf325f1d5","modified":1716261558362},{"_id":"source\\images\\tec_manage_1.png","hash":"f75391ead2e4bffd1f20f2269a19a40d946f1729","modified":1716261558363},{"_id":"source\\images\\test_ab_2.png","hash":"fe920b7207d227cf93ab352645c2b312cb5e198c","modified":1716261558363},{"_id":"source\\images\\test_ab_3.png","hash":"9782f11e4927b7c6efc34cba777c788180604af0","modified":1716261558364},{"_id":"source\\images\\use_mysql_on_linux_1.png","hash":"3e190f4fe664b16c166b201535be978063a2994b","modified":1716261558367},{"_id":"source\\images\\use_mysql_on_linux_2.png","hash":"24e3539aa3ee63d769e0c9b854f90204d7e2784a","modified":1716261558367},{"_id":"source\\images\\window_move_desktop_2.png","hash":"d12bdc4eb37512fcbf57e591ffeb15d1bb9929cb","modified":1716261558368},{"_id":"source\\images\\window_move_desktop_3.png","hash":"6ded8e9d23b1866c775885902558178a4a938d85","modified":1716261558369},{"_id":"source\\images\\window_move_desktop_4.png","hash":"87530e039fb8a6e7066acf9c68b624e7582739f0","modified":1716261558369},{"_id":"source\\images\\wx_msg_push_1.png","hash":"95a0bdee3eb667329151445aad05a4b9fdddf4e3","modified":1716261558370},{"_id":"source\\images\\wx_msg_push_2.png","hash":"f6df1e3832920438862823f1851515fd02b02d0c","modified":1716261558371},{"_id":"source\\images\\xdebug_5.png","hash":"03fcaad400ce6132d71f9b3c6fc4590f8cff4e40","modified":1729664273245},{"_id":"source\\musics\\index.md","hash":"13d672fdf5f0ab3d868dd288e7b4f130763508c5","modified":1716261558371},{"_id":"source\\tags\\index.md","hash":"33c609f846113ae37d38476ad28c1ec0448b861e","modified":1716261558371},{"_id":"source\\ticktack\\index.md","hash":"515c3a6122572130c262b620817ce9a14ab7ec9a","modified":1716261558371},{"_id":"source\\videos\\index.md","hash":"518c0ee65ed8c885e8f4d2ba779883815a680084","modified":1716261558372},{"_id":"source\\_posts\\Git\\Git使用笔记.md","hash":"2f762042cab994bf679908c431b58e71339c1e0c","modified":1729216012362},{"_id":"source\\_posts\\GitBook\\GitBook使用笔记.md","hash":"31c4e2c7dd74737f72bcddfcb7b6c998e44bac52","modified":1716261558085},{"_id":"source\\_posts\\Hexo\\Hexo使用笔记.md","hash":"2131b8b3830539ebcec8803923a75c67e765f76a","modified":1729216012195},{"_id":"source\\_posts\\Golang\\Goframe框架使用.md","hash":"822c8bad30b5a7edfb80e0e7ae440b0808bd44da","modified":1716261558085},{"_id":"source\\_posts\\Golang\\Go语言基础.md","hash":"06958f5db82c4db679b903fa66287a7514310358","modified":1716261558086},{"_id":"source\\_posts\\Lua\\Lua笔记.md","hash":"f898b75e552d3aed90a94fc4b12ae9128cf6c580","modified":1729216012394},{"_id":"source\\_posts\\Markdown\\Markdown笔记.md","hash":"a705b70ce09a147dc80721b6959f99708fa5b219","modified":1716261558094},{"_id":"source\\_posts\\MongoDB\\MongoDB笔记.md","hash":"5b4f8ec85b8485ce7676088653997853c0baef12","modified":1716261558094},{"_id":"source\\_posts\\MySQL\\B树与B+树.md","hash":"4053b3d84182bc919659f261b3dce9b589efd606","modified":1716261558094},{"_id":"source\\_posts\\MySQL\\Linux下操作MySQL.md","hash":"f1bf4063ca0037be1a1404387b91f47de78bcfee","modified":1716261558095},{"_id":"source\\_posts\\MySQL\\DOS命令进入MySQL.md","hash":"8e465a8a06fb963d3d33a30b61c36ab6e7e4b343","modified":1716261558094},{"_id":"source\\_posts\\MySQL\\MySQL中的JSON.md","hash":"7ffe5c535578382ffe671158b1ef6aa5d856e190","modified":1716261558095},{"_id":"source\\_posts\\MySQL\\MySQL中的binlog.md","hash":"0a6f228b3892ca7bf71784936d7e203d46ca875c","modified":1716261558096},{"_id":"source\\_posts\\MySQL\\MySQL中decimal类型.md","hash":"c5c585847cdc1fc72a215640d04a07633464bd48","modified":1716261558095},{"_id":"source\\_posts\\MySQL\\MySQL中的explain.md","hash":"cbe95ee1360fe1cbbd9170a7ab63f3f32ababb09","modified":1716261558096},{"_id":"source\\_posts\\MySQL\\MySQL函数.md","hash":"8660147f32baafa4992a95dc48a51a9c784fa401","modified":1716261558097},{"_id":"source\\_posts\\MySQL\\MySQL数据库优化.md","hash":"cb0942eaaec58217f1fa14374146192ce3a39918","modified":1716261558097},{"_id":"source\\_posts\\MySQL\\MySQL常见报错问题.md","hash":"bfc5229b3eecbe7f8eaf577cd4c538587b116b54","modified":1716261558097},{"_id":"source\\_posts\\MySQL\\MySQL架构设计.md","hash":"fc1ec7dc78561f4ba583c3cb030f8c7534bcf3a5","modified":1716261558097},{"_id":"source\\_posts\\MySQL\\MySQL笔记.md","hash":"517f17609fb95597dfe02f8866a108415d4f5773","modified":1716261558098},{"_id":"source\\_posts\\MySQL\\MySQL索引.md","hash":"ad238ce3e4c5eb790bb7784ab263b266faf168f9","modified":1716261558098},{"_id":"source\\_posts\\MySQL\\MySQL联表查询.md","hash":"f9b531d160ff420dae06edae6738c83871edac9c","modified":1716261558098},{"_id":"source\\_posts\\MySQL\\MySQL脚本执行中，预防误处理数据的方法.md","hash":"cb3dc12cdb752995ab170442bd674e0b19d76e7b","modified":1716261558098},{"_id":"source\\_posts\\MySQL\\MySQL自定义函数.md","hash":"5710f740e99bd45149cfc45df4c2b627f6e063f9","modified":1716261558099},{"_id":"source\\_posts\\MySQL\\常用的SQL.md","hash":"d21c5772012fe990e15b8e7a3d079fb11f98c442","modified":1716261558099},{"_id":"source\\_posts\\MySQL\\数据库三范式.md","hash":"c402a7495659defffde7a83cd2dea87c6cadb3ca","modified":1716261558099},{"_id":"source\\_posts\\MySQL\\谈谈MySQL中的聚簇索引和非聚簇索引.md","hash":"af99e3ed59f72928ef0ea3beb7b5163bc9d494d1","modified":1716261558099},{"_id":"source\\_posts\\Office\\Excel使用小技巧.md","hash":"620a0bb1fd53d748515aa137b4670d8da7ddc31a","modified":1716261558100},{"_id":"source\\_posts\\Oracle\\Oracle笔记.md","hash":"2d6e7dcf8c92105566345ad6f0c10ace65e99bec","modified":1716261558100},{"_id":"source\\_posts\\R\\R语言学习.md","hash":"6fa4427482512083bf82a4bdaa35641df4fbe9f7","modified":1729216470879},{"_id":"source\\_posts\\Prolog\\Prolog笔记.md","hash":"6afbd059a11f104d1250a6c444345ef859d280da","modified":1716261558117},{"_id":"source\\_posts\\SEO\\SEO——权重转移.md","hash":"8ba5054f29f0d45b506c0178f8d0bba45f0809ab","modified":1729216470900},{"_id":"source\\_posts\\Redis\\Redis中set、setex、setnx的用法和区别.md","hash":"18ee7da49d30e46921fec0ba5ff6857df7982812","modified":1731654505726},{"_id":"source\\_posts\\Redis\\常用的Redis命令.md","hash":"9e61a2f814691c8510b0395d8ae927320f7c1e7b","modified":1731652272561},{"_id":"source\\_posts\\产品\\产品设计.md","hash":"916cb62f307759ad3625a4269dd7629eb8659653","modified":1729216470794},{"_id":"source\\_posts\\产品\\云闪付的商业模式.md","hash":"911a053e2854460bd71b2f046e4da8ce2f69ebee","modified":1729216470911},{"_id":"source\\_posts\\产品\\锚定效应.md","hash":"4d24110d4ea6dc463267bfc2bda542bd02b0eb1d","modified":1729216470863},{"_id":"source\\_posts\\其他\\心跳包机制.md","hash":"13915408269174eb7b473fe393e2b646312196d6","modified":1729216559882},{"_id":"source\\_posts\\其他\\常用工具推荐.md","hash":"b4b10b19a9dd29050739a9fa14ebabe5132a96e0","modified":1729216470789},{"_id":"source\\_posts\\其他\\死锁.md","hash":"fea362bb7e79585b8e345b2631d2158da0951002","modified":1729216559907},{"_id":"source\\_posts\\其他\\池化技术.md","hash":"c558f316622438d298e319560f80dc9fb410efff","modified":1729216559898},{"_id":"source\\_posts\\其他\\线程安全.md","hash":"8163044172fb9d0a4bea4b0429d404232d4a2dc5","modified":1729216559852},{"_id":"source\\_posts\\数据\\个人收集的一些公用数据.md","hash":"aee40d6f89c4a21073a854f515570bfbe8591962","modified":1729216645689},{"_id":"source\\_posts\\杂谈\\2018-03-29杂谈.md","hash":"66dc599e070166d597ee79e9e75ab3385f60827e","modified":1729216645776},{"_id":"source\\_posts\\杂谈\\2022-08-24杂谈.md","hash":"94d58e89d72da0be79575f8ae4f03319406338c2","modified":1729216645674},{"_id":"source\\_posts\\杂谈\\书单心愿墙.md","hash":"5962d81a88ca8579b5d76b6ff064b0b75a00f6fd","modified":1729216645750},{"_id":"source\\_posts\\测试\\性能测试——ab.exe.md","hash":"bb685fca423f277de822bb973bc1f0939dda2d10","modified":1729216751905},{"_id":"source\\_posts\\第三方\\七牛云图片.md","hash":"89fa22636bac3344369ea31b0f0425a239ad0843","modified":1729216751993},{"_id":"source\\_posts\\第三方\\微信公众号消息推送.md","hash":"cb7e5db3b1f4e8aa95e8032c1deef094fd945679","modified":1729216752026},{"_id":"source\\_posts\\算法\\滑动窗口算法.md","hash":"1b0b82f2272d815e46e6930aeedb3f586d35b51b","modified":1731485859171},{"_id":"source\\_posts\\编辑器\\Notepad++常用操作.md","hash":"ff0d04dafe8e8cb9a9cef99a10228d9234eb4ce7","modified":1729216751873},{"_id":"source\\_posts\\系统设计及优化\\PHP实现熔断机制.md","hash":"20d72bc36195d931643dbe19125a12ad294bbaaa","modified":1731476691611},{"_id":"source\\gallery\\2016.4——牛背山之旅\\index.md","hash":"7df968d95f6c6778bdb6494d5abbfeb842d596fa","modified":1716261558293},{"_id":"source\\vue-practice\\01-todolist\\index.html","hash":"0cc74e177337d8cea7b7a4d08bee64305aa5e832","modified":1716261558372},{"_id":"source\\_posts\\HTML\\CSS\\CSS笔记.md","hash":"d64886586b65194f4e9059bd5cb803c867d34ee3","modified":1729216012185},{"_id":"source\\_posts\\HTML\\JQuery\\Jquery笔记.md","hash":"ea6952885aed43fb6245f55714833d3d5661c50e","modified":1729216012352},{"_id":"source\\_posts\\HTML\\JQuery\\JQuery面向对象写法.md","hash":"4576c2d6fd2b82192a7c6633b18712ce6e29efc3","modified":1729216012138},{"_id":"source\\_posts\\HTML\\JS\\JS点击复制指定内容.md","hash":"4a299a88411a6b628a4fff5c5b4043880f348356","modified":1729216012552},{"_id":"source\\_posts\\HTML\\JQuery\\利用JQuery进行md5加密.md","hash":"7c00d92599e2063edf4ddda2db9183b54282c4ac","modified":1729216012492},{"_id":"source\\_posts\\HTML\\JS\\JavaScript笔记.md","hash":"8940ca4e1c13a3cba8bdccaef4ca6190aecc96d7","modified":1729216012253},{"_id":"source\\_posts\\HTML\\其它\\Html网页内容转为pdf文件.md","hash":"154380e4b54cd7691dee541c8596e32bf43defe4","modified":1729216012295},{"_id":"source\\_posts\\HTML\\其它\\富文本编辑器.md","hash":"890875bdc51833c94eccb1cb4c917f429d93e9c8","modified":1729216012459},{"_id":"source\\_posts\\HTML\\其它\\跨域问题.md","hash":"854f5b8fe6097bfeb4d05ee3411bbaa194a91f70","modified":1729216012436},{"_id":"source\\_posts\\HTML\\其它\\常见颜色值.md","hash":"15a13af7c6ae38dd2367efccc58864331e135245","modified":1729216012476},{"_id":"source\\_posts\\HTML\\其它\\高德地图API使用.md","hash":"091e5f0bed70cb9647960574168679b6103678f5","modified":1729216012576},{"_id":"source\\_posts\\PHP\\ThinkPHP\\ThinkPHP5 中clone Query对象.md","hash":"63fa1441d4c19ab94acb0bcbe7d7769bf94695b8","modified":1729216012189},{"_id":"source\\_posts\\PHP\\ThinkPHP\\ThinkPHP5 中order的使用.md","hash":"de4bd13b14337863425e91eee2fbe4dddbe9b6a7","modified":1729216012200},{"_id":"source\\_posts\\PHP\\ThinkPHP\\ThinkPHP5 中rule规则.md","hash":"7a9b9b937060a1b172fe966f98f37ee806393a78","modified":1729216012643},{"_id":"source\\_posts\\PHP\\ThinkPHP\\ThinkPHP5框架where条件中含有or的使用方法.md","hash":"45183b8008513af432bb2bade06554d7b322f94a","modified":1729216012496},{"_id":"source\\_posts\\PHP\\ThinkPHP\\ThinkPHP5使用笔记.md","hash":"1ceeab1339b4dd26845b08ec68282278d4323708","modified":1729216012318},{"_id":"source\\_posts\\PHP\\composer\\php中composer的使用.md","hash":"cfd6e1fe6a39986ea25fe65bc92479d645f32f49","modified":1729216012133},{"_id":"source\\_posts\\PHP\\trait\\php中trait的用法.md","hash":"1c2c018569b91ee45808d41ce3d1d75dcba4316d","modified":1729216012264},{"_id":"source\\_posts\\PHP\\其他\\PHPExcel笔记.md","hash":"6b3db908f9e177b38981e4eaafd31b0445ed079b","modified":1729216012530},{"_id":"source\\_posts\\PHP\\其他\\PHP中...的用法.md","hash":"383690bcfbf66c9235988845d71b657ac6e3011c","modified":1729216012556},{"_id":"source\\_posts\\PHP\\其他\\PHP中define和const的区别.md","hash":"6282d253e4c084d9ddf81225e615d0597d14d650","modified":1729216012501},{"_id":"source\\_posts\\PHP\\其他\\PHP中if else的优化方案.md","hash":"3bd1035ffb151a4fb4ff55e75a057f317ce8688a","modified":1729216012144},{"_id":"source\\_posts\\PHP\\其他\\PHP中unset的一些使用.md","hash":"9bfafc9cc814ee841bed1205d1d945fd8534d3b3","modified":1729216012204},{"_id":"source\\_posts\\PHP\\其他\\PHP中isset与array_key_exists的性能对比.md","hash":"60b74f86bc71a95bcaf47fca86d118e7115eaab0","modified":1729216012410},{"_id":"source\\_posts\\PHP\\其他\\PHP中不太常用的函数.md","hash":"23a47550eb6e45585afc9d58f5527bc8032fdf1c","modified":1729216074074},{"_id":"source\\_posts\\PHP\\其他\\PHP中数组内容依次赋值给变量.md","hash":"b1b9deaa71352a4edb52a97ff7d3a4ae8eca494f","modified":1729216128586},{"_id":"source\\_posts\\PHP\\其他\\PHP中，this、self、static的区别.md","hash":"b774c88e978fa14dbf2e227d750ebeb3caa8de3b","modified":1729216391249},{"_id":"source\\_posts\\PHP\\其他\\PHP中，通过&改变变量的值，效率如何.md","hash":"8a0a7eef224c0a79208a21fa66539cea0098d737","modified":1729216391325},{"_id":"source\\_posts\\PHP\\其他\\PHP任务加锁.md","hash":"58f5667537e3e912024280d308e7e39d3b240199","modified":1729227737121},{"_id":"source\\_posts\\PHP\\其他\\PHP使用ES.md","hash":"55783edca71ff5a46f2b594f4611e50b6c16a8eb","modified":1729216391276},{"_id":"source\\_posts\\PHP\\其他\\PHP实现AES加解密.md","hash":"934d5160680bd18ebf9438288b6d529eabf229e8","modified":1729216391265},{"_id":"source\\_posts\\PHP\\其他\\PHP常用的算法.md","hash":"d6dcc6da54c14935cf50fa547beeacb98321e3cd","modified":1729216391255},{"_id":"source\\_posts\\PHP\\其他\\PHP实现方法运行前(后)执行指定的程序.md","hash":"a58f5c3fdd07a3254d61bb8c9acfc93b7cd4b234","modified":1729216391355},{"_id":"source\\_posts\\PHP\\其他\\PHP常用的魔术方法.md","hash":"8a6e66584dc0b7aa581ddb0dd4192dd8e76796a3","modified":1729216391320},{"_id":"source\\_posts\\PHP\\其他\\PHP常见面试题.md","hash":"86f8990650d97a0fe9eb05c9a77d9ba5601de746","modified":1729216391282},{"_id":"source\\_posts\\PHP\\其他\\PHP生成数据字典.md","hash":"55b528c497709781ad1b1b9171168abeaf32d283","modified":1729216391294},{"_id":"source\\_posts\\PHP\\其他\\PHP运维笔记.md","hash":"1eddadc0bc5a6366b23212b18901b0a2e49c9d90","modified":1729216391349},{"_id":"source\\_posts\\PHP\\其他\\Yii2使用笔记.md","hash":"e607ae6f7e82ca55eab9234a2166fdfd0199c2a4","modified":1729216391272},{"_id":"source\\_posts\\PHP\\其他\\phpStorm配置xdebug.md","hash":"b8f8d237856d234736fc0656faefc87697b9ad5f","modified":1731485792789},{"_id":"source\\_posts\\PHP\\其他\\rabbitMQ+yii2实现远程过程调用(RPC).md","hash":"358701101d479bfb326d7d114dff796a93ee258a","modified":1729216391260},{"_id":"source\\_posts\\PHP\\其他\\windows下批处理.md","hash":"c5e120421263e33c768de5d65ece79f83e6c7dba","modified":1729216391244},{"_id":"source\\_posts\\PHP\\其他\\自己封装的一些常用的PHP函数.md","hash":"d1d1f82e0a08d7b6f17992286f8007c6220ea602","modified":1729239020111},{"_id":"source\\_posts\\PHP\\其他\\详解php.ini.md","hash":"6033a8b5176e689d48322e87c2fe966e1cbc012f","modified":1729216470896},{"_id":"source\\_posts\\Windows\\Excel\\Excel使用小技巧.md","hash":"51389e8362b04bb0454fcf323440ab43caad67d0","modified":1716261558119},{"_id":"source\\_posts\\Windows\\其他\\Windows下如何将桌面位置移到其他地方.md","hash":"7004820af8dac615d194b7c41b0ae989e1a61bfd","modified":1716261558120},{"_id":"source\\_posts\\Windows\\其他\\Windows下快速拆分txt文件.md","hash":"1efbee9c226bfb552fc008db62b2dfe92ffbf6db","modified":1716261558121},{"_id":"source\\_posts\\Windows\\其他\\Windows下快捷键使用.md","hash":"e0bf2b3ecb55a9f03ea89ce5d91f816cc76d7f08","modified":1716261558121},{"_id":"source\\_posts\\技术管理\\团队管理\\目标管理.md","hash":"6e5bcf40d5a136b21237c2fde589912df572b080","modified":1729216559847},{"_id":"source\\_posts\\Windows\\其他\\Windows下电脑截图.md","hash":"c4f5f5b465f9db7677ac67c364e94d514a5cbafc","modified":1716261558122},{"_id":"source\\_posts\\技术管理\\团队管理\\领导与下属交往之道.md","hash":"db4eefee32a9ce082e2b0df344bae1df40401ab0","modified":1729216559912},{"_id":"source\\_posts\\技术管理\\软件管理\\代码规范建议.md","hash":"5b39eb167df48cf34a5a30e01acf95caca173a66","modified":1729216645780},{"_id":"source\\_posts\\编辑器\\phpStorm\\phpStorm使用笔记.md","hash":"7e77478175389b0936159b55099604a8c4abc36b","modified":1729216751977},{"_id":"source\\_posts\\编辑器\\phpStorm\\phpStorm实现保存后，代码自动格式化.md","hash":"0a8a79456ca98e4c8fca32ed765394a661bb9bac","modified":1729216751786},{"_id":"source\\_posts\\编辑器\\phpStorm\\phpStorm查找指定文件的修改历史.md","hash":"f0c3701faf45eb5724acd2942a13d94cf70a136d","modified":1729216751869},{"_id":"source\\_posts\\编辑器\\phpStorm\\phpStorm常用快捷键.md","hash":"c00bc70b5019022bc75b71263a787236b7604aeb","modified":1729216752044},{"_id":"source\\_posts\\编辑器\\phpStorm\\解决phpStorm无法显示目录结构的问题.md","hash":"82a0979bd117724cf29d82e3d1f03bb023c9e125","modified":1729216751926},{"_id":"source\\_posts\\系统设计及优化\\架构\\架构学习.md","hash":"61a8b3344abe416f8b60a54a63d044168f293934","modified":1729216645728},{"_id":"source\\_posts\\系统设计及优化\\架构\\系统设计.md","hash":"c5820fa5db44724ec4bbdbb0b7fe897a7ac5d685","modified":1729216645684},{"_id":"source\\_posts\\系统设计及优化\\架构\\记一次高并发迭代之路.md","hash":"757385ad7ab0f4d1e91f21c2d6973ee8d566136a","modified":1729216645679},{"_id":"source\\_posts\\运维\\Docker\\Docker使用.md","hash":"b7ccb5e7a2d0fdda5e303cc7630fb543f2cc316f","modified":1716261558085},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\中介者模式.md","hash":"6f771b2a344fe09dd6e63376a30b57d88015b3cd","modified":1729216751935},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\享元模式.md","hash":"41dbb6bb68ed682ddd21262c311d72b208a9c4c8","modified":1729216751901},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\代理模式.md","hash":"7fe36ecfad113fabbb62ce1548f4be35cd75d125","modified":1729216751890},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\单例模式.md","hash":"75940f8a7310c08a981c061ada24c3e558c772aa","modified":1729216751759},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\原型模式.md","hash":"bee8aca33c76fbd07ff17efb098177240a25dfa4","modified":1729216751824},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\命令模式.md","hash":"0cf8ff79ee20f471b0657f687ebfa4fdb709b6cf","modified":1729216752048},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\备忘录模式.md","hash":"1fa17635f5010c299d68f40ec82b336e805fb87a","modified":1729216751753},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\外观模式.md","hash":"be3e9280dc6fba2439baf1d1806762378bdbb45c","modified":1729216751803},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\工厂方法模式.md","hash":"3953df9978c48405402817ebfc01f2c9cdf7bdce","modified":1729216751940},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\建造者模式.md","hash":"4084feebbaa1d6fb9c4cc5c25c8c8753b09ebebd","modified":1729216751829},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\桥接模式.md","hash":"274d323b3ae7d1dd0b366c5512c1120202f6b26f","modified":1729216751896},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\模板方法模式.md","hash":"c456ef6dc66536d486a5095478a2341df4669483","modified":1729216751778},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\状态模式.md","hash":"ade1c2a24f73a7bb9ff78ddd256f01781772bba8","modified":1729216751769},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\策略模式.md","hash":"3572c5589d904ac7b273e39f9c3ccb046c253d21","modified":1729216751807},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\简单工厂方法模式.md","hash":"a228371f4f0db87fbb7442e2df8184fc8e054dbc","modified":1729216751812},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\组合模式.md","hash":"f44e07ac74d56f43e7bd5dca64dd569520166b05","modified":1729216751981},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\装饰模式.md","hash":"8e64d4997ad8d71db3579e363e951518dec13f15","modified":1729216751765},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\观察者模式.md","hash":"b03c3bf579f704cbd75f9b82a67ecca89faa36e9","modified":1729216751885},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\解释器模式.md","hash":"e9d08ee30637bbbb822f23fb13bf7969d0747a86","modified":1729216751987},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\责任链模式.md","hash":"8d54daaa721baa04fda2fa3795c2d9e351e20aad","modified":1729216751818},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\迭代器模式.md","hash":"92e598ec8b55d79c2a51d3abf19383cd021874bb","modified":1729216751774},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\访问者模式.md","hash":"0eb224234ea3be7dfb32b5e1600a9435c0f23158","modified":1729216751798},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\软件的设计模式.md","hash":"89248658908db47d7c363cf2d91627f19d1ac280","modified":1729216751879},{"_id":"source\\_posts\\系统设计及优化\\设计模式\\适配器模式.md","hash":"6219f832c9068982977b88cc97d683ac864b982e","modified":1729216751792},{"_id":"source\\_posts\\运维\\Nginx\\Nginx 日志.md","hash":"04164f6aa1544ec6c0179037c1cb0275faac5d82","modified":1731635347102},{"_id":"source\\_posts\\运维\\Linux\\Linux Cron定时任务.md","hash":"b21935c720c7c37f0d68c6a797d90b0812a9b16a","modified":1716354920074},{"_id":"source\\_posts\\运维\\Linux\\Linux tee 命令详解.md","hash":"dcc226a5fb9c8dbe648bd2c1948ed361e51da0b1","modified":1731650228572},{"_id":"source\\_posts\\运维\\Linux\\Linux 安装php5(php7).md","hash":"58791216bdcf53e887a7b0649ecfd1af3a6c6708","modified":1716261558089},{"_id":"source\\_posts\\运维\\Linux\\Linux下curl命令.md","hash":"8a6b0f5b09cf29710f9eee27e9f9f3405a255aba","modified":1716261558090},{"_id":"source\\_posts\\运维\\Linux\\Linux下如何实现与Internet时间同步.md","hash":"aa5fab8bd69e1906a32b606e5284eb1015ce20cb","modified":1728981399200},{"_id":"source\\_posts\\运维\\Linux\\Linux下安装Cacti.md","hash":"b41d0ec4dabc0025d6b46b0245a60de8311b22fd","modified":1716261558090},{"_id":"source\\_posts\\运维\\Linux\\Linux下安装nodejs.md","hash":"d05ea16c6f1a3390b0d50ffbae2dbe75a64c11d8","modified":1716261558090},{"_id":"source\\_posts\\运维\\Linux\\Linux下网络相关的命令.md","hash":"ce9fa436d11b8fbbc18b1702a80a18d4e40dd36b","modified":1716261558090},{"_id":"source\\_posts\\运维\\Linux\\Linux中rz的使用.md","hash":"b0796808270f4b786c9d8aace06fa64f9047d58c","modified":1716261558092},{"_id":"source\\_posts\\运维\\Linux\\Linux中追加内容.md","hash":"c7f7564532ba55eff07133f8031ef3b3f7648082","modified":1729222496745},{"_id":"source\\_posts\\运维\\Linux\\Linux命令行中的快捷键.md","hash":"6a6b70fa7d867aae0cee3f0a54e20ee2d1e8e5b4","modified":1729215815354},{"_id":"source\\_posts\\运维\\Linux\\Linux如何排查cpu过高的原因.md","hash":"990c1eb236082580fa6dbbed88b150886a86513d","modified":1729559943673},{"_id":"source\\_posts\\运维\\Linux\\Linux常用命令.md","hash":"abd7ea1fc87cb2e87788276b72ab3f64683f1e77","modified":1729218886873},{"_id":"source\\_posts\\运维\\Linux\\Linux搜索关键词前后几行.md","hash":"6fa54b1cb685ea11a57a677c406038e0de485bd9","modified":1729217804196},{"_id":"source\\_posts\\运维\\Linux\\SystemD.md","hash":"e8142152ad02659291efc70218e8304d018576d5","modified":1716351555641},{"_id":"source\\_posts\\运维\\Linux\\centos7安装mysql5.0版本教程.md","hash":"c42cdb8f0d096c71057edf9992b308f28fe37893","modified":1729215815348},{"_id":"source\\_posts\\运维\\Linux\\xargs 命令.md","hash":"9f711278bab6072190ab6aa163985640ac0ef765","modified":1716351555643},{"_id":"source\\_posts\\运维\\Linux\\在Linux后台运行指定程序的几种方法.md","hash":"7bd8c72e80307db968adbe371383ef970238979b","modified":1731647105623},{"_id":"source\\images\\goland_1.png","hash":"a4022bcdacf321af92179ea431b41d1408e62aee","modified":1716261558329},{"_id":"source\\images\\goland_2.png","hash":"0b26d1dcbe8590e1e8a12d929fdd69362cad32fe","modified":1716261558330},{"_id":"source\\images\\happy.jpg","hash":"347f7557e8a1d6325783c8315d25793bc114f7aa","modified":1716261558330},{"_id":"source\\images\\install_cacti_on_linux_2.png","hash":"776fb100cd0269396153fe8c9ee2a5987d1e08d9","modified":1716261558331},{"_id":"source\\images\\notepad_note_1.png","hash":"1ae0f2386dcc19ae90d35aa29cfde13d063df276","modified":1716261558342},{"_id":"source\\images\\notepad_note_2.png","hash":"1c2a58848d0b4b7c3f70a16f17895e280a95d47d","modified":1716261558343},{"_id":"source\\images\\phpstorm_notes_2.png","hash":"6ac380cc1d08721c3d0cd975f0fb1edf70e946ca","modified":1716261558352},{"_id":"source\\images\\phpstorm_notes_3.png","hash":"8d33d610eade0cf26c8d789db0fa4b8b479baed3","modified":1716261558352},{"_id":"source\\images\\phpstorm_show_history_1.png","hash":"3577ff9d5567108f66134a004fd01a2fd9e05ef0","modified":1716261558354},{"_id":"source\\images\\test_ab_1.png","hash":"b1b9fee28aef094b3f7f0d049ef85ef5244f8ee2","modified":1716261558363},{"_id":"source\\images\\window_move_desktop_1.png","hash":"1c3bf77d446018a9ae6c9ee797fb0f5efe774c36","modified":1716261558368},{"_id":"source\\images\\window_move_desktop_5.png","hash":"1577547ba4332aa354ed8e2db85cc1714f623263","modified":1716261558370},{"_id":"source\\images\\xdebug_1.png","hash":"8a2ecf863773ef62d333bc6501c5177d5bc73fcf","modified":1729664100112},{"_id":"source\\images\\xdebug_3.png","hash":"e46c9c3a4878fe21392ff1c9b47103efc5da8869","modified":1729664146077},{"_id":"source\\images\\cross_domain_1.png","hash":"65ed79922846b178cffddc73b8a065a13c2ea02b","modified":1716261558326},{"_id":"source\\images\\phpstorm_show_history_2.png","hash":"11784732647f192c341cc188bd3eb0949e46774a","modified":1716261558356},{"_id":"source\\images\\thinkphp_note_1.png","hash":"bbfbb719d6741b6aaeaa2fb0ebabb0a2cfcc1c97","modified":1716261558366},{"_id":"source\\images\\xdebug_4.png","hash":"91fc5df883091a7ec00aa364937cfd27949d8dc8","modified":1729664189137},{"_id":"source\\images\\xdebug_2.png","hash":"8f688615377e9de26124314f2f245f2628f51a89","modified":1729664124792},{"_id":"source\\images\\xdebug_6.png","hash":"7c5e8d82d048c2625cf7ad1ee70d44f4280fdddb","modified":1729670338467},{"_id":"source\\images\\mysql_join_1.png","hash":"4beaeb88d2b6048a84f109ccbf15e4e3bc247960","modified":1716261558336},{"_id":"source\\images\\php_bat_1.png","hash":"1268d0936f7eb8119c94ae9fa4a080e14ff07bb8","modified":1716261558346},{"_id":"source\\images\\soft_design_1.png","hash":"58a3ab54538d923dcba7c9c4fd3c98c4bef11be2","modified":1716261558362},{"_id":"themes\\itsneko\\.gitignore","hash":"5340c994462c7345373e075529f40e60c1952f00","modified":1716261558375},{"_id":"themes\\itsneko\\LICENSE","hash":"b314c7ebb7d599944981908b7f3ed33a30e78f3a","modified":1716261558375},{"_id":"themes\\itsneko\\languages\\default.yml","hash":"9baf9370d0d7494e8575934e4bd0fa6d24484052","modified":1716261558376},{"_id":"themes\\itsneko\\_config.yml","hash":"fb8a5fdc4d1df1159809efd3a2e294d5e04becd2","modified":1729232497415},{"_id":"themes\\itsneko\\languages\\zh-CN.yml","hash":"13ce732a54ce08b0ca01f14fd09cbe8fc418de21","modified":1716261558377},{"_id":"themes\\itsneko\\layout\\404.ejs","hash":"f3a6633ab8cd7f4a494fa83cca284ff93cd73cad","modified":1716261558377},{"_id":"themes\\itsneko\\layout\\about.ejs","hash":"d41689eb04103a9e7878d638dc1981e8ae8a6d0f","modified":1716261558392},{"_id":"themes\\itsneko\\layout\\archive.ejs","hash":"bb99e4371cc6ea1621125978af998edabec50bf1","modified":1716261558392},{"_id":"themes\\itsneko\\layout\\books.ejs","hash":"57b229d7d41904d2e054cc0b1c86544b84a66b25","modified":1716261558392},{"_id":"themes\\itsneko\\layout\\category.ejs","hash":"436da01a97439699acf9bcc1cced35077168f364","modified":1716261558393},{"_id":"themes\\itsneko\\layout\\categories.ejs","hash":"8b3da91777448c52d499da4dfd2715d1d592db07","modified":1716261558393},{"_id":"themes\\itsneko\\layout\\collection.ejs","hash":"947c4efdba211e00b95c81c04e56cf2c39decc5d","modified":1716261558393},{"_id":"themes\\itsneko\\layout\\contact.ejs","hash":"ff492ee31a44fa4111571c1b21e6e2239fb0a7e6","modified":1716261558393},{"_id":"themes\\itsneko\\layout\\galleries.ejs","hash":"44c7d4d14bd0319bdaab11d64d7c78b2c9612cd1","modified":1716261558394},{"_id":"themes\\itsneko\\layout\\donate.ejs","hash":"b5d0a99376c8ba5280d654b0dfecf18ce4f65752","modified":1716261558394},{"_id":"themes\\itsneko\\layout\\gallery.ejs","hash":"cb8317e5bdddc1a663151e80ef9e716eca2b1657","modified":1716261558394},{"_id":"themes\\itsneko\\layout\\index.ejs","hash":"63856b2a73cd95a00d94e1f23dc17885b438710f","modified":1716261558394},{"_id":"themes\\itsneko\\layout\\layout.ejs","hash":"40d7e20c56efdfc07dbee4dffafbdac772f86a95","modified":1716261558395},{"_id":"themes\\itsneko\\layout\\musics.ejs","hash":"88e3d5393ecb45f4e153959a12e1fe16d4ebc723","modified":1716261558395},{"_id":"themes\\itsneko\\layout\\post.ejs","hash":"bfa510a99e39969cb5e192bbe8290b544663d92d","modified":1716261558395},{"_id":"themes\\itsneko\\layout\\tag.ejs","hash":"b6e1a69413d544b2a12f6c757775beca6aeecce8","modified":1716261558395},{"_id":"themes\\itsneko\\layout\\tags.ejs","hash":"6fe1be7be1f6e066e54c8a4b365e26d4e3d35e9b","modified":1716261558396},{"_id":"themes\\itsneko\\layout\\ticktack.ejs","hash":"53f5cdb373929aa0a170ef5e2e255b77e6348046","modified":1716261558396},{"_id":"themes\\itsneko\\layout\\_widget\\category-cloud.ejs","hash":"477be9ff103fd68c2936bb64aa13fa6f7e4b95c8","modified":1716261558388},{"_id":"themes\\itsneko\\layout\\_widget\\category-radar.ejs","hash":"ce195c1dcb892bcb0b1d872eefb9c03ebda69534","modified":1716261558389},{"_id":"themes\\itsneko\\layout\\_widget\\essay-cloud.ejs","hash":"963363d3aaa63f93f66cb0371191f6424a32438d","modified":1716261558389},{"_id":"themes\\itsneko\\layout\\_widget\\dream.ejs","hash":"d7032ba7cf2295c0e6ad8df69d59b362566b7883","modified":1716261558389},{"_id":"themes\\itsneko\\layout\\_widget\\music.ejs","hash":"e7f1d284c75b589145b6fcf6a2388a8f747535d0","modified":1716261558389},{"_id":"themes\\itsneko\\layout\\_widget\\my-gallery.ejs","hash":"e69e3ae3e35c60b3e826b289809bdaa2ac0b004e","modified":1716261558389},{"_id":"themes\\itsneko\\layout\\_widget\\my-projects.ejs","hash":"141f19a8aa41b7a21436f23ce114bd5fda932512","modified":1716261558390},{"_id":"themes\\itsneko\\layout\\_widget\\my-skills.ejs","hash":"09410037ae9b2756264f950c8b8ec11f674dfa0f","modified":1716261558390},{"_id":"themes\\itsneko\\layout\\_widget\\post-calendar.ejs","hash":"fb5ee7674070956d134ddca6890a9bd3f398cc0f","modified":1716261558390},{"_id":"themes\\itsneko\\layout\\_widget\\post-charts.ejs","hash":"98950334bbac19b32bf1b7d510a65ee9d2e542ba","modified":1716261558391},{"_id":"themes\\itsneko\\layout\\_widget\\recommend.ejs","hash":"416f2f47f34df031fe4eef050fc21a2de06fdb83","modified":1716261558391},{"_id":"themes\\itsneko\\layout\\_widget\\tag-cloud.ejs","hash":"455d469b06589e40514dbb6c4bcd4ae0c9026872","modified":1716261558391},{"_id":"themes\\itsneko\\layout\\_widget\\tag-wordcloud.ejs","hash":"f5efb6b1055e68624159fc2364b73caf1c8eef38","modified":1716261558391},{"_id":"themes\\itsneko\\layout\\_widget\\video.ejs","hash":"6eaab5fccff9ad69d1d877a0f0585e2fcb89ba52","modified":1716261558391},{"_id":"themes\\itsneko\\layout\\_partial\\back-comment.ejs","hash":"0a85c331eb66eee581c5981001a98198ba96b216","modified":1716261558377},{"_id":"themes\\itsneko\\layout\\_partial\\back-top.ejs","hash":"1b28f300da72eca03618eed000d2d030d8cba8fa","modified":1716261558377},{"_id":"themes\\itsneko\\layout\\_partial\\baidu-push.ejs","hash":"2841870e0c625787de348221e5ddb7bbe99ec5a2","modified":1716261558378},{"_id":"themes\\itsneko\\layout\\_partial\\baidu-analytics.ejs","hash":"4b01030b7136192bdbd704e29a0fe12f92767551","modified":1716261558378},{"_id":"themes\\itsneko\\layout\\_partial\\bg-cover-content.ejs","hash":"3e7d0d66fb807491e29a57a15313d4d1bf35369b","modified":1716261558378},{"_id":"themes\\itsneko\\layout\\_partial\\bg-cover.ejs","hash":"e4243725fc51e3dbea83a9586f8468756b9be46f","modified":1716261558379},{"_id":"themes\\itsneko\\layout\\_partial\\disqus.ejs","hash":"1b392f2160f962f62f3ddf5e1155c7f2f4888e1d","modified":1716261558379},{"_id":"themes\\itsneko\\layout\\_partial\\footer.ejs","hash":"5c6e38a0987e3c4d70ae0ef1e2eef6333b30761f","modified":1728695211022},{"_id":"themes\\itsneko\\layout\\_partial\\gitalk.ejs","hash":"27764936791ce36b527bea63689435346bbfb425","modified":1716261558380},{"_id":"themes\\itsneko\\layout\\_partial\\github-link.ejs","hash":"fd4034bca2eb3987dcf113e6477260bee97eb1e7","modified":1716261558380},{"_id":"themes\\itsneko\\layout\\_partial\\gitment.ejs","hash":"90888c945384aa1ee4650bd43bd7ea670f25828c","modified":1716261558380},{"_id":"themes\\itsneko\\layout\\_partial\\head.ejs","hash":"b124e0a7b75344f5f3c951f764c2c8c028015a4a","modified":1716261558381},{"_id":"themes\\itsneko\\layout\\_partial\\index-cover.ejs","hash":"6dc2522bc03b65d0b421a643b21a78a59c8213c1","modified":1716261558382},{"_id":"themes\\itsneko\\layout\\_partial\\google-analytics.ejs","hash":"890c8f04c1f4905dfceb3ea9fd6efdd040d79c01","modified":1716261558381},{"_id":"themes\\itsneko\\layout\\_partial\\header.ejs","hash":"730a66fb79c21e276769ddaaf677753d210da411","modified":1716261558381},{"_id":"themes\\itsneko\\layout\\_partial\\minivaline.ejs","hash":"e1264587db510ae1885405aed433592291ae74c4","modified":1716261558382},{"_id":"themes\\itsneko\\layout\\_partial\\livere.ejs","hash":"42728561c09589f79b698eb059ab4def53ed3642","modified":1716261558382},{"_id":"themes\\itsneko\\layout\\_partial\\mobile-nav.ejs","hash":"abcb7990a23ba20f7f33d012110c51c75528c985","modified":1716261558382},{"_id":"themes\\itsneko\\layout\\_partial\\navigation.ejs","hash":"69fc16a299b9c063730738e8a82f711ad1b3b768","modified":1716261558383},{"_id":"themes\\itsneko\\layout\\_partial\\paging.ejs","hash":"890ca7782f560e97f4701e77e4cbb54df8a3e136","modified":1716261558383},{"_id":"themes\\itsneko\\layout\\_partial\\post-cover.ejs","hash":"7f583c935253e2bf6421791715ee9de4989add6e","modified":1716261558383},{"_id":"themes\\itsneko\\layout\\_partial\\post-detail.ejs","hash":"6cd88df0609c3f2f5a76338c64a6af0b9b302761","modified":1716261558386},{"_id":"themes\\itsneko\\layout\\_partial\\post-detail-toc.ejs","hash":"270000841c777910512e22cd045876f96987c2b5","modified":1728711409907},{"_id":"themes\\itsneko\\layout\\_partial\\post-statis.ejs","hash":"9c9f3f2cf1e1909fd0d63a7c13877b9b8d4d6ab6","modified":1716261558386},{"_id":"themes\\itsneko\\layout\\_partial\\prev-next.ejs","hash":"97c04a9a3adfb2c700aeca848f6063e0a413b91a","modified":1716261558386},{"_id":"themes\\itsneko\\layout\\_partial\\reprint-statement.ejs","hash":"f67bc52bc5a2464ebe30f42c65c0ee38eeec2fda","modified":1716261558387},{"_id":"themes\\itsneko\\layout\\_partial\\reward.ejs","hash":"90c2ab31492f8226454537d6b987e9399119047d","modified":1716261558387},{"_id":"themes\\itsneko\\layout\\_partial\\share.ejs","hash":"e50fae64b6cfdbed18861eb49eca5018a920c7a4","modified":1716261558387},{"_id":"themes\\itsneko\\layout\\_partial\\search.ejs","hash":"756e42238ebb7957832139df505e5a694c439837","modified":1716261558387},{"_id":"themes\\itsneko\\layout\\_partial\\social-link.ejs","hash":"26a68d37b91a525fc1f86a012ab21cf84d2d3d5d","modified":1716261558387},{"_id":"themes\\itsneko\\layout\\_partial\\valine.ejs","hash":"3590d829d52a3b2e97f0716e57c134a06590e60b","modified":1716261558388},{"_id":"themes\\itsneko\\source\\css\\gitment.css","hash":"d5ef623065d1fbc897119f7b70ccf7563e329917","modified":1716261558396},{"_id":"themes\\itsneko\\source\\css\\my-gitalk.css","hash":"4e3e855767ac5a48b13af1d6a42df13d8975e03f","modified":1716261558397},{"_id":"themes\\itsneko\\source\\css\\my.css","hash":"b3c32b573a4a9ef3dfeffbd544a9c3f451e67a54","modified":1716261558397},{"_id":"themes\\itsneko\\source\\js\\activate-power-mode.js","hash":"5bb12e7590fd48e1c49123001921404213b89ebe","modified":1716261558446},{"_id":"themes\\itsneko\\source\\js\\click_show_text.js","hash":"8fd277b75b0cf9db1f57bccb5834122f6d6a7ddf","modified":1716261558448},{"_id":"themes\\itsneko\\source\\js\\linkcard.js","hash":"fb65ef56b106f96698979baa8cb9653a9e468076","modified":1716261558448},{"_id":"themes\\itsneko\\source\\js\\moments.js","hash":"4764053e5a97388d5b0817e08e2b9e64a3d7056a","modified":1716261558449},{"_id":"themes\\itsneko\\source\\js\\matery.js","hash":"4759f82685bf1ae6a8492a915e6953664230ecb0","modified":1667456568000},{"_id":"themes\\itsneko\\source\\js\\search.js","hash":"11e6dc0d10b16978bc02688cac133e1f7ce24114","modified":1716261558450},{"_id":"themes\\itsneko\\source\\medias\\bggrid.png","hash":"c2ef59db0838c5a17f74c0d25f9c508a6ab2a803","modified":1716261558516},{"_id":"themes\\itsneko\\source\\medias\\candy.png","hash":"4b521b5a71f569eee2ef322d08f7b4cc26d2ad4c","modified":1716261558517},{"_id":"themes\\itsneko\\source\\medias\\clock.png","hash":"2e6b501bf0a205394e635c451eff4cd49879a865","modified":1716261558517},{"_id":"themes\\itsneko\\source\\medias\\comment_bg.png","hash":"dfc93d24081884fbc58cab0f8fd19e77d31d6123","modified":1716261558517},{"_id":"themes\\itsneko\\source\\medias\\laba.png","hash":"ecef8d05d5ee2d1186acffc3c478ba95206d012c","modified":1716261558520},{"_id":"themes\\itsneko\\source\\medias\\favicon.webp","hash":"c4f230a76bbde8c34720112dc92d748b46a7271b","modified":1716261558520},{"_id":"themes\\itsneko\\source\\medias\\icp.png","hash":"27a96f31f7d0413c6ade6f40e06f021f501151c7","modified":1716261558520},{"_id":"themes\\itsneko\\source\\medias\\loading.svg","hash":"4669e9d10efce6150b28c38fb606a4d6cc3889eb","modified":1716261558520},{"_id":"themes\\itsneko\\source\\medias\\logo.webp","hash":"c4f230a76bbde8c34720112dc92d748b46a7271b","modified":1716261558521},{"_id":"themes\\itsneko\\source\\medias\\map-visit原来.png","hash":"dfe5332f995b32a746d9b9fdcaf9a2d42a0ef8f7","modified":1716261558521},{"_id":"themes\\itsneko\\source\\medias\\logo.png","hash":"9c5fc2729952095b46451624a8b942d10b427d22","modified":1716261558520},{"_id":"themes\\itsneko\\source\\medias\\map-visit.png","hash":"367587252245cddf76dc7c268558e5936a138df9","modified":1716261558521},{"_id":"themes\\itsneko\\source\\medias\\robot.png","hash":"4121387f79241ce088fca4dda96861fa76acd82b","modified":1716261558526},{"_id":"themes\\itsneko\\source\\medias\\qrcode_for_gh.jpg","hash":"b6867b73aa36514c02f2be96fab09fc3cc0ea82b","modified":1716261558525},{"_id":"themes\\itsneko\\source\\medias\\miao.jpg","hash":"490c4810c1a55adec7c306754af818f6cd026b18","modified":1716261558522},{"_id":"themes\\itsneko\\source\\medias\\yinghua.png","hash":"9c5fc2729952095b46451624a8b942d10b427d22","modified":1716261558536},{"_id":"themes\\itsneko\\source\\medias\\robothui.png","hash":"b4c74a1816e276ee6ef00f8fd1023b4d3081ccd8","modified":1716261558527},{"_id":"themes\\itsneko\\source\\libs\\animate\\animate.min.css","hash":"c7f5b3d3905eb2fbf8add30bf7b86224c2ee9f84","modified":1716261558451},{"_id":"themes\\itsneko\\source\\libs\\aplayer\\APlayer.min.css","hash":"78e2b81ea3726afcee9de235b1cf64e69d5708e6","modified":1716261558453},{"_id":"themes\\itsneko\\source\\libs\\aos\\aos.css","hash":"ded9739f803d114c9168d3351fded72b3b478b4c","modified":1716261558452},{"_id":"themes\\itsneko\\source\\libs\\aos\\aos.js","hash":"02bfb40b0c4b6e9b0b4081218357145cbb327d74","modified":1667456568000},{"_id":"themes\\itsneko\\source\\libs\\background\\canvas-nest.js","hash":"d2569ef80127ed2f4af7ef4d9f82b037794eec69","modified":1716261558469},{"_id":"themes\\itsneko\\source\\libs\\aplayer\\APlayer.min.js","hash":"70c0c4a9bf698747b7c058c21287ad617355e5dd","modified":1716261558453},{"_id":"themes\\itsneko\\source\\libs\\background\\ribbon-refresh.min.js","hash":"6d98692b2cad8c746a562db18b170b35c24402f4","modified":1716261558470},{"_id":"themes\\itsneko\\source\\libs\\background\\ribbon-dynamic.js","hash":"8f53dbd5f9a40c377664bf8ca0d5d5ed75b91757","modified":1716261558470},{"_id":"themes\\itsneko\\source\\libs\\background\\ribbon.min.js","hash":"6a99d494c030388f96f6086a7aaa0f03f3fe532e","modified":1716261558470},{"_id":"themes\\itsneko\\source\\libs\\codeBlock\\codeBlockFuction.js","hash":"a8133367d48199e7505c2d831ca848b4202b9ba6","modified":1716261558471},{"_id":"themes\\itsneko\\source\\libs\\codeBlock\\codeLang.js","hash":"066d2c89ad429e44f6467b9267da782ccaad57de","modified":1716261558471},{"_id":"themes\\itsneko\\source\\libs\\codeBlock\\codeCopy.js","hash":"6ab7871d36cab438bbd4d781bc1fe7618b46b6e7","modified":1716261558471},{"_id":"themes\\itsneko\\source\\libs\\codeBlock\\codeShrink.js","hash":"3edbe498f7bb9e7daa77f9db30e1b5eeab40e067","modified":1716261558471},{"_id":"themes\\itsneko\\source\\libs\\dplayer\\DPlayer.min.css","hash":"5d52d3b34fceb9d7e11f1beaf7ed380b4249dec4","modified":1716261558473},{"_id":"themes\\itsneko\\source\\libs\\cryptojs\\crypto-js.min.js","hash":"33810b2b757fc4327bc1d3b83bb5e0d3dc1fec5b","modified":1716261558472},{"_id":"themes\\itsneko\\source\\libs\\gitalk\\gitalk.css","hash":"9c0bacfbd4519d3859e3bbb06128ba241804d8b1","modified":1716261558479},{"_id":"themes\\itsneko\\source\\libs\\gitment\\gitment-default.css","hash":"a0625d8b432af8bdc820f8768d36cde439e7257c","modified":1716261558480},{"_id":"themes\\itsneko\\source\\libs\\instantpage\\instantpage.js","hash":"043eba3c85c2e2009a9fabf3c4fc55537852fd86","modified":1716261558481},{"_id":"themes\\itsneko\\source\\libs\\jqcloud\\jqcloud-1.0.4.min.js","hash":"26849509f196a2d21bbfd15696e5d5153163b8f1","modified":1716261558481},{"_id":"themes\\itsneko\\source\\libs\\jqcloud\\jqcloud.css","hash":"4e6538c8312aeeab845d361c37a8c1a0931241f0","modified":1716261558482},{"_id":"themes\\itsneko\\source\\libs\\masonry\\masonry.pkgd.min.js","hash":"f81cd7bfcf7aa2d043bd3e6077df42656fc44b82","modified":1716431413222},{"_id":"themes\\itsneko\\source\\libs\\others\\busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1716261558487},{"_id":"themes\\itsneko\\source\\libs\\scrollprogress\\scrollProgress.min.js","hash":"777ffe5d07e85a14fbe97d846f45ffc0087251cc","modified":1716261558487},{"_id":"themes\\itsneko\\source\\libs\\others\\clicklove.js","hash":"6a39b8c683ba5dcd92f70c6ab45d1cfac3213e8e","modified":1716261558487},{"_id":"themes\\itsneko\\source\\libs\\tocbot\\tocbot.css","hash":"de69e38f05be0680ec717e9b60a77ae530ebf300","modified":1716261558490},{"_id":"themes\\itsneko\\source\\libs\\tocbot\\tocbot.min.js","hash":"5ec27317f0270b8cf6b884c6f12025700b9a565c","modified":1716261558490},{"_id":"themes\\itsneko\\source\\medias\\banner\\4.jpg","hash":"b4a8bf81e49457405c14b150467c79258fbfa5bb","modified":1716261558514},{"_id":"themes\\itsneko\\source\\medias\\banner\\6.jpg","hash":"8f8956ade831821ddf20fd9921fe54dc87ffa7ed","modified":1716261558515},{"_id":"themes\\itsneko\\source\\medias\\project-img\\jspic.jpg","hash":"3b6ba11fe3413de19ebdf9bded736fa2f91351e3","modified":1716261558523},{"_id":"themes\\itsneko\\source\\medias\\project-img\\es6pic.jpg","hash":"e8dcc820355eb93ef53109be4b82f84fdd7e5533","modified":1716261558523},{"_id":"themes\\itsneko\\source\\medias\\project-img\\jssecret.jpg","hash":"db3e0485031a42dd8db0fcdf07d3157f507bc08c","modified":1716261558524},{"_id":"themes\\itsneko\\source\\medias\\project-img\\jspicnoknow.jpg","hash":"a7e4c7a5929393a3dc0777652c4391589e7048a7","modified":1716261558524},{"_id":"themes\\itsneko\\source\\medias\\project-img\\vue_system.png","hash":"471a82ce2d97d9efa69e3ddc3d4507304e7485ef","modified":1716261558525},{"_id":"themes\\itsneko\\source\\medias\\reward\\alipay.jpg","hash":"f110b55eb71fb28b59b14ea1d38b16070b501806","modified":1716261558526},{"_id":"themes\\itsneko\\source\\medias\\reward\\wechat.png","hash":"e61bf35659150e38a2afeb4b2162e276467f0311","modified":1716261558526},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\baozhu.png","hash":"45e7f98e27f8a4f3765c66acc7abcc6354be50f3","modified":1716261558527},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\caishen.png","hash":"530266e2fb0bd6fff7782aaca2eec1308ef091e7","modified":1716261558527},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\denglong.png","hash":"55696d65e5663db4ae4fd16fe83613e30dd70eff","modified":1716261558527},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\dragon-boat.png","hash":"75b838cf25e0f3d786615e90f10a5dde23777136","modified":1716261558528},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\dragon.png","hash":"6dcd150cddd65a5f7266d0df2c9e01c67440d9c9","modified":1716261558528},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\fish.png","hash":"aa7a427cedb7d9d288e5751ee704d7c6c24d8036","modified":1716261558528},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\fudai.png","hash":"4d92c318ca45f04d73643dd26154396d05dfe3eb","modified":1716261558529},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\fudao.png","hash":"8af41beba972d26c815e2b8547b069a71cdab2e9","modified":1716261558529},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\gu1.png","hash":"b60a21739fbdb874d424dd19a2e012fc6bd36109","modified":1716261558529},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\gugu.png","hash":"ca6824fe5795fd6aadc5dd431c701802bfd51a3f","modified":1716261558530},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\homes.png","hash":"ec123bae613ef8f3cc95ae6ad22b2f1273f8df02","modified":1716261558530},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\huadeng.png","hash":"d67f60bff90ac18c056c1811feed9897f9f147a8","modified":1716261558530},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\jiaozi.png","hash":"609f9ad35ef104a9c646239f8111727772239857","modified":1716261558530},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\lion.png","hash":"58524651b7c392c9854e4876cd191fafa114e145","modified":1716261558531},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\maozi.png","hash":"48e5853b9158aa5059521f76c43fe9636c967b1d","modified":1716261558531},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\nianhuo.png","hash":"fc724a0d7ddbea975df8925a5ee0196432ebf5fc","modified":1716261558531},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\miaohui.png","hash":"eaa60b0ef7a9624daebfa712bcf85669aefd3526","modified":1716261558531},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\shanzi.png","hash":"9d4b2c7033b346d26ce4b314e5e582ae2b118f5e","modified":1716261558531},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\spring.png","hash":"5cb17f67f8a5938e1daef7c656ce9c9f6c19510f","modified":1716261558532},{"_id":"themes\\itsneko\\source\\medias\\spring-img\\tang.png","hash":"5d52bb0cb0e0fb9af19db87e4072d3a86760377a","modified":1716261558532},{"_id":"themes\\itsneko\\source\\medias\\toc-banner\\aticalmode.jpg","hash":"7cb79e02d156b67be1e95152a385ff10f0b7bfc3","modified":1716261558535},{"_id":"themes\\itsneko\\source\\libs\\MyGallery\\css\\baguetteBox.css","hash":"19df730da869aa08a54db742e9a9c3a86b36eaab","modified":1716261558450},{"_id":"themes\\itsneko\\source\\libs\\MyGallery\\js\\baguetteBox.js","hash":"3a2a4eda82edc88e5a6b554e13bb5298aae3deec","modified":1716261558451},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-regular-400.eot","hash":"439c8afd3373acb4a73135a34e220464a89cd5e2","modified":1716261558462},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-regular-400.ttf","hash":"0f4bd02942a54a6b3200d9078adff88c2812e751","modified":1716261558463},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-regular-400.woff","hash":"59439d3ad31d856d78ec3e2bd9f1eafa2c7a581c","modified":1716261558463},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-regular-400.woff2","hash":"f6f653b4ea8fc487bdb590d39d5a726258a55f40","modified":1716261558463},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\css\\lightgallery.min.css","hash":"1b7227237f9785c66062a4811508916518e4132c","modified":1716261558483},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\fonts\\lg.svg","hash":"67d261ac428761389c895e1da73664e633e14a72","modified":1716261558483},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\fonts\\lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1716261558483},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\fonts\\lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1716261558484},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\img\\loading.gif","hash":"15a76af2739482d8de7354abc6d8dc4fca8d145e","modified":1716261558484},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\fonts\\lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1716261558483},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\img\\video-play.png","hash":"2962e03ddbe04d7e201a5acccac531a2bbccddfc","modified":1716261558484},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\img\\vimeo-play.png","hash":"9b72fc0f86a01467ed0b68c9cc4d604ec316d517","modified":1716261558484},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\img\\youtube-play.png","hash":"f8d11384d33b7a79ee2ba8d522844f14d5067a80","modified":1716261558484},{"_id":"themes\\itsneko\\source\\libs\\share\\css\\share.min.css","hash":"7126de5cec8371e580b7b1f22512da0985cc39e5","modified":1716261558487},{"_id":"themes\\itsneko\\source\\libs\\lightGallery\\js\\lightgallery-all.min.js","hash":"f8cd48e1fff82ecd54a7ce3e69de8dba7c92d113","modified":1716261558485},{"_id":"themes\\itsneko\\source\\libs\\share\\fonts\\iconfont.svg","hash":"1d56c9d5db0273f07c43cc1397e440f98ba7827a","modified":1716261558488},{"_id":"themes\\itsneko\\source\\libs\\share\\fonts\\iconfont.eot","hash":"00ff749c8e202401190cc98d56087cdda716abe4","modified":1716261558488},{"_id":"themes\\itsneko\\source\\libs\\share\\fonts\\iconfont.ttf","hash":"afd898f59d363887418669520b24d175f966a083","modified":1716261558488},{"_id":"themes\\itsneko\\source\\libs\\share\\fonts\\iconfont.woff","hash":"2e3fce1dcfbd6e2114e7bfbeaf72d3c62e15a1bd","modified":1716261558488},{"_id":"themes\\itsneko\\source\\libs\\share\\js\\jquery.share.min.js","hash":"de34668d902ec082d17ddb6dd7ad24255fb547c5","modified":1716261558489},{"_id":"themes\\itsneko\\source\\libs\\share\\js\\social-share.min.js","hash":"ba635a17a9d9d132369f9fe4b1fbcaf001ea6ac9","modified":1716261558489},{"_id":"source\\vue-practice\\vue.js","hash":"d0651e3f6523b543ae9d50d8c6e75c263239f851","modified":1716261558375},{"_id":"themes\\itsneko\\source\\css\\matery.css","hash":"fd789d125797d67e10adae4cd78f1fc258dbb33c","modified":1729238309004},{"_id":"themes\\itsneko\\source\\libs\\dplayer\\DPlayer.min.js","hash":"82276be41d2001e820020a219b90ad5b026302d1","modified":1716261558473},{"_id":"themes\\itsneko\\source\\libs\\gitment\\gitment.js","hash":"5a13983930b019450e4fe01a407c64b3dd316be4","modified":1716261558481},{"_id":"themes\\itsneko\\source\\libs\\jquery\\jquery.min.js","hash":"a8927ac2830b2fdd4a729eb0eb7f80923539ceb9","modified":1716261558482},{"_id":"themes\\itsneko\\source\\medias\\banner\\1.jpg","hash":"aa98b94623353f6efe8df7e617cac14845ea88e7","modified":1716261558512},{"_id":"themes\\itsneko\\source\\medias\\banner\\5.jpg","hash":"d58e13b66974ab79dfb0697a0603d661dec5a699","modified":1716261558515},{"_id":"themes\\itsneko\\source\\medias\\project-img\\vue-mall.png","hash":"dc43a076b8bcb36f534fb408d9777fc2beb42f7f","modified":1716261558524},{"_id":"themes\\itsneko\\source\\medias\\toc-banner\\aboutme1.jpg","hash":"ce3b6c8f1c711ddeb8010607e9ccad689edc2c4a","modified":1716261558534},{"_id":"themes\\itsneko\\source\\medias\\toc-banner\\suibi1.jpg","hash":"f8b7de772436cfbff01a10c1c558dcf0e76de1e0","modified":1716261558536},{"_id":"themes\\itsneko\\source\\libs\\awesome\\css\\all.css","hash":"8a9746d2dbb20554e257e9fd4471ea43f875cca3","modified":1716261558454},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-brands-400.eot","hash":"22f9e7d5226408eb2d0a11e118257a3ca22b8670","modified":1716261558455},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-brands-400.woff","hash":"18838f5260317da3c5ed29bf844ac8a4f7ad0529","modified":1716261558460},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-brands-400.ttf","hash":"91cbeeaceb644a971241c08362898599d6d968ce","modified":1716261558459},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-brands-400.woff2","hash":"a46bd47ff0a90b812aafafda587d095cdb844271","modified":1716261558460},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-solid-900.woff","hash":"92803b8753ceda573c6906774677c5a7081d2fbb","modified":1716261558469},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-solid-900.woff2","hash":"9c081b88b106c6c04ecb895ba7ba7d3dcb3b55ac","modified":1716261558469},{"_id":"themes\\itsneko\\source\\libs\\gitalk\\gitalk.min.js","hash":"7a3534269fd922d722a76c3affefc68e21246898","modified":1716261558480},{"_id":"themes\\itsneko\\source\\libs\\materialize\\materialize.min.css","hash":"50a9fb6155efb967b90e25f986e201e6a01fe5c0","modified":1716261558486},{"_id":"themes\\itsneko\\source\\libs\\materialize\\materialize.min.js","hash":"cbea566bde9f2938520f9fba549ebbf3c178cbcb","modified":1716261558486},{"_id":"themes\\itsneko\\source\\libs\\valine\\av-min.js","hash":"9cb4babc20eb8fb5a86c4b0cc894fdb0f3cd9534","modified":1716261558492},{"_id":"themes\\itsneko\\source\\libs\\valine\\Valine.min.js","hash":"d4f209e63959db44b07c07989222aad615f59554","modified":1716261558491},{"_id":"themes\\itsneko\\source\\medias\\banner\\0.jpg","hash":"f8d123fa0ad004da3db7eecce37076b0a17b91a2","modified":1716261558506},{"_id":"themes\\itsneko\\source\\medias\\banner\\7.jpg","hash":"f8d123fa0ad004da3db7eecce37076b0a17b91a2","modified":1716261558516},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-regular-400.svg","hash":"3d3a49445343d80f3b553e3e3425b9a7bd49acaf","modified":1716261558462},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-solid-900.eot","hash":"cab8e84ae5682d1d556e234df9c790985888def8","modified":1716261558465},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-solid-900.ttf","hash":"9521ed12274c2cbc910cea77657116fcf6545da3","modified":1716261558468},{"_id":"themes\\itsneko\\source\\medias\\banner\\3.jpg","hash":"6d14df2fedf5b3f6e6c5016b4a935e06760c04b2","modified":1716261558514},{"_id":"themes\\itsneko\\source\\medias\\toc-banner\\aboutme.JPG","hash":"1460148a0fe1600c066fc66ace4a2bf33fdcffeb","modified":1716261558534},{"_id":"themes\\itsneko\\source\\medias\\comment_bg1.webp","hash":"8fe6376cc493cf6e86cbb5dfedd4180280fab714","modified":1716261558520},{"_id":"themes\\itsneko\\source\\medias\\banner\\2.jpg","hash":"d9f19d37e137b33488e419e23200898d831fa68d","modified":1716261558513},{"_id":"themes\\itsneko\\source\\js\\artitalk.js","hash":"7c1e4d7f216b6e4215412b373eca16fd39a7a558","modified":1716261558448},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-brands-400.svg","hash":"5e2d2a159294576bea69cc3360efb5ffe110ab2d","modified":1716261558457},{"_id":"themes\\itsneko\\source\\libs\\echarts\\echarts.min.js","hash":"8789b5e4daf0029a6c88f238f10e54d01c4fce82","modified":1716261558479},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\4.jpg","hash":"9494f39b76a29f79ebc12d76137c32c11bd0f662","modified":1716261558233},{"_id":"themes\\itsneko\\source\\libs\\awesome\\webfonts\\fa-solid-900.svg","hash":"7da88b19e1486f8c968d3cf5ab3f194f01ea17fd","modified":1716261558467},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\6.jpg","hash":"ff8199d9b528478f65e51b202c306f31b3523858","modified":1716261558253},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\2.jpg","hash":"89c21e9a22f5771f51c4e2441691f6dd232799b7","modified":1716261558209},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\10.jpg","hash":"31f8516faef7d2c59a4a6bc8c9f402a72eadd48d","modified":1716261558179},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\1.jpg","hash":"599324dbefaa0c727b5e5a3b44c3d9aebe4adb50","modified":1716261558171},{"_id":"themes\\itsneko\\source\\medias\\banner\\001.JPG","hash":"89c21e9a22f5771f51c4e2441691f6dd232799b7","modified":1716261558511},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\9.jpg","hash":"9f640d60245f90e936cc7505588deec000407ae2","modified":1716261558293},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\3.jpg","hash":"9e2a312ba228c03d72ef7175fe20789b8c829020","modified":1716261558227},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\8.jpg","hash":"c0a9ebf2d549fa23eb5d787154763e344880ded6","modified":1716261558284},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\5.jpg","hash":"a4c6c04b45ae3ade46493408368df8b019c75d01","modified":1716261558246},{"_id":"source\\gallery\\2016.4——牛背山之旅\\images\\7.jpg","hash":"fc2979807fd178c2eb2165d312ee229b6a071227","modified":1716261558274},{"_id":"themes\\itsneko\\source\\medias\\avatar.jpg","hash":"d4aff20d6174b745401f1b73871db5797992c66e","modified":1716261558504},{"_id":"themes\\itsneko\\source\\fonts\\华文行楷.ttf","hash":"ffa6092cbb7b786bc7d4b508dc75231272ea8d38","modified":1716261558445},{"_id":"source\\images\\20220824-rain.jpg","hash":"bd74ee461b78293781f08d8923291c479ddd92ac","modified":1716261558324},{"_id":"public/baidu_urls.txt","hash":"f5ded5163e267ca13f18bbf182469ce79b7ddd11","modified":1731654517680},{"_id":"public/baidusitemap.xml","hash":"a4035d4d2870ded46902a72cdb8fc7be08cbc1a2","modified":1731654517680},{"_id":"public/codes/md5.min.js","hash":"6e8137f3298fe8731509d7a94517f6845c7d4bdd","modified":1731654517680},{"_id":"public/atom.xml","hash":"5749c1b81e09ab8fb7d19b4fa81eefeff1f46504","modified":1731654517680},{"_id":"public/search.xml","hash":"a227d311b373d2722e3df7987acb91f8af82fd61","modified":1731654517680},{"_id":"public/sitemap.xml","hash":"e403be635f8e8de84a087bdae10452cbf62af731","modified":1731654517680},{"_id":"public/404.html","hash":"d38fd21b891b002cfba2519379e568322b20f4c4","modified":1731654517680},{"_id":"public/books/index.html","hash":"0085ae7c5a571f54eab705f2c45bc90f96a64f67","modified":1731654517680},{"_id":"public/categories/index.html","hash":"840617c77c6e73eaf508158e64b0542a2d090b94","modified":1731654517680},{"_id":"public/about/index.html","hash":"a1dcade65c691869e0bd6447a9b4dcde4b8c0846","modified":1731654517680},{"_id":"public/collection/index.html","hash":"735209e4c0bfbc47a7121f224d8d1cfe3829c12b","modified":1731654517680},{"_id":"public/contact/index.html","hash":"bf8987207124e1c961df6f2dafcf571efcef2d87","modified":1731654517680},{"_id":"public/donate/index.html","hash":"5008d1d3b997592e6a5d3a1f24eae14ad20e23e3","modified":1731654517680},{"_id":"public/gallery/index.html","hash":"661cb5d038096d3dfeec7dff6ea41b486339cb0b","modified":1731654517680},{"_id":"public/musics/index.html","hash":"64f75e6e87f3d5b2a3e9784a7fa50ea9f5739b20","modified":1731654517680},{"_id":"public/tags/index.html","hash":"dd1648cdf58c00d7ba92c658afcfe5c0e293c613","modified":1731654517680},{"_id":"public/ticktack/index.html","hash":"26c25c427183df02e590edb6fd4a86f54da2cc56","modified":1731654517680},{"_id":"public/videos/index.html","hash":"dab8c539a8982bfee233e621712f8ab48151f946","modified":1731654517680},{"_id":"public/gallery/2016.4——牛背山之旅/index.html","hash":"a03e9a166557e29a5ced685729be33df44aa4bf9","modified":1731654517680},{"_id":"public/posts/sliding-window.html","hash":"57031c8608ae9f244cbc266f7d0706007eaeae30","modified":1731654517680},{"_id":"public/posts/php-circuit-breaker.html","hash":"6bd2d4af2e11ce8db935e606cd6fff0930cdf6c0","modified":1731654517680},{"_id":"public/posts/phpstorm-setting-xdebug.html","hash":"cebd91a4f71de71bd747674f8dac4428b37e8afe","modified":1731654517680},{"_id":"public/posts/linux-short-cut-keys.html","hash":"79e48bdbd8ee71d1d619c0ca8f88e2fd272ec260","modified":1731654517680},{"_id":"public/posts/38c1.html","hash":"38745fdbf9e092e17cb94fb36bc9ba23ecadd690","modified":1731654517680},{"_id":"public/posts/2b4a.html","hash":"804f4e3c9f1527ba3f4dffa4e906ca87e9e46699","modified":1731654517680},{"_id":"public/posts/85ed.html","hash":"6b9c67c0c64f84d03cd2c1e5c19418652ac8ab24","modified":1731654517680},{"_id":"public/posts/9c77.html","hash":"85693c880850e701911049f87d5063d16508b0aa","modified":1731654517680},{"_id":"public/posts/high-concurrent-experience.html","hash":"17900f8f1ac6db6deec51173d7ea3874d2c9f617","modified":1731654517680},{"_id":"public/posts/nginx-logs.html","hash":"55807f409076255201c227204af9798f8b9ccd3e","modified":1731654517680},{"_id":"public/posts/linux-high-cpu-troubleshoot.html","hash":"e9406236f47baaa6d15227b607c4788692c41230","modified":1731654517680},{"_id":"public/posts/linux-tee.html","hash":"a0b3ebad1aff780ceb29e6da88bd4309deb9cda6","modified":1731654517680},{"_id":"public/posts/program-run-in-background.html","hash":"0bb6cc82f9b9efa3c45096cec93e4da4a80b2742","modified":1731654517680},{"_id":"public/posts/linux-grep-few-lines.html","hash":"58b88467d61bdb7a6cb6d86c0504d397800579fe","modified":1731654517680},{"_id":"public/posts/php-task-lock.html","hash":"805987bf3326a7e9a0461bd9e1bd5f643ca33e5a","modified":1731654517680},{"_id":"public/posts/redis-set-note.html","hash":"236fea925dea2f9fe308071bd38a4346d4c4429b","modified":1731654517680},{"_id":"public/posts/linux-add-content.html","hash":"530506c55b742bce5647ddf98cff4277722abdf0","modified":1731654517680},{"_id":"public/posts/lua-notes.html","hash":"abfced09a2833210e2c1464b3a038f2b6bc64e8f","modified":1731654517680},{"_id":"public/posts/php-if-else.html","hash":"70e4d1ebc843cbba2600c8ff786289fab18d4021","modified":1731654517680},{"_id":"public/posts/windows-move-desktop.html","hash":"faaf73043101cc8134fd1a0319b6a7f4cf4bfe84","modified":1731654517680},{"_id":"public/posts/20220824-happy.html","hash":"8db5b11a3933832947d917433c02e8f0e4bbe897","modified":1731654517680},{"_id":"public/posts/dead-lock.html","hash":"01d9ccef99efdba1147892df77534a197224340a","modified":1731654517680},{"_id":"public/posts/pooling-technology.html","hash":"d3a668d6087b0e8675992672564a55c6e1a7cef8","modified":1731654517680},{"_id":"public/posts/thread-safe.html","hash":"c84152eba46ba907d64478814d007d4b70d15808","modified":1731654517680},{"_id":"public/posts/php-define-const.html","hash":"be7b79103d1f592952bd5a69b08403036ea74475","modified":1731654517680},{"_id":"public/posts/linux-curl.html","hash":"e171daae7ace3d36100ca5db860a70ddde0a0f17","modified":1731654517680},{"_id":"public/posts/builder-pattern.html","hash":"bebcd818c6107ac61e58a73b26994ecb6cc6a802","modified":1731654517680},{"_id":"public/posts/php-auto-run-func.html","hash":"322081ac2313404e40c154a30dcb71c6c4c4beee","modified":1731654517680},{"_id":"public/posts/php-unset.html","hash":"c97e18db6991f50203ba03d0b8d8064323142e68","modified":1731654517680},{"_id":"public/posts/php-assignment.html","hash":"4124533e8ae0da971e4882b50dad6581f38ffb2a","modified":1731654517680},{"_id":"public/posts/php-self-static.html","hash":"1353a3e7b1289afe5a5015e5a3114299d5dc4bd8","modified":1731654517680},{"_id":"public/posts/php-isset-array_key_exists.html","hash":"6093211a6f1fed44eedb29329f117b6277b28be2","modified":1731654517680},{"_id":"public/posts/php-uncertain-params.html","hash":"faec5b25071733d6622f82079cf5492b2fe697d5","modified":1731654517680},{"_id":"public/posts/thinkphp-rule.html","hash":"54be22d5caf9de7657f85094057792e5a9299e46","modified":1731654517680},{"_id":"public/posts/mysql-json.html","hash":"74d91160e7825e53b8cf3637bfede369307b49d3","modified":1731654517680},{"_id":"public/posts/mediator-pattern.html","hash":"4ec402d3ac109d6d1cfbcb8d8418509f0387e5fc","modified":1731654517680},{"_id":"public/posts/flyweight-pattern.html","hash":"04505778f42a8504e10f30a7937b710b7b74b5a3","modified":1731654517680},{"_id":"public/posts/singleton-pattern.html","hash":"e26eabab2aafc059d6c8a5d1b1e74ead85ed6f36","modified":1731654517680},{"_id":"public/posts/prototype-pattern.html","hash":"16e1e33e248f51e501f177cef6a6365773182517","modified":1731654517680},{"_id":"public/posts/command-pattern.html","hash":"ff8129642322a4b4a8fe343761be7dcd63fe38b5","modified":1731654517680},{"_id":"public/posts/memento-pattern.html","hash":"17c4cb11186bc05e3181056b10a0817bc4d6387e","modified":1731654517680},{"_id":"public/posts/factory-method-pattern.html","hash":"397f7541bfbdc460f6ebfceb3ae05623fb25e473","modified":1731654517680},{"_id":"public/posts/facade-pattern.html","hash":"c42687e1430fcd6bf03ab4430ce9fb377474e99b","modified":1731654517680},{"_id":"public/posts/template-method-pattern.html","hash":"e8a39a35a4e6d7d3d5f1369a559161a47e5aeac6","modified":1731654517680},{"_id":"public/posts/bridge-pattern.html","hash":"eec80b31d29f7652555a14b1a2725113a4334d47","modified":1731654517680},{"_id":"public/posts/state-pattern.html","hash":"855be59702d440f4719ae48f3b6e187cbb5fb850","modified":1731654517680},{"_id":"public/posts/proxy-pattern.html","hash":"e52243c05a8a70f336e4abcbddd05b7cb15482ef","modified":1731654517680},{"_id":"public/posts/strategy-pattern.html","hash":"0829bc867269c038dbb97c774dfde6ee7f9c2379","modified":1731654517680},{"_id":"public/posts/simple-factory-pattern.html","hash":"49b26604963cd0c047d24787acb0f9d62c9a5c6d","modified":1731654517680},{"_id":"public/posts/composite-pattern.html","hash":"e1019a989bcab91e74c8c06d06486cdf6dd7236b","modified":1731654517680},{"_id":"public/posts/decorator-pattern.html","hash":"8fd60fac909aadfdf62b35a3b3fb96ad8ab45aa1","modified":1731654517680},{"_id":"public/posts/observer-pattern.html","hash":"c1ae2540e450e4f07867cea6e917d0e6261c2ba4","modified":1731654517680},{"_id":"public/posts/interpreter-pattern.html","hash":"029157d39c07506955f873fa561fa39e85039411","modified":1731654517680},{"_id":"public/posts/visitor-pattern.html","hash":"033f017d187e51271eecd4b2934275fe2e80b546","modified":1731654517680},{"_id":"public/posts/chain-of-responsibility-pattern.html","hash":"8d8ab5eb05d81c953d92bbd590d0f708506fc409","modified":1731654517680},{"_id":"public/posts/design-patterns.html","hash":"7c8229b04cd9d034775fa657ef8c5093914b28db","modified":1731654517680},{"_id":"public/posts/iterator-pattern.html","hash":"350b0f67d1f39e4a09c71175b62778b1236994d6","modified":1731654517680},{"_id":"public/posts/adapter-pattern.html","hash":"d3cdd1cc0dbc3608f8fa7152e9609f0a856a44c7","modified":1731654517680},{"_id":"public/posts/redis-note.html","hash":"32b5cc01cd6feb9f9da1cf8762c27facc9d0b42d","modified":1731654517680},{"_id":"public/posts/phpstorm-quick-key.html","hash":"6fdab2322e50dd705831617e8a1770e1c9d85662","modified":1731654517680},{"_id":"public/posts/phpstorm-show-dir.html","hash":"b2cc199a6f010f261c1c4bcfa0b8b18198628a83","modified":1731654517680},{"_id":"public/posts/phpstorm-notes.html","hash":"081aedc12146715c9d94217bdbb0551f5a6b58ad","modified":1731654517680},{"_id":"public/posts/use-mysql-on-dos.html","hash":"886cecee64da08f852aed283acf7c12be8fb39d9","modified":1731654517680},{"_id":"public/posts/mysql-binlog.html","hash":"e42d242b0c0246c635c446663e8ed7b82daa67f1","modified":1731654517680},{"_id":"public/posts/thinkphp-where.html","hash":"78485ccbae09a1827f2ec02b3aed41bfded5602f","modified":1731654517680},{"_id":"public/posts/php-assign-array-values.html","hash":"80610b9cf3e7048f161fb2f7487ab6375468e869","modified":1731654517680},{"_id":"public/posts/windows-quick-split-file.html","hash":"ecad453001fc225a0765a2fc8e6950dbc94d044c","modified":1731654517680},{"_id":"public/posts/php-unusual-functions.html","hash":"28be2c20c908a27336a020eda5c9aedb00c088af","modified":1731654517680},{"_id":"public/posts/thinkphp-order.html","hash":"75b5b446bffd0d58b9cb0625c5b23b31dee42039","modified":1731654517680},{"_id":"public/posts/performance-test.html","hash":"bea280aa16752ee45b1c69a4e65ad6fa8ee8eaf7","modified":1731654517680},{"_id":"public/posts/coding-standard-tips.html","hash":"f81f8d7682b7868b7613fea6b8e3b7b01aa34a92","modified":1731654517680},{"_id":"public/posts/phpstorm-show-history.html","hash":"fa3cedb4292993332063273d6cb64855dac4156c","modified":1731654517680},{"_id":"public/posts/thinkphp-clone-query.html","hash":"bb81782bd069e05eda1558dfe39101ff27782171","modified":1731654517680},{"_id":"public/posts/phpstorm-auto-format.html","hash":"e555fc8531acf1f648eff145c133212336c4aa55","modified":1731654517680},{"_id":"public/posts/windows-short-cut.html","hash":"c4682390047f6fcd415c4b2b58f27ed27a9d9897","modified":1731654517680},{"_id":"public/posts/thinkphp-note.html","hash":"48ad918c8ee0fb91057cd286d99661eedb8a9dbb","modified":1731654517680},{"_id":"public/posts/php-trait.html","hash":"a8022dfeb1cfb6862001dc4a8dcffd031e1a0574","modified":1731654517680},{"_id":"public/posts/php-elasticsearch.html","hash":"4f71e3ae1d99983e1061d38a982d7d6345e0b3dd","modified":1731654517680},{"_id":"public/posts/mysql-clustered-index.html","hash":"fee3e9df4bb112d7ead22de1e406a63288452451","modified":1731654517680},{"_id":"public/posts/btree-and-b+tree.html","hash":"13f7fb5f05195748b698eab16b48d94ad7974012","modified":1731654517680},{"_id":"public/posts/windows-screen-shot.html","hash":"3a76a4502e2dc1c75c3ac522fcba01f30642207c","modified":1731654517680},{"_id":"public/posts/php-interview.html","hash":"dab83ee1f6196c8474e7e61da22aeaed3ef42359","modified":1731654517680},{"_id":"public/posts/php-bat.html","hash":"792ec4939e0f0b011e08bbc9016f78a33514830b","modified":1731654517680},{"_id":"public/posts/php-some-my-functions.html","hash":"f39f0a72ce7d66edbca88c6b68118864090e6e01","modified":1731654517680},{"_id":"public/posts/normal-rgb.html","hash":"2b04bbb1f6d72d96cd47be62b9d37c8270b926e2","modified":1731654517680},{"_id":"public/posts/cross-domain.html","hash":"688ec3bf90a438c16685807d7ae15428fb24d0db","modified":1731654517680},{"_id":"public/posts/anchoring-effect.html","hash":"720b0c6192c86cc822e84d9a1dc80bd1b9684820","modified":1731654517680},{"_id":"public/posts/php-common-algorithm.html","hash":"e2c35a5046d5b482efcf8977047740068b732781","modified":1731654517680},{"_id":"public/posts/mongodb-notes.html","hash":"1a38f72fe7d7db1ea10cfa4cb8a6dfd60b816013","modified":1731654517680},{"_id":"public/posts/target-management.html","hash":"e1faee62d9439013dcc0462a42dfef1d613b0565","modified":1731654517680},{"_id":"public/posts/wx-msg-push.html","hash":"6a09946ccc5d8c24cd3f252d668a57b2e8149720","modified":1731654517680},{"_id":"public/posts/product-design.html","hash":"92f029b39be48ae47cac44d144f643e12270f9d3","modified":1731654517680},{"_id":"public/posts/html-to-pdf.html","hash":"b489fca156dffce5de3b7477506f1de6a33fc6e2","modified":1731654517680},{"_id":"public/posts/goframe-note.html","hash":"5c0bec99e636bd1408993a368e164f91691e64f8","modified":1731654517680},{"_id":"public/posts/mysql-optimization.html","hash":"4a23c7bc35c5f6378248ac7173faeacddc76f67d","modified":1731654517680},{"_id":"public/posts/php-yii2-notes.html","hash":"48512ee5a275f9427674a003c294e87e5382128e","modified":1731654517680},{"_id":"public/posts/yii2-rabbitmq.html","hash":"98b568bf8eccc91eb585b9d5627eb53b437686fb","modified":1731654517680},{"_id":"public/posts/php-composer.html","hash":"dc803202e1585dc70cfb029bdd82f61b7695b95e","modified":1731654517680},{"_id":"public/posts/common-sql.html","hash":"376b3f1188f326da8906f6a1e12e285eba259588","modified":1731654517680},{"_id":"public/posts/soft-system-design.html","hash":"06ea48c3182c38e0e36b52d6ed7ca2afde328348","modified":1731654517680},{"_id":"public/posts/network-command-on-linux.html","hash":"047ec41e9c243be1ad64ea0575ad17d11d0c3af8","modified":1731654517680},{"_id":"public/posts/business-model-of-union-pay.html","hash":"f1d03734b8b30275c1fd45e2c2333c09cb7fbe63","modified":1731654517680},{"_id":"public/posts/notepad++-notes.html","hash":"9f6ddf8070623ec56b00401c1e788b2bed02d4a8","modified":1731654517680},{"_id":"public/posts/php-magic-methods.html","hash":"6dc9d6a1dea4f0e26570da0e5fb56a38e3ed5fc0","modified":1731654517680},{"_id":"public/posts/db-3nf.html","hash":"64b1bd5474055fa53326be84fab2104f52253ad5","modified":1731654517680},{"_id":"public/posts/mysql-deal-miss-handle.html","hash":"91e7863f9cf8f377852d0e70b12ce0c8be0bea4f","modified":1731654517680},{"_id":"public/posts/php-ini-config.html","hash":"4c9ef6ce6d67da3e5f4539811623c3f8ff65f426","modified":1731654517680},{"_id":"public/posts/mysql-decimal.html","hash":"a947350e678ad7cf9ddab815e2c4e9784af176fc","modified":1731654517680},{"_id":"public/posts/mysql-explain1.html","hash":"e19800749d48455bd4eb207f69f20bafde924b01","modified":1731654517680},{"_id":"public/posts/mysql-index.html","hash":"ebf22fb18af04bc43dcc3178fa7912c55b7d7c43","modified":1731654517680},{"_id":"public/posts/mysql-structural-design.html","hash":"c7d8fa9e00bcec57efbf764186fac568da292502","modified":1731654517680},{"_id":"public/posts/mysql-join.html","hash":"90a88644e4203b6c63b1d105003032a02fcf0e0b","modified":1731654517680},{"_id":"public/posts/personnel-public-data.html","hash":"adc331e852bf7df6c9b9c238b5a145ba67368d66","modified":1731654517680},{"_id":"public/posts/qiniu-storage.html","hash":"785739f9deba5c644644da06ccbd4da9bf3cf168","modified":1731654517680},{"_id":"public/posts/e939ff3c.html","hash":"001cc3f63aa0a5a1c3769566aecc7a704b917f9d","modified":1731654517680},{"_id":"public/posts/relation-between-leaders-and-staffs.html","hash":"ddd4ee338e0b2a76487c6dd3d4acc706c3cfcf62","modified":1731654517680},{"_id":"public/posts/install-php-on-linux.html","hash":"71fd0c0e0177a2f274e5aa5bc13d611cd3de6691","modified":1731654517680},{"_id":"public/posts/install-mysql-on-linux.html","hash":"1600ad5d4071da39adc9f57a0530571f23f66e5c","modified":1731654517680},{"_id":"public/posts/linux-install-nodejs.html","hash":"d9c6e78277feea1d26bcd19f7ac99b7ae251c094","modified":1731654517680},{"_id":"public/posts/install-cacti-on-linux.html","hash":"705d0edae93e3dc8cc6a8e04d04e3024bd84dd27","modified":1731654517680},{"_id":"public/posts/use-mysql-on-linux.html","hash":"fe9c2f74cf61fea514adbf1ab40d474a3781137c","modified":1731654517680},{"_id":"public/posts/js-copy-object.html","hash":"45d816585788b9ee211a5d89a406046e82e23d92","modified":1731654517680},{"_id":"public/posts/rz-on-linux.html","hash":"84012d55a2e4b89a1f09372470f1330f9972383d","modified":1731654517680},{"_id":"public/posts/mysql-errors.html","hash":"fe57bf5bac71d7c0a8087ddd383c980fbde99ef7","modified":1731654517680},{"_id":"public/posts/php-operate-note.html","hash":"4ae06c5922f7bb0d485cf993585e665e03e4a31d","modified":1731654517680},{"_id":"public/posts/markdown-note.html","hash":"0b6b6785e08bd406d5c51d56ef545915fbaa72de","modified":1731654517680},{"_id":"public/posts/prolog-notes.html","hash":"d8524d00ea90d4b825d6f10adb7135b7ac13a085","modified":1731654517680},{"_id":"public/posts/php-excel.html","hash":"bb81a84ab4cdd3022b745ea91d1608900ef942d8","modified":1731654517680},{"_id":"public/posts/mysql-custom-functions.html","hash":"6a3960067f090f50a10963c47c2655dee92af410","modified":1731654517680},{"_id":"public/posts/make-dictionary-by-php.html","hash":"bd103d8fff4256251a4fd1f541c927abdea8b88a","modified":1731654517680},{"_id":"public/posts/oracle-note.html","hash":"d5f7336533cbe3367ea81abf77ae37e4a4217d90","modified":1731654517680},{"_id":"public/posts/heartbeat.html","hash":"dd9b834c63744bca30a1cb4b4c85e11f02369dc9","modified":1731654517680},{"_id":"public/posts/javascript-notes.html","hash":"4a9c57c57ee9db7dfffc06b205597e90a8af1608","modified":1731654517680},{"_id":"public/posts/excel-tips.html","hash":"530d914a532df1cd86fabcf411cf05a386c1b482","modified":1731654517680},{"_id":"public/posts/r-notes.html","hash":"43bcaa5b8aeef22d434a484b07204afbddd33649","modified":1731654517680},{"_id":"public/posts/seo-weight-transfer.html","hash":"3b38921cd238063ab833b3b8cd5f24aa45d98cc7","modified":1731654517680},{"_id":"public/posts/go-note.html","hash":"5922500c3e1a8a9c3742b336b14c19877ac7a335","modified":1731654517680},{"_id":"public/posts/gitbook-note.html","hash":"ce6907333163c21b0f63329b9c904c1bad63a43d","modified":1731654517680},{"_id":"public/posts/hexo-notes.html","hash":"5420700f2cea9f2bfe7b26745fc0d61726f1ef41","modified":1731654517680},{"_id":"public/posts/amap-api.html","hash":"bc1403a98d5d7005f54dd86c43e2e213a8a3fb57","modified":1731654517680},{"_id":"public/posts/architecture-notes.html","hash":"13261824d188cf42e0869d0a1006784051c68852","modified":1731654517680},{"_id":"public/posts/docker-notes.html","hash":"409d4b3001b7d95250a5f9122477f1ddc8838ac7","modified":1731654517680},{"_id":"public/posts/rich-text-editor.html","hash":"b1cf1b436bf3944189cff93878796ca43dee30da","modified":1731654517680},{"_id":"public/posts/mysql-notes.html","hash":"f835d491da1273652f8c01c795d100788c269ba0","modified":1731654517680},{"_id":"public/posts/1822a0ce.html","hash":"98ea6fe943488bde085b2a358b8f35058f5f784a","modified":1731654517680},{"_id":"public/posts/jquery-note.html","hash":"39e11146be29a6cf2c477816640869fbc8855b17","modified":1731654517680},{"_id":"public/posts/linux-common-commands.html","hash":"8b1ed114f2fde6fe9e8b61c449ece34682229dea","modified":1731654517680},{"_id":"public/posts/wished-book-list.html","hash":"afd163a26f24753e0a6684b41a2db597462cc950","modified":1731654517680},{"_id":"public/posts/git-notes.html","hash":"fbcba182d3aee33c5755e377a91b8406c995fbd1","modified":1731654517680},{"_id":"public/posts/php-aes-encrypt.html","hash":"028f426e6c5efc57e9bd5c34dde1fb587a6ca2bf","modified":1731654517680},{"_id":"public/posts/jquery-obj.html","hash":"316dc7e1045b89413f8a2dcc5339cea1fae933ec","modified":1731654517680},{"_id":"public/posts/mysql-functions.html","hash":"eb0f1af2166d9805ef315c77ded4c6f5a72d196e","modified":1731654517680},{"_id":"public/posts/some-others.html","hash":"b992f97ead6b05d65f1298db0ba5f219d3be4ee8","modified":1731654517680},{"_id":"public/posts/normal-tools.html","hash":"125da316e4e6323f279d4e8382c7e1828c7ed446","modified":1731654517680},{"_id":"public/posts/jquery-md5.html","hash":"c73f3bd8f2b7f3c43bc610a3b42cd717cf7f4941","modified":1731654517680},{"_id":"public/categories/其他/index.html","hash":"491a2f73be42b78e33c203feeb8b46a0ea2217a7","modified":1731654517680},{"_id":"public/categories/Git/index.html","hash":"5b7a27a7035bdcae7270c313715aa02cb6fb41c1","modified":1731654517680},{"_id":"public/categories/Go/index.html","hash":"00b318906a59d2fefd5751991683034a72399193","modified":1731654517680},{"_id":"public/categories/Lua/index.html","hash":"294400c6cb185328081de3906f047f9bab4e569a","modified":1731654517680},{"_id":"public/categories/Markdown/index.html","hash":"245f6ab223ba092324296a3d10cc38d39db9b23a","modified":1731654517680},{"_id":"public/categories/MongoDB/index.html","hash":"e7b1e3998241762d9f0ee5c2c1739938d64378f2","modified":1731654517680},{"_id":"public/categories/MySQL/index.html","hash":"bca84682fc2371b653d3375299954a529c43d5b4","modified":1731654517680},{"_id":"public/categories/MySQL/page/2/index.html","hash":"9a5ca25ff187c55a3fce98325b2a5af9cc5d1140","modified":1731654517680},{"_id":"public/categories/数据库/index.html","hash":"ac24a01b8d85b273978f5d9d54369a194d6a731b","modified":1731654517680},{"_id":"public/categories/Office/index.html","hash":"0edb9899f28d29bcbfaf818cb4a8a759392f42a0","modified":1731654517680},{"_id":"public/categories/Oracle/index.html","hash":"9e0c6200c2103f89c6a9cc169dc7f0e6e5579a94","modified":1731654517680},{"_id":"public/categories/R语言/index.html","hash":"4c7429b6a4260adc49579b4d68971ef091c5f229","modified":1731654517680},{"_id":"public/categories/Prolog/index.html","hash":"a73d32f2cc98117c394ec0656d7dafd88742b825","modified":1731654517680},{"_id":"public/categories/Redis/index.html","hash":"a7b4285755b10bf0c1ce4eeae029a0f155f5ebdb","modified":1731654517680},{"_id":"public/categories/产品/index.html","hash":"aa405a993207a938fa7c04bdbe8bf29ec7e392b9","modified":1731654517680},{"_id":"public/categories/随笔/index.html","hash":"7ea6c22c3087beb36ebefdf0f6a65532ce75020f","modified":1731654517680},{"_id":"public/categories/测试/index.html","hash":"e1f1c828483213151830b9ae47e911dc12644479","modified":1731654517680},{"_id":"public/categories/第三方/index.html","hash":"390bacb7a79d06519cfa31db9e0edb214bcd3353","modified":1731654517680},{"_id":"public/categories/算法/index.html","hash":"02c4a348f8cd82139b67bcbe956419ea2921dc6c","modified":1731654517680},{"_id":"public/categories/系统设计/index.html","hash":"915c6fe536eb9845a0667ef266c3ce28870e294d","modified":1731654517680},{"_id":"public/categories/前端/index.html","hash":"28fedceda0514548ae93099a2a204ded2d881f9f","modified":1731654517680},{"_id":"public/categories/HTML/index.html","hash":"4e0f78accc6d6f178a94c8bb0ebf53a2d4b7a523","modified":1731654517680},{"_id":"public/categories/PHP/index.html","hash":"5643646bc5a50ed8b37bb7f3dd3eb858b4464a78","modified":1731654517680},{"_id":"public/categories/PHP/page/2/index.html","hash":"b8a9824c4f9e2fb81d7a429946ad25d566e3fc67","modified":1731654517680},{"_id":"public/categories/PHP/page/3/index.html","hash":"3c1a00276dbe03e3925ce422b57680ab347dbb43","modified":1731654517680},{"_id":"public/categories/phpStorm/index.html","hash":"1807b09cb4a0726e67dc3c6110fb64e61498480d","modified":1731654517680},{"_id":"public/categories/Windows/index.html","hash":"5fe690acbb6c55554cc5ad1a8c18b850bb0b4475","modified":1731654517680},{"_id":"public/categories/技术管理/index.html","hash":"806dd0048e2d93c4869c1e7d5ee6dfb95c85f69c","modified":1731654517680},{"_id":"public/categories/编程/index.html","hash":"446ac90dc2037192403d5d231a8decf0bf263deb","modified":1731654517680},{"_id":"public/categories/架构/index.html","hash":"84ee86eb18967472e8d9223a8249032883b6032b","modified":1731654517680},{"_id":"public/categories/Docker/index.html","hash":"3d1ec1e74ad60d707a0aae5e5fa2745a4b19fcfa","modified":1731654517680},{"_id":"public/categories/设计模式/index.html","hash":"31741fdb84016e32b00eb47b8530947cae8ed114","modified":1731654517680},{"_id":"public/categories/设计模式/page/2/index.html","hash":"dba8ee11b1fb1c514834372d3783d007c680c21a","modified":1731654517680},{"_id":"public/categories/运维/index.html","hash":"9695073ded5fcf6a4ade6e1aa54724bf3378c7a0","modified":1731654517680},{"_id":"public/categories/Cron/index.html","hash":"593e1d25bd5d668d66f1664fe4a68b974295f913","modified":1731654517680},{"_id":"public/categories/Linux/index.html","hash":"a3a0e33c3fa892d277350d9a6628de7807736d38","modified":1731654517680},{"_id":"public/categories/ntpdate/index.html","hash":"33316c839f5d8db549e428c650162414def8d602","modified":1731654517680},{"_id":"public/categories/SystemD/index.html","hash":"955cae5141d1a2dd897bbe66a0b01d77c0ab8c88","modified":1731654517680},{"_id":"public/categories/Linux/运维/index.html","hash":"4e538b66f72179eae0962021b4ebcb5fbc501ee0","modified":1731654517680},{"_id":"public/categories/xargs/index.html","hash":"9fc7ecb2cb162065cee478e3d52de07749bccebb","modified":1731654517680},{"_id":"public/archives/index.html","hash":"b25e4e6849e2e88731ef0b64187bfa342ecff52b","modified":1731654517680},{"_id":"public/archives/page/2/index.html","hash":"b25e4e6849e2e88731ef0b64187bfa342ecff52b","modified":1731654517680},{"_id":"public/archives/page/3/index.html","hash":"b25e4e6849e2e88731ef0b64187bfa342ecff52b","modified":1731654517680},{"_id":"public/archives/page/4/index.html","hash":"b25e4e6849e2e88731ef0b64187bfa342ecff52b","modified":1731654517680},{"_id":"public/archives/page/5/index.html","hash":"b25e4e6849e2e88731ef0b64187bfa342ecff52b","modified":1731654517680},{"_id":"public/archives/page/6/index.html","hash":"b25e4e6849e2e88731ef0b64187bfa342ecff52b","modified":1731654517680},{"_id":"public/archives/page/7/index.html","hash":"b25e4e6849e2e88731ef0b64187bfa342ecff52b","modified":1731654517680},{"_id":"public/archives/page/8/index.html","hash":"b25e4e6849e2e88731ef0b64187bfa342ecff52b","modified":1731654517680},{"_id":"public/archives/page/9/index.html","hash":"b25e4e6849e2e88731ef0b64187bfa342ecff52b","modified":1731654517680},{"_id":"public/archives/page/10/index.html","hash":"b25e4e6849e2e88731ef0b64187bfa342ecff52b","modified":1731654517680},{"_id":"public/archives/page/11/index.html","hash":"b25e4e6849e2e88731ef0b64187bfa342ecff52b","modified":1731654517680},{"_id":"public/archives/2016/index.html","hash":"9f331db80437be39136ac69478c4cfe0f8b7774d","modified":1731654517680},{"_id":"public/archives/2016/07/index.html","hash":"a0027cbdab419ca4f6e957e856f1be7f99737852","modified":1731654517680},{"_id":"public/archives/2018/index.html","hash":"868b6a5d30dc93b22e92ffa4234f5b7d692f5c56","modified":1731654517680},{"_id":"public/archives/2018/page/2/index.html","hash":"868b6a5d30dc93b22e92ffa4234f5b7d692f5c56","modified":1731654517680},{"_id":"public/archives/2018/03/index.html","hash":"f1923ea0a9bfb38ff7a01d990caafa658e1354cc","modified":1731654517680},{"_id":"public/archives/2018/04/index.html","hash":"c419cc47b48889d4cedb57cd545881f3ce6e238e","modified":1731654517680},{"_id":"public/archives/2018/06/index.html","hash":"793f3c5b1f3255eb1d27a4267496735ad43fd4cd","modified":1731654517680},{"_id":"public/archives/2018/06/page/2/index.html","hash":"793f3c5b1f3255eb1d27a4267496735ad43fd4cd","modified":1731654517680},{"_id":"public/archives/2018/09/index.html","hash":"cc46d1abd4f6ccae61d0b03f4538ceb5722d36ad","modified":1731654517680},{"_id":"public/archives/2018/11/index.html","hash":"c1f50467988138dfc6e1b52bcc30ba432d7f77dd","modified":1731654517680},{"_id":"public/archives/2019/index.html","hash":"8554c68ed57ea48160417555bfaffeaca29611c5","modified":1731654517680},{"_id":"public/archives/2019/01/index.html","hash":"695f4039cf5413b6d3a1c28dd5ba9c92d355716a","modified":1731654517680},{"_id":"public/archives/2019/03/index.html","hash":"1015d09e87cd7072ee69c3ce38e9edc0109b92d0","modified":1731654517680},{"_id":"public/archives/2019/07/index.html","hash":"6bfe971180303c9aa186ee5f1d5cc4a8ddbb8716","modified":1731654517680},{"_id":"public/archives/2019/09/index.html","hash":"9e975c5d0f3c6004b35de0c1a3df3c83161ed54b","modified":1731654517680},{"_id":"public/archives/2019/10/index.html","hash":"558af2dbf23b92ad99e8a612f612811d580f8ea0","modified":1731654517680},{"_id":"public/archives/2019/12/index.html","hash":"affed71f68b8975c5b6e887f1326bd978beffa60","modified":1731654517680},{"_id":"public/archives/2020/index.html","hash":"4122260f859455cf381fb0453a694f8e0d0e7f9a","modified":1731654517680},{"_id":"public/archives/2020/02/index.html","hash":"c367aed8e3d08bcbe79dda03399f961750cf0938","modified":1731654517680},{"_id":"public/archives/2020/03/index.html","hash":"58b1f589f488106dbb47e0d1f6ad1edd9d014979","modified":1731654517680},{"_id":"public/archives/2020/05/index.html","hash":"7689a063557ffc1d816ee734c2e094fa9c41ccd2","modified":1731654517680},{"_id":"public/archives/2020/06/index.html","hash":"5dc1290421c966c154051769e6abed8fbe95604a","modified":1731654517680},{"_id":"public/archives/2020/07/index.html","hash":"0a8b558d4d61b8b5a212d8dcfc8fd7ecb9342e4f","modified":1731654517680},{"_id":"public/archives/2020/10/index.html","hash":"669be3f1a9c3dd680215b3a00dea8ffdd4fe23e7","modified":1731654517680},{"_id":"public/archives/2020/08/index.html","hash":"efc1dbdcfe3362410fae2196488ada57374d4e48","modified":1731654517680},{"_id":"public/archives/2021/index.html","hash":"ed1c7acd557d8ccf9bd269e0bd06e557373d35d0","modified":1731654517680},{"_id":"public/archives/2021/01/index.html","hash":"b2c30f5ad82e4bb3aa05489a8ad6b7dcc7021be7","modified":1731654517680},{"_id":"public/archives/2021/04/index.html","hash":"90ab71490acc1c46a947c42df286ba304b133bcc","modified":1731654517680},{"_id":"public/archives/2021/05/index.html","hash":"d2dc76cb99bb5512801bf94dd1044123783419c7","modified":1731654517680},{"_id":"public/archives/2021/08/index.html","hash":"4f21686d217ec77af9b8540bb4a9ab522093161f","modified":1731654517680},{"_id":"public/archives/2021/09/index.html","hash":"4b2bf7b7abb6a7bbad15bbe23170c1015dc97f94","modified":1731654517680},{"_id":"public/archives/2021/12/index.html","hash":"833511d014d3c7301111f2cf56479d74b8d67e08","modified":1731654517680},{"_id":"public/archives/2022/index.html","hash":"f210a023ac5a43e37c3f139abe0f8d8db27942d1","modified":1731654517680},{"_id":"public/archives/2022/page/2/index.html","hash":"f210a023ac5a43e37c3f139abe0f8d8db27942d1","modified":1731654517680},{"_id":"public/archives/2022/page/3/index.html","hash":"f210a023ac5a43e37c3f139abe0f8d8db27942d1","modified":1731654517680},{"_id":"public/archives/2022/page/4/index.html","hash":"f210a023ac5a43e37c3f139abe0f8d8db27942d1","modified":1731654517680},{"_id":"public/archives/2022/page/5/index.html","hash":"f210a023ac5a43e37c3f139abe0f8d8db27942d1","modified":1731654517680},{"_id":"public/archives/2022/01/index.html","hash":"05d8973ad1b24d2a48d2bfa6f9089c7aa7798594","modified":1731654517680},{"_id":"public/archives/2022/02/index.html","hash":"fd1a6b5133966fd2e7a2ed34c5906e54f6f78574","modified":1731654517680},{"_id":"public/archives/2022/03/index.html","hash":"e5c7d38bf45fac812dc32017a7b46b6e739179a4","modified":1731654517680},{"_id":"public/archives/2022/04/index.html","hash":"57d2d1d1f0e8ae400209d38afb2d9aa8112028d5","modified":1731654517680},{"_id":"public/archives/2022/05/index.html","hash":"35656a0132faf12b3f51fbd48c2c88e54474e370","modified":1731654517680},{"_id":"public/archives/2022/05/page/2/index.html","hash":"35656a0132faf12b3f51fbd48c2c88e54474e370","modified":1731654517680},{"_id":"public/archives/2022/05/page/3/index.html","hash":"35656a0132faf12b3f51fbd48c2c88e54474e370","modified":1731654517680},{"_id":"public/archives/2022/06/index.html","hash":"a942d5d06bf38bb3aff49d75c295e4caef002fb2","modified":1731654517680},{"_id":"public/archives/2022/07/index.html","hash":"b1cbf9dbd9b25a3d4c1361c76d73691a54a2f0ea","modified":1731654517680},{"_id":"public/archives/2022/08/index.html","hash":"c53119079d0e5fa3edb3832574e351e4172734c2","modified":1731654517680},{"_id":"public/archives/2022/10/index.html","hash":"adc636c72e5f7dbe1b65cf640190aaedcb123943","modified":1731654517680},{"_id":"public/archives/2022/11/index.html","hash":"5235cf9316d8cd62221a9f6902a4deb54ec4b1d1","modified":1731654517680},{"_id":"public/archives/2023/index.html","hash":"e2b5156fdea1d38c07167d405d19c1e83c6cde0a","modified":1731654517680},{"_id":"public/archives/2023/03/index.html","hash":"da1873ab9c65f93440d1de5bfe62b5fe293c262c","modified":1731654517680},{"_id":"public/archives/2023/05/index.html","hash":"a9e6d5bcdbbe022cf2045facfc3748628d849304","modified":1731654517680},{"_id":"public/archives/2023/06/index.html","hash":"70878d1da8670e4cd0875fc993644a304bfe18e5","modified":1731654517680},{"_id":"public/archives/2023/07/index.html","hash":"ecd3285b7120615ee08d10d903a9805910b723df","modified":1731654517680},{"_id":"public/archives/2023/10/index.html","hash":"9233efc92b83f27fba693d7f3896544008a90bb8","modified":1731654517680},{"_id":"public/archives/2024/index.html","hash":"4c3b8cd1839bcb9dc64975d22e665814144b7e61","modified":1731654517680},{"_id":"public/archives/2024/02/index.html","hash":"f8c12391199e5d2836fece6717544ebf430fa0ba","modified":1731654517680},{"_id":"public/archives/2024/05/index.html","hash":"615bbf37a2395f72ec4fece6a63b545e6281096f","modified":1731654517680},{"_id":"public/archives/2024/07/index.html","hash":"033ae24eb6d9f65719d7720413ac144ad46af02c","modified":1731654517680},{"_id":"public/index.html","hash":"e582fea82760f03247baed11069b52bb4e5c1b20","modified":1731654517680},{"_id":"public/archives/2024/10/index.html","hash":"9a23ef8b3e16d514662cfaaaa0d22c8fe07c8b91","modified":1731654517680},{"_id":"public/archives/2024/11/index.html","hash":"2c2319aef5d95ae075cc5ef110aa3864112445f4","modified":1731654517680},{"_id":"public/page/2/index.html","hash":"afb506459c9bbe48514cf29555606ad29a6e804d","modified":1731654517680},{"_id":"public/page/3/index.html","hash":"36bee11f24886b319c515fe4bb1939722a36870c","modified":1731654517680},{"_id":"public/page/4/index.html","hash":"380cccfc95f7977d27808ff401e6f6e5f3c23201","modified":1731654517680},{"_id":"public/page/5/index.html","hash":"2dd1e479c2fe9aaeed4800f2f3490f59eae7abf0","modified":1731654517680},{"_id":"public/page/6/index.html","hash":"da8279ea45bf1d2ee37657f1ba5bc8f38ea8f4b5","modified":1731654517680},{"_id":"public/page/7/index.html","hash":"040939798d926d46c8a8cd4f4da5cc478ccf8917","modified":1731654517680},{"_id":"public/page/8/index.html","hash":"d3568ac122994357249f99a6a480278577b04b2d","modified":1731654517680},{"_id":"public/page/9/index.html","hash":"6450b412022552c186109d6886ed829fc8438f4d","modified":1731654517680},{"_id":"public/page/10/index.html","hash":"e5585e3e822ae35dbcfd7c198f1e5c7f235a6eed","modified":1731654517680},{"_id":"public/page/11/index.html","hash":"b91ac7489c7361c4fbbc84667024dbed1dfe9819","modified":1731654517680},{"_id":"public/page/12/index.html","hash":"d143bc0811691e920daf44af0652053feb84bf31","modified":1731654517680},{"_id":"public/page/13/index.html","hash":"c6a8438be93b7929766137b0bfd9412a95c5279a","modified":1731654517680},{"_id":"public/tags/GitBook/index.html","hash":"ed9a21e11b7cc2b0e2834d698fee64181ccb46d9","modified":1731654517680},{"_id":"public/tags/Git/index.html","hash":"9cfddcfdda68f712871ab1d98061cb8e2663023c","modified":1731654517680},{"_id":"public/tags/Hexo/index.html","hash":"39381bc56be1343f7d35979579ef2eb7d203fdc0","modified":1731654517680},{"_id":"public/tags/Goframe/index.html","hash":"4596603e8b75f20aefa91d7c9a73c6b5de1e2d83","modified":1731654517680},{"_id":"public/tags/Go/index.html","hash":"6a48663a3126601d622a0f39ec246f0257366a0b","modified":1731654517680},{"_id":"public/tags/Lua/index.html","hash":"ed2f9dc489ba534b88011f54779df7cc90f5d766","modified":1731654517680},{"_id":"public/tags/Markdown/index.html","hash":"dc8d5a7d57392049aefa15bd493cd46dd35966d8","modified":1731654517680},{"_id":"public/tags/MongoDB/index.html","hash":"c3c2cacc9a3cfa5070a69f4ef33b8d7023600fe9","modified":1731654517680},{"_id":"public/tags/MySQL/index.html","hash":"828befdf5722a0ccdfb913fb878de9056d2cf8b5","modified":1731654517680},{"_id":"public/tags/DOS命令/index.html","hash":"74581b95dd44928e82039d94220c7d415410142e","modified":1731654517680},{"_id":"public/tags/Linux/index.html","hash":"f7a691cfc424e9ea2cf5b80191eedc8afc6aede5","modified":1731654517680},{"_id":"public/tags/JSON/index.html","hash":"48dbc4144d9c77bf115dcca54bdadcfb70a8c99e","modified":1731654517680},{"_id":"public/tags/binlog/index.html","hash":"967a4c812cc21f51d96fc2a45e9354328dde110b","modified":1731654517680},{"_id":"public/tags/数据库优化/index.html","hash":"58b55ef77755f2df410c74fd9fb11a3ce7fa04d5","modified":1731654517680},{"_id":"public/tags/架构设计/index.html","hash":"6eaa56622267aba31e660b1d8492c2bf8469c40d","modified":1731654517680},{"_id":"public/tags/索引/index.html","hash":"727710c6e04ac17099f37cf7993b761dbfbb7a55","modified":1731654517680},{"_id":"public/tags/联表查询/index.html","hash":"5c7557c88f635f173da1d8ffdb4529e792cd2a16","modified":1731654517680},{"_id":"public/tags/数据库/index.html","hash":"f047262f8a96d0789af1e17224fcad5b1182a57b","modified":1731654517680},{"_id":"public/tags/聚簇索引/index.html","hash":"76228d34c443b593137a400d9f038e3f8d086a77","modified":1731654517680},{"_id":"public/tags/Excel/index.html","hash":"220d884982eb32c97aef28e0ab9683272d427468","modified":1731654517680},{"_id":"public/tags/Oracle/index.html","hash":"094d6129a655e6faefb7cef6fcf61d6c26f16b7b","modified":1731654517680},{"_id":"public/tags/R/index.html","hash":"7457cacabf4270e023716a9f6c58adef2bf10ed0","modified":1731654517680},{"_id":"public/tags/Prolog/index.html","hash":"250bd059efd170e1c42564d6d6c17a4fb02f3cee","modified":1731654517680},{"_id":"public/tags/SEO/index.html","hash":"79ce9e4438d2967af8826afad2513e31ada76b98","modified":1731654517680},{"_id":"public/tags/Redis/index.html","hash":"306a23bfd105075d97f0e5d2679469a5b802baf3","modified":1731654517680},{"_id":"public/tags/产品设计/index.html","hash":"f6f4ffe59ffca37c2d963dc021de649fe8c8971c","modified":1731654517680},{"_id":"public/tags/云闪付/index.html","hash":"d014ab876a9cce510d79c5c45e06ba8d8510dc1a","modified":1731654517680},{"_id":"public/tags/锚定效应/index.html","hash":"ad7bb47c5a5e19849cd2df66fc59ca24018a0c23","modified":1731654517680},{"_id":"public/tags/心跳包/index.html","hash":"bd1d4f3a7e5456aa1e715ca1668183c37ca02385","modified":1731654517680},{"_id":"public/tags/工具/index.html","hash":"369e74338706bf1058e792e5dc1d6560692621d8","modified":1731654517680},{"_id":"public/tags/数据/index.html","hash":"896411024c04932b1ed59a48abc505c8d3336f0a","modified":1731654517680},{"_id":"public/tags/死锁/index.html","hash":"5ad9287f813be02ac8a91be6b6d5dc7c5cf371b3","modified":1731654517680},{"_id":"public/tags/池化技术/index.html","hash":"d7c5f413913827ccd5085924c0857d60cae9170e","modified":1731654517680},{"_id":"public/tags/线程安全/index.html","hash":"65bd97dcd0564ba593329d3cea2745c0f657ff17","modified":1731654517680},{"_id":"public/tags/杂谈/index.html","hash":"67898dcef4f77b8f82dead09285052859b1aefbc","modified":1731654517680},{"_id":"public/tags/书籍/index.html","hash":"ac039d5adda72184b459c4638fa1adaf95e223c4","modified":1731654517680},{"_id":"public/tags/ab-exe/index.html","hash":"5cc04c2978cf35667ec116ae22e8437719c213f5","modified":1731654517680},{"_id":"public/tags/七牛云/index.html","hash":"b92f73b6ea814278af7d83e6110269ef7cae0d5b","modified":1731654517680},{"_id":"public/tags/消息推送/index.html","hash":"baa74bc4ada618c93554fae6b58f7eab999a3003","modified":1731654517680},{"_id":"public/tags/PHP/index.html","hash":"c66ebee2a32e30b550de136600a18877b88ac76b","modified":1731654517680},{"_id":"public/tags/算法/index.html","hash":"a4898033ad63e750f139df5765bf7a8127dfe83e","modified":1731654517680},{"_id":"public/tags/滑动窗口/index.html","hash":"e019ca1b38206eceb2d797f9c2709b63fce69b4b","modified":1731654517680},{"_id":"public/tags/Notepad/index.html","hash":"4202c450d41d600b4487e121d31795b80e901d6a","modified":1731654517680},{"_id":"public/tags/熔断/index.html","hash":"f9801efdf6506ebb71cc23742bf6427b14a9995c","modified":1731654517680},{"_id":"public/tags/CSS/index.html","hash":"cd2d6328c8afe6ff3ba3ef78bb02ad2d7c646aa9","modified":1731654517680},{"_id":"public/tags/Jquery/index.html","hash":"965dac35a4ce0fdf20209e397aa07a9374e79f26","modified":1731654517680},{"_id":"public/tags/JQuery/index.html","hash":"1c33c30b763d2fa94d09e51a6d2f07aa9a7cb39a","modified":1731654517680},{"_id":"public/tags/JavaScript/index.html","hash":"b9b1dd313b276ec9ca3078a763fc265cdc56d222","modified":1731654517680},{"_id":"public/tags/HTML/index.html","hash":"2d2a0b89eec145a42a0debc649b4f55eace35ff8","modified":1731654517680},{"_id":"public/tags/富文本编辑器/index.html","hash":"0a663745e9a6574368d87413d0f59b056e363e86","modified":1731654517680},{"_id":"public/tags/跨域/index.html","hash":"b33e631b603c86e97eb99443ec8d6ed67714c49e","modified":1731654517680},{"_id":"public/tags/前端/index.html","hash":"e0a8c03610564884cc418fff6e068394a5bec173","modified":1731654517680},{"_id":"public/tags/高德地图/index.html","hash":"0a3a8254ab290c78965c8f7e4ba5982439e0d98a","modified":1731654517680},{"_id":"public/tags/ThinkPHP/index.html","hash":"6d1545e830adc3590b4f45994c1cfe90c9cc7428","modified":1731654517680},{"_id":"public/tags/composer/index.html","hash":"963ad2bb847b5aa52df5b86057458ac4804c03cc","modified":1731654517680},{"_id":"public/tags/trait/index.html","hash":"2ab7554d345575e809cba57eb280f5121802b043","modified":1731654517680},{"_id":"public/tags/PHPExcel/index.html","hash":"cff442cc1754dab2d70c8c1b9de5bcc11933d452","modified":1731654517680},{"_id":"public/tags/PHP笔记/index.html","hash":"7a30f41f4894d50fa3ccbe4eedc8fbc7ec0292db","modified":1731654517680},{"_id":"public/tags/define与const/index.html","hash":"a8b9fb48d771478d19e37765ace1874725f96789","modified":1731654517680},{"_id":"public/tags/lock/index.html","hash":"eb1b2dc97dc6e791b74c9e59f9e9dd426e3c463f","modified":1731654517680},{"_id":"public/tags/elasticsearch/index.html","hash":"d61b2f05a4acb6b7274cf045548f0e878488d456","modified":1731654517680},{"_id":"public/tags/魔术方法/index.html","hash":"afd87bd45e10cb856e0ae57c70567969dde829ed","modified":1731654517680},{"_id":"public/tags/加解密/index.html","hash":"920e9a9edf43a78dfe911ab5f02af1865303cb81","modified":1731654517680},{"_id":"public/tags/面试/index.html","hash":"ebbaf63ced5a23b8f6e1d8c6596dfa595a11f689","modified":1731654517680},{"_id":"public/tags/数据字典/index.html","hash":"28278bbd5e582625d3a03fd100cdb3b80f1e0bf0","modified":1731654517680},{"_id":"public/tags/运维/index.html","hash":"229173cfe29dac947714ea652262ff9691453884","modified":1731654517680},{"_id":"public/tags/Yii2/index.html","hash":"9d0fde6036f4535ac958b54f38c6afa453a5daff","modified":1731654517680},{"_id":"public/tags/phpStorm/index.html","hash":"338e93de37222fbd3ddd6033fe2baefd1a6e513d","modified":1731654517680},{"_id":"public/tags/xdebug/index.html","hash":"e23b465a51f43b24c201e817ecaed1bfda2baa45","modified":1731654517680},{"_id":"public/tags/RPC/index.html","hash":"75d5d288747941268d1d0e9701e3cb357d4ad1cc","modified":1731654517680},{"_id":"public/tags/PHP函数/index.html","hash":"c4501c6d68897076a1f5d155cb0723d41f1ecf0d","modified":1731654517680},{"_id":"public/tags/Windows/index.html","hash":"bf8dd146a35a4523e9ffda89a4f2395596547009","modified":1731654517680},{"_id":"public/tags/目标管理/index.html","hash":"43522da7ff3fc6ae649592aec73786f9c6465a71","modified":1731654517680},{"_id":"public/tags/代码规范/index.html","hash":"87f81c08ea3ee813c232552ff599e3cfd67b50a9","modified":1731654517680},{"_id":"public/tags/职场之道/index.html","hash":"1a0c138bb16c9b5033e3b900eabc3e0afa544a2a","modified":1731654517680},{"_id":"public/tags/软件架构/index.html","hash":"f2b8984b0569d8cd356dc9f5b528eddc690f2e97","modified":1731654517680},{"_id":"public/tags/系统设计/index.html","hash":"017eb9779819cd2380623941836bbaa9554085a0","modified":1731654517680},{"_id":"public/tags/Docker/index.html","hash":"94888191d0d865cf6c2b3f65d9d63263aee205f1","modified":1731654517680},{"_id":"public/tags/高并发/index.html","hash":"7e8152deaf333688cc92a082baf115f177e661b0","modified":1731654517680},{"_id":"public/tags/设计模式/index.html","hash":"dde8589e429f90685c07753c3c2b0d05c790f023","modified":1731654517680},{"_id":"public/tags/设计模式/page/2/index.html","hash":"2e61a47bfa0d28b7cb7bca9ef18ab5f7e0aeaf10","modified":1731654517680},{"_id":"public/tags/Nginx/index.html","hash":"fa9bec470de80b32416df725c82eaddf97056ae4","modified":1731654517680},{"_id":"public/tags/日志/index.html","hash":"ffbe9512d1832fe037e936321ff929b5ccf693b1","modified":1731654517680},{"_id":"public/tags/Cron/index.html","hash":"adad12bd4c598f6e49bba670eaf9fe6965ec1fc5","modified":1731654517680},{"_id":"public/tags/tee/index.html","hash":"61984c91849206b5bcd3422ce0cae5b48a2feefd","modified":1731654517680},{"_id":"public/tags/ntpdate/index.html","hash":"7db9d815279e7fc33cdb76b382bfcdb72e97dd12","modified":1731654517680},{"_id":"public/tags/curl/index.html","hash":"57499b23e4598e4cd55744ff3a47e0204e56e21c","modified":1731654517680},{"_id":"public/tags/Cacti/index.html","hash":"05ca6dc187b463fcb50a05cc435c955dae508b40","modified":1731654517680},{"_id":"public/tags/网络/index.html","hash":"7b17b799f40ce3cd7ef6b1fda45ccd8377ad4296","modified":1731654517680},{"_id":"public/tags/nodejs/index.html","hash":"5124fb83e12fc2dd2da9059ceabf869bb4d5771a","modified":1731654517680},{"_id":"public/tags/rz-sz/index.html","hash":"5fdbd821b406772a356bbd1aabae6f0b91b7e2d2","modified":1731654517680},{"_id":"public/tags/cpu/index.html","hash":"6cb4f4dc14543825c2fd024707fc3010f3ec54ed","modified":1731654517680},{"_id":"public/tags/grep/index.html","hash":"d42bcad50fd43e4029c60b97efe08a57a86ae673","modified":1731654517680},{"_id":"public/tags/SystemD/index.html","hash":"04ecbc4428558476c4bec95e318406093491e556","modified":1731654517680},{"_id":"public/tags/mysql/index.html","hash":"c1b93a43a2eac8ff522d83cd87f8e44a2cf4d5a8","modified":1731654517680},{"_id":"public/tags/xargs/index.html","hash":"bafc6809d110e70a9f7c3bfaa62bd43bf6196508","modified":1731654517680},{"_id":"public/tags/后台运行/index.html","hash":"c420aae736ae9a6cacebca9f6290dbefca7ab371","modified":1731654517680},{"_id":"public/medias/bggrid.png","hash":"c2ef59db0838c5a17f74c0d25f9c508a6ab2a803","modified":1731654517680},{"_id":"public/medias/comment_bg.png","hash":"dfc93d24081884fbc58cab0f8fd19e77d31d6123","modified":1731654517680},{"_id":"public/medias/clock.png","hash":"2e6b501bf0a205394e635c451eff4cd49879a865","modified":1731654517680},{"_id":"public/medias/candy.png","hash":"4b521b5a71f569eee2ef322d08f7b4cc26d2ad4c","modified":1731654517680},{"_id":"public/medias/favicon.webp","hash":"c4f230a76bbde8c34720112dc92d748b46a7271b","modified":1731654517680},{"_id":"public/medias/icp.png","hash":"27a96f31f7d0413c6ade6f40e06f021f501151c7","modified":1731654517680},{"_id":"public/medias/laba.png","hash":"ecef8d05d5ee2d1186acffc3c478ba95206d012c","modified":1731654517680},{"_id":"public/medias/logo.png","hash":"9c5fc2729952095b46451624a8b942d10b427d22","modified":1731654517680},{"_id":"public/medias/logo.webp","hash":"c4f230a76bbde8c34720112dc92d748b46a7271b","modified":1731654517680},{"_id":"public/medias/loading.svg","hash":"4669e9d10efce6150b28c38fb606a4d6cc3889eb","modified":1731654517680},{"_id":"public/medias/map-visit.png","hash":"367587252245cddf76dc7c268558e5936a138df9","modified":1731654517680},{"_id":"public/medias/miao.jpg","hash":"490c4810c1a55adec7c306754af818f6cd026b18","modified":1731654517680},{"_id":"public/medias/robot.png","hash":"4121387f79241ce088fca4dda96861fa76acd82b","modified":1731654517680},{"_id":"public/medias/map-visit原来.png","hash":"dfe5332f995b32a746d9b9fdcaf9a2d42a0ef8f7","modified":1731654517680},{"_id":"public/medias/qrcode_for_gh.jpg","hash":"b6867b73aa36514c02f2be96fab09fc3cc0ea82b","modified":1731654517680},{"_id":"public/medias/robothui.png","hash":"b4c74a1816e276ee6ef00f8fd1023b4d3081ccd8","modified":1731654517680},{"_id":"public/medias/yinghua.png","hash":"9c5fc2729952095b46451624a8b942d10b427d22","modified":1731654517680},{"_id":"public/medias/banner/4.jpg","hash":"b4a8bf81e49457405c14b150467c79258fbfa5bb","modified":1731654517680},{"_id":"public/medias/banner/6.jpg","hash":"8f8956ade831821ddf20fd9921fe54dc87ffa7ed","modified":1731654517680},{"_id":"public/medias/project-img/es6pic.jpg","hash":"e8dcc820355eb93ef53109be4b82f84fdd7e5533","modified":1731654517680},{"_id":"public/medias/project-img/jspicnoknow.jpg","hash":"a7e4c7a5929393a3dc0777652c4391589e7048a7","modified":1731654517680},{"_id":"public/medias/project-img/jspic.jpg","hash":"3b6ba11fe3413de19ebdf9bded736fa2f91351e3","modified":1731654517680},{"_id":"public/medias/project-img/jssecret.jpg","hash":"db3e0485031a42dd8db0fcdf07d3157f507bc08c","modified":1731654517680},{"_id":"public/medias/project-img/vue_system.png","hash":"471a82ce2d97d9efa69e3ddc3d4507304e7485ef","modified":1731654517680},{"_id":"public/medias/reward/alipay.jpg","hash":"f110b55eb71fb28b59b14ea1d38b16070b501806","modified":1731654517680},{"_id":"public/medias/reward/wechat.png","hash":"e61bf35659150e38a2afeb4b2162e276467f0311","modified":1731654517680},{"_id":"public/medias/spring-img/baozhu.png","hash":"45e7f98e27f8a4f3765c66acc7abcc6354be50f3","modified":1731654517680},{"_id":"public/medias/spring-img/caishen.png","hash":"530266e2fb0bd6fff7782aaca2eec1308ef091e7","modified":1731654517680},{"_id":"public/medias/spring-img/denglong.png","hash":"55696d65e5663db4ae4fd16fe83613e30dd70eff","modified":1731654517680},{"_id":"public/medias/spring-img/dragon-boat.png","hash":"75b838cf25e0f3d786615e90f10a5dde23777136","modified":1731654517680},{"_id":"public/medias/spring-img/dragon.png","hash":"6dcd150cddd65a5f7266d0df2c9e01c67440d9c9","modified":1731654517680},{"_id":"public/medias/spring-img/fish.png","hash":"aa7a427cedb7d9d288e5751ee704d7c6c24d8036","modified":1731654517680},{"_id":"public/medias/spring-img/fudai.png","hash":"4d92c318ca45f04d73643dd26154396d05dfe3eb","modified":1731654517680},{"_id":"public/medias/spring-img/fudao.png","hash":"8af41beba972d26c815e2b8547b069a71cdab2e9","modified":1731654517680},{"_id":"public/medias/spring-img/gugu.png","hash":"ca6824fe5795fd6aadc5dd431c701802bfd51a3f","modified":1731654517680},{"_id":"public/medias/spring-img/gu1.png","hash":"b60a21739fbdb874d424dd19a2e012fc6bd36109","modified":1731654517680},{"_id":"public/medias/spring-img/homes.png","hash":"ec123bae613ef8f3cc95ae6ad22b2f1273f8df02","modified":1731654517680},{"_id":"public/medias/spring-img/huadeng.png","hash":"d67f60bff90ac18c056c1811feed9897f9f147a8","modified":1731654517680},{"_id":"public/medias/spring-img/jiaozi.png","hash":"609f9ad35ef104a9c646239f8111727772239857","modified":1731654517680},{"_id":"public/medias/spring-img/lion.png","hash":"58524651b7c392c9854e4876cd191fafa114e145","modified":1731654517680},{"_id":"public/medias/spring-img/maozi.png","hash":"48e5853b9158aa5059521f76c43fe9636c967b1d","modified":1731654517680},{"_id":"public/medias/spring-img/miaohui.png","hash":"eaa60b0ef7a9624daebfa712bcf85669aefd3526","modified":1731654517680},{"_id":"public/medias/spring-img/nianhuo.png","hash":"fc724a0d7ddbea975df8925a5ee0196432ebf5fc","modified":1731654517680},{"_id":"public/medias/spring-img/shanzi.png","hash":"9d4b2c7033b346d26ce4b314e5e582ae2b118f5e","modified":1731654517680},{"_id":"public/medias/spring-img/spring.png","hash":"5cb17f67f8a5938e1daef7c656ce9c9f6c19510f","modified":1731654517680},{"_id":"public/medias/spring-img/tang.png","hash":"5d52bb0cb0e0fb9af19db87e4072d3a86760377a","modified":1731654517680},{"_id":"public/medias/toc-banner/aticalmode.jpg","hash":"7cb79e02d156b67be1e95152a385ff10f0b7bfc3","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-regular-400.eot","hash":"439c8afd3373acb4a73135a34e220464a89cd5e2","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-regular-400.ttf","hash":"0f4bd02942a54a6b3200d9078adff88c2812e751","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-regular-400.woff","hash":"59439d3ad31d856d78ec3e2bd9f1eafa2c7a581c","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-regular-400.woff2","hash":"f6f653b4ea8fc487bdb590d39d5a726258a55f40","modified":1731654517680},{"_id":"public/libs/lightGallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1731654517680},{"_id":"public/libs/lightGallery/fonts/lg.svg","hash":"67d261ac428761389c895e1da73664e633e14a72","modified":1731654517680},{"_id":"public/libs/lightGallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1731654517680},{"_id":"public/libs/lightGallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1731654517680},{"_id":"public/libs/lightGallery/img/loading.gif","hash":"15a76af2739482d8de7354abc6d8dc4fca8d145e","modified":1731654517680},{"_id":"public/libs/lightGallery/img/video-play.png","hash":"2962e03ddbe04d7e201a5acccac531a2bbccddfc","modified":1731654517680},{"_id":"public/libs/lightGallery/img/youtube-play.png","hash":"f8d11384d33b7a79ee2ba8d522844f14d5067a80","modified":1731654517680},{"_id":"public/libs/lightGallery/img/vimeo-play.png","hash":"9b72fc0f86a01467ed0b68c9cc4d604ec316d517","modified":1731654517680},{"_id":"public/libs/share/fonts/iconfont.svg","hash":"1d56c9d5db0273f07c43cc1397e440f98ba7827a","modified":1731654517680},{"_id":"public/libs/share/fonts/iconfont.eot","hash":"00ff749c8e202401190cc98d56087cdda716abe4","modified":1731654517680},{"_id":"public/libs/share/fonts/iconfont.ttf","hash":"afd898f59d363887418669520b24d175f966a083","modified":1731654517680},{"_id":"public/libs/share/fonts/iconfont.woff","hash":"2e3fce1dcfbd6e2114e7bfbeaf72d3c62e15a1bd","modified":1731654517680},{"_id":"public/CNAME","hash":"6fa3d17077b164778ed28f3ae6a719d973da8558","modified":1731654517680},{"_id":"public/codes/dictionary.php","hash":"8ffeff1652419fe8ef5df9611594ac17c301c10a","modified":1731654517680},{"_id":"public/images/doc_mysql_1.png","hash":"3db1cf21d4e67470fe7898026f43c600f090eef3","modified":1731654517680},{"_id":"public/images/doc_mysql_2.png","hash":"cd32099beafdd47c475daa70857b7a45d1f46c30","modified":1731654517680},{"_id":"public/images/doc_mysql_3.png","hash":"5d47f98e2dc6951816d279009930fa68551f17e8","modified":1731654517680},{"_id":"public/images/goframe_note_1.png","hash":"413346c721df5130e69785f6e5556f79e42f15e8","modified":1731654517680},{"_id":"public/images/doc_mysql_4.png","hash":"23bcb3da648d22e943d5cbba8d7cde03e2753449","modified":1731654517680},{"_id":"public/images/builder-pattern-1.jpg","hash":"34a6c03013223718eaa0c7636beb78d46b35f6e7","modified":1731654517680},{"_id":"public/images/hexo_notes_2.png","hash":"71e7313670c2d8bf6817d5fb37c3291ddb645aba","modified":1731654517680},{"_id":"public/images/install_cacti_on_linux_1.png","hash":"f4ed1ccad16b5769c728f9ab6815909b01624fb4","modified":1731654517680},{"_id":"public/images/install_cacti_on_linux_3.png","hash":"8fe3dac30163d600415565b57d763b220ba8687c","modified":1731654517680},{"_id":"public/images/linux_command_1.png","hash":"b80d4cc94726607774f406a04b721cd5a01384f8","modified":1731654517680},{"_id":"public/images/linux_install_nodejs_1.png","hash":"fa6c8dbab61ab6ae5b1d3f5edd1256229ccaaf45","modified":1731654517680},{"_id":"public/images/linux_install_nodejs_2.png","hash":"30bebc05e6a6b1176c1f20400406eda5781030f6","modified":1731654517680},{"_id":"public/images/mysql_binlog_1.png","hash":"0dad6428b0c10e9510ff11fb0540fef8a06297ae","modified":1731654517680},{"_id":"public/images/mysql_binlog_2.png","hash":"d84165bae1bb641aa1f3d9a72af80e8b12b2aa88","modified":1731654517680},{"_id":"public/images/mysql_binlog_4.png","hash":"bd1c4ee34d349b352a9791db363dddce70342f13","modified":1731654517680},{"_id":"public/images/mysql_binlog_3.png","hash":"0d7796aaf949930238aa8d86eb790c167ef8a1e0","modified":1731654517680},{"_id":"public/images/mysql_json_1.png","hash":"a99351e227c63db4d313cffda4cbb1fd10ef2430","modified":1731654517680},{"_id":"public/images/mysql_explain_1.png","hash":"92a555e7f5791a79a6a6e603a8c1aeffc7d8fa7e","modified":1731654517680},{"_id":"public/images/mysql_json_10.png","hash":"bf1003076ff463b32d17df50f53fbb70ecd7fbda","modified":1731654517680},{"_id":"public/images/mysql_json_11.png","hash":"96ccdfc872acc319fd8db2b129a972fb0636cb7a","modified":1731654517680},{"_id":"public/images/mysql_json_12.png","hash":"b470d02d2876055e168999fc4d7fd965e9ebf2e7","modified":1731654517680},{"_id":"public/images/mysql_json_13.png","hash":"950f6f2ae482dcb0931794147b410358b6887c6c","modified":1731654517680},{"_id":"public/images/mysql_json_14.png","hash":"4904e15212997c6c52f1fcbf582a9fa0c7dfda00","modified":1731654517680},{"_id":"public/images/mysql_json_2.png","hash":"2ebe822563284d7a41f96674f234bca2beaf379b","modified":1731654517680},{"_id":"public/images/mysql_json_3.png","hash":"9c4cdf6592896930097256a044253912c1bcfd2f","modified":1731654517680},{"_id":"public/images/mysql_json_4.png","hash":"e4a16ff55798e631c6410aee54ddec6dbf2a1d94","modified":1731654517680},{"_id":"public/images/mysql_json_5.png","hash":"4e01029549cfe542bb80fb52e5f90480962771aa","modified":1731654517680},{"_id":"public/images/mysql_json_6.png","hash":"052bbd325a833ef7a41f73127958507273f84121","modified":1731654517680},{"_id":"public/images/mysql_json_7.png","hash":"d5ab26a2c68d9ea11c3338e4a4e19e13693e8d5c","modified":1731654517680},{"_id":"public/images/mysql_json_8.png","hash":"fba6352cf2ff124e83171c3d9a3a162894bd32d0","modified":1731654517680},{"_id":"public/images/mysql_json_9.png","hash":"9c6ff2284a999b6736c9a9a0d0e43b964e5e15bd","modified":1731654517680},{"_id":"public/images/notepad_note_3.png","hash":"d751a257502a2b89b64e7cdaede363fae8af4983","modified":1731654517680},{"_id":"public/images/notepad_note_4.png","hash":"507d5d648acaa56e9eea92ea739cc075a099e299","modified":1731654517680},{"_id":"public/images/notepad_note_5.png","hash":"136a3d55c1bb0f287e7ae30a208a2f30f3172edb","modified":1731654517680},{"_id":"public/images/php_es_1.png","hash":"c3f9ff0fd16436ba0084215f6a3a88518b37ff52","modified":1731654517680},{"_id":"public/images/php_es_2.png","hash":"51bd256d5605c94c5c88aadcc71654cfa6c4cb44","modified":1731654517680},{"_id":"public/images/php_excel_note_1.png","hash":"59d1639452b1a92cf3309ed22c59198c83decab5","modified":1731654517680},{"_id":"public/images/php_excel_note_2.png","hash":"8d5ec6cbfe5edc268def963a6b5c75bb5eb3869d","modified":1731654517680},{"_id":"public/images/phpstorm_auth_format_1.png","hash":"a3433e773db0d668ead412985d07a6c3abfe4131","modified":1731654517680},{"_id":"public/images/phpstorm_auth_format_2.png","hash":"0cda6c6b191b32817a5ea5922bd20746dfd35f65","modified":1731654517680},{"_id":"public/images/phpstorm_auth_format_3.png","hash":"0e5a1c41eba1ab3fc1643984a15c281fac7bb86f","modified":1731654517680},{"_id":"public/images/phpstorm_auth_format_5.png","hash":"d0cd2cf651eb186e5979eaa7781c415ab5773aa5","modified":1731654517680},{"_id":"public/images/phpstorm_auth_format_4.png","hash":"007d1827ff107bd8325af138e8ca825257bae1b9","modified":1731654517680},{"_id":"public/images/phpstorm_auth_format_7.png","hash":"d6a8e0b6a5d1985f892c9b615c304cbbe42bf4c1","modified":1731654517680},{"_id":"public/images/phpstorm_auth_format_6.png","hash":"75c1e1fdea2d00551cd3b912a02c64bd7f56cb9e","modified":1731654517680},{"_id":"public/images/phpstorm_auth_format_8.png","hash":"90f23258934e6d8885dff476354dd81417a6cf6f","modified":1731654517680},{"_id":"public/images/phpstorm_notes_1.png","hash":"a0c0e9cf929d65bc22225722783b84c1cc69b53c","modified":1731654517680},{"_id":"public/images/phpstorm_show_dir_2.png","hash":"13443eb8de287232b11af68a5876ace9d5f123ca","modified":1731654517680},{"_id":"public/images/phpstorm_show_dir_1.png","hash":"67dcf29f2fddc3a71272377c133981ebed262667","modified":1731654517680},{"_id":"public/images/prototype-pattern-1.png","hash":"9ac4b232d275ecb67661923c5a2de3a5ad99b451","modified":1731654517680},{"_id":"public/images/redis_monitor_1.png","hash":"77aca7d9512f58d4b0916b6c2f31860aca25500f","modified":1731654517680},{"_id":"public/images/redis_note_1.png","hash":"d1cd8a9ab74e07926cee0e04fb3c0ba7a424c29a","modified":1731654517680},{"_id":"public/images/redis_note_2.png","hash":"5bcbf4cbe2295b067500a21f660e4291fa98c9bb","modified":1731654517680},{"_id":"public/images/redis_note_3.png","hash":"0d517f2af3fd92bbe0b812c9c861612aa3a7a89e","modified":1731654517680},{"_id":"public/images/redis_note_4.png","hash":"c1b4e1edca1d957c2022434f538cda392c955bf0","modified":1731654517680},{"_id":"public/images/show_mysql_version_on_linux_1.png","hash":"92776da9123a8ce1fddb5005bc23c08bf43c0276","modified":1731654517680},{"_id":"public/images/show_mysql_version_on_linux_2.png","hash":"77207eb58eb57309d7a30a9d3727779f26364310","modified":1731654517680},{"_id":"public/images/show_mysql_version_on_linux_3.png","hash":"f92d73246c964be7b598c2be34b3dc4cb1970808","modified":1731654517680},{"_id":"public/images/show_mysql_version_on_linux_4.png","hash":"3b8e3f0a39e20abac6147dc727935dc62190e16c","modified":1731654517680},{"_id":"public/images/simple-factory-pattern-1.jpg","hash":"08820001d5ddf010961e6a82f878143c2e58ce4c","modified":1731654517680},{"_id":"public/images/split_txt_1.png","hash":"d916ddfd09fe120bf6f8aa3a0ee31e7db9eaf8b5","modified":1731654517680},{"_id":"public/images/split_txt_2.png","hash":"f4acd47a727652edc34d5dc23583028fb1464276","modified":1731654517680},{"_id":"public/images/tec_manage_1.png","hash":"f75391ead2e4bffd1f20f2269a19a40d946f1729","modified":1731654517680},{"_id":"public/images/split_txt_3.png","hash":"309e21a1f62353938044266851278d8bf325f1d5","modified":1731654517680},{"_id":"public/images/test_ab_2.png","hash":"fe920b7207d227cf93ab352645c2b312cb5e198c","modified":1731654517680},{"_id":"public/images/test_ab_3.png","hash":"9782f11e4927b7c6efc34cba777c788180604af0","modified":1731654517680},{"_id":"public/images/use_mysql_on_linux_1.png","hash":"3e190f4fe664b16c166b201535be978063a2994b","modified":1731654517680},{"_id":"public/images/use_mysql_on_linux_2.png","hash":"24e3539aa3ee63d769e0c9b854f90204d7e2784a","modified":1731654517680},{"_id":"public/images/window_move_desktop_2.png","hash":"d12bdc4eb37512fcbf57e591ffeb15d1bb9929cb","modified":1731654517680},{"_id":"public/images/window_move_desktop_3.png","hash":"6ded8e9d23b1866c775885902558178a4a938d85","modified":1731654517680},{"_id":"public/images/window_move_desktop_4.png","hash":"87530e039fb8a6e7066acf9c68b624e7582739f0","modified":1731654517680},{"_id":"public/images/wx_msg_push_1.png","hash":"95a0bdee3eb667329151445aad05a4b9fdddf4e3","modified":1731654517680},{"_id":"public/images/wx_msg_push_2.png","hash":"f6df1e3832920438862823f1851515fd02b02d0c","modified":1731654517680},{"_id":"public/images/xdebug_5.png","hash":"03fcaad400ce6132d71f9b3c6fc4590f8cff4e40","modified":1731654517680},{"_id":"public/vue-practice/01-todolist/index.html","hash":"0cc74e177337d8cea7b7a4d08bee64305aa5e832","modified":1731654517680},{"_id":"public/assets/js/APlayer.min.js","hash":"70c0c4a9bf698747b7c058c21287ad617355e5dd","modified":1731654517680},{"_id":"public/css/prism-tomorrow.css","hash":"733208631ad1ebf0ba27f7e6f02eb11414d4e284","modified":1731654517680},{"_id":"public/assets/js/Meting.min.js","hash":"5e3fda3405bf0ff3a8323613bd91df7d9dbe8a1f","modified":1731654517680},{"_id":"public/assets/css/APlayer.min.css","hash":"7f4f8913f2d46ade2def5134e2cc8684a4b87939","modified":1731654517680},{"_id":"public/medias/banner/1.jpg","hash":"aa98b94623353f6efe8df7e617cac14845ea88e7","modified":1731654517680},{"_id":"public/medias/banner/5.jpg","hash":"d58e13b66974ab79dfb0697a0603d661dec5a699","modified":1731654517680},{"_id":"public/medias/project-img/vue-mall.png","hash":"dc43a076b8bcb36f534fb408d9777fc2beb42f7f","modified":1731654517680},{"_id":"public/medias/toc-banner/aboutme1.jpg","hash":"ce3b6c8f1c711ddeb8010607e9ccad689edc2c4a","modified":1731654517680},{"_id":"public/medias/toc-banner/suibi1.jpg","hash":"f8b7de772436cfbff01a10c1c558dcf0e76de1e0","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-brands-400.eot","hash":"22f9e7d5226408eb2d0a11e118257a3ca22b8670","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-brands-400.woff","hash":"18838f5260317da3c5ed29bf844ac8a4f7ad0529","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-brands-400.woff2","hash":"a46bd47ff0a90b812aafafda587d095cdb844271","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-brands-400.ttf","hash":"91cbeeaceb644a971241c08362898599d6d968ce","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-solid-900.woff","hash":"92803b8753ceda573c6906774677c5a7081d2fbb","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-solid-900.woff2","hash":"9c081b88b106c6c04ecb895ba7ba7d3dcb3b55ac","modified":1731654517680},{"_id":"public/images/goland_1.png","hash":"a4022bcdacf321af92179ea431b41d1408e62aee","modified":1731654517680},{"_id":"public/images/goland_2.png","hash":"0b26d1dcbe8590e1e8a12d929fdd69362cad32fe","modified":1731654517680},{"_id":"public/images/install_cacti_on_linux_2.png","hash":"776fb100cd0269396153fe8c9ee2a5987d1e08d9","modified":1731654517680},{"_id":"public/images/happy.jpg","hash":"347f7557e8a1d6325783c8315d25793bc114f7aa","modified":1731654517680},{"_id":"public/images/notepad_note_1.png","hash":"1ae0f2386dcc19ae90d35aa29cfde13d063df276","modified":1731654517680},{"_id":"public/images/notepad_note_2.png","hash":"1c2a58848d0b4b7c3f70a16f17895e280a95d47d","modified":1731654517680},{"_id":"public/images/phpstorm_notes_2.png","hash":"6ac380cc1d08721c3d0cd975f0fb1edf70e946ca","modified":1731654517680},{"_id":"public/images/phpstorm_show_history_1.png","hash":"3577ff9d5567108f66134a004fd01a2fd9e05ef0","modified":1731654517680},{"_id":"public/images/test_ab_1.png","hash":"b1b9fee28aef094b3f7f0d049ef85ef5244f8ee2","modified":1731654517680},{"_id":"public/images/window_move_desktop_1.png","hash":"1c3bf77d446018a9ae6c9ee797fb0f5efe774c36","modified":1731654517680},{"_id":"public/images/window_move_desktop_5.png","hash":"1577547ba4332aa354ed8e2db85cc1714f623263","modified":1731654517680},{"_id":"public/images/xdebug_1.png","hash":"8a2ecf863773ef62d333bc6501c5177d5bc73fcf","modified":1731654517680},{"_id":"public/images/xdebug_3.png","hash":"e46c9c3a4878fe21392ff1c9b47103efc5da8869","modified":1731654517680},{"_id":"public/images/phpstorm_notes_3.png","hash":"8d33d610eade0cf26c8d789db0fa4b8b479baed3","modified":1731654517680},{"_id":"public/css/gitment.css","hash":"2bd15cc17dca35ac3ecc0acf167a23a1dd362acd","modified":1731654517680},{"_id":"public/css/my-gitalk.css","hash":"eeda46a83d0db1cc239a9cd27d544faf663f9883","modified":1731654517680},{"_id":"public/css/my.css","hash":"10577fbc30f241b126d1b51b1f56136ecba86b19","modified":1731654517680},{"_id":"public/css/matery.css","hash":"70c24da9ffde6476240364a1fb1b4bb731a2b44c","modified":1731654517680},{"_id":"public/js/activate-power-mode.js","hash":"a21f2119965860b613e17dbcb8a21c18a55b595f","modified":1731654517680},{"_id":"public/js/artitalk.js","hash":"71e6ba1e1341059e1f62918d09b8b706ed36149d","modified":1731654517680},{"_id":"public/js/click_show_text.js","hash":"fbb1119022bbb857e0860589ef5436f729436c0e","modified":1731654517680},{"_id":"public/js/linkcard.js","hash":"2742886e8bb593703ed37d6c517e4da4eb708c16","modified":1731654517680},{"_id":"public/js/matery.js","hash":"4759f82685bf1ae6a8492a915e6953664230ecb0","modified":1731654517680},{"_id":"public/js/moments.js","hash":"563b85e0653a70543ff9c5e572577976e41511ef","modified":1731654517680},{"_id":"public/js/search.js","hash":"5665123e5bfdf34c3f1a3a36e6db415ff4ff8924","modified":1731654517680},{"_id":"public/libs/aos/aos.css","hash":"191a3705a8f63e589a50a0ff2f2c5559f1a1b6b2","modified":1731654517680},{"_id":"public/libs/animate/animate.min.css","hash":"78e3dee0a3884c360a131c40dc51acedc55524fb","modified":1731654517680},{"_id":"public/libs/aos/aos.js","hash":"02bfb40b0c4b6e9b0b4081218357145cbb327d74","modified":1731654517680},{"_id":"public/libs/aplayer/APlayer.min.js","hash":"22caa28ff6b41a16ff40f15d38f1739e22359478","modified":1731654517680},{"_id":"public/libs/background/canvas-nest.js","hash":"65333d0dbb9c1173a1b13031b230161fc42c8b2f","modified":1731654517680},{"_id":"public/libs/aplayer/APlayer.min.css","hash":"4e05ca14801fb184140b434ec84571723a137ad6","modified":1731654517680},{"_id":"public/libs/background/ribbon-dynamic.js","hash":"052b80c29e6bc585aa28d4504b743bdbac220a88","modified":1731654517680},{"_id":"public/libs/background/ribbon-refresh.min.js","hash":"6d98692b2cad8c746a562db18b170b35c24402f4","modified":1731654517680},{"_id":"public/libs/background/ribbon.min.js","hash":"6a99d494c030388f96f6086a7aaa0f03f3fe532e","modified":1731654517680},{"_id":"public/libs/codeBlock/codeBlockFuction.js","hash":"c7ab06d27a525b15b1eb69027135269e9b9132fb","modified":1731654517680},{"_id":"public/libs/codeBlock/codeCopy.js","hash":"6d39a766af62e625f177c4d5cf3adc35eed71e61","modified":1731654517680},{"_id":"public/libs/codeBlock/codeLang.js","hash":"bac88b4d4e3679732d29bd037c34f089cf27cf05","modified":1731654517680},{"_id":"public/libs/cryptojs/crypto-js.min.js","hash":"5989527a378b55011a59522f41eeb3981518325c","modified":1731654517680},{"_id":"public/libs/codeBlock/codeShrink.js","hash":"201e8cd761b4be557247bdaf1ebc7c11c83194f6","modified":1731654517680},{"_id":"public/libs/dplayer/DPlayer.min.css","hash":"f7d19655f873b813ffba5d1a17145c91f82631b8","modified":1731654517680},{"_id":"public/libs/dplayer/DPlayer.min.js","hash":"c3bad7b265574fab0ae4d45867422ea1cb9d6599","modified":1731654517680},{"_id":"public/libs/gitalk/gitalk.css","hash":"940ded3ea12c2fe1ab0820d2831ec405f3f1fe9f","modified":1731654517680},{"_id":"public/libs/gitment/gitment-default.css","hash":"2903c59ee06b965bef32e937bd69f5b0b2190717","modified":1731654517680},{"_id":"public/libs/instantpage/instantpage.js","hash":"83ce8919b1a69b2f1809ffaf99b52a8627e650e9","modified":1731654517680},{"_id":"public/libs/jqcloud/jqcloud-1.0.4.min.js","hash":"257eaae3020599e4939f50d5008a743827f25b8c","modified":1731654517680},{"_id":"public/libs/gitment/gitment.js","hash":"28c02c45ce568e084cd1041dc493f83f9c6c88c6","modified":1731654517680},{"_id":"public/libs/gitalk/gitalk.min.js","hash":"8fefe38f28804f90116bdcb74a0875c9de9f3b7d","modified":1731654517680},{"_id":"public/libs/jqcloud/jqcloud.css","hash":"20d9f11a19d95c70e27cb922e0d6dccbec4eae89","modified":1731654517680},{"_id":"public/libs/masonry/masonry.pkgd.min.js","hash":"ff940b4ea68368ca0e4d5560cbb79fb147dfc3c5","modified":1731654517680},{"_id":"public/libs/jquery/jquery.min.js","hash":"2115753ca5fb7032aec498db7bb5dca624dbe6be","modified":1731654517680},{"_id":"public/libs/materialize/materialize.min.css","hash":"37fa31a28ac441bf2c449d5fab3de6946522d35a","modified":1731654517680},{"_id":"public/libs/others/clicklove.js","hash":"6a39b8c683ba5dcd92f70c6ab45d1cfac3213e8e","modified":1731654517680},{"_id":"public/libs/others/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1731654517680},{"_id":"public/libs/scrollprogress/scrollProgress.min.js","hash":"777ffe5d07e85a14fbe97d846f45ffc0087251cc","modified":1731654517680},{"_id":"public/libs/tocbot/tocbot.css","hash":"33d50871698cb86709137276d0074b1ce3210545","modified":1731654517680},{"_id":"public/libs/materialize/materialize.min.js","hash":"e3d1b12ce0479cf52ad736ef443ab9979cfbe549","modified":1731654517680},{"_id":"public/libs/tocbot/tocbot.min.js","hash":"5ec27317f0270b8cf6b884c6f12025700b9a565c","modified":1731654517680},{"_id":"public/libs/MyGallery/css/baguetteBox.css","hash":"32afebb282bb20d4deaec1c2273a8cae4e00535e","modified":1731654517680},{"_id":"public/libs/MyGallery/js/baguetteBox.js","hash":"e7e2134938cf07b09279058362c0f4784b39ca07","modified":1731654517680},{"_id":"public/libs/valine/Valine.min.js","hash":"20e18ffb8112f56df87a90323ee88243e606bfb5","modified":1731654517680},{"_id":"public/libs/valine/av-min.js","hash":"541efb9edc1ce425cbe3897cfc25803211fe6a05","modified":1731654517680},{"_id":"public/libs/lightGallery/css/lightgallery.min.css","hash":"1b7227237f9785c66062a4811508916518e4132c","modified":1731654517680},{"_id":"public/libs/lightGallery/js/lightgallery-all.min.js","hash":"9f5ef4bc8a0a3c746ca4f3c3e6d64493b1a977d8","modified":1731654517680},{"_id":"public/libs/share/css/share.min.css","hash":"8a778a86f3ce9a042df6be63a9f1039631e351a5","modified":1731654517680},{"_id":"public/libs/awesome/css/all.css","hash":"1b458bd8b8b64971ef44b5d982e85aed8f610427","modified":1731654517680},{"_id":"public/libs/share/js/social-share.min.js","hash":"a3090a02786dcd4efc6355c1c1dc978add8d6827","modified":1731654517680},{"_id":"public/libs/share/js/jquery.share.min.js","hash":"41367dcb857e02e3c417ebe68a554ce1d4430806","modified":1731654517680},{"_id":"public/medias/banner/0.jpg","hash":"f8d123fa0ad004da3db7eecce37076b0a17b91a2","modified":1731654517680},{"_id":"public/medias/banner/7.jpg","hash":"f8d123fa0ad004da3db7eecce37076b0a17b91a2","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-regular-400.svg","hash":"3d3a49445343d80f3b553e3e3425b9a7bd49acaf","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-solid-900.eot","hash":"cab8e84ae5682d1d556e234df9c790985888def8","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-solid-900.ttf","hash":"9521ed12274c2cbc910cea77657116fcf6545da3","modified":1731654517680},{"_id":"public/images/cross_domain_1.png","hash":"65ed79922846b178cffddc73b8a065a13c2ea02b","modified":1731654517680},{"_id":"public/images/phpstorm_show_history_2.png","hash":"11784732647f192c341cc188bd3eb0949e46774a","modified":1731654517680},{"_id":"public/images/thinkphp_note_1.png","hash":"bbfbb719d6741b6aaeaa2fb0ebabb0a2cfcc1c97","modified":1731654517680},{"_id":"public/images/xdebug_4.png","hash":"91fc5df883091a7ec00aa364937cfd27949d8dc8","modified":1731654517680},{"_id":"public/libs/echarts/echarts.min.js","hash":"9496f386a0da4601cad22c479cc5543913a4d67f","modified":1731654517680},{"_id":"public/medias/banner/3.jpg","hash":"6d14df2fedf5b3f6e6c5016b4a935e06760c04b2","modified":1731654517680},{"_id":"public/medias/toc-banner/aboutme.JPG","hash":"1460148a0fe1600c066fc66ace4a2bf33fdcffeb","modified":1731654517680},{"_id":"public/images/xdebug_2.png","hash":"8f688615377e9de26124314f2f245f2628f51a89","modified":1731654517680},{"_id":"public/images/xdebug_6.png","hash":"7c5e8d82d048c2625cf7ad1ee70d44f4280fdddb","modified":1731654517680},{"_id":"public/medias/comment_bg1.webp","hash":"8fe6376cc493cf6e86cbb5dfedd4180280fab714","modified":1731654517680},{"_id":"public/medias/banner/2.jpg","hash":"d9f19d37e137b33488e419e23200898d831fa68d","modified":1731654517680},{"_id":"public/images/mysql_join_1.png","hash":"4beaeb88d2b6048a84f109ccbf15e4e3bc247960","modified":1731654517680},{"_id":"public/images/php_bat_1.png","hash":"1268d0936f7eb8119c94ae9fa4a080e14ff07bb8","modified":1731654517680},{"_id":"public/images/soft_design_1.png","hash":"58a3ab54538d923dcba7c9c4fd3c98c4bef11be2","modified":1731654517680},{"_id":"public/vue-practice/vue.js","hash":"d0651e3f6523b543ae9d50d8c6e75c263239f851","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-brands-400.svg","hash":"5e2d2a159294576bea69cc3360efb5ffe110ab2d","modified":1731654517680},{"_id":"public/libs/awesome/webfonts/fa-solid-900.svg","hash":"7da88b19e1486f8c968d3cf5ab3f194f01ea17fd","modified":1731654517680},{"_id":"public/gallery/2016.4——牛背山之旅/images/4.jpg","hash":"9494f39b76a29f79ebc12d76137c32c11bd0f662","modified":1731654517680},{"_id":"public/gallery/2016.4——牛背山之旅/images/6.jpg","hash":"ff8199d9b528478f65e51b202c306f31b3523858","modified":1731654517680},{"_id":"public/medias/banner/001.JPG","hash":"89c21e9a22f5771f51c4e2441691f6dd232799b7","modified":1731654517680},{"_id":"public/gallery/2016.4——牛背山之旅/images/2.jpg","hash":"89c21e9a22f5771f51c4e2441691f6dd232799b7","modified":1731654517680},{"_id":"public/gallery/2016.4——牛背山之旅/images/10.jpg","hash":"31f8516faef7d2c59a4a6bc8c9f402a72eadd48d","modified":1731654517680},{"_id":"public/gallery/2016.4——牛背山之旅/images/1.jpg","hash":"599324dbefaa0c727b5e5a3b44c3d9aebe4adb50","modified":1731654517680},{"_id":"public/gallery/2016.4——牛背山之旅/images/9.jpg","hash":"9f640d60245f90e936cc7505588deec000407ae2","modified":1731654517680},{"_id":"public/gallery/2016.4——牛背山之旅/images/3.jpg","hash":"9e2a312ba228c03d72ef7175fe20789b8c829020","modified":1731654517680},{"_id":"public/gallery/2016.4——牛背山之旅/images/8.jpg","hash":"c0a9ebf2d549fa23eb5d787154763e344880ded6","modified":1731654517680},{"_id":"public/gallery/2016.4——牛背山之旅/images/5.jpg","hash":"a4c6c04b45ae3ade46493408368df8b019c75d01","modified":1731654517680},{"_id":"public/medias/avatar.jpg","hash":"d4aff20d6174b745401f1b73871db5797992c66e","modified":1731654517680},{"_id":"public/gallery/2016.4——牛背山之旅/images/7.jpg","hash":"fc2979807fd178c2eb2165d312ee229b6a071227","modified":1731654517680},{"_id":"public/fonts/华文行楷.ttf","hash":"ffa6092cbb7b786bc7d4b508dc75231272ea8d38","modified":1731654517680},{"_id":"public/images/20220824-rain.jpg","hash":"bd74ee461b78293781f08d8923291c479ddd92ac","modified":1731654517680}],"Category":[{"name":"其他","_id":"cm3iee2sz0004oshg773n1pw5"},{"name":"Git","_id":"cm3iee2t4000coshg9lxa83t9"},{"name":"Go","_id":"cm3iee2ta000roshgg74y11vd"},{"name":"Lua","_id":"cm3iee2tf0017oshge4j0586q"},{"name":"Markdown","_id":"cm3iee2tg001foshg37y2efcd"},{"name":"MongoDB","_id":"cm3iee2ti001moshg2mkc1i62"},{"name":"MySQL","_id":"cm3iee2tk001soshg5kh8gxjg"},{"name":"数据库","_id":"cm3iee2u30041oshgawre3rv9"},{"name":"Office","_id":"cm3iee2u5004aoshggmoygh37"},{"name":"Oracle","_id":"cm3iee2u8004ioshg16lecwv7"},{"name":"R语言","_id":"cm3iee2u9004poshg3z8t1b2z"},{"name":"Prolog","_id":"cm3iee2ua004woshg6pehdy44"},{"name":"Redis","_id":"cm3iee2uc0053oshg0lab01nh"},{"name":"产品","_id":"cm3iee2uk005eoshgef4b4sbp"},{"name":"随笔","_id":"cm3iee2un005woshge39s8tyb"},{"name":"测试","_id":"cm3iee2ur006eoshgh24o3gw9"},{"name":"第三方","_id":"cm3iee2us006loshggllv6m0f"},{"name":"算法","_id":"cm3iee2uv006xoshg1d4egdoo"},{"name":"系统设计","_id":"cm3iee2uw0074oshg0drzhhqi"},{"name":"前端","_id":"cm3iee2ux007aoshg2ljj506d"},{"name":"HTML","_id":"cm3iee2v50088oshggz6g3n59"},{"name":"PHP","_id":"cm3iee2vc0093oshgg5bu2274"},{"name":"phpStorm","_id":"cm3iee2w800dfoshg4eqvc8pk"},{"name":"Windows","_id":"cm3iee2wb00dzoshgbz4gch8s"},{"name":"技术管理","_id":"cm3iee2wd00eioshg31pi806t"},{"name":"编程","_id":"cm3iee2we00eroshg7dh3eru2"},{"name":"架构","_id":"cm3iee2wg00f6oshg3lgi0m9k"},{"name":"Docker","_id":"cm3iee2wh00fioshgfq553f5v"},{"name":"设计模式","_id":"cm3iee2wi00fnoshg0lds3h31"},{"name":"运维","_id":"cm3iee2wt00i7oshg1e240f75"},{"name":"Cron","_id":"cm3iee2wu00icoshg98one64t"},{"name":"Linux","_id":"cm3iee2wv00ijoshgfv1t78lc"},{"name":"ntpdate","_id":"cm3iee2ww00iroshg4hg720fr"},{"name":"SystemD","_id":"cm3iee2x200jvoshgbgy0d5es"},{"name":"运维","parent":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2x300k0oshg2w9bdrb8"},{"name":"xargs","_id":"cm3iee2xf00lkoshg77c51kr0"}],"Data":[{"_id":"friends","data":[{"avatar":"https://dyfa.top/medias/avatar.jpg","name":"itsNeko开源博客作者","introduction":"十万伏特皮卡丘","url":"https://dyfa.top/","title":"前去康康开源作者"}]},{"_id":"collection","data":[{"avatar":"https://dummyimage.com/600x600/f30/fff&text=WeChat","name":"微信公众号后台","introduction":"微信公众号（使用中）","url":"https://mp.weixin.qq.com/?token=&lang=zh_CN","title":"前去使用"},{"avatar":"https://dummyimage.com/600x600/f99/000&text=Mdnice","name":"MD编辑转换器","introduction":"md转公众号（使用中）","url":"https://www.mdnice.com/","title":"前去使用"},{"avatar":"https://dummyimage.com/600x600/000/fff&text=Wallhaven","name":"Wallhaven墙纸网站","introduction":"文章封面图（使用中）","url":"https://wallhaven.cc/search?q=id%3A1&categories=110&purity=100&sorting=favorites&order=desc&page=7","title":"前去下载"},{"avatar":"https://dummyimage.com/600x600/ff6/fff&text=去不picbed","name":"去不图床","introduction":"大部分存储（使用中）","url":"https://7bu.top/","title":"前去上传"},{"avatar":"https://dummyimage.com/600x600/f30/fff&text=SM.SM","name":"SM.SM图床","introduction":"小部分存储（使用中）","url":"https://sm.ms/","title":"前去上传"},{"avatar":"https://dummyimage.com/600x600/fff/000&text=bilibili","name":"哔哩哔哩视频下载本地","introduction":"验证码51666（使用中）","url":"https://bilibili.iiilab.com/","title":"前去使用"},{"avatar":"https://dummyimage.com/600x600/ff6/fff&text=图片格式转换","name":"图片格式转换工具","introduction":"webp转jpg等（使用中）","url":"https://www.sojson.com/image/format.html","title":"前去使用"},{"avatar":"https://dummyimage.com/600x600/fff/000&text=图片大小压缩","name":"图片大小无损压缩工具","introduction":"大小无损压缩（使用中）","url":"https://www.bejson.com/ui/compress_img/","title":"前去使用"},{"avatar":"https://uptimerobot.com/assets/img/uptimerobot-logo-dark.svg","name":"友链检测面板","introduction":"友链检测面板（使用中）","url":"https://uptimerobot.com/dashboard.php#mySettings","title":"前去使用"},{"avatar":"https://dummyimage.com/600x600/000/fff&text=LeanCloud","name":" LeanCloud","introduction":"博客评论系统（使用中）","url":"https://www.leancloud.cn/","title":"前去使用"},{"avatar":"https://dummyimage.com/600x600/f20/000&text=ClustrMaps","name":"clustrmaps","introduction":"访客统计网站（使用中）","url":"https://clustrmaps.com/","title":"前去使用"},{"avatar":"https://dummyimage.com/600x600/fff/000&text=luguo pic","name":" 路过图床","introduction":"免费图床（未使用）","url":"https://imgchr.com/itsneko/albums","title":"前去上传"},{"avatar":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTEiIGhlaWdodD0iMzgiIHZpZXdCb3g9IjAgMCAxMTEgMzgiPgogIDxnIGZpbGw9IiNGRkZGRkYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xKSI+CiAgICA8cGF0aCBkPSJNMzAuOCw0LjEgTDMwLjgsNC4xIEwzMC44LDQuMSBMMzAuOCw0LjEgTDMwLjgsNC4xIEMzMC4xLDMuNiAyOS40LDMuMSAyOC42LDIuNyBDMjguMSwyLjQgMjcuNCwyLjUgMjcsMyBMMjIuMyw5LjIgTDIyLDkuNiBDMjEuNSwxMC4zIDIwLjcsMTAuNiAxOS45LDEwLjYgTDE5LDEwLjYgQzE2LjcsMTAuNyAxNC40LDExLjkgMTIuOSwxMy45IEMxMS43LDE1LjUgMTEuMSwxNy40IDExLjIsMTkuMyBDMTEuMiwxOS42IDExLjQsMTkuOSAxMS43LDIwLjEgQzEyLjMsMjAuNCAxMi44LDIxIDEzLDIxLjcgQzEzLjIsMjIuOCAxMi41LDIzLjggMTEuNSwyNC4xIEMxMC4zLDI0LjUgOSwyMy43IDguNywyMi41IEM4LjUsMjEuOCA4LjcsMjEuMiA5LjEsMjAuNyBDOS4zLDIwLjQgOS40LDIwLjEgOS40LDE5LjcgQzkuMiwxNy4zIDkuOCwxNC44IDExLjQsMTIuNyBDMTMuNCwxMC4xIDE2LjQsOC43IDE5LjUsOC43IEMyMC4xLDguNyAyMC42LDguNCAyMSw3LjkgTDI1LjMsMi4yIEMyNS42LDEuOCAyNS40LDEuMSAyNC45LDEgQzE3LjcsLTEgOS43LDEuNCA0LjgsNy43IEMtMS40LDE1LjggMC4xLDI3LjUgOC4yLDMzLjggQzksMzQuNCA5LjcsMzQuOSAxMC42LDM1LjQgQzExLjEsMzUuNyAxMS44LDM1LjYgMTIuMiwzNS4xIEwxNi45LDI4LjkgTDE3LjIsMjguNSBDMTcuNywyNy44IDE4LjUsMjcuNSAxOS4zLDI3LjUgTDIwLjIsMjcuNSBDMjIuNSwyNy40IDI0LjgsMjYuMiAyNi4zLDI0LjIgQzI3LjUsMjIuNiAyOC4xLDIwLjcgMjgsMTguOCBDMjgsMTguNSAyNy44LDE4LjIgMjcuNSwxOCBDMjYuOSwxNy43IDI2LjQsMTcuMSAyNi4yLDE2LjQgQzI2LDE1LjMgMjYuNywxNC4zIDI3LjcsMTQgQzI4LjksMTMuNiAzMC4yLDE0LjQgMzAuNSwxNS42IEMzMC43LDE2LjMgMzAuNSwxNi45IDMwLjEsMTcuNCBDMjkuOSwxNy43IDI5LjgsMTggMjkuOCwxOC40IEMzMCwyMC44IDI5LjQsMjMuMyAyNy44LDI1LjQgQzI1LjgsMjggMjIuOCwyOS40IDE5LjcsMjkuNCBDMTkuMSwyOS40IDE4LjYsMjkuNyAxOC4yLDMwLjIgTDE0LDM1LjYgQzEzLjcsMzYgMTMuOSwzNi43IDE0LjQsMzYuOCBDMjEuNiwzOC45IDI5LjcsMzYuNSAzNC41LDMwLjEgQzQwLjcsMjIgMzksMTAuMyAzMC44LDQuMSBaIi8+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MyA4KSI+CiAgICAgIDxwYXRoIGQ9Ik0xOC42LDIgTDE4LjYsMS42IEMxOC42LDEuMiAxOC4zLDEgMTgsMSBMMy41LDEgQzMuMiwxIDIuOSwxLjMgMi45LDEuNiBMMi45LDIuNSBDMi45LDIuOCAzLjIsMy4xIDMuNSwzLjEgTDE1LjgsMy4xIEMxNi4yLDMuMSAxNi40LDMuNCAxNi40LDMuOCBDMTYuMSw2LjEgMTUsMTAuNCAxMS42LDE0LjUgQzExLjQsMTQuOCAxMC45LDE0LjggMTAuNywxNC41IEM3LjksMTAuOSA3LDcuMiA2LjgsNS44IEM2LjcsNS41IDYuNSw1LjMgNi4yLDUuMyBMNS43LDUuMyBMNS4zLDUuMyBDNSw1LjMgNC43LDUuNiA0LjgsNiBDNS4xLDcuNiA2LjEsMTEuOSA5LjUsMTYgQzkuNywxNi4yIDkuNywxNi42IDkuNSwxNi44IEM1LjUsMjAuNSAxLjgsMjEuMyAwLjUsMjEuNSBDMC4yLDIxLjUgNy4xMDU0MjczNmUtMTUsMjEuOCA3LjEwNTQyNzM2ZS0xNSwyMi4xIEw3LjEwNTQyNzM2ZS0xNSwyMyBDNy4xMDU0MjczNmUtMTUsMjMuMyAwLjMsMjMuNiAwLjYsMjMuNiBDMi4xLDIzLjQgNi4zLDIyLjUgMTAuOCwxOC4zIEMxMSwxOC4xIDExLjQsMTguMSAxMS42LDE4LjMgQzEzLjgsMjAuMyAxNi42LDIyLjMgMjAuNCwyMy41IEMyMC43LDIzLjYgMjEsMjMuNCAyMS4xLDIzLjEgTDIxLjQsMjIuMyBDMjEuNSwyMiAyMS4zLDIxLjcgMjEsMjEuNiBDMTcuNSwyMC41IDE1LDE4LjcgMTMsMTYuOSBDMTIuOCwxNi43IDEyLjgsMTYuMyAxMywxNi4xIEMxOC41LDkuNCAxOC42LDIuMyAxOC42LDIgWiIvPgogICAgICA8cGF0aCBkPSJNMjguNiwwLjEgTDI3LjcsMC4xIEMyNy40LDAuMSAyNy4xLDAuNCAyNy4xLDAuNyBMMjcuMSwzLjggQzI3LjEsNC4xIDI2LjgsNC40IDI2LjUsNC40IEwyNC40LDQuNCBDMjQuMSw0LjQgMjMuOCw0LjcgMjMuOCw1IEwyMy44LDUuOSBDMjMuOCw2LjIgMjQuMSw2LjUgMjQuNCw2LjUgTDI2LjUsNi41IEMyNi44LDYuNSAyNy4xLDYuOCAyNy4xLDcuMSBMMjcuMSwxMS42IEMyNy4xLDExLjkgMjYuOCwxMi4yIDI2LjUsMTIuMiBMMjQuNCwxMi4yIEMyNC4xLDEyLjIgMjMuOCwxMi41IDIzLjgsMTIuOCBMMjMuOCwxMy43IEMyMy44LDE0IDI0LjEsMTQuMyAyNC40LDE0LjMgTDI2LjUsMTQuMyBDMjYuOCwxNC4zIDI3LjEsMTQuNiAyNy4xLDE0LjkgTDI3LjEsMTkuMiBDMjcuMSwyMC4xIDI2LjcsMjEuNiAyNC40LDIxLjggQzI0LjEsMjEuOCAyMy45LDIyLjEgMjMuOSwyMi40IEwyMy45LDIzIEMyMy45LDIzLjMgMjQuMiwyMy42IDI0LjUsMjMuNiBDMjYuOCwyMy40IDI5LjIsMjIuMSAyOS4yLDE4LjkgTDI5LjIsMTQuNiBDMjkuMiwxNC4zIDI5LjUsMTQgMjkuOCwxNCBMMzEuNywxNCBDMzIsMTQgMzIuMywxMy43IDMyLjMsMTMuNCBMMzIuMywxMi41IEMzMi4zLDEyLjIgMzIsMTEuOSAzMS43LDExLjkgTDI5LjgsMTEuOSBDMjkuNSwxMS45IDI5LjIsMTEuNiAyOS4yLDExLjMgTDI5LjIsNi44IEMyOS4yLDYuNSAyOS41LDYuMiAyOS44LDYuMiBMMzEuNyw2LjIgQzMyLDYuMiAzMi4zLDUuOSAzMi4zLDUuNiBMMzIuMyw0LjcgQzMyLjMsNC40IDMyLDQuMSAzMS43LDQuMSBMMjkuOCw0LjEgQzI5LjUsNC4xIDI5LjIsMy44IDI5LjIsMy41IEwyOS4yLDAuNiBDMjkuMiwwLjMgMjksMC4xIDI4LjYsMC4xIFoiLz4KICAgICAgPHBhdGggZD0iTTMzLjIsMjIuOCBDMzMuMiwyMy4xIDMzLjUsMjMuNCAzMy44LDIzLjQgTDQwLjMsMjMuNCBDNDMuMiwyMy40IDQ1LjUsMjEuMiA0NS41LDE4LjQgTDQ1LjUsNC43IEM0NS41LDQuNCA0NS4yLDQuMSA0NC45LDQuMSBMMzMuOCw0LjEgQzMzLjUsNC4xIDMzLjIsNC40IDMzLjIsNC43IEwzMy4yLDIyLjggWiBNNDAuNCwyMS40IEwzNS45LDIxLjQgQzM1LjYsMjEuNCAzNS4zLDIxLjEgMzUuMywyMC44IEwzNS4zLDE0LjYgQzM1LjMsMTQuMyAzNS42LDE0IDM1LjksMTQgTDQzLDE0IEM0My4zLDE0IDQzLjYsMTQuMyA0My42LDE0LjYgTDQzLjYsMTguNCBDNDMuNiwyMC4xIDQyLjEsMjEuNCA0MC40LDIxLjQgWiBNNDMuNiw2LjcgTDQzLjYsMTEuNCBDNDMuNiwxMS43IDQzLjMsMTIgNDMsMTIgTDM1LjksMTIgQzM1LjYsMTIgMzUuMywxMS43IDM1LjMsMTEuNCBMMzUuMyw2LjcgQzM1LjMsNi40IDM1LjYsNi4xIDM1LjksNi4xIEw0Myw2LjEgQzQzLjMsNi4yIDQzLjYsNi40IDQzLjYsNi43IFoiLz4KICAgICAgPHBhdGggZD0iTTQyLjEsMCBMMzYuMywwIEMzNiwwIDM1LjcsMC4zIDM1LjcsMC42IEwzNS43LDEuNSBDMzUuNywxLjggMzYsMi4xIDM2LjMsMi4xIEw0Mi4xLDIuMSBDNDIuNCwyLjEgNDIuNywxLjggNDIuNywxLjUgTDQyLjcsMC42IEM0Mi43LDAuMyA0Mi41LDAgNDIuMSwwIFoiLz4KICAgICAgPHBhdGggZD0iTTY0LjIsMC45IEw1Mi4yLDAuOSBDNTEuOSwwLjkgNTEuNiwxLjIgNTEuNiwxLjUgTDUxLjYsMi40IEM1MS42LDIuNyA1MS45LDMgNTIuMiwzIEw2NC4yLDMgQzY0LjUsMyA2NC44LDIuNyA2NC44LDIuNCBMNjQuOCwxLjUgQzY0LjgsMS4yIDY0LjUsMC45IDY0LjIsMC45IFoiLz4KICAgICAgPHBhdGggZD0iTTU5LjEsMTEuMiBMNjcuNSwxMS4yIEM2Ny44LDExLjIgNjguMSwxMC45IDY4LjEsMTAuNiBMNjguMSw5LjcgQzY4LjEsOS40IDY3LjgsOS4xIDY3LjUsOS4xIEw0OC45LDkuMSBDNDguNiw5LjEgNDguMyw5LjQgNDguMyw5LjcgTDQ4LjMsMTAuNiBDNDguMywxMC45IDQ4LjYsMTEuMiA0OC45LDExLjIgTDU0LjYsMTEuMiBDNTUuMSwxMS4yIDU1LjMsMTEuNyA1NS4xLDEyLjEgTDUxLjMsMTkgQzUxLjIsMTkuMiA1MS4xLDE5LjMgNTEuMSwxOS41IEM1MC44LDIwLjQgNTAuOSwyMS40IDUxLjUsMjIuMiBDNTIuMSwyMyA1My4xLDIzLjYgNTQuMiwyMy42IEw2NC42LDIzLjYgQzY1LjEsMjMuNiA2NS41LDIzLjQgNjUuNywyMyBDNjUuOSwyMi42IDY2LDIyLjEgNjUuOCwyMS43IEw2My40LDE3IEM2My4zLDE2LjcgNjIuOSwxNi42IDYyLjYsMTYuOCBMNjEuOCwxNy4yIEM2MS41LDE3LjMgNjEuNCwxNy43IDYxLjYsMTggTDYzLDIwLjggQzYzLjIsMjEuMiA2Mi45LDIxLjYgNjIuNSwyMS42IEw1NC4yLDIxLjYgQzUzLjgsMjEuNiA1My40LDIxLjQgNTMuMiwyMS4xIEM1My4xLDIxIDUyLjksMjAuNyA1MywyMC4zIEM1MywyMC4yIDUzLDIwLjIgNTMuMSwyMC4xIEw1Ny43LDEyIEM1OCwxMS41IDU4LjUsMTEuMiA1OS4xLDExLjIgWiIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg==","name":"又拍云","introduction":"CDN存储(未使用)","url":"https://www.upyun.com/","title":"前去使用"},{"avatar":"https://img.alicdn.com/tfs/TB1WESIN1L2gK0jSZFmXXc7iXXa-192-77.png","name":"rap2接口管理平台","introduction":"接口文档(未使用)","url":"http://rap2.taobao.org/","title":"前去使用"},{"avatar":"https://www.showapi.com/images/logo-login.png","name":"易源API数据接口平台","introduction":"API接口服务(未使用)","url":"https://www.showapi.com/","title":"前去参观"}]},{"_id":"gallery","data":[{"name":"2016.4——牛背山之旅","cover":"2016.4——牛背山之旅/images/1.JPG","date":"2022-08-18 18:33:57","description":"2016.4——牛背山之旅","url_name":"2016.4——牛背山之旅","album":[{"img_url":"images/1.JPG","title":"2016.4——牛背山之旅","describe":"my-journey-niuBei"},{"img_url":"images/2.JPG","title":"2016.4——牛背山之旅","describe":"my-journey-niuBei"},{"img_url":"images/3.JPG","title":"2016.4——牛背山之旅","describe":"my-journey-niuBei"},{"img_url":"images/4.JPG","title":"2016.4——牛背山之旅","describe":"my-journey-niuBei"},{"img_url":"images/5.JPG","title":"2016.4——牛背山之旅","describe":"my-journey-niuBei"},{"img_url":"images/6.JPG","title":"2016.4——牛背山之旅","describe":"my-journey-niuBei"},{"img_url":"images/7.JPG","title":"2016.4——牛背山之旅","describe":"my-journey-niuBei"},{"img_url":"images/8.JPG","title":"2016.4——牛背山之旅","describe":"my-journey-niuBei"},{"img_url":"images/9.JPG","title":"2016.4——牛背山之旅","describe":"my-journey-niuBei"},{"img_url":"images/10.JPG","title":"2016.4——牛背山之旅","describe":"my-journey-niuBei"}]}]}],"Page":[{"title":"404","date":"2020-08-18T03:41:10.000Z","type":"404","layout":"404","description":"Oops～，我崩溃了！找不到你想要的页面了","_content":"","source":"404.md","raw":"---\ntitle: 404\ndate: 2020-08-18 11:41:10\ntype: \"404\"\nlayout: \"404\"\ndescription: \"Oops～，我崩溃了！找不到你想要的页面了\"\n---","updated":"2024-05-21T03:19:18.083Z","path":"404.html","comments":1,"_id":"cm3iee2sr0000oshg6w1xbguy","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"书单","date":"2020-11-03T09:01:05.000Z","type":"books","layout":"books","_content":"","source":"books/index.md","raw":"---\ntitle: 书单\ndate: 2020-11-03 17:01:05\ntype: \"books\"\nlayout: \"books\"\n---\n","updated":"2024-05-21T03:19:18.138Z","path":"books/index.html","comments":1,"_id":"cm3iee2sx0002oshgaehs6dan","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"categories","date":"2020-08-17T10:23:38.000Z","type":"categories","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2020-08-17 18:23:38\ntype: \"categories\"\nlayout: \"categories\"\n---","updated":"2024-05-21T03:19:18.139Z","path":"categories/index.html","comments":1,"_id":"cm3iee2t10006oshg7smyawq8","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"关于","date":"2020-08-17T09:08:05.000Z","type":"about","layout":"about","_content":"","source":"about/index.md","raw":"---\ntitle: 关于\ndate: 2020-08-17 17:08:05\ntype: \"about\"\nlayout: \"about\"\n---\n","updated":"2024-05-21T03:19:18.138Z","path":"about/index.html","comments":1,"_id":"cm3iee2t20008oshgbf6jhlfw","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"_content":"!function(n){\"use strict\";function t(n,t){var r=(65535&n)+(65535&t),e=(n>>16)+(t>>16)+(r>>16);return e<<16|65535&r}function r(n,t){return n<<t|n>>>32-t}function e(n,e,o,u,c,f){return t(r(t(t(e,n),t(u,f)),c),o)}function o(n,t,r,o,u,c,f){return e(t&r|~t&o,n,t,u,c,f)}function u(n,t,r,o,u,c,f){return e(t&o|r&~o,n,t,u,c,f)}function c(n,t,r,o,u,c,f){return e(t^r^o,n,t,u,c,f)}function f(n,t,r,o,u,c,f){return e(r^(t|~o),n,t,u,c,f)}function i(n,r){n[r>>5]|=128<<r%32,n[(r+64>>>9<<4)+14]=r;var e,i,a,h,d,l=1732584193,g=-271733879,v=-1732584194,m=271733878;for(e=0;e<n.length;e+=16)i=l,a=g,h=v,d=m,l=o(l,g,v,m,n[e],7,-680876936),m=o(m,l,g,v,n[e+1],12,-389564586),v=o(v,m,l,g,n[e+2],17,606105819),g=o(g,v,m,l,n[e+3],22,-1044525330),l=o(l,g,v,m,n[e+4],7,-176418897),m=o(m,l,g,v,n[e+5],12,1200080426),v=o(v,m,l,g,n[e+6],17,-1473231341),g=o(g,v,m,l,n[e+7],22,-45705983),l=o(l,g,v,m,n[e+8],7,1770035416),m=o(m,l,g,v,n[e+9],12,-1958414417),v=o(v,m,l,g,n[e+10],17,-42063),g=o(g,v,m,l,n[e+11],22,-1990404162),l=o(l,g,v,m,n[e+12],7,1804603682),m=o(m,l,g,v,n[e+13],12,-40341101),v=o(v,m,l,g,n[e+14],17,-1502002290),g=o(g,v,m,l,n[e+15],22,1236535329),l=u(l,g,v,m,n[e+1],5,-165796510),m=u(m,l,g,v,n[e+6],9,-1069501632),v=u(v,m,l,g,n[e+11],14,643717713),g=u(g,v,m,l,n[e],20,-373897302),l=u(l,g,v,m,n[e+5],5,-701558691),m=u(m,l,g,v,n[e+10],9,38016083),v=u(v,m,l,g,n[e+15],14,-660478335),g=u(g,v,m,l,n[e+4],20,-405537848),l=u(l,g,v,m,n[e+9],5,568446438),m=u(m,l,g,v,n[e+14],9,-1019803690),v=u(v,m,l,g,n[e+3],14,-187363961),g=u(g,v,m,l,n[e+8],20,1163531501),l=u(l,g,v,m,n[e+13],5,-1444681467),m=u(m,l,g,v,n[e+2],9,-51403784),v=u(v,m,l,g,n[e+7],14,1735328473),g=u(g,v,m,l,n[e+12],20,-1926607734),l=c(l,g,v,m,n[e+5],4,-378558),m=c(m,l,g,v,n[e+8],11,-2022574463),v=c(v,m,l,g,n[e+11],16,1839030562),g=c(g,v,m,l,n[e+14],23,-35309556),l=c(l,g,v,m,n[e+1],4,-1530992060),m=c(m,l,g,v,n[e+4],11,1272893353),v=c(v,m,l,g,n[e+7],16,-155497632),g=c(g,v,m,l,n[e+10],23,-1094730640),l=c(l,g,v,m,n[e+13],4,681279174),m=c(m,l,g,v,n[e],11,-358537222),v=c(v,m,l,g,n[e+3],16,-722521979),g=c(g,v,m,l,n[e+6],23,76029189),l=c(l,g,v,m,n[e+9],4,-640364487),m=c(m,l,g,v,n[e+12],11,-421815835),v=c(v,m,l,g,n[e+15],16,530742520),g=c(g,v,m,l,n[e+2],23,-995338651),l=f(l,g,v,m,n[e],6,-198630844),m=f(m,l,g,v,n[e+7],10,1126891415),v=f(v,m,l,g,n[e+14],15,-1416354905),g=f(g,v,m,l,n[e+5],21,-57434055),l=f(l,g,v,m,n[e+12],6,1700485571),m=f(m,l,g,v,n[e+3],10,-1894986606),v=f(v,m,l,g,n[e+10],15,-1051523),g=f(g,v,m,l,n[e+1],21,-2054922799),l=f(l,g,v,m,n[e+8],6,1873313359),m=f(m,l,g,v,n[e+15],10,-30611744),v=f(v,m,l,g,n[e+6],15,-1560198380),g=f(g,v,m,l,n[e+13],21,1309151649),l=f(l,g,v,m,n[e+4],6,-145523070),m=f(m,l,g,v,n[e+11],10,-1120210379),v=f(v,m,l,g,n[e+2],15,718787259),g=f(g,v,m,l,n[e+9],21,-343485551),l=t(l,i),g=t(g,a),v=t(v,h),m=t(m,d);return[l,g,v,m]}function a(n){var t,r=\"\";for(t=0;t<32*n.length;t+=8)r+=String.fromCharCode(n[t>>5]>>>t%32&255);return r}function h(n){var t,r=[];for(r[(n.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;for(t=0;t<8*n.length;t+=8)r[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return r}function d(n){return a(i(h(n),8*n.length))}function l(n,t){var r,e,o=h(n),u=[],c=[];for(u[15]=c[15]=void 0,o.length>16&&(o=i(o,8*n.length)),r=0;16>r;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(h(t)),512+8*t.length),a(i(c.concat(e),640))}function g(n){var t,r,e=\"0123456789abcdef\",o=\"\";for(r=0;r<n.length;r+=1)t=n.charCodeAt(r),o+=e.charAt(t>>>4&15)+e.charAt(15&t);return o}function v(n){return unescape(encodeURIComponent(n))}function m(n){return d(v(n))}function p(n){return g(m(n))}function s(n,t){return l(v(n),v(t))}function C(n,t){return g(s(n,t))}function A(n,t,r){return t?r?s(t,n):C(t,n):r?m(n):p(n)}\"function\"==typeof define&&define.amd?define(function(){return A}):\"object\"==typeof module&&module.exports?module.exports=A:n.md5=A}(this);\n//# sourceMappingURL=md5.min.js.map","source":"codes/md5.min.js","raw":"!function(n){\"use strict\";function t(n,t){var r=(65535&n)+(65535&t),e=(n>>16)+(t>>16)+(r>>16);return e<<16|65535&r}function r(n,t){return n<<t|n>>>32-t}function e(n,e,o,u,c,f){return t(r(t(t(e,n),t(u,f)),c),o)}function o(n,t,r,o,u,c,f){return e(t&r|~t&o,n,t,u,c,f)}function u(n,t,r,o,u,c,f){return e(t&o|r&~o,n,t,u,c,f)}function c(n,t,r,o,u,c,f){return e(t^r^o,n,t,u,c,f)}function f(n,t,r,o,u,c,f){return e(r^(t|~o),n,t,u,c,f)}function i(n,r){n[r>>5]|=128<<r%32,n[(r+64>>>9<<4)+14]=r;var e,i,a,h,d,l=1732584193,g=-271733879,v=-1732584194,m=271733878;for(e=0;e<n.length;e+=16)i=l,a=g,h=v,d=m,l=o(l,g,v,m,n[e],7,-680876936),m=o(m,l,g,v,n[e+1],12,-389564586),v=o(v,m,l,g,n[e+2],17,606105819),g=o(g,v,m,l,n[e+3],22,-1044525330),l=o(l,g,v,m,n[e+4],7,-176418897),m=o(m,l,g,v,n[e+5],12,1200080426),v=o(v,m,l,g,n[e+6],17,-1473231341),g=o(g,v,m,l,n[e+7],22,-45705983),l=o(l,g,v,m,n[e+8],7,1770035416),m=o(m,l,g,v,n[e+9],12,-1958414417),v=o(v,m,l,g,n[e+10],17,-42063),g=o(g,v,m,l,n[e+11],22,-1990404162),l=o(l,g,v,m,n[e+12],7,1804603682),m=o(m,l,g,v,n[e+13],12,-40341101),v=o(v,m,l,g,n[e+14],17,-1502002290),g=o(g,v,m,l,n[e+15],22,1236535329),l=u(l,g,v,m,n[e+1],5,-165796510),m=u(m,l,g,v,n[e+6],9,-1069501632),v=u(v,m,l,g,n[e+11],14,643717713),g=u(g,v,m,l,n[e],20,-373897302),l=u(l,g,v,m,n[e+5],5,-701558691),m=u(m,l,g,v,n[e+10],9,38016083),v=u(v,m,l,g,n[e+15],14,-660478335),g=u(g,v,m,l,n[e+4],20,-405537848),l=u(l,g,v,m,n[e+9],5,568446438),m=u(m,l,g,v,n[e+14],9,-1019803690),v=u(v,m,l,g,n[e+3],14,-187363961),g=u(g,v,m,l,n[e+8],20,1163531501),l=u(l,g,v,m,n[e+13],5,-1444681467),m=u(m,l,g,v,n[e+2],9,-51403784),v=u(v,m,l,g,n[e+7],14,1735328473),g=u(g,v,m,l,n[e+12],20,-1926607734),l=c(l,g,v,m,n[e+5],4,-378558),m=c(m,l,g,v,n[e+8],11,-2022574463),v=c(v,m,l,g,n[e+11],16,1839030562),g=c(g,v,m,l,n[e+14],23,-35309556),l=c(l,g,v,m,n[e+1],4,-1530992060),m=c(m,l,g,v,n[e+4],11,1272893353),v=c(v,m,l,g,n[e+7],16,-155497632),g=c(g,v,m,l,n[e+10],23,-1094730640),l=c(l,g,v,m,n[e+13],4,681279174),m=c(m,l,g,v,n[e],11,-358537222),v=c(v,m,l,g,n[e+3],16,-722521979),g=c(g,v,m,l,n[e+6],23,76029189),l=c(l,g,v,m,n[e+9],4,-640364487),m=c(m,l,g,v,n[e+12],11,-421815835),v=c(v,m,l,g,n[e+15],16,530742520),g=c(g,v,m,l,n[e+2],23,-995338651),l=f(l,g,v,m,n[e],6,-198630844),m=f(m,l,g,v,n[e+7],10,1126891415),v=f(v,m,l,g,n[e+14],15,-1416354905),g=f(g,v,m,l,n[e+5],21,-57434055),l=f(l,g,v,m,n[e+12],6,1700485571),m=f(m,l,g,v,n[e+3],10,-1894986606),v=f(v,m,l,g,n[e+10],15,-1051523),g=f(g,v,m,l,n[e+1],21,-2054922799),l=f(l,g,v,m,n[e+8],6,1873313359),m=f(m,l,g,v,n[e+15],10,-30611744),v=f(v,m,l,g,n[e+6],15,-1560198380),g=f(g,v,m,l,n[e+13],21,1309151649),l=f(l,g,v,m,n[e+4],6,-145523070),m=f(m,l,g,v,n[e+11],10,-1120210379),v=f(v,m,l,g,n[e+2],15,718787259),g=f(g,v,m,l,n[e+9],21,-343485551),l=t(l,i),g=t(g,a),v=t(v,h),m=t(m,d);return[l,g,v,m]}function a(n){var t,r=\"\";for(t=0;t<32*n.length;t+=8)r+=String.fromCharCode(n[t>>5]>>>t%32&255);return r}function h(n){var t,r=[];for(r[(n.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;for(t=0;t<8*n.length;t+=8)r[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return r}function d(n){return a(i(h(n),8*n.length))}function l(n,t){var r,e,o=h(n),u=[],c=[];for(u[15]=c[15]=void 0,o.length>16&&(o=i(o,8*n.length)),r=0;16>r;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(h(t)),512+8*t.length),a(i(c.concat(e),640))}function g(n){var t,r,e=\"0123456789abcdef\",o=\"\";for(r=0;r<n.length;r+=1)t=n.charCodeAt(r),o+=e.charAt(t>>>4&15)+e.charAt(15&t);return o}function v(n){return unescape(encodeURIComponent(n))}function m(n){return d(v(n))}function p(n){return g(m(n))}function s(n,t){return l(v(n),v(t))}function C(n,t){return g(s(n,t))}function A(n,t,r){return t?r?s(t,n):C(t,n):r?m(n):p(n)}\"function\"==typeof define&&define.amd?define(function(){return A}):\"object\"==typeof module&&module.exports?module.exports=A:n.md5=A}(this);\n//# sourceMappingURL=md5.min.js.map","date":"2024-05-21T03:19:18.164Z","updated":"2024-05-21T03:19:18.164Z","path":"codes/md5.min.js","layout":"false","title":"","comments":1,"_id":"cm3iee2t3000aoshg8fu589s5","content":"!function(n){\"use strict\";function t(n,t){var r=(65535&n)+(65535&t),e=(n>>16)+(t>>16)+(r>>16);return e<<16|65535&r}function r(n,t){return n<<t|n>>>32-t}function e(n,e,o,u,c,f){return t(r(t(t(e,n),t(u,f)),c),o)}function o(n,t,r,o,u,c,f){return e(t&r|~t&o,n,t,u,c,f)}function u(n,t,r,o,u,c,f){return e(t&o|r&~o,n,t,u,c,f)}function c(n,t,r,o,u,c,f){return e(t^r^o,n,t,u,c,f)}function f(n,t,r,o,u,c,f){return e(r^(t|~o),n,t,u,c,f)}function i(n,r){n[r>>5]|=128<<r%32,n[(r+64>>>9<<4)+14]=r;var e,i,a,h,d,l=1732584193,g=-271733879,v=-1732584194,m=271733878;for(e=0;e<n.length;e+=16)i=l,a=g,h=v,d=m,l=o(l,g,v,m,n[e],7,-680876936),m=o(m,l,g,v,n[e+1],12,-389564586),v=o(v,m,l,g,n[e+2],17,606105819),g=o(g,v,m,l,n[e+3],22,-1044525330),l=o(l,g,v,m,n[e+4],7,-176418897),m=o(m,l,g,v,n[e+5],12,1200080426),v=o(v,m,l,g,n[e+6],17,-1473231341),g=o(g,v,m,l,n[e+7],22,-45705983),l=o(l,g,v,m,n[e+8],7,1770035416),m=o(m,l,g,v,n[e+9],12,-1958414417),v=o(v,m,l,g,n[e+10],17,-42063),g=o(g,v,m,l,n[e+11],22,-1990404162),l=o(l,g,v,m,n[e+12],7,1804603682),m=o(m,l,g,v,n[e+13],12,-40341101),v=o(v,m,l,g,n[e+14],17,-1502002290),g=o(g,v,m,l,n[e+15],22,1236535329),l=u(l,g,v,m,n[e+1],5,-165796510),m=u(m,l,g,v,n[e+6],9,-1069501632),v=u(v,m,l,g,n[e+11],14,643717713),g=u(g,v,m,l,n[e],20,-373897302),l=u(l,g,v,m,n[e+5],5,-701558691),m=u(m,l,g,v,n[e+10],9,38016083),v=u(v,m,l,g,n[e+15],14,-660478335),g=u(g,v,m,l,n[e+4],20,-405537848),l=u(l,g,v,m,n[e+9],5,568446438),m=u(m,l,g,v,n[e+14],9,-1019803690),v=u(v,m,l,g,n[e+3],14,-187363961),g=u(g,v,m,l,n[e+8],20,1163531501),l=u(l,g,v,m,n[e+13],5,-1444681467),m=u(m,l,g,v,n[e+2],9,-51403784),v=u(v,m,l,g,n[e+7],14,1735328473),g=u(g,v,m,l,n[e+12],20,-1926607734),l=c(l,g,v,m,n[e+5],4,-378558),m=c(m,l,g,v,n[e+8],11,-2022574463),v=c(v,m,l,g,n[e+11],16,1839030562),g=c(g,v,m,l,n[e+14],23,-35309556),l=c(l,g,v,m,n[e+1],4,-1530992060),m=c(m,l,g,v,n[e+4],11,1272893353),v=c(v,m,l,g,n[e+7],16,-155497632),g=c(g,v,m,l,n[e+10],23,-1094730640),l=c(l,g,v,m,n[e+13],4,681279174),m=c(m,l,g,v,n[e],11,-358537222),v=c(v,m,l,g,n[e+3],16,-722521979),g=c(g,v,m,l,n[e+6],23,76029189),l=c(l,g,v,m,n[e+9],4,-640364487),m=c(m,l,g,v,n[e+12],11,-421815835),v=c(v,m,l,g,n[e+15],16,530742520),g=c(g,v,m,l,n[e+2],23,-995338651),l=f(l,g,v,m,n[e],6,-198630844),m=f(m,l,g,v,n[e+7],10,1126891415),v=f(v,m,l,g,n[e+14],15,-1416354905),g=f(g,v,m,l,n[e+5],21,-57434055),l=f(l,g,v,m,n[e+12],6,1700485571),m=f(m,l,g,v,n[e+3],10,-1894986606),v=f(v,m,l,g,n[e+10],15,-1051523),g=f(g,v,m,l,n[e+1],21,-2054922799),l=f(l,g,v,m,n[e+8],6,1873313359),m=f(m,l,g,v,n[e+15],10,-30611744),v=f(v,m,l,g,n[e+6],15,-1560198380),g=f(g,v,m,l,n[e+13],21,1309151649),l=f(l,g,v,m,n[e+4],6,-145523070),m=f(m,l,g,v,n[e+11],10,-1120210379),v=f(v,m,l,g,n[e+2],15,718787259),g=f(g,v,m,l,n[e+9],21,-343485551),l=t(l,i),g=t(g,a),v=t(v,h),m=t(m,d);return[l,g,v,m]}function a(n){var t,r=\"\";for(t=0;t<32*n.length;t+=8)r+=String.fromCharCode(n[t>>5]>>>t%32&255);return r}function h(n){var t,r=[];for(r[(n.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;for(t=0;t<8*n.length;t+=8)r[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return r}function d(n){return a(i(h(n),8*n.length))}function l(n,t){var r,e,o=h(n),u=[],c=[];for(u[15]=c[15]=void 0,o.length>16&&(o=i(o,8*n.length)),r=0;16>r;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(h(t)),512+8*t.length),a(i(c.concat(e),640))}function g(n){var t,r,e=\"0123456789abcdef\",o=\"\";for(r=0;r<n.length;r+=1)t=n.charCodeAt(r),o+=e.charAt(t>>>4&15)+e.charAt(15&t);return o}function v(n){return unescape(encodeURIComponent(n))}function m(n){return d(v(n))}function p(n){return g(m(n))}function s(n,t){return l(v(n),v(t))}function C(n,t){return g(s(n,t))}function A(n,t,r){return t?r?s(t,n):C(t,n):r?m(n):p(n)}\"function\"==typeof define&&define.amd?define(function(){return A}):\"object\"==typeof module&&module.exports?module.exports=A:n.md5=A}(this);\n//# sourceMappingURL=md5.min.js.map"},{"title":"collection","date":"2020-08-17T09:09:06.000Z","type":"collection","layout":"collection","_content":"","source":"collection/index.md","raw":"---\ntitle: collection\ndate: 2020-08-17 17:09:06\ntype: \"collection\"\nlayout: \"collection\"\n---\n","updated":"2024-05-21T03:19:18.164Z","path":"collection/index.html","comments":1,"_id":"cm3iee2t5000foshg86zq8fl4","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"留言板","date":"2020-09-14T05:09:06.000Z","type":"contact","layout":"contact","_content":"","source":"contact/index.md","raw":"---\ntitle: 留言板\ndate: 2020-09-14 13:09:06\ntype: \"contact\"\nlayout: \"contact\"\n---\n","updated":"2024-05-21T03:19:18.164Z","path":"contact/index.html","comments":1,"_id":"cm3iee2t6000hoshg9dfr5480","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"赞赏","date":"2020-09-14T05:09:06.000Z","type":"donate","layout":"donate","_content":"","source":"donate/index.md","raw":"---\ntitle: 赞赏\ndate: 2020-09-14 13:09:06\ntype: \"donate\"\nlayout: \"donate\"\n---\n","updated":"2024-05-21T03:19:18.164Z","path":"donate/index.html","comments":1,"_id":"cm3iee2t8000moshggs78en8h","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"相册","date":"2020-10-03T09:01:05.000Z","type":"gallery","layout":"gallery","_content":"","source":"gallery/index.md","raw":"---\ntitle: 相册\ndate: 2020-10-03 17:01:05\ntype: \"gallery\"\nlayout: \"gallery\"\n---\n","updated":"2024-05-21T03:19:18.293Z","path":"gallery/index.html","comments":1,"_id":"cm3iee2t9000poshgbwgpa2ke","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"音乐","date":"2020-10-09T09:08:05.000Z","type":"musics","layout":"musics","_content":"","source":"musics/index.md","raw":"---\ntitle: 音乐\ndate: 2020-10-09 17:08:05\ntype: \"musics\"\nlayout: \"musics\"\n---\n","updated":"2024-05-21T03:19:18.371Z","path":"musics/index.html","comments":1,"_id":"cm3iee2tb000uoshg6encbges","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"tags","date":"2020-08-17T10:23:38.000Z","type":"tags","layout":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2020-08-17 18:23:38\ntype: \"tags\"\nlayout: \"tags\"\n---","updated":"2024-05-21T03:19:18.371Z","path":"tags/index.html","comments":1,"_id":"cm3iee2tc000xoshgchlu5f9q","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"时间轮","date":"2020-10-14T09:01:05.000Z","type":"ticktack","layout":"ticktack","_content":"","source":"ticktack/index.md","raw":"---\ntitle: 时间轮\ndate: 2020-10-14 17:01:05\ntype: \"ticktack\"\nlayout: \"ticktack\"\n---\n","updated":"2024-05-21T03:19:18.371Z","path":"ticktack/index.html","comments":1,"_id":"cm3iee2td0012oshg0s8ney5b","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"vlog","date":"2020-10-10T09:08:05.000Z","type":"videos","layout":"videos","_content":"","source":"videos/index.md","raw":"---\ntitle: vlog\ndate: 2020-10-10 17:08:05\ntype: \"videos\"\nlayout: \"videos\"\n---\n","updated":"2024-05-21T03:19:18.372Z","path":"videos/index.html","comments":1,"_id":"cm3iee2te0015oshgdnambw1r","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""},{"title":"2016.4——牛背山之旅","date":"2022-08-05T15:00:17.000Z","type":"galleries","layout":"galleries","password":null,"_content":"","source":"gallery/2016.4——牛背山之旅/index.md","raw":"---\ntitle: 2016.4——牛背山之旅\ndate: 2022-08-05 23:00:17\ntype: \"galleries\"\nlayout: \"galleries\"\npassword: \n---\n","updated":"2024-05-21T03:19:18.293Z","path":"gallery/2016.4——牛背山之旅/index.html","comments":1,"_id":"cm3iee2tf0019oshg62ro8ahj","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script>","excerpt":"","more":""}],"Post":[{"title":"GitBook使用笔记","abbrlink":"gitbook-note","date":"2018-06-09T07:12:00.000Z","updated":"2018-06-09T07:20:00.000Z","_content":"<div class=\"note info\">使用GitBook来写书还是比较方便的，可以部署在github上的，总的来说，不太复杂。现记录一些常用的操作，方便大家参考。</div>\n\n\n##### 常用命令\n1. 编译文件生成网页\t\t` gitbook build `\n2. 启动服务\t\t` gitbook serve`\n3. 安装可以参考这个网页 [gitbook安装](https://www.jianshu.com/p/421cc442f06c)","source":"_posts/GitBook/GitBook使用笔记.md","raw":"---\ntitle: GitBook使用笔记\ntags: [GitBook]\ncategories: 其他\nabbrlink: 'gitbook-note'\ndate: 2018-06-09 15:12:00\nupdated: 2018-06-09 15:20:00\n---\n<div class=\"note info\">使用GitBook来写书还是比较方便的，可以部署在github上的，总的来说，不太复杂。现记录一些常用的操作，方便大家参考。</div>\n\n\n##### 常用命令\n1. 编译文件生成网页\t\t` gitbook build `\n2. 启动服务\t\t` gitbook serve`\n3. 安装可以参考这个网页 [gitbook安装](https://www.jianshu.com/p/421cc442f06c)","slug":"GitBook/GitBook使用笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2su0001oshg3mbgg7ue","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">使用GitBook来写书还是比较方便的，可以部署在github上的，总的来说，不太复杂。现记录一些常用的操作，方便大家参考。</div>\n\n\n<h5 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h5><ol>\n<li>编译文件生成网页        <code>gitbook build</code></li>\n<li>启动服务        <code>gitbook serve</code></li>\n<li>安装可以参考这个网页 <a href=\"https://www.jianshu.com/p/421cc442f06c\">gitbook安装</a></li>\n</ol>\n","excerpt":"","more":"<div class=\"note info\">使用GitBook来写书还是比较方便的，可以部署在github上的，总的来说，不太复杂。现记录一些常用的操作，方便大家参考。</div>\n\n\n<h5 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h5><ol>\n<li>编译文件生成网页        <code>gitbook build</code></li>\n<li>启动服务        <code>gitbook serve</code></li>\n<li>安装可以参考这个网页 <a href=\"https://www.jianshu.com/p/421cc442f06c\">gitbook安装</a></li>\n</ol>\n"},{"title":"Git使用笔记","abbrlink":"git-notes","date":"2018-04-25T05:55:00.000Z","_content":"\n### 常用命令\n```\ngit pull                #拉取代码到本地\ngit add .               #将文件添加到暂存区\ngit commit -m \"xx\"      #提交代码，并填写描述\ngit push                #推送代码到远端\ngit status              #显示所有需提交的文件\ngit branch              #显示当前代码库中所有的本地分支\ngit branch xx           #创建一个新分支xx\ngit branch -d xx        #删除指定分支xx\ngit checkout xx         #切换到分支xx\ngit checkout -b xx      #创建一个分支xx，并切换到新分支\ngit merge xx            #将指定分支xx的历史记录合并到当前分支\ngit stash save          #临时保存所有修改的文件\ngit stash pop           #恢复最近一次存储的文件\n```\n\n### 文件忽略\n软件项目使用git提交远程仓库时，如果需要忽略某些文件(如缓存文件、框架核心文件)的变更，可以在项目的根目录下创建.gitignore文件，并罗列需忽略的文件或者文件夹。\n\n如下为PHP Yii2下的.gitignore文件内容：\n``` bash\n.idea/\n.project\n.settings\n/vendor\nassets/\n/runtime\n/Runtime\n/upload\n```\n但有时候忽略文件不起作用，其原因是：git设置本地忽略时，必须保证远程仓库分支上没有这个要忽略的文件；否则本地的ignore将不起作用。\n解决方式：删除要忽略的文件并提交远程仓库，ignore该文件。\n\n### git设置\n```bash\ncat .git/config\ngit remote set-url origin ssh地址\n```","source":"_posts/Git/Git使用笔记.md","raw":"---\ntitle: Git使用笔记\ntags: [Git]\ncategories: [Git]\nabbrlink: 'git-notes'\ndate: 2018-04-25 13:55:00\n---\n\n### 常用命令\n```\ngit pull                #拉取代码到本地\ngit add .               #将文件添加到暂存区\ngit commit -m \"xx\"      #提交代码，并填写描述\ngit push                #推送代码到远端\ngit status              #显示所有需提交的文件\ngit branch              #显示当前代码库中所有的本地分支\ngit branch xx           #创建一个新分支xx\ngit branch -d xx        #删除指定分支xx\ngit checkout xx         #切换到分支xx\ngit checkout -b xx      #创建一个分支xx，并切换到新分支\ngit merge xx            #将指定分支xx的历史记录合并到当前分支\ngit stash save          #临时保存所有修改的文件\ngit stash pop           #恢复最近一次存储的文件\n```\n\n### 文件忽略\n软件项目使用git提交远程仓库时，如果需要忽略某些文件(如缓存文件、框架核心文件)的变更，可以在项目的根目录下创建.gitignore文件，并罗列需忽略的文件或者文件夹。\n\n如下为PHP Yii2下的.gitignore文件内容：\n``` bash\n.idea/\n.project\n.settings\n/vendor\nassets/\n/runtime\n/Runtime\n/upload\n```\n但有时候忽略文件不起作用，其原因是：git设置本地忽略时，必须保证远程仓库分支上没有这个要忽略的文件；否则本地的ignore将不起作用。\n解决方式：删除要忽略的文件并提交远程仓库，ignore该文件。\n\n### git设置\n```bash\ncat .git/config\ngit remote set-url origin ssh地址\n```","slug":"Git/Git使用笔记","published":1,"updated":"2024-10-18T01:46:52.362Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2sy0003oshgg4rn7824","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h3><figure class=\"highlight mipsasm\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git pull                <span class=\"comment\">#拉取代码到本地</span></span><br><span class=\"line\">git <span class=\"keyword\">add </span>.               <span class=\"comment\">#将文件添加到暂存区</span></span><br><span class=\"line\">git commit -m <span class=\"string\">\"xx\"</span>      <span class=\"comment\">#提交代码，并填写描述</span></span><br><span class=\"line\">git push                <span class=\"comment\">#推送代码到远端</span></span><br><span class=\"line\">git status              <span class=\"comment\">#显示所有需提交的文件</span></span><br><span class=\"line\">git <span class=\"keyword\">branch </span>             <span class=\"comment\">#显示当前代码库中所有的本地分支</span></span><br><span class=\"line\">git <span class=\"keyword\">branch </span>xx           <span class=\"comment\">#创建一个新分支xx</span></span><br><span class=\"line\">git <span class=\"keyword\">branch </span>-d xx        <span class=\"comment\">#删除指定分支xx</span></span><br><span class=\"line\">git checkout xx         <span class=\"comment\">#切换到分支xx</span></span><br><span class=\"line\">git checkout -<span class=\"keyword\">b </span>xx      <span class=\"comment\">#创建一个分支xx，并切换到新分支</span></span><br><span class=\"line\">git merge xx            <span class=\"comment\">#将指定分支xx的历史记录合并到当前分支</span></span><br><span class=\"line\">git stash save          <span class=\"comment\">#临时保存所有修改的文件</span></span><br><span class=\"line\">git stash pop           <span class=\"comment\">#恢复最近一次存储的文件</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"文件忽略\"><a href=\"#文件忽略\" class=\"headerlink\" title=\"文件忽略\"></a>文件忽略</h3><p>软件项目使用git提交远程仓库时，如果需要忽略某些文件(如缓存文件、框架核心文件)的变更，可以在项目的根目录下创建.gitignore文件，并罗列需忽略的文件或者文件夹。</p>\n<p>如下为PHP Yii2下的.gitignore文件内容：<br></p><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.idea/</span><br><span class=\"line\">.project</span><br><span class=\"line\">.settings</span><br><span class=\"line\">/vendor</span><br><span class=\"line\">assets/</span><br><span class=\"line\">/runtime</span><br><span class=\"line\">/Runtime</span><br><span class=\"line\">/upload</span><br></pre></td></tr></tbody></table></figure><br>但有时候忽略文件不起作用，其原因是：git设置本地忽略时，必须保证远程仓库分支上没有这个要忽略的文件；否则本地的ignore将不起作用。<br>解决方式：删除要忽略的文件并提交远程仓库，ignore该文件。<p></p>\n<h3 id=\"git设置\"><a href=\"#git设置\" class=\"headerlink\" title=\"git设置\"></a>git设置</h3><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cat</span> .git/config</span><br><span class=\"line\">git remote set-url origin ssh地址</span><br></pre></td></tr></tbody></table></figure>","excerpt":"","more":"<h3 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h3><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git pull                <span class=\"comment\">#拉取代码到本地</span></span><br><span class=\"line\">git <span class=\"keyword\">add </span>.               <span class=\"comment\">#将文件添加到暂存区</span></span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;xx&quot;</span>      <span class=\"comment\">#提交代码，并填写描述</span></span><br><span class=\"line\">git push                <span class=\"comment\">#推送代码到远端</span></span><br><span class=\"line\">git status              <span class=\"comment\">#显示所有需提交的文件</span></span><br><span class=\"line\">git <span class=\"keyword\">branch </span>             <span class=\"comment\">#显示当前代码库中所有的本地分支</span></span><br><span class=\"line\">git <span class=\"keyword\">branch </span>xx           <span class=\"comment\">#创建一个新分支xx</span></span><br><span class=\"line\">git <span class=\"keyword\">branch </span>-d xx        <span class=\"comment\">#删除指定分支xx</span></span><br><span class=\"line\">git checkout xx         <span class=\"comment\">#切换到分支xx</span></span><br><span class=\"line\">git checkout -<span class=\"keyword\">b </span>xx      <span class=\"comment\">#创建一个分支xx，并切换到新分支</span></span><br><span class=\"line\">git merge xx            <span class=\"comment\">#将指定分支xx的历史记录合并到当前分支</span></span><br><span class=\"line\">git stash save          <span class=\"comment\">#临时保存所有修改的文件</span></span><br><span class=\"line\">git stash pop           <span class=\"comment\">#恢复最近一次存储的文件</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"文件忽略\"><a href=\"#文件忽略\" class=\"headerlink\" title=\"文件忽略\"></a>文件忽略</h3><p>软件项目使用git提交远程仓库时，如果需要忽略某些文件(如缓存文件、框架核心文件)的变更，可以在项目的根目录下创建.gitignore文件，并罗列需忽略的文件或者文件夹。</p>\n<p>如下为PHP Yii2下的.gitignore文件内容：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.idea/</span><br><span class=\"line\">.project</span><br><span class=\"line\">.settings</span><br><span class=\"line\">/vendor</span><br><span class=\"line\">assets/</span><br><span class=\"line\">/runtime</span><br><span class=\"line\">/Runtime</span><br><span class=\"line\">/upload</span><br></pre></td></tr></table></figure><br>但有时候忽略文件不起作用，其原因是：git设置本地忽略时，必须保证远程仓库分支上没有这个要忽略的文件；否则本地的ignore将不起作用。<br>解决方式：删除要忽略的文件并提交远程仓库，ignore该文件。</p>\n<h3 id=\"git设置\"><a href=\"#git设置\" class=\"headerlink\" title=\"git设置\"></a>git设置</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cat</span> .git/config</span><br><span class=\"line\">git remote set-url origin ssh地址</span><br></pre></td></tr></table></figure>"},{"title":"Hexo使用笔记","abbrlink":"hexo-notes","date":"2018-06-09T07:12:00.000Z","updated":"2022-05-08T03:20:00.000Z","_content":"<div class=\"note info\">前言：这个博客网站是使用hexo搭建，部署在github上的，总的来说，不太复杂。现记录一些常用的操作，方便大家参考。</div>\n\n### 常用命令\n1. 清除当前缓存\t\t` $ hexo clean `\n2. 重新生成并部署到github上\t\t` $ hexo g -d `\n3. 启动服务\t\t` $ hexo s`\n4. 新建页面\t\t` $ hexo new page categories `\n5. 快速构建\t\t` $ hexo cl && hexo g && hexo s `\n\n### 常用设置\n#### 1. 如何在首页设置「阅读全文」? \n   在首页显示一篇文章的部分内容(或者摘要)，并提供一个链接(「阅读全文」)跳转到文章详情页。 NexT 提供以下三种方式：\n\n   1. 在文章中使用 `<!-- more -->` 手动进行截断，Hexo 提供的方式(<font color=\"#FF0000\">推荐</font> )\n   2. 在文章的 [front-matter](https://hexo.io/docs/front-matter.html) 中添加 description，并提供文章摘录\n   3. 自动形成摘要，在 主题配置文件_config.yml 中添加：\n    ``` bash\n        auto_excerpt:\n          enable: true\n          length: 150\n    ```\n默认截取的长度为 150 字符，可以根据需要自行设定。\n\t\t\n建议使用 `<!-- more -->`方式，既可以精确控制需要显示的摘录内容， 还可以让 Hexo 中的插件更好的识别。\t\n\n### 常用插件\n#### 1. 文章生成永久短链接\n`npm install hexo-abbrlink --save`\n在站点配置项文件_config.yml下添加：\n```\nurl: https://crazy-boy.com\nroot: /\npermalink: archives/:abbrlink.html\nabbrlink:\n  alg: crc32  # 算法：crc16(default) and crc32\n  rep: hex    # 进制：dec(default) and hex\npermalink_defaults:\npretty_urls:\n  trailing_index: true # Set to false to remove trailing 'index.html' from permalinks\n  trailing_html: true # Set to false to remove trailing '.html' from permalinks\n```\n当然文章的短链部分可以在文章的首部进行设置，如：`abbrlink: 'hexo-notes'`，如果不设置就会自动生成随机短链。\n\n#### 2. 开启文章字数统计\n`npm i --save hexo-wordcount`\n\n#### 3. 文章设置密码\n`npm install --save hexo-blog-encrypt`\n将\"password\"字段添加到文章的信息头：`password: abc123`\n文章可以按标签进行加密，优先级为：文章信息头>按标签加密\n文章信息头的设置示例\n![](/images/hexo_notes_2.png)\n\n_config.yml示例\n```yaml\n# Security\nencrypt: # hexo-blog-encrypt\n  abstract: 有东西被加密了, 请输入密码查看.\n  message: 您好, 这里需要密码.\n  tags:\n  - {name: tagNameA, password: 密码A}\n  - {name: tagNameB, password: 密码B}\n  wrong_pass_message: 抱歉, 密码不太对哟.\n  wrong_hash_message: 抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.\n```\n如果tagNameA中的某篇博文不想被加密，只需把博文头部的password设置为\"\"即可。\n\n### 多台电脑同步更新hexo博客\n- 在github上切个hexo分支，把源代码push上去。\n- 在需要同步更新的电脑上进行如下操作：\n    安装git\n    下载安装nodejs\n    node -v\n    npm -v\n    git clone xx.git\n    删除主题下.git目录\n    进入目录，执行下面命令：\n    ```\n    $ npm install\n    $ npm install hexo-generator-search --save\n    $ npm i hexo-permalink-pinyin --save\n    $ npm install hexo-filter-github-emojis --save\n    $ npm install hexo-generator-feed --save\n    ```\n\n### 常见问题\n#### 1. 执行hexo命令，提示`hexo: command not found`\n + 首先检查nodejs和npm是否正常，依次输入`node -v`和`npm -v`检查版本信息\n + 将与_config.yml同级的node_modules下的.bin路径(F:\\GitHub\\crazy-boy.github.io\\node_modules\\.bin)添加到系统环境变量的Path里\n + 如果还不行，就重装hexo：`npm install hexo-cli -g`\n\n#### 2. hexo g -d报错fatal: in unpopulated submodule '.deploy_git'\n + 删除.deploy_git文件夹\n + 再执行`hexo g -d`\n\n \n### 参考文档\nhttps://blog.csdn.net/sinat_37781304/article/details/82729029\nhttps://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md\nhttps://blog.csdn.net/qq_30105599/article/details/118302086","source":"_posts/Hexo/Hexo使用笔记.md","raw":"---\ntitle: Hexo使用笔记\ntags: [Hexo]\ncategories: [其他]\nabbrlink: 'hexo-notes'\ndate: 2018-06-09 15:12:00\nupdated: 2022-05-08 11:20:00\n---\n<div class=\"note info\">前言：这个博客网站是使用hexo搭建，部署在github上的，总的来说，不太复杂。现记录一些常用的操作，方便大家参考。</div>\n\n### 常用命令\n1. 清除当前缓存\t\t` $ hexo clean `\n2. 重新生成并部署到github上\t\t` $ hexo g -d `\n3. 启动服务\t\t` $ hexo s`\n4. 新建页面\t\t` $ hexo new page categories `\n5. 快速构建\t\t` $ hexo cl && hexo g && hexo s `\n\n### 常用设置\n#### 1. 如何在首页设置「阅读全文」? \n   在首页显示一篇文章的部分内容(或者摘要)，并提供一个链接(「阅读全文」)跳转到文章详情页。 NexT 提供以下三种方式：\n\n   1. 在文章中使用 `<!-- more -->` 手动进行截断，Hexo 提供的方式(<font color=\"#FF0000\">推荐</font> )\n   2. 在文章的 [front-matter](https://hexo.io/docs/front-matter.html) 中添加 description，并提供文章摘录\n   3. 自动形成摘要，在 主题配置文件_config.yml 中添加：\n    ``` bash\n        auto_excerpt:\n          enable: true\n          length: 150\n    ```\n默认截取的长度为 150 字符，可以根据需要自行设定。\n\t\t\n建议使用 `<!-- more -->`方式，既可以精确控制需要显示的摘录内容， 还可以让 Hexo 中的插件更好的识别。\t\n\n### 常用插件\n#### 1. 文章生成永久短链接\n`npm install hexo-abbrlink --save`\n在站点配置项文件_config.yml下添加：\n```\nurl: https://crazy-boy.com\nroot: /\npermalink: archives/:abbrlink.html\nabbrlink:\n  alg: crc32  # 算法：crc16(default) and crc32\n  rep: hex    # 进制：dec(default) and hex\npermalink_defaults:\npretty_urls:\n  trailing_index: true # Set to false to remove trailing 'index.html' from permalinks\n  trailing_html: true # Set to false to remove trailing '.html' from permalinks\n```\n当然文章的短链部分可以在文章的首部进行设置，如：`abbrlink: 'hexo-notes'`，如果不设置就会自动生成随机短链。\n\n#### 2. 开启文章字数统计\n`npm i --save hexo-wordcount`\n\n#### 3. 文章设置密码\n`npm install --save hexo-blog-encrypt`\n将\"password\"字段添加到文章的信息头：`password: abc123`\n文章可以按标签进行加密，优先级为：文章信息头>按标签加密\n文章信息头的设置示例\n![](/images/hexo_notes_2.png)\n\n_config.yml示例\n```yaml\n# Security\nencrypt: # hexo-blog-encrypt\n  abstract: 有东西被加密了, 请输入密码查看.\n  message: 您好, 这里需要密码.\n  tags:\n  - {name: tagNameA, password: 密码A}\n  - {name: tagNameB, password: 密码B}\n  wrong_pass_message: 抱歉, 密码不太对哟.\n  wrong_hash_message: 抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.\n```\n如果tagNameA中的某篇博文不想被加密，只需把博文头部的password设置为\"\"即可。\n\n### 多台电脑同步更新hexo博客\n- 在github上切个hexo分支，把源代码push上去。\n- 在需要同步更新的电脑上进行如下操作：\n    安装git\n    下载安装nodejs\n    node -v\n    npm -v\n    git clone xx.git\n    删除主题下.git目录\n    进入目录，执行下面命令：\n    ```\n    $ npm install\n    $ npm install hexo-generator-search --save\n    $ npm i hexo-permalink-pinyin --save\n    $ npm install hexo-filter-github-emojis --save\n    $ npm install hexo-generator-feed --save\n    ```\n\n### 常见问题\n#### 1. 执行hexo命令，提示`hexo: command not found`\n + 首先检查nodejs和npm是否正常，依次输入`node -v`和`npm -v`检查版本信息\n + 将与_config.yml同级的node_modules下的.bin路径(F:\\GitHub\\crazy-boy.github.io\\node_modules\\.bin)添加到系统环境变量的Path里\n + 如果还不行，就重装hexo：`npm install hexo-cli -g`\n\n#### 2. hexo g -d报错fatal: in unpopulated submodule '.deploy_git'\n + 删除.deploy_git文件夹\n + 再执行`hexo g -d`\n\n \n### 参考文档\nhttps://blog.csdn.net/sinat_37781304/article/details/82729029\nhttps://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md\nhttps://blog.csdn.net/qq_30105599/article/details/118302086","slug":"Hexo/Hexo使用笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2t10007oshggyup0d0k","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">前言：这个博客网站是使用hexo搭建，部署在github上的，总的来说，不太复杂。现记录一些常用的操作，方便大家参考。</div>\n\n<h3 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h3><ol>\n<li>清除当前缓存        <code>$ hexo clean</code></li>\n<li>重新生成并部署到github上        <code>$ hexo g -d</code></li>\n<li>启动服务        <code>$ hexo s</code></li>\n<li>新建页面        <code>$ hexo new page categories</code></li>\n<li>快速构建        <code>$ hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</code></li>\n</ol>\n<h3 id=\"常用设置\"><a href=\"#常用设置\" class=\"headerlink\" title=\"常用设置\"></a>常用设置</h3><h4 id=\"1-如何在首页设置「阅读全文」\"><a href=\"#1-如何在首页设置「阅读全文」\" class=\"headerlink\" title=\"1. 如何在首页设置「阅读全文」?\"></a>1. 如何在首页设置「阅读全文」?</h4><p>   在首页显示一篇文章的部分内容(或者摘要)，并提供一个链接(「阅读全文」)跳转到文章详情页。 NexT 提供以下三种方式：</p>\n<ol>\n<li>在文章中使用 <code>&lt;!-- more --&gt;</code> 手动进行截断，Hexo 提供的方式(<font color=\"#FF0000\">推荐</font> )</li>\n<li>在文章的 <a href=\"https://hexo.io/docs/front-matter.html\">front-matter</a> 中添加 description，并提供文章摘录</li>\n<li>自动形成摘要，在 主题配置文件_config.yml 中添加：<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">auto_excerpt:</span><br><span class=\"line\">  <span class=\"built_in\">enable</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  length: 150</span><br></pre></td></tr></tbody></table></figure>\n默认截取的长度为 150 字符，可以根据需要自行设定。</li>\n</ol>\n<p>建议使用 <code>&lt;!-- more --&gt;</code>方式，既可以精确控制需要显示的摘录内容， 还可以让 Hexo 中的插件更好的识别。    </p>\n<h3 id=\"常用插件\"><a href=\"#常用插件\" class=\"headerlink\" title=\"常用插件\"></a>常用插件</h3><h4 id=\"1-文章生成永久短链接\"><a href=\"#1-文章生成永久短链接\" class=\"headerlink\" title=\"1. 文章生成永久短链接\"></a>1. 文章生成永久短链接</h4><p><code>npm install hexo-abbrlink --save</code><br>在站点配置项文件_config.yml下添加：<br></p><figure class=\"highlight oxygene\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url: https:<span class=\"comment\">//crazy-boy.com</span></span><br><span class=\"line\">root: /</span><br><span class=\"line\">permalink: archives/:abbrlink.html</span><br><span class=\"line\">abbrlink:</span><br><span class=\"line\">  alg: crc32  # 算法：crc16(<span class=\"keyword\">default</span>) <span class=\"keyword\">and</span> crc32</span><br><span class=\"line\">  rep: hex    # 进制：dec(<span class=\"keyword\">default</span>) <span class=\"keyword\">and</span> hex</span><br><span class=\"line\">permalink_defaults:</span><br><span class=\"line\">pretty_urls:</span><br><span class=\"line\">  trailing_index: <span class=\"keyword\">true</span> # <span class=\"keyword\">Set</span> <span class=\"keyword\">to</span> <span class=\"keyword\">false</span> <span class=\"keyword\">to</span> <span class=\"keyword\">remove</span> trailing <span class=\"string\">'index.html'</span> <span class=\"keyword\">from</span> permalinks</span><br><span class=\"line\">  trailing_html: <span class=\"keyword\">true</span> # <span class=\"keyword\">Set</span> <span class=\"keyword\">to</span> <span class=\"keyword\">false</span> <span class=\"keyword\">to</span> <span class=\"keyword\">remove</span> trailing <span class=\"string\">'.html'</span> <span class=\"keyword\">from</span> permalinks</span><br></pre></td></tr></tbody></table></figure><br>当然文章的短链部分可以在文章的首部进行设置，如：<code>abbrlink: 'hexo-notes'</code>，如果不设置就会自动生成随机短链。<p></p>\n<h4 id=\"2-开启文章字数统计\"><a href=\"#2-开启文章字数统计\" class=\"headerlink\" title=\"2. 开启文章字数统计\"></a>2. 开启文章字数统计</h4><p><code>npm i --save hexo-wordcount</code></p>\n<h4 id=\"3-文章设置密码\"><a href=\"#3-文章设置密码\" class=\"headerlink\" title=\"3. 文章设置密码\"></a>3. 文章设置密码</h4><p><code>npm install --save hexo-blog-encrypt</code><br>将”password”字段添加到文章的信息头：<code>password: abc123</code><br>文章可以按标签进行加密，优先级为：文章信息头&gt;按标签加密<br>文章信息头的设置示例<br><img src=\"/images/hexo_notes_2.png\" alt=\"\"></p>\n<p>_config.yml示例<br></p><figure class=\"highlight yaml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Security</span></span><br><span class=\"line\"><span class=\"attr\">encrypt:</span> <span class=\"comment\"># hexo-blog-encrypt</span></span><br><span class=\"line\">  <span class=\"attr\">abstract:</span> <span class=\"string\">有东西被加密了,</span> <span class=\"string\">请输入密码查看.</span></span><br><span class=\"line\">  <span class=\"attr\">message:</span> <span class=\"string\">您好,</span> <span class=\"string\">这里需要密码.</span></span><br><span class=\"line\">  <span class=\"attr\">tags:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> {<span class=\"attr\">name:</span> <span class=\"string\">tagNameA</span>, <span class=\"attr\">password:</span> <span class=\"string\">密码A</span>}</span><br><span class=\"line\">  <span class=\"bullet\">-</span> {<span class=\"attr\">name:</span> <span class=\"string\">tagNameB</span>, <span class=\"attr\">password:</span> <span class=\"string\">密码B</span>}</span><br><span class=\"line\">  <span class=\"attr\">wrong_pass_message:</span> <span class=\"string\">抱歉,</span> <span class=\"string\">密码不太对哟.</span></span><br><span class=\"line\">  <span class=\"attr\">wrong_hash_message:</span> <span class=\"string\">抱歉,</span> <span class=\"string\">这个文章不能被校验,</span> <span class=\"string\">不过您还是能看看解密后的内容.</span></span><br></pre></td></tr></tbody></table></figure><br>如果tagNameA中的某篇博文不想被加密，只需把博文头部的password设置为””即可。<p></p>\n<h3 id=\"多台电脑同步更新hexo博客\"><a href=\"#多台电脑同步更新hexo博客\" class=\"headerlink\" title=\"多台电脑同步更新hexo博客\"></a>多台电脑同步更新hexo博客</h3><ul>\n<li>在github上切个hexo分支，把源代码push上去。</li>\n<li>在需要同步更新的电脑上进行如下操作：<br>  安装git<br>  下载安装nodejs<br>  node -v<br>  npm -v<br>  git clone xx.git<br>  删除主题下.git目录<br>  进入目录，执行下面命令：  <figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install</span><br><span class=\"line\">$ npm install hexo<span class=\"operator\">-</span>generator<span class=\"operator\">-</span><span class=\"keyword\">search</span> <span class=\"comment\">--save</span></span><br><span class=\"line\">$ npm i hexo<span class=\"operator\">-</span>permalink<span class=\"operator\">-</span>pinyin <span class=\"comment\">--save</span></span><br><span class=\"line\">$ npm install hexo<span class=\"operator\">-</span><span class=\"keyword\">filter</span><span class=\"operator\">-</span>github<span class=\"operator\">-</span>emojis <span class=\"comment\">--save</span></span><br><span class=\"line\">$ npm install hexo<span class=\"operator\">-</span>generator<span class=\"operator\">-</span>feed <span class=\"comment\">--save</span></span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<h3 id=\"常见问题\"><a href=\"#常见问题\" class=\"headerlink\" title=\"常见问题\"></a>常见问题</h3><h4 id=\"1-执行hexo命令，提示hexo-command-not-found\"><a href=\"#1-执行hexo命令，提示hexo-command-not-found\" class=\"headerlink\" title=\"1. 执行hexo命令，提示hexo: command not found\"></a>1. 执行hexo命令，提示<code>hexo: command not found</code></h4><ul>\n<li>首先检查nodejs和npm是否正常，依次输入<code>node -v</code>和<code>npm -v</code>检查版本信息</li>\n<li>将与_config.yml同级的node_modules下的.bin路径(F:\\GitHub\\crazy-boy.github.io\\node_modules.bin)添加到系统环境变量的Path里</li>\n<li>如果还不行，就重装hexo：<code>npm install hexo-cli -g</code></li>\n</ul>\n<h4 id=\"2-hexo-g-d报错fatal-in-unpopulated-submodule-‘-deploy-git’\"><a href=\"#2-hexo-g-d报错fatal-in-unpopulated-submodule-‘-deploy-git’\" class=\"headerlink\" title=\"2. hexo g -d报错fatal: in unpopulated submodule ‘.deploy_git’\"></a>2. hexo g -d报错fatal: in unpopulated submodule ‘.deploy_git’</h4><ul>\n<li>删除.deploy_git文件夹</li>\n<li>再执行<code>hexo g -d</code></li>\n</ul>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p><a href=\"https://blog.csdn.net/sinat_37781304/article/details/82729029\">https://blog.csdn.net/sinat_37781304/article/details/82729029</a><br><a href=\"https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md\">https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md</a><br><a href=\"https://blog.csdn.net/qq_30105599/article/details/118302086\">https://blog.csdn.net/qq_30105599/article/details/118302086</a></p>\n","excerpt":"","more":"<div class=\"note info\">前言：这个博客网站是使用hexo搭建，部署在github上的，总的来说，不太复杂。现记录一些常用的操作，方便大家参考。</div>\n\n<h3 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h3><ol>\n<li>清除当前缓存        <code>$ hexo clean</code></li>\n<li>重新生成并部署到github上        <code>$ hexo g -d</code></li>\n<li>启动服务        <code>$ hexo s</code></li>\n<li>新建页面        <code>$ hexo new page categories</code></li>\n<li>快速构建        <code>$ hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</code></li>\n</ol>\n<h3 id=\"常用设置\"><a href=\"#常用设置\" class=\"headerlink\" title=\"常用设置\"></a>常用设置</h3><h4 id=\"1-如何在首页设置「阅读全文」\"><a href=\"#1-如何在首页设置「阅读全文」\" class=\"headerlink\" title=\"1. 如何在首页设置「阅读全文」?\"></a>1. 如何在首页设置「阅读全文」?</h4><p>   在首页显示一篇文章的部分内容(或者摘要)，并提供一个链接(「阅读全文」)跳转到文章详情页。 NexT 提供以下三种方式：</p>\n<ol>\n<li>在文章中使用 <code>&lt;!-- more --&gt;</code> 手动进行截断，Hexo 提供的方式(<font color=\"#FF0000\">推荐</font> )</li>\n<li>在文章的 <a href=\"https://hexo.io/docs/front-matter.html\">front-matter</a> 中添加 description，并提供文章摘录</li>\n<li>自动形成摘要，在 主题配置文件_config.yml 中添加：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">auto_excerpt:</span><br><span class=\"line\">  <span class=\"built_in\">enable</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  length: 150</span><br></pre></td></tr></table></figure>\n默认截取的长度为 150 字符，可以根据需要自行设定。</li>\n</ol>\n<p>建议使用 <code>&lt;!-- more --&gt;</code>方式，既可以精确控制需要显示的摘录内容， 还可以让 Hexo 中的插件更好的识别。    </p>\n<h3 id=\"常用插件\"><a href=\"#常用插件\" class=\"headerlink\" title=\"常用插件\"></a>常用插件</h3><h4 id=\"1-文章生成永久短链接\"><a href=\"#1-文章生成永久短链接\" class=\"headerlink\" title=\"1. 文章生成永久短链接\"></a>1. 文章生成永久短链接</h4><p><code>npm install hexo-abbrlink --save</code><br>在站点配置项文件_config.yml下添加：<br><figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url: https:<span class=\"comment\">//crazy-boy.com</span></span><br><span class=\"line\">root: /</span><br><span class=\"line\">permalink: archives/:abbrlink.html</span><br><span class=\"line\">abbrlink:</span><br><span class=\"line\">  alg: crc32  # 算法：crc16(<span class=\"keyword\">default</span>) <span class=\"keyword\">and</span> crc32</span><br><span class=\"line\">  rep: hex    # 进制：dec(<span class=\"keyword\">default</span>) <span class=\"keyword\">and</span> hex</span><br><span class=\"line\">permalink_defaults:</span><br><span class=\"line\">pretty_urls:</span><br><span class=\"line\">  trailing_index: <span class=\"keyword\">true</span> # <span class=\"keyword\">Set</span> <span class=\"keyword\">to</span> <span class=\"keyword\">false</span> <span class=\"keyword\">to</span> <span class=\"keyword\">remove</span> trailing <span class=\"string\">&#x27;index.html&#x27;</span> <span class=\"keyword\">from</span> permalinks</span><br><span class=\"line\">  trailing_html: <span class=\"keyword\">true</span> # <span class=\"keyword\">Set</span> <span class=\"keyword\">to</span> <span class=\"keyword\">false</span> <span class=\"keyword\">to</span> <span class=\"keyword\">remove</span> trailing <span class=\"string\">&#x27;.html&#x27;</span> <span class=\"keyword\">from</span> permalinks</span><br></pre></td></tr></table></figure><br>当然文章的短链部分可以在文章的首部进行设置，如：<code>abbrlink: &#39;hexo-notes&#39;</code>，如果不设置就会自动生成随机短链。</p>\n<h4 id=\"2-开启文章字数统计\"><a href=\"#2-开启文章字数统计\" class=\"headerlink\" title=\"2. 开启文章字数统计\"></a>2. 开启文章字数统计</h4><p><code>npm i --save hexo-wordcount</code></p>\n<h4 id=\"3-文章设置密码\"><a href=\"#3-文章设置密码\" class=\"headerlink\" title=\"3. 文章设置密码\"></a>3. 文章设置密码</h4><p><code>npm install --save hexo-blog-encrypt</code><br>将”password”字段添加到文章的信息头：<code>password: abc123</code><br>文章可以按标签进行加密，优先级为：文章信息头&gt;按标签加密<br>文章信息头的设置示例<br><img src=\"/images/hexo_notes_2.png\" alt></p>\n<p>_config.yml示例<br><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Security</span></span><br><span class=\"line\"><span class=\"attr\">encrypt:</span> <span class=\"comment\"># hexo-blog-encrypt</span></span><br><span class=\"line\">  <span class=\"attr\">abstract:</span> <span class=\"string\">有东西被加密了,</span> <span class=\"string\">请输入密码查看.</span></span><br><span class=\"line\">  <span class=\"attr\">message:</span> <span class=\"string\">您好,</span> <span class=\"string\">这里需要密码.</span></span><br><span class=\"line\">  <span class=\"attr\">tags:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> &#123;<span class=\"attr\">name:</span> <span class=\"string\">tagNameA</span>, <span class=\"attr\">password:</span> <span class=\"string\">密码A</span>&#125;</span><br><span class=\"line\">  <span class=\"bullet\">-</span> &#123;<span class=\"attr\">name:</span> <span class=\"string\">tagNameB</span>, <span class=\"attr\">password:</span> <span class=\"string\">密码B</span>&#125;</span><br><span class=\"line\">  <span class=\"attr\">wrong_pass_message:</span> <span class=\"string\">抱歉,</span> <span class=\"string\">密码不太对哟.</span></span><br><span class=\"line\">  <span class=\"attr\">wrong_hash_message:</span> <span class=\"string\">抱歉,</span> <span class=\"string\">这个文章不能被校验,</span> <span class=\"string\">不过您还是能看看解密后的内容.</span></span><br></pre></td></tr></table></figure><br>如果tagNameA中的某篇博文不想被加密，只需把博文头部的password设置为””即可。</p>\n<h3 id=\"多台电脑同步更新hexo博客\"><a href=\"#多台电脑同步更新hexo博客\" class=\"headerlink\" title=\"多台电脑同步更新hexo博客\"></a>多台电脑同步更新hexo博客</h3><ul>\n<li>在github上切个hexo分支，把源代码push上去。</li>\n<li>在需要同步更新的电脑上进行如下操作：<br>  安装git<br>  下载安装nodejs<br>  node -v<br>  npm -v<br>  git clone xx.git<br>  删除主题下.git目录<br>  进入目录，执行下面命令：  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install</span><br><span class=\"line\">$ npm install hexo<span class=\"operator\">-</span>generator<span class=\"operator\">-</span><span class=\"keyword\">search</span> <span class=\"comment\">--save</span></span><br><span class=\"line\">$ npm i hexo<span class=\"operator\">-</span>permalink<span class=\"operator\">-</span>pinyin <span class=\"comment\">--save</span></span><br><span class=\"line\">$ npm install hexo<span class=\"operator\">-</span><span class=\"keyword\">filter</span><span class=\"operator\">-</span>github<span class=\"operator\">-</span>emojis <span class=\"comment\">--save</span></span><br><span class=\"line\">$ npm install hexo<span class=\"operator\">-</span>generator<span class=\"operator\">-</span>feed <span class=\"comment\">--save</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"常见问题\"><a href=\"#常见问题\" class=\"headerlink\" title=\"常见问题\"></a>常见问题</h3><h4 id=\"1-执行hexo命令，提示hexo-command-not-found\"><a href=\"#1-执行hexo命令，提示hexo-command-not-found\" class=\"headerlink\" title=\"1. 执行hexo命令，提示hexo: command not found\"></a>1. 执行hexo命令，提示<code>hexo: command not found</code></h4><ul>\n<li>首先检查nodejs和npm是否正常，依次输入<code>node -v</code>和<code>npm -v</code>检查版本信息</li>\n<li>将与_config.yml同级的node_modules下的.bin路径(F:\\GitHub\\crazy-boy.github.io\\node_modules.bin)添加到系统环境变量的Path里</li>\n<li>如果还不行，就重装hexo：<code>npm install hexo-cli -g</code></li>\n</ul>\n<h4 id=\"2-hexo-g-d报错fatal-in-unpopulated-submodule-‘-deploy-git’\"><a href=\"#2-hexo-g-d报错fatal-in-unpopulated-submodule-‘-deploy-git’\" class=\"headerlink\" title=\"2. hexo g -d报错fatal: in unpopulated submodule ‘.deploy_git’\"></a>2. hexo g -d报错fatal: in unpopulated submodule ‘.deploy_git’</h4><ul>\n<li>删除.deploy_git文件夹</li>\n<li>再执行<code>hexo g -d</code></li>\n</ul>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p><a href=\"https://blog.csdn.net/sinat_37781304/article/details/82729029\">https://blog.csdn.net/sinat_37781304/article/details/82729029</a><br><a href=\"https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md\">https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md</a><br><a href=\"https://blog.csdn.net/qq_30105599/article/details/118302086\">https://blog.csdn.net/qq_30105599/article/details/118302086</a></p>\n"},{"title":"Goframe框架使用","abbrlink":"goframe-note","date":"2021-09-17T08:59:14.000Z","updated":"2021-09-17T08:59:14.000Z","_content":"\n\n#### gen dao使用\n1. 下载软件：https://github.com/gogf/gf-cli/releases\n2. 安装，并添加环境变量\n   ![](/images/goframe_note_1.png)\n\n3. 查看版本：`gf -version`\n4. 更新model：`gf gen dao -c bin/config.toml -path . -r tf_`","source":"_posts/Golang/Goframe框架使用.md","raw":"---\ntitle: Goframe框架使用\ntags: [Goframe]\ncategories: Go\nabbrlink: 'goframe-note'\ndate: 2021-09-17 16:59:14\nupdated: 2021-09-17 16:59:14\n---\n\n\n#### gen dao使用\n1. 下载软件：https://github.com/gogf/gf-cli/releases\n2. 安装，并添加环境变量\n   ![](/images/goframe_note_1.png)\n\n3. 查看版本：`gf -version`\n4. 更新model：`gf gen dao -c bin/config.toml -path . -r tf_`","slug":"Golang/Goframe框架使用","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2t20009oshgg3gmg618","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h4 id=\"gen-dao使用\"><a href=\"#gen-dao使用\" class=\"headerlink\" title=\"gen dao使用\"></a>gen dao使用</h4><ol>\n<li>下载软件：<a href=\"https://github.com/gogf/gf-cli/releases\">https://github.com/gogf/gf-cli/releases</a></li>\n<li><p>安装，并添加环境变量<br><img src=\"/images/goframe_note_1.png\" alt=\"\"></p>\n</li>\n<li><p>查看版本：<code>gf -version</code></p>\n</li>\n<li>更新model：<code>gf gen dao -c bin/config.toml -path . -r tf_</code></li>\n</ol>\n","excerpt":"","more":"<h4 id=\"gen-dao使用\"><a href=\"#gen-dao使用\" class=\"headerlink\" title=\"gen dao使用\"></a>gen dao使用</h4><ol>\n<li>下载软件：<a href=\"https://github.com/gogf/gf-cli/releases\">https://github.com/gogf/gf-cli/releases</a></li>\n<li><p>安装，并添加环境变量<br><img src=\"/images/goframe_note_1.png\" alt></p>\n</li>\n<li><p>查看版本：<code>gf -version</code></p>\n</li>\n<li>更新model：<code>gf gen dao -c bin/config.toml -path . -r tf_</code></li>\n</ol>\n"},{"title":"Go语言基础","abbrlink":"go-note","date":"2018-06-09T13:57:06.000Z","updated":"2018-06-09T13:57:32.000Z","_content":"自学Go语言的过程漫长而坎坷，先记录一些基础知识。\n\n### 执行go文件\n`E:\\Go_WorkSpace>go run test.go`\n\n### 把go程序编译成exe文件\n`E:\\Go_WorkSpace>go build test.go`\n\n### 打印内容\n`fmt.Printf(\"Hello,World!\")`\n\n### switch语句中，多个case共用一组执行语句\n```shell\nswitch A{\n\tcase a,b,c:\n\t\t...\n\tcase d:\n\t\t...\n\tdefault :\n\t\t...\n}\n```\n\n### GoLand使用\n新部署项目后，需通过`go mod download` 下载第三方依赖包，如果报错，需设置Go Modules中的Proxy为：`https://goproxy.cn`\n\n### GoLand使用下载第三方依赖包\n1、 IDE-》setting-》Go-》Go Modules中，设置代理：https://goproxy.cn\n![](/images/goland_1.png)\n2、项目中，创建go.mod文件，包含需要引入的依赖包，\n如：导入 gin：require github.com/gin-gonic/gin latest\n在Terminal上，运行go mod download即可，系统会自动将版本号回填到go.mod中\n![](/images/goland_2.png)","source":"_posts/Golang/Go语言基础.md","raw":"---\ntitle: Go语言基础\ntags: [Go]\ncategories: Go\nabbrlink: 'go-note'\ndate: 2018-06-09 21:57:06\nupdated: 2018-06-09 21:57:32\n---\n自学Go语言的过程漫长而坎坷，先记录一些基础知识。\n\n### 执行go文件\n`E:\\Go_WorkSpace>go run test.go`\n\n### 把go程序编译成exe文件\n`E:\\Go_WorkSpace>go build test.go`\n\n### 打印内容\n`fmt.Printf(\"Hello,World!\")`\n\n### switch语句中，多个case共用一组执行语句\n```shell\nswitch A{\n\tcase a,b,c:\n\t\t...\n\tcase d:\n\t\t...\n\tdefault :\n\t\t...\n}\n```\n\n### GoLand使用\n新部署项目后，需通过`go mod download` 下载第三方依赖包，如果报错，需设置Go Modules中的Proxy为：`https://goproxy.cn`\n\n### GoLand使用下载第三方依赖包\n1、 IDE-》setting-》Go-》Go Modules中，设置代理：https://goproxy.cn\n![](/images/goland_1.png)\n2、项目中，创建go.mod文件，包含需要引入的依赖包，\n如：导入 gin：require github.com/gin-gonic/gin latest\n在Terminal上，运行go mod download即可，系统会自动将版本号回填到go.mod中\n![](/images/goland_2.png)","slug":"Golang/Go语言基础","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2t4000boshg3f0r4hcm","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>自学Go语言的过程漫长而坎坷，先记录一些基础知识。</p>\n<h3 id=\"执行go文件\"><a href=\"#执行go文件\" class=\"headerlink\" title=\"执行go文件\"></a>执行go文件</h3><p><code>E:\\Go_WorkSpace&gt;go run test.go</code></p>\n<h3 id=\"把go程序编译成exe文件\"><a href=\"#把go程序编译成exe文件\" class=\"headerlink\" title=\"把go程序编译成exe文件\"></a>把go程序编译成exe文件</h3><p><code>E:\\Go_WorkSpace&gt;go build test.go</code></p>\n<h3 id=\"打印内容\"><a href=\"#打印内容\" class=\"headerlink\" title=\"打印内容\"></a>打印内容</h3><p><code>fmt.Printf(\"Hello,World!\")</code></p>\n<h3 id=\"switch语句中，多个case共用一组执行语句\"><a href=\"#switch语句中，多个case共用一组执行语句\" class=\"headerlink\" title=\"switch语句中，多个case共用一组执行语句\"></a>switch语句中，多个case共用一组执行语句</h3><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">switch A{</span><br><span class=\"line\">\tcase a,b,c:</span><br><span class=\"line\">\t\t...</span><br><span class=\"line\">\tcase d:</span><br><span class=\"line\">\t\t...</span><br><span class=\"line\">\tdefault :</span><br><span class=\"line\">\t\t...</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"GoLand使用\"><a href=\"#GoLand使用\" class=\"headerlink\" title=\"GoLand使用\"></a>GoLand使用</h3><p>新部署项目后，需通过<code>go mod download</code> 下载第三方依赖包，如果报错，需设置Go Modules中的Proxy为：<code>https://goproxy.cn</code></p>\n<h3 id=\"GoLand使用下载第三方依赖包\"><a href=\"#GoLand使用下载第三方依赖包\" class=\"headerlink\" title=\"GoLand使用下载第三方依赖包\"></a>GoLand使用下载第三方依赖包</h3><p>1、 IDE-》setting-》Go-》Go Modules中，设置代理：<a href=\"https://goproxy.cn\">https://goproxy.cn</a><br><img src=\"/images/goland_1.png\" alt=\"\"><br>2、项目中，创建go.mod文件，包含需要引入的依赖包，<br>如：导入 gin：require github.com/gin-gonic/gin latest<br>在Terminal上，运行go mod download即可，系统会自动将版本号回填到go.mod中<br><img src=\"/images/goland_2.png\" alt=\"\"></p>\n","excerpt":"","more":"<p>自学Go语言的过程漫长而坎坷，先记录一些基础知识。</p>\n<h3 id=\"执行go文件\"><a href=\"#执行go文件\" class=\"headerlink\" title=\"执行go文件\"></a>执行go文件</h3><p><code>E:\\Go_WorkSpace&gt;go run test.go</code></p>\n<h3 id=\"把go程序编译成exe文件\"><a href=\"#把go程序编译成exe文件\" class=\"headerlink\" title=\"把go程序编译成exe文件\"></a>把go程序编译成exe文件</h3><p><code>E:\\Go_WorkSpace&gt;go build test.go</code></p>\n<h3 id=\"打印内容\"><a href=\"#打印内容\" class=\"headerlink\" title=\"打印内容\"></a>打印内容</h3><p><code>fmt.Printf(&quot;Hello,World!&quot;)</code></p>\n<h3 id=\"switch语句中，多个case共用一组执行语句\"><a href=\"#switch语句中，多个case共用一组执行语句\" class=\"headerlink\" title=\"switch语句中，多个case共用一组执行语句\"></a>switch语句中，多个case共用一组执行语句</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">switch A&#123;</span><br><span class=\"line\">\tcase a,b,c:</span><br><span class=\"line\">\t\t...</span><br><span class=\"line\">\tcase d:</span><br><span class=\"line\">\t\t...</span><br><span class=\"line\">\tdefault :</span><br><span class=\"line\">\t\t...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"GoLand使用\"><a href=\"#GoLand使用\" class=\"headerlink\" title=\"GoLand使用\"></a>GoLand使用</h3><p>新部署项目后，需通过<code>go mod download</code> 下载第三方依赖包，如果报错，需设置Go Modules中的Proxy为：<code>https://goproxy.cn</code></p>\n<h3 id=\"GoLand使用下载第三方依赖包\"><a href=\"#GoLand使用下载第三方依赖包\" class=\"headerlink\" title=\"GoLand使用下载第三方依赖包\"></a>GoLand使用下载第三方依赖包</h3><p>1、 IDE-》setting-》Go-》Go Modules中，设置代理：<a href=\"https://goproxy.cn\">https://goproxy.cn</a><br><img src=\"/images/goland_1.png\" alt><br>2、项目中，创建go.mod文件，包含需要引入的依赖包，<br>如：导入 gin：require github.com/gin-gonic/gin latest<br>在Terminal上，运行go mod download即可，系统会自动将版本号回填到go.mod中<br><img src=\"/images/goland_2.png\" alt></p>\n"},{"title":"Lua笔记","abbrlink":"lua-notes","date":"2022-11-13T15:02:00.000Z","updated":"2022-11-13T15:02:00.000Z","_content":"\n1. 进入交互式Lua：`lua -i`\n2. 退出交互式Lua：\n - linux：`ctrl+D`     \n - windows：`ctrl+z  或者 os.exit()`\n3. Lua的数组下标是从1开始的","source":"_posts/Lua/Lua笔记.md","raw":"---\ntitle: Lua笔记\ntags: [Lua]\ncategories: [Lua]\nabbrlink: 'lua-notes'\ndate: 2022-11-13 23:02:00\nupdated: 2022-11-13 23:02:00\n---\n\n1. 进入交互式Lua：`lua -i`\n2. 退出交互式Lua：\n - linux：`ctrl+D`     \n - windows：`ctrl+z  或者 os.exit()`\n3. Lua的数组下标是从1开始的","slug":"Lua/Lua笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2t5000goshg8sd17e8h","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li>进入交互式Lua：<code>lua -i</code></li>\n<li>退出交互式Lua：<ul>\n<li>linux：<code>ctrl+D</code>     </li>\n<li>windows：<code>ctrl+z  或者 os.exit()</code></li>\n</ul>\n</li>\n<li>Lua的数组下标是从1开始的</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li>进入交互式Lua：<code>lua -i</code></li>\n<li>退出交互式Lua：<ul>\n<li>linux：<code>ctrl+D</code>     </li>\n<li>windows：<code>ctrl+z  或者 os.exit()</code></li>\n</ul>\n</li>\n<li>Lua的数组下标是从1开始的</li>\n</ol>\n"},{"title":"Markdown笔记","abbrlink":"markdown-note","date":"2019-01-31T05:36:00.000Z","updated":"2019-01-31T06:36:00.000Z","_content":"\n1. 解决有序列表排序失败的问题，格式如下：\n```\n    1.[空格]测试文字1 \n    [Tab]-[空格]测试文字1-1 \n    [Tab]-[空格]测试文字1-2 \n    2.[空格]测试文字2 \n    [Tab]-[空格]测试文字2-1 \n    [Tab][Tab]-[空格]测试文字2-1-1 \n    [Tab][Tab]-[空格]测试文字2-1-2 \n    [Tab]-[空格]测试文字2-2\n```\n    代码段使用Tab退格","source":"_posts/Markdown/Markdown笔记.md","raw":"---\ntitle: Markdown笔记\ntags: [Markdown]\ncategories: Markdown\nabbrlink: 'markdown-note'\ndate: 2019-01-31 13:36:00\nupdated: 2019-01-31 14:36:00\n---\n\n1. 解决有序列表排序失败的问题，格式如下：\n```\n    1.[空格]测试文字1 \n    [Tab]-[空格]测试文字1-1 \n    [Tab]-[空格]测试文字1-2 \n    2.[空格]测试文字2 \n    [Tab]-[空格]测试文字2-1 \n    [Tab][Tab]-[空格]测试文字2-1-1 \n    [Tab][Tab]-[空格]测试文字2-1-2 \n    [Tab]-[空格]测试文字2-2\n```\n    代码段使用Tab退格","slug":"Markdown/Markdown笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2t6000ioshgh31wbgo0","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li>解决有序列表排序失败的问题，格式如下：<figure class=\"highlight css\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>.<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">1</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">1</span>-<span class=\"number\">1</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">1</span>-<span class=\"number\">2</span> </span><br><span class=\"line\"><span class=\"number\">2</span>.<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">2</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">2</span>-<span class=\"number\">1</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">2</span>-<span class=\"number\">1</span>-<span class=\"number\">1</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">2</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">2</span>-<span class=\"number\">2</span></span><br></pre></td></tr></tbody></table></figure>\n 代码段使用Tab退格</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li>解决有序列表排序失败的问题，格式如下：<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>.<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">1</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">1</span>-<span class=\"number\">1</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">1</span>-<span class=\"number\">2</span> </span><br><span class=\"line\"><span class=\"number\">2</span>.<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">2</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">2</span>-<span class=\"number\">1</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">2</span>-<span class=\"number\">1</span>-<span class=\"number\">1</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">2</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span> </span><br><span class=\"line\"><span class=\"selector-attr\">[Tab]</span>-<span class=\"selector-attr\">[空格]</span>测试文字<span class=\"number\">2</span>-<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n 代码段使用Tab退格</li>\n</ol>\n"},{"title":"MongoDB笔记","abbrlink":"mongodb-notes","date":"2021-12-31T06:48:49.000Z","updated":"2021-12-31T06:48:49.000Z","_content":"\n### 常用脚本\n1. 修改字段名\n```sql\ndb.getCollection('集合名').update({}, {$rename: {\"修改前字段名1\": \"修改后字段名1\", \"修改前字段名2\": \"修改后字段名2\"...}}, {multi:true})\n```\n `{multi:true}`表示 对该集合的所有数据生效\n\n2. 新增字段\n```sql\ndb.getCollection('集合名').update({}, {$set: {\"字段名1\": \"\", \"字段名2\": \"\"...}}, {multi:true})\n```\n `{multi:true}`表示 对该集合的所有数据生效\n\n3. 更新某个字段的值，使其与另一个字段的值相同\n```sql\ndb.getCollection('集合名').find().forEach(\n\tfunction(item){\n\t\tdb.getCollection('集合名').update({\"_id\":item._id}, {\"$set\":{\"字段名A\":item.字段名B}}, {})\n\t}\n)\n```\n\n4. 创建集合\n```sql\ndb.createCollection(\"集合名\");\n```\n\n\n5. 创建索引\n```sql\ndb.getCollection(\"集合名\").createIndex({\n    \"字段名\": NumberInt(\"1\"),\n    \"字段名\": NumberInt(\"-1\"),\n\t……\n    \"字段名\": NumberInt(\"1\")\n}, {\n    name: \"索引名\"\n});\n```\n1：升序，-1：降序\n\n\n6. 插入数据\n```sql\ndb.getCollection(\"集合名\").insert({\n\t\"字段1\": 值1,\n\t\"字段2\": 值2,\n\t……\n    \"字段n\": 值n\n});\n```","source":"_posts/MongoDB/MongoDB笔记.md","raw":"---\ntitle: MongoDB笔记\ntags: [MongoDB]\ncategories: MongoDB\nabbrlink: 'mongodb-notes'\ndate: 2021-12-31 14:48:49\nupdated: 2021-12-31 14:48:49\n---\n\n### 常用脚本\n1. 修改字段名\n```sql\ndb.getCollection('集合名').update({}, {$rename: {\"修改前字段名1\": \"修改后字段名1\", \"修改前字段名2\": \"修改后字段名2\"...}}, {multi:true})\n```\n `{multi:true}`表示 对该集合的所有数据生效\n\n2. 新增字段\n```sql\ndb.getCollection('集合名').update({}, {$set: {\"字段名1\": \"\", \"字段名2\": \"\"...}}, {multi:true})\n```\n `{multi:true}`表示 对该集合的所有数据生效\n\n3. 更新某个字段的值，使其与另一个字段的值相同\n```sql\ndb.getCollection('集合名').find().forEach(\n\tfunction(item){\n\t\tdb.getCollection('集合名').update({\"_id\":item._id}, {\"$set\":{\"字段名A\":item.字段名B}}, {})\n\t}\n)\n```\n\n4. 创建集合\n```sql\ndb.createCollection(\"集合名\");\n```\n\n\n5. 创建索引\n```sql\ndb.getCollection(\"集合名\").createIndex({\n    \"字段名\": NumberInt(\"1\"),\n    \"字段名\": NumberInt(\"-1\"),\n\t……\n    \"字段名\": NumberInt(\"1\")\n}, {\n    name: \"索引名\"\n});\n```\n1：升序，-1：降序\n\n\n6. 插入数据\n```sql\ndb.getCollection(\"集合名\").insert({\n\t\"字段1\": 值1,\n\t\"字段2\": 值2,\n\t……\n    \"字段n\": 值n\n});\n```","slug":"MongoDB/MongoDB笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2t8000noshg3ym28w9z","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"常用脚本\"><a href=\"#常用脚本\" class=\"headerlink\" title=\"常用脚本\"></a>常用脚本</h3><ol>\n<li><p>修改字段名</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.getCollection(<span class=\"string\">'集合名'</span>).<span class=\"keyword\">update</span>({}, {$rename: {\"修改前字段名1\": \"修改后字段名1\", \"修改前字段名2\": \"修改后字段名2\"...}}, {multi:<span class=\"literal\">true</span>})</span><br></pre></td></tr></tbody></table></figure>\n<p><code>{multi:true}</code>表示 对该集合的所有数据生效</p>\n</li>\n<li><p>新增字段</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.getCollection(<span class=\"string\">'集合名'</span>).<span class=\"keyword\">update</span>({}, {$<span class=\"keyword\">set</span>: {\"字段名1\": \"\", \"字段名2\": \"\"...}}, {multi:<span class=\"literal\">true</span>})</span><br></pre></td></tr></tbody></table></figure>\n<p><code>{multi:true}</code>表示 对该集合的所有数据生效</p>\n</li>\n<li><p>更新某个字段的值，使其与另一个字段的值相同</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.getCollection(<span class=\"string\">'集合名'</span>).find().forEach(</span><br><span class=\"line\">\t<span class=\"keyword\">function</span>(item){</span><br><span class=\"line\">\t\tdb.getCollection(<span class=\"string\">'集合名'</span>).<span class=\"keyword\">update</span>({\"_id\":item._id}, {\"$set\":{\"字段名A\":item.字段名B}}, {})</span><br><span class=\"line\">\t}</span><br><span class=\"line\">)</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>创建集合</p>\n<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.createCollection(\"集合名\");</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ol>\n<ol>\n<li>创建索引<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.getCollection(\"集合名\").createIndex({</span><br><span class=\"line\">    \"字段名\": NumberInt(\"1\"),</span><br><span class=\"line\">    \"字段名\": NumberInt(\"-1\"),</span><br><span class=\"line\">\t……</span><br><span class=\"line\">    \"字段名\": NumberInt(\"1\")</span><br><span class=\"line\">}, {</span><br><span class=\"line\">    name: \"索引名\"</span><br><span class=\"line\">});</span><br></pre></td></tr></tbody></table></figure>\n1：升序，-1：降序</li>\n</ol>\n<ol>\n<li>插入数据<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.getCollection(\"集合名\").<span class=\"keyword\">insert</span>({</span><br><span class=\"line\">\t\"字段1\": 值<span class=\"number\">1</span>,</span><br><span class=\"line\">\t\"字段2\": 值<span class=\"number\">2</span>,</span><br><span class=\"line\">\t……</span><br><span class=\"line\">    \"字段n\": 值n</span><br><span class=\"line\">});</span><br></pre></td></tr></tbody></table></figure></li>\n</ol>\n","excerpt":"","more":"<h3 id=\"常用脚本\"><a href=\"#常用脚本\" class=\"headerlink\" title=\"常用脚本\"></a>常用脚本</h3><ol>\n<li><p>修改字段名</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.getCollection(<span class=\"string\">&#x27;集合名&#x27;</span>).<span class=\"keyword\">update</span>(&#123;&#125;, &#123;$rename: &#123;&quot;修改前字段名1&quot;: &quot;修改后字段名1&quot;, &quot;修改前字段名2&quot;: &quot;修改后字段名2&quot;...&#125;&#125;, &#123;multi:<span class=\"literal\">true</span>&#125;)</span><br></pre></td></tr></table></figure>\n<p><code>&#123;multi:true&#125;</code>表示 对该集合的所有数据生效</p>\n</li>\n<li><p>新增字段</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.getCollection(<span class=\"string\">&#x27;集合名&#x27;</span>).<span class=\"keyword\">update</span>(&#123;&#125;, &#123;$<span class=\"keyword\">set</span>: &#123;&quot;字段名1&quot;: &quot;&quot;, &quot;字段名2&quot;: &quot;&quot;...&#125;&#125;, &#123;multi:<span class=\"literal\">true</span>&#125;)</span><br></pre></td></tr></table></figure>\n<p><code>&#123;multi:true&#125;</code>表示 对该集合的所有数据生效</p>\n</li>\n<li><p>更新某个字段的值，使其与另一个字段的值相同</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.getCollection(<span class=\"string\">&#x27;集合名&#x27;</span>).find().forEach(</span><br><span class=\"line\">\t<span class=\"keyword\">function</span>(item)&#123;</span><br><span class=\"line\">\t\tdb.getCollection(<span class=\"string\">&#x27;集合名&#x27;</span>).<span class=\"keyword\">update</span>(&#123;&quot;_id&quot;:item._id&#125;, &#123;&quot;$set&quot;:&#123;&quot;字段名A&quot;:item.字段名B&#125;&#125;, &#123;&#125;)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>创建集合</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.createCollection(&quot;集合名&quot;);</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<ol>\n<li>创建索引<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.getCollection(&quot;集合名&quot;).createIndex(&#123;</span><br><span class=\"line\">    &quot;字段名&quot;: NumberInt(&quot;1&quot;),</span><br><span class=\"line\">    &quot;字段名&quot;: NumberInt(&quot;-1&quot;),</span><br><span class=\"line\">\t……</span><br><span class=\"line\">    &quot;字段名&quot;: NumberInt(&quot;1&quot;)</span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">    name: &quot;索引名&quot;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n1：升序，-1：降序</li>\n</ol>\n<ol>\n<li>插入数据<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.getCollection(&quot;集合名&quot;).<span class=\"keyword\">insert</span>(&#123;</span><br><span class=\"line\">\t&quot;字段1&quot;: 值<span class=\"number\">1</span>,</span><br><span class=\"line\">\t&quot;字段2&quot;: 值<span class=\"number\">2</span>,</span><br><span class=\"line\">\t……</span><br><span class=\"line\">    &quot;字段n&quot;: 值n</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"B树与B+树","abbrlink":"btree-and-b+tree","date":"2022-03-20T20:12:21.000Z","_content":"\n\n### B+Tree对比BTree的优点\n- 磁盘读写代价更低\n一般来说B+Tree比BTree更适合实现外存的索引结构，因为存储引擎的设计专家巧妙的利用了外存（磁盘）的存储结构，即磁盘的最小存储单位是扇区（sector），而操作系统的块（block）通常是整数倍的sector，操作系统以页（page）为单位管理内存，一页（page）通常默认为4K，数据库的页通常设置为操作系统页的整数倍，因此索引结构的节点被设计为一个页的大小，然后利用外存的“预读取”原则，每次读取的时候，把整个节点的数据读取到内存中，然后在内存中查找，已知内存的读取速度是外存读取I/O速度的几百倍，那么提升查找速度的关键就在于尽可能少的磁盘I/O，那么可以知道，每个节点中的key个数越多，那么树的高度越小，需要I/O的次数越少，因此一般来说B+Tree比BTree更快，因为B+Tree的非叶节点中不存储data，就可以存储更多的key。\n- 查询速度更稳定\n由于B+Tree非叶子节点不存储数据（data），因此所有的数据都要查询至叶子节点，而叶子节点的高度都是相同的，B+Tree的高度一般都在2~4层，因此所有数据的查询速度都是一样的。\n\n\n### 参考文档\n  https://blog.csdn.net/u013235478/article/details/50625677","source":"_posts/MySQL/B树与B+树.md","raw":"---\ntitle: B树与B+树\nabbrlink: 'btree-and-b+tree'\ntags:  [MySQL]\ncategories:  MySQL\ndate: 2022-03-21 04:12:21\n---\n\n\n### B+Tree对比BTree的优点\n- 磁盘读写代价更低\n一般来说B+Tree比BTree更适合实现外存的索引结构，因为存储引擎的设计专家巧妙的利用了外存（磁盘）的存储结构，即磁盘的最小存储单位是扇区（sector），而操作系统的块（block）通常是整数倍的sector，操作系统以页（page）为单位管理内存，一页（page）通常默认为4K，数据库的页通常设置为操作系统页的整数倍，因此索引结构的节点被设计为一个页的大小，然后利用外存的“预读取”原则，每次读取的时候，把整个节点的数据读取到内存中，然后在内存中查找，已知内存的读取速度是外存读取I/O速度的几百倍，那么提升查找速度的关键就在于尽可能少的磁盘I/O，那么可以知道，每个节点中的key个数越多，那么树的高度越小，需要I/O的次数越少，因此一般来说B+Tree比BTree更快，因为B+Tree的非叶节点中不存储data，就可以存储更多的key。\n- 查询速度更稳定\n由于B+Tree非叶子节点不存储数据（data），因此所有的数据都要查询至叶子节点，而叶子节点的高度都是相同的，B+Tree的高度一般都在2~4层，因此所有数据的查询速度都是一样的。\n\n\n### 参考文档\n  https://blog.csdn.net/u013235478/article/details/50625677","slug":"MySQL/B树与B+树","published":1,"updated":"2024-05-21T03:19:18.094Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2t9000qoshg5gwu1h8b","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"B-Tree对比BTree的优点\"><a href=\"#B-Tree对比BTree的优点\" class=\"headerlink\" title=\"B+Tree对比BTree的优点\"></a>B+Tree对比BTree的优点</h3><ul>\n<li>磁盘读写代价更低<br>一般来说B+Tree比BTree更适合实现外存的索引结构，因为存储引擎的设计专家巧妙的利用了外存（磁盘）的存储结构，即磁盘的最小存储单位是扇区（sector），而操作系统的块（block）通常是整数倍的sector，操作系统以页（page）为单位管理内存，一页（page）通常默认为4K，数据库的页通常设置为操作系统页的整数倍，因此索引结构的节点被设计为一个页的大小，然后利用外存的“预读取”原则，每次读取的时候，把整个节点的数据读取到内存中，然后在内存中查找，已知内存的读取速度是外存读取I/O速度的几百倍，那么提升查找速度的关键就在于尽可能少的磁盘I/O，那么可以知道，每个节点中的key个数越多，那么树的高度越小，需要I/O的次数越少，因此一般来说B+Tree比BTree更快，因为B+Tree的非叶节点中不存储data，就可以存储更多的key。</li>\n<li>查询速度更稳定<br>由于B+Tree非叶子节点不存储数据（data），因此所有的数据都要查询至叶子节点，而叶子节点的高度都是相同的，B+Tree的高度一般都在2~4层，因此所有数据的查询速度都是一样的。</li>\n</ul>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p>  <a href=\"https://blog.csdn.net/u013235478/article/details/50625677\">https://blog.csdn.net/u013235478/article/details/50625677</a></p>\n","excerpt":"","more":"<h3 id=\"B-Tree对比BTree的优点\"><a href=\"#B-Tree对比BTree的优点\" class=\"headerlink\" title=\"B+Tree对比BTree的优点\"></a>B+Tree对比BTree的优点</h3><ul>\n<li>磁盘读写代价更低<br>一般来说B+Tree比BTree更适合实现外存的索引结构，因为存储引擎的设计专家巧妙的利用了外存（磁盘）的存储结构，即磁盘的最小存储单位是扇区（sector），而操作系统的块（block）通常是整数倍的sector，操作系统以页（page）为单位管理内存，一页（page）通常默认为4K，数据库的页通常设置为操作系统页的整数倍，因此索引结构的节点被设计为一个页的大小，然后利用外存的“预读取”原则，每次读取的时候，把整个节点的数据读取到内存中，然后在内存中查找，已知内存的读取速度是外存读取I/O速度的几百倍，那么提升查找速度的关键就在于尽可能少的磁盘I/O，那么可以知道，每个节点中的key个数越多，那么树的高度越小，需要I/O的次数越少，因此一般来说B+Tree比BTree更快，因为B+Tree的非叶节点中不存储data，就可以存储更多的key。</li>\n<li>查询速度更稳定<br>由于B+Tree非叶子节点不存储数据（data），因此所有的数据都要查询至叶子节点，而叶子节点的高度都是相同的，B+Tree的高度一般都在2~4层，因此所有数据的查询速度都是一样的。</li>\n</ul>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p>  <a href=\"https://blog.csdn.net/u013235478/article/details/50625677\">https://blog.csdn.net/u013235478/article/details/50625677</a></p>\n"},{"title":"DOS命令进入MySQL","abbrlink":"use-mysql-on-dos","date":"2022-05-11T09:08:36.000Z","updated":"2022-05-11T09:08:36.000Z","_content":"### 1. 先进入mysql安装目录下的bin目录中\n![](/images/doc_mysql_1.png)\n### 2. 执行命令\n`mysql -hlocalhost -uroot -p`\n按要求输入密码，回车即可。\n![](/images/doc_mysql_2.png)\n### 3. 执行命令操作数据库\n如：显示所有的数据库\n![](/images/doc_mysql_3.png)\n### 4. 退出mysql数据库\nexit回车即可\n![](/images/doc_mysql_4.png)","source":"_posts/MySQL/DOS命令进入MySQL.md","raw":"---\ntitle: DOS命令进入MySQL\ntags: [DOS命令]\ncategories: MySQL\nabbrlink: 'use-mysql-on-dos'\ndate: 2022-05-11 17:08:36\nupdated: 2022-05-11 17:08:36\n---\n### 1. 先进入mysql安装目录下的bin目录中\n![](/images/doc_mysql_1.png)\n### 2. 执行命令\n`mysql -hlocalhost -uroot -p`\n按要求输入密码，回车即可。\n![](/images/doc_mysql_2.png)\n### 3. 执行命令操作数据库\n如：显示所有的数据库\n![](/images/doc_mysql_3.png)\n### 4. 退出mysql数据库\nexit回车即可\n![](/images/doc_mysql_4.png)","slug":"MySQL/DOS命令进入MySQL","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tb000voshg1nf6ev7s","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-先进入mysql安装目录下的bin目录中\"><a href=\"#1-先进入mysql安装目录下的bin目录中\" class=\"headerlink\" title=\"1. 先进入mysql安装目录下的bin目录中\"></a>1. 先进入mysql安装目录下的bin目录中</h3><p><img src=\"/images/doc_mysql_1.png\" alt=\"\"></p>\n<h3 id=\"2-执行命令\"><a href=\"#2-执行命令\" class=\"headerlink\" title=\"2. 执行命令\"></a>2. 执行命令</h3><p><code>mysql -hlocalhost -uroot -p</code><br>按要求输入密码，回车即可。<br><img src=\"/images/doc_mysql_2.png\" alt=\"\"></p>\n<h3 id=\"3-执行命令操作数据库\"><a href=\"#3-执行命令操作数据库\" class=\"headerlink\" title=\"3. 执行命令操作数据库\"></a>3. 执行命令操作数据库</h3><p>如：显示所有的数据库<br><img src=\"/images/doc_mysql_3.png\" alt=\"\"></p>\n<h3 id=\"4-退出mysql数据库\"><a href=\"#4-退出mysql数据库\" class=\"headerlink\" title=\"4. 退出mysql数据库\"></a>4. 退出mysql数据库</h3><p>exit回车即可<br><img src=\"/images/doc_mysql_4.png\" alt=\"\"></p>\n","excerpt":"","more":"<h3 id=\"1-先进入mysql安装目录下的bin目录中\"><a href=\"#1-先进入mysql安装目录下的bin目录中\" class=\"headerlink\" title=\"1. 先进入mysql安装目录下的bin目录中\"></a>1. 先进入mysql安装目录下的bin目录中</h3><p><img src=\"/images/doc_mysql_1.png\" alt></p>\n<h3 id=\"2-执行命令\"><a href=\"#2-执行命令\" class=\"headerlink\" title=\"2. 执行命令\"></a>2. 执行命令</h3><p><code>mysql -hlocalhost -uroot -p</code><br>按要求输入密码，回车即可。<br><img src=\"/images/doc_mysql_2.png\" alt></p>\n<h3 id=\"3-执行命令操作数据库\"><a href=\"#3-执行命令操作数据库\" class=\"headerlink\" title=\"3. 执行命令操作数据库\"></a>3. 执行命令操作数据库</h3><p>如：显示所有的数据库<br><img src=\"/images/doc_mysql_3.png\" alt></p>\n<h3 id=\"4-退出mysql数据库\"><a href=\"#4-退出mysql数据库\" class=\"headerlink\" title=\"4. 退出mysql数据库\"></a>4. 退出mysql数据库</h3><p>exit回车即可<br><img src=\"/images/doc_mysql_4.png\" alt></p>\n"},{"title":"Linux下操作MySQL","abbrlink":"use-mysql-on-linux","date":"2019-09-23T10:10:20.000Z","updated":"2019-09-23T10:10:20.000Z","_content":"### 1. 登录MySQL数据库\n`mysql -uroot -p`\n![](/images/use_mysql_on_linux_1.png)\n\n### 2. 退出MySQL\n`quit或者exit`\n![](/images/use_mysql_on_linux_2.png)\n\n### 3. 查看MySQL版本(四种方法)\n\n- 在终端下执行： `mysql -V`\n![](/images/show_mysql_version_on_linux_1.png)\n\n- 在help中查找 `mysql --help | grep Distrib`\n![](/images/show_mysql_version_on_linux_2.png)\n\n- 在mysql 里查看 `select version()`\n![](/images/show_mysql_version_on_linux_3.png)\n\n- 在mysql 里查看 `status`\n![](/images/show_mysql_version_on_linux_4.png)","source":"_posts/MySQL/Linux下操作MySQL.md","raw":"---\ntitle: Linux下操作MySQL\ntags: [Linux]\ncategories: MySQL\nabbrlink: 'use-mysql-on-linux'\ndate: 2019-09-23 18:10:20\nupdated: 2019-09-23 18:10:20\n---\n### 1. 登录MySQL数据库\n`mysql -uroot -p`\n![](/images/use_mysql_on_linux_1.png)\n\n### 2. 退出MySQL\n`quit或者exit`\n![](/images/use_mysql_on_linux_2.png)\n\n### 3. 查看MySQL版本(四种方法)\n\n- 在终端下执行： `mysql -V`\n![](/images/show_mysql_version_on_linux_1.png)\n\n- 在help中查找 `mysql --help | grep Distrib`\n![](/images/show_mysql_version_on_linux_2.png)\n\n- 在mysql 里查看 `select version()`\n![](/images/show_mysql_version_on_linux_3.png)\n\n- 在mysql 里查看 `status`\n![](/images/show_mysql_version_on_linux_4.png)","slug":"MySQL/Linux下操作MySQL","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tc000yoshgb8ke3yb4","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-登录MySQL数据库\"><a href=\"#1-登录MySQL数据库\" class=\"headerlink\" title=\"1. 登录MySQL数据库\"></a>1. 登录MySQL数据库</h3><p><code>mysql -uroot -p</code><br><img src=\"/images/use_mysql_on_linux_1.png\" alt=\"\"></p>\n<h3 id=\"2-退出MySQL\"><a href=\"#2-退出MySQL\" class=\"headerlink\" title=\"2. 退出MySQL\"></a>2. 退出MySQL</h3><p><code>quit或者exit</code><br><img src=\"/images/use_mysql_on_linux_2.png\" alt=\"\"></p>\n<h3 id=\"3-查看MySQL版本-四种方法\"><a href=\"#3-查看MySQL版本-四种方法\" class=\"headerlink\" title=\"3. 查看MySQL版本(四种方法)\"></a>3. 查看MySQL版本(四种方法)</h3><ul>\n<li><p>在终端下执行： <code>mysql -V</code><br><img src=\"/images/show_mysql_version_on_linux_1.png\" alt=\"\"></p>\n</li>\n<li><p>在help中查找 <code>mysql --help | grep Distrib</code><br><img src=\"/images/show_mysql_version_on_linux_2.png\" alt=\"\"></p>\n</li>\n<li><p>在mysql 里查看 <code>select version()</code><br><img src=\"/images/show_mysql_version_on_linux_3.png\" alt=\"\"></p>\n</li>\n<li><p>在mysql 里查看 <code>status</code><br><img src=\"/images/show_mysql_version_on_linux_4.png\" alt=\"\"></p>\n</li>\n</ul>\n","excerpt":"","more":"<h3 id=\"1-登录MySQL数据库\"><a href=\"#1-登录MySQL数据库\" class=\"headerlink\" title=\"1. 登录MySQL数据库\"></a>1. 登录MySQL数据库</h3><p><code>mysql -uroot -p</code><br><img src=\"/images/use_mysql_on_linux_1.png\" alt></p>\n<h3 id=\"2-退出MySQL\"><a href=\"#2-退出MySQL\" class=\"headerlink\" title=\"2. 退出MySQL\"></a>2. 退出MySQL</h3><p><code>quit或者exit</code><br><img src=\"/images/use_mysql_on_linux_2.png\" alt></p>\n<h3 id=\"3-查看MySQL版本-四种方法\"><a href=\"#3-查看MySQL版本-四种方法\" class=\"headerlink\" title=\"3. 查看MySQL版本(四种方法)\"></a>3. 查看MySQL版本(四种方法)</h3><ul>\n<li><p>在终端下执行： <code>mysql -V</code><br><img src=\"/images/show_mysql_version_on_linux_1.png\" alt></p>\n</li>\n<li><p>在help中查找 <code>mysql --help | grep Distrib</code><br><img src=\"/images/show_mysql_version_on_linux_2.png\" alt></p>\n</li>\n<li><p>在mysql 里查看 <code>select version()</code><br><img src=\"/images/show_mysql_version_on_linux_3.png\" alt></p>\n</li>\n<li><p>在mysql 里查看 <code>status</code><br><img src=\"/images/show_mysql_version_on_linux_4.png\" alt></p>\n</li>\n</ul>\n"},{"title":"MySQL中的JSON","abbrlink":"mysql-json","date":"2022-05-20T03:30:42.000Z","updated":"2022-05-20T03:30:42.000Z","_content":"<div class=\"note info\">以MySQL为代表的关系型数据库，5.7.8之前没有JSON这种数据类型，只能以varchar或者text形式变相的支持JSON，存取键值极不方便；5.7.8开始有JSON数据类型，有专门语法支持键值的存取，易用性得到很大提升。下面说说json类型的使用。</div>\n\n### json类型的使用\n\n1. 先看下版本号，确定是否支持json类型\n![](/images/mysql_json_1.png)\n2. 创建表user，其中extdata字段为json类型\n![](/images/mysql_json_2.png)\n3. 往表user里插入一条数据\n![](/images/mysql_json_3.png)\n4. 设置extdata字段的值\n![](/images/mysql_json_4.png)\n5. 查看数据\n![](/images/mysql_json_5.png)\n6. 查看json字段的指定项：`json_extract(字段名,'$.xx')`\n![](/images/mysql_json_6.png)\n7. explain看下\n![](/images/mysql_json_7.png)\n8. 以json字段中的指定项来添加字段\n![](/images/mysql_json_8.png)\n9. 派生字段添加索引\n![](/images/mysql_json_9.png)\n\n### json函数与find_in_set对比\n1. 新建表test\n```\nCREATE TABLE test (\nid int(10) unsigned NOT NULL AUTO_INCREMENT,\nmember_ids varchar(255) DEFAULT NULL,\nmanager_ids json DEFAULT NULL,\nPRIMARY KEY (id)\n) ENGINE=InnoDB AUTO_INCREMENT=50159 DEFAULT CHARSET=utf8mb4;\n```\n2. 并插入五万条数据\n![](/images/mysql_json_10.png)\n![](/images/mysql_json_11.png)\n\n3. 对比查询效率\n```\nselect SQL_NO_CACHE * from test where FIND_IN_SET(2,member_ids);\nselect SQL_NO_CACHE * from test where json_contains(manager_ids,'2');\n```\n![](/images/mysql_json_12.png)\n![](/images/mysql_json_13.png)\n![](/images/mysql_json_14.png)\nfind_in_set稳定性不好，时间在0.09s到0.69s之间变动\njson_contains稳定在0.14s左右，第二个字段必须是字符串\n如果连表的话，要使用cast(b.id as char)\n```\nSELECT\n\ta.id,\n\ta.NAME,\n\tgroup_concat( DISTINCT ( b.NAME ) ORDER BY b.id SEPARATOR '、' ) managerNames\nFROM\n\ta\n\tLEFT JOIN b ON json_contains( a.manager_ids, cast(b.id as char) )\nGROUP BY\n\t`a`.`id` \nORDER BY\n\t`a`.`id` ASC \n\tLIMIT 0,\n\t10\n```\n综上，对于多id存储，还是使用逗号分隔的字符串会好一些，json数据使用json类型来存储会更方便。","source":"_posts/MySQL/MySQL中的JSON.md","raw":"---\ntitle: MySQL中的JSON\ntags: [JSON]\ncategories: MySQL\nabbrlink: 'mysql-json'\ndate: 2022-05-20 11:30:42\nupdated: 2022-05-20 11:30:42\n---\n<div class=\"note info\">以MySQL为代表的关系型数据库，5.7.8之前没有JSON这种数据类型，只能以varchar或者text形式变相的支持JSON，存取键值极不方便；5.7.8开始有JSON数据类型，有专门语法支持键值的存取，易用性得到很大提升。下面说说json类型的使用。</div>\n\n### json类型的使用\n\n1. 先看下版本号，确定是否支持json类型\n![](/images/mysql_json_1.png)\n2. 创建表user，其中extdata字段为json类型\n![](/images/mysql_json_2.png)\n3. 往表user里插入一条数据\n![](/images/mysql_json_3.png)\n4. 设置extdata字段的值\n![](/images/mysql_json_4.png)\n5. 查看数据\n![](/images/mysql_json_5.png)\n6. 查看json字段的指定项：`json_extract(字段名,'$.xx')`\n![](/images/mysql_json_6.png)\n7. explain看下\n![](/images/mysql_json_7.png)\n8. 以json字段中的指定项来添加字段\n![](/images/mysql_json_8.png)\n9. 派生字段添加索引\n![](/images/mysql_json_9.png)\n\n### json函数与find_in_set对比\n1. 新建表test\n```\nCREATE TABLE test (\nid int(10) unsigned NOT NULL AUTO_INCREMENT,\nmember_ids varchar(255) DEFAULT NULL,\nmanager_ids json DEFAULT NULL,\nPRIMARY KEY (id)\n) ENGINE=InnoDB AUTO_INCREMENT=50159 DEFAULT CHARSET=utf8mb4;\n```\n2. 并插入五万条数据\n![](/images/mysql_json_10.png)\n![](/images/mysql_json_11.png)\n\n3. 对比查询效率\n```\nselect SQL_NO_CACHE * from test where FIND_IN_SET(2,member_ids);\nselect SQL_NO_CACHE * from test where json_contains(manager_ids,'2');\n```\n![](/images/mysql_json_12.png)\n![](/images/mysql_json_13.png)\n![](/images/mysql_json_14.png)\nfind_in_set稳定性不好，时间在0.09s到0.69s之间变动\njson_contains稳定在0.14s左右，第二个字段必须是字符串\n如果连表的话，要使用cast(b.id as char)\n```\nSELECT\n\ta.id,\n\ta.NAME,\n\tgroup_concat( DISTINCT ( b.NAME ) ORDER BY b.id SEPARATOR '、' ) managerNames\nFROM\n\ta\n\tLEFT JOIN b ON json_contains( a.manager_ids, cast(b.id as char) )\nGROUP BY\n\t`a`.`id` \nORDER BY\n\t`a`.`id` ASC \n\tLIMIT 0,\n\t10\n```\n综上，对于多id存储，还是使用逗号分隔的字符串会好一些，json数据使用json类型来存储会更方便。","slug":"MySQL/MySQL中的JSON","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2td0013oshg4xiu70d8","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">以MySQL为代表的关系型数据库，5.7.8之前没有JSON这种数据类型，只能以varchar或者text形式变相的支持JSON，存取键值极不方便；5.7.8开始有JSON数据类型，有专门语法支持键值的存取，易用性得到很大提升。下面说说json类型的使用。</div>\n\n<h3 id=\"json类型的使用\"><a href=\"#json类型的使用\" class=\"headerlink\" title=\"json类型的使用\"></a>json类型的使用</h3><ol>\n<li>先看下版本号，确定是否支持json类型<br><img src=\"/images/mysql_json_1.png\" alt=\"\"></li>\n<li>创建表user，其中extdata字段为json类型<br><img src=\"/images/mysql_json_2.png\" alt=\"\"></li>\n<li>往表user里插入一条数据<br><img src=\"/images/mysql_json_3.png\" alt=\"\"></li>\n<li>设置extdata字段的值<br><img src=\"/images/mysql_json_4.png\" alt=\"\"></li>\n<li>查看数据<br><img src=\"/images/mysql_json_5.png\" alt=\"\"></li>\n<li>查看json字段的指定项：<code>json_extract(字段名,'$.xx')</code><br><img src=\"/images/mysql_json_6.png\" alt=\"\"></li>\n<li>explain看下<br><img src=\"/images/mysql_json_7.png\" alt=\"\"></li>\n<li>以json字段中的指定项来添加字段<br><img src=\"/images/mysql_json_8.png\" alt=\"\"></li>\n<li>派生字段添加索引<br><img src=\"/images/mysql_json_9.png\" alt=\"\"></li>\n</ol>\n<h3 id=\"json函数与find-in-set对比\"><a href=\"#json函数与find-in-set对比\" class=\"headerlink\" title=\"json函数与find_in_set对比\"></a>json函数与find_in_set对比</h3><ol>\n<li>新建表test<figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> test (</span><br><span class=\"line\">id <span class=\"type\">int</span>(<span class=\"number\">10</span>) unsigned <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">member_ids <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">manager_ids <span class=\"type\">json</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\"><span class=\"keyword\">PRIMARY KEY</span> (id)</span><br><span class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=<span class=\"number\">50159</span> <span class=\"keyword\">DEFAULT</span> CHARSET=utf8mb4;</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>并插入五万条数据<br><img src=\"/images/mysql_json_10.png\" alt=\"\"><br><img src=\"/images/mysql_json_11.png\" alt=\"\"></p>\n</li>\n<li><p>对比查询效率</p>\n<figure class=\"highlight csharp\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> SQL_NO_CACHE * <span class=\"function\"><span class=\"keyword\">from</span> test <span class=\"keyword\">where</span> <span class=\"title\">FIND_IN_SET</span>(<span class=\"params\"><span class=\"number\">2</span>,member_ids</span>)</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> SQL_NO_CACHE * <span class=\"function\"><span class=\"keyword\">from</span> test <span class=\"keyword\">where</span> <span class=\"title\">json_contains</span>(<span class=\"params\">manager_ids,<span class=\"string\">'2'</span></span>)</span>;</span><br></pre></td></tr></tbody></table></figure>\n<p><img src=\"/images/mysql_json_12.png\" alt=\"\"><br><img src=\"/images/mysql_json_13.png\" alt=\"\"><br><img src=\"/images/mysql_json_14.png\" alt=\"\"><br>find_in_set稳定性不好，时间在0.09s到0.69s之间变动<br>json_contains稳定在0.14s左右，第二个字段必须是字符串<br>如果连表的话，要使用cast(b.id as char)</p>\n<figure class=\"highlight n1ql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\ta.id,</span><br><span class=\"line\">\ta.NAME,</span><br><span class=\"line\">\tgroup_concat( <span class=\"keyword\">DISTINCT</span> ( b.NAME ) <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> b.id SEPARATOR <span class=\"string\">'、'</span> ) managerNames</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\ta</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> b <span class=\"keyword\">ON</span> json_contains( a.manager_ids, <span class=\"keyword\">cast</span>(b.id <span class=\"keyword\">as</span> char) )</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t<span class=\"symbol\">`a`</span>.<span class=\"symbol\">`id`</span> </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t<span class=\"symbol\">`a`</span>.<span class=\"symbol\">`id`</span> <span class=\"keyword\">ASC</span> </span><br><span class=\"line\">\t<span class=\"keyword\">LIMIT</span> <span class=\"number\">0</span>,</span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br></pre></td></tr></tbody></table></figure>\n<p>综上，对于多id存储，还是使用逗号分隔的字符串会好一些，json数据使用json类型来存储会更方便。</p>\n</li>\n</ol>\n","excerpt":"","more":"<div class=\"note info\">以MySQL为代表的关系型数据库，5.7.8之前没有JSON这种数据类型，只能以varchar或者text形式变相的支持JSON，存取键值极不方便；5.7.8开始有JSON数据类型，有专门语法支持键值的存取，易用性得到很大提升。下面说说json类型的使用。</div>\n\n<h3 id=\"json类型的使用\"><a href=\"#json类型的使用\" class=\"headerlink\" title=\"json类型的使用\"></a>json类型的使用</h3><ol>\n<li>先看下版本号，确定是否支持json类型<br><img src=\"/images/mysql_json_1.png\" alt></li>\n<li>创建表user，其中extdata字段为json类型<br><img src=\"/images/mysql_json_2.png\" alt></li>\n<li>往表user里插入一条数据<br><img src=\"/images/mysql_json_3.png\" alt></li>\n<li>设置extdata字段的值<br><img src=\"/images/mysql_json_4.png\" alt></li>\n<li>查看数据<br><img src=\"/images/mysql_json_5.png\" alt></li>\n<li>查看json字段的指定项：<code>json_extract(字段名,&#39;$.xx&#39;)</code><br><img src=\"/images/mysql_json_6.png\" alt></li>\n<li>explain看下<br><img src=\"/images/mysql_json_7.png\" alt></li>\n<li>以json字段中的指定项来添加字段<br><img src=\"/images/mysql_json_8.png\" alt></li>\n<li>派生字段添加索引<br><img src=\"/images/mysql_json_9.png\" alt></li>\n</ol>\n<h3 id=\"json函数与find-in-set对比\"><a href=\"#json函数与find-in-set对比\" class=\"headerlink\" title=\"json函数与find_in_set对比\"></a>json函数与find_in_set对比</h3><ol>\n<li>新建表test<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> test (</span><br><span class=\"line\">id <span class=\"type\">int</span>(<span class=\"number\">10</span>) unsigned <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">member_ids <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\">manager_ids <span class=\"type\">json</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">NULL</span>,</span><br><span class=\"line\"><span class=\"keyword\">PRIMARY KEY</span> (id)</span><br><span class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=<span class=\"number\">50159</span> <span class=\"keyword\">DEFAULT</span> CHARSET=utf8mb4;</span><br></pre></td></tr></table></figure></li>\n<li><p>并插入五万条数据<br><img src=\"/images/mysql_json_10.png\" alt><br><img src=\"/images/mysql_json_11.png\" alt></p>\n</li>\n<li><p>对比查询效率</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> SQL_NO_CACHE * <span class=\"function\"><span class=\"keyword\">from</span> test <span class=\"keyword\">where</span> <span class=\"title\">FIND_IN_SET</span>(<span class=\"params\"><span class=\"number\">2</span>,member_ids</span>)</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> SQL_NO_CACHE * <span class=\"function\"><span class=\"keyword\">from</span> test <span class=\"keyword\">where</span> <span class=\"title\">json_contains</span>(<span class=\"params\">manager_ids,<span class=\"string\">&#x27;2&#x27;</span></span>)</span>;</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/mysql_json_12.png\" alt><br><img src=\"/images/mysql_json_13.png\" alt><br><img src=\"/images/mysql_json_14.png\" alt><br>find_in_set稳定性不好，时间在0.09s到0.69s之间变动<br>json_contains稳定在0.14s左右，第二个字段必须是字符串<br>如果连表的话，要使用cast(b.id as char)</p>\n<figure class=\"highlight n1ql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span></span><br><span class=\"line\">\ta.id,</span><br><span class=\"line\">\ta.NAME,</span><br><span class=\"line\">\tgroup_concat( <span class=\"keyword\">DISTINCT</span> ( b.NAME ) <span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> b.id SEPARATOR <span class=\"string\">&#x27;、&#x27;</span> ) managerNames</span><br><span class=\"line\"><span class=\"keyword\">FROM</span></span><br><span class=\"line\">\ta</span><br><span class=\"line\">\t<span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> b <span class=\"keyword\">ON</span> json_contains( a.manager_ids, <span class=\"keyword\">cast</span>(b.id <span class=\"keyword\">as</span> char) )</span><br><span class=\"line\"><span class=\"keyword\">GROUP</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t<span class=\"symbol\">`a`</span>.<span class=\"symbol\">`id`</span> </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span></span><br><span class=\"line\">\t<span class=\"symbol\">`a`</span>.<span class=\"symbol\">`id`</span> <span class=\"keyword\">ASC</span> </span><br><span class=\"line\">\t<span class=\"keyword\">LIMIT</span> <span class=\"number\">0</span>,</span><br><span class=\"line\">\t<span class=\"number\">10</span></span><br></pre></td></tr></table></figure>\n<p>综上，对于多id存储，还是使用逗号分隔的字符串会好一些，json数据使用json类型来存储会更方便。</p>\n</li>\n</ol>\n"},{"title":"MySQL中的binlog","abbrlink":"mysql-binlog","date":"2022-05-10T05:25:13.000Z","updated":"2022-05-10T05:25:13.000Z","_content":"### 如何查看binlog日志\n#### 1. 开启binlog\n- 在my.ini文件[mysqld]里添加`log_bin=mysql-bin`，值 mysql-bin 是日志的基本名或前缀名\n- 通过mysql的变量配置表，查看二进制日志是否已开启\n![](/images/mysql_binlog_1.png)\n- 查看MySQL的binlog模式\n![](/images/mysql_binlog_2.png)\n在查看binlog的时候可能会遇到错误：`mysqlbinlog: [ERROR] unknown variable 'default-character-set=utf8'`\n![](/images/mysql_binlog_3.png)\n原因是mysqlbinlog这个工具无法识别binlog中的配置中的default-character-set=utf8这个指令。\n两个方法可以解决这个问题\nA. 在MySQL的配置/etc/my.cnf中将`default-character-set=utf8` 修改为\n`character-set-server = utf8`，但是这需要重启MySQL服务，如果你的MySQL服务正在忙，那这样的代价会比较大。\nB. 用mysqlbinlog --no-defaults mysql-bin.000001 命令打开\n![](/images/mysql_binlog_4.png)\n\n### 参考资料\nhttps://blog.csdn.net/weixin_43944305/article/details/108620849\nhttps://www.kancloud.cn/wenshunbiao/wenshunbiao/1403850","source":"_posts/MySQL/MySQL中的binlog.md","raw":"---\ntitle: MySQL中的binlog\ntags: [binlog]\ncategories: MySQL\nabbrlink: 'mysql-binlog'\ndate: 2022-05-10 13:25:13\nupdated: 2022-05-10 13:25:13\n---\n### 如何查看binlog日志\n#### 1. 开启binlog\n- 在my.ini文件[mysqld]里添加`log_bin=mysql-bin`，值 mysql-bin 是日志的基本名或前缀名\n- 通过mysql的变量配置表，查看二进制日志是否已开启\n![](/images/mysql_binlog_1.png)\n- 查看MySQL的binlog模式\n![](/images/mysql_binlog_2.png)\n在查看binlog的时候可能会遇到错误：`mysqlbinlog: [ERROR] unknown variable 'default-character-set=utf8'`\n![](/images/mysql_binlog_3.png)\n原因是mysqlbinlog这个工具无法识别binlog中的配置中的default-character-set=utf8这个指令。\n两个方法可以解决这个问题\nA. 在MySQL的配置/etc/my.cnf中将`default-character-set=utf8` 修改为\n`character-set-server = utf8`，但是这需要重启MySQL服务，如果你的MySQL服务正在忙，那这样的代价会比较大。\nB. 用mysqlbinlog --no-defaults mysql-bin.000001 命令打开\n![](/images/mysql_binlog_4.png)\n\n### 参考资料\nhttps://blog.csdn.net/weixin_43944305/article/details/108620849\nhttps://www.kancloud.cn/wenshunbiao/wenshunbiao/1403850","slug":"MySQL/MySQL中的binlog","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2te0016oshg7h75f1ks","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"如何查看binlog日志\"><a href=\"#如何查看binlog日志\" class=\"headerlink\" title=\"如何查看binlog日志\"></a>如何查看binlog日志</h3><h4 id=\"1-开启binlog\"><a href=\"#1-开启binlog\" class=\"headerlink\" title=\"1. 开启binlog\"></a>1. 开启binlog</h4><ul>\n<li>在my.ini文件[mysqld]里添加<code>log_bin=mysql-bin</code>，值 mysql-bin 是日志的基本名或前缀名</li>\n<li>通过mysql的变量配置表，查看二进制日志是否已开启<br><img src=\"/images/mysql_binlog_1.png\" alt=\"\"></li>\n<li>查看MySQL的binlog模式<br><img src=\"/images/mysql_binlog_2.png\" alt=\"\"><br>在查看binlog的时候可能会遇到错误：<code>mysqlbinlog: [ERROR] unknown variable 'default-character-set=utf8'</code><br><img src=\"/images/mysql_binlog_3.png\" alt=\"\"><br>原因是mysqlbinlog这个工具无法识别binlog中的配置中的default-character-set=utf8这个指令。<br>两个方法可以解决这个问题<br>A. 在MySQL的配置/etc/my.cnf中将<code>default-character-set=utf8</code> 修改为<br><code>character-set-server = utf8</code>，但是这需要重启MySQL服务，如果你的MySQL服务正在忙，那这样的代价会比较大。<br>B. 用mysqlbinlog —no-defaults mysql-bin.000001 命令打开<br><img src=\"/images/mysql_binlog_4.png\" alt=\"\"></li>\n</ul>\n<h3 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h3><p><a href=\"https://blog.csdn.net/weixin_43944305/article/details/108620849\">https://blog.csdn.net/weixin_43944305/article/details/108620849</a><br><a href=\"https://www.kancloud.cn/wenshunbiao/wenshunbiao/1403850\">https://www.kancloud.cn/wenshunbiao/wenshunbiao/1403850</a></p>\n","excerpt":"","more":"<h3 id=\"如何查看binlog日志\"><a href=\"#如何查看binlog日志\" class=\"headerlink\" title=\"如何查看binlog日志\"></a>如何查看binlog日志</h3><h4 id=\"1-开启binlog\"><a href=\"#1-开启binlog\" class=\"headerlink\" title=\"1. 开启binlog\"></a>1. 开启binlog</h4><ul>\n<li>在my.ini文件[mysqld]里添加<code>log_bin=mysql-bin</code>，值 mysql-bin 是日志的基本名或前缀名</li>\n<li>通过mysql的变量配置表，查看二进制日志是否已开启<br><img src=\"/images/mysql_binlog_1.png\" alt></li>\n<li>查看MySQL的binlog模式<br><img src=\"/images/mysql_binlog_2.png\" alt><br>在查看binlog的时候可能会遇到错误：<code>mysqlbinlog: [ERROR] unknown variable &#39;default-character-set=utf8&#39;</code><br><img src=\"/images/mysql_binlog_3.png\" alt><br>原因是mysqlbinlog这个工具无法识别binlog中的配置中的default-character-set=utf8这个指令。<br>两个方法可以解决这个问题<br>A. 在MySQL的配置/etc/my.cnf中将<code>default-character-set=utf8</code> 修改为<br><code>character-set-server = utf8</code>，但是这需要重启MySQL服务，如果你的MySQL服务正在忙，那这样的代价会比较大。<br>B. 用mysqlbinlog —no-defaults mysql-bin.000001 命令打开<br><img src=\"/images/mysql_binlog_4.png\" alt></li>\n</ul>\n<h3 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h3><p><a href=\"https://blog.csdn.net/weixin_43944305/article/details/108620849\">https://blog.csdn.net/weixin_43944305/article/details/108620849</a><br><a href=\"https://www.kancloud.cn/wenshunbiao/wenshunbiao/1403850\">https://www.kancloud.cn/wenshunbiao/wenshunbiao/1403850</a></p>\n"},{"title":"MySQL中的explain","abbrlink":"mysql-explain1","date":"2020-06-12T00:25:40.000Z","updated":"2020-06-12T00:25:40.000Z","_content":"\n当我们在执行sql时，一般都会使用explain来分析sql的效率情况。\n#### 用法\n  只需要在查询的 SQL 前面添加上 explain 关键字即可。\n![](/images/mysql_explain_1.png)\n\n#### 结果列说明\n- id — 选择标识符，id 越大优先级越高，越先被执行；\n- select_type — 表示查询的类型；\n- table — 输出结果集的表；\n- partitions — 匹配的分区；\n- type — 表示表的连接类型；\n    type 值有如下类型\n    - all — 全表扫描，在数据量大时效率极低；\n    - index — 遍历索引，全索引排序；根据extra的内容分以下几种情况：\n        Using Index：覆盖索引，即**只需要**通过索引就可以返回查询所需要的数据\n        Using Where：查询列未用到索引\n        Using Index  Using Where：其中的查询列是索引，但是并不是前导列，因此其实是没法用到这个索引的\n        Null：查询列有些不是索引，需要回表来查询未被索引覆盖的字段（不是纯粹用了索引，也不是完全没用到索引）\n    - range — 索引范围查找，有范围的索引排序；如：`between and < > in or`\n    - index_subquery — 在子查询中使用 ref；非唯一性索引，一般出现在in查询中；\n    - unique_subquery — 在子查询中使用 eq_ref，一般出现在in查询中；\n    - index_merge — 使用了索引合并优化。(对多个索引分别进行了条件的查询，最后对这几个查询的结果进行合并交集运算)\n    - ref_or_null — 对 null 进行索引的优化的 ref； 类似 ref。区别是他会额外的搜索包含 null 的记录，他会对其进行一些优化。(例如：SELECT * FROM table WHERE age = 18 and name is null)\n    - fulltext — 使用全文索引；\n    - ref — 使用非唯一索引查找数据；利用查询索引来进行搜索。（非主键以及 UNIQUE）\n    - eq_ref — 在 join 查询中使用主键或唯一索引关联；查询列是主键或者非 NULL 的 UNIQUE 索引，常用在联合查询。(例如：SELECT * FROM ref_table,other_table WHERE ref_table.key_column=other_table.column => ref_table.key_column 是主键或者非 NULL 的 UNIQUE 索引)\n    - const — 将一个主键放置到 where 后面作为条件查询， MySQL 优化器就能把这次查询优化转化为一个常量，如何转化以及何时转化，这个取决于优化器，这个比 eq_ref 效率高一点。\n        查询条件是主键或者非 NULL 的 UNIQUE 索引，因此结果只有一条，同时优化过程中查询列值会转成常量。\n    - system — 表中数据只有一行的情况；\n    - null — 不用访问表就可以直接得到结果。(例如：SELECT 1)\n    type的效率高低情况：`all < index < range < index_subquery < unique_subquery < index_merge < ref_or_null < ref < eq_ref < const < system`\n- possible_keys — 表示查询时，可能使用的索引；\n- key — 表示实际使用的索引；\n    如果这一列为 NULL 则表示未使用索引，反之则使用了索引。\n- key_len — 索引字段的长度；\n- ref—  列与索引的比较；\n- rows — 大概估算的行数；\n- filtered — 按表条件过滤的行百分比；\n- Extra — 执行情况的描述和说明。\n","source":"_posts/MySQL/MySQL中的explain.md","raw":"---\ntitle: MySQL中的explain\ntags: [MySQL]\ncategories: MySQL\nabbrlink: 'mysql-explain1'\ndate: 2020-06-12 08:25:40\nupdated: 2020-06-12 08:25:40\n---\n\n当我们在执行sql时，一般都会使用explain来分析sql的效率情况。\n#### 用法\n  只需要在查询的 SQL 前面添加上 explain 关键字即可。\n![](/images/mysql_explain_1.png)\n\n#### 结果列说明\n- id — 选择标识符，id 越大优先级越高，越先被执行；\n- select_type — 表示查询的类型；\n- table — 输出结果集的表；\n- partitions — 匹配的分区；\n- type — 表示表的连接类型；\n    type 值有如下类型\n    - all — 全表扫描，在数据量大时效率极低；\n    - index — 遍历索引，全索引排序；根据extra的内容分以下几种情况：\n        Using Index：覆盖索引，即**只需要**通过索引就可以返回查询所需要的数据\n        Using Where：查询列未用到索引\n        Using Index  Using Where：其中的查询列是索引，但是并不是前导列，因此其实是没法用到这个索引的\n        Null：查询列有些不是索引，需要回表来查询未被索引覆盖的字段（不是纯粹用了索引，也不是完全没用到索引）\n    - range — 索引范围查找，有范围的索引排序；如：`between and < > in or`\n    - index_subquery — 在子查询中使用 ref；非唯一性索引，一般出现在in查询中；\n    - unique_subquery — 在子查询中使用 eq_ref，一般出现在in查询中；\n    - index_merge — 使用了索引合并优化。(对多个索引分别进行了条件的查询，最后对这几个查询的结果进行合并交集运算)\n    - ref_or_null — 对 null 进行索引的优化的 ref； 类似 ref。区别是他会额外的搜索包含 null 的记录，他会对其进行一些优化。(例如：SELECT * FROM table WHERE age = 18 and name is null)\n    - fulltext — 使用全文索引；\n    - ref — 使用非唯一索引查找数据；利用查询索引来进行搜索。（非主键以及 UNIQUE）\n    - eq_ref — 在 join 查询中使用主键或唯一索引关联；查询列是主键或者非 NULL 的 UNIQUE 索引，常用在联合查询。(例如：SELECT * FROM ref_table,other_table WHERE ref_table.key_column=other_table.column => ref_table.key_column 是主键或者非 NULL 的 UNIQUE 索引)\n    - const — 将一个主键放置到 where 后面作为条件查询， MySQL 优化器就能把这次查询优化转化为一个常量，如何转化以及何时转化，这个取决于优化器，这个比 eq_ref 效率高一点。\n        查询条件是主键或者非 NULL 的 UNIQUE 索引，因此结果只有一条，同时优化过程中查询列值会转成常量。\n    - system — 表中数据只有一行的情况；\n    - null — 不用访问表就可以直接得到结果。(例如：SELECT 1)\n    type的效率高低情况：`all < index < range < index_subquery < unique_subquery < index_merge < ref_or_null < ref < eq_ref < const < system`\n- possible_keys — 表示查询时，可能使用的索引；\n- key — 表示实际使用的索引；\n    如果这一列为 NULL 则表示未使用索引，反之则使用了索引。\n- key_len — 索引字段的长度；\n- ref—  列与索引的比较；\n- rows — 大概估算的行数；\n- filtered — 按表条件过滤的行百分比；\n- Extra — 执行情况的描述和说明。\n","slug":"MySQL/MySQL中的explain","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tf001aoshg61sg392s","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>当我们在执行sql时，一般都会使用explain来分析sql的效率情况。</p>\n<h4 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h4><p>  只需要在查询的 SQL 前面添加上 explain 关键字即可。<br><img src=\"/images/mysql_explain_1.png\" alt=\"\"></p>\n<h4 id=\"结果列说明\"><a href=\"#结果列说明\" class=\"headerlink\" title=\"结果列说明\"></a>结果列说明</h4><ul>\n<li>id — 选择标识符，id 越大优先级越高，越先被执行；</li>\n<li>select_type — 表示查询的类型；</li>\n<li>table — 输出结果集的表；</li>\n<li>partitions — 匹配的分区；</li>\n<li>type — 表示表的连接类型；<br>  type 值有如下类型<ul>\n<li>all — 全表扫描，在数据量大时效率极低；</li>\n<li>index — 遍历索引，全索引排序；根据extra的内容分以下几种情况：<br>  Using Index：覆盖索引，即<strong>只需要</strong>通过索引就可以返回查询所需要的数据<br>  Using Where：查询列未用到索引<br>  Using Index  Using Where：其中的查询列是索引，但是并不是前导列，因此其实是没法用到这个索引的<br>  Null：查询列有些不是索引，需要回表来查询未被索引覆盖的字段（不是纯粹用了索引，也不是完全没用到索引）</li>\n<li>range — 索引范围查找，有范围的索引排序；如：<code>between and &lt; &gt; in or</code></li>\n<li>index_subquery — 在子查询中使用 ref；非唯一性索引，一般出现在in查询中；</li>\n<li>unique_subquery — 在子查询中使用 eq_ref，一般出现在in查询中；</li>\n<li>index_merge — 使用了索引合并优化。(对多个索引分别进行了条件的查询，最后对这几个查询的结果进行合并交集运算)</li>\n<li>ref_or_null — 对 null 进行索引的优化的 ref； 类似 ref。区别是他会额外的搜索包含 null 的记录，他会对其进行一些优化。(例如：SELECT * FROM table WHERE age = 18 and name is null)</li>\n<li>fulltext — 使用全文索引；</li>\n<li>ref — 使用非唯一索引查找数据；利用查询索引来进行搜索。（非主键以及 UNIQUE）</li>\n<li>eq_ref — 在 join 查询中使用主键或唯一索引关联；查询列是主键或者非 NULL 的 UNIQUE 索引，常用在联合查询。(例如：SELECT * FROM ref_table,other_table WHERE ref_table.key_column=other_table.column =&gt; ref_table.key_column 是主键或者非 NULL 的 UNIQUE 索引)</li>\n<li>const — 将一个主键放置到 where 后面作为条件查询， MySQL 优化器就能把这次查询优化转化为一个常量，如何转化以及何时转化，这个取决于优化器，这个比 eq_ref 效率高一点。<br>  查询条件是主键或者非 NULL 的 UNIQUE 索引，因此结果只有一条，同时优化过程中查询列值会转成常量。</li>\n<li>system — 表中数据只有一行的情况；</li>\n<li>null — 不用访问表就可以直接得到结果。(例如：SELECT 1)<br>type的效率高低情况：<code>all &lt; index &lt; range &lt; index_subquery &lt; unique_subquery &lt; index_merge &lt; ref_or_null &lt; ref &lt; eq_ref &lt; const &lt; system</code></li>\n</ul>\n</li>\n<li>possible_keys — 表示查询时，可能使用的索引；</li>\n<li>key — 表示实际使用的索引；<br>  如果这一列为 NULL 则表示未使用索引，反之则使用了索引。</li>\n<li>key_len — 索引字段的长度；</li>\n<li>ref—  列与索引的比较；</li>\n<li>rows — 大概估算的行数；</li>\n<li>filtered — 按表条件过滤的行百分比；</li>\n<li>Extra — 执行情况的描述和说明。</li>\n</ul>\n","excerpt":"","more":"<p>当我们在执行sql时，一般都会使用explain来分析sql的效率情况。</p>\n<h4 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h4><p>  只需要在查询的 SQL 前面添加上 explain 关键字即可。<br><img src=\"/images/mysql_explain_1.png\" alt></p>\n<h4 id=\"结果列说明\"><a href=\"#结果列说明\" class=\"headerlink\" title=\"结果列说明\"></a>结果列说明</h4><ul>\n<li>id — 选择标识符，id 越大优先级越高，越先被执行；</li>\n<li>select_type — 表示查询的类型；</li>\n<li>table — 输出结果集的表；</li>\n<li>partitions — 匹配的分区；</li>\n<li>type — 表示表的连接类型；<br>  type 值有如下类型<ul>\n<li>all — 全表扫描，在数据量大时效率极低；</li>\n<li>index — 遍历索引，全索引排序；根据extra的内容分以下几种情况：<br>  Using Index：覆盖索引，即<strong>只需要</strong>通过索引就可以返回查询所需要的数据<br>  Using Where：查询列未用到索引<br>  Using Index  Using Where：其中的查询列是索引，但是并不是前导列，因此其实是没法用到这个索引的<br>  Null：查询列有些不是索引，需要回表来查询未被索引覆盖的字段（不是纯粹用了索引，也不是完全没用到索引）</li>\n<li>range — 索引范围查找，有范围的索引排序；如：<code>between and &lt; &gt; in or</code></li>\n<li>index_subquery — 在子查询中使用 ref；非唯一性索引，一般出现在in查询中；</li>\n<li>unique_subquery — 在子查询中使用 eq_ref，一般出现在in查询中；</li>\n<li>index_merge — 使用了索引合并优化。(对多个索引分别进行了条件的查询，最后对这几个查询的结果进行合并交集运算)</li>\n<li>ref_or_null — 对 null 进行索引的优化的 ref； 类似 ref。区别是他会额外的搜索包含 null 的记录，他会对其进行一些优化。(例如：SELECT * FROM table WHERE age = 18 and name is null)</li>\n<li>fulltext — 使用全文索引；</li>\n<li>ref — 使用非唯一索引查找数据；利用查询索引来进行搜索。（非主键以及 UNIQUE）</li>\n<li>eq_ref — 在 join 查询中使用主键或唯一索引关联；查询列是主键或者非 NULL 的 UNIQUE 索引，常用在联合查询。(例如：SELECT * FROM ref_table,other_table WHERE ref_table.key_column=other_table.column =&gt; ref_table.key_column 是主键或者非 NULL 的 UNIQUE 索引)</li>\n<li>const — 将一个主键放置到 where 后面作为条件查询， MySQL 优化器就能把这次查询优化转化为一个常量，如何转化以及何时转化，这个取决于优化器，这个比 eq_ref 效率高一点。<br>  查询条件是主键或者非 NULL 的 UNIQUE 索引，因此结果只有一条，同时优化过程中查询列值会转成常量。</li>\n<li>system — 表中数据只有一行的情况；</li>\n<li>null — 不用访问表就可以直接得到结果。(例如：SELECT 1)<br>type的效率高低情况：<code>all &lt; index &lt; range &lt; index_subquery &lt; unique_subquery &lt; index_merge &lt; ref_or_null &lt; ref &lt; eq_ref &lt; const &lt; system</code></li>\n</ul>\n</li>\n<li>possible_keys — 表示查询时，可能使用的索引；</li>\n<li>key — 表示实际使用的索引；<br>  如果这一列为 NULL 则表示未使用索引，反之则使用了索引。</li>\n<li>key_len — 索引字段的长度；</li>\n<li>ref—  列与索引的比较；</li>\n<li>rows — 大概估算的行数；</li>\n<li>filtered — 按表条件过滤的行百分比；</li>\n<li>Extra — 执行情况的描述和说明。</li>\n</ul>\n"},{"title":"MySQL数据库优化","abbrlink":"mysql-optimization","date":"2021-08-07T07:56:16.000Z","updated":"2021-08-07T07:56:16.000Z","_content":"\n<div class=\"note info\">数据库优化无论实在面试还是工作中都非常重要，结合个人多年的从业经验，它主要从数据库设计、sql优化、服务器优化等方面来进行。</div>\n\n### 数据库设计优化\n   #### 表设计方面\n   - 1）表的数据类型是否合理，要遵守选取数据类型越简单越小的原则\n   - 2）表中碎片是否整理\n   - 3）表的统计信息是否收集，只有统计信息准确，执行计划才能帮助优化SQL\n   - 4）表设计时候增加必要的注释，说明字段的用途\n   #### 字段设计方面\n   - 1）使用varchar替代char\n        varchar的存储是按实际长度来存储的，可以节省存储空间，而char是按照定义长度来存储的，不足补充空格\n \n### sql优化\n   #### 常规优化\n   - 1）尽量不要使用 `select *`，而是使用具体的字段\n        避免了不需要的列返回给客户端调用，节约流量，`select *`可能会用到覆盖索引，直接从索引中获取要查询的列数据，减少了回表查询，调高查询效率\n   - 2）避免在where子句中使用OR来进行条件关联，有可能造成索引失效\n   - 3）尽量使用数值类型代替字符串\n        处理引擎在执行查询和连接时候，如果是字符串类型则会逐个比较字符，要是数值类型的话直接比较一次就可以了，字符串的连接性能也会大大降低。\n   - 4）应尽量避免在where子句中使用!=或<>操作符\n        这种情况可能会造成索引失效，经过sql优化器优化，执行引擎发现使用索引的代价比不走索引还要大，就会放弃使用索引直接走全表扫描\n   - 5）在inner join 、left join、right join都满足条件的状况下，优先使用inner join\n        inner join内连接，只保留左右两张表中都匹配的结果集；left join 左连接，以左表为主表，返回左表中的所有行，即使右表中没有匹配的行；right join右连接，以右表为主表，返回右表中的所有数据，即使坐标中没有匹配的行；如果是inner join等值连接，返回的行数比较小，所以效率较高；左右连接的话，按照“小表驱动大表的原则”，用小表作为主表\n   - 6）遵循“小表驱动大表”的原则\n        在含有复杂子查询的sql语句中，在满足条件的情况下，应该将小表放在里面层层过滤，缩小查询的范围\n   - 7）分组过滤的时候，应该先过滤，再分组\n   - 8）执行delete或update语句，加个limit或者循环分批次删除\n        降低误删数据的代价，避免长事务，数据量大的话，容易把cpu打满，一次性删除数据太多的话可能造成锁表\n   - 9）用union all替代union\n        union会对筛选掉重复的记录，所以会在连接后对所产生的结果集先进行排序运算，然后再删除重复记录返回，如果数据量比较大的情况下可能会使用磁盘排序\n   - 10）多条写数据，建议采用批量提交减少事务提交的次数，提高性能\n   - 11）关联查询的表连接不要太多\n        关联表的个数越多，编译的时间和开销也越大，每次关联在内存中都会产生一个临时表\n   - 12）索引并不是越多越好\n        索引虽然提高了查询性能，但是会降低数据写入的速度，并且索引的存储是要占用空间的，索引也是排序的，排序是要花费时间的，insert和update操作可能会导致重建索引，如果数据量巨大，这笔消耗也是非常惊人的 \n   - 13）去重distinct过滤字段要少\n        数据库引擎对数据的比较、过滤是一个很耗费资源的操作\n   - 14）尽量避使用游标\n    \n   #### 索引优化\n   - 1）通过explain，查看执行计划，检查索引使用情况，没有用到索引，考虑创建\n   - 2）创建索引前，查看索引的选择性distinct，判断该字段是否适创建索引\n      索引选择性指不重复的索引值和数据记录总数的比值，越接近1越好；主键索引和唯一索引选择性是1\n   - 3）创建索引后，再查看执行计划，对比两次结果，查看效率是否提高\n   #### 慢查询优化\n   - 1）如果一个select语句中没有where条件，只有单纯的group by | order by，这是无法使用索引的。需要有where作为基础铺垫，遵从最左原则才能使用索引。\n \n### 服务器优化\n#### 读写分离\n\n#### 分库分表","source":"_posts/MySQL/MySQL数据库优化.md","raw":"---\ntitle: MySQL数据库优化\ntags: [数据库优化]\ncategories: MySQL\nabbrlink: 'mysql-optimization'\ndate: 2021-08-07 15:56:16\nupdated: 2021-08-07 15:56:16\n---\n\n<div class=\"note info\">数据库优化无论实在面试还是工作中都非常重要，结合个人多年的从业经验，它主要从数据库设计、sql优化、服务器优化等方面来进行。</div>\n\n### 数据库设计优化\n   #### 表设计方面\n   - 1）表的数据类型是否合理，要遵守选取数据类型越简单越小的原则\n   - 2）表中碎片是否整理\n   - 3）表的统计信息是否收集，只有统计信息准确，执行计划才能帮助优化SQL\n   - 4）表设计时候增加必要的注释，说明字段的用途\n   #### 字段设计方面\n   - 1）使用varchar替代char\n        varchar的存储是按实际长度来存储的，可以节省存储空间，而char是按照定义长度来存储的，不足补充空格\n \n### sql优化\n   #### 常规优化\n   - 1）尽量不要使用 `select *`，而是使用具体的字段\n        避免了不需要的列返回给客户端调用，节约流量，`select *`可能会用到覆盖索引，直接从索引中获取要查询的列数据，减少了回表查询，调高查询效率\n   - 2）避免在where子句中使用OR来进行条件关联，有可能造成索引失效\n   - 3）尽量使用数值类型代替字符串\n        处理引擎在执行查询和连接时候，如果是字符串类型则会逐个比较字符，要是数值类型的话直接比较一次就可以了，字符串的连接性能也会大大降低。\n   - 4）应尽量避免在where子句中使用!=或<>操作符\n        这种情况可能会造成索引失效，经过sql优化器优化，执行引擎发现使用索引的代价比不走索引还要大，就会放弃使用索引直接走全表扫描\n   - 5）在inner join 、left join、right join都满足条件的状况下，优先使用inner join\n        inner join内连接，只保留左右两张表中都匹配的结果集；left join 左连接，以左表为主表，返回左表中的所有行，即使右表中没有匹配的行；right join右连接，以右表为主表，返回右表中的所有数据，即使坐标中没有匹配的行；如果是inner join等值连接，返回的行数比较小，所以效率较高；左右连接的话，按照“小表驱动大表的原则”，用小表作为主表\n   - 6）遵循“小表驱动大表”的原则\n        在含有复杂子查询的sql语句中，在满足条件的情况下，应该将小表放在里面层层过滤，缩小查询的范围\n   - 7）分组过滤的时候，应该先过滤，再分组\n   - 8）执行delete或update语句，加个limit或者循环分批次删除\n        降低误删数据的代价，避免长事务，数据量大的话，容易把cpu打满，一次性删除数据太多的话可能造成锁表\n   - 9）用union all替代union\n        union会对筛选掉重复的记录，所以会在连接后对所产生的结果集先进行排序运算，然后再删除重复记录返回，如果数据量比较大的情况下可能会使用磁盘排序\n   - 10）多条写数据，建议采用批量提交减少事务提交的次数，提高性能\n   - 11）关联查询的表连接不要太多\n        关联表的个数越多，编译的时间和开销也越大，每次关联在内存中都会产生一个临时表\n   - 12）索引并不是越多越好\n        索引虽然提高了查询性能，但是会降低数据写入的速度，并且索引的存储是要占用空间的，索引也是排序的，排序是要花费时间的，insert和update操作可能会导致重建索引，如果数据量巨大，这笔消耗也是非常惊人的 \n   - 13）去重distinct过滤字段要少\n        数据库引擎对数据的比较、过滤是一个很耗费资源的操作\n   - 14）尽量避使用游标\n    \n   #### 索引优化\n   - 1）通过explain，查看执行计划，检查索引使用情况，没有用到索引，考虑创建\n   - 2）创建索引前，查看索引的选择性distinct，判断该字段是否适创建索引\n      索引选择性指不重复的索引值和数据记录总数的比值，越接近1越好；主键索引和唯一索引选择性是1\n   - 3）创建索引后，再查看执行计划，对比两次结果，查看效率是否提高\n   #### 慢查询优化\n   - 1）如果一个select语句中没有where条件，只有单纯的group by | order by，这是无法使用索引的。需要有where作为基础铺垫，遵从最左原则才能使用索引。\n \n### 服务器优化\n#### 读写分离\n\n#### 分库分表","slug":"MySQL/MySQL数据库优化","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tg001doshgh6ocbihf","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">数据库优化无论实在面试还是工作中都非常重要，结合个人多年的从业经验，它主要从数据库设计、sql优化、服务器优化等方面来进行。</div>\n\n<h3 id=\"数据库设计优化\"><a href=\"#数据库设计优化\" class=\"headerlink\" title=\"数据库设计优化\"></a>数据库设计优化</h3><h4 id=\"表设计方面\"><a href=\"#表设计方面\" class=\"headerlink\" title=\"表设计方面\"></a>表设计方面</h4><ul>\n<li>1）表的数据类型是否合理，要遵守选取数据类型越简单越小的原则</li>\n<li>2）表中碎片是否整理</li>\n<li>3）表的统计信息是否收集，只有统计信息准确，执行计划才能帮助优化SQL</li>\n<li>4）表设计时候增加必要的注释，说明字段的用途<h4 id=\"字段设计方面\"><a href=\"#字段设计方面\" class=\"headerlink\" title=\"字段设计方面\"></a>字段设计方面</h4></li>\n<li>1）使用varchar替代char<br>   varchar的存储是按实际长度来存储的，可以节省存储空间，而char是按照定义长度来存储的，不足补充空格</li>\n</ul>\n<h3 id=\"sql优化\"><a href=\"#sql优化\" class=\"headerlink\" title=\"sql优化\"></a>sql优化</h3><h4 id=\"常规优化\"><a href=\"#常规优化\" class=\"headerlink\" title=\"常规优化\"></a>常规优化</h4><ul>\n<li>1）尽量不要使用 <code>select *</code>，而是使用具体的字段<br>   避免了不需要的列返回给客户端调用，节约流量，<code>select *</code>可能会用到覆盖索引，直接从索引中获取要查询的列数据，减少了回表查询，调高查询效率</li>\n<li>2）避免在where子句中使用OR来进行条件关联，有可能造成索引失效</li>\n<li>3）尽量使用数值类型代替字符串<br>   处理引擎在执行查询和连接时候，如果是字符串类型则会逐个比较字符，要是数值类型的话直接比较一次就可以了，字符串的连接性能也会大大降低。</li>\n<li>4）应尽量避免在where子句中使用!=或&lt;&gt;操作符<br>   这种情况可能会造成索引失效，经过sql优化器优化，执行引擎发现使用索引的代价比不走索引还要大，就会放弃使用索引直接走全表扫描</li>\n<li>5）在inner join 、left join、right join都满足条件的状况下，优先使用inner join<br>   inner join内连接，只保留左右两张表中都匹配的结果集；left join 左连接，以左表为主表，返回左表中的所有行，即使右表中没有匹配的行；right join右连接，以右表为主表，返回右表中的所有数据，即使坐标中没有匹配的行；如果是inner join等值连接，返回的行数比较小，所以效率较高；左右连接的话，按照“小表驱动大表的原则”，用小表作为主表</li>\n<li>6）遵循“小表驱动大表”的原则<br>   在含有复杂子查询的sql语句中，在满足条件的情况下，应该将小表放在里面层层过滤，缩小查询的范围</li>\n<li>7）分组过滤的时候，应该先过滤，再分组</li>\n<li>8）执行delete或update语句，加个limit或者循环分批次删除<br>   降低误删数据的代价，避免长事务，数据量大的话，容易把cpu打满，一次性删除数据太多的话可能造成锁表</li>\n<li>9）用union all替代union<br>   union会对筛选掉重复的记录，所以会在连接后对所产生的结果集先进行排序运算，然后再删除重复记录返回，如果数据量比较大的情况下可能会使用磁盘排序</li>\n<li>10）多条写数据，建议采用批量提交减少事务提交的次数，提高性能</li>\n<li>11）关联查询的表连接不要太多<br>   关联表的个数越多，编译的时间和开销也越大，每次关联在内存中都会产生一个临时表</li>\n<li>12）索引并不是越多越好<br>   索引虽然提高了查询性能，但是会降低数据写入的速度，并且索引的存储是要占用空间的，索引也是排序的，排序是要花费时间的，insert和update操作可能会导致重建索引，如果数据量巨大，这笔消耗也是非常惊人的 </li>\n<li>13）去重distinct过滤字段要少<br>   数据库引擎对数据的比较、过滤是一个很耗费资源的操作</li>\n<li><p>14）尽量避使用游标</p>\n<h4 id=\"索引优化\"><a href=\"#索引优化\" class=\"headerlink\" title=\"索引优化\"></a>索引优化</h4></li>\n<li>1）通过explain，查看执行计划，检查索引使用情况，没有用到索引，考虑创建</li>\n<li>2）创建索引前，查看索引的选择性distinct，判断该字段是否适创建索引<br> 索引选择性指不重复的索引值和数据记录总数的比值，越接近1越好；主键索引和唯一索引选择性是1</li>\n<li>3）创建索引后，再查看执行计划，对比两次结果，查看效率是否提高<h4 id=\"慢查询优化\"><a href=\"#慢查询优化\" class=\"headerlink\" title=\"慢查询优化\"></a>慢查询优化</h4></li>\n<li>1）如果一个select语句中没有where条件，只有单纯的group by | order by，这是无法使用索引的。需要有where作为基础铺垫，遵从最左原则才能使用索引。</li>\n</ul>\n<h3 id=\"服务器优化\"><a href=\"#服务器优化\" class=\"headerlink\" title=\"服务器优化\"></a>服务器优化</h3><h4 id=\"读写分离\"><a href=\"#读写分离\" class=\"headerlink\" title=\"读写分离\"></a>读写分离</h4><h4 id=\"分库分表\"><a href=\"#分库分表\" class=\"headerlink\" title=\"分库分表\"></a>分库分表</h4>","excerpt":"","more":"<div class=\"note info\">数据库优化无论实在面试还是工作中都非常重要，结合个人多年的从业经验，它主要从数据库设计、sql优化、服务器优化等方面来进行。</div>\n\n<h3 id=\"数据库设计优化\"><a href=\"#数据库设计优化\" class=\"headerlink\" title=\"数据库设计优化\"></a>数据库设计优化</h3><h4 id=\"表设计方面\"><a href=\"#表设计方面\" class=\"headerlink\" title=\"表设计方面\"></a>表设计方面</h4><ul>\n<li>1）表的数据类型是否合理，要遵守选取数据类型越简单越小的原则</li>\n<li>2）表中碎片是否整理</li>\n<li>3）表的统计信息是否收集，只有统计信息准确，执行计划才能帮助优化SQL</li>\n<li>4）表设计时候增加必要的注释，说明字段的用途<h4 id=\"字段设计方面\"><a href=\"#字段设计方面\" class=\"headerlink\" title=\"字段设计方面\"></a>字段设计方面</h4></li>\n<li>1）使用varchar替代char<br>   varchar的存储是按实际长度来存储的，可以节省存储空间，而char是按照定义长度来存储的，不足补充空格</li>\n</ul>\n<h3 id=\"sql优化\"><a href=\"#sql优化\" class=\"headerlink\" title=\"sql优化\"></a>sql优化</h3><h4 id=\"常规优化\"><a href=\"#常规优化\" class=\"headerlink\" title=\"常规优化\"></a>常规优化</h4><ul>\n<li>1）尽量不要使用 <code>select *</code>，而是使用具体的字段<br>   避免了不需要的列返回给客户端调用，节约流量，<code>select *</code>可能会用到覆盖索引，直接从索引中获取要查询的列数据，减少了回表查询，调高查询效率</li>\n<li>2）避免在where子句中使用OR来进行条件关联，有可能造成索引失效</li>\n<li>3）尽量使用数值类型代替字符串<br>   处理引擎在执行查询和连接时候，如果是字符串类型则会逐个比较字符，要是数值类型的话直接比较一次就可以了，字符串的连接性能也会大大降低。</li>\n<li>4）应尽量避免在where子句中使用!=或&lt;&gt;操作符<br>   这种情况可能会造成索引失效，经过sql优化器优化，执行引擎发现使用索引的代价比不走索引还要大，就会放弃使用索引直接走全表扫描</li>\n<li>5）在inner join 、left join、right join都满足条件的状况下，优先使用inner join<br>   inner join内连接，只保留左右两张表中都匹配的结果集；left join 左连接，以左表为主表，返回左表中的所有行，即使右表中没有匹配的行；right join右连接，以右表为主表，返回右表中的所有数据，即使坐标中没有匹配的行；如果是inner join等值连接，返回的行数比较小，所以效率较高；左右连接的话，按照“小表驱动大表的原则”，用小表作为主表</li>\n<li>6）遵循“小表驱动大表”的原则<br>   在含有复杂子查询的sql语句中，在满足条件的情况下，应该将小表放在里面层层过滤，缩小查询的范围</li>\n<li>7）分组过滤的时候，应该先过滤，再分组</li>\n<li>8）执行delete或update语句，加个limit或者循环分批次删除<br>   降低误删数据的代价，避免长事务，数据量大的话，容易把cpu打满，一次性删除数据太多的话可能造成锁表</li>\n<li>9）用union all替代union<br>   union会对筛选掉重复的记录，所以会在连接后对所产生的结果集先进行排序运算，然后再删除重复记录返回，如果数据量比较大的情况下可能会使用磁盘排序</li>\n<li>10）多条写数据，建议采用批量提交减少事务提交的次数，提高性能</li>\n<li>11）关联查询的表连接不要太多<br>   关联表的个数越多，编译的时间和开销也越大，每次关联在内存中都会产生一个临时表</li>\n<li>12）索引并不是越多越好<br>   索引虽然提高了查询性能，但是会降低数据写入的速度，并且索引的存储是要占用空间的，索引也是排序的，排序是要花费时间的，insert和update操作可能会导致重建索引，如果数据量巨大，这笔消耗也是非常惊人的 </li>\n<li>13）去重distinct过滤字段要少<br>   数据库引擎对数据的比较、过滤是一个很耗费资源的操作</li>\n<li><p>14）尽量避使用游标</p>\n<h4 id=\"索引优化\"><a href=\"#索引优化\" class=\"headerlink\" title=\"索引优化\"></a>索引优化</h4></li>\n<li>1）通过explain，查看执行计划，检查索引使用情况，没有用到索引，考虑创建</li>\n<li>2）创建索引前，查看索引的选择性distinct，判断该字段是否适创建索引<br> 索引选择性指不重复的索引值和数据记录总数的比值，越接近1越好；主键索引和唯一索引选择性是1</li>\n<li>3）创建索引后，再查看执行计划，对比两次结果，查看效率是否提高<h4 id=\"慢查询优化\"><a href=\"#慢查询优化\" class=\"headerlink\" title=\"慢查询优化\"></a>慢查询优化</h4></li>\n<li>1）如果一个select语句中没有where条件，只有单纯的group by | order by，这是无法使用索引的。需要有where作为基础铺垫，遵从最左原则才能使用索引。</li>\n</ul>\n<h3 id=\"服务器优化\"><a href=\"#服务器优化\" class=\"headerlink\" title=\"服务器优化\"></a>服务器优化</h3><h4 id=\"读写分离\"><a href=\"#读写分离\" class=\"headerlink\" title=\"读写分离\"></a>读写分离</h4><h4 id=\"分库分表\"><a href=\"#分库分表\" class=\"headerlink\" title=\"分库分表\"></a>分库分表</h4>"},{"title":"MySQL函数","abbrlink":"mysql-functions","date":"2018-03-29T09:28:00.000Z","updated":"2018-04-03T09:28:00.000Z","_content":"记录几个常用的MySQL函数：\n\n#### LAST_INSERT_ID([expr])\n\n自动返回最后一个INSERT或 UPDATE 问询为 AUTO_INCREMENT列设置的第一个发生的值。\n如果一次性insert多条数据，只返回第一个数据的主键。\n``` \nmysql> SELECT * FROM t;\n\t+----+------+\n\t| id | name |\n\t|  1 | Bob  |\n\t+----+------+\n\nmysql> INSERT INTO t VALUES  (NULL, 'Mary'), (NULL, 'Jane'), (NULL, 'Lisa');\nmysql> SELECT * FROM t;\n\t+----+------+\n\t| id | name |\n\t|  1 | Bob  |\n\t|  2 | Mary |\n\t|  3 | Jane |\n\t|  4 | Lisa |\n\t+----+------+\nmysql> SELECT LAST_INSERT_ID();\n\t->2;\n```\n注：假如你使用 INSERT IGNORE而记录被忽略，则AUTO_INCREMENT 计数器不会增量，而 LAST_INSERT_ID() 返回0,这反映出没有插入任何记录。\n\n\n若给出作为到LAST_INSERT_ID()的参数expr ，则参数的值被函数返回，并作为被LAST_INSERT_ID()返回的下一个值而被记忆。这可用于模拟序列：\n\n``` \nmysql> CREATE TABLE sequence (id INT NOT NULL);\nmysql> INSERT INTO sequence VALUES (0);\nmysql> UPDATE sequence SET id=LAST_INSERT_ID(id+1);\nmysql> SELECT LAST_INSERT_ID();\n     ->1;\n```\n","source":"_posts/MySQL/MySQL函数.md","raw":"---\ntitle: MySQL函数\ntags: [MySQL]\ncategories: MySQL\nabbrlink: 'mysql-functions'\ndate: 2018-03-29 17:28:00\nupdated: 2018-04-03 17:28:00\n---\n记录几个常用的MySQL函数：\n\n#### LAST_INSERT_ID([expr])\n\n自动返回最后一个INSERT或 UPDATE 问询为 AUTO_INCREMENT列设置的第一个发生的值。\n如果一次性insert多条数据，只返回第一个数据的主键。\n``` \nmysql> SELECT * FROM t;\n\t+----+------+\n\t| id | name |\n\t|  1 | Bob  |\n\t+----+------+\n\nmysql> INSERT INTO t VALUES  (NULL, 'Mary'), (NULL, 'Jane'), (NULL, 'Lisa');\nmysql> SELECT * FROM t;\n\t+----+------+\n\t| id | name |\n\t|  1 | Bob  |\n\t|  2 | Mary |\n\t|  3 | Jane |\n\t|  4 | Lisa |\n\t+----+------+\nmysql> SELECT LAST_INSERT_ID();\n\t->2;\n```\n注：假如你使用 INSERT IGNORE而记录被忽略，则AUTO_INCREMENT 计数器不会增量，而 LAST_INSERT_ID() 返回0,这反映出没有插入任何记录。\n\n\n若给出作为到LAST_INSERT_ID()的参数expr ，则参数的值被函数返回，并作为被LAST_INSERT_ID()返回的下一个值而被记忆。这可用于模拟序列：\n\n``` \nmysql> CREATE TABLE sequence (id INT NOT NULL);\nmysql> INSERT INTO sequence VALUES (0);\nmysql> UPDATE sequence SET id=LAST_INSERT_ID(id+1);\nmysql> SELECT LAST_INSERT_ID();\n     ->1;\n```\n","slug":"MySQL/MySQL函数","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2th001goshge7sxg1ux","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>记录几个常用的MySQL函数：</p>\n<h4 id=\"LAST-INSERT-ID-expr\"><a href=\"#LAST-INSERT-ID-expr\" class=\"headerlink\" title=\"LAST_INSERT_ID([expr])\"></a>LAST_INSERT_ID([expr])</h4><p>自动返回最后一个INSERT或 UPDATE 问询为 AUTO_INCREMENT列设置的第一个发生的值。<br>如果一次性insert多条数据，只返回第一个数据的主键。<br></p><figure class=\"highlight gherkin\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; SELECT <span class=\"symbol\">*</span> FROM t;</span><br><span class=\"line\">\t+----+------+</span><br><span class=\"line\">\t|<span class=\"string\"> id </span>|<span class=\"string\"> name </span>|</span><br><span class=\"line\">\t|<span class=\"string\">  1 </span>|<span class=\"string\"> Bob  </span>|</span><br><span class=\"line\">\t+----+------+</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; INSERT INTO t VALUES  (NULL, 'Mary'), (NULL, 'Jane'), (NULL, 'Lisa');</span><br><span class=\"line\">mysql&gt; SELECT <span class=\"symbol\">*</span> FROM t;</span><br><span class=\"line\">\t+----+------+</span><br><span class=\"line\">\t|<span class=\"string\"> id </span>|<span class=\"string\"> name </span>|</span><br><span class=\"line\">\t|<span class=\"string\">  1 </span>|<span class=\"string\"> Bob  </span>|</span><br><span class=\"line\">\t|<span class=\"string\">  2 </span>|<span class=\"string\"> Mary </span>|</span><br><span class=\"line\">\t|<span class=\"string\">  3 </span>|<span class=\"string\"> Jane </span>|</span><br><span class=\"line\">\t|<span class=\"string\">  4 </span>|<span class=\"string\"> Lisa </span>|</span><br><span class=\"line\">\t+----+------+</span><br><span class=\"line\">mysql&gt; SELECT LAST_INSERT_ID();</span><br><span class=\"line\">\t-&gt;2;</span><br></pre></td></tr></tbody></table></figure><br>注：假如你使用 INSERT IGNORE而记录被忽略，则AUTO_INCREMENT 计数器不会增量，而 LAST_INSERT_ID() 返回0,这反映出没有插入任何记录。<p></p>\n<p>若给出作为到LAST_INSERT_ID()的参数expr ，则参数的值被函数返回，并作为被LAST_INSERT_ID()返回的下一个值而被记忆。这可用于模拟序列：</p>\n<figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">sequence</span> (id <span class=\"type\">INT</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>);</span><br><span class=\"line\">mysql&gt; <span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"keyword\">sequence</span> <span class=\"keyword\">VALUES</span> (<span class=\"number\">0</span>);</span><br><span class=\"line\">mysql&gt; <span class=\"keyword\">UPDATE</span> <span class=\"keyword\">sequence</span> <span class=\"keyword\">SET</span> id=LAST_INSERT_ID(id+<span class=\"number\">1</span>);</span><br><span class=\"line\">mysql&gt; <span class=\"keyword\">SELECT</span> LAST_INSERT_ID();</span><br><span class=\"line\">     -&gt;<span class=\"number\">1</span>;</span><br></pre></td></tr></tbody></table></figure>\n","excerpt":"","more":"<p>记录几个常用的MySQL函数：</p>\n<h4 id=\"LAST-INSERT-ID-expr\"><a href=\"#LAST-INSERT-ID-expr\" class=\"headerlink\" title=\"LAST_INSERT_ID([expr])\"></a>LAST_INSERT_ID([expr])</h4><p>自动返回最后一个INSERT或 UPDATE 问询为 AUTO_INCREMENT列设置的第一个发生的值。<br>如果一次性insert多条数据，只返回第一个数据的主键。<br><figure class=\"highlight gherkin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; SELECT <span class=\"symbol\">*</span> FROM t;</span><br><span class=\"line\">\t+----+------+</span><br><span class=\"line\">\t|<span class=\"string\"> id </span>|<span class=\"string\"> name </span>|</span><br><span class=\"line\">\t|<span class=\"string\">  1 </span>|<span class=\"string\"> Bob  </span>|</span><br><span class=\"line\">\t+----+------+</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; INSERT INTO t VALUES  (NULL, &#x27;Mary&#x27;), (NULL, &#x27;Jane&#x27;), (NULL, &#x27;Lisa&#x27;);</span><br><span class=\"line\">mysql&gt; SELECT <span class=\"symbol\">*</span> FROM t;</span><br><span class=\"line\">\t+----+------+</span><br><span class=\"line\">\t|<span class=\"string\"> id </span>|<span class=\"string\"> name </span>|</span><br><span class=\"line\">\t|<span class=\"string\">  1 </span>|<span class=\"string\"> Bob  </span>|</span><br><span class=\"line\">\t|<span class=\"string\">  2 </span>|<span class=\"string\"> Mary </span>|</span><br><span class=\"line\">\t|<span class=\"string\">  3 </span>|<span class=\"string\"> Jane </span>|</span><br><span class=\"line\">\t|<span class=\"string\">  4 </span>|<span class=\"string\"> Lisa </span>|</span><br><span class=\"line\">\t+----+------+</span><br><span class=\"line\">mysql&gt; SELECT LAST_INSERT_ID();</span><br><span class=\"line\">\t-&gt;2;</span><br></pre></td></tr></table></figure><br>注：假如你使用 INSERT IGNORE而记录被忽略，则AUTO_INCREMENT 计数器不会增量，而 LAST_INSERT_ID() 返回0,这反映出没有插入任何记录。</p>\n<p>若给出作为到LAST_INSERT_ID()的参数expr ，则参数的值被函数返回，并作为被LAST_INSERT_ID()返回的下一个值而被记忆。这可用于模拟序列：</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; <span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">sequence</span> (id <span class=\"type\">INT</span> <span class=\"keyword\">NOT</span> <span class=\"keyword\">NULL</span>);</span><br><span class=\"line\">mysql&gt; <span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"keyword\">sequence</span> <span class=\"keyword\">VALUES</span> (<span class=\"number\">0</span>);</span><br><span class=\"line\">mysql&gt; <span class=\"keyword\">UPDATE</span> <span class=\"keyword\">sequence</span> <span class=\"keyword\">SET</span> id=LAST_INSERT_ID(id+<span class=\"number\">1</span>);</span><br><span class=\"line\">mysql&gt; <span class=\"keyword\">SELECT</span> LAST_INSERT_ID();</span><br><span class=\"line\">     -&gt;<span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n"},{"title":"MySQL常见报错问题","abbrlink":"mysql-errors","date":"2019-03-20T09:37:00.000Z","updated":"2019-03-20T09:40:00.000Z","_content":" \n1. [Err] 1066 - Not unique table/alias: 's'\n\n   原因：SQL语句中存在多个表的别名为's'\n\n","source":"_posts/MySQL/MySQL常见报错问题.md","raw":"---\ntitle: MySQL常见报错问题\ntags: [MySQL]\ncategories: MySQL\nabbrlink: 'mysql-errors'\ndate: 2019-03-20 17:37:00\nupdated: 2019-03-20 17:40:00\n---\n \n1. [Err] 1066 - Not unique table/alias: 's'\n\n   原因：SQL语句中存在多个表的别名为's'\n\n","slug":"MySQL/MySQL常见报错问题","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2th001ioshgcn6a45mx","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li><p>[Err] 1066 - Not unique table/alias: ‘s’</p>\n<p>原因：SQL语句中存在多个表的别名为’s’</p>\n</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li><p>[Err] 1066 - Not unique table/alias: ‘s’</p>\n<p>原因：SQL语句中存在多个表的别名为’s’</p>\n</li>\n</ol>\n"},{"title":"MySQL中decimal类型","abbrlink":"mysql-decimal","date":"2020-07-05T10:26:19.000Z","updated":"2020-07-05T10:26:19.000Z","_content":"\n在mysql中，经常会使用decimal数据类型来保存精度准确的数值，如工资、价格、金额等货币数据。\n- 语法及其说明\n`columName decimal(P,D);`\nP表示有效数字的精度，范围为1~65；P的默认值为10，如`columName decimal;`表示不含小数数字最大长度为10。\nD表示小数点后的位数，范围为0~30，D<=P；如果D为空(`columName decimal(P);`)或者0(`columName decimal(P,0);`)表示列不包含小数部分或小数点。\n- 示例\n`amount decimal(6,2);`表示amount列最多可以存储6位数字，小数点位数为2位；amount列的范围为-9999.99~9999.99。\n","source":"_posts/MySQL/MySQL中decimal类型.md","raw":"---\ntitle: MySQL中decimal类型\ntags: [MySQL]\ncategories: MySQL\nabbrlink: 'mysql-decimal'\ndate: 2020-07-05 18:26:19\nupdated: 2020-07-05 18:26:19\n---\n\n在mysql中，经常会使用decimal数据类型来保存精度准确的数值，如工资、价格、金额等货币数据。\n- 语法及其说明\n`columName decimal(P,D);`\nP表示有效数字的精度，范围为1~65；P的默认值为10，如`columName decimal;`表示不含小数数字最大长度为10。\nD表示小数点后的位数，范围为0~30，D<=P；如果D为空(`columName decimal(P);`)或者0(`columName decimal(P,0);`)表示列不包含小数部分或小数点。\n- 示例\n`amount decimal(6,2);`表示amount列最多可以存储6位数字，小数点位数为2位；amount列的范围为-9999.99~9999.99。\n","slug":"MySQL/MySQL中decimal类型","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ti001loshg3m8u4nhr","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>在mysql中，经常会使用decimal数据类型来保存精度准确的数值，如工资、价格、金额等货币数据。</p>\n<ul>\n<li>语法及其说明<br><code>columName decimal(P,D);</code><br>P表示有效数字的精度，范围为1~65；P的默认值为10，如<code>columName decimal;</code>表示不含小数数字最大长度为10。<br>D表示小数点后的位数，范围为0~30，D&lt;=P；如果D为空(<code>columName decimal(P);</code>)或者0(<code>columName decimal(P,0);</code>)表示列不包含小数部分或小数点。</li>\n<li>示例<br><code>amount decimal(6,2);</code>表示amount列最多可以存储6位数字，小数点位数为2位；amount列的范围为-9999.99~9999.99。</li>\n</ul>\n","excerpt":"","more":"<p>在mysql中，经常会使用decimal数据类型来保存精度准确的数值，如工资、价格、金额等货币数据。</p>\n<ul>\n<li>语法及其说明<br><code>columName decimal(P,D);</code><br>P表示有效数字的精度，范围为1~65；P的默认值为10，如<code>columName decimal;</code>表示不含小数数字最大长度为10。<br>D表示小数点后的位数，范围为0~30，D&lt;=P；如果D为空(<code>columName decimal(P);</code>)或者0(<code>columName decimal(P,0);</code>)表示列不包含小数部分或小数点。</li>\n<li>示例<br><code>amount decimal(6,2);</code>表示amount列最多可以存储6位数字，小数点位数为2位；amount列的范围为-9999.99~9999.99。</li>\n</ul>\n"},{"title":"MySQL架构设计","abbrlink":"mysql-structural-design","date":"2020-03-22T12:16:25.000Z","updated":"2020-03-22T12:16:25.000Z","_content":" \n### 1、MySQL架构设计中的经验\n - 1）根据公司现有业务设计合理架构\n - 2）选择成熟架构方案\n - 3）因地制宜，根据实际设备情况做出选择\n - 4）考虑方案的可行性\n - 5）越简单越好，越适合公司越好\n","source":"_posts/MySQL/MySQL架构设计.md","raw":"---\ntitle: MySQL架构设计\ntags: [架构设计]\ncategories: MySQL\nabbrlink: 'mysql-structural-design'\ndate: 2020-03-22 20:16:25\nupdated: 2020-03-22 20:16:25\n---\n \n### 1、MySQL架构设计中的经验\n - 1）根据公司现有业务设计合理架构\n - 2）选择成熟架构方案\n - 3）因地制宜，根据实际设备情况做出选择\n - 4）考虑方案的可行性\n - 5）越简单越好，越适合公司越好\n","slug":"MySQL/MySQL架构设计","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tj001ooshggli8by9w","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1、MySQL架构设计中的经验\"><a href=\"#1、MySQL架构设计中的经验\" class=\"headerlink\" title=\"1、MySQL架构设计中的经验\"></a>1、MySQL架构设计中的经验</h3><ul>\n<li>1）根据公司现有业务设计合理架构</li>\n<li>2）选择成熟架构方案</li>\n<li>3）因地制宜，根据实际设备情况做出选择</li>\n<li>4）考虑方案的可行性</li>\n<li>5）越简单越好，越适合公司越好</li>\n</ul>\n","excerpt":"","more":"<h3 id=\"1、MySQL架构设计中的经验\"><a href=\"#1、MySQL架构设计中的经验\" class=\"headerlink\" title=\"1、MySQL架构设计中的经验\"></a>1、MySQL架构设计中的经验</h3><ul>\n<li>1）根据公司现有业务设计合理架构</li>\n<li>2）选择成熟架构方案</li>\n<li>3）因地制宜，根据实际设备情况做出选择</li>\n<li>4）考虑方案的可行性</li>\n<li>5）越简单越好，越适合公司越好</li>\n</ul>\n"},{"title":"MySQL笔记","abbrlink":"mysql-notes","date":"2018-06-04T03:19:00.000Z","updated":"2021-10-11T11:10:00.000Z","_content":"\n### 1. mysql根据汉字首字母排序的方法\n```\n-- utf8_general_ci编码\nselect * from tname order by convert(name using gbk);\n```\n   \n### 2. 删除表数据的时候，如果表使用了别名\n应该这样写：`DELETE a FROM table a;`\n\n### 3. 不使用缓存执行某个查询sql\n`SELECT SQL_NO_CACHE xx, xx from tb;`\n\n### 4. MySql中Blob与Text的区别\nBLOB列被视为二进制字符串，TEXT列被视为非二进制字符串。\n\n### 5. MyISAM和InnoDB的区别\nInnodb 支持事务处理与外键和行级锁；\nMyISAM类型的表强调的是性能，其执行速度比InnoDB类型更快。\n\n### 6. 数据库恢复\n是指通过技术手段将保存在数据库中丢失的电子数据进行抢救和恢复的技术。\n\n### 7. mysql删除自定义函数：\n```DROP FUNCTION IF EXISTS `函数名`;```\n\n### 8. 插入数据：\n``` sql\n    insert into tb (field1,field2,field3……) value (val1,val2,val3……);\n    insert into tb (field1,field2,field3……) values (val1,val2,val3……);\n    insert into tb set field1=val1,field2=val2,field3=val3;\n    insert into tb (field1,field2,field3……) values (val11,val12,val13……),(val21,val22,val23……),(val31,val32,val33……);\n    insert ignore into tb (field1,field2,field3……) values (val1,val2,val3……);\t\t//使用ignore关键字忽略错误\n```\n\n### 9. 查询数据库中每个表的记录数：\n``` sql\n    use information_schema;\n    select table_name,table_rows from tables where TABLE_SCHEMA = 'dataBase' order by table_rows desc;  \n```\n\n### 10. mysql查询主键字段名：\n``` sql\nSELECT column_name FROM INFORMATION_SCHEMA.`KEY_COLUMN_USAGE` WHERE table_name='表名' AND constraint_name='PRIMARY';\n```\n\n### 11. mysql查询所有字段名：\n``` sql\nSELECT column_name FROM information_schema.columns WHERE table_name='表名';\n```\n\n### 12、null的问题：\n``` sql \nupdate t_classroom set building_name=null where build_id is not null;\n```\n\n### 13、获取指定字段的默认值：  \nDEFAULT(col_name)\n```sql\nselect DEFAULT(sort) from t_node_school limit 1;\n```\n\n### 14、mysql重命名表名：\n```alter table tb1 rename to tb2;```\n或者\n```rename tb1 to tb2;```\n\n### 15、null字段排序问题：\n\n设排序字段为sort，使用order by sort desc实现降序时，sort为null的数据会排在最后面；\n但是使用order by sort升序时，sort为null的数据会排在最前面，如果想将sort为null的数据排在后面，就需要加is null。\n如：`select * from t_grade order by sort is null, sort, create_time desc;`\n    \n### 16、主键设置规则\n 主键的值不可更新，未来可能会变更的字段不能设置为主键；\n 主键的值不可为空，且不能重复；\n \n### 17、查看某个表的所有列：\n```sql\nshow columns from tableName;  或者  describe tableName; //可以用来生成数据字典\n```\n \n### 18、下划线\"_\"通配符 匹配一个字符\n```sql\n select field1,field2 from tableName where field3 like \"_xx\";\n```\n \n### 19、日期转星期\n ```sql\n select weekday(\"2021-11-10\")+1 week;      \n -- 2021年11月10日是星期三\n```\n \n### 20、单条SQL语句完成多种数据统计\n ```sql\n-- 现需分别统计wl_student_score_logs表中exam_id为5的change_score增加量和减少量\nselect\nsum( if( change_score > 0, change_score, 0)) as increase_score,\nsum( if( change_score  < 0, change_score, 0)) as reduce_score\nfrom wl_student_score_logs where exam_id=5;\n```\n\n### 21、truncate、drop 和 delete 的区别\n    1. 执行速度：drop > truncate > detele；\n    2. delete 和 truncate 只删除表数据，而 drop 会删除表数据和表结构以及表的索引、约束和触发器；\n    3. delete 可以加 where 条件实现部分数据删除，而 truncate 和 drop 不能加 where 条件是整体删除；\n    4. truncate 和 drop 是立即执行，且不能恢复；而 delete 会走事务，可以撤回和恢复；\n    5. truncate 会重置自增列为 1，而 delete 不会重置自增列；\n    6. truncate 和 drop 是 DDL 语句，而 delete 是 DML 语句。\n\n### 22、修改自增列的值\n    `alter table tname auto_increment=n;`\n    一个表中只能有一个自增列,如果设置多个自增列，那么 SQL 执行就会报错。除此之外还要注意自增列应该为整数类型，且 auto_increment 需要配合 key 一起使用，这个 key 可以是 primary key 或 foreign key。\n    \n### 23、生成批量清空指定数据库的语句\n    `select CONCAT('TRUNCATE TABLE ',table_schema,'.',TABLE_NAME, ';') 清空语句 from INFORMATION_SCHEMA.TABLES where table_schema ='库名';`    \n","source":"_posts/MySQL/MySQL笔记.md","raw":"---\ntitle: MySQL笔记\ntags: [MySQL]\ncategories: MySQL\nabbrlink: 'mysql-notes'\ndate: 2018-06-04 11:19:00\nupdated: 2021-10-11 19:10:00\n---\n\n### 1. mysql根据汉字首字母排序的方法\n```\n-- utf8_general_ci编码\nselect * from tname order by convert(name using gbk);\n```\n   \n### 2. 删除表数据的时候，如果表使用了别名\n应该这样写：`DELETE a FROM table a;`\n\n### 3. 不使用缓存执行某个查询sql\n`SELECT SQL_NO_CACHE xx, xx from tb;`\n\n### 4. MySql中Blob与Text的区别\nBLOB列被视为二进制字符串，TEXT列被视为非二进制字符串。\n\n### 5. MyISAM和InnoDB的区别\nInnodb 支持事务处理与外键和行级锁；\nMyISAM类型的表强调的是性能，其执行速度比InnoDB类型更快。\n\n### 6. 数据库恢复\n是指通过技术手段将保存在数据库中丢失的电子数据进行抢救和恢复的技术。\n\n### 7. mysql删除自定义函数：\n```DROP FUNCTION IF EXISTS `函数名`;```\n\n### 8. 插入数据：\n``` sql\n    insert into tb (field1,field2,field3……) value (val1,val2,val3……);\n    insert into tb (field1,field2,field3……) values (val1,val2,val3……);\n    insert into tb set field1=val1,field2=val2,field3=val3;\n    insert into tb (field1,field2,field3……) values (val11,val12,val13……),(val21,val22,val23……),(val31,val32,val33……);\n    insert ignore into tb (field1,field2,field3……) values (val1,val2,val3……);\t\t//使用ignore关键字忽略错误\n```\n\n### 9. 查询数据库中每个表的记录数：\n``` sql\n    use information_schema;\n    select table_name,table_rows from tables where TABLE_SCHEMA = 'dataBase' order by table_rows desc;  \n```\n\n### 10. mysql查询主键字段名：\n``` sql\nSELECT column_name FROM INFORMATION_SCHEMA.`KEY_COLUMN_USAGE` WHERE table_name='表名' AND constraint_name='PRIMARY';\n```\n\n### 11. mysql查询所有字段名：\n``` sql\nSELECT column_name FROM information_schema.columns WHERE table_name='表名';\n```\n\n### 12、null的问题：\n``` sql \nupdate t_classroom set building_name=null where build_id is not null;\n```\n\n### 13、获取指定字段的默认值：  \nDEFAULT(col_name)\n```sql\nselect DEFAULT(sort) from t_node_school limit 1;\n```\n\n### 14、mysql重命名表名：\n```alter table tb1 rename to tb2;```\n或者\n```rename tb1 to tb2;```\n\n### 15、null字段排序问题：\n\n设排序字段为sort，使用order by sort desc实现降序时，sort为null的数据会排在最后面；\n但是使用order by sort升序时，sort为null的数据会排在最前面，如果想将sort为null的数据排在后面，就需要加is null。\n如：`select * from t_grade order by sort is null, sort, create_time desc;`\n    \n### 16、主键设置规则\n 主键的值不可更新，未来可能会变更的字段不能设置为主键；\n 主键的值不可为空，且不能重复；\n \n### 17、查看某个表的所有列：\n```sql\nshow columns from tableName;  或者  describe tableName; //可以用来生成数据字典\n```\n \n### 18、下划线\"_\"通配符 匹配一个字符\n```sql\n select field1,field2 from tableName where field3 like \"_xx\";\n```\n \n### 19、日期转星期\n ```sql\n select weekday(\"2021-11-10\")+1 week;      \n -- 2021年11月10日是星期三\n```\n \n### 20、单条SQL语句完成多种数据统计\n ```sql\n-- 现需分别统计wl_student_score_logs表中exam_id为5的change_score增加量和减少量\nselect\nsum( if( change_score > 0, change_score, 0)) as increase_score,\nsum( if( change_score  < 0, change_score, 0)) as reduce_score\nfrom wl_student_score_logs where exam_id=5;\n```\n\n### 21、truncate、drop 和 delete 的区别\n    1. 执行速度：drop > truncate > detele；\n    2. delete 和 truncate 只删除表数据，而 drop 会删除表数据和表结构以及表的索引、约束和触发器；\n    3. delete 可以加 where 条件实现部分数据删除，而 truncate 和 drop 不能加 where 条件是整体删除；\n    4. truncate 和 drop 是立即执行，且不能恢复；而 delete 会走事务，可以撤回和恢复；\n    5. truncate 会重置自增列为 1，而 delete 不会重置自增列；\n    6. truncate 和 drop 是 DDL 语句，而 delete 是 DML 语句。\n\n### 22、修改自增列的值\n    `alter table tname auto_increment=n;`\n    一个表中只能有一个自增列,如果设置多个自增列，那么 SQL 执行就会报错。除此之外还要注意自增列应该为整数类型，且 auto_increment 需要配合 key 一起使用，这个 key 可以是 primary key 或 foreign key。\n    \n### 23、生成批量清空指定数据库的语句\n    `select CONCAT('TRUNCATE TABLE ',table_schema,'.',TABLE_NAME, ';') 清空语句 from INFORMATION_SCHEMA.TABLES where table_schema ='库名';`    \n","slug":"MySQL/MySQL笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tj001qoshg0xqm1cxl","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-mysql根据汉字首字母排序的方法\"><a href=\"#1-mysql根据汉字首字母排序的方法\" class=\"headerlink\" title=\"1. mysql根据汉字首字母排序的方法\"></a>1. mysql根据汉字首字母排序的方法</h3><figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- utf8_general_ci编码</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> tname <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> convert(<span class=\"type\">name</span> <span class=\"keyword\">using</span> gbk);</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"2-删除表数据的时候，如果表使用了别名\"><a href=\"#2-删除表数据的时候，如果表使用了别名\" class=\"headerlink\" title=\"2. 删除表数据的时候，如果表使用了别名\"></a>2. 删除表数据的时候，如果表使用了别名</h3><p>应该这样写：<code>DELETE a FROM table a;</code></p>\n<h3 id=\"3-不使用缓存执行某个查询sql\"><a href=\"#3-不使用缓存执行某个查询sql\" class=\"headerlink\" title=\"3. 不使用缓存执行某个查询sql\"></a>3. 不使用缓存执行某个查询sql</h3><p><code>SELECT SQL_NO_CACHE xx, xx from tb;</code></p>\n<h3 id=\"4-MySql中Blob与Text的区别\"><a href=\"#4-MySql中Blob与Text的区别\" class=\"headerlink\" title=\"4. MySql中Blob与Text的区别\"></a>4. MySql中Blob与Text的区别</h3><p>BLOB列被视为二进制字符串，TEXT列被视为非二进制字符串。</p>\n<h3 id=\"5-MyISAM和InnoDB的区别\"><a href=\"#5-MyISAM和InnoDB的区别\" class=\"headerlink\" title=\"5. MyISAM和InnoDB的区别\"></a>5. MyISAM和InnoDB的区别</h3><p>Innodb 支持事务处理与外键和行级锁；<br>MyISAM类型的表强调的是性能，其执行速度比InnoDB类型更快。</p>\n<h3 id=\"6-数据库恢复\"><a href=\"#6-数据库恢复\" class=\"headerlink\" title=\"6. 数据库恢复\"></a>6. 数据库恢复</h3><p>是指通过技术手段将保存在数据库中丢失的电子数据进行抢救和恢复的技术。</p>\n<h3 id=\"7-mysql删除自定义函数：\"><a href=\"#7-mysql删除自定义函数：\" class=\"headerlink\" title=\"7. mysql删除自定义函数：\"></a>7. mysql删除自定义函数：</h3><p><code>DROP FUNCTION IF EXISTS `函数名`;</code></p>\n<h3 id=\"8-插入数据：\"><a href=\"#8-插入数据：\" class=\"headerlink\" title=\"8. 插入数据：\"></a>8. 插入数据：</h3><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb (field1,field2,field3……) <span class=\"keyword\">value</span> (val1,val2,val3……);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb (field1,field2,field3……) <span class=\"keyword\">values</span> (val1,val2,val3……);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb <span class=\"keyword\">set</span> field1<span class=\"operator\">=</span>val1,field2<span class=\"operator\">=</span>val2,field3<span class=\"operator\">=</span>val3;</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb (field1,field2,field3……) <span class=\"keyword\">values</span> (val11,val12,val13……),(val21,val22,val23……),(val31,val32,val33……);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> ignore <span class=\"keyword\">into</span> tb (field1,field2,field3……) <span class=\"keyword\">values</span> (val1,val2,val3……);\t\t<span class=\"operator\">/</span><span class=\"operator\">/</span>使用ignore关键字忽略错误</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"9-查询数据库中每个表的记录数：\"><a href=\"#9-查询数据库中每个表的记录数：\" class=\"headerlink\" title=\"9. 查询数据库中每个表的记录数：\"></a>9. 查询数据库中每个表的记录数：</h3><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use information_schema;</span><br><span class=\"line\"><span class=\"keyword\">select</span> table_name,table_rows <span class=\"keyword\">from</span> tables <span class=\"keyword\">where</span> TABLE_SCHEMA <span class=\"operator\">=</span> <span class=\"string\">'dataBase'</span> <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> table_rows <span class=\"keyword\">desc</span>;  </span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"10-mysql查询主键字段名：\"><a href=\"#10-mysql查询主键字段名：\" class=\"headerlink\" title=\"10. mysql查询主键字段名：\"></a>10. mysql查询主键字段名：</h3><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> column_name <span class=\"keyword\">FROM</span> INFORMATION_SCHEMA.`KEY_COLUMN_USAGE` <span class=\"keyword\">WHERE</span> table_name<span class=\"operator\">=</span><span class=\"string\">'表名'</span> <span class=\"keyword\">AND</span> constraint_name<span class=\"operator\">=</span><span class=\"string\">'PRIMARY'</span>;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"11-mysql查询所有字段名：\"><a href=\"#11-mysql查询所有字段名：\" class=\"headerlink\" title=\"11. mysql查询所有字段名：\"></a>11. mysql查询所有字段名：</h3><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> column_name <span class=\"keyword\">FROM</span> information_schema.columns <span class=\"keyword\">WHERE</span> table_name<span class=\"operator\">=</span><span class=\"string\">'表名'</span>;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"12、null的问题：\"><a href=\"#12、null的问题：\" class=\"headerlink\" title=\"12、null的问题：\"></a>12、null的问题：</h3><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> t_classroom <span class=\"keyword\">set</span> building_name<span class=\"operator\">=</span><span class=\"keyword\">null</span> <span class=\"keyword\">where</span> build_id <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"13、获取指定字段的默认值：\"><a href=\"#13、获取指定字段的默认值：\" class=\"headerlink\" title=\"13、获取指定字段的默认值：\"></a>13、获取指定字段的默认值：</h3><p>DEFAULT(col_name)<br></p><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">DEFAULT</span>(sort) <span class=\"keyword\">from</span> t_node_school limit <span class=\"number\">1</span>;</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h3 id=\"14、mysql重命名表名：\"><a href=\"#14、mysql重命名表名：\" class=\"headerlink\" title=\"14、mysql重命名表名：\"></a>14、mysql重命名表名：</h3><p><code>alter table tb1 rename to tb2;</code><br>或者<br><code>rename tb1 to tb2;</code></p>\n<h3 id=\"15、null字段排序问题：\"><a href=\"#15、null字段排序问题：\" class=\"headerlink\" title=\"15、null字段排序问题：\"></a>15、null字段排序问题：</h3><p>设排序字段为sort，使用order by sort desc实现降序时，sort为null的数据会排在最后面；<br>但是使用order by sort升序时，sort为null的数据会排在最前面，如果想将sort为null的数据排在后面，就需要加is null。<br>如：<code>select * from t_grade order by sort is null, sort, create_time desc;</code></p>\n<h3 id=\"16、主键设置规则\"><a href=\"#16、主键设置规则\" class=\"headerlink\" title=\"16、主键设置规则\"></a>16、主键设置规则</h3><p> 主键的值不可更新，未来可能会变更的字段不能设置为主键；<br> 主键的值不可为空，且不能重复；</p>\n<h3 id=\"17、查看某个表的所有列：\"><a href=\"#17、查看某个表的所有列：\" class=\"headerlink\" title=\"17、查看某个表的所有列：\"></a>17、查看某个表的所有列：</h3><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> columns <span class=\"keyword\">from</span> tableName;  或者  <span class=\"keyword\">describe</span> tableName; <span class=\"operator\">/</span><span class=\"operator\">/</span>可以用来生成数据字典</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"18、下划线”-”通配符-匹配一个字符\"><a href=\"#18、下划线”-”通配符-匹配一个字符\" class=\"headerlink\" title=\"18、下划线”_”通配符 匹配一个字符\"></a>18、下划线”_”通配符 匹配一个字符</h3><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> field1,field2 <span class=\"keyword\">from</span> tableName <span class=\"keyword\">where</span> field3 <span class=\"keyword\">like</span> \"_xx\";</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"19、日期转星期\"><a href=\"#19、日期转星期\" class=\"headerlink\" title=\"19、日期转星期\"></a>19、日期转星期</h3> <figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> weekday(\"2021-11-10\")<span class=\"operator\">+</span><span class=\"number\">1</span> week;      </span><br><span class=\"line\"><span class=\"comment\">-- 2021年11月10日是星期三</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"20、单条SQL语句完成多种数据统计\"><a href=\"#20、单条SQL语句完成多种数据统计\" class=\"headerlink\" title=\"20、单条SQL语句完成多种数据统计\"></a>20、单条SQL语句完成多种数据统计</h3> <figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 现需分别统计wl_student_score_logs表中exam_id为5的change_score增加量和减少量</span></span><br><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"><span class=\"built_in\">sum</span>( if( change_score <span class=\"operator\">&gt;</span> <span class=\"number\">0</span>, change_score, <span class=\"number\">0</span>)) <span class=\"keyword\">as</span> increase_score,</span><br><span class=\"line\"><span class=\"built_in\">sum</span>( if( change_score  <span class=\"operator\">&lt;</span> <span class=\"number\">0</span>, change_score, <span class=\"number\">0</span>)) <span class=\"keyword\">as</span> reduce_score</span><br><span class=\"line\"><span class=\"keyword\">from</span> wl_student_score_logs <span class=\"keyword\">where</span> exam_id<span class=\"operator\">=</span><span class=\"number\">5</span>;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"21、truncate、drop-和-delete-的区别\"><a href=\"#21、truncate、drop-和-delete-的区别\" class=\"headerlink\" title=\"21、truncate、drop 和 delete 的区别\"></a>21、truncate、drop 和 delete 的区别</h3><pre><code>1. 执行速度：drop &gt; truncate &gt; detele；\n2. delete 和 truncate 只删除表数据，而 drop 会删除表数据和表结构以及表的索引、约束和触发器；\n3. delete 可以加 where 条件实现部分数据删除，而 truncate 和 drop 不能加 where 条件是整体删除；\n4. truncate 和 drop 是立即执行，且不能恢复；而 delete 会走事务，可以撤回和恢复；\n5. truncate 会重置自增列为 1，而 delete 不会重置自增列；\n6. truncate 和 drop 是 DDL 语句，而 delete 是 DML 语句。\n</code></pre><h3 id=\"22、修改自增列的值\"><a href=\"#22、修改自增列的值\" class=\"headerlink\" title=\"22、修改自增列的值\"></a>22、修改自增列的值</h3><pre><code>`alter table tname auto_increment=n;`\n一个表中只能有一个自增列,如果设置多个自增列，那么 SQL 执行就会报错。除此之外还要注意自增列应该为整数类型，且 auto_increment 需要配合 key 一起使用，这个 key 可以是 primary key 或 foreign key。\n</code></pre><h3 id=\"23、生成批量清空指定数据库的语句\"><a href=\"#23、生成批量清空指定数据库的语句\" class=\"headerlink\" title=\"23、生成批量清空指定数据库的语句\"></a>23、生成批量清空指定数据库的语句</h3><pre><code>`select CONCAT('TRUNCATE TABLE ',table_schema,'.',TABLE_NAME, ';') 清空语句 from INFORMATION_SCHEMA.TABLES where table_schema ='库名';`    \n</code></pre>","excerpt":"","more":"<h3 id=\"1-mysql根据汉字首字母排序的方法\"><a href=\"#1-mysql根据汉字首字母排序的方法\" class=\"headerlink\" title=\"1. mysql根据汉字首字母排序的方法\"></a>1. mysql根据汉字首字母排序的方法</h3><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- utf8_general_ci编码</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> tname <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> convert(<span class=\"type\">name</span> <span class=\"keyword\">using</span> gbk);</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-删除表数据的时候，如果表使用了别名\"><a href=\"#2-删除表数据的时候，如果表使用了别名\" class=\"headerlink\" title=\"2. 删除表数据的时候，如果表使用了别名\"></a>2. 删除表数据的时候，如果表使用了别名</h3><p>应该这样写：<code>DELETE a FROM table a;</code></p>\n<h3 id=\"3-不使用缓存执行某个查询sql\"><a href=\"#3-不使用缓存执行某个查询sql\" class=\"headerlink\" title=\"3. 不使用缓存执行某个查询sql\"></a>3. 不使用缓存执行某个查询sql</h3><p><code>SELECT SQL_NO_CACHE xx, xx from tb;</code></p>\n<h3 id=\"4-MySql中Blob与Text的区别\"><a href=\"#4-MySql中Blob与Text的区别\" class=\"headerlink\" title=\"4. MySql中Blob与Text的区别\"></a>4. MySql中Blob与Text的区别</h3><p>BLOB列被视为二进制字符串，TEXT列被视为非二进制字符串。</p>\n<h3 id=\"5-MyISAM和InnoDB的区别\"><a href=\"#5-MyISAM和InnoDB的区别\" class=\"headerlink\" title=\"5. MyISAM和InnoDB的区别\"></a>5. MyISAM和InnoDB的区别</h3><p>Innodb 支持事务处理与外键和行级锁；<br>MyISAM类型的表强调的是性能，其执行速度比InnoDB类型更快。</p>\n<h3 id=\"6-数据库恢复\"><a href=\"#6-数据库恢复\" class=\"headerlink\" title=\"6. 数据库恢复\"></a>6. 数据库恢复</h3><p>是指通过技术手段将保存在数据库中丢失的电子数据进行抢救和恢复的技术。</p>\n<h3 id=\"7-mysql删除自定义函数：\"><a href=\"#7-mysql删除自定义函数：\" class=\"headerlink\" title=\"7. mysql删除自定义函数：\"></a>7. mysql删除自定义函数：</h3><p><code>DROP FUNCTION IF EXISTS `函数名`;</code></p>\n<h3 id=\"8-插入数据：\"><a href=\"#8-插入数据：\" class=\"headerlink\" title=\"8. 插入数据：\"></a>8. 插入数据：</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb (field1,field2,field3……) <span class=\"keyword\">value</span> (val1,val2,val3……);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb (field1,field2,field3……) <span class=\"keyword\">values</span> (val1,val2,val3……);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb <span class=\"keyword\">set</span> field1<span class=\"operator\">=</span>val1,field2<span class=\"operator\">=</span>val2,field3<span class=\"operator\">=</span>val3;</span><br><span class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> tb (field1,field2,field3……) <span class=\"keyword\">values</span> (val11,val12,val13……),(val21,val22,val23……),(val31,val32,val33……);</span><br><span class=\"line\"><span class=\"keyword\">insert</span> ignore <span class=\"keyword\">into</span> tb (field1,field2,field3……) <span class=\"keyword\">values</span> (val1,val2,val3……);\t\t<span class=\"operator\">/</span><span class=\"operator\">/</span>使用ignore关键字忽略错误</span><br></pre></td></tr></table></figure>\n<h3 id=\"9-查询数据库中每个表的记录数：\"><a href=\"#9-查询数据库中每个表的记录数：\" class=\"headerlink\" title=\"9. 查询数据库中每个表的记录数：\"></a>9. 查询数据库中每个表的记录数：</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use information_schema;</span><br><span class=\"line\"><span class=\"keyword\">select</span> table_name,table_rows <span class=\"keyword\">from</span> tables <span class=\"keyword\">where</span> TABLE_SCHEMA <span class=\"operator\">=</span> <span class=\"string\">&#x27;dataBase&#x27;</span> <span class=\"keyword\">order</span> <span class=\"keyword\">by</span> table_rows <span class=\"keyword\">desc</span>;  </span><br></pre></td></tr></table></figure>\n<h3 id=\"10-mysql查询主键字段名：\"><a href=\"#10-mysql查询主键字段名：\" class=\"headerlink\" title=\"10. mysql查询主键字段名：\"></a>10. mysql查询主键字段名：</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> column_name <span class=\"keyword\">FROM</span> INFORMATION_SCHEMA.`KEY_COLUMN_USAGE` <span class=\"keyword\">WHERE</span> table_name<span class=\"operator\">=</span><span class=\"string\">&#x27;表名&#x27;</span> <span class=\"keyword\">AND</span> constraint_name<span class=\"operator\">=</span><span class=\"string\">&#x27;PRIMARY&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"11-mysql查询所有字段名：\"><a href=\"#11-mysql查询所有字段名：\" class=\"headerlink\" title=\"11. mysql查询所有字段名：\"></a>11. mysql查询所有字段名：</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> column_name <span class=\"keyword\">FROM</span> information_schema.columns <span class=\"keyword\">WHERE</span> table_name<span class=\"operator\">=</span><span class=\"string\">&#x27;表名&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"12、null的问题：\"><a href=\"#12、null的问题：\" class=\"headerlink\" title=\"12、null的问题：\"></a>12、null的问题：</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> t_classroom <span class=\"keyword\">set</span> building_name<span class=\"operator\">=</span><span class=\"keyword\">null</span> <span class=\"keyword\">where</span> build_id <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">null</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"13、获取指定字段的默认值：\"><a href=\"#13、获取指定字段的默认值：\" class=\"headerlink\" title=\"13、获取指定字段的默认值：\"></a>13、获取指定字段的默认值：</h3><p>DEFAULT(col_name)<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">DEFAULT</span>(sort) <span class=\"keyword\">from</span> t_node_school limit <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"14、mysql重命名表名：\"><a href=\"#14、mysql重命名表名：\" class=\"headerlink\" title=\"14、mysql重命名表名：\"></a>14、mysql重命名表名：</h3><p><code>alter table tb1 rename to tb2;</code><br>或者<br><code>rename tb1 to tb2;</code></p>\n<h3 id=\"15、null字段排序问题：\"><a href=\"#15、null字段排序问题：\" class=\"headerlink\" title=\"15、null字段排序问题：\"></a>15、null字段排序问题：</h3><p>设排序字段为sort，使用order by sort desc实现降序时，sort为null的数据会排在最后面；<br>但是使用order by sort升序时，sort为null的数据会排在最前面，如果想将sort为null的数据排在后面，就需要加is null。<br>如：<code>select * from t_grade order by sort is null, sort, create_time desc;</code></p>\n<h3 id=\"16、主键设置规则\"><a href=\"#16、主键设置规则\" class=\"headerlink\" title=\"16、主键设置规则\"></a>16、主键设置规则</h3><p> 主键的值不可更新，未来可能会变更的字段不能设置为主键；<br> 主键的值不可为空，且不能重复；</p>\n<h3 id=\"17、查看某个表的所有列：\"><a href=\"#17、查看某个表的所有列：\" class=\"headerlink\" title=\"17、查看某个表的所有列：\"></a>17、查看某个表的所有列：</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> columns <span class=\"keyword\">from</span> tableName;  或者  <span class=\"keyword\">describe</span> tableName; <span class=\"operator\">/</span><span class=\"operator\">/</span>可以用来生成数据字典</span><br></pre></td></tr></table></figure>\n<h3 id=\"18、下划线”-”通配符-匹配一个字符\"><a href=\"#18、下划线”-”通配符-匹配一个字符\" class=\"headerlink\" title=\"18、下划线”_”通配符 匹配一个字符\"></a>18、下划线”_”通配符 匹配一个字符</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> field1,field2 <span class=\"keyword\">from</span> tableName <span class=\"keyword\">where</span> field3 <span class=\"keyword\">like</span> &quot;_xx&quot;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"19、日期转星期\"><a href=\"#19、日期转星期\" class=\"headerlink\" title=\"19、日期转星期\"></a>19、日期转星期</h3> <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> weekday(&quot;2021-11-10&quot;)<span class=\"operator\">+</span><span class=\"number\">1</span> week;      </span><br><span class=\"line\"><span class=\"comment\">-- 2021年11月10日是星期三</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"20、单条SQL语句完成多种数据统计\"><a href=\"#20、单条SQL语句完成多种数据统计\" class=\"headerlink\" title=\"20、单条SQL语句完成多种数据统计\"></a>20、单条SQL语句完成多种数据统计</h3> <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- 现需分别统计wl_student_score_logs表中exam_id为5的change_score增加量和减少量</span></span><br><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"><span class=\"built_in\">sum</span>( if( change_score <span class=\"operator\">&gt;</span> <span class=\"number\">0</span>, change_score, <span class=\"number\">0</span>)) <span class=\"keyword\">as</span> increase_score,</span><br><span class=\"line\"><span class=\"built_in\">sum</span>( if( change_score  <span class=\"operator\">&lt;</span> <span class=\"number\">0</span>, change_score, <span class=\"number\">0</span>)) <span class=\"keyword\">as</span> reduce_score</span><br><span class=\"line\"><span class=\"keyword\">from</span> wl_student_score_logs <span class=\"keyword\">where</span> exam_id<span class=\"operator\">=</span><span class=\"number\">5</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"21、truncate、drop-和-delete-的区别\"><a href=\"#21、truncate、drop-和-delete-的区别\" class=\"headerlink\" title=\"21、truncate、drop 和 delete 的区别\"></a>21、truncate、drop 和 delete 的区别</h3><pre><code>1. 执行速度：drop &gt; truncate &gt; detele；\n2. delete 和 truncate 只删除表数据，而 drop 会删除表数据和表结构以及表的索引、约束和触发器；\n3. delete 可以加 where 条件实现部分数据删除，而 truncate 和 drop 不能加 where 条件是整体删除；\n4. truncate 和 drop 是立即执行，且不能恢复；而 delete 会走事务，可以撤回和恢复；\n5. truncate 会重置自增列为 1，而 delete 不会重置自增列；\n6. truncate 和 drop 是 DDL 语句，而 delete 是 DML 语句。\n</code></pre><h3 id=\"22、修改自增列的值\"><a href=\"#22、修改自增列的值\" class=\"headerlink\" title=\"22、修改自增列的值\"></a>22、修改自增列的值</h3><pre><code>`alter table tname auto_increment=n;`\n一个表中只能有一个自增列,如果设置多个自增列，那么 SQL 执行就会报错。除此之外还要注意自增列应该为整数类型，且 auto_increment 需要配合 key 一起使用，这个 key 可以是 primary key 或 foreign key。\n</code></pre><h3 id=\"23、生成批量清空指定数据库的语句\"><a href=\"#23、生成批量清空指定数据库的语句\" class=\"headerlink\" title=\"23、生成批量清空指定数据库的语句\"></a>23、生成批量清空指定数据库的语句</h3><pre><code>`select CONCAT(&#39;TRUNCATE TABLE &#39;,table_schema,&#39;.&#39;,TABLE_NAME, &#39;;&#39;) 清空语句 from INFORMATION_SCHEMA.TABLES where table_schema =&#39;库名&#39;;`    \n</code></pre>"},{"title":"MySQL索引","abbrlink":"mysql-index","date":"2020-05-23T02:21:00.000Z","updated":"2020-05-23T02:21:00.000Z","_content":"\n#### 导致 MySQL 索引失效的常见场景\n1. 联合索引不满足最左匹配原则\n    最左匹配原则是指以最左边的为起点字段查询可以使用联合索引，否则将不能使用联合索引。\n    假设联合索引为A+B+C，则能使用索引的为A+B+C、A+B、A+C。\n2. 模糊查询最前面的为不确定匹配字符\n    只有模糊匹配后面任意字符：`like 'xx%'` 可以使用索引\n3. 索引列参与了运算\n    如：`explain select * from tname where id+1=1;`未使用索引\n4. 索引列使用了函数\n    如：`explain select * from tname where ifnull(id,0)=1;`未使用索引\n5. 索引列存在类型转换\n    如果索引列存在类型转换，那么也不会走索引，比如 name 为字符串类型，而查询的时候设置了 int 类型的值就会导致索引失效\n6. 索引列使用 is not null 查询\n    当在查询中使用了 is not null 也会导致索引失效，而 is null 则会正常触发索引的\n    \n#### 哪些情况不适合创建索引\n1. 不应该在字段比较长的字段上建立索引，因为会消耗大量的空间\n2. 对于频繁更新、插入的字段应该少建立索引，因为在修改和插入之后，数据库会去维护索引，会消耗资源\n3. 尽量少在无用字段上建立索引【where条件中用不到的字段】\n4. 表记录太少不应该创建索引\n5. 数据重复且分布平均的表字段不应该创建索引【选择性太低，例如性别、状态、真假值等字段】\n6. 参与列计算的列不适合建索引【保持列\"干净\"，比如from_unixtime(create_time) = '2022-05-29'就不能使用到索引，原因是b+树中存的都是数据表中的字段值，但进行检索时需要把所有元素都应用函数才能比较，显然成本太大，所以语句应该写成create_time = unix_timestamp('2022-05-29')】\n\n#### 索引的优缺点\n1. 建立索引是要消耗一定的空间，况且在索引的维护上也会消耗资源","source":"_posts/MySQL/MySQL索引.md","raw":"---\ntitle: MySQL索引\ntags: [索引]\ncategories: MySQL\nabbrlink: 'mysql-index'\ndate: 2020-05-23 10:21:00\nupdated: 2020-05-23 10:21:00\n---\n\n#### 导致 MySQL 索引失效的常见场景\n1. 联合索引不满足最左匹配原则\n    最左匹配原则是指以最左边的为起点字段查询可以使用联合索引，否则将不能使用联合索引。\n    假设联合索引为A+B+C，则能使用索引的为A+B+C、A+B、A+C。\n2. 模糊查询最前面的为不确定匹配字符\n    只有模糊匹配后面任意字符：`like 'xx%'` 可以使用索引\n3. 索引列参与了运算\n    如：`explain select * from tname where id+1=1;`未使用索引\n4. 索引列使用了函数\n    如：`explain select * from tname where ifnull(id,0)=1;`未使用索引\n5. 索引列存在类型转换\n    如果索引列存在类型转换，那么也不会走索引，比如 name 为字符串类型，而查询的时候设置了 int 类型的值就会导致索引失效\n6. 索引列使用 is not null 查询\n    当在查询中使用了 is not null 也会导致索引失效，而 is null 则会正常触发索引的\n    \n#### 哪些情况不适合创建索引\n1. 不应该在字段比较长的字段上建立索引，因为会消耗大量的空间\n2. 对于频繁更新、插入的字段应该少建立索引，因为在修改和插入之后，数据库会去维护索引，会消耗资源\n3. 尽量少在无用字段上建立索引【where条件中用不到的字段】\n4. 表记录太少不应该创建索引\n5. 数据重复且分布平均的表字段不应该创建索引【选择性太低，例如性别、状态、真假值等字段】\n6. 参与列计算的列不适合建索引【保持列\"干净\"，比如from_unixtime(create_time) = '2022-05-29'就不能使用到索引，原因是b+树中存的都是数据表中的字段值，但进行检索时需要把所有元素都应用函数才能比较，显然成本太大，所以语句应该写成create_time = unix_timestamp('2022-05-29')】\n\n#### 索引的优缺点\n1. 建立索引是要消耗一定的空间，况且在索引的维护上也会消耗资源","slug":"MySQL/MySQL索引","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tk001uoshg81y76wgr","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h4 id=\"导致-MySQL-索引失效的常见场景\"><a href=\"#导致-MySQL-索引失效的常见场景\" class=\"headerlink\" title=\"导致 MySQL 索引失效的常见场景\"></a>导致 MySQL 索引失效的常见场景</h4><ol>\n<li>联合索引不满足最左匹配原则<br> 最左匹配原则是指以最左边的为起点字段查询可以使用联合索引，否则将不能使用联合索引。<br> 假设联合索引为A+B+C，则能使用索引的为A+B+C、A+B、A+C。</li>\n<li>模糊查询最前面的为不确定匹配字符<br> 只有模糊匹配后面任意字符：<code>like 'xx%'</code> 可以使用索引</li>\n<li>索引列参与了运算<br> 如：<code>explain select * from tname where id+1=1;</code>未使用索引</li>\n<li>索引列使用了函数<br> 如：<code>explain select * from tname where ifnull(id,0)=1;</code>未使用索引</li>\n<li>索引列存在类型转换<br> 如果索引列存在类型转换，那么也不会走索引，比如 name 为字符串类型，而查询的时候设置了 int 类型的值就会导致索引失效</li>\n<li>索引列使用 is not null 查询<br> 当在查询中使用了 is not null 也会导致索引失效，而 is null 则会正常触发索引的</li>\n</ol>\n<h4 id=\"哪些情况不适合创建索引\"><a href=\"#哪些情况不适合创建索引\" class=\"headerlink\" title=\"哪些情况不适合创建索引\"></a>哪些情况不适合创建索引</h4><ol>\n<li>不应该在字段比较长的字段上建立索引，因为会消耗大量的空间</li>\n<li>对于频繁更新、插入的字段应该少建立索引，因为在修改和插入之后，数据库会去维护索引，会消耗资源</li>\n<li>尽量少在无用字段上建立索引【where条件中用不到的字段】</li>\n<li>表记录太少不应该创建索引</li>\n<li>数据重复且分布平均的表字段不应该创建索引【选择性太低，例如性别、状态、真假值等字段】</li>\n<li>参与列计算的列不适合建索引【保持列”干净”，比如from_unixtime(create_time) = ‘2022-05-29’就不能使用到索引，原因是b+树中存的都是数据表中的字段值，但进行检索时需要把所有元素都应用函数才能比较，显然成本太大，所以语句应该写成create_time = unix_timestamp(‘2022-05-29’)】</li>\n</ol>\n<h4 id=\"索引的优缺点\"><a href=\"#索引的优缺点\" class=\"headerlink\" title=\"索引的优缺点\"></a>索引的优缺点</h4><ol>\n<li>建立索引是要消耗一定的空间，况且在索引的维护上也会消耗资源</li>\n</ol>\n","excerpt":"","more":"<h4 id=\"导致-MySQL-索引失效的常见场景\"><a href=\"#导致-MySQL-索引失效的常见场景\" class=\"headerlink\" title=\"导致 MySQL 索引失效的常见场景\"></a>导致 MySQL 索引失效的常见场景</h4><ol>\n<li>联合索引不满足最左匹配原则<br> 最左匹配原则是指以最左边的为起点字段查询可以使用联合索引，否则将不能使用联合索引。<br> 假设联合索引为A+B+C，则能使用索引的为A+B+C、A+B、A+C。</li>\n<li>模糊查询最前面的为不确定匹配字符<br> 只有模糊匹配后面任意字符：<code>like &#39;xx%&#39;</code> 可以使用索引</li>\n<li>索引列参与了运算<br> 如：<code>explain select * from tname where id+1=1;</code>未使用索引</li>\n<li>索引列使用了函数<br> 如：<code>explain select * from tname where ifnull(id,0)=1;</code>未使用索引</li>\n<li>索引列存在类型转换<br> 如果索引列存在类型转换，那么也不会走索引，比如 name 为字符串类型，而查询的时候设置了 int 类型的值就会导致索引失效</li>\n<li>索引列使用 is not null 查询<br> 当在查询中使用了 is not null 也会导致索引失效，而 is null 则会正常触发索引的</li>\n</ol>\n<h4 id=\"哪些情况不适合创建索引\"><a href=\"#哪些情况不适合创建索引\" class=\"headerlink\" title=\"哪些情况不适合创建索引\"></a>哪些情况不适合创建索引</h4><ol>\n<li>不应该在字段比较长的字段上建立索引，因为会消耗大量的空间</li>\n<li>对于频繁更新、插入的字段应该少建立索引，因为在修改和插入之后，数据库会去维护索引，会消耗资源</li>\n<li>尽量少在无用字段上建立索引【where条件中用不到的字段】</li>\n<li>表记录太少不应该创建索引</li>\n<li>数据重复且分布平均的表字段不应该创建索引【选择性太低，例如性别、状态、真假值等字段】</li>\n<li>参与列计算的列不适合建索引【保持列”干净”，比如from_unixtime(create_time) = ‘2022-05-29’就不能使用到索引，原因是b+树中存的都是数据表中的字段值，但进行检索时需要把所有元素都应用函数才能比较，显然成本太大，所以语句应该写成create_time = unix_timestamp(‘2022-05-29’)】</li>\n</ol>\n<h4 id=\"索引的优缺点\"><a href=\"#索引的优缺点\" class=\"headerlink\" title=\"索引的优缺点\"></a>索引的优缺点</h4><ol>\n<li>建立索引是要消耗一定的空间，况且在索引的维护上也会消耗资源</li>\n</ol>\n"},{"title":"MySQL联表查询","abbrlink":"mysql-join","date":"2020-03-22T07:20:42.000Z","updated":"2020-03-22T07:20:42.000Z","_content":"### 1. 联表查询后的结果集比较\n![](/images/mysql_join_1.png)","source":"_posts/MySQL/MySQL联表查询.md","raw":"---\ntitle: MySQL联表查询\ntags: [联表查询]\ncategories: MySQL\nabbrlink: 'mysql-join'\ndate: 2020-03-22 15:20:42\nupdated: 2020-03-22 15:20:42\n---\n### 1. 联表查询后的结果集比较\n![](/images/mysql_join_1.png)","slug":"MySQL/MySQL联表查询","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tl001woshg41os5r7c","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-联表查询后的结果集比较\"><a href=\"#1-联表查询后的结果集比较\" class=\"headerlink\" title=\"1. 联表查询后的结果集比较\"></a>1. 联表查询后的结果集比较</h3><p><img src=\"/images/mysql_join_1.png\" alt=\"\"></p>\n","excerpt":"","more":"<h3 id=\"1-联表查询后的结果集比较\"><a href=\"#1-联表查询后的结果集比较\" class=\"headerlink\" title=\"1. 联表查询后的结果集比较\"></a>1. 联表查询后的结果集比较</h3><p><img src=\"/images/mysql_join_1.png\" alt></p>\n"},{"title":"MySQL脚本执行中，预防误处理数据的方法","password":"fdg34$35JFJEWfd","abbrlink":"mysql-deal-miss-handle","date":"2020-08-05T10:04:16.000Z","updated":"2020-08-05T10:04:16.000Z","top":999,"_content":"\n<div class=\"note info\">在工作中，有时需要通过数据库脚本来变更生产数据，但稍有疏忽，就会误删数据、或者变更过多数据；为防预防这类情况的发生，根据我个人的工作经验，总结了以下几点方法：</div>\n\n### 1、先测试\n   脚本写好之后，先在测试环境执行一遍，一方面可以看看脚本是否有语法问题，另一方面看看数据是否正确被处理；\n\n### 2、脚本简单化\n   尽量将复杂的联表处理语句转为多条单表处理语句，这可以防止由于逻辑不严谨导致的数据过多被处理的问题；\n如：现有脚本\n```sql\nupdate personnel p set p.status=1 left join classes c on p.class_id=c.class_id where c.grade_id=5;\n```\n假设经查询，grade_id=5的personnel 为201-296，可改为：\n```sql\nupdate personnel set status=1 where id=201;\nupdate personnel set status=1 where id=202;\nupdate personnel set status=1 where id=203;\n……\nupdate personnel set status=1 where id=296;\n```\n\n### 3、Where条件精确化\n   变更的where条件尽量为唯一索引字段，这可以防止由于条件过于复杂、数据表过大，导致锁表时间过长，执行效率过低的问题；\n如：现有脚本\n```sql\nupdate personnel set status=1 where class_id=20 and status=0 and create_time<1571580242;\n```\n\n假设经查询，满足上述条件的personnelId 为220、233、234、256，可改为：\n```sql\nupdate personnel set status=1 where id=220;\nupdate personnel set status=1 where id=233;\nupdate personnel set status=1 where id=234;\nupdate personnel set status=1 where id=256;\n```\n\n单条复杂语句拆分成多条单一条件语句的方法有很多，下面列举几种方式：\n（1）将满足条件的数据导出，借助excel/Notepad++等工具进行批量补全sql语句；\n（2）在数据库中使用concat函数进行sql拼接，如：\n```sql\nselect CONCAT('delete from t_bracelet_person_relation where person_id=',person_id,' and mac_id=\"',mac_id,'\";') from t_bracelet_person_relation where mac_id in ('C9B1EC032CB3','FCBA0EB1DA09') and status=0;\n```\n\n### 4、有条件处理\n每条SQL语句必须有where条件，否则可能有问题，容易引起数据过度被处理的情况；\n如：现有脚本\n```sql\nupdate goods set status=0;\n```\n\n经查上述语句本来只变更id=23的数据，由于疏忽大意忘些where条件，导致整个表的数据都被变更了，这个问题的严重性不亚于删库；\n```sql\nupdate goods set status=0 where id=23;\n```\n\n### 5、脚本数据校验\n脚本写好之后，可以将update、delete改为select查询下，从查询结果的数据总条数和具体数据上比对下，看看数据是否和预期需要处理的数据有出入，如果有就是条件未控制好，需修改；\n如：现有脚本\n```sql\nupdate personnel p set p.status=1 left join classes c on p.class_id=c.class_id where c.grade_id=5;\ndelete from personnel where class_id=20 and status=0 and create_time<1571580242;\n```\n可改为如下语句，查询后核对数据\n```sql\nselect p.* from personnel p left join classes c on p.class_id=c.class_id where c.grade_id=5;\nselect * from personnel where class_id=20 and status=0 and create_time<1571580242;\n```\n","source":"_posts/MySQL/MySQL脚本执行中，预防误处理数据的方法.md","raw":"---\ntitle: MySQL脚本执行中，预防误处理数据的方法\ntags: [MySQL]\ncategories: MySQL\npassword: fdg34$35JFJEWfd\nabbrlink: 'mysql-deal-miss-handle'\ndate: 2020-08-05 18:04:16\nupdated: 2020-08-05 18:04:16\ntop: 999\n---\n\n<div class=\"note info\">在工作中，有时需要通过数据库脚本来变更生产数据，但稍有疏忽，就会误删数据、或者变更过多数据；为防预防这类情况的发生，根据我个人的工作经验，总结了以下几点方法：</div>\n\n### 1、先测试\n   脚本写好之后，先在测试环境执行一遍，一方面可以看看脚本是否有语法问题，另一方面看看数据是否正确被处理；\n\n### 2、脚本简单化\n   尽量将复杂的联表处理语句转为多条单表处理语句，这可以防止由于逻辑不严谨导致的数据过多被处理的问题；\n如：现有脚本\n```sql\nupdate personnel p set p.status=1 left join classes c on p.class_id=c.class_id where c.grade_id=5;\n```\n假设经查询，grade_id=5的personnel 为201-296，可改为：\n```sql\nupdate personnel set status=1 where id=201;\nupdate personnel set status=1 where id=202;\nupdate personnel set status=1 where id=203;\n……\nupdate personnel set status=1 where id=296;\n```\n\n### 3、Where条件精确化\n   变更的where条件尽量为唯一索引字段，这可以防止由于条件过于复杂、数据表过大，导致锁表时间过长，执行效率过低的问题；\n如：现有脚本\n```sql\nupdate personnel set status=1 where class_id=20 and status=0 and create_time<1571580242;\n```\n\n假设经查询，满足上述条件的personnelId 为220、233、234、256，可改为：\n```sql\nupdate personnel set status=1 where id=220;\nupdate personnel set status=1 where id=233;\nupdate personnel set status=1 where id=234;\nupdate personnel set status=1 where id=256;\n```\n\n单条复杂语句拆分成多条单一条件语句的方法有很多，下面列举几种方式：\n（1）将满足条件的数据导出，借助excel/Notepad++等工具进行批量补全sql语句；\n（2）在数据库中使用concat函数进行sql拼接，如：\n```sql\nselect CONCAT('delete from t_bracelet_person_relation where person_id=',person_id,' and mac_id=\"',mac_id,'\";') from t_bracelet_person_relation where mac_id in ('C9B1EC032CB3','FCBA0EB1DA09') and status=0;\n```\n\n### 4、有条件处理\n每条SQL语句必须有where条件，否则可能有问题，容易引起数据过度被处理的情况；\n如：现有脚本\n```sql\nupdate goods set status=0;\n```\n\n经查上述语句本来只变更id=23的数据，由于疏忽大意忘些where条件，导致整个表的数据都被变更了，这个问题的严重性不亚于删库；\n```sql\nupdate goods set status=0 where id=23;\n```\n\n### 5、脚本数据校验\n脚本写好之后，可以将update、delete改为select查询下，从查询结果的数据总条数和具体数据上比对下，看看数据是否和预期需要处理的数据有出入，如果有就是条件未控制好，需修改；\n如：现有脚本\n```sql\nupdate personnel p set p.status=1 left join classes c on p.class_id=c.class_id where c.grade_id=5;\ndelete from personnel where class_id=20 and status=0 and create_time<1571580242;\n```\n可改为如下语句，查询后核对数据\n```sql\nselect p.* from personnel p left join classes c on p.class_id=c.class_id where c.grade_id=5;\nselect * from personnel where class_id=20 and status=0 and create_time<1571580242;\n```\n","slug":"MySQL/MySQL脚本执行中，预防误处理数据的方法","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tl001zoshg3d9k1zr4","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">在工作中，有时需要通过数据库脚本来变更生产数据，但稍有疏忽，就会误删数据、或者变更过多数据；为防预防这类情况的发生，根据我个人的工作经验，总结了以下几点方法：</div>\n\n<h3 id=\"1、先测试\"><a href=\"#1、先测试\" class=\"headerlink\" title=\"1、先测试\"></a>1、先测试</h3><p>   脚本写好之后，先在测试环境执行一遍，一方面可以看看脚本是否有语法问题，另一方面看看数据是否正确被处理；</p>\n<h3 id=\"2、脚本简单化\"><a href=\"#2、脚本简单化\" class=\"headerlink\" title=\"2、脚本简单化\"></a>2、脚本简单化</h3><p>   尽量将复杂的联表处理语句转为多条单表处理语句，这可以防止由于逻辑不严谨导致的数据过多被处理的问题；<br>如：现有脚本<br></p><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> personnel p <span class=\"keyword\">set</span> p.status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> classes c <span class=\"keyword\">on</span> p.class_id<span class=\"operator\">=</span>c.class_id <span class=\"keyword\">where</span> c.grade_id<span class=\"operator\">=</span><span class=\"number\">5</span>;</span><br></pre></td></tr></tbody></table></figure><br>假设经查询，grade_id=5的personnel 为201-296，可改为：<br><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">201</span>;</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">202</span>;</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">203</span>;</span><br><span class=\"line\">……</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">296</span>;</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h3 id=\"3、Where条件精确化\"><a href=\"#3、Where条件精确化\" class=\"headerlink\" title=\"3、Where条件精确化\"></a>3、Where条件精确化</h3><p>   变更的where条件尽量为唯一索引字段，这可以防止由于条件过于复杂、数据表过大，导致锁表时间过长，执行效率过低的问题；<br>如：现有脚本<br></p><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> class_id<span class=\"operator\">=</span><span class=\"number\">20</span> <span class=\"keyword\">and</span> status<span class=\"operator\">=</span><span class=\"number\">0</span> <span class=\"keyword\">and</span> create_time<span class=\"operator\">&lt;</span><span class=\"number\">1571580242</span>;</span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>假设经查询，满足上述条件的personnelId 为220、233、234、256，可改为：<br></p><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">220</span>;</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">233</span>;</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">234</span>;</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">256</span>;</span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>单条复杂语句拆分成多条单一条件语句的方法有很多，下面列举几种方式：<br>（1）将满足条件的数据导出，借助excel/Notepad++等工具进行批量补全sql语句；<br>（2）在数据库中使用concat函数进行sql拼接，如：<br></p><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> CONCAT(<span class=\"string\">'delete from t_bracelet_person_relation where person_id='</span>,person_id,<span class=\"string\">' and mac_id=\"'</span>,mac_id,<span class=\"string\">'\";'</span>) <span class=\"keyword\">from</span> t_bracelet_person_relation <span class=\"keyword\">where</span> mac_id <span class=\"keyword\">in</span> (<span class=\"string\">'C9B1EC032CB3'</span>,<span class=\"string\">'FCBA0EB1DA09'</span>) <span class=\"keyword\">and</span> status<span class=\"operator\">=</span><span class=\"number\">0</span>;</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h3 id=\"4、有条件处理\"><a href=\"#4、有条件处理\" class=\"headerlink\" title=\"4、有条件处理\"></a>4、有条件处理</h3><p>每条SQL语句必须有where条件，否则可能有问题，容易引起数据过度被处理的情况；<br>如：现有脚本<br></p><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> goods <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">0</span>;</span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>经查上述语句本来只变更id=23的数据，由于疏忽大意忘些where条件，导致整个表的数据都被变更了，这个问题的严重性不亚于删库；<br></p><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> goods <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">0</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">23</span>;</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h3 id=\"5、脚本数据校验\"><a href=\"#5、脚本数据校验\" class=\"headerlink\" title=\"5、脚本数据校验\"></a>5、脚本数据校验</h3><p>脚本写好之后，可以将update、delete改为select查询下，从查询结果的数据总条数和具体数据上比对下，看看数据是否和预期需要处理的数据有出入，如果有就是条件未控制好，需修改；<br>如：现有脚本<br></p><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> personnel p <span class=\"keyword\">set</span> p.status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> classes c <span class=\"keyword\">on</span> p.class_id<span class=\"operator\">=</span>c.class_id <span class=\"keyword\">where</span> c.grade_id<span class=\"operator\">=</span><span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> personnel <span class=\"keyword\">where</span> class_id<span class=\"operator\">=</span><span class=\"number\">20</span> <span class=\"keyword\">and</span> status<span class=\"operator\">=</span><span class=\"number\">0</span> <span class=\"keyword\">and</span> create_time<span class=\"operator\">&lt;</span><span class=\"number\">1571580242</span>;</span><br></pre></td></tr></tbody></table></figure><br>可改为如下语句，查询后核对数据<br><figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> p.<span class=\"operator\">*</span> <span class=\"keyword\">from</span> personnel p <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> classes c <span class=\"keyword\">on</span> p.class_id<span class=\"operator\">=</span>c.class_id <span class=\"keyword\">where</span> c.grade_id<span class=\"operator\">=</span><span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> personnel <span class=\"keyword\">where</span> class_id<span class=\"operator\">=</span><span class=\"number\">20</span> <span class=\"keyword\">and</span> status<span class=\"operator\">=</span><span class=\"number\">0</span> <span class=\"keyword\">and</span> create_time<span class=\"operator\">&lt;</span><span class=\"number\">1571580242</span>;</span><br></pre></td></tr></tbody></table></figure><p></p>\n","excerpt":"","more":"<div class=\"note info\">在工作中，有时需要通过数据库脚本来变更生产数据，但稍有疏忽，就会误删数据、或者变更过多数据；为防预防这类情况的发生，根据我个人的工作经验，总结了以下几点方法：</div>\n\n<h3 id=\"1、先测试\"><a href=\"#1、先测试\" class=\"headerlink\" title=\"1、先测试\"></a>1、先测试</h3><p>   脚本写好之后，先在测试环境执行一遍，一方面可以看看脚本是否有语法问题，另一方面看看数据是否正确被处理；</p>\n<h3 id=\"2、脚本简单化\"><a href=\"#2、脚本简单化\" class=\"headerlink\" title=\"2、脚本简单化\"></a>2、脚本简单化</h3><p>   尽量将复杂的联表处理语句转为多条单表处理语句，这可以防止由于逻辑不严谨导致的数据过多被处理的问题；<br>如：现有脚本<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> personnel p <span class=\"keyword\">set</span> p.status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> classes c <span class=\"keyword\">on</span> p.class_id<span class=\"operator\">=</span>c.class_id <span class=\"keyword\">where</span> c.grade_id<span class=\"operator\">=</span><span class=\"number\">5</span>;</span><br></pre></td></tr></table></figure><br>假设经查询，grade_id=5的personnel 为201-296，可改为：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">201</span>;</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">202</span>;</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">203</span>;</span><br><span class=\"line\">……</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">296</span>;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3、Where条件精确化\"><a href=\"#3、Where条件精确化\" class=\"headerlink\" title=\"3、Where条件精确化\"></a>3、Where条件精确化</h3><p>   变更的where条件尽量为唯一索引字段，这可以防止由于条件过于复杂、数据表过大，导致锁表时间过长，执行效率过低的问题；<br>如：现有脚本<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> class_id<span class=\"operator\">=</span><span class=\"number\">20</span> <span class=\"keyword\">and</span> status<span class=\"operator\">=</span><span class=\"number\">0</span> <span class=\"keyword\">and</span> create_time<span class=\"operator\">&lt;</span><span class=\"number\">1571580242</span>;</span><br></pre></td></tr></table></figure></p>\n<p>假设经查询，满足上述条件的personnelId 为220、233、234、256，可改为：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">220</span>;</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">233</span>;</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">234</span>;</span><br><span class=\"line\"><span class=\"keyword\">update</span> personnel <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">256</span>;</span><br></pre></td></tr></table></figure></p>\n<p>单条复杂语句拆分成多条单一条件语句的方法有很多，下面列举几种方式：<br>（1）将满足条件的数据导出，借助excel/Notepad++等工具进行批量补全sql语句；<br>（2）在数据库中使用concat函数进行sql拼接，如：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> CONCAT(<span class=\"string\">&#x27;delete from t_bracelet_person_relation where person_id=&#x27;</span>,person_id,<span class=\"string\">&#x27; and mac_id=&quot;&#x27;</span>,mac_id,<span class=\"string\">&#x27;&quot;;&#x27;</span>) <span class=\"keyword\">from</span> t_bracelet_person_relation <span class=\"keyword\">where</span> mac_id <span class=\"keyword\">in</span> (<span class=\"string\">&#x27;C9B1EC032CB3&#x27;</span>,<span class=\"string\">&#x27;FCBA0EB1DA09&#x27;</span>) <span class=\"keyword\">and</span> status<span class=\"operator\">=</span><span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"4、有条件处理\"><a href=\"#4、有条件处理\" class=\"headerlink\" title=\"4、有条件处理\"></a>4、有条件处理</h3><p>每条SQL语句必须有where条件，否则可能有问题，容易引起数据过度被处理的情况；<br>如：现有脚本<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> goods <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure></p>\n<p>经查上述语句本来只变更id=23的数据，由于疏忽大意忘些where条件，导致整个表的数据都被变更了，这个问题的严重性不亚于删库；<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> goods <span class=\"keyword\">set</span> status<span class=\"operator\">=</span><span class=\"number\">0</span> <span class=\"keyword\">where</span> id<span class=\"operator\">=</span><span class=\"number\">23</span>;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"5、脚本数据校验\"><a href=\"#5、脚本数据校验\" class=\"headerlink\" title=\"5、脚本数据校验\"></a>5、脚本数据校验</h3><p>脚本写好之后，可以将update、delete改为select查询下，从查询结果的数据总条数和具体数据上比对下，看看数据是否和预期需要处理的数据有出入，如果有就是条件未控制好，需修改；<br>如：现有脚本<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">update</span> personnel p <span class=\"keyword\">set</span> p.status<span class=\"operator\">=</span><span class=\"number\">1</span> <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> classes c <span class=\"keyword\">on</span> p.class_id<span class=\"operator\">=</span>c.class_id <span class=\"keyword\">where</span> c.grade_id<span class=\"operator\">=</span><span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"keyword\">from</span> personnel <span class=\"keyword\">where</span> class_id<span class=\"operator\">=</span><span class=\"number\">20</span> <span class=\"keyword\">and</span> status<span class=\"operator\">=</span><span class=\"number\">0</span> <span class=\"keyword\">and</span> create_time<span class=\"operator\">&lt;</span><span class=\"number\">1571580242</span>;</span><br></pre></td></tr></table></figure><br>可改为如下语句，查询后核对数据<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> p.<span class=\"operator\">*</span> <span class=\"keyword\">from</span> personnel p <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> classes c <span class=\"keyword\">on</span> p.class_id<span class=\"operator\">=</span>c.class_id <span class=\"keyword\">where</span> c.grade_id<span class=\"operator\">=</span><span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"operator\">*</span> <span class=\"keyword\">from</span> personnel <span class=\"keyword\">where</span> class_id<span class=\"operator\">=</span><span class=\"number\">20</span> <span class=\"keyword\">and</span> status<span class=\"operator\">=</span><span class=\"number\">0</span> <span class=\"keyword\">and</span> create_time<span class=\"operator\">&lt;</span><span class=\"number\">1571580242</span>;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"MySQL自定义函数","abbrlink":"mysql-custom-functions","date":"2018-09-05T04:27:00.000Z","updated":"2018-09-05T04:27:00.000Z","_content":"\n<div class=\"note info\">有时候要对MySQL数据进行批量处理，仅仅依靠已有的内置函数是不够的，这个时候就需要添加一些自定义的函数了，下面列举一些常用的自定义函数</div>\n\n### 1. 批量处理字符串，将\"FEEED305904B\"转为\"FE:EE:D3:05:90:4B\"格式：\n\t\n```\nDROP FUNCTION IF EXISTS `SPLIT_STR`; \ndelimiter $$\nCREATE FUNCTION SPLIT_STR(\n  x VARCHAR(255),\n  delim VARCHAR(12),\n  pos INT\n)\nRETURNS VARCHAR(255)\n\nBEGIN\n    DECLARE i INT DEFAULT 0;\n    DECLARE s text DEFAULT '';\n    myloop: LOOP\n        SET i = i+pos;\n        SET s = CONCAT(s,delim,left(x,pos));\n        SET x = right(x,length(x)-pos);\n        if pos>length(x) then\n            if length(x)>0 then\n                SET s = CONCAT(s,delim,x);\n            end if;\n            leave myloop;\n        end if;\n    END LOOP myloop;\nRETURN right(s,length(s)-length(delim));\nEND $$\n```\n调用：`SELECT SPLIT_STR('FEEED305904B', ':', 2);`","source":"_posts/MySQL/MySQL自定义函数.md","raw":"---\ntitle: MySQL自定义函数\ntags: [MySQL]\ncategories: MySQL\nabbrlink: 'mysql-custom-functions'\ndate: 2018-09-05 12:27:00\nupdated: 2018-09-05 12:27:00\n---\n\n<div class=\"note info\">有时候要对MySQL数据进行批量处理，仅仅依靠已有的内置函数是不够的，这个时候就需要添加一些自定义的函数了，下面列举一些常用的自定义函数</div>\n\n### 1. 批量处理字符串，将\"FEEED305904B\"转为\"FE:EE:D3:05:90:4B\"格式：\n\t\n```\nDROP FUNCTION IF EXISTS `SPLIT_STR`; \ndelimiter $$\nCREATE FUNCTION SPLIT_STR(\n  x VARCHAR(255),\n  delim VARCHAR(12),\n  pos INT\n)\nRETURNS VARCHAR(255)\n\nBEGIN\n    DECLARE i INT DEFAULT 0;\n    DECLARE s text DEFAULT '';\n    myloop: LOOP\n        SET i = i+pos;\n        SET s = CONCAT(s,delim,left(x,pos));\n        SET x = right(x,length(x)-pos);\n        if pos>length(x) then\n            if length(x)>0 then\n                SET s = CONCAT(s,delim,x);\n            end if;\n            leave myloop;\n        end if;\n    END LOOP myloop;\nRETURN right(s,length(s)-length(delim));\nEND $$\n```\n调用：`SELECT SPLIT_STR('FEEED305904B', ':', 2);`","slug":"MySQL/MySQL自定义函数","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tm0022oshg0jjv4hrz","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">有时候要对MySQL数据进行批量处理，仅仅依靠已有的内置函数是不够的，这个时候就需要添加一些自定义的函数了，下面列举一些常用的自定义函数</div>\n\n<h3 id=\"1-批量处理字符串，将”FEEED305904B”转为”FE-EE-D3-05-90-4B”格式：\"><a href=\"#1-批量处理字符串，将”FEEED305904B”转为”FE-EE-D3-05-90-4B”格式：\" class=\"headerlink\" title=\"1. 批量处理字符串，将”FEEED305904B”转为”FE:EE:D3:05:90:4B”格式：\"></a>1. 批量处理字符串，将”FEEED305904B”转为”FE:EE:D3:05:90:4B”格式：</h3><figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">FUNCTION</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> `SPLIT_STR`; </span><br><span class=\"line\"><span class=\"keyword\">delimiter</span> $$<span class=\"language-pgsql\"></span></span><br><span class=\"line\"><span class=\"language-pgsql\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">FUNCTION</span> SPLIT_STR(</span></span><br><span class=\"line\"><span class=\"language-pgsql\">  x <span class=\"type\">VARCHAR</span>(<span class=\"number\">255</span>),</span></span><br><span class=\"line\"><span class=\"language-pgsql\">  delim <span class=\"type\">VARCHAR</span>(<span class=\"number\">12</span>),</span></span><br><span class=\"line\"><span class=\"language-pgsql\">  pos <span class=\"type\">INT</span></span></span><br><span class=\"line\"><span class=\"language-pgsql\">)</span></span><br><span class=\"line\"><span class=\"language-pgsql\"><span class=\"keyword\">RETURNS</span> <span class=\"type\">VARCHAR</span>(<span class=\"number\">255</span>)</span></span><br><span class=\"line\"><span class=\"language-pgsql\"></span></span><br><span class=\"line\"><span class=\"language-pgsql\"><span class=\"keyword\">BEGIN</span></span></span><br><span class=\"line\"><span class=\"language-pgsql\">    <span class=\"keyword\">DECLARE</span> i <span class=\"type\">INT</span> <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">    <span class=\"keyword\">DECLARE</span> s <span class=\"type\">text</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span>;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">    myloop: <span class=\"keyword\">LOOP</span></span></span><br><span class=\"line\"><span class=\"language-pgsql\">        <span class=\"keyword\">SET</span> i = i+pos;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">        <span class=\"keyword\">SET</span> s = CONCAT(s,delim,left(x,pos));</span></span><br><span class=\"line\"><span class=\"language-pgsql\">        <span class=\"keyword\">SET</span> x = right(x,length(x)-pos);</span></span><br><span class=\"line\"><span class=\"language-pgsql\">        <span class=\"keyword\">if</span> pos&gt;length(x) <span class=\"keyword\">then</span></span></span><br><span class=\"line\"><span class=\"language-pgsql\">            <span class=\"keyword\">if</span> length(x)&gt;<span class=\"number\">0</span> <span class=\"keyword\">then</span></span></span><br><span class=\"line\"><span class=\"language-pgsql\">                <span class=\"keyword\">SET</span> s = CONCAT(s,delim,x);</span></span><br><span class=\"line\"><span class=\"language-pgsql\">            <span class=\"keyword\">end</span> <span class=\"keyword\">if</span>;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">            leave myloop;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">        <span class=\"keyword\">end</span> <span class=\"keyword\">if</span>;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">    <span class=\"keyword\">END</span> <span class=\"keyword\">LOOP</span> myloop;</span></span><br><span class=\"line\"><span class=\"language-pgsql\"><span class=\"keyword\">RETURN</span> right(s,length(s)-length(delim));</span></span><br><span class=\"line\"><span class=\"language-pgsql\"><span class=\"keyword\">END</span> $$</span></span><br></pre></td></tr></tbody></table></figure>\n<p>调用：<code>SELECT SPLIT_STR('FEEED305904B', ':', 2);</code></p>\n","excerpt":"","more":"<div class=\"note info\">有时候要对MySQL数据进行批量处理，仅仅依靠已有的内置函数是不够的，这个时候就需要添加一些自定义的函数了，下面列举一些常用的自定义函数</div>\n\n<h3 id=\"1-批量处理字符串，将”FEEED305904B”转为”FE-EE-D3-05-90-4B”格式：\"><a href=\"#1-批量处理字符串，将”FEEED305904B”转为”FE-EE-D3-05-90-4B”格式：\" class=\"headerlink\" title=\"1. 批量处理字符串，将”FEEED305904B”转为”FE:EE:D3:05:90:4B”格式：\"></a>1. 批量处理字符串，将”FEEED305904B”转为”FE:EE:D3:05:90:4B”格式：</h3><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">FUNCTION</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> `SPLIT_STR`; </span><br><span class=\"line\"><span class=\"keyword\">delimiter</span> $$<span class=\"language-pgsql\"></span></span><br><span class=\"line\"><span class=\"language-pgsql\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">FUNCTION</span> SPLIT_STR(</span></span><br><span class=\"line\"><span class=\"language-pgsql\">  x <span class=\"type\">VARCHAR</span>(<span class=\"number\">255</span>),</span></span><br><span class=\"line\"><span class=\"language-pgsql\">  delim <span class=\"type\">VARCHAR</span>(<span class=\"number\">12</span>),</span></span><br><span class=\"line\"><span class=\"language-pgsql\">  pos <span class=\"type\">INT</span></span></span><br><span class=\"line\"><span class=\"language-pgsql\">)</span></span><br><span class=\"line\"><span class=\"language-pgsql\"><span class=\"keyword\">RETURNS</span> <span class=\"type\">VARCHAR</span>(<span class=\"number\">255</span>)</span></span><br><span class=\"line\"><span class=\"language-pgsql\"></span></span><br><span class=\"line\"><span class=\"language-pgsql\"><span class=\"keyword\">BEGIN</span></span></span><br><span class=\"line\"><span class=\"language-pgsql\">    <span class=\"keyword\">DECLARE</span> i <span class=\"type\">INT</span> <span class=\"keyword\">DEFAULT</span> <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">    <span class=\"keyword\">DECLARE</span> s <span class=\"type\">text</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">&#x27;&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">    myloop: <span class=\"keyword\">LOOP</span></span></span><br><span class=\"line\"><span class=\"language-pgsql\">        <span class=\"keyword\">SET</span> i = i+pos;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">        <span class=\"keyword\">SET</span> s = CONCAT(s,delim,left(x,pos));</span></span><br><span class=\"line\"><span class=\"language-pgsql\">        <span class=\"keyword\">SET</span> x = right(x,length(x)-pos);</span></span><br><span class=\"line\"><span class=\"language-pgsql\">        <span class=\"keyword\">if</span> pos&gt;length(x) <span class=\"keyword\">then</span></span></span><br><span class=\"line\"><span class=\"language-pgsql\">            <span class=\"keyword\">if</span> length(x)&gt;<span class=\"number\">0</span> <span class=\"keyword\">then</span></span></span><br><span class=\"line\"><span class=\"language-pgsql\">                <span class=\"keyword\">SET</span> s = CONCAT(s,delim,x);</span></span><br><span class=\"line\"><span class=\"language-pgsql\">            <span class=\"keyword\">end</span> <span class=\"keyword\">if</span>;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">            leave myloop;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">        <span class=\"keyword\">end</span> <span class=\"keyword\">if</span>;</span></span><br><span class=\"line\"><span class=\"language-pgsql\">    <span class=\"keyword\">END</span> <span class=\"keyword\">LOOP</span> myloop;</span></span><br><span class=\"line\"><span class=\"language-pgsql\"><span class=\"keyword\">RETURN</span> right(s,length(s)-length(delim));</span></span><br><span class=\"line\"><span class=\"language-pgsql\"><span class=\"keyword\">END</span> $$</span></span><br></pre></td></tr></table></figure>\n<p>调用：<code>SELECT SPLIT_STR(&#39;FEEED305904B&#39;, &#39;:&#39;, 2);</code></p>\n"},{"title":"常用的SQL","abbrlink":"common-sql","date":"2021-04-26T12:20:18.000Z","updated":"2021-04-26T12:20:18.000Z","_content":"\n#### 1、查看所有的触发器\n``` \nSELECT * FROM information_schema.`TRIGGERS`;\n```\n\n#### 2、查询所有的表\n``` \nSELECT TABLE_NAME table_name,TABLE_COMMENT table_comment FROM INFORMATION_SCHEMA.TABLES where table_schema='myDB' and table_type='BASE TABLE';   //表名(不包含视图)及备注\nshow full tables where Table_type = 'BASE TABLE';    //表名\n```\n\n#### 3、查询db1数据库中所有有触发器的表\n``` \nSELECT DISTINCT EVENT_OBJECT_TABLE FROM information_schema.`TRIGGERS` WHERE EVENT_OBJECT_SCHEMA = \"db1\";\n```\n\n#### 4、查询db1数据库中所有无触发器的表\n``` \nSELECT A.TABLE_NAME from information_schema.`TABLES` A LEFT JOIN information_schema.`TRIGGERS` B ON A.TABLE_NAME=B.EVENT_OBJECT_TABLE where B.EVENT_OBJECT_TABLE is null and A.TABLE_SCHEMA=\"db1\";\n```\n\n#### 5、创建索引\n``` \nalter table table_name add index index_name (索引字段);   -- 创建普通索引\ncreate index index_name on table_name (索引字段);         -- 创建普通索引\nalter table table_name add primary key(colunm_name);     -- 创建主键\nalter table table_name add unique(colunm_name);          -- 创建唯一索引\ncreate index idx_c1_c2 on table_name(c1,c2);             -- 创建联合索引\nshow index from table_name;                              -- 查看表中的索引\n```\n\n#### 6、去除数据表中指定字段的换行符\n``` \n-- char(10)：换行符      char(13)：回车符\nupdate table set name=replace(replace(`field`,char(10),''),char(13),'');\n```\n\n#### 7、修改表引擎\n```\nalter table table_name engine=MyISAM;\n```\n\n","source":"_posts/MySQL/常用的SQL.md","raw":"---\ntitle: 常用的SQL\ntags: [MySQL]\ncategories: MySQL\nabbrlink: 'common-sql'\ndate: 2021-04-26 20:20:18\nupdated: 2021-04-26 20:20:18\n---\n\n#### 1、查看所有的触发器\n``` \nSELECT * FROM information_schema.`TRIGGERS`;\n```\n\n#### 2、查询所有的表\n``` \nSELECT TABLE_NAME table_name,TABLE_COMMENT table_comment FROM INFORMATION_SCHEMA.TABLES where table_schema='myDB' and table_type='BASE TABLE';   //表名(不包含视图)及备注\nshow full tables where Table_type = 'BASE TABLE';    //表名\n```\n\n#### 3、查询db1数据库中所有有触发器的表\n``` \nSELECT DISTINCT EVENT_OBJECT_TABLE FROM information_schema.`TRIGGERS` WHERE EVENT_OBJECT_SCHEMA = \"db1\";\n```\n\n#### 4、查询db1数据库中所有无触发器的表\n``` \nSELECT A.TABLE_NAME from information_schema.`TABLES` A LEFT JOIN information_schema.`TRIGGERS` B ON A.TABLE_NAME=B.EVENT_OBJECT_TABLE where B.EVENT_OBJECT_TABLE is null and A.TABLE_SCHEMA=\"db1\";\n```\n\n#### 5、创建索引\n``` \nalter table table_name add index index_name (索引字段);   -- 创建普通索引\ncreate index index_name on table_name (索引字段);         -- 创建普通索引\nalter table table_name add primary key(colunm_name);     -- 创建主键\nalter table table_name add unique(colunm_name);          -- 创建唯一索引\ncreate index idx_c1_c2 on table_name(c1,c2);             -- 创建联合索引\nshow index from table_name;                              -- 查看表中的索引\n```\n\n#### 6、去除数据表中指定字段的换行符\n``` \n-- char(10)：换行符      char(13)：回车符\nupdate table set name=replace(replace(`field`,char(10),''),char(13),'');\n```\n\n#### 7、修改表引擎\n```\nalter table table_name engine=MyISAM;\n```\n\n","slug":"MySQL/常用的SQL","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tn0026oshgeuhm04qw","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h4 id=\"1、查看所有的触发器\"><a href=\"#1、查看所有的触发器\" class=\"headerlink\" title=\"1、查看所有的触发器\"></a>1、查看所有的触发器</h4><figure class=\"highlight n1ql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> information_schema.<span class=\"symbol\">`TRIGGERS`</span>;</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"2、查询所有的表\"><a href=\"#2、查询所有的表\" class=\"headerlink\" title=\"2、查询所有的表\"></a>2、查询所有的表</h4><figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"built_in\">TABLE_NAME</span> <span class=\"built_in\">table_name</span>,TABLE_COMMENT table_comment <span class=\"keyword\">FROM</span> INFORMATION_SCHEMA.<span class=\"keyword\">TABLES</span> <span class=\"keyword\">where</span> table_schema=<span class=\"string\">'myDB'</span> <span class=\"keyword\">and</span> table_type=<span class=\"string\">'BASE TABLE'</span>;   //表名(不包含视图)及备注</span><br><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">full</span> <span class=\"keyword\">tables</span> <span class=\"keyword\">where</span> Table_type = <span class=\"string\">'BASE TABLE'</span>;    //表名</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"3、查询db1数据库中所有有触发器的表\"><a href=\"#3、查询db1数据库中所有有触发器的表\" class=\"headerlink\" title=\"3、查询db1数据库中所有有触发器的表\"></a>3、查询db1数据库中所有有触发器的表</h4><figure class=\"highlight n1ql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span> EVENT_OBJECT_TABLE <span class=\"keyword\">FROM</span> information_schema.<span class=\"symbol\">`TRIGGERS`</span> <span class=\"keyword\">WHERE</span> EVENT_OBJECT_SCHEMA = <span class=\"string\">\"db1\"</span>;</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"4、查询db1数据库中所有无触发器的表\"><a href=\"#4、查询db1数据库中所有无触发器的表\" class=\"headerlink\" title=\"4、查询db1数据库中所有无触发器的表\"></a>4、查询db1数据库中所有无触发器的表</h4><figure class=\"highlight n1ql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> A.TABLE_NAME <span class=\"keyword\">from</span> information_schema.<span class=\"symbol\">`TABLES`</span> A <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> information_schema.<span class=\"symbol\">`TRIGGERS`</span> B <span class=\"keyword\">ON</span> A.TABLE_NAME=B.EVENT_OBJECT_TABLE <span class=\"keyword\">where</span> B.EVENT_OBJECT_TABLE <span class=\"keyword\">is</span> <span class=\"literal\">null</span> <span class=\"keyword\">and</span> A.TABLE_SCHEMA=<span class=\"string\">\"db1\"</span>;</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"5、创建索引\"><a href=\"#5、创建索引\" class=\"headerlink\" title=\"5、创建索引\"></a>5、创建索引</h4><figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"built_in\">table_name</span> <span class=\"keyword\">add</span> <span class=\"keyword\">index</span> index_name (索引字段);   <span class=\"comment\">-- 创建普通索引</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">index</span> index_name <span class=\"keyword\">on</span> <span class=\"built_in\">table_name</span> (索引字段);         <span class=\"comment\">-- 创建普通索引</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"built_in\">table_name</span> <span class=\"keyword\">add</span> <span class=\"keyword\">primary key</span>(colunm_name);     <span class=\"comment\">-- 创建主键</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"built_in\">table_name</span> <span class=\"keyword\">add</span> <span class=\"keyword\">unique</span>(colunm_name);          <span class=\"comment\">-- 创建唯一索引</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">index</span> idx_c1_c2 <span class=\"keyword\">on</span> <span class=\"built_in\">table_name</span>(c1,c2);             <span class=\"comment\">-- 创建联合索引</span></span><br><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">index</span> <span class=\"keyword\">from</span> <span class=\"built_in\">table_name</span>;                              <span class=\"comment\">-- 查看表中的索引</span></span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"6、去除数据表中指定字段的换行符\"><a href=\"#6、去除数据表中指定字段的换行符\" class=\"headerlink\" title=\"6、去除数据表中指定字段的换行符\"></a>6、去除数据表中指定字段的换行符</h4><figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- char(10)：换行符      char(13)：回车符</span></span><br><span class=\"line\"><span class=\"keyword\">update</span> <span class=\"keyword\">table</span> <span class=\"keyword\">set</span> <span class=\"type\">name</span>=replace(replace(`field`,<span class=\"type\">char</span>(<span class=\"number\">10</span>),<span class=\"string\">''</span>),<span class=\"type\">char</span>(<span class=\"number\">13</span>),<span class=\"string\">''</span>);</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"7、修改表引擎\"><a href=\"#7、修改表引擎\" class=\"headerlink\" title=\"7、修改表引擎\"></a>7、修改表引擎</h4><figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"built_in\">table_name</span> engine=MyISAM;</span><br></pre></td></tr></tbody></table></figure>\n","excerpt":"","more":"<h4 id=\"1、查看所有的触发器\"><a href=\"#1、查看所有的触发器\" class=\"headerlink\" title=\"1、查看所有的触发器\"></a>1、查看所有的触发器</h4><figure class=\"highlight n1ql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> * <span class=\"keyword\">FROM</span> information_schema.<span class=\"symbol\">`TRIGGERS`</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"2、查询所有的表\"><a href=\"#2、查询所有的表\" class=\"headerlink\" title=\"2、查询所有的表\"></a>2、查询所有的表</h4><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"built_in\">TABLE_NAME</span> <span class=\"built_in\">table_name</span>,TABLE_COMMENT table_comment <span class=\"keyword\">FROM</span> INFORMATION_SCHEMA.<span class=\"keyword\">TABLES</span> <span class=\"keyword\">where</span> table_schema=<span class=\"string\">&#x27;myDB&#x27;</span> <span class=\"keyword\">and</span> table_type=<span class=\"string\">&#x27;BASE TABLE&#x27;</span>;   //表名(不包含视图)及备注</span><br><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">full</span> <span class=\"keyword\">tables</span> <span class=\"keyword\">where</span> Table_type = <span class=\"string\">&#x27;BASE TABLE&#x27;</span>;    //表名</span><br></pre></td></tr></table></figure>\n<h4 id=\"3、查询db1数据库中所有有触发器的表\"><a href=\"#3、查询db1数据库中所有有触发器的表\" class=\"headerlink\" title=\"3、查询db1数据库中所有有触发器的表\"></a>3、查询db1数据库中所有有触发器的表</h4><figure class=\"highlight n1ql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">DISTINCT</span> EVENT_OBJECT_TABLE <span class=\"keyword\">FROM</span> information_schema.<span class=\"symbol\">`TRIGGERS`</span> <span class=\"keyword\">WHERE</span> EVENT_OBJECT_SCHEMA = <span class=\"string\">&quot;db1&quot;</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"4、查询db1数据库中所有无触发器的表\"><a href=\"#4、查询db1数据库中所有无触发器的表\" class=\"headerlink\" title=\"4、查询db1数据库中所有无触发器的表\"></a>4、查询db1数据库中所有无触发器的表</h4><figure class=\"highlight n1ql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> A.TABLE_NAME <span class=\"keyword\">from</span> information_schema.<span class=\"symbol\">`TABLES`</span> A <span class=\"keyword\">LEFT</span> <span class=\"keyword\">JOIN</span> information_schema.<span class=\"symbol\">`TRIGGERS`</span> B <span class=\"keyword\">ON</span> A.TABLE_NAME=B.EVENT_OBJECT_TABLE <span class=\"keyword\">where</span> B.EVENT_OBJECT_TABLE <span class=\"keyword\">is</span> <span class=\"literal\">null</span> <span class=\"keyword\">and</span> A.TABLE_SCHEMA=<span class=\"string\">&quot;db1&quot;</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"5、创建索引\"><a href=\"#5、创建索引\" class=\"headerlink\" title=\"5、创建索引\"></a>5、创建索引</h4><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"built_in\">table_name</span> <span class=\"keyword\">add</span> <span class=\"keyword\">index</span> index_name (索引字段);   <span class=\"comment\">-- 创建普通索引</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">index</span> index_name <span class=\"keyword\">on</span> <span class=\"built_in\">table_name</span> (索引字段);         <span class=\"comment\">-- 创建普通索引</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"built_in\">table_name</span> <span class=\"keyword\">add</span> <span class=\"keyword\">primary key</span>(colunm_name);     <span class=\"comment\">-- 创建主键</span></span><br><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"built_in\">table_name</span> <span class=\"keyword\">add</span> <span class=\"keyword\">unique</span>(colunm_name);          <span class=\"comment\">-- 创建唯一索引</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">index</span> idx_c1_c2 <span class=\"keyword\">on</span> <span class=\"built_in\">table_name</span>(c1,c2);             <span class=\"comment\">-- 创建联合索引</span></span><br><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">index</span> <span class=\"keyword\">from</span> <span class=\"built_in\">table_name</span>;                              <span class=\"comment\">-- 查看表中的索引</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"6、去除数据表中指定字段的换行符\"><a href=\"#6、去除数据表中指定字段的换行符\" class=\"headerlink\" title=\"6、去除数据表中指定字段的换行符\"></a>6、去除数据表中指定字段的换行符</h4><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">-- char(10)：换行符      char(13)：回车符</span></span><br><span class=\"line\"><span class=\"keyword\">update</span> <span class=\"keyword\">table</span> <span class=\"keyword\">set</span> <span class=\"type\">name</span>=replace(replace(`field`,<span class=\"type\">char</span>(<span class=\"number\">10</span>),<span class=\"string\">&#x27;&#x27;</span>),<span class=\"type\">char</span>(<span class=\"number\">13</span>),<span class=\"string\">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<h4 id=\"7、修改表引擎\"><a href=\"#7、修改表引擎\" class=\"headerlink\" title=\"7、修改表引擎\"></a>7、修改表引擎</h4><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"built_in\">table_name</span> engine=MyISAM;</span><br></pre></td></tr></table></figure>\n"},{"title":"数据库三范式","abbrlink":"db-3nf","date":"2020-08-20T20:12:21.000Z","_content":"\n### 数据库三范式\n1. 第一范式(1NF)：规定表中的每个列都应该是不可分割的最小单元。\n2. 第二范式(2NF)：是在满足第一范式的基础上，规定表中的非主键列不存在对主键的部分依赖。\n  即要求实体的属性完全依赖于主关键字。所谓完全依赖是指不能存在仅依赖主关键字一部分的属性，如果存在，那么这个属性和主关键字的这一部分应该分离出来形成一个新的实体，新实体与原实体之间是一对多的关系。为实现区分通常需要为表加上一个列，以存储各个实例的惟一标识。\n3. 第三范式(3NF)：是在满足第一范式和第二范式的基础上，规定表中的列不存在对非主键列的传递依赖。\n  所以第三范式具有如下特征：\n       1. 每一列只有一个值\n       2. 每一行都能区分。\n       3. 每一个表都不包含其他表已经包含的非主关键字信息。\n  例如，帖子表中只能出现发帖人的id，而不能出现发帖人的id，还同时出现发帖人姓名，否则，只要出现同一发帖人id的所有记录，它们中的姓名部分都必须严格保持一致，这就是数据冗余。\n  但在实际中，我们经常会进行反范式设计，适当增加表的冗余字段来提高查询效率。\n- 优势：使表的结构更简单、优雅，表的逻辑和条理性更强，并且使用三范式可以很大程度的减少表中的冗余数据，很好的节省了数据库的存储资源。","source":"_posts/MySQL/数据库三范式.md","raw":"---\ntitle: 数据库三范式\nabbrlink: 'db-3nf'\ntags:  [数据库]\ncategories:  数据库\ndate: 2020-08-21 04:12:21\n---\n\n### 数据库三范式\n1. 第一范式(1NF)：规定表中的每个列都应该是不可分割的最小单元。\n2. 第二范式(2NF)：是在满足第一范式的基础上，规定表中的非主键列不存在对主键的部分依赖。\n  即要求实体的属性完全依赖于主关键字。所谓完全依赖是指不能存在仅依赖主关键字一部分的属性，如果存在，那么这个属性和主关键字的这一部分应该分离出来形成一个新的实体，新实体与原实体之间是一对多的关系。为实现区分通常需要为表加上一个列，以存储各个实例的惟一标识。\n3. 第三范式(3NF)：是在满足第一范式和第二范式的基础上，规定表中的列不存在对非主键列的传递依赖。\n  所以第三范式具有如下特征：\n       1. 每一列只有一个值\n       2. 每一行都能区分。\n       3. 每一个表都不包含其他表已经包含的非主关键字信息。\n  例如，帖子表中只能出现发帖人的id，而不能出现发帖人的id，还同时出现发帖人姓名，否则，只要出现同一发帖人id的所有记录，它们中的姓名部分都必须严格保持一致，这就是数据冗余。\n  但在实际中，我们经常会进行反范式设计，适当增加表的冗余字段来提高查询效率。\n- 优势：使表的结构更简单、优雅，表的逻辑和条理性更强，并且使用三范式可以很大程度的减少表中的冗余数据，很好的节省了数据库的存储资源。","slug":"MySQL/数据库三范式","published":1,"updated":"2024-05-21T03:19:18.099Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2to002aoshg9kd314d6","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"数据库三范式\"><a href=\"#数据库三范式\" class=\"headerlink\" title=\"数据库三范式\"></a>数据库三范式</h3><ol>\n<li>第一范式(1NF)：规定表中的每个列都应该是不可分割的最小单元。</li>\n<li>第二范式(2NF)：是在满足第一范式的基础上，规定表中的非主键列不存在对主键的部分依赖。<br>即要求实体的属性完全依赖于主关键字。所谓完全依赖是指不能存在仅依赖主关键字一部分的属性，如果存在，那么这个属性和主关键字的这一部分应该分离出来形成一个新的实体，新实体与原实体之间是一对多的关系。为实现区分通常需要为表加上一个列，以存储各个实例的惟一标识。</li>\n<li>第三范式(3NF)：是在满足第一范式和第二范式的基础上，规定表中的列不存在对非主键列的传递依赖。<br>所以第三范式具有如下特征：<pre><code>1. 每一列只有一个值\n2. 每一行都能区分。\n3. 每一个表都不包含其他表已经包含的非主关键字信息。\n</code></pre>例如，帖子表中只能出现发帖人的id，而不能出现发帖人的id，还同时出现发帖人姓名，否则，只要出现同一发帖人id的所有记录，它们中的姓名部分都必须严格保持一致，这就是数据冗余。<br>但在实际中，我们经常会进行反范式设计，适当增加表的冗余字段来提高查询效率。</li>\n</ol>\n<ul>\n<li>优势：使表的结构更简单、优雅，表的逻辑和条理性更强，并且使用三范式可以很大程度的减少表中的冗余数据，很好的节省了数据库的存储资源。</li>\n</ul>\n","excerpt":"","more":"<h3 id=\"数据库三范式\"><a href=\"#数据库三范式\" class=\"headerlink\" title=\"数据库三范式\"></a>数据库三范式</h3><ol>\n<li>第一范式(1NF)：规定表中的每个列都应该是不可分割的最小单元。</li>\n<li>第二范式(2NF)：是在满足第一范式的基础上，规定表中的非主键列不存在对主键的部分依赖。<br>即要求实体的属性完全依赖于主关键字。所谓完全依赖是指不能存在仅依赖主关键字一部分的属性，如果存在，那么这个属性和主关键字的这一部分应该分离出来形成一个新的实体，新实体与原实体之间是一对多的关系。为实现区分通常需要为表加上一个列，以存储各个实例的惟一标识。</li>\n<li>第三范式(3NF)：是在满足第一范式和第二范式的基础上，规定表中的列不存在对非主键列的传递依赖。<br>所以第三范式具有如下特征：<pre><code>1. 每一列只有一个值\n2. 每一行都能区分。\n3. 每一个表都不包含其他表已经包含的非主关键字信息。\n</code></pre>例如，帖子表中只能出现发帖人的id，而不能出现发帖人的id，还同时出现发帖人姓名，否则，只要出现同一发帖人id的所有记录，它们中的姓名部分都必须严格保持一致，这就是数据冗余。<br>但在实际中，我们经常会进行反范式设计，适当增加表的冗余字段来提高查询效率。</li>\n</ol>\n<ul>\n<li>优势：使表的结构更简单、优雅，表的逻辑和条理性更强，并且使用三范式可以很大程度的减少表中的冗余数据，很好的节省了数据库的存储资源。</li>\n</ul>\n"},{"title":"谈谈MySQL中的聚簇索引和非聚簇索引","abbrlink":"mysql-clustered-index","date":"2022-03-21T10:45:23.000Z","updated":"2022-03-21T10:45:23.000Z","_content":"### 聚簇索引和非聚簇索引的区别\n聚簇索引的主索引的叶子结点存储的是键值对应的数据本身，辅助索引的叶子结点存储的是键值对应的数据的主键键值。\n\n聚簇索引的数据和主键索引存储在一起。\n聚簇索引的数据是根据主键的顺序保存。因此适合按主键索引的区间查找，可以有更少的磁盘I/O，加快查询速度。\n\nMyISAM存储引擎采用的是非聚簇索引，非聚簇索引的主索引和辅助索引几乎是一样的，只是主索引不允许重复，不允许空值，他们的叶子结点的key都存储指向键值对应的数据的物理地址。\n非聚簇索引的数据表和索引表是分开存储的。\n非聚簇索引中的数据是根据数据的插入顺序保存。因此非聚簇索引更适合单个数据的查询。插入顺序不受键值影响。\n\n聚集索引的B+Tree中的叶子节点存放的是整张表的行记录数据。辅助索引与聚集索引的区别在于辅助索引的叶子节点并不包含行记录的全部数据，而是存储相应行数据的聚集索引键，即主键。当通过辅助索引来查询数据时，InnoDB存储引擎会遍历辅助索引找到主键，然后再通过主键在聚集索引中找到完整的行记录数据。\n\nMyISAM：非聚簇索引\ninnoDB：聚簇索引\n\n### 参考资料\nhttps://mp.weixin.qq.com/s/pC0_Y7M7BkoUmlRwneZZdA\nhttps://www.cnblogs.com/setalone/p/14851000.html","source":"_posts/MySQL/谈谈MySQL中的聚簇索引和非聚簇索引.md","raw":"---\ntitle: 谈谈MySQL中的聚簇索引和非聚簇索引\ntags: [聚簇索引]\ncategories: MySQL\nabbrlink: 'mysql-clustered-index'\ndate: 2022-03-21 18:45:23\nupdated: 2022-03-21 18:45:23\n---\n### 聚簇索引和非聚簇索引的区别\n聚簇索引的主索引的叶子结点存储的是键值对应的数据本身，辅助索引的叶子结点存储的是键值对应的数据的主键键值。\n\n聚簇索引的数据和主键索引存储在一起。\n聚簇索引的数据是根据主键的顺序保存。因此适合按主键索引的区间查找，可以有更少的磁盘I/O，加快查询速度。\n\nMyISAM存储引擎采用的是非聚簇索引，非聚簇索引的主索引和辅助索引几乎是一样的，只是主索引不允许重复，不允许空值，他们的叶子结点的key都存储指向键值对应的数据的物理地址。\n非聚簇索引的数据表和索引表是分开存储的。\n非聚簇索引中的数据是根据数据的插入顺序保存。因此非聚簇索引更适合单个数据的查询。插入顺序不受键值影响。\n\n聚集索引的B+Tree中的叶子节点存放的是整张表的行记录数据。辅助索引与聚集索引的区别在于辅助索引的叶子节点并不包含行记录的全部数据，而是存储相应行数据的聚集索引键，即主键。当通过辅助索引来查询数据时，InnoDB存储引擎会遍历辅助索引找到主键，然后再通过主键在聚集索引中找到完整的行记录数据。\n\nMyISAM：非聚簇索引\ninnoDB：聚簇索引\n\n### 参考资料\nhttps://mp.weixin.qq.com/s/pC0_Y7M7BkoUmlRwneZZdA\nhttps://www.cnblogs.com/setalone/p/14851000.html","slug":"MySQL/谈谈MySQL中的聚簇索引和非聚簇索引","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tp002eoshgc0zohrk8","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"聚簇索引和非聚簇索引的区别\"><a href=\"#聚簇索引和非聚簇索引的区别\" class=\"headerlink\" title=\"聚簇索引和非聚簇索引的区别\"></a>聚簇索引和非聚簇索引的区别</h3><p>聚簇索引的主索引的叶子结点存储的是键值对应的数据本身，辅助索引的叶子结点存储的是键值对应的数据的主键键值。</p>\n<p>聚簇索引的数据和主键索引存储在一起。<br>聚簇索引的数据是根据主键的顺序保存。因此适合按主键索引的区间查找，可以有更少的磁盘I/O，加快查询速度。</p>\n<p>MyISAM存储引擎采用的是非聚簇索引，非聚簇索引的主索引和辅助索引几乎是一样的，只是主索引不允许重复，不允许空值，他们的叶子结点的key都存储指向键值对应的数据的物理地址。<br>非聚簇索引的数据表和索引表是分开存储的。<br>非聚簇索引中的数据是根据数据的插入顺序保存。因此非聚簇索引更适合单个数据的查询。插入顺序不受键值影响。</p>\n<p>聚集索引的B+Tree中的叶子节点存放的是整张表的行记录数据。辅助索引与聚集索引的区别在于辅助索引的叶子节点并不包含行记录的全部数据，而是存储相应行数据的聚集索引键，即主键。当通过辅助索引来查询数据时，InnoDB存储引擎会遍历辅助索引找到主键，然后再通过主键在聚集索引中找到完整的行记录数据。</p>\n<p>MyISAM：非聚簇索引<br>innoDB：聚簇索引</p>\n<h3 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h3><p><a href=\"https://mp.weixin.qq.com/s/pC0_Y7M7BkoUmlRwneZZdA\">https://mp.weixin.qq.com/s/pC0_Y7M7BkoUmlRwneZZdA</a><br><a href=\"https://www.cnblogs.com/setalone/p/14851000.html\">https://www.cnblogs.com/setalone/p/14851000.html</a></p>\n","excerpt":"","more":"<h3 id=\"聚簇索引和非聚簇索引的区别\"><a href=\"#聚簇索引和非聚簇索引的区别\" class=\"headerlink\" title=\"聚簇索引和非聚簇索引的区别\"></a>聚簇索引和非聚簇索引的区别</h3><p>聚簇索引的主索引的叶子结点存储的是键值对应的数据本身，辅助索引的叶子结点存储的是键值对应的数据的主键键值。</p>\n<p>聚簇索引的数据和主键索引存储在一起。<br>聚簇索引的数据是根据主键的顺序保存。因此适合按主键索引的区间查找，可以有更少的磁盘I/O，加快查询速度。</p>\n<p>MyISAM存储引擎采用的是非聚簇索引，非聚簇索引的主索引和辅助索引几乎是一样的，只是主索引不允许重复，不允许空值，他们的叶子结点的key都存储指向键值对应的数据的物理地址。<br>非聚簇索引的数据表和索引表是分开存储的。<br>非聚簇索引中的数据是根据数据的插入顺序保存。因此非聚簇索引更适合单个数据的查询。插入顺序不受键值影响。</p>\n<p>聚集索引的B+Tree中的叶子节点存放的是整张表的行记录数据。辅助索引与聚集索引的区别在于辅助索引的叶子节点并不包含行记录的全部数据，而是存储相应行数据的聚集索引键，即主键。当通过辅助索引来查询数据时，InnoDB存储引擎会遍历辅助索引找到主键，然后再通过主键在聚集索引中找到完整的行记录数据。</p>\n<p>MyISAM：非聚簇索引<br>innoDB：聚簇索引</p>\n<h3 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h3><p><a href=\"https://mp.weixin.qq.com/s/pC0_Y7M7BkoUmlRwneZZdA\">https://mp.weixin.qq.com/s/pC0_Y7M7BkoUmlRwneZZdA</a><br><a href=\"https://www.cnblogs.com/setalone/p/14851000.html\">https://www.cnblogs.com/setalone/p/14851000.html</a></p>\n"},{"title":"Excel使用小技巧","abbrlink":"excel-tips","date":"2018-06-19T14:02:03.000Z","updated":"2018-09-02T07:43:00.000Z","_content":"\n1. excel固定第一行：选择第二行，点击视图里的冻结窗口即可。\n\n2. excel分列：\n\t如将某一列的数据由C4159D5953D8转为C4:15:9D:59:53:D8格式：\n\t```公式为：=left(A1,2) & \":\" & mid(A1,3,2) & \":\" & mid(A1,5,2) & \":\" & mid(A1,7,2) & \":\" & mid(A1,9,2) & \":\" & right(A1,2)```\n\n3. 删除重复项：\n    选中数据区域->数据->删除重复项->确定\n    \n4. VLOOKUP函数的使用","source":"_posts/Office/Excel使用小技巧.md","raw":"---\ntitle: Excel使用小技巧\ntags: [Excel]\ncategories: Office\nabbrlink: 'excel-tips'\ndate: 2018-06-19 22:02:03\nupdated: 2018-09-02 15:43:00\n---\n\n1. excel固定第一行：选择第二行，点击视图里的冻结窗口即可。\n\n2. excel分列：\n\t如将某一列的数据由C4159D5953D8转为C4:15:9D:59:53:D8格式：\n\t```公式为：=left(A1,2) & \":\" & mid(A1,3,2) & \":\" & mid(A1,5,2) & \":\" & mid(A1,7,2) & \":\" & mid(A1,9,2) & \":\" & right(A1,2)```\n\n3. 删除重复项：\n    选中数据区域->数据->删除重复项->确定\n    \n4. VLOOKUP函数的使用","slug":"Office/Excel使用小技巧","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tp002ioshgawnq7qz0","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li><p>excel固定第一行：选择第二行，点击视图里的冻结窗口即可。</p>\n</li>\n<li><p>excel分列：<br> 如将某一列的数据由C4159D5953D8转为C4:15:9D:59:53:D8格式：<br> <code>公式为：=left(A1,2) &amp; \":\" &amp; mid(A1,3,2) &amp; \":\" &amp; mid(A1,5,2) &amp; \":\" &amp; mid(A1,7,2) &amp; \":\" &amp; mid(A1,9,2) &amp; \":\" &amp; right(A1,2)</code></p>\n</li>\n<li><p>删除重复项：<br> 选中数据区域-&gt;数据-&gt;删除重复项-&gt;确定</p>\n</li>\n<li><p>VLOOKUP函数的使用</p>\n</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li><p>excel固定第一行：选择第二行，点击视图里的冻结窗口即可。</p>\n</li>\n<li><p>excel分列：<br> 如将某一列的数据由C4159D5953D8转为C4:15:9D:59:53:D8格式：<br> <code>公式为：=left(A1,2) &amp; &quot;:&quot; &amp; mid(A1,3,2) &amp; &quot;:&quot; &amp; mid(A1,5,2) &amp; &quot;:&quot; &amp; mid(A1,7,2) &amp; &quot;:&quot; &amp; mid(A1,9,2) &amp; &quot;:&quot; &amp; right(A1,2)</code></p>\n</li>\n<li><p>删除重复项：<br> 选中数据区域-&gt;数据-&gt;删除重复项-&gt;确定</p>\n</li>\n<li><p>VLOOKUP函数的使用</p>\n</li>\n</ol>\n"},{"title":"Oracle笔记","abbrlink":"oracle-note","date":"2018-06-19T14:39:00.000Z","updated":"2018-06-19T14:45:00.000Z","_content":"\n#### 1. 强制并行处理\n`/*+ monitor parallel(8)*/`\n\n### 2. plsql查看sql性能\n`F5`\n\n### 3. 在oracle中有时候需要进行MySQL中的find_in_set查询，故封装了如下函数：\n``` \nCREATE OR REPLACE FUNCTION FIND_IN_SET(piv_str1 varchar2, piv_str2 varchar2, p_sep varchar2 := ',')\nRETURN NUMBER IS\n  l_idx    number:=0; -- 用于计算piv_str2中分隔符的位置\n  str      varchar2(500);  -- 根据分隔符截取的子字符串\n  piv_str  varchar2(500) := piv_str2; -- 将piv_str2赋值给piv_str\n  res      number:=0; -- 返回结果\nBEGIN\n-- 如果piv_str中没有分割符，直接判断piv_str1和piv_str是否相等，相等 res=1\nIF instr(piv_str, p_sep, 1) = 0 THEN\n   IF piv_str = piv_str1 THEN\n      res:= 1;\n   END IF;\nELSE\n-- 循环按分隔符截取piv_str\nLOOP\n    l_idx := instr(piv_str,p_sep);\n-- 当piv_str中还有分隔符时\n      IF l_idx > 0 THEN\n   -- 截取第一个分隔符前的字段str\n         str:= substr(piv_str,1,l_idx-1);\n   -- 判断 str 和piv_str1 是否相等，相等 res=1 并结束循环判断\n         IF str = piv_str1 THEN\n           res:= 1;\n           EXIT;\n         END IF;\n        piv_str := substr(piv_str,l_idx+length(p_sep));\n      ELSE\n   -- 当截取后的piv_str 中不存在分割符时，判断piv_str和piv_str1是否相等，相等 res=1\n        IF piv_str = piv_str1 THEN\n           res:= 1;\n        END IF;\n        -- 无论最后是否相等，都跳出循环\n        EXIT;\n      END IF;\nEND LOOP;\n-- 结束循环\nEND IF;\n-- 返回res\nRETURN res;\nEND FIND_IN_SET;\n``` \n\n### 4. 日期转时间戳函数\n```  \ncreate or replace function oracle_to_unix(in_date IN DATE) return number is\n    begin \n        return( (in_date -TO_DATE('19700101','yyyymmdd'))*86400 - TO_NUMBER(SUBSTR(TZ_OFFSET(sessiontimezone),1,3))*3600);\n    end oracle_to_unix;\n```\n\n### 5. 时间戳转日期函数\n``` \ncreate or replace function unix_to_oracle(in_number NUMBER) return date is\n    begin\n        return(TO_DATE('19700101','yyyymmdd') + in_number/86400 +TO_NUMBER(SUBSTR(TZ_OFFSET(sessiontimezone),1,3))/24);\n    end unix_to_oracle;\n\n```\n","source":"_posts/Oracle/Oracle笔记.md","raw":"---\ntitle: Oracle笔记\ntags: [Oracle]\ncategories: Oracle\nabbrlink: 'oracle-note'\ndate: 2018-06-19 22:39:00\nupdated: 2018-06-19 22:45:00\n---\n\n#### 1. 强制并行处理\n`/*+ monitor parallel(8)*/`\n\n### 2. plsql查看sql性能\n`F5`\n\n### 3. 在oracle中有时候需要进行MySQL中的find_in_set查询，故封装了如下函数：\n``` \nCREATE OR REPLACE FUNCTION FIND_IN_SET(piv_str1 varchar2, piv_str2 varchar2, p_sep varchar2 := ',')\nRETURN NUMBER IS\n  l_idx    number:=0; -- 用于计算piv_str2中分隔符的位置\n  str      varchar2(500);  -- 根据分隔符截取的子字符串\n  piv_str  varchar2(500) := piv_str2; -- 将piv_str2赋值给piv_str\n  res      number:=0; -- 返回结果\nBEGIN\n-- 如果piv_str中没有分割符，直接判断piv_str1和piv_str是否相等，相等 res=1\nIF instr(piv_str, p_sep, 1) = 0 THEN\n   IF piv_str = piv_str1 THEN\n      res:= 1;\n   END IF;\nELSE\n-- 循环按分隔符截取piv_str\nLOOP\n    l_idx := instr(piv_str,p_sep);\n-- 当piv_str中还有分隔符时\n      IF l_idx > 0 THEN\n   -- 截取第一个分隔符前的字段str\n         str:= substr(piv_str,1,l_idx-1);\n   -- 判断 str 和piv_str1 是否相等，相等 res=1 并结束循环判断\n         IF str = piv_str1 THEN\n           res:= 1;\n           EXIT;\n         END IF;\n        piv_str := substr(piv_str,l_idx+length(p_sep));\n      ELSE\n   -- 当截取后的piv_str 中不存在分割符时，判断piv_str和piv_str1是否相等，相等 res=1\n        IF piv_str = piv_str1 THEN\n           res:= 1;\n        END IF;\n        -- 无论最后是否相等，都跳出循环\n        EXIT;\n      END IF;\nEND LOOP;\n-- 结束循环\nEND IF;\n-- 返回res\nRETURN res;\nEND FIND_IN_SET;\n``` \n\n### 4. 日期转时间戳函数\n```  \ncreate or replace function oracle_to_unix(in_date IN DATE) return number is\n    begin \n        return( (in_date -TO_DATE('19700101','yyyymmdd'))*86400 - TO_NUMBER(SUBSTR(TZ_OFFSET(sessiontimezone),1,3))*3600);\n    end oracle_to_unix;\n```\n\n### 5. 时间戳转日期函数\n``` \ncreate or replace function unix_to_oracle(in_number NUMBER) return date is\n    begin\n        return(TO_DATE('19700101','yyyymmdd') + in_number/86400 +TO_NUMBER(SUBSTR(TZ_OFFSET(sessiontimezone),1,3))/24);\n    end unix_to_oracle;\n\n```\n","slug":"Oracle/Oracle笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tq002moshgc20l7wk6","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h4 id=\"1-强制并行处理\"><a href=\"#1-强制并行处理\" class=\"headerlink\" title=\"1. 强制并行处理\"></a>1. 强制并行处理</h4><p><code>/*+ monitor parallel(8)*/</code></p>\n<h3 id=\"2-plsql查看sql性能\"><a href=\"#2-plsql查看sql性能\" class=\"headerlink\" title=\"2. plsql查看sql性能\"></a>2. plsql查看sql性能</h3><p><code>F5</code></p>\n<h3 id=\"3-在oracle中有时候需要进行MySQL中的find-in-set查询，故封装了如下函数：\"><a href=\"#3-在oracle中有时候需要进行MySQL中的find-in-set查询，故封装了如下函数：\" class=\"headerlink\" title=\"3. 在oracle中有时候需要进行MySQL中的find_in_set查询，故封装了如下函数：\"></a>3. 在oracle中有时候需要进行MySQL中的find_in_set查询，故封装了如下函数：</h3><figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">OR REPLACE</span> <span class=\"keyword\">FUNCTION</span> FIND_IN_SET(piv_str1 varchar2, piv_str2 varchar2, p_sep varchar2 := <span class=\"string\">','</span>)</span><br><span class=\"line\"><span class=\"keyword\">RETURN</span> NUMBER <span class=\"keyword\">IS</span></span><br><span class=\"line\">  l_idx    number:=<span class=\"number\">0</span>; <span class=\"comment\">-- 用于计算piv_str2中分隔符的位置</span></span><br><span class=\"line\">  str      varchar2(<span class=\"number\">500</span>);  <span class=\"comment\">-- 根据分隔符截取的子字符串</span></span><br><span class=\"line\">  piv_str  varchar2(<span class=\"number\">500</span>) := piv_str2; <span class=\"comment\">-- 将piv_str2赋值给piv_str</span></span><br><span class=\"line\">  res      number:=<span class=\"number\">0</span>; <span class=\"comment\">-- 返回结果</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\"><span class=\"comment\">-- 如果piv_str中没有分割符，直接判断piv_str1和piv_str是否相等，相等 res=1</span></span><br><span class=\"line\"><span class=\"keyword\">IF</span> instr(piv_str, p_sep, <span class=\"number\">1</span>) = <span class=\"number\">0</span> <span class=\"keyword\">THEN</span></span><br><span class=\"line\">   <span class=\"keyword\">IF</span> piv_str = piv_str1 <span class=\"keyword\">THEN</span></span><br><span class=\"line\">      res:= <span class=\"number\">1</span>;</span><br><span class=\"line\">   <span class=\"keyword\">END</span> <span class=\"keyword\">IF</span>;</span><br><span class=\"line\"><span class=\"keyword\">ELSE</span></span><br><span class=\"line\"><span class=\"comment\">-- 循环按分隔符截取piv_str</span></span><br><span class=\"line\"><span class=\"keyword\">LOOP</span></span><br><span class=\"line\">    l_idx := instr(piv_str,p_sep);</span><br><span class=\"line\"><span class=\"comment\">-- 当piv_str中还有分隔符时</span></span><br><span class=\"line\">      <span class=\"keyword\">IF</span> l_idx &gt; <span class=\"number\">0</span> <span class=\"keyword\">THEN</span></span><br><span class=\"line\">   <span class=\"comment\">-- 截取第一个分隔符前的字段str</span></span><br><span class=\"line\">         str:= substr(piv_str,<span class=\"number\">1</span>,l_idx<span class=\"number\">-1</span>);</span><br><span class=\"line\">   <span class=\"comment\">-- 判断 str 和piv_str1 是否相等，相等 res=1 并结束循环判断</span></span><br><span class=\"line\">         <span class=\"keyword\">IF</span> str = piv_str1 <span class=\"keyword\">THEN</span></span><br><span class=\"line\">           res:= <span class=\"number\">1</span>;</span><br><span class=\"line\">           <span class=\"keyword\">EXIT</span>;</span><br><span class=\"line\">         <span class=\"keyword\">END</span> <span class=\"keyword\">IF</span>;</span><br><span class=\"line\">        piv_str := substr(piv_str,l_idx+length(p_sep));</span><br><span class=\"line\">      <span class=\"keyword\">ELSE</span></span><br><span class=\"line\">   <span class=\"comment\">-- 当截取后的piv_str 中不存在分割符时，判断piv_str和piv_str1是否相等，相等 res=1</span></span><br><span class=\"line\">        <span class=\"keyword\">IF</span> piv_str = piv_str1 <span class=\"keyword\">THEN</span></span><br><span class=\"line\">           res:= <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">END</span> <span class=\"keyword\">IF</span>;</span><br><span class=\"line\">        <span class=\"comment\">-- 无论最后是否相等，都跳出循环</span></span><br><span class=\"line\">        <span class=\"keyword\">EXIT</span>;</span><br><span class=\"line\">      <span class=\"keyword\">END</span> <span class=\"keyword\">IF</span>;</span><br><span class=\"line\"><span class=\"keyword\">END</span> <span class=\"keyword\">LOOP</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 结束循环</span></span><br><span class=\"line\"><span class=\"keyword\">END</span> <span class=\"keyword\">IF</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 返回res</span></span><br><span class=\"line\"><span class=\"keyword\">RETURN</span> res;</span><br><span class=\"line\"><span class=\"keyword\">END</span> FIND_IN_SET;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"4-日期转时间戳函数\"><a href=\"#4-日期转时间戳函数\" class=\"headerlink\" title=\"4. 日期转时间戳函数\"></a>4. 日期转时间戳函数</h3><figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">or replace</span> <span class=\"keyword\">function</span> oracle_to_unix(in_date <span class=\"keyword\">IN</span> <span class=\"type\">DATE</span>) <span class=\"keyword\">return</span> number <span class=\"keyword\">is</span></span><br><span class=\"line\">    <span class=\"keyword\">begin</span> </span><br><span class=\"line\">        <span class=\"keyword\">return</span>( (in_date -TO_DATE(<span class=\"string\">'19700101'</span>,<span class=\"string\">'yyyymmdd'</span>))*<span class=\"number\">86400</span> - TO_NUMBER(SUBSTR(TZ_OFFSET(sessiontimezone),<span class=\"number\">1</span>,<span class=\"number\">3</span>))*<span class=\"number\">3600</span>);</span><br><span class=\"line\">    <span class=\"keyword\">end</span> oracle_to_unix;</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"5-时间戳转日期函数\"><a href=\"#5-时间戳转日期函数\" class=\"headerlink\" title=\"5. 时间戳转日期函数\"></a>5. 时间戳转日期函数</h3><figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">or replace</span> <span class=\"keyword\">function</span> unix_to_oracle(in_number NUMBER) <span class=\"keyword\">return</span> <span class=\"type\">date</span> <span class=\"keyword\">is</span></span><br><span class=\"line\">    <span class=\"keyword\">begin</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span>(TO_DATE(<span class=\"string\">'19700101'</span>,<span class=\"string\">'yyyymmdd'</span>) + in_number/<span class=\"number\">86400</span> +TO_NUMBER(SUBSTR(TZ_OFFSET(sessiontimezone),<span class=\"number\">1</span>,<span class=\"number\">3</span>))/<span class=\"number\">24</span>);</span><br><span class=\"line\">    <span class=\"keyword\">end</span> unix_to_oracle;</span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n","excerpt":"","more":"<h4 id=\"1-强制并行处理\"><a href=\"#1-强制并行处理\" class=\"headerlink\" title=\"1. 强制并行处理\"></a>1. 强制并行处理</h4><p><code>/*+ monitor parallel(8)*/</code></p>\n<h3 id=\"2-plsql查看sql性能\"><a href=\"#2-plsql查看sql性能\" class=\"headerlink\" title=\"2. plsql查看sql性能\"></a>2. plsql查看sql性能</h3><p><code>F5</code></p>\n<h3 id=\"3-在oracle中有时候需要进行MySQL中的find-in-set查询，故封装了如下函数：\"><a href=\"#3-在oracle中有时候需要进行MySQL中的find-in-set查询，故封装了如下函数：\" class=\"headerlink\" title=\"3. 在oracle中有时候需要进行MySQL中的find_in_set查询，故封装了如下函数：\"></a>3. 在oracle中有时候需要进行MySQL中的find_in_set查询，故封装了如下函数：</h3><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">OR REPLACE</span> <span class=\"keyword\">FUNCTION</span> FIND_IN_SET(piv_str1 varchar2, piv_str2 varchar2, p_sep varchar2 := <span class=\"string\">&#x27;,&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">RETURN</span> NUMBER <span class=\"keyword\">IS</span></span><br><span class=\"line\">  l_idx    number:=<span class=\"number\">0</span>; <span class=\"comment\">-- 用于计算piv_str2中分隔符的位置</span></span><br><span class=\"line\">  str      varchar2(<span class=\"number\">500</span>);  <span class=\"comment\">-- 根据分隔符截取的子字符串</span></span><br><span class=\"line\">  piv_str  varchar2(<span class=\"number\">500</span>) := piv_str2; <span class=\"comment\">-- 将piv_str2赋值给piv_str</span></span><br><span class=\"line\">  res      number:=<span class=\"number\">0</span>; <span class=\"comment\">-- 返回结果</span></span><br><span class=\"line\"><span class=\"keyword\">BEGIN</span></span><br><span class=\"line\"><span class=\"comment\">-- 如果piv_str中没有分割符，直接判断piv_str1和piv_str是否相等，相等 res=1</span></span><br><span class=\"line\"><span class=\"keyword\">IF</span> instr(piv_str, p_sep, <span class=\"number\">1</span>) = <span class=\"number\">0</span> <span class=\"keyword\">THEN</span></span><br><span class=\"line\">   <span class=\"keyword\">IF</span> piv_str = piv_str1 <span class=\"keyword\">THEN</span></span><br><span class=\"line\">      res:= <span class=\"number\">1</span>;</span><br><span class=\"line\">   <span class=\"keyword\">END</span> <span class=\"keyword\">IF</span>;</span><br><span class=\"line\"><span class=\"keyword\">ELSE</span></span><br><span class=\"line\"><span class=\"comment\">-- 循环按分隔符截取piv_str</span></span><br><span class=\"line\"><span class=\"keyword\">LOOP</span></span><br><span class=\"line\">    l_idx := instr(piv_str,p_sep);</span><br><span class=\"line\"><span class=\"comment\">-- 当piv_str中还有分隔符时</span></span><br><span class=\"line\">      <span class=\"keyword\">IF</span> l_idx &gt; <span class=\"number\">0</span> <span class=\"keyword\">THEN</span></span><br><span class=\"line\">   <span class=\"comment\">-- 截取第一个分隔符前的字段str</span></span><br><span class=\"line\">         str:= substr(piv_str,<span class=\"number\">1</span>,l_idx<span class=\"number\">-1</span>);</span><br><span class=\"line\">   <span class=\"comment\">-- 判断 str 和piv_str1 是否相等，相等 res=1 并结束循环判断</span></span><br><span class=\"line\">         <span class=\"keyword\">IF</span> str = piv_str1 <span class=\"keyword\">THEN</span></span><br><span class=\"line\">           res:= <span class=\"number\">1</span>;</span><br><span class=\"line\">           <span class=\"keyword\">EXIT</span>;</span><br><span class=\"line\">         <span class=\"keyword\">END</span> <span class=\"keyword\">IF</span>;</span><br><span class=\"line\">        piv_str := substr(piv_str,l_idx+length(p_sep));</span><br><span class=\"line\">      <span class=\"keyword\">ELSE</span></span><br><span class=\"line\">   <span class=\"comment\">-- 当截取后的piv_str 中不存在分割符时，判断piv_str和piv_str1是否相等，相等 res=1</span></span><br><span class=\"line\">        <span class=\"keyword\">IF</span> piv_str = piv_str1 <span class=\"keyword\">THEN</span></span><br><span class=\"line\">           res:= <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">END</span> <span class=\"keyword\">IF</span>;</span><br><span class=\"line\">        <span class=\"comment\">-- 无论最后是否相等，都跳出循环</span></span><br><span class=\"line\">        <span class=\"keyword\">EXIT</span>;</span><br><span class=\"line\">      <span class=\"keyword\">END</span> <span class=\"keyword\">IF</span>;</span><br><span class=\"line\"><span class=\"keyword\">END</span> <span class=\"keyword\">LOOP</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 结束循环</span></span><br><span class=\"line\"><span class=\"keyword\">END</span> <span class=\"keyword\">IF</span>;</span><br><span class=\"line\"><span class=\"comment\">-- 返回res</span></span><br><span class=\"line\"><span class=\"keyword\">RETURN</span> res;</span><br><span class=\"line\"><span class=\"keyword\">END</span> FIND_IN_SET;</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-日期转时间戳函数\"><a href=\"#4-日期转时间戳函数\" class=\"headerlink\" title=\"4. 日期转时间戳函数\"></a>4. 日期转时间戳函数</h3><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">or replace</span> <span class=\"keyword\">function</span> oracle_to_unix(in_date <span class=\"keyword\">IN</span> <span class=\"type\">DATE</span>) <span class=\"keyword\">return</span> number <span class=\"keyword\">is</span></span><br><span class=\"line\">    <span class=\"keyword\">begin</span> </span><br><span class=\"line\">        <span class=\"keyword\">return</span>( (in_date -TO_DATE(<span class=\"string\">&#x27;19700101&#x27;</span>,<span class=\"string\">&#x27;yyyymmdd&#x27;</span>))*<span class=\"number\">86400</span> - TO_NUMBER(SUBSTR(TZ_OFFSET(sessiontimezone),<span class=\"number\">1</span>,<span class=\"number\">3</span>))*<span class=\"number\">3600</span>);</span><br><span class=\"line\">    <span class=\"keyword\">end</span> oracle_to_unix;</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-时间戳转日期函数\"><a href=\"#5-时间戳转日期函数\" class=\"headerlink\" title=\"5. 时间戳转日期函数\"></a>5. 时间戳转日期函数</h3><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">or replace</span> <span class=\"keyword\">function</span> unix_to_oracle(in_number NUMBER) <span class=\"keyword\">return</span> <span class=\"type\">date</span> <span class=\"keyword\">is</span></span><br><span class=\"line\">    <span class=\"keyword\">begin</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span>(TO_DATE(<span class=\"string\">&#x27;19700101&#x27;</span>,<span class=\"string\">&#x27;yyyymmdd&#x27;</span>) + in_number/<span class=\"number\">86400</span> +TO_NUMBER(SUBSTR(TZ_OFFSET(sessiontimezone),<span class=\"number\">1</span>,<span class=\"number\">3</span>))/<span class=\"number\">24</span>);</span><br><span class=\"line\">    <span class=\"keyword\">end</span> unix_to_oracle;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n"},{"title":"R语言学习","abbrlink":"r-notes","date":"2018-06-19T14:02:03.000Z","updated":"2018-06-19T14:07:54.000Z","_content":"之前断断续续看了一些R语言的视频，一直没什么效果，看来还得做笔记：\n\n1. <- 是赋值的意思\n2. 向量是下标以1开始的\n3. 区分大小写\n4. 路径：`C://a.txt`\n5. round：四舍五入","source":"_posts/R/R语言学习.md","raw":"---\ntitle: R语言学习\ntags: [R]\ncategories: [R语言]\nabbrlink: 'r-notes'\ndate: 2018-06-19 22:02:03\nupdated: 2018-06-19 22:07:54\n---\n之前断断续续看了一些R语言的视频，一直没什么效果，看来还得做笔记：\n\n1. <- 是赋值的意思\n2. 向量是下标以1开始的\n3. 区分大小写\n4. 路径：`C://a.txt`\n5. round：四舍五入","slug":"R/R语言学习","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tr002poshg2lfy00kq","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>之前断断续续看了一些R语言的视频，一直没什么效果，看来还得做笔记：</p>\n<ol>\n<li>&lt;- 是赋值的意思</li>\n<li>向量是下标以1开始的</li>\n<li>区分大小写</li>\n<li>路径：<code>C://a.txt</code></li>\n<li>round：四舍五入</li>\n</ol>\n","excerpt":"","more":"<p>之前断断续续看了一些R语言的视频，一直没什么效果，看来还得做笔记：</p>\n<ol>\n<li>&lt;- 是赋值的意思</li>\n<li>向量是下标以1开始的</li>\n<li>区分大小写</li>\n<li>路径：<code>C://a.txt</code></li>\n<li>round：四舍五入</li>\n</ol>\n"},{"title":"Prolog笔记","abbrlink":"prolog-notes","date":"2019-01-31T03:36:00.000Z","updated":"2019-01-31T03:36:00.000Z","_content":"\n## 1. 加载脚本\n`?- ['E:/SWI-Prolog/test/friend.pl'].       %true`\n\n## 2. 教程 \nhttps://riptutorial.com/zh-CN/prolog\n\n## 3. 简单的计算求解：\n`?- X is 3*7.       %X = 21`\n\n## 4. CLP（约束逻辑编程）库的使用\n求解方程，CLP只能处理整数运算\n    ```\n        ?- use_module(library(clpfd)).\n        ?- Y #= 3+4.                    %Y = 7.\n        ?- 5 #= 4+W.                    %W = 1.\n    ```\n\n## 5. 单行注释\n使用\"%\"\n\n## 6. 知识库\n事实 + 规则 = 知识库。       \n事实是我们对这个世界直接观察的结果。规则是关于现实世界的逻辑推论。\n\n## 7. 合一（unification）\n找出那些使规则匹配的值。\n合一有时候不是唯一的，可以通过“;”来进行追问，有时候我们可能不满足于一个答案。\n\n## 8. 列表/元组\n程序 = 算法 + 数据结构。      列表是变长的容器，元组是定长的容器。\n    ```\n    ?- (1,2,3) = (1,2,3).               %元组\n    yes\n    \n    ?- [A,B,C] = [A,B,C].               %列表\n    yes\n    ```\n\n## 9. 内置谓词\n### length\n获取列表的长度   `?- length([1,2,3],L).      %L = 3.`\n### append\n可以用来合并两个列表   \n    ```\n    ?- append([1],[2],What).      %What = [1, 2].\n    ?- append([1],W,[1,2,3]).      %W = [2, 3].\n    ```\n### member\n检查某一个值是否在一个列表内  \n    ```\n    ?- member(1,[1,2]).      %true.\n    ?-  member(3,[1,2]).      %false.\n    ``` \n    \n\n\n","source":"_posts/Prolog/Prolog笔记.md","raw":"---\ntitle: Prolog笔记\ntags: [Prolog]\ncategories: Prolog\nabbrlink: 'prolog-notes'\ndate: 2019-01-31 11:36:00\nupdated: 2019-01-31 11:36:00\n---\n\n## 1. 加载脚本\n`?- ['E:/SWI-Prolog/test/friend.pl'].       %true`\n\n## 2. 教程 \nhttps://riptutorial.com/zh-CN/prolog\n\n## 3. 简单的计算求解：\n`?- X is 3*7.       %X = 21`\n\n## 4. CLP（约束逻辑编程）库的使用\n求解方程，CLP只能处理整数运算\n    ```\n        ?- use_module(library(clpfd)).\n        ?- Y #= 3+4.                    %Y = 7.\n        ?- 5 #= 4+W.                    %W = 1.\n    ```\n\n## 5. 单行注释\n使用\"%\"\n\n## 6. 知识库\n事实 + 规则 = 知识库。       \n事实是我们对这个世界直接观察的结果。规则是关于现实世界的逻辑推论。\n\n## 7. 合一（unification）\n找出那些使规则匹配的值。\n合一有时候不是唯一的，可以通过“;”来进行追问，有时候我们可能不满足于一个答案。\n\n## 8. 列表/元组\n程序 = 算法 + 数据结构。      列表是变长的容器，元组是定长的容器。\n    ```\n    ?- (1,2,3) = (1,2,3).               %元组\n    yes\n    \n    ?- [A,B,C] = [A,B,C].               %列表\n    yes\n    ```\n\n## 9. 内置谓词\n### length\n获取列表的长度   `?- length([1,2,3],L).      %L = 3.`\n### append\n可以用来合并两个列表   \n    ```\n    ?- append([1],[2],What).      %What = [1, 2].\n    ?- append([1],W,[1,2,3]).      %W = [2, 3].\n    ```\n### member\n检查某一个值是否在一个列表内  \n    ```\n    ?- member(1,[1,2]).      %true.\n    ?-  member(3,[1,2]).      %false.\n    ``` \n    \n\n\n","slug":"Prolog/Prolog笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ts002toshg0d7o43fk","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"1-加载脚本\"><a href=\"#1-加载脚本\" class=\"headerlink\" title=\"1. 加载脚本\"></a>1. 加载脚本</h2><p><code>?- ['E:/SWI-Prolog/test/friend.pl'].       %true</code></p>\n<h2 id=\"2-教程\"><a href=\"#2-教程\" class=\"headerlink\" title=\"2. 教程\"></a>2. 教程</h2><p><a href=\"https://riptutorial.com/zh-CN/prolog\">https://riptutorial.com/zh-CN/prolog</a></p>\n<h2 id=\"3-简单的计算求解：\"><a href=\"#3-简单的计算求解：\" class=\"headerlink\" title=\"3. 简单的计算求解：\"></a>3. 简单的计算求解：</h2><p><code>?- X is 3*7.       %X = 21</code></p>\n<h2 id=\"4-CLP（约束逻辑编程）库的使用\"><a href=\"#4-CLP（约束逻辑编程）库的使用\" class=\"headerlink\" title=\"4. CLP（约束逻辑编程）库的使用\"></a>4. CLP（约束逻辑编程）库的使用</h2><p>求解方程，CLP只能处理整数运算<br>    </p><figure class=\"highlight ruby\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">?-</span> use_module(library(clpfd)).</span><br><span class=\"line\"><span class=\"string\">?-</span> Y <span class=\"comment\">#= 3+4.                    %Y = 7.</span></span><br><span class=\"line\"><span class=\"string\">?-</span> <span class=\"number\">5</span> <span class=\"comment\">#= 4+W.                    %W = 1.</span></span><br></pre></td></tr></tbody></table></figure><p></p>\n<h2 id=\"5-单行注释\"><a href=\"#5-单行注释\" class=\"headerlink\" title=\"5. 单行注释\"></a>5. 单行注释</h2><p>使用”%”</p>\n<h2 id=\"6-知识库\"><a href=\"#6-知识库\" class=\"headerlink\" title=\"6. 知识库\"></a>6. 知识库</h2><p>事实 + 规则 = 知识库。<br>事实是我们对这个世界直接观察的结果。规则是关于现实世界的逻辑推论。</p>\n<h2 id=\"7-合一（unification）\"><a href=\"#7-合一（unification）\" class=\"headerlink\" title=\"7. 合一（unification）\"></a>7. 合一（unification）</h2><p>找出那些使规则匹配的值。<br>合一有时候不是唯一的，可以通过“;”来进行追问，有时候我们可能不满足于一个答案。</p>\n<h2 id=\"8-列表-元组\"><a href=\"#8-列表-元组\" class=\"headerlink\" title=\"8. 列表/元组\"></a>8. 列表/元组</h2><p>程序 = 算法 + 数据结构。      列表是变长的容器，元组是定长的容器。<br>    </p><figure class=\"highlight gcode\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">?- <span class=\"comment\">(1,2,3)</span> = <span class=\"comment\">(1,2,3)</span>.               <span class=\"meta\">%</span>元组</span><br><span class=\"line\">yes</span><br><span class=\"line\"></span><br><span class=\"line\">?- [A,B,C] = [A,B,C].               <span class=\"meta\">%</span>列表</span><br><span class=\"line\">yes</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h2 id=\"9-内置谓词\"><a href=\"#9-内置谓词\" class=\"headerlink\" title=\"9. 内置谓词\"></a>9. 内置谓词</h2><h3 id=\"length\"><a href=\"#length\" class=\"headerlink\" title=\"length\"></a>length</h3><p>获取列表的长度   <code>?- length([1,2,3],L).      %L = 3.</code></p>\n<h3 id=\"append\"><a href=\"#append\" class=\"headerlink\" title=\"append\"></a>append</h3><p>可以用来合并两个列表<br>    </p><figure class=\"highlight inform7\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">?- append(<span class=\"comment\">[1]</span>,<span class=\"comment\">[2]</span>,What).      %What = <span class=\"comment\">[1, 2]</span>.</span><br><span class=\"line\">?- append(<span class=\"comment\">[1]</span>,W,<span class=\"comment\">[1,2,3]</span>).      %W = <span class=\"comment\">[2, 3]</span>.</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h3 id=\"member\"><a href=\"#member\" class=\"headerlink\" title=\"member\"></a>member</h3><p>检查某一个值是否在一个列表内<br>    </p><figure class=\"highlight ruby\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">?-</span> member(<span class=\"number\">1</span>,[<span class=\"number\">1</span>,<span class=\"number\">2</span>]).      %<span class=\"literal\">true</span>.</span><br><span class=\"line\"><span class=\"string\">?-</span>  member(<span class=\"number\">3</span>,[<span class=\"number\">1</span>,<span class=\"number\">2</span>]).      %<span class=\"literal\">false</span>.</span><br></pre></td></tr></tbody></table></figure><p></p>\n","excerpt":"","more":"<h2 id=\"1-加载脚本\"><a href=\"#1-加载脚本\" class=\"headerlink\" title=\"1. 加载脚本\"></a>1. 加载脚本</h2><p><code>?- [&#39;E:/SWI-Prolog/test/friend.pl&#39;].       %true</code></p>\n<h2 id=\"2-教程\"><a href=\"#2-教程\" class=\"headerlink\" title=\"2. 教程\"></a>2. 教程</h2><p><a href=\"https://riptutorial.com/zh-CN/prolog\">https://riptutorial.com/zh-CN/prolog</a></p>\n<h2 id=\"3-简单的计算求解：\"><a href=\"#3-简单的计算求解：\" class=\"headerlink\" title=\"3. 简单的计算求解：\"></a>3. 简单的计算求解：</h2><p><code>?- X is 3*7.       %X = 21</code></p>\n<h2 id=\"4-CLP（约束逻辑编程）库的使用\"><a href=\"#4-CLP（约束逻辑编程）库的使用\" class=\"headerlink\" title=\"4. CLP（约束逻辑编程）库的使用\"></a>4. CLP（约束逻辑编程）库的使用</h2><p>求解方程，CLP只能处理整数运算<br>    <figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">?-</span> use_module(library(clpfd)).</span><br><span class=\"line\"><span class=\"string\">?-</span> Y <span class=\"comment\">#= 3+4.                    %Y = 7.</span></span><br><span class=\"line\"><span class=\"string\">?-</span> <span class=\"number\">5</span> <span class=\"comment\">#= 4+W.                    %W = 1.</span></span><br></pre></td></tr></table></figure></p>\n<h2 id=\"5-单行注释\"><a href=\"#5-单行注释\" class=\"headerlink\" title=\"5. 单行注释\"></a>5. 单行注释</h2><p>使用”%”</p>\n<h2 id=\"6-知识库\"><a href=\"#6-知识库\" class=\"headerlink\" title=\"6. 知识库\"></a>6. 知识库</h2><p>事实 + 规则 = 知识库。<br>事实是我们对这个世界直接观察的结果。规则是关于现实世界的逻辑推论。</p>\n<h2 id=\"7-合一（unification）\"><a href=\"#7-合一（unification）\" class=\"headerlink\" title=\"7. 合一（unification）\"></a>7. 合一（unification）</h2><p>找出那些使规则匹配的值。<br>合一有时候不是唯一的，可以通过“;”来进行追问，有时候我们可能不满足于一个答案。</p>\n<h2 id=\"8-列表-元组\"><a href=\"#8-列表-元组\" class=\"headerlink\" title=\"8. 列表/元组\"></a>8. 列表/元组</h2><p>程序 = 算法 + 数据结构。      列表是变长的容器，元组是定长的容器。<br>    <figure class=\"highlight gcode\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">?- <span class=\"comment\">(1,2,3)</span> = <span class=\"comment\">(1,2,3)</span>.               <span class=\"meta\">%</span>元组</span><br><span class=\"line\">yes</span><br><span class=\"line\"></span><br><span class=\"line\">?- [A,B,C] = [A,B,C].               <span class=\"meta\">%</span>列表</span><br><span class=\"line\">yes</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"9-内置谓词\"><a href=\"#9-内置谓词\" class=\"headerlink\" title=\"9. 内置谓词\"></a>9. 内置谓词</h2><h3 id=\"length\"><a href=\"#length\" class=\"headerlink\" title=\"length\"></a>length</h3><p>获取列表的长度   <code>?- length([1,2,3],L).      %L = 3.</code></p>\n<h3 id=\"append\"><a href=\"#append\" class=\"headerlink\" title=\"append\"></a>append</h3><p>可以用来合并两个列表<br>    <figure class=\"highlight inform7\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">?- append(<span class=\"comment\">[1]</span>,<span class=\"comment\">[2]</span>,What).      %What = <span class=\"comment\">[1, 2]</span>.</span><br><span class=\"line\">?- append(<span class=\"comment\">[1]</span>,W,<span class=\"comment\">[1,2,3]</span>).      %W = <span class=\"comment\">[2, 3]</span>.</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"member\"><a href=\"#member\" class=\"headerlink\" title=\"member\"></a>member</h3><p>检查某一个值是否在一个列表内<br>    <figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">?-</span> member(<span class=\"number\">1</span>,[<span class=\"number\">1</span>,<span class=\"number\">2</span>]).      %<span class=\"literal\">true</span>.</span><br><span class=\"line\"><span class=\"string\">?-</span>  member(<span class=\"number\">3</span>,[<span class=\"number\">1</span>,<span class=\"number\">2</span>]).      %<span class=\"literal\">false</span>.</span><br></pre></td></tr></table></figure></p>\n"},{"title":"SEO——权重转移","abbrlink":"seo-weight-transfer","date":"2018-06-09T15:38:26.000Z","updated":"2018-06-09T15:38:32.000Z","_content":"** 产品列表存在多页，或者文章内容过多存在多页时，为了SEO考虑，避免权重流失，内容重复，可以通过下面的方法优化：**\n``` html\n<link rel=\"canonical\" href=\"主页url\"/>\n```\nGoogle 等搜索引擎最终都会只收录 canonical 标签指定的这个网址，搜索引擎会将其它页面作为重复内容，这些重复的内容不再参与页面的权重分配(如 Google 的 PR 值)。\n\n如：\nhttps://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=1\nhttps://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=2\nhttps://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=3\nhttps://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=4\n……\nhttps://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=45\n\n就可以在每个页面的head标签内添加代码：\n<link rel=\"canonical\" href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html\"/>\n\n","source":"_posts/SEO/SEO——权重转移.md","raw":"---\ntitle: SEO——权重转移\ntags: [SEO]\ncategories: [其他]\nabbrlink: 'seo-weight-transfer'\ndate: 2018-06-09 23:38:26\nupdated: 2018-06-09 23:38:32\n---\n** 产品列表存在多页，或者文章内容过多存在多页时，为了SEO考虑，避免权重流失，内容重复，可以通过下面的方法优化：**\n``` html\n<link rel=\"canonical\" href=\"主页url\"/>\n```\nGoogle 等搜索引擎最终都会只收录 canonical 标签指定的这个网址，搜索引擎会将其它页面作为重复内容，这些重复的内容不再参与页面的权重分配(如 Google 的 PR 值)。\n\n如：\nhttps://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=1\nhttps://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=2\nhttps://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=3\nhttps://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=4\n……\nhttps://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=45\n\n就可以在每个页面的head标签内添加代码：\n<link rel=\"canonical\" href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html\"/>\n\n","slug":"SEO/SEO——权重转移","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ts002voshgb321fwjb","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><strong> 产品列表存在多页，或者文章内容过多存在多页时，为了SEO考虑，避免权重流失，内容重复，可以通过下面的方法优化：</strong><br></p><figure class=\"highlight html\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"canonical\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"主页url\"</span>/&gt;</span></span><br></pre></td></tr></tbody></table></figure><br>Google 等搜索引擎最终都会只收录 canonical 标签指定的这个网址，搜索引擎会将其它页面作为重复内容，这些重复的内容不再参与页面的权重分配(如 Google 的 PR 值)。<p></p>\n<p>如：<br><a href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=1\">https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=1</a><br><a href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=2\">https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=2</a><br><a href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=3\">https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=3</a><br><a href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=4\">https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=4</a><br>……<br><a href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=45\">https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=45</a></p>\n<p>就可以在每个页面的head标签内添加代码：</p>\n<link rel=\"canonical\" href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html\">\n\n","excerpt":"","more":"<p><strong> 产品列表存在多页，或者文章内容过多存在多页时，为了SEO考虑，避免权重流失，内容重复，可以通过下面的方法优化：</strong><br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;canonical&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;主页url&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><br>Google 等搜索引擎最终都会只收录 canonical 标签指定的这个网址，搜索引擎会将其它页面作为重复内容，这些重复的内容不再参与页面的权重分配(如 Google 的 PR 值)。</p>\n<p>如：<br><a href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=1\">https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=1</a><br><a href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=2\">https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=2</a><br><a href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=3\">https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=3</a><br><a href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=4\">https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=4</a><br>……<br><a href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=45\">https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html?beginPage=45</a></p>\n<p>就可以在每个页面的head标签内添加代码：</p>\n<link rel=\"canonical\" href=\"https://s.1688.com/selloffer/-C6B7C5C6CDAFD0AC.html\">\n\n"},{"title":"Redis中set、setex、setnx的用法和区别","abbrlink":"redis-set-note","date":"2023-05-16T04:38:00.000Z","updated":"2023-05-16T04:38:00.000Z","_content":"\nRedis是一个高性能的键值对数据库，提供了多种设置键值的方法。其中，`set`、`setex` 和 `setnx` 是最常用的三个命令，它们在设置键值方面各有特点。\n\n### 1. set命令\n\n* **功能：** 将字符串值 value 关联到 key。\n* **语法：** `SET key value`\n* **特点：**\n    * **覆盖旧值：** 如果 key 已经存在，SET 命令会直接覆盖旧值。\n    * **无过期时间：** 设置的键值没有默认的过期时间，除非手动设置。\n\n### 2. setex命令\n\n* **功能：** setex(=SET EXpire)是将值 value 关联到 key，并设置 key 的生存时间。\n* **语法：** `SETEX key seconds value` ，该命令相当于将下面两行操作合并为一个原子操作\n```\n\tset key value\n\texpire key seconds\n```\n* **特点：**\n    * **设置过期时间：** seconds 参数指定了 key 的过期时间，单位为秒。\n    * **覆盖旧值：** 如果 key 已经存在，SETEX 命令会覆盖旧值。\n\n### 3. setnx命令\n\n* **功能：** setnx(=SET if Not eXists)是将值 value 关联到 key，但只有当 key 不存在时才设置。\n* **语法：** `SETNX key value`\n* **特点：**\n    * **原子性操作：** SETNX 是一个原子操作，如果 key 已经存在，则什么都不做。\n    * **返回结果：** 如果设置成功，返回 1；否则返回 0。\n\n### 三个命令的比较\n\n| 命令 | 功能 | 特点 |\n|---|---|---|\n| SET | 设置键值 | 覆盖旧值，无默认过期时间 |\n| SETEX | 设置键值并设置过期时间 | 覆盖旧值，设置过期时间 |\n| SETNX | 设置键值，仅当键不存在时 | 原子操作，返回设置结果 |\n\n### 使用场景\n\n* **set命令：** 适合设置不需要过期时间的键值，例如缓存一些静态数据。\n* **setex命令：** 适合设置有过期时间的键值，例如实现限时优惠、验证码等功能。\n* **setnx命令：** 适合实现分布式锁、唯一标识生成等需要原子性的操作。\n\n### 示例\n\n```\n# 设置一个键值对，没有过期时间\nSET name \"张三\"\n\n# 设置一个键值对，并设置过期时间为30秒\nSETEX token 30 \"123456\"\n\n# 只有在key不存在时才设置值\nSETNX lock 1\n```\n\n### 总结\n\n选择哪个命令取决于具体的业务场景。\n\n* 如果需要设置一个永久有效的键值，使用 SET。\n* 如果需要设置一个有过期时间的键值，使用 SETEX。\n* 如果需要实现一个原子性的设置操作，使用 SETNX。\n\n**注意：**\n\n* Redis 中的所有键都是字符串类型，即使存储的是数字或其他类型的数据，也会被转换为字符串。\n* 对于复杂的业务逻辑，可以结合 Redis 的其他数据结构和命令，例如哈希、列表、集合等，来实现更灵活的功能。","source":"_posts/Redis/Redis中set、setex、setnx的用法和区别.md","raw":"---\ntitle: Redis中set、setex、setnx的用法和区别\ntags: [Redis]\ncategories: [Redis]\nabbrlink: 'redis-set-note'\ndate: 2023-05-16 12:38:00\nupdated: 2023-05-16 12:38:00\n---\n\nRedis是一个高性能的键值对数据库，提供了多种设置键值的方法。其中，`set`、`setex` 和 `setnx` 是最常用的三个命令，它们在设置键值方面各有特点。\n\n### 1. set命令\n\n* **功能：** 将字符串值 value 关联到 key。\n* **语法：** `SET key value`\n* **特点：**\n    * **覆盖旧值：** 如果 key 已经存在，SET 命令会直接覆盖旧值。\n    * **无过期时间：** 设置的键值没有默认的过期时间，除非手动设置。\n\n### 2. setex命令\n\n* **功能：** setex(=SET EXpire)是将值 value 关联到 key，并设置 key 的生存时间。\n* **语法：** `SETEX key seconds value` ，该命令相当于将下面两行操作合并为一个原子操作\n```\n\tset key value\n\texpire key seconds\n```\n* **特点：**\n    * **设置过期时间：** seconds 参数指定了 key 的过期时间，单位为秒。\n    * **覆盖旧值：** 如果 key 已经存在，SETEX 命令会覆盖旧值。\n\n### 3. setnx命令\n\n* **功能：** setnx(=SET if Not eXists)是将值 value 关联到 key，但只有当 key 不存在时才设置。\n* **语法：** `SETNX key value`\n* **特点：**\n    * **原子性操作：** SETNX 是一个原子操作，如果 key 已经存在，则什么都不做。\n    * **返回结果：** 如果设置成功，返回 1；否则返回 0。\n\n### 三个命令的比较\n\n| 命令 | 功能 | 特点 |\n|---|---|---|\n| SET | 设置键值 | 覆盖旧值，无默认过期时间 |\n| SETEX | 设置键值并设置过期时间 | 覆盖旧值，设置过期时间 |\n| SETNX | 设置键值，仅当键不存在时 | 原子操作，返回设置结果 |\n\n### 使用场景\n\n* **set命令：** 适合设置不需要过期时间的键值，例如缓存一些静态数据。\n* **setex命令：** 适合设置有过期时间的键值，例如实现限时优惠、验证码等功能。\n* **setnx命令：** 适合实现分布式锁、唯一标识生成等需要原子性的操作。\n\n### 示例\n\n```\n# 设置一个键值对，没有过期时间\nSET name \"张三\"\n\n# 设置一个键值对，并设置过期时间为30秒\nSETEX token 30 \"123456\"\n\n# 只有在key不存在时才设置值\nSETNX lock 1\n```\n\n### 总结\n\n选择哪个命令取决于具体的业务场景。\n\n* 如果需要设置一个永久有效的键值，使用 SET。\n* 如果需要设置一个有过期时间的键值，使用 SETEX。\n* 如果需要实现一个原子性的设置操作，使用 SETNX。\n\n**注意：**\n\n* Redis 中的所有键都是字符串类型，即使存储的是数字或其他类型的数据，也会被转换为字符串。\n* 对于复杂的业务逻辑，可以结合 Redis 的其他数据结构和命令，例如哈希、列表、集合等，来实现更灵活的功能。","slug":"Redis/Redis中set、setex、setnx的用法和区别","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tt0030oshggbh586ec","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>Redis是一个高性能的键值对数据库，提供了多种设置键值的方法。其中，<code>set</code>、<code>setex</code> 和 <code>setnx</code> 是最常用的三个命令，它们在设置键值方面各有特点。</p>\n<h3 id=\"1-set命令\"><a href=\"#1-set命令\" class=\"headerlink\" title=\"1. set命令\"></a>1. set命令</h3><ul>\n<li><strong>功能：</strong> 将字符串值 value 关联到 key。</li>\n<li><strong>语法：</strong> <code>SET key value</code></li>\n<li><strong>特点：</strong><ul>\n<li><strong>覆盖旧值：</strong> 如果 key 已经存在，SET 命令会直接覆盖旧值。</li>\n<li><strong>无过期时间：</strong> 设置的键值没有默认的过期时间，除非手动设置。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-setex命令\"><a href=\"#2-setex命令\" class=\"headerlink\" title=\"2. setex命令\"></a>2. setex命令</h3><ul>\n<li><strong>功能：</strong> setex(=SET EXpire)是将值 value 关联到 key，并设置 key 的生存时间。</li>\n<li><strong>语法：</strong> <code>SETEX key seconds value</code> ，该命令相当于将下面两行操作合并为一个原子操作<figure class=\"highlight gams\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">set</span> key <span class=\"comment\">value</span></span><br><span class=\"line\">expire <span class=\"comment\">key seconds</span></span><br></pre></td></tr></tbody></table></figure></li>\n<li><strong>特点：</strong><ul>\n<li><strong>设置过期时间：</strong> seconds 参数指定了 key 的过期时间，单位为秒。</li>\n<li><strong>覆盖旧值：</strong> 如果 key 已经存在，SETEX 命令会覆盖旧值。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-setnx命令\"><a href=\"#3-setnx命令\" class=\"headerlink\" title=\"3. setnx命令\"></a>3. setnx命令</h3><ul>\n<li><strong>功能：</strong> setnx(=SET if Not eXists)是将值 value 关联到 key，但只有当 key 不存在时才设置。</li>\n<li><strong>语法：</strong> <code>SETNX key value</code></li>\n<li><strong>特点：</strong><ul>\n<li><strong>原子性操作：</strong> SETNX 是一个原子操作，如果 key 已经存在，则什么都不做。</li>\n<li><strong>返回结果：</strong> 如果设置成功，返回 1；否则返回 0。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"三个命令的比较\"><a href=\"#三个命令的比较\" class=\"headerlink\" title=\"三个命令的比较\"></a>三个命令的比较</h3><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>功能</th>\n<th>特点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>SET</td>\n<td>设置键值</td>\n<td>覆盖旧值，无默认过期时间</td>\n</tr>\n<tr>\n<td>SETEX</td>\n<td>设置键值并设置过期时间</td>\n<td>覆盖旧值，设置过期时间</td>\n</tr>\n<tr>\n<td>SETNX</td>\n<td>设置键值，仅当键不存在时</td>\n<td>原子操作，返回设置结果</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"使用场景\"><a href=\"#使用场景\" class=\"headerlink\" title=\"使用场景\"></a>使用场景</h3><ul>\n<li><strong>set命令：</strong> 适合设置不需要过期时间的键值，例如缓存一些静态数据。</li>\n<li><strong>setex命令：</strong> 适合设置有过期时间的键值，例如实现限时优惠、验证码等功能。</li>\n<li><strong>setnx命令：</strong> 适合实现分布式锁、唯一标识生成等需要原子性的操作。</li>\n</ul>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><figure class=\"highlight apache\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 设置一个键值对，没有过期时间</span></span><br><span class=\"line\"><span class=\"attribute\">SET</span> name <span class=\"string\">\"张三\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 设置一个键值对，并设置过期时间为30秒</span></span><br><span class=\"line\"><span class=\"attribute\">SETEX</span> token <span class=\"number\">30</span> <span class=\"string\">\"123456\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 只有在key不存在时才设置值</span></span><br><span class=\"line\"><span class=\"attribute\">SETNX</span> lock <span class=\"number\">1</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>选择哪个命令取决于具体的业务场景。</p>\n<ul>\n<li>如果需要设置一个永久有效的键值，使用 SET。</li>\n<li>如果需要设置一个有过期时间的键值，使用 SETEX。</li>\n<li>如果需要实现一个原子性的设置操作，使用 SETNX。</li>\n</ul>\n<p><strong>注意：</strong></p>\n<ul>\n<li>Redis 中的所有键都是字符串类型，即使存储的是数字或其他类型的数据，也会被转换为字符串。</li>\n<li>对于复杂的业务逻辑，可以结合 Redis 的其他数据结构和命令，例如哈希、列表、集合等，来实现更灵活的功能。</li>\n</ul>\n","excerpt":"","more":"<p>Redis是一个高性能的键值对数据库，提供了多种设置键值的方法。其中，<code>set</code>、<code>setex</code> 和 <code>setnx</code> 是最常用的三个命令，它们在设置键值方面各有特点。</p>\n<h3 id=\"1-set命令\"><a href=\"#1-set命令\" class=\"headerlink\" title=\"1. set命令\"></a>1. set命令</h3><ul>\n<li><strong>功能：</strong> 将字符串值 value 关联到 key。</li>\n<li><strong>语法：</strong> <code>SET key value</code></li>\n<li><strong>特点：</strong><ul>\n<li><strong>覆盖旧值：</strong> 如果 key 已经存在，SET 命令会直接覆盖旧值。</li>\n<li><strong>无过期时间：</strong> 设置的键值没有默认的过期时间，除非手动设置。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-setex命令\"><a href=\"#2-setex命令\" class=\"headerlink\" title=\"2. setex命令\"></a>2. setex命令</h3><ul>\n<li><strong>功能：</strong> setex(=SET EXpire)是将值 value 关联到 key，并设置 key 的生存时间。</li>\n<li><strong>语法：</strong> <code>SETEX key seconds value</code> ，该命令相当于将下面两行操作合并为一个原子操作<figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">set</span> key <span class=\"comment\">value</span></span><br><span class=\"line\">expire <span class=\"comment\">key seconds</span></span><br></pre></td></tr></table></figure></li>\n<li><strong>特点：</strong><ul>\n<li><strong>设置过期时间：</strong> seconds 参数指定了 key 的过期时间，单位为秒。</li>\n<li><strong>覆盖旧值：</strong> 如果 key 已经存在，SETEX 命令会覆盖旧值。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-setnx命令\"><a href=\"#3-setnx命令\" class=\"headerlink\" title=\"3. setnx命令\"></a>3. setnx命令</h3><ul>\n<li><strong>功能：</strong> setnx(=SET if Not eXists)是将值 value 关联到 key，但只有当 key 不存在时才设置。</li>\n<li><strong>语法：</strong> <code>SETNX key value</code></li>\n<li><strong>特点：</strong><ul>\n<li><strong>原子性操作：</strong> SETNX 是一个原子操作，如果 key 已经存在，则什么都不做。</li>\n<li><strong>返回结果：</strong> 如果设置成功，返回 1；否则返回 0。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"三个命令的比较\"><a href=\"#三个命令的比较\" class=\"headerlink\" title=\"三个命令的比较\"></a>三个命令的比较</h3><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>功能</th>\n<th>特点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>SET</td>\n<td>设置键值</td>\n<td>覆盖旧值，无默认过期时间</td>\n</tr>\n<tr>\n<td>SETEX</td>\n<td>设置键值并设置过期时间</td>\n<td>覆盖旧值，设置过期时间</td>\n</tr>\n<tr>\n<td>SETNX</td>\n<td>设置键值，仅当键不存在时</td>\n<td>原子操作，返回设置结果</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"使用场景\"><a href=\"#使用场景\" class=\"headerlink\" title=\"使用场景\"></a>使用场景</h3><ul>\n<li><strong>set命令：</strong> 适合设置不需要过期时间的键值，例如缓存一些静态数据。</li>\n<li><strong>setex命令：</strong> 适合设置有过期时间的键值，例如实现限时优惠、验证码等功能。</li>\n<li><strong>setnx命令：</strong> 适合实现分布式锁、唯一标识生成等需要原子性的操作。</li>\n</ul>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 设置一个键值对，没有过期时间</span></span><br><span class=\"line\"><span class=\"attribute\">SET</span> name <span class=\"string\">&quot;张三&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 设置一个键值对，并设置过期时间为30秒</span></span><br><span class=\"line\"><span class=\"attribute\">SETEX</span> token <span class=\"number\">30</span> <span class=\"string\">&quot;123456&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 只有在key不存在时才设置值</span></span><br><span class=\"line\"><span class=\"attribute\">SETNX</span> lock <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>选择哪个命令取决于具体的业务场景。</p>\n<ul>\n<li>如果需要设置一个永久有效的键值，使用 SET。</li>\n<li>如果需要设置一个有过期时间的键值，使用 SETEX。</li>\n<li>如果需要实现一个原子性的设置操作，使用 SETNX。</li>\n</ul>\n<p><strong>注意：</strong></p>\n<ul>\n<li>Redis 中的所有键都是字符串类型，即使存储的是数字或其他类型的数据，也会被转换为字符串。</li>\n<li>对于复杂的业务逻辑，可以结合 Redis 的其他数据结构和命令，例如哈希、列表、集合等，来实现更灵活的功能。</li>\n</ul>\n"},{"title":"Redis笔记","abbrlink":"redis-note","date":"2022-05-19T02:40:00.000Z","updated":"2022-05-19T02:40:00.000Z","_content":"\n### 安装redis客户端\n`yum install redis`\n\n### 查看版本号\n`info`\n![](/images/redis_note_1.png)\n\n### 通过命令行方式连接redis\n`redis-cli -h host -p port -a password`\nhost:远程redis服务器host\nport:远程redis服务端口\npassword:远程redis服务密码（无密码的的话就不需要-a参数了）\n![](/images/redis_note_2.png)\n\n### redis执行lua脚本\n![](/images/redis_note_3.png)\n![](/images/redis_note_4.png)\n\n### monitor监控\n在项目中有时候需要查看某个redis数据的情况，可以使用monitor来监控\n![](/images/redis_monitor_1.png)\n上述代码是在redis里监控key包含`pay_center_pay_methods`的信息，发现在db3里有被get一次。","source":"_posts/Redis/常用的Redis命令.md","raw":"---\ntitle: Redis笔记\ntags: [Redis]\ncategories: [Redis]\nabbrlink: 'redis-note'\ndate: 2022-05-19 10:40:00\nupdated: 2022-05-19 10:40:00\n---\n\n### 安装redis客户端\n`yum install redis`\n\n### 查看版本号\n`info`\n![](/images/redis_note_1.png)\n\n### 通过命令行方式连接redis\n`redis-cli -h host -p port -a password`\nhost:远程redis服务器host\nport:远程redis服务端口\npassword:远程redis服务密码（无密码的的话就不需要-a参数了）\n![](/images/redis_note_2.png)\n\n### redis执行lua脚本\n![](/images/redis_note_3.png)\n![](/images/redis_note_4.png)\n\n### monitor监控\n在项目中有时候需要查看某个redis数据的情况，可以使用monitor来监控\n![](/images/redis_monitor_1.png)\n上述代码是在redis里监控key包含`pay_center_pay_methods`的信息，发现在db3里有被get一次。","slug":"Redis/常用的Redis命令","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tu0032oshgf2vcez3u","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"安装redis客户端\"><a href=\"#安装redis客户端\" class=\"headerlink\" title=\"安装redis客户端\"></a>安装redis客户端</h3><p><code>yum install redis</code></p>\n<h3 id=\"查看版本号\"><a href=\"#查看版本号\" class=\"headerlink\" title=\"查看版本号\"></a>查看版本号</h3><p><code>info</code><br><img src=\"/images/redis_note_1.png\" alt=\"\"></p>\n<h3 id=\"通过命令行方式连接redis\"><a href=\"#通过命令行方式连接redis\" class=\"headerlink\" title=\"通过命令行方式连接redis\"></a>通过命令行方式连接redis</h3><p><code>redis-cli -h host -p port -a password</code><br>host:远程redis服务器host<br>port:远程redis服务端口<br>password:远程redis服务密码（无密码的的话就不需要-a参数了）<br><img src=\"/images/redis_note_2.png\" alt=\"\"></p>\n<h3 id=\"redis执行lua脚本\"><a href=\"#redis执行lua脚本\" class=\"headerlink\" title=\"redis执行lua脚本\"></a>redis执行lua脚本</h3><p><img src=\"/images/redis_note_3.png\" alt=\"\"><br><img src=\"/images/redis_note_4.png\" alt=\"\"></p>\n<h3 id=\"monitor监控\"><a href=\"#monitor监控\" class=\"headerlink\" title=\"monitor监控\"></a>monitor监控</h3><p>在项目中有时候需要查看某个redis数据的情况，可以使用monitor来监控<br><img src=\"/images/redis_monitor_1.png\" alt=\"\"><br>上述代码是在redis里监控key包含<code>pay_center_pay_methods</code>的信息，发现在db3里有被get一次。</p>\n","excerpt":"","more":"<h3 id=\"安装redis客户端\"><a href=\"#安装redis客户端\" class=\"headerlink\" title=\"安装redis客户端\"></a>安装redis客户端</h3><p><code>yum install redis</code></p>\n<h3 id=\"查看版本号\"><a href=\"#查看版本号\" class=\"headerlink\" title=\"查看版本号\"></a>查看版本号</h3><p><code>info</code><br><img src=\"/images/redis_note_1.png\" alt></p>\n<h3 id=\"通过命令行方式连接redis\"><a href=\"#通过命令行方式连接redis\" class=\"headerlink\" title=\"通过命令行方式连接redis\"></a>通过命令行方式连接redis</h3><p><code>redis-cli -h host -p port -a password</code><br>host:远程redis服务器host<br>port:远程redis服务端口<br>password:远程redis服务密码（无密码的的话就不需要-a参数了）<br><img src=\"/images/redis_note_2.png\" alt></p>\n<h3 id=\"redis执行lua脚本\"><a href=\"#redis执行lua脚本\" class=\"headerlink\" title=\"redis执行lua脚本\"></a>redis执行lua脚本</h3><p><img src=\"/images/redis_note_3.png\" alt><br><img src=\"/images/redis_note_4.png\" alt></p>\n<h3 id=\"monitor监控\"><a href=\"#monitor监控\" class=\"headerlink\" title=\"monitor监控\"></a>monitor监控</h3><p>在项目中有时候需要查看某个redis数据的情况，可以使用monitor来监控<br><img src=\"/images/redis_monitor_1.png\" alt><br>上述代码是在redis里监控key包含<code>pay_center_pay_methods</code>的信息，发现在db3里有被get一次。</p>\n"},{"title":"产品设计","abbrlink":"product-design","date":"2021-12-30T22:25:58.000Z","updated":"2021-12-30T22:25:58.000Z","_content":"\n1、我们的手机上都装了很多APP，而现在的APP基本上都需要账号登录。那么问题来了，如果手机丢了，你最关心的是什么呢，是这些APP的账号信息泄露被不法份子使用，还是这个应用里的个人隐私数据泄露呢？个人感觉可以从以下几个方面提高产品的安全性：\n\n  A、APP内部涉及到交易功能需校验交易密码；\n\n  B、在进入指定页面的时候，添加面容ID/手势解锁，如启动时、进入个人中心时等；\n\n  C、APP内可进行设备管理，APP内可查看设备的最近登录信息，并解绑当前设备外的指定设备(或删除指定设备数据)；\n\n  D、对于不合常规的系列行为进行限制，如：修改登录密码后立即注销账号。","source":"_posts/产品/产品设计.md","raw":"---\ntitle: 产品设计\ntags: [产品设计]\ncategories: [产品]\nabbrlink: 'product-design'\ndate: 2021-12-31 06:25:58\nupdated: 2021-12-31 06:25:58\n---\n\n1、我们的手机上都装了很多APP，而现在的APP基本上都需要账号登录。那么问题来了，如果手机丢了，你最关心的是什么呢，是这些APP的账号信息泄露被不法份子使用，还是这个应用里的个人隐私数据泄露呢？个人感觉可以从以下几个方面提高产品的安全性：\n\n  A、APP内部涉及到交易功能需校验交易密码；\n\n  B、在进入指定页面的时候，添加面容ID/手势解锁，如启动时、进入个人中心时等；\n\n  C、APP内可进行设备管理，APP内可查看设备的最近登录信息，并解绑当前设备外的指定设备(或删除指定设备数据)；\n\n  D、对于不合常规的系列行为进行限制，如：修改登录密码后立即注销账号。","slug":"产品/产品设计","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tw0037oshgciqc0tj0","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>1、我们的手机上都装了很多APP，而现在的APP基本上都需要账号登录。那么问题来了，如果手机丢了，你最关心的是什么呢，是这些APP的账号信息泄露被不法份子使用，还是这个应用里的个人隐私数据泄露呢？个人感觉可以从以下几个方面提高产品的安全性：</p>\n<p>  A、APP内部涉及到交易功能需校验交易密码；</p>\n<p>  B、在进入指定页面的时候，添加面容ID/手势解锁，如启动时、进入个人中心时等；</p>\n<p>  C、APP内可进行设备管理，APP内可查看设备的最近登录信息，并解绑当前设备外的指定设备(或删除指定设备数据)；</p>\n<p>  D、对于不合常规的系列行为进行限制，如：修改登录密码后立即注销账号。</p>\n","excerpt":"","more":"<p>1、我们的手机上都装了很多APP，而现在的APP基本上都需要账号登录。那么问题来了，如果手机丢了，你最关心的是什么呢，是这些APP的账号信息泄露被不法份子使用，还是这个应用里的个人隐私数据泄露呢？个人感觉可以从以下几个方面提高产品的安全性：</p>\n<p>  A、APP内部涉及到交易功能需校验交易密码；</p>\n<p>  B、在进入指定页面的时候，添加面容ID/手势解锁，如启动时、进入个人中心时等；</p>\n<p>  C、APP内可进行设备管理，APP内可查看设备的最近登录信息，并解绑当前设备外的指定设备(或删除指定设备数据)；</p>\n<p>  D、对于不合常规的系列行为进行限制，如：修改登录密码后立即注销账号。</p>\n"},{"title":"云闪付的商业模式","abbrlink":"business-model-of-union-pay","date":"2020-10-21T09:02:10.000Z","_content":"\n<div class=\"ipage\">\n\t<div class=\"ititle\">云闪付的商业模式</div>\n  <div class=\"izhengwen\">\n  <p>2018年，由银联主导的一个APP——云闪付上线，之后以新用户前20笔消费可享优惠的方式吸引了一大批羊毛党，近一两年在各大地铁站、公交站等出现了云闪付的广告。个人及周边的朋友也有使用过，但都是从开始的频繁使用，到现在的基本不使用。</p>\n\n  <p>云闪付的目的是打破支付宝、财付通的垄断，挤入移动支付的阵营，而且统一银行APP，聚合网上商城、移动支付、交通扫码等，立足二线以下城市。</p>\n  \n  <p>就公交地铁扫码支付这一业务，不及天府通。天府通可以根据本地的定价策略进行优惠折扣，而云闪付无法一一对接个性化本地定价策略。故用户粘性不高。</p>\n\n  </div>\n</div>","source":"_posts/产品/云闪付的商业模式.md","raw":"---\ntitle: 云闪付的商业模式\nabbrlink: 'business-model-of-union-pay'\ntags:  [云闪付]\ncategories:  [产品]\ndate: 2020-10-21 17:02:10\n---\n\n<div class=\"ipage\">\n\t<div class=\"ititle\">云闪付的商业模式</div>\n  <div class=\"izhengwen\">\n  <p>2018年，由银联主导的一个APP——云闪付上线，之后以新用户前20笔消费可享优惠的方式吸引了一大批羊毛党，近一两年在各大地铁站、公交站等出现了云闪付的广告。个人及周边的朋友也有使用过，但都是从开始的频繁使用，到现在的基本不使用。</p>\n\n  <p>云闪付的目的是打破支付宝、财付通的垄断，挤入移动支付的阵营，而且统一银行APP，聚合网上商城、移动支付、交通扫码等，立足二线以下城市。</p>\n  \n  <p>就公交地铁扫码支付这一业务，不及天府通。天府通可以根据本地的定价策略进行优惠折扣，而云闪付无法一一对接个性化本地定价策略。故用户粘性不高。</p>\n\n  </div>\n</div>","slug":"产品/云闪付的商业模式","published":1,"updated":"2024-10-18T01:54:30.911Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2tw0039oshg9e86dvc7","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"ipage\">\n    <div class=\"ititle\">云闪付的商业模式</div>\n  <div class=\"izhengwen\">\n  <p>2018年，由银联主导的一个APP——云闪付上线，之后以新用户前20笔消费可享优惠的方式吸引了一大批羊毛党，近一两年在各大地铁站、公交站等出现了云闪付的广告。个人及周边的朋友也有使用过，但都是从开始的频繁使用，到现在的基本不使用。</p>\n\n  <p>云闪付的目的是打破支付宝、财付通的垄断，挤入移动支付的阵营，而且统一银行APP，聚合网上商城、移动支付、交通扫码等，立足二线以下城市。</p>\n\n  <p>就公交地铁扫码支付这一业务，不及天府通。天府通可以根据本地的定价策略进行优惠折扣，而云闪付无法一一对接个性化本地定价策略。故用户粘性不高。</p>\n\n  </div>\n</div>","excerpt":"","more":"<div class=\"ipage\">\n    <div class=\"ititle\">云闪付的商业模式</div>\n  <div class=\"izhengwen\">\n  <p>2018年，由银联主导的一个APP——云闪付上线，之后以新用户前20笔消费可享优惠的方式吸引了一大批羊毛党，近一两年在各大地铁站、公交站等出现了云闪付的广告。个人及周边的朋友也有使用过，但都是从开始的频繁使用，到现在的基本不使用。</p>\n\n  <p>云闪付的目的是打破支付宝、财付通的垄断，挤入移动支付的阵营，而且统一银行APP，聚合网上商城、移动支付、交通扫码等，立足二线以下城市。</p>\n\n  <p>就公交地铁扫码支付这一业务，不及天府通。天府通可以根据本地的定价策略进行优惠折扣，而云闪付无法一一对接个性化本地定价策略。故用户粘性不高。</p>\n\n  </div>\n</div>"},{"title":"锚定效应","abbrlink":"anchoring-effect","date":"2022-02-22T07:23:47.000Z","updated":"2022-02-22T07:23:47.000Z","_content":"\n沉锚效应，心理学名词，指的是人们在对某人某事做出判断时，易受第一印象或第一信息支配，就像沉入海底的锚一样把人们的思想固定在某处。","source":"_posts/产品/锚定效应.md","raw":"---\ntitle: 锚定效应\ntags: [锚定效应]\ncategories: [产品]\nabbrlink: 'anchoring-effect'\ndate: 2022-02-22 15:23:47\nupdated: 2022-02-22 15:23:47\n---\n\n沉锚效应，心理学名词，指的是人们在对某人某事做出判断时，易受第一印象或第一信息支配，就像沉入海底的锚一样把人们的思想固定在某处。","slug":"产品/锚定效应","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tx003doshgag5r9y0z","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>沉锚效应，心理学名词，指的是人们在对某人某事做出判断时，易受第一印象或第一信息支配，就像沉入海底的锚一样把人们的思想固定在某处。</p>\n","excerpt":"","more":"<p>沉锚效应，心理学名词，指的是人们在对某人某事做出判断时，易受第一印象或第一信息支配，就像沉入海底的锚一样把人们的思想固定在某处。</p>\n"},{"title":"心跳包机制","abbrlink":"heartbeat","date":"2018-06-19T14:39:00.000Z","updated":"2018-06-19T14:45:00.000Z","_content":"\n1. 心跳包机制：主要也就是用于长连接的保活和断线处理。","source":"_posts/其他/心跳包机制.md","raw":"---\ntitle: 心跳包机制\ntags: [心跳包]\ncategories: [其他]\nabbrlink: 'heartbeat'\ndate: 2018-06-19 22:39:00\nupdated: 2018-06-19 22:45:00\n---\n\n1. 心跳包机制：主要也就是用于长连接的保活和断线处理。","slug":"其他/心跳包机制","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ty003goshg53r2enss","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li>心跳包机制：主要也就是用于长连接的保活和断线处理。</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li>心跳包机制：主要也就是用于长连接的保活和断线处理。</li>\n</ol>\n"},{"title":"常用工具推荐","abbrlink":"normal-tools","date":"2018-03-28T08:00:00.000Z","updated":"2018-06-04T03:19:00.000Z","_content":"### 1、windows文件搜索工具\n给大家推荐一款windows下的文件搜索工具——Everything，下载地址：http://www.voidtools.com/\n\n### 2、文档搜索工具\n安利一个文档搜索工具——鸠摩搜索，各种格式的电子书、文档都可以下载，比如PDF、TXT、MOBI、DOC等，地址：[鸠摩搜索](https://www.jiumodiary.com/)\n\n### 3、API接口文档管理工具——[小幺鸡](http://www.xiaoyaoji.cn)\n\n### 4、Git项目搜索工具——BitHubLab\n[BitHubLab](https://bithublab.org/)，可以搜索所有Git平台上的公开项目，包括GitHub、GitLab和BitBucket等的项目。","source":"_posts/其他/常用工具推荐.md","raw":"---\ntitle: 常用工具推荐\ntags: [工具]\ncategories: [其他]\nabbrlink: 'normal-tools'\ndate: 2018-03-28 16:00:00\nupdated: 2018-06-04 11:19:00\n---\n### 1、windows文件搜索工具\n给大家推荐一款windows下的文件搜索工具——Everything，下载地址：http://www.voidtools.com/\n\n### 2、文档搜索工具\n安利一个文档搜索工具——鸠摩搜索，各种格式的电子书、文档都可以下载，比如PDF、TXT、MOBI、DOC等，地址：[鸠摩搜索](https://www.jiumodiary.com/)\n\n### 3、API接口文档管理工具——[小幺鸡](http://www.xiaoyaoji.cn)\n\n### 4、Git项目搜索工具——BitHubLab\n[BitHubLab](https://bithublab.org/)，可以搜索所有Git平台上的公开项目，包括GitHub、GitLab和BitBucket等的项目。","slug":"其他/常用工具推荐","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2tz003koshgh4tl6c60","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1、windows文件搜索工具\"><a href=\"#1、windows文件搜索工具\" class=\"headerlink\" title=\"1、windows文件搜索工具\"></a>1、windows文件搜索工具</h3><p>给大家推荐一款windows下的文件搜索工具——Everything，下载地址：<a href=\"http://www.voidtools.com/\">http://www.voidtools.com/</a></p>\n<h3 id=\"2、文档搜索工具\"><a href=\"#2、文档搜索工具\" class=\"headerlink\" title=\"2、文档搜索工具\"></a>2、文档搜索工具</h3><p>安利一个文档搜索工具——鸠摩搜索，各种格式的电子书、文档都可以下载，比如PDF、TXT、MOBI、DOC等，地址：<a href=\"https://www.jiumodiary.com/\">鸠摩搜索</a></p>\n<h3 id=\"3、API接口文档管理工具——小幺鸡\"><a href=\"#3、API接口文档管理工具——小幺鸡\" class=\"headerlink\" title=\"3、API接口文档管理工具——小幺鸡\"></a>3、API接口文档管理工具——<a href=\"http://www.xiaoyaoji.cn\">小幺鸡</a></h3><h3 id=\"4、Git项目搜索工具——BitHubLab\"><a href=\"#4、Git项目搜索工具——BitHubLab\" class=\"headerlink\" title=\"4、Git项目搜索工具——BitHubLab\"></a>4、Git项目搜索工具——BitHubLab</h3><p><a href=\"https://bithublab.org/\">BitHubLab</a>，可以搜索所有Git平台上的公开项目，包括GitHub、GitLab和BitBucket等的项目。</p>\n","excerpt":"","more":"<h3 id=\"1、windows文件搜索工具\"><a href=\"#1、windows文件搜索工具\" class=\"headerlink\" title=\"1、windows文件搜索工具\"></a>1、windows文件搜索工具</h3><p>给大家推荐一款windows下的文件搜索工具——Everything，下载地址：<a href=\"http://www.voidtools.com/\">http://www.voidtools.com/</a></p>\n<h3 id=\"2、文档搜索工具\"><a href=\"#2、文档搜索工具\" class=\"headerlink\" title=\"2、文档搜索工具\"></a>2、文档搜索工具</h3><p>安利一个文档搜索工具——鸠摩搜索，各种格式的电子书、文档都可以下载，比如PDF、TXT、MOBI、DOC等，地址：<a href=\"https://www.jiumodiary.com/\">鸠摩搜索</a></p>\n<h3 id=\"3、API接口文档管理工具——小幺鸡\"><a href=\"#3、API接口文档管理工具——小幺鸡\" class=\"headerlink\" title=\"3、API接口文档管理工具——小幺鸡\"></a>3、API接口文档管理工具——<a href=\"http://www.xiaoyaoji.cn\">小幺鸡</a></h3><h3 id=\"4、Git项目搜索工具——BitHubLab\"><a href=\"#4、Git项目搜索工具——BitHubLab\" class=\"headerlink\" title=\"4、Git项目搜索工具——BitHubLab\"></a>4、Git项目搜索工具——BitHubLab</h3><p><a href=\"https://bithublab.org/\">BitHubLab</a>，可以搜索所有Git平台上的公开项目，包括GitHub、GitLab和BitBucket等的项目。</p>\n"},{"title":"个人收集的一些公用数据","abbrlink":"personnel-public-data","date":"2020-02-15T17:44:36.000Z","_content":"\n<div class=\"note info\">这是个人采集的一些公用数据，大家可根据需要自取，不谢！</div>\n\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/地名词库.txt\" target=\"_blank\">地名词库</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/歇后语.txt\" target=\"_blank\">歇后语</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/成语.txt\" target=\"_blank\">成语</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/品牌名(英文).txt\" target=\"_blank\">2015年搜集的一些英文版品牌名</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/常见的用户名.txt\" target=\"_blank\">常见的用户名</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/常见的弱密码.txt\" target=\"_blank\">常见的弱密码</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/姓氏(中文).txt\" target=\"_blank\">姓氏(中文)</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/姓氏(日文).txt\" target=\"_blank\">姓氏(日文)</a>","source":"_posts/数据/个人收集的一些公用数据.md","raw":"---\ntitle: 个人收集的一些公用数据\nabbrlink: 'personnel-public-data'\ntags: [数据]\ncategories:  [其他]\ndate: 2020-02-16 01:44:36\n---\n\n<div class=\"note info\">这是个人采集的一些公用数据，大家可根据需要自取，不谢！</div>\n\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/地名词库.txt\" target=\"_blank\">地名词库</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/歇后语.txt\" target=\"_blank\">歇后语</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/成语.txt\" target=\"_blank\">成语</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/品牌名(英文).txt\" target=\"_blank\">2015年搜集的一些英文版品牌名</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/常见的用户名.txt\" target=\"_blank\">常见的用户名</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/常见的弱密码.txt\" target=\"_blank\">常见的弱密码</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/姓氏(中文).txt\" target=\"_blank\">姓氏(中文)</a>\n- <a href=\"https://github.com/crazy-boy/public-data/blob/main/姓氏(日文).txt\" target=\"_blank\">姓氏(日文)</a>","slug":"数据/个人收集的一些公用数据","published":1,"updated":"2024-10-18T01:57:25.689Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2tz003moshg0ikndvsw","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">这是个人采集的一些公用数据，大家可根据需要自取，不谢！</div>\n\n<ul>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/地名词库.txt\" target=\"_blank\">地名词库</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/歇后语.txt\" target=\"_blank\">歇后语</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/成语.txt\" target=\"_blank\">成语</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/品牌名(英文).txt\" target=\"_blank\">2015年搜集的一些英文版品牌名</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/常见的用户名.txt\" target=\"_blank\">常见的用户名</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/常见的弱密码.txt\" target=\"_blank\">常见的弱密码</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/姓氏(中文).txt\" target=\"_blank\">姓氏(中文)</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/姓氏(日文).txt\" target=\"_blank\">姓氏(日文)</a></li>\n</ul>\n","excerpt":"","more":"<div class=\"note info\">这是个人采集的一些公用数据，大家可根据需要自取，不谢！</div>\n\n<ul>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/地名词库.txt\" target=\"_blank\">地名词库</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/歇后语.txt\" target=\"_blank\">歇后语</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/成语.txt\" target=\"_blank\">成语</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/品牌名(英文).txt\" target=\"_blank\">2015年搜集的一些英文版品牌名</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/常见的用户名.txt\" target=\"_blank\">常见的用户名</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/常见的弱密码.txt\" target=\"_blank\">常见的弱密码</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/姓氏(中文).txt\" target=\"_blank\">姓氏(中文)</a></li>\n<li><a href=\"https://github.com/crazy-boy/public-data/blob/main/姓氏(日文).txt\" target=\"_blank\">姓氏(日文)</a></li>\n</ul>\n"},{"title":"死锁","abbrlink":"dead-lock","date":"2022-08-02T08:21:54.000Z","_content":"\n### 概念\n死锁（Dead Lock）指的是两个或两个以上的运算单元（进程、线程或协程），都在等待对方释放资源，但没有一方提起释放资源，从而造成了一种阻塞的现象就称为死锁。\n\n### 产生原因\n死锁的产生需要满足以下 4 个条件：\n1. 互斥条件：指运算单元（进程、线程或协程）对所分配到的资源具有排它性，也就是说在一段时间内某个锁资源只能被一个运算单元所占用。\n2. 请求和保持条件：指运算单元已经保持至少一个资源，但又提出了新的资源请求，而该资源已被其它运算单元占有，此时请求运算单元阻塞，但又对自己已获得的其它资源保持不放。\n3. 不可剥夺条件：指运算单元已获得的资源，在未使用完之前，不能被剥夺。\n4. 环路等待条件：指在发生死锁时，必然存在运算单元和资源的环形链，即运算单元正在等待另一个运算单元占用的资源，而对方又在等待自己占用的资源，从而造成环路等待的情况。\n只有以上 4 个条件同时满足，才会造成死锁。\n\n### 解决方法\n死锁产生要满足以上 4 个必要条件，那么我们只需要改变其中的 1 个或多个条件就可以解决死锁的问题了。\n\n### 参考文档\nhttps://mp.weixin.qq.com/s/gq7w-V493OsRpezAZXzXog","source":"_posts/其他/死锁.md","raw":"---\ntitle: 死锁\nabbrlink: 'dead-lock'\ntags: [死锁]\ncategories:  [其他]\ndate: 2022-08-02 16:21:54\n---\n\n### 概念\n死锁（Dead Lock）指的是两个或两个以上的运算单元（进程、线程或协程），都在等待对方释放资源，但没有一方提起释放资源，从而造成了一种阻塞的现象就称为死锁。\n\n### 产生原因\n死锁的产生需要满足以下 4 个条件：\n1. 互斥条件：指运算单元（进程、线程或协程）对所分配到的资源具有排它性，也就是说在一段时间内某个锁资源只能被一个运算单元所占用。\n2. 请求和保持条件：指运算单元已经保持至少一个资源，但又提出了新的资源请求，而该资源已被其它运算单元占有，此时请求运算单元阻塞，但又对自己已获得的其它资源保持不放。\n3. 不可剥夺条件：指运算单元已获得的资源，在未使用完之前，不能被剥夺。\n4. 环路等待条件：指在发生死锁时，必然存在运算单元和资源的环形链，即运算单元正在等待另一个运算单元占用的资源，而对方又在等待自己占用的资源，从而造成环路等待的情况。\n只有以上 4 个条件同时满足，才会造成死锁。\n\n### 解决方法\n死锁产生要满足以上 4 个必要条件，那么我们只需要改变其中的 1 个或多个条件就可以解决死锁的问题了。\n\n### 参考文档\nhttps://mp.weixin.qq.com/s/gq7w-V493OsRpezAZXzXog","slug":"其他/死锁","published":1,"updated":"2024-10-18T01:55:59.907Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2u0003qoshgg0kdgg1i","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>死锁（Dead Lock）指的是两个或两个以上的运算单元（进程、线程或协程），都在等待对方释放资源，但没有一方提起释放资源，从而造成了一种阻塞的现象就称为死锁。</p>\n<h3 id=\"产生原因\"><a href=\"#产生原因\" class=\"headerlink\" title=\"产生原因\"></a>产生原因</h3><p>死锁的产生需要满足以下 4 个条件：</p>\n<ol>\n<li>互斥条件：指运算单元（进程、线程或协程）对所分配到的资源具有排它性，也就是说在一段时间内某个锁资源只能被一个运算单元所占用。</li>\n<li>请求和保持条件：指运算单元已经保持至少一个资源，但又提出了新的资源请求，而该资源已被其它运算单元占有，此时请求运算单元阻塞，但又对自己已获得的其它资源保持不放。</li>\n<li>不可剥夺条件：指运算单元已获得的资源，在未使用完之前，不能被剥夺。</li>\n<li>环路等待条件：指在发生死锁时，必然存在运算单元和资源的环形链，即运算单元正在等待另一个运算单元占用的资源，而对方又在等待自己占用的资源，从而造成环路等待的情况。<br>只有以上 4 个条件同时满足，才会造成死锁。</li>\n</ol>\n<h3 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h3><p>死锁产生要满足以上 4 个必要条件，那么我们只需要改变其中的 1 个或多个条件就可以解决死锁的问题了。</p>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p><a href=\"https://mp.weixin.qq.com/s/gq7w-V493OsRpezAZXzXog\">https://mp.weixin.qq.com/s/gq7w-V493OsRpezAZXzXog</a></p>\n","excerpt":"","more":"<h3 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>死锁（Dead Lock）指的是两个或两个以上的运算单元（进程、线程或协程），都在等待对方释放资源，但没有一方提起释放资源，从而造成了一种阻塞的现象就称为死锁。</p>\n<h3 id=\"产生原因\"><a href=\"#产生原因\" class=\"headerlink\" title=\"产生原因\"></a>产生原因</h3><p>死锁的产生需要满足以下 4 个条件：</p>\n<ol>\n<li>互斥条件：指运算单元（进程、线程或协程）对所分配到的资源具有排它性，也就是说在一段时间内某个锁资源只能被一个运算单元所占用。</li>\n<li>请求和保持条件：指运算单元已经保持至少一个资源，但又提出了新的资源请求，而该资源已被其它运算单元占有，此时请求运算单元阻塞，但又对自己已获得的其它资源保持不放。</li>\n<li>不可剥夺条件：指运算单元已获得的资源，在未使用完之前，不能被剥夺。</li>\n<li>环路等待条件：指在发生死锁时，必然存在运算单元和资源的环形链，即运算单元正在等待另一个运算单元占用的资源，而对方又在等待自己占用的资源，从而造成环路等待的情况。<br>只有以上 4 个条件同时满足，才会造成死锁。</li>\n</ol>\n<h3 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h3><p>死锁产生要满足以上 4 个必要条件，那么我们只需要改变其中的 1 个或多个条件就可以解决死锁的问题了。</p>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p><a href=\"https://mp.weixin.qq.com/s/gq7w-V493OsRpezAZXzXog\">https://mp.weixin.qq.com/s/gq7w-V493OsRpezAZXzXog</a></p>\n"},{"title":"池化技术","abbrlink":"pooling-technology","date":"2022-08-02T02:30:20.000Z","_content":"\n### 概念\n池化技术指的是提前准备一些资源，在需要时可以重复使用这些预先准备的资源。池化技术的优点主要有两个：提前准备和重复利用。\n常见的池化技术的应用有：线程池、内存池、数据库连接池、HttpClient 连接池等。\n","source":"_posts/其他/池化技术.md","raw":"---\ntitle: 池化技术\nabbrlink: 'pooling-technology'\ntags: [池化技术]\ncategories:  [其他]\ndate: 2022-08-02 10:30:20\n---\n\n### 概念\n池化技术指的是提前准备一些资源，在需要时可以重复使用这些预先准备的资源。池化技术的优点主要有两个：提前准备和重复利用。\n常见的池化技术的应用有：线程池、内存池、数据库连接池、HttpClient 连接池等。\n","slug":"其他/池化技术","published":1,"updated":"2024-10-18T01:55:59.898Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2u1003toshgcmp524gb","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>池化技术指的是提前准备一些资源，在需要时可以重复使用这些预先准备的资源。池化技术的优点主要有两个：提前准备和重复利用。<br>常见的池化技术的应用有：线程池、内存池、数据库连接池、HttpClient 连接池等。</p>\n","excerpt":"","more":"<h3 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>池化技术指的是提前准备一些资源，在需要时可以重复使用这些预先准备的资源。池化技术的优点主要有两个：提前准备和重复利用。<br>常见的池化技术的应用有：线程池、内存池、数据库连接池、HttpClient 连接池等。</p>\n"},{"title":"线程安全","abbrlink":"thread-safe","date":"2022-08-01T04:31:24.000Z","_content":"\n### 概念\n线程安全是指某个方法或某段代码，在多线程中能够正确的执行，不会出现数据不一致或数据污染的情况，我们把这样的程序称之为线程安全的，反之则为非线程安全的。\n\n### 产生原因\n导致线程安全问题的因素有以下 5 个：\n- 多线程抢占式执行\n导致线程安全问题的第一大因素就是多线程抢占式执行，想象一下，如果是单线程执行，或者是多线程有序执行，那就不会出现混乱的情况了，不出现混乱的情况，自然就不会出现非线程安全的问题了。\n- 多线程同时修改同一个变量\n多线程只要不是同时修改同一个变量，也不会出现线程安全问题。\n- 非原子性操作\n原子性操作是指操作不能再被分隔就叫原子性操作。非原子性操作有很多不确定性，而这些不确定性就会造成线程安全问题问题。像 i++ 和 i-- 这种操作就是非原子的，它在 +1 或 -1 之前，先要查询原变量的值，并不是一次性完成的，所以就会导致线程安全问题。\n- 内存可见性\n在 Java 编程中内存分为两种类型：工作内存和主内存，而工作内存使用的是 CPU 寄存器实现的，而主内存是指电脑中的内存，我们知道 CPU 寄存器的操作速度是远大于内存的操作速度的。\n那这和线程安全有什么关系呢？这是因为在 Java 语言中，为了提高程序的执行速度，所以在操作变量时，会将变量从主内存中复制一份到工作内存，而主内存是所有线程共用的，工作内存是每个线程私有的，这就会导致一个线程已经把主内存中的公共变量修改了，而另一个线程不知道，依旧使用自己工作内存中的变量，这样就导致了问题的产生，也就导致了线程安全问题。\n- 指令重排序\n指令重排序是指 Java 程序为了提高程序的执行速度，所以会对一下操作进行合并和优化的操作。比如说，张三要去图书馆还书，舍友又让张三帮忙借书，那么程序的执行思维是，张三先去图书馆把自己的书还了，再去一趟图书馆帮舍友把书借回来。而指令重排序之后，把两次执行合并了，张三带着自己的书去图书馆把书先还了，再帮舍友把书借出来，整个流程就执行完了，这是正常情况下的指令重排序的好处。但是指令重排序也有“副作用”，而“副作用”是发生在多线程执行中的，还是以张三借书和帮舍友还书为例，如果张三是一件事做完再做另一件事是没有问题的（也就是单线程执行是没有问题的），但如果是多线程执行，就是两件事由多个人混合着做，比如张三在图书馆遇到了自己的多个同学，于是就把任务分派给多个人一起执行，有人借了几本书、有人借了还了几本书、有人再借了几本书、有人再借了还了几本书，执行的很混乱没有明确的目标，到最后悲剧就发生了，这就是在指令重排序带来的线程安全问题。\n\n### 解决方法\n解决线程安全问题有以下 3 种手段：\n1. 使用线程安全类，比如 AtomicInteger。\n2. 加锁排队执行\n    `使用 synchronized 加锁。`\n    `使用 ReentrantLock 加锁。`\n3. 使用线程本地变量 ThreadLocal。\n\n### 参考文档\nhttps://mp.weixin.qq.com/s/BKp1c1gMsXWSNy3-8-FH0Q","source":"_posts/其他/线程安全.md","raw":"---\ntitle: 线程安全\nabbrlink: 'thread-safe'\ntags: [线程安全]\ncategories:  [其他]\ndate: 2022-08-01 12:31:24\n---\n\n### 概念\n线程安全是指某个方法或某段代码，在多线程中能够正确的执行，不会出现数据不一致或数据污染的情况，我们把这样的程序称之为线程安全的，反之则为非线程安全的。\n\n### 产生原因\n导致线程安全问题的因素有以下 5 个：\n- 多线程抢占式执行\n导致线程安全问题的第一大因素就是多线程抢占式执行，想象一下，如果是单线程执行，或者是多线程有序执行，那就不会出现混乱的情况了，不出现混乱的情况，自然就不会出现非线程安全的问题了。\n- 多线程同时修改同一个变量\n多线程只要不是同时修改同一个变量，也不会出现线程安全问题。\n- 非原子性操作\n原子性操作是指操作不能再被分隔就叫原子性操作。非原子性操作有很多不确定性，而这些不确定性就会造成线程安全问题问题。像 i++ 和 i-- 这种操作就是非原子的，它在 +1 或 -1 之前，先要查询原变量的值，并不是一次性完成的，所以就会导致线程安全问题。\n- 内存可见性\n在 Java 编程中内存分为两种类型：工作内存和主内存，而工作内存使用的是 CPU 寄存器实现的，而主内存是指电脑中的内存，我们知道 CPU 寄存器的操作速度是远大于内存的操作速度的。\n那这和线程安全有什么关系呢？这是因为在 Java 语言中，为了提高程序的执行速度，所以在操作变量时，会将变量从主内存中复制一份到工作内存，而主内存是所有线程共用的，工作内存是每个线程私有的，这就会导致一个线程已经把主内存中的公共变量修改了，而另一个线程不知道，依旧使用自己工作内存中的变量，这样就导致了问题的产生，也就导致了线程安全问题。\n- 指令重排序\n指令重排序是指 Java 程序为了提高程序的执行速度，所以会对一下操作进行合并和优化的操作。比如说，张三要去图书馆还书，舍友又让张三帮忙借书，那么程序的执行思维是，张三先去图书馆把自己的书还了，再去一趟图书馆帮舍友把书借回来。而指令重排序之后，把两次执行合并了，张三带着自己的书去图书馆把书先还了，再帮舍友把书借出来，整个流程就执行完了，这是正常情况下的指令重排序的好处。但是指令重排序也有“副作用”，而“副作用”是发生在多线程执行中的，还是以张三借书和帮舍友还书为例，如果张三是一件事做完再做另一件事是没有问题的（也就是单线程执行是没有问题的），但如果是多线程执行，就是两件事由多个人混合着做，比如张三在图书馆遇到了自己的多个同学，于是就把任务分派给多个人一起执行，有人借了几本书、有人借了还了几本书、有人再借了几本书、有人再借了还了几本书，执行的很混乱没有明确的目标，到最后悲剧就发生了，这就是在指令重排序带来的线程安全问题。\n\n### 解决方法\n解决线程安全问题有以下 3 种手段：\n1. 使用线程安全类，比如 AtomicInteger。\n2. 加锁排队执行\n    `使用 synchronized 加锁。`\n    `使用 ReentrantLock 加锁。`\n3. 使用线程本地变量 ThreadLocal。\n\n### 参考文档\nhttps://mp.weixin.qq.com/s/BKp1c1gMsXWSNy3-8-FH0Q","slug":"其他/线程安全","published":1,"updated":"2024-10-18T01:55:59.852Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2u2003xoshg6qmlf2bq","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>线程安全是指某个方法或某段代码，在多线程中能够正确的执行，不会出现数据不一致或数据污染的情况，我们把这样的程序称之为线程安全的，反之则为非线程安全的。</p>\n<h3 id=\"产生原因\"><a href=\"#产生原因\" class=\"headerlink\" title=\"产生原因\"></a>产生原因</h3><p>导致线程安全问题的因素有以下 5 个：</p>\n<ul>\n<li>多线程抢占式执行<br>导致线程安全问题的第一大因素就是多线程抢占式执行，想象一下，如果是单线程执行，或者是多线程有序执行，那就不会出现混乱的情况了，不出现混乱的情况，自然就不会出现非线程安全的问题了。</li>\n<li>多线程同时修改同一个变量<br>多线程只要不是同时修改同一个变量，也不会出现线程安全问题。</li>\n<li>非原子性操作<br>原子性操作是指操作不能再被分隔就叫原子性操作。非原子性操作有很多不确定性，而这些不确定性就会造成线程安全问题问题。像 i++ 和 i— 这种操作就是非原子的，它在 +1 或 -1 之前，先要查询原变量的值，并不是一次性完成的，所以就会导致线程安全问题。</li>\n<li>内存可见性<br>在 Java 编程中内存分为两种类型：工作内存和主内存，而工作内存使用的是 CPU 寄存器实现的，而主内存是指电脑中的内存，我们知道 CPU 寄存器的操作速度是远大于内存的操作速度的。<br>那这和线程安全有什么关系呢？这是因为在 Java 语言中，为了提高程序的执行速度，所以在操作变量时，会将变量从主内存中复制一份到工作内存，而主内存是所有线程共用的，工作内存是每个线程私有的，这就会导致一个线程已经把主内存中的公共变量修改了，而另一个线程不知道，依旧使用自己工作内存中的变量，这样就导致了问题的产生，也就导致了线程安全问题。</li>\n<li>指令重排序<br>指令重排序是指 Java 程序为了提高程序的执行速度，所以会对一下操作进行合并和优化的操作。比如说，张三要去图书馆还书，舍友又让张三帮忙借书，那么程序的执行思维是，张三先去图书馆把自己的书还了，再去一趟图书馆帮舍友把书借回来。而指令重排序之后，把两次执行合并了，张三带着自己的书去图书馆把书先还了，再帮舍友把书借出来，整个流程就执行完了，这是正常情况下的指令重排序的好处。但是指令重排序也有“副作用”，而“副作用”是发生在多线程执行中的，还是以张三借书和帮舍友还书为例，如果张三是一件事做完再做另一件事是没有问题的（也就是单线程执行是没有问题的），但如果是多线程执行，就是两件事由多个人混合着做，比如张三在图书馆遇到了自己的多个同学，于是就把任务分派给多个人一起执行，有人借了几本书、有人借了还了几本书、有人再借了几本书、有人再借了还了几本书，执行的很混乱没有明确的目标，到最后悲剧就发生了，这就是在指令重排序带来的线程安全问题。</li>\n</ul>\n<h3 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h3><p>解决线程安全问题有以下 3 种手段：</p>\n<ol>\n<li>使用线程安全类，比如 AtomicInteger。</li>\n<li>加锁排队执行<br> <code>使用 synchronized 加锁。</code><br> <code>使用 ReentrantLock 加锁。</code></li>\n<li>使用线程本地变量 ThreadLocal。</li>\n</ol>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p><a href=\"https://mp.weixin.qq.com/s/BKp1c1gMsXWSNy3-8-FH0Q\">https://mp.weixin.qq.com/s/BKp1c1gMsXWSNy3-8-FH0Q</a></p>\n","excerpt":"","more":"<h3 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>线程安全是指某个方法或某段代码，在多线程中能够正确的执行，不会出现数据不一致或数据污染的情况，我们把这样的程序称之为线程安全的，反之则为非线程安全的。</p>\n<h3 id=\"产生原因\"><a href=\"#产生原因\" class=\"headerlink\" title=\"产生原因\"></a>产生原因</h3><p>导致线程安全问题的因素有以下 5 个：</p>\n<ul>\n<li>多线程抢占式执行<br>导致线程安全问题的第一大因素就是多线程抢占式执行，想象一下，如果是单线程执行，或者是多线程有序执行，那就不会出现混乱的情况了，不出现混乱的情况，自然就不会出现非线程安全的问题了。</li>\n<li>多线程同时修改同一个变量<br>多线程只要不是同时修改同一个变量，也不会出现线程安全问题。</li>\n<li>非原子性操作<br>原子性操作是指操作不能再被分隔就叫原子性操作。非原子性操作有很多不确定性，而这些不确定性就会造成线程安全问题问题。像 i++ 和 i— 这种操作就是非原子的，它在 +1 或 -1 之前，先要查询原变量的值，并不是一次性完成的，所以就会导致线程安全问题。</li>\n<li>内存可见性<br>在 Java 编程中内存分为两种类型：工作内存和主内存，而工作内存使用的是 CPU 寄存器实现的，而主内存是指电脑中的内存，我们知道 CPU 寄存器的操作速度是远大于内存的操作速度的。<br>那这和线程安全有什么关系呢？这是因为在 Java 语言中，为了提高程序的执行速度，所以在操作变量时，会将变量从主内存中复制一份到工作内存，而主内存是所有线程共用的，工作内存是每个线程私有的，这就会导致一个线程已经把主内存中的公共变量修改了，而另一个线程不知道，依旧使用自己工作内存中的变量，这样就导致了问题的产生，也就导致了线程安全问题。</li>\n<li>指令重排序<br>指令重排序是指 Java 程序为了提高程序的执行速度，所以会对一下操作进行合并和优化的操作。比如说，张三要去图书馆还书，舍友又让张三帮忙借书，那么程序的执行思维是，张三先去图书馆把自己的书还了，再去一趟图书馆帮舍友把书借回来。而指令重排序之后，把两次执行合并了，张三带着自己的书去图书馆把书先还了，再帮舍友把书借出来，整个流程就执行完了，这是正常情况下的指令重排序的好处。但是指令重排序也有“副作用”，而“副作用”是发生在多线程执行中的，还是以张三借书和帮舍友还书为例，如果张三是一件事做完再做另一件事是没有问题的（也就是单线程执行是没有问题的），但如果是多线程执行，就是两件事由多个人混合着做，比如张三在图书馆遇到了自己的多个同学，于是就把任务分派给多个人一起执行，有人借了几本书、有人借了还了几本书、有人再借了几本书、有人再借了还了几本书，执行的很混乱没有明确的目标，到最后悲剧就发生了，这就是在指令重排序带来的线程安全问题。</li>\n</ul>\n<h3 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h3><p>解决线程安全问题有以下 3 种手段：</p>\n<ol>\n<li>使用线程安全类，比如 AtomicInteger。</li>\n<li>加锁排队执行<br> <code>使用 synchronized 加锁。</code><br> <code>使用 ReentrantLock 加锁。</code></li>\n<li>使用线程本地变量 ThreadLocal。</li>\n</ol>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p><a href=\"https://mp.weixin.qq.com/s/BKp1c1gMsXWSNy3-8-FH0Q\">https://mp.weixin.qq.com/s/BKp1c1gMsXWSNy3-8-FH0Q</a></p>\n"},{"title":"2018-03-29杂谈","abbrlink":"some-others","date":"2018-03-29T06:00:00.000Z","updated":"2018-03-29T08:00:00.000Z","_content":"哈哈，科目一96！\n\n![I'm very happy.](/images/happy.jpg)\n ","source":"_posts/杂谈/2018-03-29杂谈.md","raw":"---\ntitle: 2018-03-29杂谈\ntags: [杂谈]\ncategories: [随笔]\nabbrlink: 'some-others'\ndate: 2018-03-29 14:00:00\nupdated: 2018-03-29 16:00:00\n---\n哈哈，科目一96！\n\n![I'm very happy.](/images/happy.jpg)\n ","slug":"杂谈/2018-03-29杂谈","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2u20040oshg56we0qcy","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>哈哈，科目一96！</p>\n<p><img src=\"/images/happy.jpg\" alt=\"I'm very happy.\"></p>\n","excerpt":"","more":"<p>哈哈，科目一96！</p>\n<p><img src=\"/images/happy.jpg\" alt=\"I&#39;m very happy.\"></p>\n"},{"title":"2022-08-24杂谈","abbrlink":"20220824-happy","date":"2022-08-23T23:54:29.000Z","updated":"2022-08-23T23:54:29.000Z","_content":"\n一大早被雨声惊醒了，哈哈，现在只能用汪洙的《四喜》来形容此刻的心情了——真是久旱逢甘霖呀！只是，这一场雨来得有点晚。。\n\n![](/images/20220824-rain.jpg)\n ","source":"_posts/杂谈/2022-08-24杂谈.md","raw":"---\ntitle: 2022-08-24杂谈\ntags: [杂谈]\ncategories: [随笔]\nabbrlink: '20220824-happy'\ndate: 2022-08-24 07:54:29\nupdated: 2022-08-24 07:54:29\n---\n\n一大早被雨声惊醒了，哈哈，现在只能用汪洙的《四喜》来形容此刻的心情了——真是久旱逢甘霖呀！只是，这一场雨来得有点晚。。\n\n![](/images/20220824-rain.jpg)\n ","slug":"杂谈/2022-08-24杂谈","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2u30044oshg3b14ehd1","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>一大早被雨声惊醒了，哈哈，现在只能用汪洙的《四喜》来形容此刻的心情了——真是久旱逢甘霖呀！只是，这一场雨来得有点晚。。</p>\n<p><img src=\"/images/20220824-rain.jpg\" alt=\"\"></p>\n","excerpt":"","more":"<p>一大早被雨声惊醒了，哈哈，现在只能用汪洙的《四喜》来形容此刻的心情了——真是久旱逢甘霖呀！只是，这一场雨来得有点晚。。</p>\n<p><img src=\"/images/20220824-rain.jpg\" alt></p>\n"},{"title":"书单心愿墙","abbrlink":"wished-book-list","date":"2018-06-01T01:42:00.000Z","updated":"2018-11-07T04:49:00.000Z","_content":"###  罗列一些自己后续要读的书籍或者文章：\n\n* 《黑客与画家》\n* 《UNIX编程艺术》\n* 《异类》\n* 《羊皮卷》——《选择的力量》\n* 《优秀到不能被忽视》\n* 《无言的宇宙》\n* 《数学女孩》","source":"_posts/杂谈/书单心愿墙.md","raw":"---\ntitle: 书单心愿墙\ntags: [书籍]\ncategories: [随笔]\nabbrlink: 'wished-book-list'\ndate: 2018-06-01 09:42:00\nupdated: 2018-11-07 12:49:00\n---\n###  罗列一些自己后续要读的书籍或者文章：\n\n* 《黑客与画家》\n* 《UNIX编程艺术》\n* 《异类》\n* 《羊皮卷》——《选择的力量》\n* 《优秀到不能被忽视》\n* 《无言的宇宙》\n* 《数学女孩》","slug":"杂谈/书单心愿墙","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2u40047oshgf1mx9w28","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"罗列一些自己后续要读的书籍或者文章：\"><a href=\"#罗列一些自己后续要读的书籍或者文章：\" class=\"headerlink\" title=\"罗列一些自己后续要读的书籍或者文章：\"></a>罗列一些自己后续要读的书籍或者文章：</h3><ul>\n<li>《黑客与画家》</li>\n<li>《UNIX编程艺术》</li>\n<li>《异类》</li>\n<li>《羊皮卷》——《选择的力量》</li>\n<li>《优秀到不能被忽视》</li>\n<li>《无言的宇宙》</li>\n<li>《数学女孩》</li>\n</ul>\n","excerpt":"","more":"<h3 id=\"罗列一些自己后续要读的书籍或者文章：\"><a href=\"#罗列一些自己后续要读的书籍或者文章：\" class=\"headerlink\" title=\"罗列一些自己后续要读的书籍或者文章：\"></a>罗列一些自己后续要读的书籍或者文章：</h3><ul>\n<li>《黑客与画家》</li>\n<li>《UNIX编程艺术》</li>\n<li>《异类》</li>\n<li>《羊皮卷》——《选择的力量》</li>\n<li>《优秀到不能被忽视》</li>\n<li>《无言的宇宙》</li>\n<li>《数学女孩》</li>\n</ul>\n"},{"title":"性能测试——ab.exe","abbrlink":"performance-test","date":"2022-05-06T09:28:37.000Z","updated":"2022-05-06T09:28:37.000Z","_content":"ab.exe是apache server下的一个性能检测小组件，使用方便简单。\n使用方法：\n### 1. 找到ab.exe的位置\n在电脑中找到ab.exe的位置，一般在Apache文件下的bin目录中，我这里的目录路径为：D:\\software\\phpstudy_pro\\Extensions\\Apache2.4.39\\bin\n![](/images/test_ab_1.png)\n### 2. 打开cmd\n### 3. 进入ab.exe所在目录\n![](/images/test_ab_2.png)\n### 4. 开始压测\n![](/images/test_ab_3.png)\n\n常用参数说明：\n-n：请求个数，默认一次一个\n-c：并发数\n-t：超时限制(秒)，默认不限制\n\n结果分析：\n```shell\nD:\\software\\phpstudy_pro\\Extensions\\Apache2.4.39\\bin>ab -n 10 -c 10 http://www.baidu.com/\nThis is ApacheBench, Version 2.3 <$Revision: 1843412 $>\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/\n\nBenchmarking www.baidu.com (be patient).....done\n\n\nServer Software:        BWS/1.1\nServer Hostname:        www.baidu.com\nServer Port:            80    #端口\n\nDocument Path:          /\nDocument Length:        353122 bytes    #请求文件大小\n\nConcurrency Level:      10           #并发数\nTime taken for tests:   0.535 seconds    #整个测试所用的时间\nComplete requests:      10               #完成的请求数量\nFailed requests:        9                #失败的请求数量\n   (Connect: 0, Receive: 0, Length: 9, Exceptions: 0)\nTotal transferred:      3548070 bytes    #整个场景的网络传输量\nHTML transferred:       3536205 bytes    #整个场景的HTML传输量\nRequests per second:    18.71 [#/sec] (mean)    #平均每秒请求数\nTime per request:       534.535 [ms] (mean)     #平均每个请求的响应时间\nTime per request:       53.453 [ms] (mean, across all concurrent requests)\nTransfer rate:          6482.11 [Kbytes/sec] received    #平均每秒网络上的流量\n\n # 网络上消耗时间分解\nConnection Times (ms)\n              min  mean[+/-sd] median   max\nConnect:       30   34   3.3     34      39\nProcessing:   151  225  78.4    220     378\nWaiting:       35  139  92.2    151     281\nTotal:        186  260  75.8    254     410\n\n# 下面为整个场景所有请求的响应情况，50%的响应时间小于254毫秒，66%的响应时间小于281毫秒……最长响应时间 410毫秒\nPercentage of the requests served within a certain time (ms)\n  50%    254\n  66%    281\n  75%    314\n  80%    342\n  90%    410\n  95%    410\n  98%    410\n  99%    410\n 100%    410 (longest request)\n\n```","source":"_posts/测试/性能测试——ab.exe.md","raw":"---\ntitle: 性能测试——ab.exe\ntags: [ab.exe]\ncategories: [测试]\nabbrlink: 'performance-test'\ndate: 2022-05-06 17:28:37\nupdated: 2022-05-06 17:28:37\n---\nab.exe是apache server下的一个性能检测小组件，使用方便简单。\n使用方法：\n### 1. 找到ab.exe的位置\n在电脑中找到ab.exe的位置，一般在Apache文件下的bin目录中，我这里的目录路径为：D:\\software\\phpstudy_pro\\Extensions\\Apache2.4.39\\bin\n![](/images/test_ab_1.png)\n### 2. 打开cmd\n### 3. 进入ab.exe所在目录\n![](/images/test_ab_2.png)\n### 4. 开始压测\n![](/images/test_ab_3.png)\n\n常用参数说明：\n-n：请求个数，默认一次一个\n-c：并发数\n-t：超时限制(秒)，默认不限制\n\n结果分析：\n```shell\nD:\\software\\phpstudy_pro\\Extensions\\Apache2.4.39\\bin>ab -n 10 -c 10 http://www.baidu.com/\nThis is ApacheBench, Version 2.3 <$Revision: 1843412 $>\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/\n\nBenchmarking www.baidu.com (be patient).....done\n\n\nServer Software:        BWS/1.1\nServer Hostname:        www.baidu.com\nServer Port:            80    #端口\n\nDocument Path:          /\nDocument Length:        353122 bytes    #请求文件大小\n\nConcurrency Level:      10           #并发数\nTime taken for tests:   0.535 seconds    #整个测试所用的时间\nComplete requests:      10               #完成的请求数量\nFailed requests:        9                #失败的请求数量\n   (Connect: 0, Receive: 0, Length: 9, Exceptions: 0)\nTotal transferred:      3548070 bytes    #整个场景的网络传输量\nHTML transferred:       3536205 bytes    #整个场景的HTML传输量\nRequests per second:    18.71 [#/sec] (mean)    #平均每秒请求数\nTime per request:       534.535 [ms] (mean)     #平均每个请求的响应时间\nTime per request:       53.453 [ms] (mean, across all concurrent requests)\nTransfer rate:          6482.11 [Kbytes/sec] received    #平均每秒网络上的流量\n\n # 网络上消耗时间分解\nConnection Times (ms)\n              min  mean[+/-sd] median   max\nConnect:       30   34   3.3     34      39\nProcessing:   151  225  78.4    220     378\nWaiting:       35  139  92.2    151     281\nTotal:        186  260  75.8    254     410\n\n# 下面为整个场景所有请求的响应情况，50%的响应时间小于254毫秒，66%的响应时间小于281毫秒……最长响应时间 410毫秒\nPercentage of the requests served within a certain time (ms)\n  50%    254\n  66%    281\n  75%    314\n  80%    342\n  90%    410\n  95%    410\n  98%    410\n  99%    410\n 100%    410 (longest request)\n\n```","slug":"测试/性能测试——ab.exe","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2u5004boshg411x5sxs","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>ab.exe是apache server下的一个性能检测小组件，使用方便简单。<br>使用方法：</p>\n<h3 id=\"1-找到ab-exe的位置\"><a href=\"#1-找到ab-exe的位置\" class=\"headerlink\" title=\"1. 找到ab.exe的位置\"></a>1. 找到ab.exe的位置</h3><p>在电脑中找到ab.exe的位置，一般在Apache文件下的bin目录中，我这里的目录路径为：D:\\software\\phpstudy_pro\\Extensions\\Apache2.4.39\\bin<br><img src=\"/images/test_ab_1.png\" alt=\"\"></p>\n<h3 id=\"2-打开cmd\"><a href=\"#2-打开cmd\" class=\"headerlink\" title=\"2. 打开cmd\"></a>2. 打开cmd</h3><h3 id=\"3-进入ab-exe所在目录\"><a href=\"#3-进入ab-exe所在目录\" class=\"headerlink\" title=\"3. 进入ab.exe所在目录\"></a>3. 进入ab.exe所在目录</h3><p><img src=\"/images/test_ab_2.png\" alt=\"\"></p>\n<h3 id=\"4-开始压测\"><a href=\"#4-开始压测\" class=\"headerlink\" title=\"4. 开始压测\"></a>4. 开始压测</h3><p><img src=\"/images/test_ab_3.png\" alt=\"\"></p>\n<p>常用参数说明：<br>-n：请求个数，默认一次一个<br>-c：并发数<br>-t：超时限制(秒)，默认不限制</p>\n<p>结果分析：<br></p><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">D:\\software\\phpstudy_pro\\Extensions\\Apache2.4.39\\bin&gt;ab -n 10 -c 10 http://www.baidu.com/</span><br><span class=\"line\">This is ApacheBench, Version 2.3 &lt;$Revision: 1843412 $&gt;</span><br><span class=\"line\">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</span><br><span class=\"line\">Licensed to The Apache Software Foundation, http://www.apache.org/</span><br><span class=\"line\"></span><br><span class=\"line\">Benchmarking www.baidu.com (be patient).....done</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Server Software:        BWS/1.1</span><br><span class=\"line\">Server Hostname:        www.baidu.com</span><br><span class=\"line\">Server Port:            80    #端口</span><br><span class=\"line\"></span><br><span class=\"line\">Document Path:          /</span><br><span class=\"line\">Document Length:        353122 bytes    #请求文件大小</span><br><span class=\"line\"></span><br><span class=\"line\">Concurrency Level:      10           #并发数</span><br><span class=\"line\">Time taken for tests:   0.535 seconds    #整个测试所用的时间</span><br><span class=\"line\">Complete requests:      10               #完成的请求数量</span><br><span class=\"line\">Failed requests:        9                #失败的请求数量</span><br><span class=\"line\">   (Connect: 0, Receive: 0, Length: 9, Exceptions: 0)</span><br><span class=\"line\">Total transferred:      3548070 bytes    #整个场景的网络传输量</span><br><span class=\"line\">HTML transferred:       3536205 bytes    #整个场景的HTML传输量</span><br><span class=\"line\">Requests per second:    18.71 [#/sec] (mean)    #平均每秒请求数</span><br><span class=\"line\">Time per request:       534.535 [ms] (mean)     #平均每个请求的响应时间</span><br><span class=\"line\">Time per request:       53.453 [ms] (mean, across all concurrent requests)</span><br><span class=\"line\">Transfer rate:          6482.11 [Kbytes/sec] received    #平均每秒网络上的流量</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"> # </span><span class=\"language-bash\">网络上消耗时间分解</span></span><br><span class=\"line\">Connection Times (ms)</span><br><span class=\"line\">              min  mean[+/-sd] median   max</span><br><span class=\"line\">Connect:       30   34   3.3     34      39</span><br><span class=\"line\">Processing:   151  225  78.4    220     378</span><br><span class=\"line\">Waiting:       35  139  92.2    151     281</span><br><span class=\"line\">Total:        186  260  75.8    254     410</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下面为整个场景所有请求的响应情况，50%的响应时间小于254毫秒，66%的响应时间小于281毫秒……最长响应时间 410毫秒</span></span><br><span class=\"line\">Percentage of the requests served within a certain time (ms)</span><br><span class=\"line\"><span class=\"meta prompt_\">  50% </span><span class=\"language-bash\">   254</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  66% </span><span class=\"language-bash\">   281</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  75% </span><span class=\"language-bash\">   314</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  80% </span><span class=\"language-bash\">   342</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  90% </span><span class=\"language-bash\">   410</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  95% </span><span class=\"language-bash\">   410</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  98% </span><span class=\"language-bash\">   410</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  99% </span><span class=\"language-bash\">   410</span></span><br><span class=\"line\"><span class=\"meta prompt_\"> 100% </span><span class=\"language-bash\">   410 (longest request)</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure><p></p>\n","excerpt":"","more":"<p>ab.exe是apache server下的一个性能检测小组件，使用方便简单。<br>使用方法：</p>\n<h3 id=\"1-找到ab-exe的位置\"><a href=\"#1-找到ab-exe的位置\" class=\"headerlink\" title=\"1. 找到ab.exe的位置\"></a>1. 找到ab.exe的位置</h3><p>在电脑中找到ab.exe的位置，一般在Apache文件下的bin目录中，我这里的目录路径为：D:\\software\\phpstudy_pro\\Extensions\\Apache2.4.39\\bin<br><img src=\"/images/test_ab_1.png\" alt></p>\n<h3 id=\"2-打开cmd\"><a href=\"#2-打开cmd\" class=\"headerlink\" title=\"2. 打开cmd\"></a>2. 打开cmd</h3><h3 id=\"3-进入ab-exe所在目录\"><a href=\"#3-进入ab-exe所在目录\" class=\"headerlink\" title=\"3. 进入ab.exe所在目录\"></a>3. 进入ab.exe所在目录</h3><p><img src=\"/images/test_ab_2.png\" alt></p>\n<h3 id=\"4-开始压测\"><a href=\"#4-开始压测\" class=\"headerlink\" title=\"4. 开始压测\"></a>4. 开始压测</h3><p><img src=\"/images/test_ab_3.png\" alt></p>\n<p>常用参数说明：<br>-n：请求个数，默认一次一个<br>-c：并发数<br>-t：超时限制(秒)，默认不限制</p>\n<p>结果分析：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">D:\\software\\phpstudy_pro\\Extensions\\Apache2.4.39\\bin&gt;ab -n 10 -c 10 http://www.baidu.com/</span><br><span class=\"line\">This is ApacheBench, Version 2.3 &lt;$Revision: 1843412 $&gt;</span><br><span class=\"line\">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</span><br><span class=\"line\">Licensed to The Apache Software Foundation, http://www.apache.org/</span><br><span class=\"line\"></span><br><span class=\"line\">Benchmarking www.baidu.com (be patient).....done</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Server Software:        BWS/1.1</span><br><span class=\"line\">Server Hostname:        www.baidu.com</span><br><span class=\"line\">Server Port:            80    #端口</span><br><span class=\"line\"></span><br><span class=\"line\">Document Path:          /</span><br><span class=\"line\">Document Length:        353122 bytes    #请求文件大小</span><br><span class=\"line\"></span><br><span class=\"line\">Concurrency Level:      10           #并发数</span><br><span class=\"line\">Time taken for tests:   0.535 seconds    #整个测试所用的时间</span><br><span class=\"line\">Complete requests:      10               #完成的请求数量</span><br><span class=\"line\">Failed requests:        9                #失败的请求数量</span><br><span class=\"line\">   (Connect: 0, Receive: 0, Length: 9, Exceptions: 0)</span><br><span class=\"line\">Total transferred:      3548070 bytes    #整个场景的网络传输量</span><br><span class=\"line\">HTML transferred:       3536205 bytes    #整个场景的HTML传输量</span><br><span class=\"line\">Requests per second:    18.71 [#/sec] (mean)    #平均每秒请求数</span><br><span class=\"line\">Time per request:       534.535 [ms] (mean)     #平均每个请求的响应时间</span><br><span class=\"line\">Time per request:       53.453 [ms] (mean, across all concurrent requests)</span><br><span class=\"line\">Transfer rate:          6482.11 [Kbytes/sec] received    #平均每秒网络上的流量</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"> # </span><span class=\"language-bash\">网络上消耗时间分解</span></span><br><span class=\"line\">Connection Times (ms)</span><br><span class=\"line\">              min  mean[+/-sd] median   max</span><br><span class=\"line\">Connect:       30   34   3.3     34      39</span><br><span class=\"line\">Processing:   151  225  78.4    220     378</span><br><span class=\"line\">Waiting:       35  139  92.2    151     281</span><br><span class=\"line\">Total:        186  260  75.8    254     410</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">下面为整个场景所有请求的响应情况，50%的响应时间小于254毫秒，66%的响应时间小于281毫秒……最长响应时间 410毫秒</span></span><br><span class=\"line\">Percentage of the requests served within a certain time (ms)</span><br><span class=\"line\"><span class=\"meta prompt_\">  50% </span><span class=\"language-bash\">   254</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  66% </span><span class=\"language-bash\">   281</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  75% </span><span class=\"language-bash\">   314</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  80% </span><span class=\"language-bash\">   342</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  90% </span><span class=\"language-bash\">   410</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  95% </span><span class=\"language-bash\">   410</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  98% </span><span class=\"language-bash\">   410</span></span><br><span class=\"line\"><span class=\"meta prompt_\">  99% </span><span class=\"language-bash\">   410</span></span><br><span class=\"line\"><span class=\"meta prompt_\"> 100% </span><span class=\"language-bash\">   410 (longest request)</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n"},{"title":"七牛云图片","abbrlink":"qiniu-storage","date":"2019-12-04T01:28:56.000Z","updated":"2019-12-04T01:28:56.000Z","_content":"\n### 1、七牛云图片地址：  \n`域名/hash值`\n如：https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4\n\n### 2、按指定尺寸显示图片：\n`域名/hash值?imageMogr2/auto-orient/thumbnail/!宽x高r/gravity/Center/crop/宽x高/interlace/1/blur/1x0/quality/80|imageslim`\n如：https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4?imageMogr2/auto-orient/thumbnail/!100x200r/gravity/Center/crop/100x200/interlace/1/blur/1x0/quality/80|imageslim\n\n### 3、资源下载：\n`域名/hash值?attname=文件名.扩展名`\n如：https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?attname=a.jpg\n\n### 4、图片等比例缩放：\n`域名/hash值?imageView2/<mode>/w/<Width>/h/<Height>`\n如：https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?imageView2/2/w/450/h/450\n\n### 参考文档：\nhttps://developer.qiniu.com/dora/api/1279/basic-processing-images-imageview2","source":"_posts/第三方/七牛云图片.md","raw":"---\ntitle: 七牛云图片\ntags: [七牛云]\ncategories: [第三方]\nabbrlink: 'qiniu-storage'\ndate: 2019-12-04 09:28:56\nupdated: 2019-12-04 09:28:56\n---\n\n### 1、七牛云图片地址：  \n`域名/hash值`\n如：https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4\n\n### 2、按指定尺寸显示图片：\n`域名/hash值?imageMogr2/auto-orient/thumbnail/!宽x高r/gravity/Center/crop/宽x高/interlace/1/blur/1x0/quality/80|imageslim`\n如：https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4?imageMogr2/auto-orient/thumbnail/!100x200r/gravity/Center/crop/100x200/interlace/1/blur/1x0/quality/80|imageslim\n\n### 3、资源下载：\n`域名/hash值?attname=文件名.扩展名`\n如：https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?attname=a.jpg\n\n### 4、图片等比例缩放：\n`域名/hash值?imageView2/<mode>/w/<Width>/h/<Height>`\n如：https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?imageView2/2/w/450/h/450\n\n### 参考文档：\nhttps://developer.qiniu.com/dora/api/1279/basic-processing-images-imageview2","slug":"第三方/七牛云图片","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2u6004eoshg4dbb3xuh","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1、七牛云图片地址：\"><a href=\"#1、七牛云图片地址：\" class=\"headerlink\" title=\"1、七牛云图片地址：\"></a>1、七牛云图片地址：</h3><p><code>域名/hash值</code><br>如：<a href=\"https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4\">https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4</a></p>\n<h3 id=\"2、按指定尺寸显示图片：\"><a href=\"#2、按指定尺寸显示图片：\" class=\"headerlink\" title=\"2、按指定尺寸显示图片：\"></a>2、按指定尺寸显示图片：</h3><p><code>域名/hash值?imageMogr2/auto-orient/thumbnail/!宽x高r/gravity/Center/crop/宽x高/interlace/1/blur/1x0/quality/80|imageslim</code><br>如：<a href=\"https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4?imageMogr2/auto-orient/thumbnail/!100x200r/gravity/Center/crop/100x200/interlace/1/blur/1x0/quality/80|imageslim\">https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4?imageMogr2/auto-orient/thumbnail/!100x200r/gravity/Center/crop/100x200/interlace/1/blur/1x0/quality/80|imageslim</a></p>\n<h3 id=\"3、资源下载：\"><a href=\"#3、资源下载：\" class=\"headerlink\" title=\"3、资源下载：\"></a>3、资源下载：</h3><p><code>域名/hash值?attname=文件名.扩展名</code><br>如：<a href=\"https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?attname=a.jpg\">https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?attname=a.jpg</a></p>\n<h3 id=\"4、图片等比例缩放：\"><a href=\"#4、图片等比例缩放：\" class=\"headerlink\" title=\"4、图片等比例缩放：\"></a>4、图片等比例缩放：</h3><p><code>域名/hash值?imageView2/&lt;mode&gt;/w/&lt;Width&gt;/h/&lt;Height&gt;</code><br>如：<a href=\"https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?imageView2/2/w/450/h/450\">https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?imageView2/2/w/450/h/450</a></p>\n<h3 id=\"参考文档：\"><a href=\"#参考文档：\" class=\"headerlink\" title=\"参考文档：\"></a>参考文档：</h3><p><a href=\"https://developer.qiniu.com/dora/api/1279/basic-processing-images-imageview2\">https://developer.qiniu.com/dora/api/1279/basic-processing-images-imageview2</a></p>\n","excerpt":"","more":"<h3 id=\"1、七牛云图片地址：\"><a href=\"#1、七牛云图片地址：\" class=\"headerlink\" title=\"1、七牛云图片地址：\"></a>1、七牛云图片地址：</h3><p><code>域名/hash值</code><br>如：<a href=\"https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4\">https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4</a></p>\n<h3 id=\"2、按指定尺寸显示图片：\"><a href=\"#2、按指定尺寸显示图片：\" class=\"headerlink\" title=\"2、按指定尺寸显示图片：\"></a>2、按指定尺寸显示图片：</h3><p><code>域名/hash值?imageMogr2/auto-orient/thumbnail/!宽x高r/gravity/Center/crop/宽x高/interlace/1/blur/1x0/quality/80|imageslim</code><br>如：<a href=\"https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4?imageMogr2/auto-orient/thumbnail/!100x200r/gravity/Center/crop/100x200/interlace/1/blur/1x0/quality/80|imageslim\">https://qiniu.xx.com/FroIL5_7Yx8cY901eZJk_vgtJko4?imageMogr2/auto-orient/thumbnail/!100x200r/gravity/Center/crop/100x200/interlace/1/blur/1x0/quality/80|imageslim</a></p>\n<h3 id=\"3、资源下载：\"><a href=\"#3、资源下载：\" class=\"headerlink\" title=\"3、资源下载：\"></a>3、资源下载：</h3><p><code>域名/hash值?attname=文件名.扩展名</code><br>如：<a href=\"https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?attname=a.jpg\">https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?attname=a.jpg</a></p>\n<h3 id=\"4、图片等比例缩放：\"><a href=\"#4、图片等比例缩放：\" class=\"headerlink\" title=\"4、图片等比例缩放：\"></a>4、图片等比例缩放：</h3><p><code>域名/hash值?imageView2/&lt;mode&gt;/w/&lt;Width&gt;/h/&lt;Height&gt;</code><br>如：<a href=\"https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?imageView2/2/w/450/h/450\">https://qiniu.xx.com/FpGbwMwJR4mqRIbBIDCy2ZNbpvA9?imageView2/2/w/450/h/450</a></p>\n<h3 id=\"参考文档：\"><a href=\"#参考文档：\" class=\"headerlink\" title=\"参考文档：\"></a>参考文档：</h3><p><a href=\"https://developer.qiniu.com/dora/api/1279/basic-processing-images-imageview2\">https://developer.qiniu.com/dora/api/1279/basic-processing-images-imageview2</a></p>\n"},{"title":"微信公众号消息推送","abbrlink":"wx-msg-push","date":"2021-12-31T01:28:56.000Z","updated":"2021-12-31T01:28:56.000Z","_content":"\n### 1、公众号模板消息推送\n\n1. 需在公众号的IP白名单中添加IP\n![](/images/wx_msg_push_1.png)\n2. 启用服务器配置\n![](/images/wx_msg_push_2.png)\n\n3. 报错`ridinvalid weapp pagepath`\n说明公众号关联的小程序没有这个界面，可以不设置pagepath","source":"_posts/第三方/微信公众号消息推送.md","raw":"---\ntitle: 微信公众号消息推送\ntags: [消息推送]\ncategories: [第三方]\nabbrlink: 'wx-msg-push'\ndate: 2021-12-31 09:28:56\nupdated: 2021-12-31 09:28:56\n---\n\n### 1、公众号模板消息推送\n\n1. 需在公众号的IP白名单中添加IP\n![](/images/wx_msg_push_1.png)\n2. 启用服务器配置\n![](/images/wx_msg_push_2.png)\n\n3. 报错`ridinvalid weapp pagepath`\n说明公众号关联的小程序没有这个界面，可以不设置pagepath","slug":"第三方/微信公众号消息推送","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2u7004hoshgelok857e","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1、公众号模板消息推送\"><a href=\"#1、公众号模板消息推送\" class=\"headerlink\" title=\"1、公众号模板消息推送\"></a>1、公众号模板消息推送</h3><ol>\n<li>需在公众号的IP白名单中添加IP<br><img src=\"/images/wx_msg_push_1.png\" alt=\"\"></li>\n<li><p>启用服务器配置<br><img src=\"/images/wx_msg_push_2.png\" alt=\"\"></p>\n</li>\n<li><p>报错<code>ridinvalid weapp pagepath</code><br>说明公众号关联的小程序没有这个界面，可以不设置pagepath</p>\n</li>\n</ol>\n","excerpt":"","more":"<h3 id=\"1、公众号模板消息推送\"><a href=\"#1、公众号模板消息推送\" class=\"headerlink\" title=\"1、公众号模板消息推送\"></a>1、公众号模板消息推送</h3><ol>\n<li>需在公众号的IP白名单中添加IP<br><img src=\"/images/wx_msg_push_1.png\" alt></li>\n<li><p>启用服务器配置<br><img src=\"/images/wx_msg_push_2.png\" alt></p>\n</li>\n<li><p>报错<code>ridinvalid weapp pagepath</code><br>说明公众号关联的小程序没有这个界面，可以不设置pagepath</p>\n</li>\n</ol>\n"},{"title":"滑动窗口算法","abbrlink":"sliding-window","date":"2024-11-13T05:39:12.000Z","updated":"2024-11-13T05:39:12.000Z","_content":"\n### 什么是滑动窗口算法？\n滑动窗口算法的核心思想是：维护一个固定大小的窗口，随着数据的不断输入，窗口不断向后滑动，从而达到对数据流进行局部统计或计算的目的。\n\n### 应用场景\n - 字符串处理: 查找最长无重复子串、字符串的排列等。\n - 数组处理: 寻找数组中满足一定条件的子数组、滑动窗口的最大值/最小值等。\n - 数据流处理: 实时处理数据流，统计窗口内的统计量；进而进行下一步处理，如：限流(在一定时间窗口内限制请求的次数)、降权(如果十分钟的订单数超过100，且失败率高于40%，就把该充值渠道的优先级降到最低)等。\n\n### PHP实现滑动窗口算法\n\n#### 1. 基于数组实现的滑动窗口\n```php\n/**\n * 查找数组中滑动窗口内的最大值\n *\n * 整体思路是：\n *     1. 使用一个单调递减队列来存储索引，队列头部始终是当前窗口的最大值对应的索引。\n *     2. 每次循环，将当前元素与队列尾部的元素比较，如果当前元素更大，则将队列尾部的元素弹出，\n *          直到队列为空或当前元素小于等于队列尾部的元素。\n *     3. 当窗口滑动时，如果队列头部的索引对应的元素已经不在窗口内，则将其弹出。\n * @param $nums\n * @param $k\n * @return array\n */\nfunction findMaxSlidingWindow($nums, $k): array\n{\n    $n = count($nums);&&\n    if ($n == 0) {\n        return [];\n    }\n\n    $q = []; // 单调递减队列，存储索引  队列头部始终是当前窗口的最大值对应的索引。\n    $res = [];\n\n    for ($i = 0; $i < $n; $i++) {\n        // 保证队列中只保留索引对应的值大于等于nums[i]的元素\n        while ($q && $nums[$q[count($q) - 1]] < $nums[$i]) {\n            array_pop($q);\n        }\n        $q[] = $i;\n\n        // 如果窗口已满，且窗口首元素已过期，则弹出\n        if ($i >= $k - 1) {\n            $res[] = $nums[$q[0]];      // 窗口最大值就是队列头部的元素\n            if ($q[0] === $i - $k + 1) {    // 判断窗口左边界元素是否过期\n                array_shift($q);\n            }\n        }\n    }\n\n    return $res;\n}\n\n\n// 调用\n$nums = [2,5,3,4,5,2,6,3,2,4,10,1,2,0];\n$res = $this->findMaxSlidingWindow($nums,3);\ndump(json_encode($res));        // [5,5,5,5,6,6,6,4,10,10,10,2]\n```\n\n#### 2. 基于双指针实现的滑动窗口\n```php\n/**\n * 查找最长无重复子串\n * @param $s\n * @return int|mixed\n */\nfunction lengthOfLongestSubstring($s) {\n    $n = strlen($s);\n    $ans = 0;\n    // 左右指针: 用两个指针left和right来表示滑动窗口的左右边界。\n    $left = 0;\n    $right = 0;\n    $set = [];      // 哈希表: 用一个哈希表来记录窗口中出现的字符。\n    while ($right < $n) {\n        $c = $s[$right];\n        // 窗口滑动: 当遇到重复字符时，左指针向右移动，直到窗口中不再包含重复字符。\n        while (isset($set[$c])) {\n            unset($set[$s[$left]]);\n            $left++;\n        }\n        $set[$c] = true;\n        $ans = max($ans, $right - $left + 1);\n        $right++;\n    }\n    return $ans;\n}\n\n// 调用\n$str = 'sdf233rdfekdfkkdfkdkgkdfgggegfgmffdfdfeer343ferrfe';\n$res = $this->lengthOfLongestSubstring($str);\ndump($res);        // 6\n```\n\n### 注意事项\n - 窗口大小: 滑动窗口的大小是根据具体问题来确定的。\n - 数据类型: 滑动窗口可以处理各种类型的数据，包括数字、字符等。\n - 时间复杂度: 滑动窗口算法的时间复杂度通常是O(n)，其中n是输入数据的长度。","source":"_posts/算法/滑动窗口算法.md","raw":"---\ntitle: 滑动窗口算法\ntags: [PHP,算法,滑动窗口]\ncategories: [算法]\nabbrlink: 'sliding-window'\ndate: 2024-11-13 13:39:12\nupdated: 2024-11-13 13:39:12\n---\n\n### 什么是滑动窗口算法？\n滑动窗口算法的核心思想是：维护一个固定大小的窗口，随着数据的不断输入，窗口不断向后滑动，从而达到对数据流进行局部统计或计算的目的。\n\n### 应用场景\n - 字符串处理: 查找最长无重复子串、字符串的排列等。\n - 数组处理: 寻找数组中满足一定条件的子数组、滑动窗口的最大值/最小值等。\n - 数据流处理: 实时处理数据流，统计窗口内的统计量；进而进行下一步处理，如：限流(在一定时间窗口内限制请求的次数)、降权(如果十分钟的订单数超过100，且失败率高于40%，就把该充值渠道的优先级降到最低)等。\n\n### PHP实现滑动窗口算法\n\n#### 1. 基于数组实现的滑动窗口\n```php\n/**\n * 查找数组中滑动窗口内的最大值\n *\n * 整体思路是：\n *     1. 使用一个单调递减队列来存储索引，队列头部始终是当前窗口的最大值对应的索引。\n *     2. 每次循环，将当前元素与队列尾部的元素比较，如果当前元素更大，则将队列尾部的元素弹出，\n *          直到队列为空或当前元素小于等于队列尾部的元素。\n *     3. 当窗口滑动时，如果队列头部的索引对应的元素已经不在窗口内，则将其弹出。\n * @param $nums\n * @param $k\n * @return array\n */\nfunction findMaxSlidingWindow($nums, $k): array\n{\n    $n = count($nums);&&\n    if ($n == 0) {\n        return [];\n    }\n\n    $q = []; // 单调递减队列，存储索引  队列头部始终是当前窗口的最大值对应的索引。\n    $res = [];\n\n    for ($i = 0; $i < $n; $i++) {\n        // 保证队列中只保留索引对应的值大于等于nums[i]的元素\n        while ($q && $nums[$q[count($q) - 1]] < $nums[$i]) {\n            array_pop($q);\n        }\n        $q[] = $i;\n\n        // 如果窗口已满，且窗口首元素已过期，则弹出\n        if ($i >= $k - 1) {\n            $res[] = $nums[$q[0]];      // 窗口最大值就是队列头部的元素\n            if ($q[0] === $i - $k + 1) {    // 判断窗口左边界元素是否过期\n                array_shift($q);\n            }\n        }\n    }\n\n    return $res;\n}\n\n\n// 调用\n$nums = [2,5,3,4,5,2,6,3,2,4,10,1,2,0];\n$res = $this->findMaxSlidingWindow($nums,3);\ndump(json_encode($res));        // [5,5,5,5,6,6,6,4,10,10,10,2]\n```\n\n#### 2. 基于双指针实现的滑动窗口\n```php\n/**\n * 查找最长无重复子串\n * @param $s\n * @return int|mixed\n */\nfunction lengthOfLongestSubstring($s) {\n    $n = strlen($s);\n    $ans = 0;\n    // 左右指针: 用两个指针left和right来表示滑动窗口的左右边界。\n    $left = 0;\n    $right = 0;\n    $set = [];      // 哈希表: 用一个哈希表来记录窗口中出现的字符。\n    while ($right < $n) {\n        $c = $s[$right];\n        // 窗口滑动: 当遇到重复字符时，左指针向右移动，直到窗口中不再包含重复字符。\n        while (isset($set[$c])) {\n            unset($set[$s[$left]]);\n            $left++;\n        }\n        $set[$c] = true;\n        $ans = max($ans, $right - $left + 1);\n        $right++;\n    }\n    return $ans;\n}\n\n// 调用\n$str = 'sdf233rdfekdfkkdfkdkgkdfgggegfgmffdfdfeer343ferrfe';\n$res = $this->lengthOfLongestSubstring($str);\ndump($res);        // 6\n```\n\n### 注意事项\n - 窗口大小: 滑动窗口的大小是根据具体问题来确定的。\n - 数据类型: 滑动窗口可以处理各种类型的数据，包括数字、字符等。\n - 时间复杂度: 滑动窗口算法的时间复杂度通常是O(n)，其中n是输入数据的长度。","slug":"算法/滑动窗口算法","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2u8004loshg6gcm7p2f","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"什么是滑动窗口算法？\"><a href=\"#什么是滑动窗口算法？\" class=\"headerlink\" title=\"什么是滑动窗口算法？\"></a>什么是滑动窗口算法？</h3><p>滑动窗口算法的核心思想是：维护一个固定大小的窗口，随着数据的不断输入，窗口不断向后滑动，从而达到对数据流进行局部统计或计算的目的。</p>\n<h3 id=\"应用场景\"><a href=\"#应用场景\" class=\"headerlink\" title=\"应用场景\"></a>应用场景</h3><ul>\n<li>字符串处理: 查找最长无重复子串、字符串的排列等。</li>\n<li>数组处理: 寻找数组中满足一定条件的子数组、滑动窗口的最大值/最小值等。</li>\n<li>数据流处理: 实时处理数据流，统计窗口内的统计量；进而进行下一步处理，如：限流(在一定时间窗口内限制请求的次数)、降权(如果十分钟的订单数超过100，且失败率高于40%，就把该充值渠道的优先级降到最低)等。</li>\n</ul>\n<h3 id=\"PHP实现滑动窗口算法\"><a href=\"#PHP实现滑动窗口算法\" class=\"headerlink\" title=\"PHP实现滑动窗口算法\"></a>PHP实现滑动窗口算法</h3><h4 id=\"1-基于数组实现的滑动窗口\"><a href=\"#1-基于数组实现的滑动窗口\" class=\"headerlink\" title=\"1. 基于数组实现的滑动窗口\"></a>1. 基于数组实现的滑动窗口</h4><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 查找数组中滑动窗口内的最大值</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * 整体思路是：</span></span><br><span class=\"line\"><span class=\"comment\"> *     1. 使用一个单调递减队列来存储索引，队列头部始终是当前窗口的最大值对应的索引。</span></span><br><span class=\"line\"><span class=\"comment\"> *     2. 每次循环，将当前元素与队列尾部的元素比较，如果当前元素更大，则将队列尾部的元素弹出，</span></span><br><span class=\"line\"><span class=\"comment\"> *          直到队列为空或当前元素小于等于队列尾部的元素。</span></span><br><span class=\"line\"><span class=\"comment\"> *     3. 当窗口滑动时，如果队列头部的索引对应的元素已经不在窗口内，则将其弹出。</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $nums</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $k</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findMaxSlidingWindow</span>(<span class=\"params\"><span class=\"variable\">$nums</span>, <span class=\"variable\">$k</span></span>): <span class=\"title\">array</span></span></span><br><span class=\"line\"><span class=\"function\"></span>{</span><br><span class=\"line\">    <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$nums</span>);&amp;&amp;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$n</span> == <span class=\"number\">0</span>) {</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [];</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$q</span> = []; <span class=\"comment\">// 单调递减队列，存储索引  队列头部始终是当前窗口的最大值对应的索引。</span></span><br><span class=\"line\">    <span class=\"variable\">$res</span> = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">0</span>; <span class=\"variable\">$i</span> &lt; <span class=\"variable\">$n</span>; <span class=\"variable\">$i</span>++) {</span><br><span class=\"line\">        <span class=\"comment\">// 保证队列中只保留索引对应的值大于等于nums[i]的元素</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"variable\">$q</span> &amp;&amp; <span class=\"variable\">$nums</span>[<span class=\"variable\">$q</span>[<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$q</span>) - <span class=\"number\">1</span>]] &lt; <span class=\"variable\">$nums</span>[<span class=\"variable\">$i</span>]) {</span><br><span class=\"line\">            <span class=\"title function_ invoke__\">array_pop</span>(<span class=\"variable\">$q</span>);</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"variable\">$q</span>[] = <span class=\"variable\">$i</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 如果窗口已满，且窗口首元素已过期，则弹出</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$i</span> &gt;= <span class=\"variable\">$k</span> - <span class=\"number\">1</span>) {</span><br><span class=\"line\">            <span class=\"variable\">$res</span>[] = <span class=\"variable\">$nums</span>[<span class=\"variable\">$q</span>[<span class=\"number\">0</span>]];      <span class=\"comment\">// 窗口最大值就是队列头部的元素</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$q</span>[<span class=\"number\">0</span>] === <span class=\"variable\">$i</span> - <span class=\"variable\">$k</span> + <span class=\"number\">1</span>) {    <span class=\"comment\">// 判断窗口左边界元素是否过期</span></span><br><span class=\"line\">                <span class=\"title function_ invoke__\">array_shift</span>(<span class=\"variable\">$q</span>);</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$res</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$nums</span> = [<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>,<span class=\"number\">6</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">10</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"variable\">$res</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">findMaxSlidingWindow</span>(<span class=\"variable\">$nums</span>,<span class=\"number\">3</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">dump</span>(<span class=\"title function_ invoke__\">json_encode</span>(<span class=\"variable\">$res</span>));        <span class=\"comment\">// [5,5,5,5,6,6,6,4,10,10,10,2]</span></span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"2-基于双指针实现的滑动窗口\"><a href=\"#2-基于双指针实现的滑动窗口\" class=\"headerlink\" title=\"2. 基于双指针实现的滑动窗口\"></a>2. 基于双指针实现的滑动窗口</h4><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 查找最长无重复子串</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $s</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> int|mixed</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">lengthOfLongestSubstring</span>(<span class=\"params\"><span class=\"variable\">$s</span></span>) </span>{</span><br><span class=\"line\">    <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$s</span>);</span><br><span class=\"line\">    <span class=\"variable\">$ans</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 左右指针: 用两个指针left和right来表示滑动窗口的左右边界。</span></span><br><span class=\"line\">    <span class=\"variable\">$left</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"variable\">$right</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"variable\">$set</span> = [];      <span class=\"comment\">// 哈希表: 用一个哈希表来记录窗口中出现的字符。</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"variable\">$right</span> &lt; <span class=\"variable\">$n</span>) {</span><br><span class=\"line\">        <span class=\"variable\">$c</span> = <span class=\"variable\">$s</span>[<span class=\"variable\">$right</span>];</span><br><span class=\"line\">        <span class=\"comment\">// 窗口滑动: 当遇到重复字符时，左指针向右移动，直到窗口中不再包含重复字符。</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"keyword\">isset</span>(<span class=\"variable\">$set</span>[<span class=\"variable\">$c</span>])) {</span><br><span class=\"line\">            <span class=\"keyword\">unset</span>(<span class=\"variable\">$set</span>[<span class=\"variable\">$s</span>[<span class=\"variable\">$left</span>]]);</span><br><span class=\"line\">            <span class=\"variable\">$left</span>++;</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"variable\">$set</span>[<span class=\"variable\">$c</span>] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"variable\">$ans</span> = <span class=\"title function_ invoke__\">max</span>(<span class=\"variable\">$ans</span>, <span class=\"variable\">$right</span> - <span class=\"variable\">$left</span> + <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"variable\">$right</span>++;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$ans</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$str</span> = <span class=\"string\">'sdf233rdfekdfkkdfkdkgkdfgggegfgmffdfdfeer343ferrfe'</span>;</span><br><span class=\"line\"><span class=\"variable\">$res</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">lengthOfLongestSubstring</span>(<span class=\"variable\">$str</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">dump</span>(<span class=\"variable\">$res</span>);        <span class=\"comment\">// 6</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><ul>\n<li>窗口大小: 滑动窗口的大小是根据具体问题来确定的。</li>\n<li>数据类型: 滑动窗口可以处理各种类型的数据，包括数字、字符等。</li>\n<li>时间复杂度: 滑动窗口算法的时间复杂度通常是O(n)，其中n是输入数据的长度。</li>\n</ul>\n","excerpt":"","more":"<h3 id=\"什么是滑动窗口算法？\"><a href=\"#什么是滑动窗口算法？\" class=\"headerlink\" title=\"什么是滑动窗口算法？\"></a>什么是滑动窗口算法？</h3><p>滑动窗口算法的核心思想是：维护一个固定大小的窗口，随着数据的不断输入，窗口不断向后滑动，从而达到对数据流进行局部统计或计算的目的。</p>\n<h3 id=\"应用场景\"><a href=\"#应用场景\" class=\"headerlink\" title=\"应用场景\"></a>应用场景</h3><ul>\n<li>字符串处理: 查找最长无重复子串、字符串的排列等。</li>\n<li>数组处理: 寻找数组中满足一定条件的子数组、滑动窗口的最大值/最小值等。</li>\n<li>数据流处理: 实时处理数据流，统计窗口内的统计量；进而进行下一步处理，如：限流(在一定时间窗口内限制请求的次数)、降权(如果十分钟的订单数超过100，且失败率高于40%，就把该充值渠道的优先级降到最低)等。</li>\n</ul>\n<h3 id=\"PHP实现滑动窗口算法\"><a href=\"#PHP实现滑动窗口算法\" class=\"headerlink\" title=\"PHP实现滑动窗口算法\"></a>PHP实现滑动窗口算法</h3><h4 id=\"1-基于数组实现的滑动窗口\"><a href=\"#1-基于数组实现的滑动窗口\" class=\"headerlink\" title=\"1. 基于数组实现的滑动窗口\"></a>1. 基于数组实现的滑动窗口</h4><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 查找数组中滑动窗口内的最大值</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * 整体思路是：</span></span><br><span class=\"line\"><span class=\"comment\"> *     1. 使用一个单调递减队列来存储索引，队列头部始终是当前窗口的最大值对应的索引。</span></span><br><span class=\"line\"><span class=\"comment\"> *     2. 每次循环，将当前元素与队列尾部的元素比较，如果当前元素更大，则将队列尾部的元素弹出，</span></span><br><span class=\"line\"><span class=\"comment\"> *          直到队列为空或当前元素小于等于队列尾部的元素。</span></span><br><span class=\"line\"><span class=\"comment\"> *     3. 当窗口滑动时，如果队列头部的索引对应的元素已经不在窗口内，则将其弹出。</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $nums</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $k</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> array</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">findMaxSlidingWindow</span>(<span class=\"params\"><span class=\"variable\">$nums</span>, <span class=\"variable\">$k</span></span>): <span class=\"title\">array</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$nums</span>);&amp;&amp;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$n</span> == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$q</span> = []; <span class=\"comment\">// 单调递减队列，存储索引  队列头部始终是当前窗口的最大值对应的索引。</span></span><br><span class=\"line\">    <span class=\"variable\">$res</span> = [];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">0</span>; <span class=\"variable\">$i</span> &lt; <span class=\"variable\">$n</span>; <span class=\"variable\">$i</span>++) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 保证队列中只保留索引对应的值大于等于nums[i]的元素</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"variable\">$q</span> &amp;&amp; <span class=\"variable\">$nums</span>[<span class=\"variable\">$q</span>[<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$q</span>) - <span class=\"number\">1</span>]] &lt; <span class=\"variable\">$nums</span>[<span class=\"variable\">$i</span>]) &#123;</span><br><span class=\"line\">            <span class=\"title function_ invoke__\">array_pop</span>(<span class=\"variable\">$q</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"variable\">$q</span>[] = <span class=\"variable\">$i</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 如果窗口已满，且窗口首元素已过期，则弹出</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$i</span> &gt;= <span class=\"variable\">$k</span> - <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">            <span class=\"variable\">$res</span>[] = <span class=\"variable\">$nums</span>[<span class=\"variable\">$q</span>[<span class=\"number\">0</span>]];      <span class=\"comment\">// 窗口最大值就是队列头部的元素</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$q</span>[<span class=\"number\">0</span>] === <span class=\"variable\">$i</span> - <span class=\"variable\">$k</span> + <span class=\"number\">1</span>) &#123;    <span class=\"comment\">// 判断窗口左边界元素是否过期</span></span><br><span class=\"line\">                <span class=\"title function_ invoke__\">array_shift</span>(<span class=\"variable\">$q</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$res</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$nums</span> = [<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>,<span class=\"number\">6</span>,<span class=\"number\">3</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>,<span class=\"number\">10</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"variable\">$res</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">findMaxSlidingWindow</span>(<span class=\"variable\">$nums</span>,<span class=\"number\">3</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">dump</span>(<span class=\"title function_ invoke__\">json_encode</span>(<span class=\"variable\">$res</span>));        <span class=\"comment\">// [5,5,5,5,6,6,6,4,10,10,10,2]</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"2-基于双指针实现的滑动窗口\"><a href=\"#2-基于双指针实现的滑动窗口\" class=\"headerlink\" title=\"2. 基于双指针实现的滑动窗口\"></a>2. 基于双指针实现的滑动窗口</h4><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 查找最长无重复子串</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> $s</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> int|mixed</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">lengthOfLongestSubstring</span>(<span class=\"params\"><span class=\"variable\">$s</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$s</span>);</span><br><span class=\"line\">    <span class=\"variable\">$ans</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 左右指针: 用两个指针left和right来表示滑动窗口的左右边界。</span></span><br><span class=\"line\">    <span class=\"variable\">$left</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"variable\">$right</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"variable\">$set</span> = [];      <span class=\"comment\">// 哈希表: 用一个哈希表来记录窗口中出现的字符。</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"variable\">$right</span> &lt; <span class=\"variable\">$n</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable\">$c</span> = <span class=\"variable\">$s</span>[<span class=\"variable\">$right</span>];</span><br><span class=\"line\">        <span class=\"comment\">// 窗口滑动: 当遇到重复字符时，左指针向右移动，直到窗口中不再包含重复字符。</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"keyword\">isset</span>(<span class=\"variable\">$set</span>[<span class=\"variable\">$c</span>])) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">unset</span>(<span class=\"variable\">$set</span>[<span class=\"variable\">$s</span>[<span class=\"variable\">$left</span>]]);</span><br><span class=\"line\">            <span class=\"variable\">$left</span>++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"variable\">$set</span>[<span class=\"variable\">$c</span>] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">        <span class=\"variable\">$ans</span> = <span class=\"title function_ invoke__\">max</span>(<span class=\"variable\">$ans</span>, <span class=\"variable\">$right</span> - <span class=\"variable\">$left</span> + <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"variable\">$right</span>++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$ans</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$str</span> = <span class=\"string\">&#x27;sdf233rdfekdfkkdfkdkgkdfgggegfgmffdfdfeer343ferrfe&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$res</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">lengthOfLongestSubstring</span>(<span class=\"variable\">$str</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">dump</span>(<span class=\"variable\">$res</span>);        <span class=\"comment\">// 6</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><ul>\n<li>窗口大小: 滑动窗口的大小是根据具体问题来确定的。</li>\n<li>数据类型: 滑动窗口可以处理各种类型的数据，包括数字、字符等。</li>\n<li>时间复杂度: 滑动窗口算法的时间复杂度通常是O(n)，其中n是输入数据的长度。</li>\n</ul>\n"},{"title":"Notepad++常用操作","abbrlink":"notepad++-notes","date":"2020-08-29T02:11:15.000Z","updated":"2020-08-29T02:11:15.000Z","_content":"\n### 1. 将指定字符替换为换行\n  \n  查找目标：待替换的字符\n  替换为：\\r\n  查找模式：扩展\n  如把 | 替换为换行\n![](/images/notepad_note_1.png)\n![](/images/notepad_note_2.png)\n\n### 2. 去除重复的行\n- 选择内容，然后点击 编辑->行操作->升(降)序排列文本行\n![](/images/notepad_note_3.png)\n- 选择内容，然后点击 编辑->行操作->删除连续的重复行\n![](/images/notepad_note_4.png)\n- 得到去重后的内容，唯一缺点是打乱了原有内容的顺序\n![](/images/notepad_note_5.png)","source":"_posts/编辑器/Notepad++常用操作.md","raw":"---\ntitle: Notepad++常用操作\ntags: [Notepad++]\ncategories: [其他]\nabbrlink: 'notepad++-notes'\ndate: 2020-08-29 10:11:15\nupdated: 2020-08-29 10:11:15\n---\n\n### 1. 将指定字符替换为换行\n  \n  查找目标：待替换的字符\n  替换为：\\r\n  查找模式：扩展\n  如把 | 替换为换行\n![](/images/notepad_note_1.png)\n![](/images/notepad_note_2.png)\n\n### 2. 去除重复的行\n- 选择内容，然后点击 编辑->行操作->升(降)序排列文本行\n![](/images/notepad_note_3.png)\n- 选择内容，然后点击 编辑->行操作->删除连续的重复行\n![](/images/notepad_note_4.png)\n- 得到去重后的内容，唯一缺点是打乱了原有内容的顺序\n![](/images/notepad_note_5.png)","slug":"编辑器/Notepad++常用操作","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2u8004noshg8nmvdryg","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-将指定字符替换为换行\"><a href=\"#1-将指定字符替换为换行\" class=\"headerlink\" title=\"1. 将指定字符替换为换行\"></a>1. 将指定字符替换为换行</h3><p>  查找目标：待替换的字符<br>  替换为：\\r<br>  查找模式：扩展<br>  如把 | 替换为换行<br><img src=\"/images/notepad_note_1.png\" alt=\"\"><br><img src=\"/images/notepad_note_2.png\" alt=\"\"></p>\n<h3 id=\"2-去除重复的行\"><a href=\"#2-去除重复的行\" class=\"headerlink\" title=\"2. 去除重复的行\"></a>2. 去除重复的行</h3><ul>\n<li>选择内容，然后点击 编辑-&gt;行操作-&gt;升(降)序排列文本行<br><img src=\"/images/notepad_note_3.png\" alt=\"\"></li>\n<li>选择内容，然后点击 编辑-&gt;行操作-&gt;删除连续的重复行<br><img src=\"/images/notepad_note_4.png\" alt=\"\"></li>\n<li>得到去重后的内容，唯一缺点是打乱了原有内容的顺序<br><img src=\"/images/notepad_note_5.png\" alt=\"\"></li>\n</ul>\n","excerpt":"","more":"<h3 id=\"1-将指定字符替换为换行\"><a href=\"#1-将指定字符替换为换行\" class=\"headerlink\" title=\"1. 将指定字符替换为换行\"></a>1. 将指定字符替换为换行</h3><p>  查找目标：待替换的字符<br>  替换为：\\r<br>  查找模式：扩展<br>  如把 | 替换为换行<br><img src=\"/images/notepad_note_1.png\" alt><br><img src=\"/images/notepad_note_2.png\" alt></p>\n<h3 id=\"2-去除重复的行\"><a href=\"#2-去除重复的行\" class=\"headerlink\" title=\"2. 去除重复的行\"></a>2. 去除重复的行</h3><ul>\n<li>选择内容，然后点击 编辑-&gt;行操作-&gt;升(降)序排列文本行<br><img src=\"/images/notepad_note_3.png\" alt></li>\n<li>选择内容，然后点击 编辑-&gt;行操作-&gt;删除连续的重复行<br><img src=\"/images/notepad_note_4.png\" alt></li>\n<li>得到去重后的内容，唯一缺点是打乱了原有内容的顺序<br><img src=\"/images/notepad_note_5.png\" alt></li>\n</ul>\n"},{"title":"PHP实现熔断机制","abbrlink":"php-circuit-breaker","date":"2024-11-13T05:39:12.000Z","updated":"2024-11-13T05:39:12.000Z","_content":"\n### 什么是熔断机制？\n熔断机制是一种应对系统故障、防止级联故障的保护机制。当某个服务出现故障时，通过熔断机制，可以快速隔离故障服务，防止故障蔓延到整个系统，从而保证系统的稳定性。\n\n### 熔断机制的核心要素\n - 快速失败： 当服务不可用时，立即返回错误，防止请求积压。\n - 隔离： 将故障服务隔离，防止影响其他服务。\n - 自恢复： 经过一段时间后，自动尝试恢复服务，并逐步增加流量。\n - 监控： 实时监控服务状态，及时发现异常。\n\n### 熔断机制的应用场景\n - 微服务架构： 防止单个服务的故障影响整个系统。\n - 分布式系统： 提高系统的容错性。\n - 高并发系统： 保护系统在高并发下的稳定性。\n\n### 实现熔断器的基本思路\n - 定义状态: 闭合状态（正常调用）、半开状态（部分调用）、打开状态（完全阻断）。\n - 统计请求: 记录成功和失败的请求次数。\n - 设置阈值: 当失败次数达到一定阈值时，触发熔断。\n - 状态切换: 根据当前状态和统计数据，实现状态之间的切换。\n\n### PHP代码实现熔断器\n```php\nclass CircuitBreaker\n{\n    private const CLOSED = 'CLOSED';\n    private const OPEN = 'OPEN';\n    private const HALF_OPEN = 'HALF_OPEN';\n\n    private $state = self::CLOSED;\n    private $failureThreshold = 0.5;      // 失败率阈值\n    private $windowSize = 10;           // 滑动窗口大小\n    private $timeout = 3;               // 半开状态超时时间\n    private $window = [];\n    private $lastCheckedAt;\n\n\n    public function call($callback)\n    {\n        if ($this->state === self::OPEN && time() - $this->lastCheckedAt < $this->timeout) {\n            return false;       //直接返回失败\n        }\n\n        try {\n            $result = $callback();\n            $this->recordSuccess();\n        } catch (\\Exception $e) {\n            $this->recordFailure();\n            if ($this->isTripped()){\n                $this->state = self::OPEN;\n                $this->lastCheckedAt = time();\n            }\n            return false;\n        }\n\n        if ($this->state === self::HALF_OPEN) {\n            $this->state = ($this->isTripped()) ? self::OPEN : self::CLOSED;\n        }\n\n        return $result;\n    }\n\n    private function recordSuccess()\n    {\n        $this->window[] = 'success';\n        if (count($this->window) > $this->windowSize) {\n            array_shift($this->window);\n        }\n    }\n\n    private function recordFailure()\n    {\n        $this->window[] = 'failure';\n        if (count($this->window) > $this->windowSize) {\n            array_shift($this->window);\n        }\n    }\n\n    private function isTripped()\n    {\n        $failures = array_count_values($this->window)['failure'] ?? 0;\n        return $failures / $this->windowSize > $this->failureThreshold;\n    }\n\n    public function getSystemLoad()\n    {\n        return sys_getloadavg()[0];\n    }\n\n    // 自适应阈值示例（基于负载）\n    public function adjustThreshold($load)\n    {\n        // 根据负载调整阈值，例如：\n        if ($load > 80) {\n            $this->failureThreshold = 0.3; // 负载高时，降低阈值\n        } else {\n            $this->failureThreshold = 0.5;\n        }\n    }\n}\n\n\n// 调用\n$circuitBreaker = new CircuitBreaker();\n\nwhile (true) {\n    // 定期获取系统负载并调整阈值\n    $load = $circuitBreaker->getSystemLoad();\n    $circuitBreaker->adjustThreshold($load);\n\n    // 调用服务\n    $result = $circuitBreaker->call(function () {\n        // ...\n    });\n\n    // ... 其他逻辑\n}\n```\n\n### 注意事项\n - 阈值设置： 阈值设置过高，可能导致服务长时间不可用；设置过低，可能频繁触发熔断。\n - 超时时间: 超时时间过短，可能导致服务频繁切换状态；过长，可能影响服务恢复。\n - 降级策略： 熔断时，需要有合适的降级策略，比如返回缓存数据、返回默认值等，保证用户体验。\n - 监控告警： 需要实时监控熔断状态，及时发现问题。","source":"_posts/系统设计及优化/PHP实现熔断机制.md","raw":"---\ntitle: PHP实现熔断机制\ntags: [PHP,熔断]\ncategories: [系统设计]\nabbrlink: 'php-circuit-breaker'\ndate: 2024-11-13 13:39:12\nupdated: 2024-11-13 13:39:12\n---\n\n### 什么是熔断机制？\n熔断机制是一种应对系统故障、防止级联故障的保护机制。当某个服务出现故障时，通过熔断机制，可以快速隔离故障服务，防止故障蔓延到整个系统，从而保证系统的稳定性。\n\n### 熔断机制的核心要素\n - 快速失败： 当服务不可用时，立即返回错误，防止请求积压。\n - 隔离： 将故障服务隔离，防止影响其他服务。\n - 自恢复： 经过一段时间后，自动尝试恢复服务，并逐步增加流量。\n - 监控： 实时监控服务状态，及时发现异常。\n\n### 熔断机制的应用场景\n - 微服务架构： 防止单个服务的故障影响整个系统。\n - 分布式系统： 提高系统的容错性。\n - 高并发系统： 保护系统在高并发下的稳定性。\n\n### 实现熔断器的基本思路\n - 定义状态: 闭合状态（正常调用）、半开状态（部分调用）、打开状态（完全阻断）。\n - 统计请求: 记录成功和失败的请求次数。\n - 设置阈值: 当失败次数达到一定阈值时，触发熔断。\n - 状态切换: 根据当前状态和统计数据，实现状态之间的切换。\n\n### PHP代码实现熔断器\n```php\nclass CircuitBreaker\n{\n    private const CLOSED = 'CLOSED';\n    private const OPEN = 'OPEN';\n    private const HALF_OPEN = 'HALF_OPEN';\n\n    private $state = self::CLOSED;\n    private $failureThreshold = 0.5;      // 失败率阈值\n    private $windowSize = 10;           // 滑动窗口大小\n    private $timeout = 3;               // 半开状态超时时间\n    private $window = [];\n    private $lastCheckedAt;\n\n\n    public function call($callback)\n    {\n        if ($this->state === self::OPEN && time() - $this->lastCheckedAt < $this->timeout) {\n            return false;       //直接返回失败\n        }\n\n        try {\n            $result = $callback();\n            $this->recordSuccess();\n        } catch (\\Exception $e) {\n            $this->recordFailure();\n            if ($this->isTripped()){\n                $this->state = self::OPEN;\n                $this->lastCheckedAt = time();\n            }\n            return false;\n        }\n\n        if ($this->state === self::HALF_OPEN) {\n            $this->state = ($this->isTripped()) ? self::OPEN : self::CLOSED;\n        }\n\n        return $result;\n    }\n\n    private function recordSuccess()\n    {\n        $this->window[] = 'success';\n        if (count($this->window) > $this->windowSize) {\n            array_shift($this->window);\n        }\n    }\n\n    private function recordFailure()\n    {\n        $this->window[] = 'failure';\n        if (count($this->window) > $this->windowSize) {\n            array_shift($this->window);\n        }\n    }\n\n    private function isTripped()\n    {\n        $failures = array_count_values($this->window)['failure'] ?? 0;\n        return $failures / $this->windowSize > $this->failureThreshold;\n    }\n\n    public function getSystemLoad()\n    {\n        return sys_getloadavg()[0];\n    }\n\n    // 自适应阈值示例（基于负载）\n    public function adjustThreshold($load)\n    {\n        // 根据负载调整阈值，例如：\n        if ($load > 80) {\n            $this->failureThreshold = 0.3; // 负载高时，降低阈值\n        } else {\n            $this->failureThreshold = 0.5;\n        }\n    }\n}\n\n\n// 调用\n$circuitBreaker = new CircuitBreaker();\n\nwhile (true) {\n    // 定期获取系统负载并调整阈值\n    $load = $circuitBreaker->getSystemLoad();\n    $circuitBreaker->adjustThreshold($load);\n\n    // 调用服务\n    $result = $circuitBreaker->call(function () {\n        // ...\n    });\n\n    // ... 其他逻辑\n}\n```\n\n### 注意事项\n - 阈值设置： 阈值设置过高，可能导致服务长时间不可用；设置过低，可能频繁触发熔断。\n - 超时时间: 超时时间过短，可能导致服务频繁切换状态；过长，可能影响服务恢复。\n - 降级策略： 熔断时，需要有合适的降级策略，比如返回缓存数据、返回默认值等，保证用户体验。\n - 监控告警： 需要实时监控熔断状态，及时发现问题。","slug":"系统设计及优化/PHP实现熔断机制","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2u9004soshg4e3w2xby","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"什么是熔断机制？\"><a href=\"#什么是熔断机制？\" class=\"headerlink\" title=\"什么是熔断机制？\"></a>什么是熔断机制？</h3><p>熔断机制是一种应对系统故障、防止级联故障的保护机制。当某个服务出现故障时，通过熔断机制，可以快速隔离故障服务，防止故障蔓延到整个系统，从而保证系统的稳定性。</p>\n<h3 id=\"熔断机制的核心要素\"><a href=\"#熔断机制的核心要素\" class=\"headerlink\" title=\"熔断机制的核心要素\"></a>熔断机制的核心要素</h3><ul>\n<li>快速失败： 当服务不可用时，立即返回错误，防止请求积压。</li>\n<li>隔离： 将故障服务隔离，防止影响其他服务。</li>\n<li>自恢复： 经过一段时间后，自动尝试恢复服务，并逐步增加流量。</li>\n<li>监控： 实时监控服务状态，及时发现异常。</li>\n</ul>\n<h3 id=\"熔断机制的应用场景\"><a href=\"#熔断机制的应用场景\" class=\"headerlink\" title=\"熔断机制的应用场景\"></a>熔断机制的应用场景</h3><ul>\n<li>微服务架构： 防止单个服务的故障影响整个系统。</li>\n<li>分布式系统： 提高系统的容错性。</li>\n<li>高并发系统： 保护系统在高并发下的稳定性。</li>\n</ul>\n<h3 id=\"实现熔断器的基本思路\"><a href=\"#实现熔断器的基本思路\" class=\"headerlink\" title=\"实现熔断器的基本思路\"></a>实现熔断器的基本思路</h3><ul>\n<li>定义状态: 闭合状态（正常调用）、半开状态（部分调用）、打开状态（完全阻断）。</li>\n<li>统计请求: 记录成功和失败的请求次数。</li>\n<li>设置阈值: 当失败次数达到一定阈值时，触发熔断。</li>\n<li>状态切换: 根据当前状态和统计数据，实现状态之间的切换。</li>\n</ul>\n<h3 id=\"PHP代码实现熔断器\"><a href=\"#PHP代码实现熔断器\" class=\"headerlink\" title=\"PHP代码实现熔断器\"></a>PHP代码实现熔断器</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CircuitBreaker</span></span></span><br><span class=\"line\"><span class=\"class\"></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> <span class=\"variable constant_\">CLOSED</span> = <span class=\"string\">'CLOSED'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> <span class=\"variable constant_\">OPEN</span> = <span class=\"string\">'OPEN'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> <span class=\"variable constant_\">HALF_OPEN</span> = <span class=\"string\">'HALF_OPEN'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$state</span> = <span class=\"built_in\">self</span>::<span class=\"variable constant_\">CLOSED</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$failureThreshold</span> = <span class=\"number\">0.5</span>;      <span class=\"comment\">// 失败率阈值</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$windowSize</span> = <span class=\"number\">10</span>;           <span class=\"comment\">// 滑动窗口大小</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$timeout</span> = <span class=\"number\">3</span>;               <span class=\"comment\">// 半开状态超时时间</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$window</span> = [];</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$lastCheckedAt</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">call</span>(<span class=\"params\"><span class=\"variable\">$callback</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>{</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;state === <span class=\"built_in\">self</span>::<span class=\"variable constant_\">OPEN</span> &amp;&amp; <span class=\"title function_ invoke__\">time</span>() - <span class=\"variable language_\">$this</span>-&gt;lastCheckedAt &lt; <span class=\"variable language_\">$this</span>-&gt;timeout) {</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;       <span class=\"comment\">//直接返回失败</span></span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> {</span><br><span class=\"line\">            <span class=\"variable\">$result</span> = <span class=\"variable\">$callback</span>();</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">recordSuccess</span>();</span><br><span class=\"line\">        } <span class=\"keyword\">catch</span> (\\<span class=\"built_in\">Exception</span> <span class=\"variable\">$e</span>) {</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">recordFailure</span>();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">isTripped</span>()){</span><br><span class=\"line\">                <span class=\"variable language_\">$this</span>-&gt;state = <span class=\"built_in\">self</span>::<span class=\"variable constant_\">OPEN</span>;</span><br><span class=\"line\">                <span class=\"variable language_\">$this</span>-&gt;lastCheckedAt = <span class=\"title function_ invoke__\">time</span>();</span><br><span class=\"line\">            }</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;state === <span class=\"built_in\">self</span>::<span class=\"variable constant_\">HALF_OPEN</span>) {</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;state = (<span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">isTripped</span>()) ? <span class=\"built_in\">self</span>::<span class=\"variable constant_\">OPEN</span> : <span class=\"built_in\">self</span>::<span class=\"variable constant_\">CLOSED</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$result</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">recordSuccess</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;window[] = <span class=\"string\">'success'</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$this</span>-&gt;window) &gt; <span class=\"variable language_\">$this</span>-&gt;windowSize) {</span><br><span class=\"line\">            <span class=\"title function_ invoke__\">array_shift</span>(<span class=\"variable\">$this</span>-&gt;window);</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">recordFailure</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;window[] = <span class=\"string\">'failure'</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$this</span>-&gt;window) &gt; <span class=\"variable language_\">$this</span>-&gt;windowSize) {</span><br><span class=\"line\">            <span class=\"title function_ invoke__\">array_shift</span>(<span class=\"variable\">$this</span>-&gt;window);</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isTripped</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>{</span><br><span class=\"line\">        <span class=\"variable\">$failures</span> = <span class=\"title function_ invoke__\">array_count_values</span>(<span class=\"variable\">$this</span>-&gt;window)[<span class=\"string\">'failure'</span>] ?? <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$failures</span> / <span class=\"variable language_\">$this</span>-&gt;windowSize &gt; <span class=\"variable language_\">$this</span>-&gt;failureThreshold;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSystemLoad</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">sys_getloadavg</span>()[<span class=\"number\">0</span>];</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 自适应阈值示例（基于负载）</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">adjustThreshold</span>(<span class=\"params\"><span class=\"variable\">$load</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>{</span><br><span class=\"line\">        <span class=\"comment\">// 根据负载调整阈值，例如：</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$load</span> &gt; <span class=\"number\">80</span>) {</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;failureThreshold = <span class=\"number\">0.3</span>; <span class=\"comment\">// 负载高时，降低阈值</span></span><br><span class=\"line\">        } <span class=\"keyword\">else</span> {</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;failureThreshold = <span class=\"number\">0.5</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$circuitBreaker</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">CircuitBreaker</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) {</span><br><span class=\"line\">    <span class=\"comment\">// 定期获取系统负载并调整阈值</span></span><br><span class=\"line\">    <span class=\"variable\">$load</span> = <span class=\"variable\">$circuitBreaker</span>-&gt;<span class=\"title function_ invoke__\">getSystemLoad</span>();</span><br><span class=\"line\">    <span class=\"variable\">$circuitBreaker</span>-&gt;<span class=\"title function_ invoke__\">adjustThreshold</span>(<span class=\"variable\">$load</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 调用服务</span></span><br><span class=\"line\">    <span class=\"variable\">$result</span> = <span class=\"variable\">$circuitBreaker</span>-&gt;<span class=\"title function_ invoke__\">call</span>(function () {</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    });</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ... 其他逻辑</span></span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><ul>\n<li>阈值设置： 阈值设置过高，可能导致服务长时间不可用；设置过低，可能频繁触发熔断。</li>\n<li>超时时间: 超时时间过短，可能导致服务频繁切换状态；过长，可能影响服务恢复。</li>\n<li>降级策略： 熔断时，需要有合适的降级策略，比如返回缓存数据、返回默认值等，保证用户体验。</li>\n<li>监控告警： 需要实时监控熔断状态，及时发现问题。</li>\n</ul>\n","excerpt":"","more":"<h3 id=\"什么是熔断机制？\"><a href=\"#什么是熔断机制？\" class=\"headerlink\" title=\"什么是熔断机制？\"></a>什么是熔断机制？</h3><p>熔断机制是一种应对系统故障、防止级联故障的保护机制。当某个服务出现故障时，通过熔断机制，可以快速隔离故障服务，防止故障蔓延到整个系统，从而保证系统的稳定性。</p>\n<h3 id=\"熔断机制的核心要素\"><a href=\"#熔断机制的核心要素\" class=\"headerlink\" title=\"熔断机制的核心要素\"></a>熔断机制的核心要素</h3><ul>\n<li>快速失败： 当服务不可用时，立即返回错误，防止请求积压。</li>\n<li>隔离： 将故障服务隔离，防止影响其他服务。</li>\n<li>自恢复： 经过一段时间后，自动尝试恢复服务，并逐步增加流量。</li>\n<li>监控： 实时监控服务状态，及时发现异常。</li>\n</ul>\n<h3 id=\"熔断机制的应用场景\"><a href=\"#熔断机制的应用场景\" class=\"headerlink\" title=\"熔断机制的应用场景\"></a>熔断机制的应用场景</h3><ul>\n<li>微服务架构： 防止单个服务的故障影响整个系统。</li>\n<li>分布式系统： 提高系统的容错性。</li>\n<li>高并发系统： 保护系统在高并发下的稳定性。</li>\n</ul>\n<h3 id=\"实现熔断器的基本思路\"><a href=\"#实现熔断器的基本思路\" class=\"headerlink\" title=\"实现熔断器的基本思路\"></a>实现熔断器的基本思路</h3><ul>\n<li>定义状态: 闭合状态（正常调用）、半开状态（部分调用）、打开状态（完全阻断）。</li>\n<li>统计请求: 记录成功和失败的请求次数。</li>\n<li>设置阈值: 当失败次数达到一定阈值时，触发熔断。</li>\n<li>状态切换: 根据当前状态和统计数据，实现状态之间的切换。</li>\n</ul>\n<h3 id=\"PHP代码实现熔断器\"><a href=\"#PHP代码实现熔断器\" class=\"headerlink\" title=\"PHP代码实现熔断器\"></a>PHP代码实现熔断器</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CircuitBreaker</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> <span class=\"variable constant_\">CLOSED</span> = <span class=\"string\">&#x27;CLOSED&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> <span class=\"variable constant_\">OPEN</span> = <span class=\"string\">&#x27;OPEN&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">const</span> <span class=\"variable constant_\">HALF_OPEN</span> = <span class=\"string\">&#x27;HALF_OPEN&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$state</span> = <span class=\"built_in\">self</span>::<span class=\"variable constant_\">CLOSED</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$failureThreshold</span> = <span class=\"number\">0.5</span>;      <span class=\"comment\">// 失败率阈值</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$windowSize</span> = <span class=\"number\">10</span>;           <span class=\"comment\">// 滑动窗口大小</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$timeout</span> = <span class=\"number\">3</span>;               <span class=\"comment\">// 半开状态超时时间</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$window</span> = [];</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$lastCheckedAt</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">call</span>(<span class=\"params\"><span class=\"variable\">$callback</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;state === <span class=\"built_in\">self</span>::<span class=\"variable constant_\">OPEN</span> &amp;&amp; <span class=\"title function_ invoke__\">time</span>() - <span class=\"variable language_\">$this</span>-&gt;lastCheckedAt &lt; <span class=\"variable language_\">$this</span>-&gt;timeout) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;       <span class=\"comment\">//直接返回失败</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"variable\">$result</span> = <span class=\"variable\">$callback</span>();</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">recordSuccess</span>();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (\\<span class=\"built_in\">Exception</span> <span class=\"variable\">$e</span>) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">recordFailure</span>();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">isTripped</span>())&#123;</span><br><span class=\"line\">                <span class=\"variable language_\">$this</span>-&gt;state = <span class=\"built_in\">self</span>::<span class=\"variable constant_\">OPEN</span>;</span><br><span class=\"line\">                <span class=\"variable language_\">$this</span>-&gt;lastCheckedAt = <span class=\"title function_ invoke__\">time</span>();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;state === <span class=\"built_in\">self</span>::<span class=\"variable constant_\">HALF_OPEN</span>) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;state = (<span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">isTripped</span>()) ? <span class=\"built_in\">self</span>::<span class=\"variable constant_\">OPEN</span> : <span class=\"built_in\">self</span>::<span class=\"variable constant_\">CLOSED</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$result</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">recordSuccess</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;window[] = <span class=\"string\">&#x27;success&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$this</span>-&gt;window) &gt; <span class=\"variable language_\">$this</span>-&gt;windowSize) &#123;</span><br><span class=\"line\">            <span class=\"title function_ invoke__\">array_shift</span>(<span class=\"variable\">$this</span>-&gt;window);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">recordFailure</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;window[] = <span class=\"string\">&#x27;failure&#x27;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$this</span>-&gt;window) &gt; <span class=\"variable language_\">$this</span>-&gt;windowSize) &#123;</span><br><span class=\"line\">            <span class=\"title function_ invoke__\">array_shift</span>(<span class=\"variable\">$this</span>-&gt;window);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isTripped</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$failures</span> = <span class=\"title function_ invoke__\">array_count_values</span>(<span class=\"variable\">$this</span>-&gt;window)[<span class=\"string\">&#x27;failure&#x27;</span>] ?? <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$failures</span> / <span class=\"variable language_\">$this</span>-&gt;windowSize &gt; <span class=\"variable language_\">$this</span>-&gt;failureThreshold;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSystemLoad</span>(<span class=\"params\"></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">sys_getloadavg</span>()[<span class=\"number\">0</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 自适应阈值示例（基于负载）</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">adjustThreshold</span>(<span class=\"params\"><span class=\"variable\">$load</span></span>)</span></span><br><span class=\"line\"><span class=\"function\">    </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 根据负载调整阈值，例如：</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$load</span> &gt; <span class=\"number\">80</span>) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;failureThreshold = <span class=\"number\">0.3</span>; <span class=\"comment\">// 负载高时，降低阈值</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;failureThreshold = <span class=\"number\">0.5</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$circuitBreaker</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">CircuitBreaker</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 定期获取系统负载并调整阈值</span></span><br><span class=\"line\">    <span class=\"variable\">$load</span> = <span class=\"variable\">$circuitBreaker</span>-&gt;<span class=\"title function_ invoke__\">getSystemLoad</span>();</span><br><span class=\"line\">    <span class=\"variable\">$circuitBreaker</span>-&gt;<span class=\"title function_ invoke__\">adjustThreshold</span>(<span class=\"variable\">$load</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 调用服务</span></span><br><span class=\"line\">    <span class=\"variable\">$result</span> = <span class=\"variable\">$circuitBreaker</span>-&gt;<span class=\"title function_ invoke__\">call</span>(function () &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ... 其他逻辑</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h3><ul>\n<li>阈值设置： 阈值设置过高，可能导致服务长时间不可用；设置过低，可能频繁触发熔断。</li>\n<li>超时时间: 超时时间过短，可能导致服务频繁切换状态；过长，可能影响服务恢复。</li>\n<li>降级策略： 熔断时，需要有合适的降级策略，比如返回缓存数据、返回默认值等，保证用户体验。</li>\n<li>监控告警： 需要实时监控熔断状态，及时发现问题。</li>\n</ul>\n"},{"title":"CSS笔记","abbrlink":"1822a0ce","date":"2018-06-04T03:19:00.000Z","updated":"2018-06-04T03:43:00.000Z","_content":"\n1. 如果希望css样式不被覆盖，可以在后面加上!important，如：`.cntck{ margin-right: 5px!important;}`\n\n2. 如果css希望两个标签对齐，可以用position来处理，如：`.cntck{position: relative; bottom: -2px;}`","source":"_posts/HTML/CSS/CSS笔记.md","raw":"---\ntitle: CSS笔记\ntags: [CSS]\ncategories: [前端]\nabbrlink: 1822a0ce\ndate: 2018-06-04 11:19:00\nupdated: 2018-06-04 11:43:00\n---\n\n1. 如果希望css样式不被覆盖，可以在后面加上!important，如：`.cntck{ margin-right: 5px!important;}`\n\n2. 如果css希望两个标签对齐，可以用position来处理，如：`.cntck{position: relative; bottom: -2px;}`","slug":"HTML/CSS/CSS笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ua004toshg9cov0ph3","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li><p>如果希望css样式不被覆盖，可以在后面加上!important，如：<code>.cntck{ margin-right: 5px!important;}</code></p>\n</li>\n<li><p>如果css希望两个标签对齐，可以用position来处理，如：<code>.cntck{position: relative; bottom: -2px;}</code></p>\n</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li><p>如果希望css样式不被覆盖，可以在后面加上!important，如：<code>.cntck&#123; margin-right: 5px!important;&#125;</code></p>\n</li>\n<li><p>如果css希望两个标签对齐，可以用position来处理，如：<code>.cntck&#123;position: relative; bottom: -2px;&#125;</code></p>\n</li>\n</ol>\n"},{"title":"Jquery笔记","abbrlink":"jquery-note","date":"2018-06-04T03:19:00.000Z","updated":"2018-06-04T03:43:00.000Z","_content":"\n### jquery获取json的长度\n\n``` \n//一维：\nvar JsonTemp = {'id':5,'name':'lilei'};  \nlength = JsonTemp.length;\n\n//二维：\nvar JsonTemp = [{\"name\":\"张三\",\"age\":18},{\"name\":\"李四\",\"age\":19}];  \nlength = Object.keys(JsonTemp).length;\n```\n","source":"_posts/HTML/JQuery/Jquery笔记.md","raw":"---\ntitle: Jquery笔记\ntags: [Jquery]\ncategories: [前端]\nabbrlink: 'jquery-note'\ndate: 2018-06-04 11:19:00\nupdated: 2018-06-04 11:43:00\n---\n\n### jquery获取json的长度\n\n``` \n//一维：\nvar JsonTemp = {'id':5,'name':'lilei'};  \nlength = JsonTemp.length;\n\n//二维：\nvar JsonTemp = [{\"name\":\"张三\",\"age\":18},{\"name\":\"李四\",\"age\":19}];  \nlength = Object.keys(JsonTemp).length;\n```\n","slug":"HTML/JQuery/Jquery笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ub004xoshg42ox7zgj","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"jquery获取json的长度\"><a href=\"#jquery获取json的长度\" class=\"headerlink\" title=\"jquery获取json的长度\"></a>jquery获取json的长度</h3><figure class=\"highlight arcade\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//一维：</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> JsonTemp = {<span class=\"string\">'id'</span>:<span class=\"number\">5</span>,<span class=\"string\">'name'</span>:<span class=\"string\">'lilei'</span>};  </span><br><span class=\"line\"><span class=\"built_in\">length</span> = JsonTemp.<span class=\"built_in\">length</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//二维：</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> JsonTemp = [{<span class=\"string\">\"name\"</span>:<span class=\"string\">\"张三\"</span>,<span class=\"string\">\"age\"</span>:<span class=\"number\">18</span>},{<span class=\"string\">\"name\"</span>:<span class=\"string\">\"李四\"</span>,<span class=\"string\">\"age\"</span>:<span class=\"number\">19</span>}];  </span><br><span class=\"line\"><span class=\"built_in\">length</span> = Object.keys(JsonTemp).<span class=\"built_in\">length</span>;</span><br></pre></td></tr></tbody></table></figure>\n","excerpt":"","more":"<h3 id=\"jquery获取json的长度\"><a href=\"#jquery获取json的长度\" class=\"headerlink\" title=\"jquery获取json的长度\"></a>jquery获取json的长度</h3><figure class=\"highlight arcade\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//一维：</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> JsonTemp = &#123;<span class=\"string\">&#x27;id&#x27;</span>:<span class=\"number\">5</span>,<span class=\"string\">&#x27;name&#x27;</span>:<span class=\"string\">&#x27;lilei&#x27;</span>&#125;;  </span><br><span class=\"line\"><span class=\"built_in\">length</span> = JsonTemp.<span class=\"built_in\">length</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//二维：</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> JsonTemp = [&#123;<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;张三&quot;</span>,<span class=\"string\">&quot;age&quot;</span>:<span class=\"number\">18</span>&#125;,&#123;<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;李四&quot;</span>,<span class=\"string\">&quot;age&quot;</span>:<span class=\"number\">19</span>&#125;];  </span><br><span class=\"line\"><span class=\"built_in\">length</span> = Object.keys(JsonTemp).<span class=\"built_in\">length</span>;</span><br></pre></td></tr></table></figure>\n"},{"title":"JQuery面向对象写法","abbrlink":"jquery-obj","date":"2018-04-19T01:52:00.000Z","updated":"2018-04-19T01:52:00.000Z","_content":"书写Jquery代码时，普通的面向过程的写法可以实现功能，但不利于后期维护。现介绍面向对象的写法。\n\n\n```\n<html>\n    <head>\n        <script src=\"jquery.min.js\"></script>\n    </head>\n    <body>\n        <button data-event=\"list\">列表</button>\n        <button data-event=\"search\" data-name=\"大班\">搜索</button>\n        <button data-event=\"add\">添加</button>\n        <button data-event=\"update\">修改</button>\n        <button data-event=\"del\">删除</button>\n    </body>\n</html>\n```\n\n```\n<script>\nvar clickAct = {\n\tbtn: $('button'),\n\tinit: function(){\n\t\tvar that = this;\n\t\tthis.btn.click(function(){\n\t\t\tvar func = $(this).attr('data-event');\n\t\t\tthat[func]($(this).attr('data-name'));\n\t\t})\n\t},\n\t\n\tlist: function(param){\n\t\tconsole.log('1');\n\t},\n\t\n\tsearch: function(param){\n\t\tconsole.log(param);\n\t\t\n\t},\n\t\n\tadd: function(param){\n\t\tconsole.log('3');\n\t},\n\t\n\tupdate: function(param){\n\t\tconsole.log('4');\n\t},\n\t\n\tdel: function(param){\n\t\tconsole.log('5');\n\t}\n}\n\nclickAct.init();\n</script>\n```\n","source":"_posts/HTML/JQuery/JQuery面向对象写法.md","raw":"---\ntitle: JQuery面向对象写法\ntags: [JQuery]\ncategories: [前端]\nabbrlink: 'jquery-obj'\ndate: 2018-04-19 09:52:00\nupdated: 2018-04-19 09:52:00\n---\n书写Jquery代码时，普通的面向过程的写法可以实现功能，但不利于后期维护。现介绍面向对象的写法。\n\n\n```\n<html>\n    <head>\n        <script src=\"jquery.min.js\"></script>\n    </head>\n    <body>\n        <button data-event=\"list\">列表</button>\n        <button data-event=\"search\" data-name=\"大班\">搜索</button>\n        <button data-event=\"add\">添加</button>\n        <button data-event=\"update\">修改</button>\n        <button data-event=\"del\">删除</button>\n    </body>\n</html>\n```\n\n```\n<script>\nvar clickAct = {\n\tbtn: $('button'),\n\tinit: function(){\n\t\tvar that = this;\n\t\tthis.btn.click(function(){\n\t\t\tvar func = $(this).attr('data-event');\n\t\t\tthat[func]($(this).attr('data-name'));\n\t\t})\n\t},\n\t\n\tlist: function(param){\n\t\tconsole.log('1');\n\t},\n\t\n\tsearch: function(param){\n\t\tconsole.log(param);\n\t\t\n\t},\n\t\n\tadd: function(param){\n\t\tconsole.log('3');\n\t},\n\t\n\tupdate: function(param){\n\t\tconsole.log('4');\n\t},\n\t\n\tdel: function(param){\n\t\tconsole.log('5');\n\t}\n}\n\nclickAct.init();\n</script>\n```\n","slug":"HTML/JQuery/JQuery面向对象写法","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ub0050oshgeloz7qnr","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>书写Jquery代码时，普通的面向过程的写法可以实现功能，但不利于后期维护。现介绍面向对象的写法。</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"jquery.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-event</span>=<span class=\"string\">\"list\"</span>&gt;</span>列表<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-event</span>=<span class=\"string\">\"search\"</span> <span class=\"attr\">data-name</span>=<span class=\"string\">\"大班\"</span>&gt;</span>搜索<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-event</span>=<span class=\"string\">\"add\"</span>&gt;</span>添加<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-event</span>=<span class=\"string\">\"update\"</span>&gt;</span>修改<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-event</span>=<span class=\"string\">\"del\"</span>&gt;</span>删除<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">var</span> clickAct = {</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">btn</span>: $(<span class=\"string\">'button'</span>),</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">init</span>: <span class=\"keyword\">function</span>(<span class=\"params\"></span>){</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"keyword\">var</span> that = <span class=\"variable language_\">this</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">this</span>.<span class=\"property\">btn</span>.<span class=\"title function_\">click</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>){</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t\t<span class=\"keyword\">var</span> func = $(<span class=\"variable language_\">this</span>).<span class=\"title function_\">attr</span>(<span class=\"string\">'data-event'</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t\tthat[func]($(<span class=\"variable language_\">this</span>).<span class=\"title function_\">attr</span>(<span class=\"string\">'data-name'</span>));</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t})</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t},</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">list</span>: <span class=\"keyword\">function</span>(<span class=\"params\">param</span>){</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">'1'</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t},</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">search</span>: <span class=\"keyword\">function</span>(<span class=\"params\">param</span>){</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(param);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t},</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">add</span>: <span class=\"keyword\">function</span>(<span class=\"params\">param</span>){</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">'3'</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t},</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">update</span>: <span class=\"keyword\">function</span>(<span class=\"params\">param</span>){</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">'4'</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t},</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">del</span>: <span class=\"keyword\">function</span>(<span class=\"params\">param</span>){</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">'5'</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t}</span></span><br><span class=\"line\"><span class=\"language-javascript\">}</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">clickAct.<span class=\"title function_\">init</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n","excerpt":"","more":"<p>书写Jquery代码时，普通的面向过程的写法可以实现功能，但不利于后期维护。现介绍面向对象的写法。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;jquery.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-event</span>=<span class=\"string\">&quot;list&quot;</span>&gt;</span>列表<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-event</span>=<span class=\"string\">&quot;search&quot;</span> <span class=\"attr\">data-name</span>=<span class=\"string\">&quot;大班&quot;</span>&gt;</span>搜索<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-event</span>=<span class=\"string\">&quot;add&quot;</span>&gt;</span>添加<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-event</span>=<span class=\"string\">&quot;update&quot;</span>&gt;</span>修改<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-event</span>=<span class=\"string\">&quot;del&quot;</span>&gt;</span>删除<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">var</span> clickAct = &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">btn</span>: $(<span class=\"string\">&#x27;button&#x27;</span>),</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">init</span>: <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"keyword\">var</span> that = <span class=\"variable language_\">this</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">this</span>.<span class=\"property\">btn</span>.<span class=\"title function_\">click</span>(<span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t\t<span class=\"keyword\">var</span> func = $(<span class=\"variable language_\">this</span>).<span class=\"title function_\">attr</span>(<span class=\"string\">&#x27;data-event&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t\tthat[func]($(<span class=\"variable language_\">this</span>).<span class=\"title function_\">attr</span>(<span class=\"string\">&#x27;data-name&#x27;</span>));</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t&#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t&#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">list</span>: <span class=\"keyword\">function</span>(<span class=\"params\">param</span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;1&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t&#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">search</span>: <span class=\"keyword\">function</span>(<span class=\"params\">param</span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(param);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t&#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">add</span>: <span class=\"keyword\">function</span>(<span class=\"params\">param</span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;3&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t&#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">update</span>: <span class=\"keyword\">function</span>(<span class=\"params\">param</span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;4&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t&#125;,</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"attr\">del</span>: <span class=\"keyword\">function</span>(<span class=\"params\">param</span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;5&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">\t&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">clickAct.<span class=\"title function_\">init</span>();</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"JS点击复制指定内容","abbrlink":"js-copy-object","date":"2019-07-02T11:41:00.000Z","updated":"2019-07-02T11:45:00.000Z","_content":"点击按钮，复制指定文本框内容，代码如下：\n\n``` \n<script type=\"text/javascript\">\nfunction copy(){\n    var str = document.getElementById(\"my-data\");\n    str.select(); // 选择对象\n    document.execCommand(\"Copy\"); // 执行浏览器复制命令\n    alert(\"复制成功！\");\n}\n</script>\n\n<textarea cols=\"20\" rows=\"10\" id=\"my-data\">我的测试内容</textarea>\n<input type=\"button\" onClick=\"copy();\" value=\"复制\" />\n```\n","source":"_posts/HTML/JS/JS点击复制指定内容.md","raw":"---\ntitle: JS点击复制指定内容\ntags: [JavaScript]\ncategories: [前端]\nabbrlink: 'js-copy-object'\ndate: 2019-07-02 19:41:00\nupdated: 2019-07-02 19:45:00\n---\n点击按钮，复制指定文本框内容，代码如下：\n\n``` \n<script type=\"text/javascript\">\nfunction copy(){\n    var str = document.getElementById(\"my-data\");\n    str.select(); // 选择对象\n    document.execCommand(\"Copy\"); // 执行浏览器复制命令\n    alert(\"复制成功！\");\n}\n</script>\n\n<textarea cols=\"20\" rows=\"10\" id=\"my-data\">我的测试内容</textarea>\n<input type=\"button\" onClick=\"copy();\" value=\"复制\" />\n```\n","slug":"HTML/JS/JS点击复制指定内容","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uc0054oshg7mav9lt6","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>点击按钮，复制指定文本框内容，代码如下：</p>\n<figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">copy</span>(<span class=\"params\"></span>){</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">var</span> str = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">\"my-data\"</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    str.<span class=\"title function_\">select</span>(); <span class=\"comment\">// 选择对象</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">execCommand</span>(<span class=\"string\">\"Copy\"</span>); <span class=\"comment\">// 执行浏览器复制命令</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">alert</span>(<span class=\"string\">\"复制成功！\"</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">}</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">textarea</span> <span class=\"attr\">cols</span>=<span class=\"string\">\"20\"</span> <span class=\"attr\">rows</span>=<span class=\"string\">\"10\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"my-data\"</span>&gt;</span>我的测试内容<span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span> <span class=\"attr\">onClick</span>=<span class=\"string\">\"copy();\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"复制\"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure>\n","excerpt":"","more":"<p>点击按钮，复制指定文本框内容，代码如下：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">copy</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">var</span> str = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;my-data&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    str.<span class=\"title function_\">select</span>(); <span class=\"comment\">// 选择对象</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">execCommand</span>(<span class=\"string\">&quot;Copy&quot;</span>); <span class=\"comment\">// 执行浏览器复制命令</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"title function_\">alert</span>(<span class=\"string\">&quot;复制成功！&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">textarea</span> <span class=\"attr\">cols</span>=<span class=\"string\">&quot;20&quot;</span> <span class=\"attr\">rows</span>=<span class=\"string\">&quot;10&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;my-data&quot;</span>&gt;</span>我的测试内容<span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;button&quot;</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&quot;copy();&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;复制&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n"},{"title":"JavaScript笔记","abbrlink":"javascript-notes","date":"2018-06-19T14:39:00.000Z","updated":"2018-11-09T01:49:00.000Z","_content":"\n### 如果想获取ajax里的function返回值，可用同步ajax。\n\n### JavaScript不定参数\n``` html\n    <html>\n    <head>\n    <title>JavaScript不定参数</title>\n    <script type=\"text/javascript\">\n     \n    function test(){\n        console.log(arguments);\n        for( var i = 0; i < arguments.length; i++ ){\n            console.log(arguments[i]);\n        }\n    }\n     \n    </script>\n    </head>\n    <body onload=\"test('one','two','three','four');\">\n    </body>\n    </html>\n```","source":"_posts/HTML/JS/JavaScript笔记.md","raw":"---\ntitle: JavaScript笔记\ntags: [JavaScript]\ncategories: [前端]\nabbrlink: 'javascript-notes'\ndate: 2018-06-19 22:39:00\nupdated: 2018-11-09 09:49:00\n---\n\n### 如果想获取ajax里的function返回值，可用同步ajax。\n\n### JavaScript不定参数\n``` html\n    <html>\n    <head>\n    <title>JavaScript不定参数</title>\n    <script type=\"text/javascript\">\n     \n    function test(){\n        console.log(arguments);\n        for( var i = 0; i < arguments.length; i++ ){\n            console.log(arguments[i]);\n        }\n    }\n     \n    </script>\n    </head>\n    <body onload=\"test('one','two','three','four');\">\n    </body>\n    </html>\n```","slug":"HTML/JS/JavaScript笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ud0056oshgbvte1ihn","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"如果想获取ajax里的function返回值，可用同步ajax。\"><a href=\"#如果想获取ajax里的function返回值，可用同步ajax。\" class=\"headerlink\" title=\"如果想获取ajax里的function返回值，可用同步ajax。\"></a>如果想获取ajax里的function返回值，可用同步ajax。</h3><h3 id=\"JavaScript不定参数\"><a href=\"#JavaScript不定参数\" class=\"headerlink\" title=\"JavaScript不定参数\"></a>JavaScript不定参数</h3><figure class=\"highlight html\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>JavaScript不定参数<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">test</span>(<span class=\"params\"></span>){</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">arguments</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">for</span>( <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"variable language_\">arguments</span>.<span class=\"property\">length</span>; i++ ){</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">arguments</span>[i]);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    }</span></span><br><span class=\"line\"><span class=\"language-javascript\">}</span></span><br><span class=\"line\"><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">onload</span>=<span class=\"string\">\"test('one','two','three','four');\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>","excerpt":"","more":"<h3 id=\"如果想获取ajax里的function返回值，可用同步ajax。\"><a href=\"#如果想获取ajax里的function返回值，可用同步ajax。\" class=\"headerlink\" title=\"如果想获取ajax里的function返回值，可用同步ajax。\"></a>如果想获取ajax里的function返回值，可用同步ajax。</h3><h3 id=\"JavaScript不定参数\"><a href=\"#JavaScript不定参数\" class=\"headerlink\" title=\"JavaScript不定参数\"></a>JavaScript不定参数</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>JavaScript不定参数<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">function</span> <span class=\"title function_\">test</span>(<span class=\"params\"></span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">arguments</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">for</span>( <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"variable language_\">arguments</span>.<span class=\"property\">length</span>; i++ )&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">arguments</span>[i]);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\"> </span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span> <span class=\"attr\">onload</span>=<span class=\"string\">&quot;test(&#x27;one&#x27;,&#x27;two&#x27;,&#x27;three&#x27;,&#x27;four&#x27;);&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"title":"利用JQuery进行md5加密","abbrlink":"jquery-md5","date":"2016-07-02T03:12:00.000Z","updated":"2016-07-02T03:12:00.000Z","_content":"\n在开发中，有时候需要前端将数据加密后传给后端，下面介绍下jquery md5加密：\n\n先引入[md5.min.js](/codes/md5.min.js)，再调用，代码如下：\n```\n<script src=\"md5.min.js\"></script>\n<script>\n\tvar str = document.getElementById('input').value;\n    console.log(md5(str));\n</script>\n```\n","source":"_posts/HTML/JQuery/利用JQuery进行md5加密.md","raw":"---\ntitle: 利用JQuery进行md5加密\ntags: [Jquery]\ncategories: [前端]\nabbrlink: 'jquery-md5'\ndate: 2016-07-02 11:12:00\nupdated: 2016-07-02 11:12:00\n---\n\n在开发中，有时候需要前端将数据加密后传给后端，下面介绍下jquery md5加密：\n\n先引入[md5.min.js](/codes/md5.min.js)，再调用，代码如下：\n```\n<script src=\"md5.min.js\"></script>\n<script>\n\tvar str = document.getElementById('input').value;\n    console.log(md5(str));\n</script>\n```\n","slug":"HTML/JQuery/利用JQuery进行md5加密","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ud0059oshgfk4ahrql","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>在开发中，有时候需要前端将数据加密后传给后端，下面介绍下jquery md5加密：</p>\n<p>先引入<a href=\"/codes/md5.min.js\">md5.min.js</a>，再调用，代码如下：<br></p><figure class=\"highlight xml\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"md5.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"keyword\">var</span> str = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">'input'</span>).<span class=\"property\">value</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">md5</span>(str));</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p></p>\n","excerpt":"","more":"<p>在开发中，有时候需要前端将数据加密后传给后端，下面介绍下jquery md5加密：</p>\n<p>先引入<a href=\"/codes/md5.min.js\">md5.min.js</a>，再调用，代码如下：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;md5.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t<span class=\"keyword\">var</span> str = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;input&#x27;</span>).<span class=\"property\">value</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">md5</span>(str));</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>\n"},{"title":"Html网页内容转为pdf文件","abbrlink":"html-to-pdf","date":"2021-09-26T07:12:00.000Z","updated":"2021-09-26T07:12:00.000Z","_content":"\n### 使用wkhtmltopdf\n软件下载地址：https://wkhtmltopdf.org/downloads.html，需翻墙\n- windows下使用\n下载并安装\ncmd命令行执行示例：\n`wkhtmltopdf\\bin\\wkhtmltopdf.exe https://crazy-boy.com/xx.html F:/b.pdf`\n  页面地址中不能含有&等特殊符号\n  \n### 参考文档\nhttps://www.cnblogs.com/see7di/p/3781864.html","source":"_posts/HTML/其它/Html网页内容转为pdf文件.md","raw":"---\ntitle: Html网页内容转为pdf文件\ntags: [HTML]\ncategories: [HTML]\nabbrlink: 'html-to-pdf'\ndate: 2021-09-26 15:12:00\nupdated: 2021-09-26 15:12:00\n---\n\n### 使用wkhtmltopdf\n软件下载地址：https://wkhtmltopdf.org/downloads.html，需翻墙\n- windows下使用\n下载并安装\ncmd命令行执行示例：\n`wkhtmltopdf\\bin\\wkhtmltopdf.exe https://crazy-boy.com/xx.html F:/b.pdf`\n  页面地址中不能含有&等特殊符号\n  \n### 参考文档\nhttps://www.cnblogs.com/see7di/p/3781864.html","slug":"HTML/其它/Html网页内容转为pdf文件","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ue005coshgg8c600gi","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"使用wkhtmltopdf\"><a href=\"#使用wkhtmltopdf\" class=\"headerlink\" title=\"使用wkhtmltopdf\"></a>使用wkhtmltopdf</h3><p>软件下载地址：<a href=\"https://wkhtmltopdf.org/downloads.html，需翻墙\">https://wkhtmltopdf.org/downloads.html，需翻墙</a></p>\n<ul>\n<li>windows下使用<br>下载并安装<br>cmd命令行执行示例：<br><code>wkhtmltopdf\\bin\\wkhtmltopdf.exe https://crazy-boy.com/xx.html F:/b.pdf</code><br>页面地址中不能含有&amp;等特殊符号</li>\n</ul>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p><a href=\"https://www.cnblogs.com/see7di/p/3781864.html\">https://www.cnblogs.com/see7di/p/3781864.html</a></p>\n","excerpt":"","more":"<h3 id=\"使用wkhtmltopdf\"><a href=\"#使用wkhtmltopdf\" class=\"headerlink\" title=\"使用wkhtmltopdf\"></a>使用wkhtmltopdf</h3><p>软件下载地址：<a href=\"https://wkhtmltopdf.org/downloads.html，需翻墙\">https://wkhtmltopdf.org/downloads.html，需翻墙</a></p>\n<ul>\n<li>windows下使用<br>下载并安装<br>cmd命令行执行示例：<br><code>wkhtmltopdf\\bin\\wkhtmltopdf.exe https://crazy-boy.com/xx.html F:/b.pdf</code><br>页面地址中不能含有&amp;等特殊符号</li>\n</ul>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p><a href=\"https://www.cnblogs.com/see7di/p/3781864.html\">https://www.cnblogs.com/see7di/p/3781864.html</a></p>\n"},{"title":"富文本编辑器","abbrlink":"rich-text-editor","date":"2018-06-04T05:36:00.000Z","updated":"2018-06-04T05:36:00.000Z","_content":"\n1. 解决umeditor富文本内容居中可能失效的问题：更改umeditor.config.js的xss过滤为false\t\n\t\t即：`,xssFilterRules: false,inputXssFilter: false,outputXssFilter: false`\n","source":"_posts/HTML/其它/富文本编辑器.md","raw":"---\ntitle: 富文本编辑器\ntags: [富文本编辑器]\ncategories: [第三方]\nabbrlink: 'rich-text-editor'\ndate: 2018-06-04 13:36:00\nupdated: 2018-06-04 13:36:00\n---\n\n1. 解决umeditor富文本内容居中可能失效的问题：更改umeditor.config.js的xss过滤为false\t\n\t\t即：`,xssFilterRules: false,inputXssFilter: false,outputXssFilter: false`\n","slug":"HTML/其它/富文本编辑器","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uj005doshg5f95hwjv","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li>解决umeditor富文本内容居中可能失效的问题：更改umeditor.config.js的xss过滤为false    <pre><code> 即：`,xssFilterRules: false,inputXssFilter: false,outputXssFilter: false`\n</code></pre></li>\n</ol>\n","excerpt":"","more":"<ol>\n<li>解决umeditor富文本内容居中可能失效的问题：更改umeditor.config.js的xss过滤为false    <pre><code> 即：`,xssFilterRules: false,inputXssFilter: false,outputXssFilter: false`\n</code></pre></li>\n</ol>\n"},{"title":"跨域问题","abbrlink":"cross-domain","date":"2022-02-22T13:51:19.000Z","updated":"2022-02-22T13:51:19.000Z","_content":"\n\n### 存在原因\n浏览器的同源策略，一个源表示协议、端口、域名都相同，否则就形成跨域。\n![](/images/cross_domain_1.png)\n\n### 解决办法\n  A. 服务器响应头：header(\"Access-Control-Allow-Origin:*\");\n  B. iframe实现跨域 \n  C. jsonp  带有 src属性的标签(&lt;script&gt;/&lt;img&gt;/&lt;iframe&gt;)不受同源策略限制","source":"_posts/HTML/其它/跨域问题.md","raw":"---\ntitle: 跨域问题\ntags: [跨域]\ncategories: [前端]\nabbrlink: 'cross-domain'\ndate: 2022-02-22 21:51:19\nupdated: 2022-02-22 21:51:19\n---\n\n\n### 存在原因\n浏览器的同源策略，一个源表示协议、端口、域名都相同，否则就形成跨域。\n![](/images/cross_domain_1.png)\n\n### 解决办法\n  A. 服务器响应头：header(\"Access-Control-Allow-Origin:*\");\n  B. iframe实现跨域 \n  C. jsonp  带有 src属性的标签(&lt;script&gt;/&lt;img&gt;/&lt;iframe&gt;)不受同源策略限制","slug":"HTML/其它/跨域问题","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uk005ioshg9cr779n7","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"存在原因\"><a href=\"#存在原因\" class=\"headerlink\" title=\"存在原因\"></a>存在原因</h3><p>浏览器的同源策略，一个源表示协议、端口、域名都相同，否则就形成跨域。<br><img src=\"/images/cross_domain_1.png\" alt=\"\"></p>\n<h3 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h3><p>  A. 服务器响应头：header(“Access-Control-Allow-Origin:*”);<br>  B. iframe实现跨域<br>  C. jsonp  带有 src属性的标签(&lt;script&gt;/&lt;img&gt;/&lt;iframe&gt;)不受同源策略限制</p>\n","excerpt":"","more":"<h3 id=\"存在原因\"><a href=\"#存在原因\" class=\"headerlink\" title=\"存在原因\"></a>存在原因</h3><p>浏览器的同源策略，一个源表示协议、端口、域名都相同，否则就形成跨域。<br><img src=\"/images/cross_domain_1.png\" alt></p>\n<h3 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h3><p>  A. 服务器响应头：header(“Access-Control-Allow-Origin:*”);<br>  B. iframe实现跨域<br>  C. jsonp  带有 src属性的标签(&lt;script&gt;/&lt;img&gt;/&lt;iframe&gt;)不受同源策略限制</p>\n"},{"title":"常见颜色值","abbrlink":"normal-rgb","date":"2022-02-25T14:06:16.000Z","updated":"2022-02-25T14:06:16.000Z","_content":"\nRGB(255,255,255)：白色   #FFFFFF\nRGB(0,0,0)：黑色  #000000\nRGB(255,0,0)：红色  #FF0000\n","source":"_posts/HTML/其它/常见颜色值.md","raw":"---\ntitle: 常见颜色值\ntags: [前端]\ncategories: [前端]\nabbrlink: 'normal-rgb'\ndate: 2022-02-25 22:06:16\nupdated: 2022-02-25 22:06:16\n---\n\nRGB(255,255,255)：白色   #FFFFFF\nRGB(0,0,0)：黑色  #000000\nRGB(255,0,0)：红色  #FF0000\n","slug":"HTML/其它/常见颜色值","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ul005joshgdgpkhoy5","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>RGB(255,255,255)：白色   #FFFFFF<br>RGB(0,0,0)：黑色  #000000<br>RGB(255,0,0)：红色  #FF0000</p>\n","excerpt":"","more":"<p>RGB(255,255,255)：白色   #FFFFFF<br>RGB(0,0,0)：黑色  #000000<br>RGB(255,0,0)：红色  #FF0000</p>\n"},{"title":"高德地图API使用","abbrlink":"amap-api","date":"2018-06-05T01:44:00.000Z","updated":"2018-06-05T06:07:00.000Z","_content":"\n1. 高德地图的覆盖物label默认是蓝框白底的，className为amap-marker-label，可以通过css来修改样式。如：\n    ``` bash\n    <style>\n        .amap-marker-label{\n            height:40px;\n            width:120px;\n            background-color: red;\n            border: solid 1px black;\n        }\n    </style>\n    ```\n\n2. 高德地图，根据地址搜索经纬度，再次搜索时清除遮盖物：\n    ``` bash\n    var markers = [];\t\n    map.remove(markers);\t\n    markers.push(marker);\n    ```\t","source":"_posts/HTML/其它/高德地图API使用.md","raw":"---\ntitle: 高德地图API使用\ntags: [高德地图]\ncategories: [第三方]\nabbrlink: 'amap-api'\ndate: 2018-06-05 09:44:00\nupdated: 2018-06-05 14:07:00\n---\n\n1. 高德地图的覆盖物label默认是蓝框白底的，className为amap-marker-label，可以通过css来修改样式。如：\n    ``` bash\n    <style>\n        .amap-marker-label{\n            height:40px;\n            width:120px;\n            background-color: red;\n            border: solid 1px black;\n        }\n    </style>\n    ```\n\n2. 高德地图，根据地址搜索经纬度，再次搜索时清除遮盖物：\n    ``` bash\n    var markers = [];\t\n    map.remove(markers);\t\n    markers.push(marker);\n    ```\t","slug":"HTML/其它/高德地图API使用","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ul005noshgd0f08ft2","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li><p>高德地图的覆盖物label默认是蓝框白底的，className为amap-marker-label，可以通过css来修改样式。如：</p>\n <figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">    .amap-marker-label{</span><br><span class=\"line\">        height:40px;</span><br><span class=\"line\">        width:120px;</span><br><span class=\"line\">        background-color: red;</span><br><span class=\"line\">        border: solid 1px black;</span><br><span class=\"line\">    }</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>高德地图，根据地址搜索经纬度，再次搜索时清除遮盖物：</p>\n <figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var markers = [];\t</span><br><span class=\"line\">map.remove(markers);\t</span><br><span class=\"line\">markers.push(marker);</span><br></pre></td></tr></tbody></table></figure></li>\n</ol>\n","excerpt":"","more":"<ol>\n<li><p>高德地图的覆盖物label默认是蓝框白底的，className为amap-marker-label，可以通过css来修改样式。如：</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">    .amap-marker-label&#123;</span><br><span class=\"line\">        height:40px;</span><br><span class=\"line\">        width:120px;</span><br><span class=\"line\">        background-color: red;</span><br><span class=\"line\">        border: solid 1px black;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>高德地图，根据地址搜索经纬度，再次搜索时清除遮盖物：</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var markers = [];\t</span><br><span class=\"line\">map.remove(markers);\t</span><br><span class=\"line\">markers.push(marker);</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"ThinkPHP5 中clone Query对象","abbrlink":"thinkphp-clone-query","date":"2022-04-26T13:18:26.000Z","updated":"2022-04-26T13:18:26.000Z","_content":"当我们在给前端提供列表接口的时候，经常需要根据条件返回总条数和当页列表数据；这时，我们就需要复用共同的查询条件对数据库执行多次查询操作。\n\n在Yii2里，可以通过clone处理：\n```php\n$query = Post::find()->where(['status'=>1]);\n$query->andFilterWhere(['name'=>$kw]);\n$count = (clone $query)->count();\n$list = $query->limit(20)->offset(0)->orderBy(['id'=>SORT_DESC])->all()->asArray();\n```\n在thinkphp5中，使用如下代码进行clone，会存在问题，提示：`SQLSTATE[HY000]: General error: 2031`\n```php\n$offset = ($page - 1) * $pageSize;\n$query = Db::name('artist_bill')->where(['month' => $month]);\n$count = (clone $query)->count();\n$list = $query->field('id,title,month')\n    ->limit($offset, $pageSize)\n    ->order(['id' => SORT_DESC])\n    ->select();\n```\n- 如果把第3行改为：$count = $query->count();  第一个查询正常，之后的查询没有任何where条件；这是因为query执行完成后会把查询条件清空。\n- 如果使用clone，打印处理的sql如下：\n```sql\nselect count(*) from t_artist_bill where `month` = :where_AND_month;\n```\n初步认为是参数没有绑定上去。应该也是query内部引用了一个对象，对象在clone之后与原有对象是一个地址引用。通过一步一步断点输出，确认在$this->builder->select($options);之后获得了bind数据。因此只需要解绑clone前后对象的builder属性即可完成query对象的复制。查看query对象的属性，只有builder,connection是对象，但是connection我们希望在整个请求中是一个单实例，所以没必要区分。\n最终修改,新建query子类，添加__clone方法,指定clone后对新对象执行php $this->setBuilder();保证 clone之后的builder是一个新实例。\n这样就可以正常使用clone了。\n\n另一种处理方式是把where条件提取出来共用：\n```php\npublic static function getList(?string $month, int $page, int $pageSize): array{\n    $offset = ($page - 1) * $pageSize;\n\n    $where = [];\n    if (!empty($month)) {\n        $where['month'] = $month;\n    }\n    $query = Db::name('artist_bill');\n    $count = $query->where($where)->count('id');\n\n    $list = $query->where($where)->field('id,title,month')\n        ->limit($offset, $pageSize)\n        ->order(['id' => SORT_DESC])\n        ->select();\n\n    return ['count' => $count, 'list' => $list];\n}\n```\n","source":"_posts/PHP/ThinkPHP/ThinkPHP5 中clone Query对象.md","raw":"---\ntitle: ThinkPHP5 中clone Query对象\ntags: [ThinkPHP]\ncategories: [PHP]\nabbrlink: 'thinkphp-clone-query'\ndate: 2022-04-26 21:18:26\nupdated: 2022-04-26 21:18:26\n---\n当我们在给前端提供列表接口的时候，经常需要根据条件返回总条数和当页列表数据；这时，我们就需要复用共同的查询条件对数据库执行多次查询操作。\n\n在Yii2里，可以通过clone处理：\n```php\n$query = Post::find()->where(['status'=>1]);\n$query->andFilterWhere(['name'=>$kw]);\n$count = (clone $query)->count();\n$list = $query->limit(20)->offset(0)->orderBy(['id'=>SORT_DESC])->all()->asArray();\n```\n在thinkphp5中，使用如下代码进行clone，会存在问题，提示：`SQLSTATE[HY000]: General error: 2031`\n```php\n$offset = ($page - 1) * $pageSize;\n$query = Db::name('artist_bill')->where(['month' => $month]);\n$count = (clone $query)->count();\n$list = $query->field('id,title,month')\n    ->limit($offset, $pageSize)\n    ->order(['id' => SORT_DESC])\n    ->select();\n```\n- 如果把第3行改为：$count = $query->count();  第一个查询正常，之后的查询没有任何where条件；这是因为query执行完成后会把查询条件清空。\n- 如果使用clone，打印处理的sql如下：\n```sql\nselect count(*) from t_artist_bill where `month` = :where_AND_month;\n```\n初步认为是参数没有绑定上去。应该也是query内部引用了一个对象，对象在clone之后与原有对象是一个地址引用。通过一步一步断点输出，确认在$this->builder->select($options);之后获得了bind数据。因此只需要解绑clone前后对象的builder属性即可完成query对象的复制。查看query对象的属性，只有builder,connection是对象，但是connection我们希望在整个请求中是一个单实例，所以没必要区分。\n最终修改,新建query子类，添加__clone方法,指定clone后对新对象执行php $this->setBuilder();保证 clone之后的builder是一个新实例。\n这样就可以正常使用clone了。\n\n另一种处理方式是把where条件提取出来共用：\n```php\npublic static function getList(?string $month, int $page, int $pageSize): array{\n    $offset = ($page - 1) * $pageSize;\n\n    $where = [];\n    if (!empty($month)) {\n        $where['month'] = $month;\n    }\n    $query = Db::name('artist_bill');\n    $count = $query->where($where)->count('id');\n\n    $list = $query->where($where)->field('id,title,month')\n        ->limit($offset, $pageSize)\n        ->order(['id' => SORT_DESC])\n        ->select();\n\n    return ['count' => $count, 'list' => $list];\n}\n```\n","slug":"PHP/ThinkPHP/ThinkPHP5 中clone Query对象","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2um005poshgakk9erj1","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>当我们在给前端提供列表接口的时候，经常需要根据条件返回总条数和当页列表数据；这时，我们就需要复用共同的查询条件对数据库执行多次查询操作。</p>\n<p>在Yii2里，可以通过clone处理：<br></p><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$query</span> = <span class=\"title class_\">Post</span>::<span class=\"title function_ invoke__\">find</span>()-&gt;<span class=\"title function_ invoke__\">where</span>([<span class=\"string\">'status'</span>=&gt;<span class=\"number\">1</span>]);</span><br><span class=\"line\"><span class=\"variable\">$query</span>-&gt;<span class=\"title function_ invoke__\">andFilterWhere</span>([<span class=\"string\">'name'</span>=&gt;<span class=\"variable\">$kw</span>]);</span><br><span class=\"line\"><span class=\"variable\">$count</span> = (<span class=\"keyword\">clone</span> <span class=\"variable\">$query</span>)-&gt;<span class=\"title function_ invoke__\">count</span>();</span><br><span class=\"line\"><span class=\"variable\">$list</span> = <span class=\"variable\">$query</span>-&gt;<span class=\"title function_ invoke__\">limit</span>(<span class=\"number\">20</span>)-&gt;<span class=\"title function_ invoke__\">offset</span>(<span class=\"number\">0</span>)-&gt;<span class=\"title function_ invoke__\">orderBy</span>([<span class=\"string\">'id'</span>=&gt;SORT_DESC])-&gt;<span class=\"title function_ invoke__\">all</span>()-&gt;<span class=\"title function_ invoke__\">asArray</span>();</span><br></pre></td></tr></tbody></table></figure><br>在thinkphp5中，使用如下代码进行clone，会存在问题，提示：<code>SQLSTATE[HY000]: General error: 2031</code><br><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$offset</span> = (<span class=\"variable\">$page</span> - <span class=\"number\">1</span>) * <span class=\"variable\">$pageSize</span>;</span><br><span class=\"line\"><span class=\"variable\">$query</span> = <span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">'artist_bill'</span>)-&gt;<span class=\"title function_ invoke__\">where</span>([<span class=\"string\">'month'</span> =&gt; <span class=\"variable\">$month</span>]);</span><br><span class=\"line\"><span class=\"variable\">$count</span> = (<span class=\"keyword\">clone</span> <span class=\"variable\">$query</span>)-&gt;<span class=\"title function_ invoke__\">count</span>();</span><br><span class=\"line\"><span class=\"variable\">$list</span> = <span class=\"variable\">$query</span>-&gt;<span class=\"title function_ invoke__\">field</span>(<span class=\"string\">'id,title,month'</span>)</span><br><span class=\"line\">    -&gt;<span class=\"title function_ invoke__\">limit</span>(<span class=\"variable\">$offset</span>, <span class=\"variable\">$pageSize</span>)</span><br><span class=\"line\">    -&gt;<span class=\"title function_ invoke__\">order</span>([<span class=\"string\">'id'</span> =&gt; SORT_DESC])</span><br><span class=\"line\">    -&gt;<span class=\"title function_ invoke__\">select</span>();</span><br></pre></td></tr></tbody></table></figure><p></p>\n<ul>\n<li>如果把第3行改为：$count = $query-&gt;count();  第一个查询正常，之后的查询没有任何where条件；这是因为query执行完成后会把查询条件清空。</li>\n<li>如果使用clone，打印处理的sql如下：<figure class=\"highlight sql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> t_artist_bill <span class=\"keyword\">where</span> `<span class=\"keyword\">month</span>` <span class=\"operator\">=</span> :where_AND_month;</span><br></pre></td></tr></tbody></table></figure>\n初步认为是参数没有绑定上去。应该也是query内部引用了一个对象，对象在clone之后与原有对象是一个地址引用。通过一步一步断点输出，确认在$this-&gt;builder-&gt;select($options);之后获得了bind数据。因此只需要解绑clone前后对象的builder属性即可完成query对象的复制。查看query对象的属性，只有builder,connection是对象，但是connection我们希望在整个请求中是一个单实例，所以没必要区分。<br>最终修改,新建query子类，添加__clone方法,指定clone后对新对象执行php $this-&gt;setBuilder();保证 clone之后的builder是一个新实例。<br>这样就可以正常使用clone了。</li>\n</ul>\n<p>另一种处理方式是把where条件提取出来共用：<br></p><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getList</span>(<span class=\"params\">?<span class=\"keyword\">string</span> <span class=\"variable\">$month</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$page</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$pageSize</span></span>): <span class=\"title\">array</span></span>{</span><br><span class=\"line\">    <span class=\"variable\">$offset</span> = (<span class=\"variable\">$page</span> - <span class=\"number\">1</span>) * <span class=\"variable\">$pageSize</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$where</span> = [];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$month</span>)) {</span><br><span class=\"line\">        <span class=\"variable\">$where</span>[<span class=\"string\">'month'</span>] = <span class=\"variable\">$month</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"variable\">$query</span> = <span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">'artist_bill'</span>);</span><br><span class=\"line\">    <span class=\"variable\">$count</span> = <span class=\"variable\">$query</span>-&gt;<span class=\"title function_ invoke__\">where</span>(<span class=\"variable\">$where</span>)-&gt;<span class=\"title function_ invoke__\">count</span>(<span class=\"string\">'id'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$list</span> = <span class=\"variable\">$query</span>-&gt;<span class=\"title function_ invoke__\">where</span>(<span class=\"variable\">$where</span>)-&gt;<span class=\"title function_ invoke__\">field</span>(<span class=\"string\">'id,title,month'</span>)</span><br><span class=\"line\">        -&gt;<span class=\"title function_ invoke__\">limit</span>(<span class=\"variable\">$offset</span>, <span class=\"variable\">$pageSize</span>)</span><br><span class=\"line\">        -&gt;<span class=\"title function_ invoke__\">order</span>([<span class=\"string\">'id'</span> =&gt; SORT_DESC])</span><br><span class=\"line\">        -&gt;<span class=\"title function_ invoke__\">select</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> [<span class=\"string\">'count'</span> =&gt; <span class=\"variable\">$count</span>, <span class=\"string\">'list'</span> =&gt; <span class=\"variable\">$list</span>];</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure><p></p>\n","excerpt":"","more":"<p>当我们在给前端提供列表接口的时候，经常需要根据条件返回总条数和当页列表数据；这时，我们就需要复用共同的查询条件对数据库执行多次查询操作。</p>\n<p>在Yii2里，可以通过clone处理：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$query</span> = <span class=\"title class_\">Post</span>::<span class=\"title function_ invoke__\">find</span>()-&gt;<span class=\"title function_ invoke__\">where</span>([<span class=\"string\">&#x27;status&#x27;</span>=&gt;<span class=\"number\">1</span>]);</span><br><span class=\"line\"><span class=\"variable\">$query</span>-&gt;<span class=\"title function_ invoke__\">andFilterWhere</span>([<span class=\"string\">&#x27;name&#x27;</span>=&gt;<span class=\"variable\">$kw</span>]);</span><br><span class=\"line\"><span class=\"variable\">$count</span> = (<span class=\"keyword\">clone</span> <span class=\"variable\">$query</span>)-&gt;<span class=\"title function_ invoke__\">count</span>();</span><br><span class=\"line\"><span class=\"variable\">$list</span> = <span class=\"variable\">$query</span>-&gt;<span class=\"title function_ invoke__\">limit</span>(<span class=\"number\">20</span>)-&gt;<span class=\"title function_ invoke__\">offset</span>(<span class=\"number\">0</span>)-&gt;<span class=\"title function_ invoke__\">orderBy</span>([<span class=\"string\">&#x27;id&#x27;</span>=&gt;SORT_DESC])-&gt;<span class=\"title function_ invoke__\">all</span>()-&gt;<span class=\"title function_ invoke__\">asArray</span>();</span><br></pre></td></tr></table></figure><br>在thinkphp5中，使用如下代码进行clone，会存在问题，提示：<code>SQLSTATE[HY000]: General error: 2031</code><br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$offset</span> = (<span class=\"variable\">$page</span> - <span class=\"number\">1</span>) * <span class=\"variable\">$pageSize</span>;</span><br><span class=\"line\"><span class=\"variable\">$query</span> = <span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">&#x27;artist_bill&#x27;</span>)-&gt;<span class=\"title function_ invoke__\">where</span>([<span class=\"string\">&#x27;month&#x27;</span> =&gt; <span class=\"variable\">$month</span>]);</span><br><span class=\"line\"><span class=\"variable\">$count</span> = (<span class=\"keyword\">clone</span> <span class=\"variable\">$query</span>)-&gt;<span class=\"title function_ invoke__\">count</span>();</span><br><span class=\"line\"><span class=\"variable\">$list</span> = <span class=\"variable\">$query</span>-&gt;<span class=\"title function_ invoke__\">field</span>(<span class=\"string\">&#x27;id,title,month&#x27;</span>)</span><br><span class=\"line\">    -&gt;<span class=\"title function_ invoke__\">limit</span>(<span class=\"variable\">$offset</span>, <span class=\"variable\">$pageSize</span>)</span><br><span class=\"line\">    -&gt;<span class=\"title function_ invoke__\">order</span>([<span class=\"string\">&#x27;id&#x27;</span> =&gt; SORT_DESC])</span><br><span class=\"line\">    -&gt;<span class=\"title function_ invoke__\">select</span>();</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>如果把第3行改为：$count = $query-&gt;count();  第一个查询正常，之后的查询没有任何where条件；这是因为query执行完成后会把查询条件清空。</li>\n<li>如果使用clone，打印处理的sql如下：<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"built_in\">count</span>(<span class=\"operator\">*</span>) <span class=\"keyword\">from</span> t_artist_bill <span class=\"keyword\">where</span> `<span class=\"keyword\">month</span>` <span class=\"operator\">=</span> :where_AND_month;</span><br></pre></td></tr></table></figure>\n初步认为是参数没有绑定上去。应该也是query内部引用了一个对象，对象在clone之后与原有对象是一个地址引用。通过一步一步断点输出，确认在$this-&gt;builder-&gt;select($options);之后获得了bind数据。因此只需要解绑clone前后对象的builder属性即可完成query对象的复制。查看query对象的属性，只有builder,connection是对象，但是connection我们希望在整个请求中是一个单实例，所以没必要区分。<br>最终修改,新建query子类，添加__clone方法,指定clone后对新对象执行php $this-&gt;setBuilder();保证 clone之后的builder是一个新实例。<br>这样就可以正常使用clone了。</li>\n</ul>\n<p>另一种处理方式是把where条件提取出来共用：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getList</span>(<span class=\"params\">?<span class=\"keyword\">string</span> <span class=\"variable\">$month</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$page</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$pageSize</span></span>): <span class=\"title\">array</span></span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$offset</span> = (<span class=\"variable\">$page</span> - <span class=\"number\">1</span>) * <span class=\"variable\">$pageSize</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$where</span> = [];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">empty</span>(<span class=\"variable\">$month</span>)) &#123;</span><br><span class=\"line\">        <span class=\"variable\">$where</span>[<span class=\"string\">&#x27;month&#x27;</span>] = <span class=\"variable\">$month</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable\">$query</span> = <span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">&#x27;artist_bill&#x27;</span>);</span><br><span class=\"line\">    <span class=\"variable\">$count</span> = <span class=\"variable\">$query</span>-&gt;<span class=\"title function_ invoke__\">where</span>(<span class=\"variable\">$where</span>)-&gt;<span class=\"title function_ invoke__\">count</span>(<span class=\"string\">&#x27;id&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$list</span> = <span class=\"variable\">$query</span>-&gt;<span class=\"title function_ invoke__\">where</span>(<span class=\"variable\">$where</span>)-&gt;<span class=\"title function_ invoke__\">field</span>(<span class=\"string\">&#x27;id,title,month&#x27;</span>)</span><br><span class=\"line\">        -&gt;<span class=\"title function_ invoke__\">limit</span>(<span class=\"variable\">$offset</span>, <span class=\"variable\">$pageSize</span>)</span><br><span class=\"line\">        -&gt;<span class=\"title function_ invoke__\">order</span>([<span class=\"string\">&#x27;id&#x27;</span> =&gt; SORT_DESC])</span><br><span class=\"line\">        -&gt;<span class=\"title function_ invoke__\">select</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> [<span class=\"string\">&#x27;count&#x27;</span> =&gt; <span class=\"variable\">$count</span>, <span class=\"string\">&#x27;list&#x27;</span> =&gt; <span class=\"variable\">$list</span>];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"ThinkPHP5 中order的使用","abbrlink":"thinkphp-order","date":"2022-05-06T12:49:19.000Z","updated":"2022-05-06T12:49:19.000Z","_content":"之前一直在使用Yii2，在查询排序时习惯了使用 SORT_DESC | SORT_ASC，今天在使用的时候发现了问题，记录一下。\n下面这个查询没有得到预期的结果：\n``` \n    $list = Db::name('tb')->where(['status'=>1])->order(['create_time'=>SORT_DESC])->field('id,name')->select();\n   // 输出sql为：select id,name from tb where status=1 order by create_time;\n``` \n\n问题在于SORT_DESC=3、SORT_ASC=4，这不符合thinkphp中order方法的传参规则，\n可以这样使用：\n\n``` \n   order('id','desc')\n   order('id desc')\n   order(['id'=>'desc','create_time'=>'asc'])\n   order('id,create_time desc')\n``` \n","source":"_posts/PHP/ThinkPHP/ThinkPHP5 中order的使用.md","raw":"---\ntitle: ThinkPHP5 中order的使用\ntags: [ThinkPHP]\ncategories: [PHP]\nabbrlink: 'thinkphp-order'\ndate: 2022-05-06 20:49:19\nupdated: 2022-05-06 20:49:19\n---\n之前一直在使用Yii2，在查询排序时习惯了使用 SORT_DESC | SORT_ASC，今天在使用的时候发现了问题，记录一下。\n下面这个查询没有得到预期的结果：\n``` \n    $list = Db::name('tb')->where(['status'=>1])->order(['create_time'=>SORT_DESC])->field('id,name')->select();\n   // 输出sql为：select id,name from tb where status=1 order by create_time;\n``` \n\n问题在于SORT_DESC=3、SORT_ASC=4，这不符合thinkphp中order方法的传参规则，\n可以这样使用：\n\n``` \n   order('id','desc')\n   order('id desc')\n   order(['id'=>'desc','create_time'=>'asc'])\n   order('id,create_time desc')\n``` \n","slug":"PHP/ThinkPHP/ThinkPHP5 中order的使用","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2um005toshgb4ih7syk","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>之前一直在使用Yii2，在查询排序时习惯了使用 SORT_DESC | SORT_ASC，今天在使用的时候发现了问题，记录一下。<br>下面这个查询没有得到预期的结果：<br></p><figure class=\"highlight livescript\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> $<span class=\"keyword\">list</span> = Db::name<span class=\"function\"><span class=\"params\">(<span class=\"string\">'tb'</span>)</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">'status'</span>=&gt;<span class=\"number\">1</span>])</span>-&gt;</span>order<span class=\"function\"><span class=\"params\">([<span class=\"string\">'create_time'</span>=&gt;SORT_DESC])</span>-&gt;</span>field<span class=\"function\"><span class=\"params\">(<span class=\"string\">'id,name'</span>)</span>-&gt;</span>select();</span><br><span class=\"line\"><span class=\"regexp\">// 输出sql为：select id,name from tb where status=1 order by create_time;</span></span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>问题在于SORT_DESC=3、SORT_ASC=4，这不符合thinkphp中order方法的传参规则，<br>可以这样使用：</p>\n<figure class=\"highlight stylus\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">order</span><span class=\"params\">(<span class=\"string\">'id'</span>,<span class=\"string\">'desc'</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">order</span><span class=\"params\">(<span class=\"string\">'id desc'</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">order</span><span class=\"params\">([<span class=\"string\">'id'</span>=&gt;<span class=\"string\">'desc'</span>,<span class=\"string\">'create_time'</span>=&gt;<span class=\"string\">'asc'</span>])</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">order</span><span class=\"params\">(<span class=\"string\">'id,create_time desc'</span>)</span></span></span><br></pre></td></tr></tbody></table></figure>\n","excerpt":"","more":"<p>之前一直在使用Yii2，在查询排序时习惯了使用 SORT_DESC | SORT_ASC，今天在使用的时候发现了问题，记录一下。<br>下面这个查询没有得到预期的结果：<br><figure class=\"highlight livescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> $<span class=\"keyword\">list</span> = Db::name<span class=\"function\"><span class=\"params\">(<span class=\"string\">&#x27;tb&#x27;</span>)</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">&#x27;status&#x27;</span>=&gt;<span class=\"number\">1</span>])</span>-&gt;</span>order<span class=\"function\"><span class=\"params\">([<span class=\"string\">&#x27;create_time&#x27;</span>=&gt;SORT_DESC])</span>-&gt;</span>field<span class=\"function\"><span class=\"params\">(<span class=\"string\">&#x27;id,name&#x27;</span>)</span>-&gt;</span>select();</span><br><span class=\"line\"><span class=\"regexp\">// 输出sql为：select id,name from tb where status=1 order by create_time;</span></span><br></pre></td></tr></table></figure></p>\n<p>问题在于SORT_DESC=3、SORT_ASC=4，这不符合thinkphp中order方法的传参规则，<br>可以这样使用：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">order</span><span class=\"params\">(<span class=\"string\">&#x27;id&#x27;</span>,<span class=\"string\">&#x27;desc&#x27;</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">order</span><span class=\"params\">(<span class=\"string\">&#x27;id desc&#x27;</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">order</span><span class=\"params\">([<span class=\"string\">&#x27;id&#x27;</span>=&gt;<span class=\"string\">&#x27;desc&#x27;</span>,<span class=\"string\">&#x27;create_time&#x27;</span>=&gt;<span class=\"string\">&#x27;asc&#x27;</span>])</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">order</span><span class=\"params\">(<span class=\"string\">&#x27;id,create_time desc&#x27;</span>)</span></span></span><br></pre></td></tr></table></figure>\n"},{"title":"ThinkPHP5 中rule规则","abbrlink":"thinkphp-rule","date":"2022-05-31T13:49:19.000Z","updated":"2022-05-31T13:49:19.000Z","_content":"\nrule规则\n``` \nclass Item extends \\think\\Validate{\n\tprotected $rule = [\n\t\t['mobile|手机号', 'require|length:11', '手机号必填|手机号格式不正确'],\n\t\t…\n\t];\n\n\tprotected $scene = [\n\t\t'add'=>['mobile','name'…],\n\t\t…\n\t];\n\t\n}\n\n``` \n\n添加自定义校验\n``` \n$rule = [\n\t['anchor_id|关联账号', 'require|checkAnchor'],\n];\n\nprotected function checkAnchor($value){\n\t…\n\tif ($error = $server->getError()) {\n\t\textract($error);\n\t\t/**\n\t\t * @var $msg\n\t\t */\n\t\treturn $msg;\n\t}\n\treturn true;\n}\n``` \n","source":"_posts/PHP/ThinkPHP/ThinkPHP5 中rule规则.md","raw":"---\ntitle: ThinkPHP5 中rule规则\ntags: [ThinkPHP]\ncategories: [PHP]\nabbrlink: 'thinkphp-rule'\ndate: 2022-05-31 21:49:19\nupdated: 2022-05-31 21:49:19\n---\n\nrule规则\n``` \nclass Item extends \\think\\Validate{\n\tprotected $rule = [\n\t\t['mobile|手机号', 'require|length:11', '手机号必填|手机号格式不正确'],\n\t\t…\n\t];\n\n\tprotected $scene = [\n\t\t'add'=>['mobile','name'…],\n\t\t…\n\t];\n\t\n}\n\n``` \n\n添加自定义校验\n``` \n$rule = [\n\t['anchor_id|关联账号', 'require|checkAnchor'],\n];\n\nprotected function checkAnchor($value){\n\t…\n\tif ($error = $server->getError()) {\n\t\textract($error);\n\t\t/**\n\t\t * @var $msg\n\t\t */\n\t\treturn $msg;\n\t}\n\treturn true;\n}\n``` \n","slug":"PHP/ThinkPHP/ThinkPHP5 中rule规则","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2un005voshgawin5fz6","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>rule规则<br></p><figure class=\"highlight scala\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Item</span> <span class=\"keyword\">extends</span> <span class=\"title\">\\think\\Validate</span></span>{</span><br><span class=\"line\">\t<span class=\"keyword\">protected</span> $rule = [</span><br><span class=\"line\">\t\t['mobile|手机号', 'require|length:<span class=\"number\">11</span>', '手机号必填|手机号格式不正确'],</span><br><span class=\"line\">\t\t…</span><br><span class=\"line\">\t];</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">protected</span> $scene = [</span><br><span class=\"line\">\t\t'add'=&gt;['mobile','name'…],</span><br><span class=\"line\">\t\t…</span><br><span class=\"line\">\t];</span><br><span class=\"line\">\t</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>添加自定义校验<br></p><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$rule</span> = [</span><br><span class=\"line\">\t[<span class=\"string\">'anchor_id|关联账号'</span>, <span class=\"string\">'require|checkAnchor'</span>],</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkAnchor</span>(<span class=\"params\"><span class=\"variable\">$value</span></span>)</span>{</span><br><span class=\"line\">\t…</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$error</span> = <span class=\"variable\">$server</span>-&gt;<span class=\"title function_ invoke__\">getError</span>()) {</span><br><span class=\"line\">\t\t<span class=\"title function_ invoke__\">extract</span>(<span class=\"variable\">$error</span>);</span><br><span class=\"line\">\t\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t\t * <span class=\"doctag\">@var</span> $msg</span></span><br><span class=\"line\"><span class=\"comment\">\t\t */</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"variable\">$msg</span>;</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure><p></p>\n","excerpt":"","more":"<p>rule规则<br><figure class=\"highlight scala\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Item</span> <span class=\"keyword\">extends</span> <span class=\"title\">\\think\\Validate</span></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">protected</span> $rule = [</span><br><span class=\"line\">\t\t[&#x27;mobile|手机号&#x27;, &#x27;require|length:<span class=\"number\">11</span>&#x27;, &#x27;手机号必填|手机号格式不正确&#x27;],</span><br><span class=\"line\">\t\t…</span><br><span class=\"line\">\t];</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">protected</span> $scene = [</span><br><span class=\"line\">\t\t&#x27;add&#x27;=&gt;[&#x27;mobile&#x27;,&#x27;name&#x27;…],</span><br><span class=\"line\">\t\t…</span><br><span class=\"line\">\t];</span><br><span class=\"line\">\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<p>添加自定义校验<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$rule</span> = [</span><br><span class=\"line\">\t[<span class=\"string\">&#x27;anchor_id|关联账号&#x27;</span>, <span class=\"string\">&#x27;require|checkAnchor&#x27;</span>],</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkAnchor</span>(<span class=\"params\"><span class=\"variable\">$value</span></span>)</span>&#123;</span><br><span class=\"line\">\t…</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (<span class=\"variable\">$error</span> = <span class=\"variable\">$server</span>-&gt;<span class=\"title function_ invoke__\">getError</span>()) &#123;</span><br><span class=\"line\">\t\t<span class=\"title function_ invoke__\">extract</span>(<span class=\"variable\">$error</span>);</span><br><span class=\"line\">\t\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t\t * <span class=\"doctag\">@var</span> $msg</span></span><br><span class=\"line\"><span class=\"comment\">\t\t */</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"variable\">$msg</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"ThinkPHP5框架where条件中含有or的使用方法","abbrlink":"thinkphp-where","date":"2022-05-08T09:07:22.000Z","updated":"2022-05-08T09:07:22.000Z","_content":"\n### 1. 直接whereOr\n``` php\n    $list = Db::name('tb')->where(['status'=>1,'admin_id'=>5])->whereOr(['type'=>1,'step'=>2])->select();\n    // 生成的sql为：select * from `tb` where `status`=1 and `admin_id`=5 or (`type`=1 or `step`=2);\n``` \n\n### 2. 采用闭包的方式\n``` php\n    $map = ['status'=>1,'admin_id'=>5];\n    $orMap = ['type'=>1,'step'=>2];\n    $list = Db::name('tb')->where(function ($query) use ($map) {\n        $query->where($map);\n    })->whereOr(function ($query) use ($orMap) {\n        $query->where($orMap);\n    })->order('id desc')->select();\n    // 生成的sql为：select * from `tb` where (`status`=1 and `admin_id`=5) or (`type`=1 and `step`=2);\n``` \n一般来说，在复杂的查询里，我们更多的是使用第二种方式。","source":"_posts/PHP/ThinkPHP/ThinkPHP5框架where条件中含有or的使用方法.md","raw":"---\ntitle: ThinkPHP5框架where条件中含有or的使用方法\ntags: [ThinkPHP]\ncategories: [PHP]\nabbrlink: 'thinkphp-where'\ndate: 2022-05-08 17:07:22\nupdated: 2022-05-08 17:07:22\n---\n\n### 1. 直接whereOr\n``` php\n    $list = Db::name('tb')->where(['status'=>1,'admin_id'=>5])->whereOr(['type'=>1,'step'=>2])->select();\n    // 生成的sql为：select * from `tb` where `status`=1 and `admin_id`=5 or (`type`=1 or `step`=2);\n``` \n\n### 2. 采用闭包的方式\n``` php\n    $map = ['status'=>1,'admin_id'=>5];\n    $orMap = ['type'=>1,'step'=>2];\n    $list = Db::name('tb')->where(function ($query) use ($map) {\n        $query->where($map);\n    })->whereOr(function ($query) use ($orMap) {\n        $query->where($orMap);\n    })->order('id desc')->select();\n    // 生成的sql为：select * from `tb` where (`status`=1 and `admin_id`=5) or (`type`=1 and `step`=2);\n``` \n一般来说，在复杂的查询里，我们更多的是使用第二种方式。","slug":"PHP/ThinkPHP/ThinkPHP5框架where条件中含有or的使用方法","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uo005zoshg8dq882kd","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-直接whereOr\"><a href=\"#1-直接whereOr\" class=\"headerlink\" title=\"1. 直接whereOr\"></a>1. 直接whereOr</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$list</span> = <span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">'tb'</span>)-&gt;<span class=\"title function_ invoke__\">where</span>([<span class=\"string\">'status'</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">'admin_id'</span>=&gt;<span class=\"number\">5</span>])-&gt;<span class=\"title function_ invoke__\">whereOr</span>([<span class=\"string\">'type'</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">'step'</span>=&gt;<span class=\"number\">2</span>])-&gt;<span class=\"title function_ invoke__\">select</span>();</span><br><span class=\"line\"><span class=\"comment\">// 生成的sql为：select * from `tb` where `status`=1 and `admin_id`=5 or (`type`=1 or `step`=2);</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"2-采用闭包的方式\"><a href=\"#2-采用闭包的方式\" class=\"headerlink\" title=\"2. 采用闭包的方式\"></a>2. 采用闭包的方式</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$map</span> = [<span class=\"string\">'status'</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">'admin_id'</span>=&gt;<span class=\"number\">5</span>];</span><br><span class=\"line\"><span class=\"variable\">$orMap</span> = [<span class=\"string\">'type'</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">'step'</span>=&gt;<span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"variable\">$list</span> = <span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">'tb'</span>)-&gt;<span class=\"title function_ invoke__\">where</span>(function (<span class=\"variable\">$query</span>) <span class=\"keyword\">use</span> ($<span class=\"title\">map</span>) {</span><br><span class=\"line\">    $<span class=\"title\">query</span>-&gt;<span class=\"title\">where</span>($<span class=\"title\">map</span>);</span><br><span class=\"line\">})-&gt;<span class=\"title function_ invoke__\">whereOr</span>(function (<span class=\"variable\">$query</span>) <span class=\"keyword\">use</span> ($<span class=\"title\">orMap</span>) {</span><br><span class=\"line\">    $<span class=\"title\">query</span>-&gt;<span class=\"title\">where</span>($<span class=\"title\">orMap</span>);</span><br><span class=\"line\">})-&gt;<span class=\"title function_ invoke__\">order</span>(<span class=\"string\">'id desc'</span>)-&gt;<span class=\"title function_ invoke__\">select</span>();</span><br><span class=\"line\"><span class=\"comment\">// 生成的sql为：select * from `tb` where (`status`=1 and `admin_id`=5) or (`type`=1 and `step`=2);</span></span><br></pre></td></tr></tbody></table></figure>\n<p>一般来说，在复杂的查询里，我们更多的是使用第二种方式。</p>\n","excerpt":"","more":"<h3 id=\"1-直接whereOr\"><a href=\"#1-直接whereOr\" class=\"headerlink\" title=\"1. 直接whereOr\"></a>1. 直接whereOr</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$list</span> = <span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">&#x27;tb&#x27;</span>)-&gt;<span class=\"title function_ invoke__\">where</span>([<span class=\"string\">&#x27;status&#x27;</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">&#x27;admin_id&#x27;</span>=&gt;<span class=\"number\">5</span>])-&gt;<span class=\"title function_ invoke__\">whereOr</span>([<span class=\"string\">&#x27;type&#x27;</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">&#x27;step&#x27;</span>=&gt;<span class=\"number\">2</span>])-&gt;<span class=\"title function_ invoke__\">select</span>();</span><br><span class=\"line\"><span class=\"comment\">// 生成的sql为：select * from `tb` where `status`=1 and `admin_id`=5 or (`type`=1 or `step`=2);</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-采用闭包的方式\"><a href=\"#2-采用闭包的方式\" class=\"headerlink\" title=\"2. 采用闭包的方式\"></a>2. 采用闭包的方式</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$map</span> = [<span class=\"string\">&#x27;status&#x27;</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">&#x27;admin_id&#x27;</span>=&gt;<span class=\"number\">5</span>];</span><br><span class=\"line\"><span class=\"variable\">$orMap</span> = [<span class=\"string\">&#x27;type&#x27;</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">&#x27;step&#x27;</span>=&gt;<span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"variable\">$list</span> = <span class=\"title class_\">Db</span>::<span class=\"title function_ invoke__\">name</span>(<span class=\"string\">&#x27;tb&#x27;</span>)-&gt;<span class=\"title function_ invoke__\">where</span>(function (<span class=\"variable\">$query</span>) <span class=\"keyword\">use</span> ($<span class=\"title\">map</span>) &#123;</span><br><span class=\"line\">    $<span class=\"title\">query</span>-&gt;<span class=\"title\">where</span>($<span class=\"title\">map</span>);</span><br><span class=\"line\">&#125;)-&gt;<span class=\"title function_ invoke__\">whereOr</span>(function (<span class=\"variable\">$query</span>) <span class=\"keyword\">use</span> ($<span class=\"title\">orMap</span>) &#123;</span><br><span class=\"line\">    $<span class=\"title\">query</span>-&gt;<span class=\"title\">where</span>($<span class=\"title\">orMap</span>);</span><br><span class=\"line\">&#125;)-&gt;<span class=\"title function_ invoke__\">order</span>(<span class=\"string\">&#x27;id desc&#x27;</span>)-&gt;<span class=\"title function_ invoke__\">select</span>();</span><br><span class=\"line\"><span class=\"comment\">// 生成的sql为：select * from `tb` where (`status`=1 and `admin_id`=5) or (`type`=1 and `step`=2);</span></span><br></pre></td></tr></table></figure>\n<p>一般来说，在复杂的查询里，我们更多的是使用第二种方式。</p>\n"},{"title":"ThinkPHP5使用笔记","abbrlink":"thinkphp-note","date":"2022-04-25T03:32:32.000Z","updated":"2022-04-25T03:32:32.000Z","_content":"\n### 1. 报错：Request.php中 variable type error: array\n - 描述：如果在post请求的时候，raw内容中某个参数的值为数组，直接使用$this->request->post('field');，会报错\n![](/images/thinkphp_note_1.png)\n\n - 原因：TP5之后，默认的变量修饰符为/s，转为字符串了。\n - 解决办法：在变量名后加/a，转为数组：$this->request->post('field/a');\n \n### 2. 回显处理\n如果请求参数里有&等符号，在接收后会进行转义为&，要使用htmlspecialchars_decode回显","source":"_posts/PHP/ThinkPHP/ThinkPHP5使用笔记.md","raw":"---\ntitle: ThinkPHP5使用笔记\ntags: [ThinkPHP]\ncategories: [PHP]\nabbrlink: 'thinkphp-note'\ndate: 2022-04-25 11:32:32\nupdated: 2022-04-25 11:32:32\n---\n\n### 1. 报错：Request.php中 variable type error: array\n - 描述：如果在post请求的时候，raw内容中某个参数的值为数组，直接使用$this->request->post('field');，会报错\n![](/images/thinkphp_note_1.png)\n\n - 原因：TP5之后，默认的变量修饰符为/s，转为字符串了。\n - 解决办法：在变量名后加/a，转为数组：$this->request->post('field/a');\n \n### 2. 回显处理\n如果请求参数里有&等符号，在接收后会进行转义为&，要使用htmlspecialchars_decode回显","slug":"PHP/ThinkPHP/ThinkPHP5使用笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uo0061oshgelpq00og","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-报错：Request-php中-variable-type-error-array\"><a href=\"#1-报错：Request-php中-variable-type-error-array\" class=\"headerlink\" title=\"1. 报错：Request.php中 variable type error: array\"></a>1. 报错：Request.php中 variable type error: array</h3><ul>\n<li><p>描述：如果在post请求的时候，raw内容中某个参数的值为数组，直接使用$this-&gt;request-&gt;post(‘field’);，会报错<br><img src=\"/images/thinkphp_note_1.png\" alt=\"\"></p>\n</li>\n<li><p>原因：TP5之后，默认的变量修饰符为/s，转为字符串了。</p>\n</li>\n<li>解决办法：在变量名后加/a，转为数组：$this-&gt;request-&gt;post(‘field/a’);</li>\n</ul>\n<h3 id=\"2-回显处理\"><a href=\"#2-回显处理\" class=\"headerlink\" title=\"2. 回显处理\"></a>2. 回显处理</h3><p>如果请求参数里有&amp;等符号，在接收后会进行转义为&amp;，要使用htmlspecialchars_decode回显</p>\n","excerpt":"","more":"<h3 id=\"1-报错：Request-php中-variable-type-error-array\"><a href=\"#1-报错：Request-php中-variable-type-error-array\" class=\"headerlink\" title=\"1. 报错：Request.php中 variable type error: array\"></a>1. 报错：Request.php中 variable type error: array</h3><ul>\n<li><p>描述：如果在post请求的时候，raw内容中某个参数的值为数组，直接使用$this-&gt;request-&gt;post(‘field’);，会报错<br><img src=\"/images/thinkphp_note_1.png\" alt></p>\n</li>\n<li><p>原因：TP5之后，默认的变量修饰符为/s，转为字符串了。</p>\n</li>\n<li>解决办法：在变量名后加/a，转为数组：$this-&gt;request-&gt;post(‘field/a’);</li>\n</ul>\n<h3 id=\"2-回显处理\"><a href=\"#2-回显处理\" class=\"headerlink\" title=\"2. 回显处理\"></a>2. 回显处理</h3><p>如果请求参数里有&amp;等符号，在接收后会进行转义为&amp;，要使用htmlspecialchars_decode回显</p>\n"},{"title":"php中composer的使用","abbrlink":"php-composer","date":"2021-05-27T05:29:31.000Z","updated":"2021-05-27T05:29:31.000Z","_content":"\n\n### 用法\n\n1. 降低composer版本\n```shell script\n    composer self-update -r\n    或者是 composer self-update -- l\n```","source":"_posts/PHP/composer/php中composer的使用.md","raw":"---\ntitle: php中composer的使用\ntags: [composer]\ncategories: [PHP]\nabbrlink: 'php-composer'\ndate: 2021-05-27 13:29:31\nupdated: 2021-05-27 13:29:31\n---\n\n\n### 用法\n\n1. 降低composer版本\n```shell script\n    composer self-update -r\n    或者是 composer self-update -- l\n```","slug":"PHP/composer/php中composer的使用","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2up0064oshg46876gj5","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h3><ol>\n<li>降低composer版本<figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">composer self-update -r</span><br><span class=\"line\">或者是 composer self-update -- l</span><br></pre></td></tr></tbody></table></figure></li>\n</ol>\n","excerpt":"","more":"<h3 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h3><ol>\n<li>降低composer版本<figure class=\"highlight shell\"><figcaption><span>script</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">composer self-update -r</span><br><span class=\"line\">或者是 composer self-update -- l</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"php中trait的用法","abbrlink":"php-trait","date":"2022-04-24T18:17:20.000Z","updated":"2022-05-08T04:57:00.000Z","_content":"\n<div class=\"note info\">trait是php的一种代码复用的方法。</div>\n\n\n### 用法\n#### 1. 通过use Trait类来使用\n可以将一些常用的处理封装到trait类里，在其他地方直接use就可以了。\n 例如：封装单例\n    先创建Singleton类，代码如下：\n```php\n   trait Singleton{\n       private static $instance;\n   \n       /**\n        * @param ...$args\n        */\n       public static function getInstance(...$args) {\n           if (!isset(self::$instance)) {\n               self::$instance = new static(...$args);\n           }\n           return self::$instance;\n       }\n   }\n```\n再创建Test类，代码如下：\n```php\n    class Test{\n        use Singleton;\n        public function test(){\n                return 'test';\n        }    \n    }\n```\n调用：\n```php\n    echo Test::getInstance()->test();\n```\n\n#### 2. 优先级\n当前类中的方法会覆盖trait方法，而trait方法用覆盖了基类中的方法。\n\n```php\nclass Base{\n    public function sayHello(){\n        echo 'Hello ';\n    }\n}\n\ntrait SayWorld{\n    public function sayHello(){\n        parent::sayHello();\n        echo 'world!';\n    }\n}\n\nclass MyHelloWorld extends Base{\n    use SayWorld;\n}\n\n$obj = new MyHelloWorld();\n$obj->sayHello();     \n//output: Hello world!\n```\n\n#### 3. 多个trait\n通过逗号分隔，在 use 声明列出多个 trait类\n\n\n### 常用的trait类\n\n#### 1. 单例类\n\n```php\n    /**\n     * 用作单例\n     * Trait Singleton\n     */\n    trait Singleton{\n        private static $instance;\n    \n        /**\n         * @param ...$args\n         */\n        public static function getInstance(...$args){\n            if (!isset(self::$instance)) {\n                self::$instance = new static(...$args);\n            }\n            return self::$instance;\n        }\n    }\n```\n\n#### 2. 错误处理类\n```php\n   namespace app\\common\\helper;\n   \n   /**\n    * 错误操作类\n    * Trait Error\n    * @package app\\common\\helper\n    */\n   trait Error{\n       private $_code;\n       private $_error;\n   \n       protected function setError(int $code, string $msg): void{\n           $this->_code = $code;\n           $this->_error = $msg;\n       }\n   \n       public function getError(): ?array{\n           return isset($this->_code) ? ['code' => $this->_code, 'msg' => $this->_error] : null;\n       }\n   }\n```\n\n使用方法：\n\n```php\n    class A {\n        use Error;\n        public function test(){\n            ……\n            if(){\n                 $this->setError(0, '数据不存在');\n                return null;           \n            }\n        }\n    }\n```\n\n调用：\n\n```php\n    $s = new A();\n    $rs = $s->test();\n    if ($error = $s->getError()) {\n        extract($error);\n        /**\n         * @var $code\n         * @var $msg\n         */\n        $this->setError($code, $msg);\n        return false;\n    }\n```\n\n### 参考资料\nhttps://www.php.net/manual/zh/language.oop5.traits.php","source":"_posts/PHP/trait/php中trait的用法.md","raw":"---\ntitle: php中trait的用法\ntags: [trait]\ncategories: [PHP]\nabbrlink: 'php-trait'\ndate: 2022-04-25 02:17:20\nupdated: 2022-05-08 12:57:00\n---\n\n<div class=\"note info\">trait是php的一种代码复用的方法。</div>\n\n\n### 用法\n#### 1. 通过use Trait类来使用\n可以将一些常用的处理封装到trait类里，在其他地方直接use就可以了。\n 例如：封装单例\n    先创建Singleton类，代码如下：\n```php\n   trait Singleton{\n       private static $instance;\n   \n       /**\n        * @param ...$args\n        */\n       public static function getInstance(...$args) {\n           if (!isset(self::$instance)) {\n               self::$instance = new static(...$args);\n           }\n           return self::$instance;\n       }\n   }\n```\n再创建Test类，代码如下：\n```php\n    class Test{\n        use Singleton;\n        public function test(){\n                return 'test';\n        }    \n    }\n```\n调用：\n```php\n    echo Test::getInstance()->test();\n```\n\n#### 2. 优先级\n当前类中的方法会覆盖trait方法，而trait方法用覆盖了基类中的方法。\n\n```php\nclass Base{\n    public function sayHello(){\n        echo 'Hello ';\n    }\n}\n\ntrait SayWorld{\n    public function sayHello(){\n        parent::sayHello();\n        echo 'world!';\n    }\n}\n\nclass MyHelloWorld extends Base{\n    use SayWorld;\n}\n\n$obj = new MyHelloWorld();\n$obj->sayHello();     \n//output: Hello world!\n```\n\n#### 3. 多个trait\n通过逗号分隔，在 use 声明列出多个 trait类\n\n\n### 常用的trait类\n\n#### 1. 单例类\n\n```php\n    /**\n     * 用作单例\n     * Trait Singleton\n     */\n    trait Singleton{\n        private static $instance;\n    \n        /**\n         * @param ...$args\n         */\n        public static function getInstance(...$args){\n            if (!isset(self::$instance)) {\n                self::$instance = new static(...$args);\n            }\n            return self::$instance;\n        }\n    }\n```\n\n#### 2. 错误处理类\n```php\n   namespace app\\common\\helper;\n   \n   /**\n    * 错误操作类\n    * Trait Error\n    * @package app\\common\\helper\n    */\n   trait Error{\n       private $_code;\n       private $_error;\n   \n       protected function setError(int $code, string $msg): void{\n           $this->_code = $code;\n           $this->_error = $msg;\n       }\n   \n       public function getError(): ?array{\n           return isset($this->_code) ? ['code' => $this->_code, 'msg' => $this->_error] : null;\n       }\n   }\n```\n\n使用方法：\n\n```php\n    class A {\n        use Error;\n        public function test(){\n            ……\n            if(){\n                 $this->setError(0, '数据不存在');\n                return null;           \n            }\n        }\n    }\n```\n\n调用：\n\n```php\n    $s = new A();\n    $rs = $s->test();\n    if ($error = $s->getError()) {\n        extract($error);\n        /**\n         * @var $code\n         * @var $msg\n         */\n        $this->setError($code, $msg);\n        return false;\n    }\n```\n\n### 参考资料\nhttps://www.php.net/manual/zh/language.oop5.traits.php","slug":"PHP/trait/php中trait的用法","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2up0067oshghaa29bmv","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">trait是php的一种代码复用的方法。</div>\n\n\n<h3 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h3><h4 id=\"1-通过use-Trait类来使用\"><a href=\"#1-通过use-Trait类来使用\" class=\"headerlink\" title=\"1. 通过use Trait类来使用\"></a>1. 通过use Trait类来使用</h4><p>可以将一些常用的处理封装到trait类里，在其他地方直接use就可以了。<br> 例如：封装单例<br>    先创建Singleton类，代码如下：<br></p><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">trait</span> <span class=\"title\">Singleton</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"variable\">$instance</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> ...$args</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInstance</span>(<span class=\"params\">...<span class=\"variable\">$args</span></span>) </span>{</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>(<span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span>)) {</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span> = <span class=\"keyword\">new</span> <span class=\"built_in\">static</span>(...<span class=\"variable\">$args</span>);</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure><br>再创建Test类，代码如下：<br><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">use</span> <span class=\"title\">Singleton</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">'test'</span>;</span><br><span class=\"line\">    }    </span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure><br>调用：<br><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title class_\">Test</span>::<span class=\"title function_ invoke__\">getInstance</span>()-&gt;<span class=\"title function_ invoke__\">test</span>();</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h4 id=\"2-优先级\"><a href=\"#2-优先级\" class=\"headerlink\" title=\"2. 优先级\"></a>2. 优先级</h4><p>当前类中的方法会覆盖trait方法，而trait方法用覆盖了基类中的方法。</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'Hello '</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">trait</span> <span class=\"title\">SayWorld</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::<span class=\"title function_ invoke__\">sayHello</span>();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'world!'</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHelloWorld</span> <span class=\"keyword\">extends</span> <span class=\"title\">Base</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">use</span> <span class=\"title\">SayWorld</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$obj</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyHelloWorld</span>();</span><br><span class=\"line\"><span class=\"variable\">$obj</span>-&gt;<span class=\"title function_ invoke__\">sayHello</span>();     </span><br><span class=\"line\"><span class=\"comment\">//output: Hello world!</span></span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"3-多个trait\"><a href=\"#3-多个trait\" class=\"headerlink\" title=\"3. 多个trait\"></a>3. 多个trait</h4><p>通过逗号分隔，在 use 声明列出多个 trait类</p>\n<h3 id=\"常用的trait类\"><a href=\"#常用的trait类\" class=\"headerlink\" title=\"常用的trait类\"></a>常用的trait类</h3><h4 id=\"1-单例类\"><a href=\"#1-单例类\" class=\"headerlink\" title=\"1. 单例类\"></a>1. 单例类</h4><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 用作单例</span></span><br><span class=\"line\"><span class=\"comment\"> * Trait Singleton</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">trait</span> <span class=\"title\">Singleton</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"variable\">$instance</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> ...$args</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInstance</span>(<span class=\"params\">...<span class=\"variable\">$args</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>(<span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span>)) {</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span> = <span class=\"keyword\">new</span> <span class=\"built_in\">static</span>(...<span class=\"variable\">$args</span>);</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"2-错误处理类\"><a href=\"#2-错误处理类\" class=\"headerlink\" title=\"2. 错误处理类\"></a>2. 错误处理类</h4><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">app</span>\\<span class=\"title class_\">common</span>\\<span class=\"title class_\">helper</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 错误操作类</span></span><br><span class=\"line\"><span class=\"comment\"> * Trait Error</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@package</span> app\\common\\helper</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">trait</span> <span class=\"title\">Error</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$_code</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$_error</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setError</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$code</span>, <span class=\"keyword\">string</span> <span class=\"variable\">$msg</span></span>): <span class=\"title\">void</span></span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;_code = <span class=\"variable\">$code</span>;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;_error = <span class=\"variable\">$msg</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getError</span>(<span class=\"params\"></span>): ?<span class=\"title\">array</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">isset</span>(<span class=\"variable language_\">$this</span>-&gt;_code) ? [<span class=\"string\">'code'</span> =&gt; <span class=\"variable language_\">$this</span>-&gt;_code, <span class=\"string\">'msg'</span> =&gt; <span class=\"variable language_\">$this</span>-&gt;_error] : <span class=\"literal\">null</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>使用方法：</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> </span>{</span><br><span class=\"line\">    <span class=\"keyword\">use</span> <span class=\"title\">Error</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        ……</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(){</span><br><span class=\"line\">             <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">setError</span>(<span class=\"number\">0</span>, <span class=\"string\">'数据不存在'</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;           </span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>调用：</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$s</span> = <span class=\"keyword\">new</span> <span class=\"title function_ invoke__\">A</span>();</span><br><span class=\"line\"><span class=\"variable\">$rs</span> = <span class=\"variable\">$s</span>-&gt;<span class=\"title function_ invoke__\">test</span>();</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"variable\">$error</span> = <span class=\"variable\">$s</span>-&gt;<span class=\"title function_ invoke__\">getError</span>()) {</span><br><span class=\"line\">    <span class=\"title function_ invoke__\">extract</span>(<span class=\"variable\">$error</span>);</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> $code</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> $msg</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">setError</span>(<span class=\"variable\">$code</span>, <span class=\"variable\">$msg</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h3><p><a href=\"https://www.php.net/manual/zh/language.oop5.traits.php\">https://www.php.net/manual/zh/language.oop5.traits.php</a></p>\n","excerpt":"","more":"<div class=\"note info\">trait是php的一种代码复用的方法。</div>\n\n\n<h3 id=\"用法\"><a href=\"#用法\" class=\"headerlink\" title=\"用法\"></a>用法</h3><h4 id=\"1-通过use-Trait类来使用\"><a href=\"#1-通过use-Trait类来使用\" class=\"headerlink\" title=\"1. 通过use Trait类来使用\"></a>1. 通过use Trait类来使用</h4><p>可以将一些常用的处理封装到trait类里，在其他地方直接use就可以了。<br> 例如：封装单例<br>    先创建Singleton类，代码如下：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">trait</span> <span class=\"title\">Singleton</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"variable\">$instance</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> ...$args</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInstance</span>(<span class=\"params\">...<span class=\"variable\">$args</span></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>(<span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span>)) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span> = <span class=\"keyword\">new</span> <span class=\"built_in\">static</span>(...<span class=\"variable\">$args</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>再创建Test类，代码如下：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">use</span> <span class=\"title\">Singleton</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&#x27;test&#x27;</span>;</span><br><span class=\"line\">    &#125;    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>调用：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title class_\">Test</span>::<span class=\"title function_ invoke__\">getInstance</span>()-&gt;<span class=\"title function_ invoke__\">test</span>();</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"2-优先级\"><a href=\"#2-优先级\" class=\"headerlink\" title=\"2. 优先级\"></a>2. 优先级</h4><p>当前类中的方法会覆盖trait方法，而trait方法用覆盖了基类中的方法。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Base</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;Hello &#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">trait</span> <span class=\"title\">SayWorld</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::<span class=\"title function_ invoke__\">sayHello</span>();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;world!&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHelloWorld</span> <span class=\"keyword\">extends</span> <span class=\"title\">Base</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">use</span> <span class=\"title\">SayWorld</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$obj</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyHelloWorld</span>();</span><br><span class=\"line\"><span class=\"variable\">$obj</span>-&gt;<span class=\"title function_ invoke__\">sayHello</span>();     </span><br><span class=\"line\"><span class=\"comment\">//output: Hello world!</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"3-多个trait\"><a href=\"#3-多个trait\" class=\"headerlink\" title=\"3. 多个trait\"></a>3. 多个trait</h4><p>通过逗号分隔，在 use 声明列出多个 trait类</p>\n<h3 id=\"常用的trait类\"><a href=\"#常用的trait类\" class=\"headerlink\" title=\"常用的trait类\"></a>常用的trait类</h3><h4 id=\"1-单例类\"><a href=\"#1-单例类\" class=\"headerlink\" title=\"1. 单例类\"></a>1. 单例类</h4><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 用作单例</span></span><br><span class=\"line\"><span class=\"comment\"> * Trait Singleton</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">trait</span> <span class=\"title\">Singleton</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"variable\">$instance</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> ...$args</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInstance</span>(<span class=\"params\">...<span class=\"variable\">$args</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"keyword\">isset</span>(<span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span>)) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span> = <span class=\"keyword\">new</span> <span class=\"built_in\">static</span>(...<span class=\"variable\">$args</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"2-错误处理类\"><a href=\"#2-错误处理类\" class=\"headerlink\" title=\"2. 错误处理类\"></a>2. 错误处理类</h4><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">app</span>\\<span class=\"title class_\">common</span>\\<span class=\"title class_\">helper</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 错误操作类</span></span><br><span class=\"line\"><span class=\"comment\"> * Trait Error</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@package</span> app\\common\\helper</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">trait</span> <span class=\"title\">Error</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$_code</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$_error</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setError</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$code</span>, <span class=\"keyword\">string</span> <span class=\"variable\">$msg</span></span>): <span class=\"title\">void</span></span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;_code = <span class=\"variable\">$code</span>;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;_error = <span class=\"variable\">$msg</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getError</span>(<span class=\"params\"></span>): ?<span class=\"title\">array</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">isset</span>(<span class=\"variable language_\">$this</span>-&gt;_code) ? [<span class=\"string\">&#x27;code&#x27;</span> =&gt; <span class=\"variable language_\">$this</span>-&gt;_code, <span class=\"string\">&#x27;msg&#x27;</span> =&gt; <span class=\"variable language_\">$this</span>-&gt;_error] : <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>使用方法：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">use</span> <span class=\"title\">Error</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        ……</span><br><span class=\"line\">        <span class=\"keyword\">if</span>()&#123;</span><br><span class=\"line\">             <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">setError</span>(<span class=\"number\">0</span>, <span class=\"string\">&#x27;数据不存在&#x27;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;           </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>调用：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$s</span> = <span class=\"keyword\">new</span> <span class=\"title function_ invoke__\">A</span>();</span><br><span class=\"line\"><span class=\"variable\">$rs</span> = <span class=\"variable\">$s</span>-&gt;<span class=\"title function_ invoke__\">test</span>();</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"variable\">$error</span> = <span class=\"variable\">$s</span>-&gt;<span class=\"title function_ invoke__\">getError</span>()) &#123;</span><br><span class=\"line\">    <span class=\"title function_ invoke__\">extract</span>(<span class=\"variable\">$error</span>);</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> $code</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@var</span> $msg</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">setError</span>(<span class=\"variable\">$code</span>, <span class=\"variable\">$msg</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h3><p><a href=\"https://www.php.net/manual/zh/language.oop5.traits.php\">https://www.php.net/manual/zh/language.oop5.traits.php</a></p>\n"},{"title":"PHPExcel笔记","abbrlink":"php-excel","date":"2018-11-06T03:55:00.000Z","updated":"2022-05-11T09:03:22.000Z","_content":"\n### 1. 设置字体和样式\n``` bash\n    $objPHPExcel->getActiveSheet()->getStyle('A1')->applyFromArray(['font'=>['bold'=>true]]);\t\t\t//设置单元格A1字体加粗\n    $objPHPExcel->getActiveSheet()->getStyle('A1:GL1')->applyFromArray(['font'=>['bold'=>true]]);\t\t//设置单元格A1-GL1字体加粗\n    $objPHPExcel->getActiveSheet()->getStyle('A1:B3')->getFont()->setBold(true);\t\t\t\t\t\t//设置A1-B3之间的单元格字体加粗\n``` \n\n### 2. 设置行高\n``` bash\n    $objPHPExcel->getActiveSheet()->getDefaultRowDimension()->setRowHeight(20);\t\t\t\t\t\t\t//设置默认行高\n    $objPHPExcel->getActiveSheet()->getRowDimension('1')->setRowHeight(30);\t\t\t\t\t\t\t\t//设置第一行行高\n``` \n\n### 3. 设置列宽\n``` bash\n    $objPHPExcel->getActiveSheet()->getColumnDimension('A')->setWidth(20);\t\t\t\t\t\t\t\t//设置A列列宽\n``` \n\n### 4. 单元格内容特定位置换行\n``` bash\n    $objPHPExcel->setActiveSheetIndex(0)->setCellValue('A3', \"第三节\\n11:00-12:00\");   //注意双引号\n    $objPHPExcel->getActiveSheet()->getStyle('A3')->getAlignment()->setWrapText(true);\n``` \n\n### 5. PhpSpreadsheet日期格式问题\n使用PhpSpreadsheet  进行导入处理时，如果单元格格式为：自定义的`yyyy/m/d`，导入后的数据格式会变为`m/d/yyyy`，即12/13/2021\n![](/images/php_excel_note_1.png)\n这是因为PhpSpreadsheet会把单元格转为数字，而校验出的单元格格式为`m/d/yyyy`。\n解决办法：使用日期格式的`yyyy/m/d`\n![](/images/php_excel_note_2.png)\n程序校验出的日期格式为：`yyyy/m/d;@`\nexcel导入，获取数据：\n```php\n$allobjWorksheets = $objPHPExcel->getAllSheets();\n$result = [];\nforeach($allobjWorksheets as $objWorksheet) {\n    $sheetname = $objWorksheet->getTitle();\n    $highestRow = $objWorksheet->getHighestRow();\n    $highestColumn = $objWorksheet->getHighestColumn();\n    $highestColumnIndex = Coordinate::columnIndexFromString($highestColumn);\n    for ($row = 1; $row <= $highestRow; ++$row) {\n        for ($col = 0; $col <= $highestColumnIndex; ++$col) {\n            $cell = $objWorksheet->getCellByColumnAndRow($col, $row);\n            $value = $cell->getValue();\n            if ($cell->getDataType() == DataType::TYPE_NUMERIC) {\n                $formatcode = $cell->getStyle()->getNumberFormat()->getFormatCode();\n                if (preg_match('/^(\\[\\$[A-Z]*-[0-9A-F]*\\])*[hmsdy]/i', $formatcode)) {\n                    $value = $cell->getFormattedValue();\n                    //$value=gmdate(\"Y-m-d\", PHPExcel_Shared_Date::ExcelToPHP($value));\n                } else {\n                    $value = NumberFormat::toFormattedString($value, $formatcode);\n                }\n            }\n            $result[$sheetname][$row - 1][$col] = $value;\n        }\n    }\n}\nprint_r($result);\ndie;\n```","source":"_posts/PHP/其他/PHPExcel笔记.md","raw":"---\ntitle: PHPExcel笔记\ntags: [PHPExcel]\ncategories: [PHP]\nabbrlink: 'php-excel'\ndate: 2018-11-06 11:55:00\nupdated: 2022-05-11 17:03:22\n---\n\n### 1. 设置字体和样式\n``` bash\n    $objPHPExcel->getActiveSheet()->getStyle('A1')->applyFromArray(['font'=>['bold'=>true]]);\t\t\t//设置单元格A1字体加粗\n    $objPHPExcel->getActiveSheet()->getStyle('A1:GL1')->applyFromArray(['font'=>['bold'=>true]]);\t\t//设置单元格A1-GL1字体加粗\n    $objPHPExcel->getActiveSheet()->getStyle('A1:B3')->getFont()->setBold(true);\t\t\t\t\t\t//设置A1-B3之间的单元格字体加粗\n``` \n\n### 2. 设置行高\n``` bash\n    $objPHPExcel->getActiveSheet()->getDefaultRowDimension()->setRowHeight(20);\t\t\t\t\t\t\t//设置默认行高\n    $objPHPExcel->getActiveSheet()->getRowDimension('1')->setRowHeight(30);\t\t\t\t\t\t\t\t//设置第一行行高\n``` \n\n### 3. 设置列宽\n``` bash\n    $objPHPExcel->getActiveSheet()->getColumnDimension('A')->setWidth(20);\t\t\t\t\t\t\t\t//设置A列列宽\n``` \n\n### 4. 单元格内容特定位置换行\n``` bash\n    $objPHPExcel->setActiveSheetIndex(0)->setCellValue('A3', \"第三节\\n11:00-12:00\");   //注意双引号\n    $objPHPExcel->getActiveSheet()->getStyle('A3')->getAlignment()->setWrapText(true);\n``` \n\n### 5. PhpSpreadsheet日期格式问题\n使用PhpSpreadsheet  进行导入处理时，如果单元格格式为：自定义的`yyyy/m/d`，导入后的数据格式会变为`m/d/yyyy`，即12/13/2021\n![](/images/php_excel_note_1.png)\n这是因为PhpSpreadsheet会把单元格转为数字，而校验出的单元格格式为`m/d/yyyy`。\n解决办法：使用日期格式的`yyyy/m/d`\n![](/images/php_excel_note_2.png)\n程序校验出的日期格式为：`yyyy/m/d;@`\nexcel导入，获取数据：\n```php\n$allobjWorksheets = $objPHPExcel->getAllSheets();\n$result = [];\nforeach($allobjWorksheets as $objWorksheet) {\n    $sheetname = $objWorksheet->getTitle();\n    $highestRow = $objWorksheet->getHighestRow();\n    $highestColumn = $objWorksheet->getHighestColumn();\n    $highestColumnIndex = Coordinate::columnIndexFromString($highestColumn);\n    for ($row = 1; $row <= $highestRow; ++$row) {\n        for ($col = 0; $col <= $highestColumnIndex; ++$col) {\n            $cell = $objWorksheet->getCellByColumnAndRow($col, $row);\n            $value = $cell->getValue();\n            if ($cell->getDataType() == DataType::TYPE_NUMERIC) {\n                $formatcode = $cell->getStyle()->getNumberFormat()->getFormatCode();\n                if (preg_match('/^(\\[\\$[A-Z]*-[0-9A-F]*\\])*[hmsdy]/i', $formatcode)) {\n                    $value = $cell->getFormattedValue();\n                    //$value=gmdate(\"Y-m-d\", PHPExcel_Shared_Date::ExcelToPHP($value));\n                } else {\n                    $value = NumberFormat::toFormattedString($value, $formatcode);\n                }\n            }\n            $result[$sheetname][$row - 1][$col] = $value;\n        }\n    }\n}\nprint_r($result);\ndie;\n```","slug":"PHP/其他/PHPExcel笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uq006aoshgah76fgdw","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-设置字体和样式\"><a href=\"#1-设置字体和样式\" class=\"headerlink\" title=\"1. 设置字体和样式\"></a>1. 设置字体和样式</h3><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">'A1'</span>)-&gt;applyFromArray([<span class=\"string\">'font'</span>=&gt;[<span class=\"string\">'bold'</span>=&gt;<span class=\"literal\">true</span>]]);\t\t\t//设置单元格A1字体加粗</span><br><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">'A1:GL1'</span>)-&gt;applyFromArray([<span class=\"string\">'font'</span>=&gt;[<span class=\"string\">'bold'</span>=&gt;<span class=\"literal\">true</span>]]);\t\t//设置单元格A1-GL1字体加粗</span><br><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">'A1:B3'</span>)-&gt;getFont()-&gt;setBold(<span class=\"literal\">true</span>);\t\t\t\t\t\t//设置A1-B3之间的单元格字体加粗</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"2-设置行高\"><a href=\"#2-设置行高\" class=\"headerlink\" title=\"2. 设置行高\"></a>2. 设置行高</h3><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getDefaultRowDimension()-&gt;setRowHeight(20);\t\t\t\t\t\t\t//设置默认行高</span><br><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getRowDimension(<span class=\"string\">'1'</span>)-&gt;setRowHeight(30);\t\t\t\t\t\t\t\t//设置第一行行高</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"3-设置列宽\"><a href=\"#3-设置列宽\" class=\"headerlink\" title=\"3. 设置列宽\"></a>3. 设置列宽</h3><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getColumnDimension(<span class=\"string\">'A'</span>)-&gt;setWidth(20);\t\t\t\t\t\t\t\t//设置A列列宽</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"4-单元格内容特定位置换行\"><a href=\"#4-单元格内容特定位置换行\" class=\"headerlink\" title=\"4. 单元格内容特定位置换行\"></a>4. 单元格内容特定位置换行</h3><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;setActiveSheetIndex(0)-&gt;setCellValue(<span class=\"string\">'A3'</span>, <span class=\"string\">\"第三节\\n11:00-12:00\"</span>);   //注意双引号</span><br><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">'A3'</span>)-&gt;getAlignment()-&gt;setWrapText(<span class=\"literal\">true</span>);</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"5-PhpSpreadsheet日期格式问题\"><a href=\"#5-PhpSpreadsheet日期格式问题\" class=\"headerlink\" title=\"5. PhpSpreadsheet日期格式问题\"></a>5. PhpSpreadsheet日期格式问题</h3><p>使用PhpSpreadsheet  进行导入处理时，如果单元格格式为：自定义的<code>yyyy/m/d</code>，导入后的数据格式会变为<code>m/d/yyyy</code>，即12/13/2021<br><img src=\"/images/php_excel_note_1.png\" alt=\"\"><br>这是因为PhpSpreadsheet会把单元格转为数字，而校验出的单元格格式为<code>m/d/yyyy</code>。<br>解决办法：使用日期格式的<code>yyyy/m/d</code><br><img src=\"/images/php_excel_note_2.png\" alt=\"\"><br>程序校验出的日期格式为：<code>yyyy/m/d;@</code><br>excel导入，获取数据：<br></p><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$allobjWorksheets</span> = <span class=\"variable\">$objPHPExcel</span>-&gt;<span class=\"title function_ invoke__\">getAllSheets</span>();</span><br><span class=\"line\"><span class=\"variable\">$result</span> = [];</span><br><span class=\"line\"><span class=\"keyword\">foreach</span>(<span class=\"variable\">$allobjWorksheets</span> <span class=\"keyword\">as</span> <span class=\"variable\">$objWorksheet</span>) {</span><br><span class=\"line\">    <span class=\"variable\">$sheetname</span> = <span class=\"variable\">$objWorksheet</span>-&gt;<span class=\"title function_ invoke__\">getTitle</span>();</span><br><span class=\"line\">    <span class=\"variable\">$highestRow</span> = <span class=\"variable\">$objWorksheet</span>-&gt;<span class=\"title function_ invoke__\">getHighestRow</span>();</span><br><span class=\"line\">    <span class=\"variable\">$highestColumn</span> = <span class=\"variable\">$objWorksheet</span>-&gt;<span class=\"title function_ invoke__\">getHighestColumn</span>();</span><br><span class=\"line\">    <span class=\"variable\">$highestColumnIndex</span> = <span class=\"title class_\">Coordinate</span>::<span class=\"title function_ invoke__\">columnIndexFromString</span>(<span class=\"variable\">$highestColumn</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$row</span> = <span class=\"number\">1</span>; <span class=\"variable\">$row</span> &lt;= <span class=\"variable\">$highestRow</span>; ++<span class=\"variable\">$row</span>) {</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$col</span> = <span class=\"number\">0</span>; <span class=\"variable\">$col</span> &lt;= <span class=\"variable\">$highestColumnIndex</span>; ++<span class=\"variable\">$col</span>) {</span><br><span class=\"line\">            <span class=\"variable\">$cell</span> = <span class=\"variable\">$objWorksheet</span>-&gt;<span class=\"title function_ invoke__\">getCellByColumnAndRow</span>(<span class=\"variable\">$col</span>, <span class=\"variable\">$row</span>);</span><br><span class=\"line\">            <span class=\"variable\">$value</span> = <span class=\"variable\">$cell</span>-&gt;<span class=\"title function_ invoke__\">getValue</span>();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$cell</span>-&gt;<span class=\"title function_ invoke__\">getDataType</span>() == <span class=\"title class_\">DataType</span>::<span class=\"variable constant_\">TYPE_NUMERIC</span>) {</span><br><span class=\"line\">                <span class=\"variable\">$formatcode</span> = <span class=\"variable\">$cell</span>-&gt;<span class=\"title function_ invoke__\">getStyle</span>()-&gt;<span class=\"title function_ invoke__\">getNumberFormat</span>()-&gt;<span class=\"title function_ invoke__\">getFormatCode</span>();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">preg_match</span>(<span class=\"string\">'/^(\\[\\$[A-Z]*-[0-9A-F]*\\])*[hmsdy]/i'</span>, <span class=\"variable\">$formatcode</span>)) {</span><br><span class=\"line\">                    <span class=\"variable\">$value</span> = <span class=\"variable\">$cell</span>-&gt;<span class=\"title function_ invoke__\">getFormattedValue</span>();</span><br><span class=\"line\">                    <span class=\"comment\">//$value=gmdate(\"Y-m-d\", PHPExcel_Shared_Date::ExcelToPHP($value));</span></span><br><span class=\"line\">                } <span class=\"keyword\">else</span> {</span><br><span class=\"line\">                    <span class=\"variable\">$value</span> = <span class=\"title class_\">NumberFormat</span>::<span class=\"title function_ invoke__\">toFormattedString</span>(<span class=\"variable\">$value</span>, <span class=\"variable\">$formatcode</span>);</span><br><span class=\"line\">                }</span><br><span class=\"line\">            }</span><br><span class=\"line\">            <span class=\"variable\">$result</span>[<span class=\"variable\">$sheetname</span>][<span class=\"variable\">$row</span> - <span class=\"number\">1</span>][<span class=\"variable\">$col</span>] = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$result</span>);</span><br><span class=\"line\"><span class=\"keyword\">die</span>;</span><br></pre></td></tr></tbody></table></figure><p></p>\n","excerpt":"","more":"<h3 id=\"1-设置字体和样式\"><a href=\"#1-设置字体和样式\" class=\"headerlink\" title=\"1. 设置字体和样式\"></a>1. 设置字体和样式</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">&#x27;A1&#x27;</span>)-&gt;applyFromArray([<span class=\"string\">&#x27;font&#x27;</span>=&gt;[<span class=\"string\">&#x27;bold&#x27;</span>=&gt;<span class=\"literal\">true</span>]]);\t\t\t//设置单元格A1字体加粗</span><br><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">&#x27;A1:GL1&#x27;</span>)-&gt;applyFromArray([<span class=\"string\">&#x27;font&#x27;</span>=&gt;[<span class=\"string\">&#x27;bold&#x27;</span>=&gt;<span class=\"literal\">true</span>]]);\t\t//设置单元格A1-GL1字体加粗</span><br><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">&#x27;A1:B3&#x27;</span>)-&gt;getFont()-&gt;setBold(<span class=\"literal\">true</span>);\t\t\t\t\t\t//设置A1-B3之间的单元格字体加粗</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-设置行高\"><a href=\"#2-设置行高\" class=\"headerlink\" title=\"2. 设置行高\"></a>2. 设置行高</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getDefaultRowDimension()-&gt;setRowHeight(20);\t\t\t\t\t\t\t//设置默认行高</span><br><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getRowDimension(<span class=\"string\">&#x27;1&#x27;</span>)-&gt;setRowHeight(30);\t\t\t\t\t\t\t\t//设置第一行行高</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-设置列宽\"><a href=\"#3-设置列宽\" class=\"headerlink\" title=\"3. 设置列宽\"></a>3. 设置列宽</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getColumnDimension(<span class=\"string\">&#x27;A&#x27;</span>)-&gt;setWidth(20);\t\t\t\t\t\t\t\t//设置A列列宽</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-单元格内容特定位置换行\"><a href=\"#4-单元格内容特定位置换行\" class=\"headerlink\" title=\"4. 单元格内容特定位置换行\"></a>4. 单元格内容特定位置换行</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;setActiveSheetIndex(0)-&gt;setCellValue(<span class=\"string\">&#x27;A3&#x27;</span>, <span class=\"string\">&quot;第三节\\n11:00-12:00&quot;</span>);   //注意双引号</span><br><span class=\"line\"><span class=\"variable\">$objPHPExcel</span>-&gt;getActiveSheet()-&gt;getStyle(<span class=\"string\">&#x27;A3&#x27;</span>)-&gt;getAlignment()-&gt;setWrapText(<span class=\"literal\">true</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-PhpSpreadsheet日期格式问题\"><a href=\"#5-PhpSpreadsheet日期格式问题\" class=\"headerlink\" title=\"5. PhpSpreadsheet日期格式问题\"></a>5. PhpSpreadsheet日期格式问题</h3><p>使用PhpSpreadsheet  进行导入处理时，如果单元格格式为：自定义的<code>yyyy/m/d</code>，导入后的数据格式会变为<code>m/d/yyyy</code>，即12/13/2021<br><img src=\"/images/php_excel_note_1.png\" alt><br>这是因为PhpSpreadsheet会把单元格转为数字，而校验出的单元格格式为<code>m/d/yyyy</code>。<br>解决办法：使用日期格式的<code>yyyy/m/d</code><br><img src=\"/images/php_excel_note_2.png\" alt><br>程序校验出的日期格式为：<code>yyyy/m/d;@</code><br>excel导入，获取数据：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$allobjWorksheets</span> = <span class=\"variable\">$objPHPExcel</span>-&gt;<span class=\"title function_ invoke__\">getAllSheets</span>();</span><br><span class=\"line\"><span class=\"variable\">$result</span> = [];</span><br><span class=\"line\"><span class=\"keyword\">foreach</span>(<span class=\"variable\">$allobjWorksheets</span> <span class=\"keyword\">as</span> <span class=\"variable\">$objWorksheet</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable\">$sheetname</span> = <span class=\"variable\">$objWorksheet</span>-&gt;<span class=\"title function_ invoke__\">getTitle</span>();</span><br><span class=\"line\">    <span class=\"variable\">$highestRow</span> = <span class=\"variable\">$objWorksheet</span>-&gt;<span class=\"title function_ invoke__\">getHighestRow</span>();</span><br><span class=\"line\">    <span class=\"variable\">$highestColumn</span> = <span class=\"variable\">$objWorksheet</span>-&gt;<span class=\"title function_ invoke__\">getHighestColumn</span>();</span><br><span class=\"line\">    <span class=\"variable\">$highestColumnIndex</span> = <span class=\"title class_\">Coordinate</span>::<span class=\"title function_ invoke__\">columnIndexFromString</span>(<span class=\"variable\">$highestColumn</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$row</span> = <span class=\"number\">1</span>; <span class=\"variable\">$row</span> &lt;= <span class=\"variable\">$highestRow</span>; ++<span class=\"variable\">$row</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$col</span> = <span class=\"number\">0</span>; <span class=\"variable\">$col</span> &lt;= <span class=\"variable\">$highestColumnIndex</span>; ++<span class=\"variable\">$col</span>) &#123;</span><br><span class=\"line\">            <span class=\"variable\">$cell</span> = <span class=\"variable\">$objWorksheet</span>-&gt;<span class=\"title function_ invoke__\">getCellByColumnAndRow</span>(<span class=\"variable\">$col</span>, <span class=\"variable\">$row</span>);</span><br><span class=\"line\">            <span class=\"variable\">$value</span> = <span class=\"variable\">$cell</span>-&gt;<span class=\"title function_ invoke__\">getValue</span>();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$cell</span>-&gt;<span class=\"title function_ invoke__\">getDataType</span>() == <span class=\"title class_\">DataType</span>::<span class=\"variable constant_\">TYPE_NUMERIC</span>) &#123;</span><br><span class=\"line\">                <span class=\"variable\">$formatcode</span> = <span class=\"variable\">$cell</span>-&gt;<span class=\"title function_ invoke__\">getStyle</span>()-&gt;<span class=\"title function_ invoke__\">getNumberFormat</span>()-&gt;<span class=\"title function_ invoke__\">getFormatCode</span>();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">preg_match</span>(<span class=\"string\">&#x27;/^(\\[\\$[A-Z]*-[0-9A-F]*\\])*[hmsdy]/i&#x27;</span>, <span class=\"variable\">$formatcode</span>)) &#123;</span><br><span class=\"line\">                    <span class=\"variable\">$value</span> = <span class=\"variable\">$cell</span>-&gt;<span class=\"title function_ invoke__\">getFormattedValue</span>();</span><br><span class=\"line\">                    <span class=\"comment\">//$value=gmdate(&quot;Y-m-d&quot;, PHPExcel_Shared_Date::ExcelToPHP($value));</span></span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"variable\">$value</span> = <span class=\"title class_\">NumberFormat</span>::<span class=\"title function_ invoke__\">toFormattedString</span>(<span class=\"variable\">$value</span>, <span class=\"variable\">$formatcode</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"variable\">$result</span>[<span class=\"variable\">$sheetname</span>][<span class=\"variable\">$row</span> - <span class=\"number\">1</span>][<span class=\"variable\">$col</span>] = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$result</span>);</span><br><span class=\"line\"><span class=\"keyword\">die</span>;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"PHP中...的用法","abbrlink":"php-uncertain-params","date":"2022-06-02T11:26:25.000Z","updated":"2022-06-02T11:26:25.000Z","_content":"\n\n- 如果...在函数的定义中，则表示传入多个参数(个数不定)将合并成一个数组(索引数组)\n```php\n    function sum(...$numbers){\n        $sum = 0;\n        foreach ($numbers as $number){\n            $sum += $number;\n        }\n    \n        return $sum;\n    }\n    \n    echo sum(1,2,3,4,5);    //15\n```\n- 如果...在调用函数的语句中，则表示传入的数组(索引数组)将拆分成多个参数\n```php\n    function add($a, $b){\n        return $a + $b;\n    }\n    \n    $arr = [2,3];\n    echo add(...$arr);      //5\n    var_dump(add(...[1]));  //没有任何输出\n    var_dump(add(...['a'=>1,'b'=>2]));  //没有任何输出\n```","source":"_posts/PHP/其他/PHP中...的用法.md","raw":"---\ntitle: PHP中...的用法\ntags: [PHP笔记]\ncategories: [PHP]\nabbrlink: 'php-uncertain-params'\ndate: 2022-06-02 19:26:25\nupdated: 2022-06-02 19:26:25\n---\n\n\n- 如果...在函数的定义中，则表示传入多个参数(个数不定)将合并成一个数组(索引数组)\n```php\n    function sum(...$numbers){\n        $sum = 0;\n        foreach ($numbers as $number){\n            $sum += $number;\n        }\n    \n        return $sum;\n    }\n    \n    echo sum(1,2,3,4,5);    //15\n```\n- 如果...在调用函数的语句中，则表示传入的数组(索引数组)将拆分成多个参数\n```php\n    function add($a, $b){\n        return $a + $b;\n    }\n    \n    $arr = [2,3];\n    echo add(...$arr);      //5\n    var_dump(add(...[1]));  //没有任何输出\n    var_dump(add(...['a'=>1,'b'=>2]));  //没有任何输出\n```","slug":"PHP/其他/PHP中...的用法","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ur006doshg1xob2mm9","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ul>\n<li>如果…在函数的定义中，则表示传入多个参数(个数不定)将合并成一个数组(索引数组)<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sum</span>(<span class=\"params\">...<span class=\"variable\">$numbers</span></span>)</span>{</span><br><span class=\"line\">    <span class=\"variable\">$sum</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> (<span class=\"variable\">$numbers</span> <span class=\"keyword\">as</span> <span class=\"variable\">$number</span>){</span><br><span class=\"line\">        <span class=\"variable\">$sum</span> += <span class=\"variable\">$number</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$sum</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">sum</span>(<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>);    <span class=\"comment\">//15</span></span><br></pre></td></tr></tbody></table></figure></li>\n<li>如果…在调用函数的语句中，则表示传入的数组(索引数组)将拆分成多个参数<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\"><span class=\"variable\">$a</span>, <span class=\"variable\">$b</span></span>)</span>{</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$a</span> + <span class=\"variable\">$b</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"number\">2</span>,<span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">add</span>(...<span class=\"variable\">$arr</span>);      <span class=\"comment\">//5</span></span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"title function_ invoke__\">add</span>(...[<span class=\"number\">1</span>]));  <span class=\"comment\">//没有任何输出</span></span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"title function_ invoke__\">add</span>(...[<span class=\"string\">'a'</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">'b'</span>=&gt;<span class=\"number\">2</span>]));  <span class=\"comment\">//没有任何输出</span></span><br></pre></td></tr></tbody></table></figure></li>\n</ul>\n","excerpt":"","more":"<ul>\n<li>如果…在函数的定义中，则表示传入多个参数(个数不定)将合并成一个数组(索引数组)<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sum</span>(<span class=\"params\">...<span class=\"variable\">$numbers</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$sum</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> (<span class=\"variable\">$numbers</span> <span class=\"keyword\">as</span> <span class=\"variable\">$number</span>)&#123;</span><br><span class=\"line\">        <span class=\"variable\">$sum</span> += <span class=\"variable\">$number</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$sum</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">sum</span>(<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>);    <span class=\"comment\">//15</span></span><br></pre></td></tr></table></figure></li>\n<li>如果…在调用函数的语句中，则表示传入的数组(索引数组)将拆分成多个参数<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\"><span class=\"variable\">$a</span>, <span class=\"variable\">$b</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$a</span> + <span class=\"variable\">$b</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"number\">2</span>,<span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">add</span>(...<span class=\"variable\">$arr</span>);      <span class=\"comment\">//5</span></span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"title function_ invoke__\">add</span>(...[<span class=\"number\">1</span>]));  <span class=\"comment\">//没有任何输出</span></span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"title function_ invoke__\">add</span>(...[<span class=\"string\">&#x27;a&#x27;</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">&#x27;b&#x27;</span>=&gt;<span class=\"number\">2</span>]));  <span class=\"comment\">//没有任何输出</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"PHP中define和const的区别","abbrlink":"php-define-const","date":"2022-07-04T16:34:14.000Z","_content":"\n<div class=\"note info\">在PHP中，定义常量有两种方式： const、define；下面详细说下它们的区别：</div>\n\n\n- 1、const是表达式赋值定义一个常量，而define是一个函数，它接受三个参数\n- 2、const对定义的常量大小写敏感，而define可以通过函数的第三个参数来控制是否大小写敏感\n- 3、const可以类中使用，define不能\n- 4、const不能再条件语句中使用，而define可以\n- 5、const在使用上比define要简单便捷，并且编译速度要比Define来得快\n\n- 6、用法\ndefine常放在文件的开头\n```php\ndefined('ENV_PREFIX') or define('ENV_PREFIX', 'PHP_');\n```\nconst一般放在类里：\n```php\nclass A{\n\tconst STATUS_NORMAL = 1;\n\tconst STATUS_FILED = 2;\n}\n```","source":"_posts/PHP/其他/PHP中define和const的区别.md","raw":"---\ntitle: PHP中define和const的区别\nabbrlink: 'php-define-const'\ntags:  [define与const]\ncategories:  [PHP]\ndate: 2022-07-05 00:34:14\n---\n\n<div class=\"note info\">在PHP中，定义常量有两种方式： const、define；下面详细说下它们的区别：</div>\n\n\n- 1、const是表达式赋值定义一个常量，而define是一个函数，它接受三个参数\n- 2、const对定义的常量大小写敏感，而define可以通过函数的第三个参数来控制是否大小写敏感\n- 3、const可以类中使用，define不能\n- 4、const不能再条件语句中使用，而define可以\n- 5、const在使用上比define要简单便捷，并且编译速度要比Define来得快\n\n- 6、用法\ndefine常放在文件的开头\n```php\ndefined('ENV_PREFIX') or define('ENV_PREFIX', 'PHP_');\n```\nconst一般放在类里：\n```php\nclass A{\n\tconst STATUS_NORMAL = 1;\n\tconst STATUS_FILED = 2;\n}\n```","slug":"PHP/其他/PHP中define和const的区别","published":1,"updated":"2024-10-18T01:46:52.501Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2ur006goshgd44t7c0i","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">在PHP中，定义常量有两种方式： const、define；下面详细说下它们的区别：</div>\n\n\n<ul>\n<li>1、const是表达式赋值定义一个常量，而define是一个函数，它接受三个参数</li>\n<li>2、const对定义的常量大小写敏感，而define可以通过函数的第三个参数来控制是否大小写敏感</li>\n<li>3、const可以类中使用，define不能</li>\n<li>4、const不能再条件语句中使用，而define可以</li>\n<li><p>5、const在使用上比define要简单便捷，并且编译速度要比Define来得快</p>\n</li>\n<li><p>6、用法<br>define常放在文件的开头</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_ invoke__\">defined</span>(<span class=\"string\">'ENV_PREFIX'</span>) <span class=\"keyword\">or</span> <span class=\"title function_ invoke__\">define</span>(<span class=\"string\">'ENV_PREFIX'</span>, <span class=\"string\">'PHP_'</span>);</span><br></pre></td></tr></tbody></table></figure>\n<p>const一般放在类里：</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>{</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> <span class=\"variable constant_\">STATUS_NORMAL</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> <span class=\"variable constant_\">STATUS_FILED</span> = <span class=\"number\">2</span>;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure></li>\n</ul>\n","excerpt":"","more":"<div class=\"note info\">在PHP中，定义常量有两种方式： const、define；下面详细说下它们的区别：</div>\n\n\n<ul>\n<li>1、const是表达式赋值定义一个常量，而define是一个函数，它接受三个参数</li>\n<li>2、const对定义的常量大小写敏感，而define可以通过函数的第三个参数来控制是否大小写敏感</li>\n<li>3、const可以类中使用，define不能</li>\n<li>4、const不能再条件语句中使用，而define可以</li>\n<li><p>5、const在使用上比define要简单便捷，并且编译速度要比Define来得快</p>\n</li>\n<li><p>6、用法<br>define常放在文件的开头</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_ invoke__\">defined</span>(<span class=\"string\">&#x27;ENV_PREFIX&#x27;</span>) <span class=\"keyword\">or</span> <span class=\"title function_ invoke__\">define</span>(<span class=\"string\">&#x27;ENV_PREFIX&#x27;</span>, <span class=\"string\">&#x27;PHP_&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<p>const一般放在类里：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> <span class=\"variable constant_\">STATUS_NORMAL</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> <span class=\"variable constant_\">STATUS_FILED</span> = <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"PHP中if else的优化方案","abbrlink":"php-if-else","date":"2022-10-18T14:52:19.000Z","updated":"2022-10-18T14:52:19.000Z","_content":"\n<div class=\"note info\">前言：在项目开发中，经常会遇到多个复杂if else的情况，下面说说这种情况的优化方案。</div>\n\n### 提前return\n 让正常流程走主干，非正常流程提前return，去除不必要的else，适用于函数参数校验。\n- 优化前\n```php\n    if (condition){\n        doSomething\n    }else{\n        return ;\n    }\n```\n- 优化后\n```php\n    if (!condition){\n        return ;\n    }\n    doSomething\n```\n\n### 使用三目运算符\n 适用于根据条件给变量赋值。\n- 优化前\n```php\n    if (condition){\n        $status = 1;\n    }else{\n        $status = 0;\n    }\n```\n- 优化后\n```php\n    $status = condition ? 1 : 0;\n```\n\n### 合并条件表达式\n- 优化前\n```php\n    if (condition1){\n        return true;\n    }\n    \n    if (condition2){\n        return true;\n    }else{\n        return false;\n    }\n```\n- 优化后\n```php\n    if (condition1 || condition2){\n        return true;\n    }else{\n        return false;\n    }\n```\n\n### 使用switch case优化\n php8可以使用match表达式\n- 优化前\n```php\n    class A{\n        public static function handle(string $act, int $userId){\n            if ($act == 'sign in') {\n                self::sign($userId);\n            } elseif ($act == 'register user') {\n                self::register($userId);\n            } elseif ($act == 'change password') {\n                self::changePwd($userId);\n            }\n        }\n    \n        protected static function sign(int $userId){}\n    \n        protected static function register(int $userId){}\n    \n        protected static function changePwd(int $userId){}\n    \n    }\n```\n- 优化后\n```php\n    class A{\n        public static function handle(string $act, int $userId){\n            switch ($act) {\n                case 'sign in':\n                    self::sign($userId);\n                    break;\n                case 'register user':\n                    self::register($userId);\n                    break;\n                case 'change password':\n                    self::changePwd($userId);\n                    break;\n                default:\n                    break;\n            }\n        }\n    \n        protected static function sign(int $userId){}\n    \n        protected static function register(int $userId){}\n    \n        protected static function changePwd(int $userId){}\n    \n    }\n```\n效果：和原来的差不多，每次新增方法后还得修改代码。\n\n### 使用枚举\n- 优化前\n```php\n    if ($status == 0){\n        return '待支付';\n    }elseif($status == 1){\n        return '已支付';\n    }else{\n        return '支付失败';\n    }\n```\n- 优化后\n```php\n    $orderStatus = [\n        0 => '待支付',\n        1 => '已支付',\n        2 => '支付失败',\n    ];\n    \n    return $orderStatus[$status];\n```\n\n### 表驱动法\n- 优化前\n```php\n    class A{\n        public static function handle(string $act, int $userId){\n            if ($act == 'sign in') {\n                self::sign($userId);\n            } elseif ($act == 'register user') {\n                self::register($userId);\n            } elseif ($act == 'change password') {\n                self::changePwd($userId);\n            }\n        }\n    \n        protected static function sign(int $userId){}\n    \n        protected static function register(int $userId){}\n    \n        protected static function changePwd(int $userId){}\n    \n    }\n```\n- 优化后\n```php\n    class A{\n        private static $acts = [\n            'sign in' => 'sign',\n            'register use' => 'register',\n            'change password' => 'changePwd',\n        ];\n    \n        public static function handle(string $act, int $userId){\n            $fun = !empty($act) && isset(self::$acts[$act]) ? self::$acts[$act] : null;\n            if ($fun) call_user_func($fun, $userId);\n        }\n    \n        protected static function sign(int $userId){}\n    \n        protected static function register(int $userId){}\n    \n        protected static function changePwd(int $userId){}\n    \n    }\n```\n效果：新增方法后，只需修改配置项，不用变更其他代码。\n\n### 策略模式+工厂方法消除if-else\n参考：https://www.phpmianshi.com/?id=197","source":"_posts/PHP/其他/PHP中if else的优化方案.md","raw":"---\ntitle: PHP中if else的优化方案\ntags: [PHP笔记]\ncategories: [PHP]\nabbrlink: 'php-if-else'\ndate: 2022-10-18 22:52:19\nupdated: 2022-10-18 22:52:19\n---\n\n<div class=\"note info\">前言：在项目开发中，经常会遇到多个复杂if else的情况，下面说说这种情况的优化方案。</div>\n\n### 提前return\n 让正常流程走主干，非正常流程提前return，去除不必要的else，适用于函数参数校验。\n- 优化前\n```php\n    if (condition){\n        doSomething\n    }else{\n        return ;\n    }\n```\n- 优化后\n```php\n    if (!condition){\n        return ;\n    }\n    doSomething\n```\n\n### 使用三目运算符\n 适用于根据条件给变量赋值。\n- 优化前\n```php\n    if (condition){\n        $status = 1;\n    }else{\n        $status = 0;\n    }\n```\n- 优化后\n```php\n    $status = condition ? 1 : 0;\n```\n\n### 合并条件表达式\n- 优化前\n```php\n    if (condition1){\n        return true;\n    }\n    \n    if (condition2){\n        return true;\n    }else{\n        return false;\n    }\n```\n- 优化后\n```php\n    if (condition1 || condition2){\n        return true;\n    }else{\n        return false;\n    }\n```\n\n### 使用switch case优化\n php8可以使用match表达式\n- 优化前\n```php\n    class A{\n        public static function handle(string $act, int $userId){\n            if ($act == 'sign in') {\n                self::sign($userId);\n            } elseif ($act == 'register user') {\n                self::register($userId);\n            } elseif ($act == 'change password') {\n                self::changePwd($userId);\n            }\n        }\n    \n        protected static function sign(int $userId){}\n    \n        protected static function register(int $userId){}\n    \n        protected static function changePwd(int $userId){}\n    \n    }\n```\n- 优化后\n```php\n    class A{\n        public static function handle(string $act, int $userId){\n            switch ($act) {\n                case 'sign in':\n                    self::sign($userId);\n                    break;\n                case 'register user':\n                    self::register($userId);\n                    break;\n                case 'change password':\n                    self::changePwd($userId);\n                    break;\n                default:\n                    break;\n            }\n        }\n    \n        protected static function sign(int $userId){}\n    \n        protected static function register(int $userId){}\n    \n        protected static function changePwd(int $userId){}\n    \n    }\n```\n效果：和原来的差不多，每次新增方法后还得修改代码。\n\n### 使用枚举\n- 优化前\n```php\n    if ($status == 0){\n        return '待支付';\n    }elseif($status == 1){\n        return '已支付';\n    }else{\n        return '支付失败';\n    }\n```\n- 优化后\n```php\n    $orderStatus = [\n        0 => '待支付',\n        1 => '已支付',\n        2 => '支付失败',\n    ];\n    \n    return $orderStatus[$status];\n```\n\n### 表驱动法\n- 优化前\n```php\n    class A{\n        public static function handle(string $act, int $userId){\n            if ($act == 'sign in') {\n                self::sign($userId);\n            } elseif ($act == 'register user') {\n                self::register($userId);\n            } elseif ($act == 'change password') {\n                self::changePwd($userId);\n            }\n        }\n    \n        protected static function sign(int $userId){}\n    \n        protected static function register(int $userId){}\n    \n        protected static function changePwd(int $userId){}\n    \n    }\n```\n- 优化后\n```php\n    class A{\n        private static $acts = [\n            'sign in' => 'sign',\n            'register use' => 'register',\n            'change password' => 'changePwd',\n        ];\n    \n        public static function handle(string $act, int $userId){\n            $fun = !empty($act) && isset(self::$acts[$act]) ? self::$acts[$act] : null;\n            if ($fun) call_user_func($fun, $userId);\n        }\n    \n        protected static function sign(int $userId){}\n    \n        protected static function register(int $userId){}\n    \n        protected static function changePwd(int $userId){}\n    \n    }\n```\n效果：新增方法后，只需修改配置项，不用变更其他代码。\n\n### 策略模式+工厂方法消除if-else\n参考：https://www.phpmianshi.com/?id=197","slug":"PHP/其他/PHP中if else的优化方案","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2us006ioshgflkm9z7t","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">前言：在项目开发中，经常会遇到多个复杂if else的情况，下面说说这种情况的优化方案。</div>\n\n<h3 id=\"提前return\"><a href=\"#提前return\" class=\"headerlink\" title=\"提前return\"></a>提前return</h3><p> 让正常流程走主干，非正常流程提前return，去除不必要的else，适用于函数参数校验。</p>\n<ul>\n<li>优化前<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (condition){</span><br><span class=\"line\">    doSomething</span><br><span class=\"line\">}<span class=\"keyword\">else</span>{</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (!condition){</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">}</span><br><span class=\"line\">doSomething</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<h3 id=\"使用三目运算符\"><a href=\"#使用三目运算符\" class=\"headerlink\" title=\"使用三目运算符\"></a>使用三目运算符</h3><p> 适用于根据条件给变量赋值。</p>\n<ul>\n<li>优化前<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (condition){</span><br><span class=\"line\">    <span class=\"variable\">$status</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\">}<span class=\"keyword\">else</span>{</span><br><span class=\"line\">    <span class=\"variable\">$status</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$status</span> = condition ? <span class=\"number\">1</span> : <span class=\"number\">0</span>;</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<h3 id=\"合并条件表达式\"><a href=\"#合并条件表达式\" class=\"headerlink\" title=\"合并条件表达式\"></a>合并条件表达式</h3><ul>\n<li>优化前<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (condition1){</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (condition2){</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">}<span class=\"keyword\">else</span>{</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (condition1 || condition2){</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">}<span class=\"keyword\">else</span>{</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<h3 id=\"使用switch-case优化\"><a href=\"#使用switch-case优化\" class=\"headerlink\" title=\"使用switch case优化\"></a>使用switch case优化</h3><p> php8可以使用match表达式</p>\n<ul>\n<li>优化前<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$act</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$act</span> == <span class=\"string\">'sign in'</span>) {</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">sign</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        } <span class=\"keyword\">elseif</span> (<span class=\"variable\">$act</span> == <span class=\"string\">'register user'</span>) {</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">register</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        } <span class=\"keyword\">elseif</span> (<span class=\"variable\">$act</span> == <span class=\"string\">'change password'</span>) {</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">changePwd</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sign</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">register</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">changePwd</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$act</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (<span class=\"variable\">$act</span>) {</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">'sign in'</span>:</span><br><span class=\"line\">                <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">sign</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">'register user'</span>:</span><br><span class=\"line\">                <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">register</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">'change password'</span>:</span><br><span class=\"line\">                <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">changePwd</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sign</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">register</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">changePwd</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n效果：和原来的差不多，每次新增方法后还得修改代码。</li>\n</ul>\n<h3 id=\"使用枚举\"><a href=\"#使用枚举\" class=\"headerlink\" title=\"使用枚举\"></a>使用枚举</h3><ul>\n<li>优化前<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"variable\">$status</span> == <span class=\"number\">0</span>){</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'待支付'</span>;</span><br><span class=\"line\">}<span class=\"keyword\">elseif</span>(<span class=\"variable\">$status</span> == <span class=\"number\">1</span>){</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'已支付'</span>;</span><br><span class=\"line\">}<span class=\"keyword\">else</span>{</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'支付失败'</span>;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$orderStatus</span> = [</span><br><span class=\"line\">    <span class=\"number\">0</span> =&gt; <span class=\"string\">'待支付'</span>,</span><br><span class=\"line\">    <span class=\"number\">1</span> =&gt; <span class=\"string\">'已支付'</span>,</span><br><span class=\"line\">    <span class=\"number\">2</span> =&gt; <span class=\"string\">'支付失败'</span>,</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"variable\">$orderStatus</span>[<span class=\"variable\">$status</span>];</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<h3 id=\"表驱动法\"><a href=\"#表驱动法\" class=\"headerlink\" title=\"表驱动法\"></a>表驱动法</h3><ul>\n<li>优化前<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$act</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$act</span> == <span class=\"string\">'sign in'</span>) {</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">sign</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        } <span class=\"keyword\">elseif</span> (<span class=\"variable\">$act</span> == <span class=\"string\">'register user'</span>) {</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">register</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        } <span class=\"keyword\">elseif</span> (<span class=\"variable\">$act</span> == <span class=\"string\">'change password'</span>) {</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">changePwd</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sign</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">register</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">changePwd</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"variable\">$acts</span> = [</span><br><span class=\"line\">        <span class=\"string\">'sign in'</span> =&gt; <span class=\"string\">'sign'</span>,</span><br><span class=\"line\">        <span class=\"string\">'register use'</span> =&gt; <span class=\"string\">'register'</span>,</span><br><span class=\"line\">        <span class=\"string\">'change password'</span> =&gt; <span class=\"string\">'changePwd'</span>,</span><br><span class=\"line\">    ];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$act</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$fun</span> = !<span class=\"keyword\">empty</span>(<span class=\"variable\">$act</span>) &amp;&amp; <span class=\"keyword\">isset</span>(<span class=\"built_in\">self</span>::<span class=\"variable\">$acts</span>[<span class=\"variable\">$act</span>]) ? <span class=\"built_in\">self</span>::<span class=\"variable\">$acts</span>[<span class=\"variable\">$act</span>] : <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$fun</span>) <span class=\"title function_ invoke__\">call_user_func</span>(<span class=\"variable\">$fun</span>, <span class=\"variable\">$userId</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sign</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">register</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">changePwd</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n效果：新增方法后，只需修改配置项，不用变更其他代码。</li>\n</ul>\n<h3 id=\"策略模式-工厂方法消除if-else\"><a href=\"#策略模式-工厂方法消除if-else\" class=\"headerlink\" title=\"策略模式+工厂方法消除if-else\"></a>策略模式+工厂方法消除if-else</h3><p>参考：<a href=\"https://www.phpmianshi.com/?id=197\">https://www.phpmianshi.com/?id=197</a></p>\n","excerpt":"","more":"<div class=\"note info\">前言：在项目开发中，经常会遇到多个复杂if else的情况，下面说说这种情况的优化方案。</div>\n\n<h3 id=\"提前return\"><a href=\"#提前return\" class=\"headerlink\" title=\"提前return\"></a>提前return</h3><p> 让正常流程走主干，非正常流程提前return，去除不必要的else，适用于函数参数校验。</p>\n<ul>\n<li>优化前<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (condition)&#123;</span><br><span class=\"line\">    doSomething</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (!condition)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">doSomething</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"使用三目运算符\"><a href=\"#使用三目运算符\" class=\"headerlink\" title=\"使用三目运算符\"></a>使用三目运算符</h3><p> 适用于根据条件给变量赋值。</p>\n<ul>\n<li>优化前<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (condition)&#123;</span><br><span class=\"line\">    <span class=\"variable\">$status</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$status</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$status</span> = condition ? <span class=\"number\">1</span> : <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"合并条件表达式\"><a href=\"#合并条件表达式\" class=\"headerlink\" title=\"合并条件表达式\"></a>合并条件表达式</h3><ul>\n<li>优化前<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (condition1)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (condition2)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (condition1 || condition2)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"使用switch-case优化\"><a href=\"#使用switch-case优化\" class=\"headerlink\" title=\"使用switch case优化\"></a>使用switch case优化</h3><p> php8可以使用match表达式</p>\n<ul>\n<li>优化前<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$act</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$act</span> == <span class=\"string\">&#x27;sign in&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">sign</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">elseif</span> (<span class=\"variable\">$act</span> == <span class=\"string\">&#x27;register user&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">register</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">elseif</span> (<span class=\"variable\">$act</span> == <span class=\"string\">&#x27;change password&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">changePwd</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sign</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">register</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">changePwd</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$act</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">switch</span> (<span class=\"variable\">$act</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;sign in&#x27;</span>:</span><br><span class=\"line\">                <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">sign</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;register user&#x27;</span>:</span><br><span class=\"line\">                <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">register</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"string\">&#x27;change password&#x27;</span>:</span><br><span class=\"line\">                <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">changePwd</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">default</span>:</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sign</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">register</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">changePwd</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n效果：和原来的差不多，每次新增方法后还得修改代码。</li>\n</ul>\n<h3 id=\"使用枚举\"><a href=\"#使用枚举\" class=\"headerlink\" title=\"使用枚举\"></a>使用枚举</h3><ul>\n<li>优化前<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"variable\">$status</span> == <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;待支付&#x27;</span>;</span><br><span class=\"line\">&#125;<span class=\"keyword\">elseif</span>(<span class=\"variable\">$status</span> == <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;已支付&#x27;</span>;</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;支付失败&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$orderStatus</span> = [</span><br><span class=\"line\">    <span class=\"number\">0</span> =&gt; <span class=\"string\">&#x27;待支付&#x27;</span>,</span><br><span class=\"line\">    <span class=\"number\">1</span> =&gt; <span class=\"string\">&#x27;已支付&#x27;</span>,</span><br><span class=\"line\">    <span class=\"number\">2</span> =&gt; <span class=\"string\">&#x27;支付失败&#x27;</span>,</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">return</span> <span class=\"variable\">$orderStatus</span>[<span class=\"variable\">$status</span>];</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"表驱动法\"><a href=\"#表驱动法\" class=\"headerlink\" title=\"表驱动法\"></a>表驱动法</h3><ul>\n<li>优化前<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$act</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$act</span> == <span class=\"string\">&#x27;sign in&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">sign</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">elseif</span> (<span class=\"variable\">$act</span> == <span class=\"string\">&#x27;register user&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">register</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">elseif</span> (<span class=\"variable\">$act</span> == <span class=\"string\">&#x27;change password&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">changePwd</span>(<span class=\"variable\">$userId</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sign</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">register</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">changePwd</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>优化后<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"variable\">$acts</span> = [</span><br><span class=\"line\">        <span class=\"string\">&#x27;sign in&#x27;</span> =&gt; <span class=\"string\">&#x27;sign&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;register use&#x27;</span> =&gt; <span class=\"string\">&#x27;register&#x27;</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;change password&#x27;</span> =&gt; <span class=\"string\">&#x27;changePwd&#x27;</span>,</span><br><span class=\"line\">    ];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$act</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$fun</span> = !<span class=\"keyword\">empty</span>(<span class=\"variable\">$act</span>) &amp;&amp; <span class=\"keyword\">isset</span>(<span class=\"built_in\">self</span>::<span class=\"variable\">$acts</span>[<span class=\"variable\">$act</span>]) ? <span class=\"built_in\">self</span>::<span class=\"variable\">$acts</span>[<span class=\"variable\">$act</span>] : <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$fun</span>) <span class=\"title function_ invoke__\">call_user_func</span>(<span class=\"variable\">$fun</span>, <span class=\"variable\">$userId</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sign</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">register</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">changePwd</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$userId</span></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n效果：新增方法后，只需修改配置项，不用变更其他代码。</li>\n</ul>\n<h3 id=\"策略模式-工厂方法消除if-else\"><a href=\"#策略模式-工厂方法消除if-else\" class=\"headerlink\" title=\"策略模式+工厂方法消除if-else\"></a>策略模式+工厂方法消除if-else</h3><p>参考：<a href=\"https://www.phpmianshi.com/?id=197\">https://www.phpmianshi.com/?id=197</a></p>\n"},{"title":"PHP中unset的一些使用","abbrlink":"php-unset","date":"2022-06-02T12:51:22.000Z","updated":"2022-06-02T12:51:22.000Z","_content":"\n<div class=\"note info\">前言：在PHP开发中，经常使用到unset来释放掉给定的变量；但有时候会有些问题，本文记录下。</div>\n\n- 如果需要去掉数组中的某些key，直接unset即可\n```php\n    $arr = ['id' => 5, 'name' => '张三', 'status' => 1];\n    unset($arr['status']);\n    print_r($arr);      // Array ( [id] => 5 [name] => 张三 )\n```\n\n- 也可以去掉二位数组中指定的key\n```php\n    $list = [\n        ['id' => 1, 'name' => '张三', 'status' => 1],\n        ['id' => 2, 'name' => '李四', 'status' => 0],\n        ['id' => 3, 'name' => '王五', 'status' => 1],\n    ];\n    array_walk($list, function (&$item) {\n        unset($item['status']);\n    });\n    \n    print_r($list);\n    // output:  Array ( [0] => Array ( [id] => 1 [name] => 张三 ) [1] => Array ( [id] => 2 [name] => 李四 ) [2] => Array ( [id] => 3 [name] => 王五 ) )\n```\n\n- 下面试下去掉一维数组中的空值\n```php\n    $data = ['test', 'haha', '', 'hello', null, 'good'];\n    array_walk($data, function (&$item) {\n        if (!$item) unset($item);\n    });\n    print_r($data);\n    // output: Array ( [0] => test [1] => haha [2] => [3] => hello [4] => [5] => good )\n```\n\n- 上面的代码没有达到预期的效果，那我们修改下试试\n```php\n    $data = ['test', 'haha', '', 'hello', null, 'good', ''];\n    array_walk($data, function ($item, $key) use (&$data) {\n        if (!$item) unset($data[$key]);\n    });\n    print_r($data);\n    // output: Array ( [0] => test [1] => haha [3] => hello [5] => good )\n```\n\n- 虽然达到了预期，但PHP给我们提供了更优雅的解决办法\n```php\n    $data = ['test', 'haha', '', 'hello', null, 'good', ''];\n    print_r(array_filter($data));\n    // output: Array ( [0] => test [1] => haha [3] => hello [5] => good )\n```","source":"_posts/PHP/其他/PHP中unset的一些使用.md","raw":"---\ntitle: PHP中unset的一些使用\ntags: [PHP笔记]\ncategories: [PHP]\nabbrlink: 'php-unset'\ndate: 2022-06-02 20:51:22\nupdated: 2022-06-02 20:51:22\n---\n\n<div class=\"note info\">前言：在PHP开发中，经常使用到unset来释放掉给定的变量；但有时候会有些问题，本文记录下。</div>\n\n- 如果需要去掉数组中的某些key，直接unset即可\n```php\n    $arr = ['id' => 5, 'name' => '张三', 'status' => 1];\n    unset($arr['status']);\n    print_r($arr);      // Array ( [id] => 5 [name] => 张三 )\n```\n\n- 也可以去掉二位数组中指定的key\n```php\n    $list = [\n        ['id' => 1, 'name' => '张三', 'status' => 1],\n        ['id' => 2, 'name' => '李四', 'status' => 0],\n        ['id' => 3, 'name' => '王五', 'status' => 1],\n    ];\n    array_walk($list, function (&$item) {\n        unset($item['status']);\n    });\n    \n    print_r($list);\n    // output:  Array ( [0] => Array ( [id] => 1 [name] => 张三 ) [1] => Array ( [id] => 2 [name] => 李四 ) [2] => Array ( [id] => 3 [name] => 王五 ) )\n```\n\n- 下面试下去掉一维数组中的空值\n```php\n    $data = ['test', 'haha', '', 'hello', null, 'good'];\n    array_walk($data, function (&$item) {\n        if (!$item) unset($item);\n    });\n    print_r($data);\n    // output: Array ( [0] => test [1] => haha [2] => [3] => hello [4] => [5] => good )\n```\n\n- 上面的代码没有达到预期的效果，那我们修改下试试\n```php\n    $data = ['test', 'haha', '', 'hello', null, 'good', ''];\n    array_walk($data, function ($item, $key) use (&$data) {\n        if (!$item) unset($data[$key]);\n    });\n    print_r($data);\n    // output: Array ( [0] => test [1] => haha [3] => hello [5] => good )\n```\n\n- 虽然达到了预期，但PHP给我们提供了更优雅的解决办法\n```php\n    $data = ['test', 'haha', '', 'hello', null, 'good', ''];\n    print_r(array_filter($data));\n    // output: Array ( [0] => test [1] => haha [3] => hello [5] => good )\n```","slug":"PHP/其他/PHP中unset的一些使用","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2us006moshgal9jcdr3","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">前言：在PHP开发中，经常使用到unset来释放掉给定的变量；但有时候会有些问题，本文记录下。</div>\n\n<ul>\n<li><p>如果需要去掉数组中的某些key，直接unset即可</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"string\">'id'</span> =&gt; <span class=\"number\">5</span>, <span class=\"string\">'name'</span> =&gt; <span class=\"string\">'张三'</span>, <span class=\"string\">'status'</span> =&gt; <span class=\"number\">1</span>];</span><br><span class=\"line\"><span class=\"keyword\">unset</span>(<span class=\"variable\">$arr</span>[<span class=\"string\">'status'</span>]);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$arr</span>);      <span class=\"comment\">// Array ( [id] =&gt; 5 [name] =&gt; 张三 )</span></span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>也可以去掉二位数组中指定的key</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$list</span> = [</span><br><span class=\"line\">    [<span class=\"string\">'id'</span> =&gt; <span class=\"number\">1</span>, <span class=\"string\">'name'</span> =&gt; <span class=\"string\">'张三'</span>, <span class=\"string\">'status'</span> =&gt; <span class=\"number\">1</span>],</span><br><span class=\"line\">    [<span class=\"string\">'id'</span> =&gt; <span class=\"number\">2</span>, <span class=\"string\">'name'</span> =&gt; <span class=\"string\">'李四'</span>, <span class=\"string\">'status'</span> =&gt; <span class=\"number\">0</span>],</span><br><span class=\"line\">    [<span class=\"string\">'id'</span> =&gt; <span class=\"number\">3</span>, <span class=\"string\">'name'</span> =&gt; <span class=\"string\">'王五'</span>, <span class=\"string\">'status'</span> =&gt; <span class=\"number\">1</span>],</span><br><span class=\"line\">];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">array_walk</span>(<span class=\"variable\">$list</span>, function (&amp;<span class=\"variable\">$item</span>) {</span><br><span class=\"line\">    <span class=\"keyword\">unset</span>(<span class=\"variable\">$item</span>[<span class=\"string\">'status'</span>]);</span><br><span class=\"line\">});</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$list</span>);</span><br><span class=\"line\"><span class=\"comment\">// output:  Array ( [0] =&gt; Array ( [id] =&gt; 1 [name] =&gt; 张三 ) [1] =&gt; Array ( [id] =&gt; 2 [name] =&gt; 李四 ) [2] =&gt; Array ( [id] =&gt; 3 [name] =&gt; 王五 ) )</span></span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>下面试下去掉一维数组中的空值</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$data</span> = [<span class=\"string\">'test'</span>, <span class=\"string\">'haha'</span>, <span class=\"string\">''</span>, <span class=\"string\">'hello'</span>, <span class=\"literal\">null</span>, <span class=\"string\">'good'</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">array_walk</span>(<span class=\"variable\">$data</span>, function (&amp;<span class=\"variable\">$item</span>) {</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"variable\">$item</span>) <span class=\"keyword\">unset</span>(<span class=\"variable\">$item</span>);</span><br><span class=\"line\">});</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$data</span>);</span><br><span class=\"line\"><span class=\"comment\">// output: Array ( [0] =&gt; test [1] =&gt; haha [2] =&gt; [3] =&gt; hello [4] =&gt; [5] =&gt; good )</span></span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>上面的代码没有达到预期的效果，那我们修改下试试</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$data</span> = [<span class=\"string\">'test'</span>, <span class=\"string\">'haha'</span>, <span class=\"string\">''</span>, <span class=\"string\">'hello'</span>, <span class=\"literal\">null</span>, <span class=\"string\">'good'</span>, <span class=\"string\">''</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">array_walk</span>(<span class=\"variable\">$data</span>, function (<span class=\"variable\">$item</span>, <span class=\"variable\">$key</span>) <span class=\"keyword\">use</span> (&amp;$<span class=\"title\">data</span>) {</span><br><span class=\"line\">    <span class=\"title\">if</span> (!$<span class=\"title\">item</span>) <span class=\"title\">unset</span>($<span class=\"title\">data</span>[$<span class=\"title\">key</span>]);</span><br><span class=\"line\">});</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$data</span>);</span><br><span class=\"line\"><span class=\"comment\">// output: Array ( [0] =&gt; test [1] =&gt; haha [3] =&gt; hello [5] =&gt; good )</span></span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>虽然达到了预期，但PHP给我们提供了更优雅的解决办法</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$data</span> = [<span class=\"string\">'test'</span>, <span class=\"string\">'haha'</span>, <span class=\"string\">''</span>, <span class=\"string\">'hello'</span>, <span class=\"literal\">null</span>, <span class=\"string\">'good'</span>, <span class=\"string\">''</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"title function_ invoke__\">array_filter</span>(<span class=\"variable\">$data</span>));</span><br><span class=\"line\"><span class=\"comment\">// output: Array ( [0] =&gt; test [1] =&gt; haha [3] =&gt; hello [5] =&gt; good )</span></span><br></pre></td></tr></tbody></table></figure></li>\n</ul>\n","excerpt":"","more":"<div class=\"note info\">前言：在PHP开发中，经常使用到unset来释放掉给定的变量；但有时候会有些问题，本文记录下。</div>\n\n<ul>\n<li><p>如果需要去掉数组中的某些key，直接unset即可</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"string\">&#x27;id&#x27;</span> =&gt; <span class=\"number\">5</span>, <span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;张三&#x27;</span>, <span class=\"string\">&#x27;status&#x27;</span> =&gt; <span class=\"number\">1</span>];</span><br><span class=\"line\"><span class=\"keyword\">unset</span>(<span class=\"variable\">$arr</span>[<span class=\"string\">&#x27;status&#x27;</span>]);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$arr</span>);      <span class=\"comment\">// Array ( [id] =&gt; 5 [name] =&gt; 张三 )</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>也可以去掉二位数组中指定的key</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$list</span> = [</span><br><span class=\"line\">    [<span class=\"string\">&#x27;id&#x27;</span> =&gt; <span class=\"number\">1</span>, <span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;张三&#x27;</span>, <span class=\"string\">&#x27;status&#x27;</span> =&gt; <span class=\"number\">1</span>],</span><br><span class=\"line\">    [<span class=\"string\">&#x27;id&#x27;</span> =&gt; <span class=\"number\">2</span>, <span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;李四&#x27;</span>, <span class=\"string\">&#x27;status&#x27;</span> =&gt; <span class=\"number\">0</span>],</span><br><span class=\"line\">    [<span class=\"string\">&#x27;id&#x27;</span> =&gt; <span class=\"number\">3</span>, <span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;王五&#x27;</span>, <span class=\"string\">&#x27;status&#x27;</span> =&gt; <span class=\"number\">1</span>],</span><br><span class=\"line\">];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">array_walk</span>(<span class=\"variable\">$list</span>, function (&amp;<span class=\"variable\">$item</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">unset</span>(<span class=\"variable\">$item</span>[<span class=\"string\">&#x27;status&#x27;</span>]);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$list</span>);</span><br><span class=\"line\"><span class=\"comment\">// output:  Array ( [0] =&gt; Array ( [id] =&gt; 1 [name] =&gt; 张三 ) [1] =&gt; Array ( [id] =&gt; 2 [name] =&gt; 李四 ) [2] =&gt; Array ( [id] =&gt; 3 [name] =&gt; 王五 ) )</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>下面试下去掉一维数组中的空值</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$data</span> = [<span class=\"string\">&#x27;test&#x27;</span>, <span class=\"string\">&#x27;haha&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;hello&#x27;</span>, <span class=\"literal\">null</span>, <span class=\"string\">&#x27;good&#x27;</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">array_walk</span>(<span class=\"variable\">$data</span>, function (&amp;<span class=\"variable\">$item</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"variable\">$item</span>) <span class=\"keyword\">unset</span>(<span class=\"variable\">$item</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$data</span>);</span><br><span class=\"line\"><span class=\"comment\">// output: Array ( [0] =&gt; test [1] =&gt; haha [2] =&gt; [3] =&gt; hello [4] =&gt; [5] =&gt; good )</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>上面的代码没有达到预期的效果，那我们修改下试试</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$data</span> = [<span class=\"string\">&#x27;test&#x27;</span>, <span class=\"string\">&#x27;haha&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;hello&#x27;</span>, <span class=\"literal\">null</span>, <span class=\"string\">&#x27;good&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">array_walk</span>(<span class=\"variable\">$data</span>, function (<span class=\"variable\">$item</span>, <span class=\"variable\">$key</span>) <span class=\"keyword\">use</span> (&amp;$<span class=\"title\">data</span>) &#123;</span><br><span class=\"line\">    <span class=\"title\">if</span> (!$<span class=\"title\">item</span>) <span class=\"title\">unset</span>($<span class=\"title\">data</span>[$<span class=\"title\">key</span>]);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$data</span>);</span><br><span class=\"line\"><span class=\"comment\">// output: Array ( [0] =&gt; test [1] =&gt; haha [3] =&gt; hello [5] =&gt; good )</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>虽然达到了预期，但PHP给我们提供了更优雅的解决办法</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$data</span> = [<span class=\"string\">&#x27;test&#x27;</span>, <span class=\"string\">&#x27;haha&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;hello&#x27;</span>, <span class=\"literal\">null</span>, <span class=\"string\">&#x27;good&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"title function_ invoke__\">array_filter</span>(<span class=\"variable\">$data</span>));</span><br><span class=\"line\"><span class=\"comment\">// output: Array ( [0] =&gt; test [1] =&gt; haha [3] =&gt; hello [5] =&gt; good )</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"PHP中isset与array_key_exists的性能对比","abbrlink":"php-isset-array_key_exists","date":"2022-06-02T12:20:32.000Z","updated":"2022-06-02T12:20:32.000Z","_content":"\n<div class=\"note info\">前言：在开发中，之前判断数组中的键是否存在，我一直使用isset；今天看到有同事大量使用array_key_exists，闲来没事就测试了一下它们的性能。</div>\n\n```php\n    $arr = ['id' => 3242, 'name' => 'test', 'age' => null];\n\n    $time1 = microtime(true);\n    for ($i = 0; $i < 100000000; $i++) {\n        $tmp = isset($arr['age']);\n    }\n    \n    echo microtime(true) - $time1;\n    \n    echo PHP_EOL;\n    $time2 = microtime(true);\n    for ($i = 0; $i < 100000000; $i++) {\n        $tmp1 = array_key_exists('age', $arr);\n    }\n    \n    echo microtime(true) - $time2;\n```\n上面的代码运行结果为：<code>\n2.1061670780182\n3.1671521663666\n</code>\n\n经测试：isset的效率要高于array_key_exists。\n\n","source":"_posts/PHP/其他/PHP中isset与array_key_exists的性能对比.md","raw":"---\ntitle: PHP中isset与array_key_exists的性能对比\ntags: [PHP笔记]\ncategories: [PHP]\nabbrlink: 'php-isset-array_key_exists'\ndate: 2022-06-02 20:20:32\nupdated: 2022-06-02 20:20:32\n---\n\n<div class=\"note info\">前言：在开发中，之前判断数组中的键是否存在，我一直使用isset；今天看到有同事大量使用array_key_exists，闲来没事就测试了一下它们的性能。</div>\n\n```php\n    $arr = ['id' => 3242, 'name' => 'test', 'age' => null];\n\n    $time1 = microtime(true);\n    for ($i = 0; $i < 100000000; $i++) {\n        $tmp = isset($arr['age']);\n    }\n    \n    echo microtime(true) - $time1;\n    \n    echo PHP_EOL;\n    $time2 = microtime(true);\n    for ($i = 0; $i < 100000000; $i++) {\n        $tmp1 = array_key_exists('age', $arr);\n    }\n    \n    echo microtime(true) - $time2;\n```\n上面的代码运行结果为：<code>\n2.1061670780182\n3.1671521663666\n</code>\n\n经测试：isset的效率要高于array_key_exists。\n\n","slug":"PHP/其他/PHP中isset与array_key_exists的性能对比","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ut006ooshg5exgab3b","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">前言：在开发中，之前判断数组中的键是否存在，我一直使用isset；今天看到有同事大量使用array_key_exists，闲来没事就测试了一下它们的性能。</div>\n\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"string\">'id'</span> =&gt; <span class=\"number\">3242</span>, <span class=\"string\">'name'</span> =&gt; <span class=\"string\">'test'</span>, <span class=\"string\">'age'</span> =&gt; <span class=\"literal\">null</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$time1</span> = <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">0</span>; <span class=\"variable\">$i</span> &lt; <span class=\"number\">100000000</span>; <span class=\"variable\">$i</span>++) {</span><br><span class=\"line\">    <span class=\"variable\">$tmp</span> = <span class=\"keyword\">isset</span>(<span class=\"variable\">$arr</span>[<span class=\"string\">'age'</span>]);</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>) - <span class=\"variable\">$time1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> PHP_EOL;</span><br><span class=\"line\"><span class=\"variable\">$time2</span> = <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">0</span>; <span class=\"variable\">$i</span> &lt; <span class=\"number\">100000000</span>; <span class=\"variable\">$i</span>++) {</span><br><span class=\"line\">    <span class=\"variable\">$tmp1</span> = <span class=\"title function_ invoke__\">array_key_exists</span>(<span class=\"string\">'age'</span>, <span class=\"variable\">$arr</span>);</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>) - <span class=\"variable\">$time2</span>;</span><br></pre></td></tr></tbody></table></figure>\n<p>上面的代码运行结果为：<code><br>2.1061670780182<br>3.1671521663666\n</code></p>\n<p>经测试：isset的效率要高于array_key_exists。</p>\n","excerpt":"","more":"<div class=\"note info\">前言：在开发中，之前判断数组中的键是否存在，我一直使用isset；今天看到有同事大量使用array_key_exists，闲来没事就测试了一下它们的性能。</div>\n\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"string\">&#x27;id&#x27;</span> =&gt; <span class=\"number\">3242</span>, <span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;test&#x27;</span>, <span class=\"string\">&#x27;age&#x27;</span> =&gt; <span class=\"literal\">null</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$time1</span> = <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">0</span>; <span class=\"variable\">$i</span> &lt; <span class=\"number\">100000000</span>; <span class=\"variable\">$i</span>++) &#123;</span><br><span class=\"line\">    <span class=\"variable\">$tmp</span> = <span class=\"keyword\">isset</span>(<span class=\"variable\">$arr</span>[<span class=\"string\">&#x27;age&#x27;</span>]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>) - <span class=\"variable\">$time1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> PHP_EOL;</span><br><span class=\"line\"><span class=\"variable\">$time2</span> = <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">0</span>; <span class=\"variable\">$i</span> &lt; <span class=\"number\">100000000</span>; <span class=\"variable\">$i</span>++) &#123;</span><br><span class=\"line\">    <span class=\"variable\">$tmp1</span> = <span class=\"title function_ invoke__\">array_key_exists</span>(<span class=\"string\">&#x27;age&#x27;</span>, <span class=\"variable\">$arr</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>) - <span class=\"variable\">$time2</span>;</span><br></pre></td></tr></table></figure>\n<p>上面的代码运行结果为：<code><br>2.1061670780182<br>3.1671521663666\n</code></p>\n<p>经测试：isset的效率要高于array_key_exists。</p>\n"},{"title":"PHP中不太常用的函数","abbrlink":"php-unusual-functions","date":"2022-05-08T08:28:55.000Z","updated":"2022-05-08T08:28:55.000Z","_content":"\n### 1. constant() \n   返回常量的值\n``` bash\n    define('DEV','test');\n    \n    var_dump(constant('DEV'));       //string(4) \"test\"     等同于var_dump(DEV);\n    var_dump(constant('SORT_ASC'));  //int(4)    等同于var_dump(SORT_ASC);\n    var_dump(constant(SORT_ASC));    //NULL\n    var_dump(TEST);                  //string(4) \"TEST\"\n``` \n   个人感觉作用不大，还不如直接使用常量呢，最多也就是判断常量是否被定义。","source":"_posts/PHP/其他/PHP中不太常用的函数.md","raw":"---\ntitle: PHP中不太常用的函数\ntags: [PHP]\ncategories: [PHP]\nabbrlink: 'php-unusual-functions'\ndate: 2022-05-08 16:28:55\nupdated: 2022-05-08 16:28:55\n---\n\n### 1. constant() \n   返回常量的值\n``` bash\n    define('DEV','test');\n    \n    var_dump(constant('DEV'));       //string(4) \"test\"     等同于var_dump(DEV);\n    var_dump(constant('SORT_ASC'));  //int(4)    等同于var_dump(SORT_ASC);\n    var_dump(constant(SORT_ASC));    //NULL\n    var_dump(TEST);                  //string(4) \"TEST\"\n``` \n   个人感觉作用不大，还不如直接使用常量呢，最多也就是判断常量是否被定义。","slug":"PHP/其他/PHP中不太常用的函数","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uu006roshg094y88ze","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-constant\"><a href=\"#1-constant\" class=\"headerlink\" title=\"1. constant()\"></a>1. constant()</h3><p>   返回常量的值<br></p><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define(<span class=\"string\">'DEV'</span>,<span class=\"string\">'test'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump(constant(<span class=\"string\">'DEV'</span>));       //string(4) <span class=\"string\">\"test\"</span>     等同于var_dump(DEV);</span><br><span class=\"line\">var_dump(constant(<span class=\"string\">'SORT_ASC'</span>));  //int(4)    等同于var_dump(SORT_ASC);</span><br><span class=\"line\">var_dump(constant(SORT_ASC));    //NULL</span><br><span class=\"line\">var_dump(TEST);                  //string(4) <span class=\"string\">\"TEST\"</span></span><br></pre></td></tr></tbody></table></figure><br>   个人感觉作用不大，还不如直接使用常量呢，最多也就是判断常量是否被定义。<p></p>\n","excerpt":"","more":"<h3 id=\"1-constant\"><a href=\"#1-constant\" class=\"headerlink\" title=\"1. constant()\"></a>1. constant()</h3><p>   返回常量的值<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define(<span class=\"string\">&#x27;DEV&#x27;</span>,<span class=\"string\">&#x27;test&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">var_dump(constant(<span class=\"string\">&#x27;DEV&#x27;</span>));       //string(4) <span class=\"string\">&quot;test&quot;</span>     等同于var_dump(DEV);</span><br><span class=\"line\">var_dump(constant(<span class=\"string\">&#x27;SORT_ASC&#x27;</span>));  //int(4)    等同于var_dump(SORT_ASC);</span><br><span class=\"line\">var_dump(constant(SORT_ASC));    //NULL</span><br><span class=\"line\">var_dump(TEST);                  //string(4) <span class=\"string\">&quot;TEST&quot;</span></span><br></pre></td></tr></table></figure><br>   个人感觉作用不大，还不如直接使用常量呢，最多也就是判断常量是否被定义。</p>\n"},{"title":"PHP中数组内容依次赋值给变量","abbrlink":"php-assign-array-values","date":"2022-05-08T08:59:22.000Z","updated":"2022-05-08T08:59:22.000Z","_content":"\n在日常开发过程中，经常需要把数组中的内容依次赋值给变量，可以使用list、[]、extract来处理。\n\n### 1. list($var1,$var2...) = $arr;\n   或者[$var1,$var2...] = $arr;\n   将数组中的值赋给一些变量\n   该函数只能用于索引数组，且数字索引从0开始。\n   如果对应的数字下标，则该变量赋值为null\n\n``` \n<?php\nlist($a, $b, $c) = ['Jone', 'Jam', 'Kav'];\nvar_dump($a, $b, $c);       //output：string(4) \"Jone\" string(3) \"Jam\" string(3) \"Kav\"\n\nlist($a, $b) = ['Jone', 'Jam', 'Kav'];\nvar_dump($a, $b);           //output：string(4) \"Jone\" string(3) \"Jam\"\n\nlist($a, $b, $c) = [2 => 'Jone', 3 => 'Jam', 4 => 'Kav'];\nvar_dump($a, $b, $c);       //output：NULL NULL string(4) \"Jone\"\n\nlist($a, $b, $c) = ['id' => 4, 2 => 'Jam', 'name' => 'Kav'];\nvar_dump($a, $b, $c);       //output：NULL NULL string(3) \"Jam\"\n``` \n   list()如果需要跳过某些值\n```\n$info = ['coffee', 'brown', 'caffeine'];\n[,$a,] = $info;\nvar_dump($a);\t// string(5) \"brown\"\n```\n\n### 2. extract(array,extract_rules,prefix);\n   从数组中将变量导入到当前的符号表\n   该函数使用数组键名作为变量名，使用数组键值作为变量值，进行依次赋值\n``` \nextract(['id' => 3, 'name' => 'Hoj']);\n/**\n * 在IDE中会提示错误，加上注释即可\n * @var $id\n * @var $name\n */\nvar_dump($id, $name);       //output：int(3) string(3) \"Hoj\"\n\nextract([3, 'name' => 'Hoj']);\nvar_dump($name);            //output：string(3) \"Hoj\"\n``` \n总结：一般索引数组用list，关联数组用extract。","source":"_posts/PHP/其他/PHP中数组内容依次赋值给变量.md","raw":"---\ntitle: PHP中数组内容依次赋值给变量\ntags: [PHP]\ncategories: [PHP]\nabbrlink: 'php-assign-array-values'\ndate: 2022-05-08 16:59:22\nupdated: 2022-05-08 16:59:22\n---\n\n在日常开发过程中，经常需要把数组中的内容依次赋值给变量，可以使用list、[]、extract来处理。\n\n### 1. list($var1,$var2...) = $arr;\n   或者[$var1,$var2...] = $arr;\n   将数组中的值赋给一些变量\n   该函数只能用于索引数组，且数字索引从0开始。\n   如果对应的数字下标，则该变量赋值为null\n\n``` \n<?php\nlist($a, $b, $c) = ['Jone', 'Jam', 'Kav'];\nvar_dump($a, $b, $c);       //output：string(4) \"Jone\" string(3) \"Jam\" string(3) \"Kav\"\n\nlist($a, $b) = ['Jone', 'Jam', 'Kav'];\nvar_dump($a, $b);           //output：string(4) \"Jone\" string(3) \"Jam\"\n\nlist($a, $b, $c) = [2 => 'Jone', 3 => 'Jam', 4 => 'Kav'];\nvar_dump($a, $b, $c);       //output：NULL NULL string(4) \"Jone\"\n\nlist($a, $b, $c) = ['id' => 4, 2 => 'Jam', 'name' => 'Kav'];\nvar_dump($a, $b, $c);       //output：NULL NULL string(3) \"Jam\"\n``` \n   list()如果需要跳过某些值\n```\n$info = ['coffee', 'brown', 'caffeine'];\n[,$a,] = $info;\nvar_dump($a);\t// string(5) \"brown\"\n```\n\n### 2. extract(array,extract_rules,prefix);\n   从数组中将变量导入到当前的符号表\n   该函数使用数组键名作为变量名，使用数组键值作为变量值，进行依次赋值\n``` \nextract(['id' => 3, 'name' => 'Hoj']);\n/**\n * 在IDE中会提示错误，加上注释即可\n * @var $id\n * @var $name\n */\nvar_dump($id, $name);       //output：int(3) string(3) \"Hoj\"\n\nextract([3, 'name' => 'Hoj']);\nvar_dump($name);            //output：string(3) \"Hoj\"\n``` \n总结：一般索引数组用list，关联数组用extract。","slug":"PHP/其他/PHP中数组内容依次赋值给变量","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uu006uoshgdvrdeaxn","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>在日常开发过程中，经常需要把数组中的内容依次赋值给变量，可以使用list、[]、extract来处理。</p>\n<h3 id=\"1-list-var1-var2…-arr\"><a href=\"#1-list-var1-var2…-arr\" class=\"headerlink\" title=\"1. list($var1,$var2…) = $arr;\"></a>1. list($var1,$var2…) = $arr;</h3><p>   或者[$var1,$var2…] = $arr;<br>   将数组中的值赋给一些变量<br>   该函数只能用于索引数组，且数字索引从0开始。<br>   如果对应的数字下标，则该变量赋值为null</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">list</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>) = [<span class=\"string\">'Jone'</span>, <span class=\"string\">'Jam'</span>, <span class=\"string\">'Kav'</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>);       <span class=\"comment\">//output：string(4) \"Jone\" string(3) \"Jam\" string(3) \"Kav\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">list</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>) = [<span class=\"string\">'Jone'</span>, <span class=\"string\">'Jam'</span>, <span class=\"string\">'Kav'</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>);           <span class=\"comment\">//output：string(4) \"Jone\" string(3) \"Jam\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">list</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>) = [<span class=\"number\">2</span> =&gt; <span class=\"string\">'Jone'</span>, <span class=\"number\">3</span> =&gt; <span class=\"string\">'Jam'</span>, <span class=\"number\">4</span> =&gt; <span class=\"string\">'Kav'</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>);       <span class=\"comment\">//output：NULL NULL string(4) \"Jone\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">list</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>) = [<span class=\"string\">'id'</span> =&gt; <span class=\"number\">4</span>, <span class=\"number\">2</span> =&gt; <span class=\"string\">'Jam'</span>, <span class=\"string\">'name'</span> =&gt; <span class=\"string\">'Kav'</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>);       <span class=\"comment\">//output：NULL NULL string(3) \"Jam\"</span></span><br></pre></td></tr></tbody></table></figure>\n<p>   list()如果需要跳过某些值<br></p><figure class=\"highlight awk\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$info</span> = [<span class=\"string\">'coffee'</span>, <span class=\"string\">'brown'</span>, <span class=\"string\">'caffeine'</span>];</span><br><span class=\"line\">[,<span class=\"variable\">$a</span>,] = <span class=\"variable\">$info</span>;</span><br><span class=\"line\">var_dump(<span class=\"variable\">$a</span>);\t<span class=\"regexp\">//</span> string(<span class=\"number\">5</span>) <span class=\"string\">\"brown\"</span></span><br></pre></td></tr></tbody></table></figure><p></p>\n<h3 id=\"2-extract-array-extract-rules-prefix\"><a href=\"#2-extract-array-extract-rules-prefix\" class=\"headerlink\" title=\"2. extract(array,extract_rules,prefix);\"></a>2. extract(array,extract_rules,prefix);</h3><p>   从数组中将变量导入到当前的符号表<br>   该函数使用数组键名作为变量名，使用数组键值作为变量值，进行依次赋值<br></p><figure class=\"highlight awk\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extract([<span class=\"string\">'id'</span> =&gt; <span class=\"number\">3</span>, <span class=\"string\">'name'</span> =&gt; <span class=\"string\">'Hoj'</span>]);</span><br><span class=\"line\">/**</span><br><span class=\"line\"> * 在IDE中会提示错误，加上注释即可</span><br><span class=\"line\"> * @var <span class=\"variable\">$id</span></span><br><span class=\"line\"> * @var <span class=\"variable\">$name</span></span><br><span class=\"line\"> */</span><br><span class=\"line\">var_dump(<span class=\"variable\">$id</span>, <span class=\"variable\">$name</span>);       <span class=\"regexp\">//</span>output：int(<span class=\"number\">3</span>) string(<span class=\"number\">3</span>) <span class=\"string\">\"Hoj\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">extract([<span class=\"number\">3</span>, <span class=\"string\">'name'</span> =&gt; <span class=\"string\">'Hoj'</span>]);</span><br><span class=\"line\">var_dump(<span class=\"variable\">$name</span>);            <span class=\"regexp\">//</span>output：string(<span class=\"number\">3</span>) <span class=\"string\">\"Hoj\"</span></span><br></pre></td></tr></tbody></table></figure><br>总结：一般索引数组用list，关联数组用extract。<p></p>\n","excerpt":"","more":"<p>在日常开发过程中，经常需要把数组中的内容依次赋值给变量，可以使用list、[]、extract来处理。</p>\n<h3 id=\"1-list-var1-var2…-arr\"><a href=\"#1-list-var1-var2…-arr\" class=\"headerlink\" title=\"1. list($var1,$var2…) = $arr;\"></a>1. list($var1,$var2…) = $arr;</h3><p>   或者[$var1,$var2…] = $arr;<br>   将数组中的值赋给一些变量<br>   该函数只能用于索引数组，且数字索引从0开始。<br>   如果对应的数字下标，则该变量赋值为null</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"><span class=\"keyword\">list</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>) = [<span class=\"string\">&#x27;Jone&#x27;</span>, <span class=\"string\">&#x27;Jam&#x27;</span>, <span class=\"string\">&#x27;Kav&#x27;</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>);       <span class=\"comment\">//output：string(4) &quot;Jone&quot; string(3) &quot;Jam&quot; string(3) &quot;Kav&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">list</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>) = [<span class=\"string\">&#x27;Jone&#x27;</span>, <span class=\"string\">&#x27;Jam&#x27;</span>, <span class=\"string\">&#x27;Kav&#x27;</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>);           <span class=\"comment\">//output：string(4) &quot;Jone&quot; string(3) &quot;Jam&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">list</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>) = [<span class=\"number\">2</span> =&gt; <span class=\"string\">&#x27;Jone&#x27;</span>, <span class=\"number\">3</span> =&gt; <span class=\"string\">&#x27;Jam&#x27;</span>, <span class=\"number\">4</span> =&gt; <span class=\"string\">&#x27;Kav&#x27;</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>);       <span class=\"comment\">//output：NULL NULL string(4) &quot;Jone&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">list</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>) = [<span class=\"string\">&#x27;id&#x27;</span> =&gt; <span class=\"number\">4</span>, <span class=\"number\">2</span> =&gt; <span class=\"string\">&#x27;Jam&#x27;</span>, <span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;Kav&#x27;</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$a</span>, <span class=\"variable\">$b</span>, <span class=\"variable\">$c</span>);       <span class=\"comment\">//output：NULL NULL string(3) &quot;Jam&quot;</span></span><br></pre></td></tr></table></figure>\n<p>   list()如果需要跳过某些值<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$info</span> = [<span class=\"string\">&#x27;coffee&#x27;</span>, <span class=\"string\">&#x27;brown&#x27;</span>, <span class=\"string\">&#x27;caffeine&#x27;</span>];</span><br><span class=\"line\">[,<span class=\"variable\">$a</span>,] = <span class=\"variable\">$info</span>;</span><br><span class=\"line\">var_dump(<span class=\"variable\">$a</span>);\t<span class=\"regexp\">//</span> string(<span class=\"number\">5</span>) <span class=\"string\">&quot;brown&quot;</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"2-extract-array-extract-rules-prefix\"><a href=\"#2-extract-array-extract-rules-prefix\" class=\"headerlink\" title=\"2. extract(array,extract_rules,prefix);\"></a>2. extract(array,extract_rules,prefix);</h3><p>   从数组中将变量导入到当前的符号表<br>   该函数使用数组键名作为变量名，使用数组键值作为变量值，进行依次赋值<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">extract([<span class=\"string\">&#x27;id&#x27;</span> =&gt; <span class=\"number\">3</span>, <span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;Hoj&#x27;</span>]);</span><br><span class=\"line\">/**</span><br><span class=\"line\"> * 在IDE中会提示错误，加上注释即可</span><br><span class=\"line\"> * @var <span class=\"variable\">$id</span></span><br><span class=\"line\"> * @var <span class=\"variable\">$name</span></span><br><span class=\"line\"> */</span><br><span class=\"line\">var_dump(<span class=\"variable\">$id</span>, <span class=\"variable\">$name</span>);       <span class=\"regexp\">//</span>output：int(<span class=\"number\">3</span>) string(<span class=\"number\">3</span>) <span class=\"string\">&quot;Hoj&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">extract([<span class=\"number\">3</span>, <span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;Hoj&#x27;</span>]);</span><br><span class=\"line\">var_dump(<span class=\"variable\">$name</span>);            <span class=\"regexp\">//</span>output：string(<span class=\"number\">3</span>) <span class=\"string\">&quot;Hoj&quot;</span></span><br></pre></td></tr></table></figure><br>总结：一般索引数组用list，关联数组用extract。</p>\n"},{"title":"php中，this、self、static的区别","abbrlink":"php-self-static","date":"2022-06-02T12:28:32.000Z","updated":"2022-06-02T12:28:32.000Z","_content":"\n\n- this指当前类，不能用于静态成员函数中，使用形式：$this->\n- self是对静态成员函数/变量的访问，使用形式：self::\n- static和self很接近，唯一区别在于：self调用的是本身代码片段的这个类；而static调用的是从堆内存中提取出来的，即访问的是当前实例化的那个类。\n\n下面看下测试代码：\n\n```php\nclass A{\n    public $name = 'Jams';\n    protected static $age = 26;\n\n    public function start(){\n        echo get_called_class() . '==>' . $this->name . '==>' . $this::$age;\n    }\n\n    public static function getAge(){\n        echo get_called_class() . '==>' . self::$age;\n    }\n\n    public static function getInfo(){\n        echo get_called_class() . '==>' . static::$age;\n    }\n}\n\nclass B extends A{\n    public $name = 'Kiv';\n    protected static $age = 20;\n}\n\n(new B())->start();\nB::getAge();\nB::getInfo();\n```\n输出结果为：<code>\nB==>Kiv==>20\nB==>26\nB==>20\n</code>","source":"_posts/PHP/其他/PHP中，this、self、static的区别.md","raw":"---\ntitle: php中，this、self、static的区别\ntags: [PHP笔记]\ncategories: [PHP]\nabbrlink: 'php-self-static'\ndate: 2022-06-02 20:28:32\nupdated: 2022-06-02 20:28:32\n---\n\n\n- this指当前类，不能用于静态成员函数中，使用形式：$this->\n- self是对静态成员函数/变量的访问，使用形式：self::\n- static和self很接近，唯一区别在于：self调用的是本身代码片段的这个类；而static调用的是从堆内存中提取出来的，即访问的是当前实例化的那个类。\n\n下面看下测试代码：\n\n```php\nclass A{\n    public $name = 'Jams';\n    protected static $age = 26;\n\n    public function start(){\n        echo get_called_class() . '==>' . $this->name . '==>' . $this::$age;\n    }\n\n    public static function getAge(){\n        echo get_called_class() . '==>' . self::$age;\n    }\n\n    public static function getInfo(){\n        echo get_called_class() . '==>' . static::$age;\n    }\n}\n\nclass B extends A{\n    public $name = 'Kiv';\n    protected static $age = 20;\n}\n\n(new B())->start();\nB::getAge();\nB::getInfo();\n```\n输出结果为：<code>\nB==>Kiv==>20\nB==>26\nB==>20\n</code>","slug":"PHP/其他/PHP中，this、self、static的区别","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uv006woshge5f9c8n1","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ul>\n<li>this指当前类，不能用于静态成员函数中，使用形式：$this-&gt;</li>\n<li>self是对静态成员函数/变量的访问，使用形式：self::</li>\n<li>static和self很接近，唯一区别在于：self调用的是本身代码片段的这个类；而static调用的是从堆内存中提取出来的，即访问的是当前实例化的那个类。</li>\n</ul>\n<p>下面看下测试代码：</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"variable\">$name</span> = <span class=\"string\">'Jams'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"variable\">$age</span> = <span class=\"number\">26</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">get_called_class</span>() . <span class=\"string\">'==&gt;'</span> . <span class=\"variable language_\">$this</span>-&gt;name . <span class=\"string\">'==&gt;'</span> . <span class=\"variable language_\">$this</span>::<span class=\"variable\">$age</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getAge</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">get_called_class</span>() . <span class=\"string\">'==&gt;'</span> . <span class=\"built_in\">self</span>::<span class=\"variable\">$age</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInfo</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">get_called_class</span>() . <span class=\"string\">'==&gt;'</span> . <span class=\"built_in\">static</span>::<span class=\"variable\">$age</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"variable\">$name</span> = <span class=\"string\">'Kiv'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"variable\">$age</span> = <span class=\"number\">20</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"keyword\">new</span> <span class=\"title function_ invoke__\">B</span>())-&gt;<span class=\"title function_ invoke__\">start</span>();</span><br><span class=\"line\">B::<span class=\"title function_ invoke__\">getAge</span>();</span><br><span class=\"line\">B::<span class=\"title function_ invoke__\">getInfo</span>();</span><br></pre></td></tr></tbody></table></figure>\n<p>输出结果为：<code><br>B==&gt;Kiv==&gt;20<br>B==&gt;26<br>B==&gt;20\n</code></p>\n","excerpt":"","more":"<ul>\n<li>this指当前类，不能用于静态成员函数中，使用形式：$this-&gt;</li>\n<li>self是对静态成员函数/变量的访问，使用形式：self::</li>\n<li>static和self很接近，唯一区别在于：self调用的是本身代码片段的这个类；而static调用的是从堆内存中提取出来的，即访问的是当前实例化的那个类。</li>\n</ul>\n<p>下面看下测试代码：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"variable\">$name</span> = <span class=\"string\">&#x27;Jams&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"variable\">$age</span> = <span class=\"number\">26</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">get_called_class</span>() . <span class=\"string\">&#x27;==&gt;&#x27;</span> . <span class=\"variable language_\">$this</span>-&gt;name . <span class=\"string\">&#x27;==&gt;&#x27;</span> . <span class=\"variable language_\">$this</span>::<span class=\"variable\">$age</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getAge</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">get_called_class</span>() . <span class=\"string\">&#x27;==&gt;&#x27;</span> . <span class=\"built_in\">self</span>::<span class=\"variable\">$age</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInfo</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">get_called_class</span>() . <span class=\"string\">&#x27;==&gt;&#x27;</span> . <span class=\"built_in\">static</span>::<span class=\"variable\">$age</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"variable\">$name</span> = <span class=\"string\">&#x27;Kiv&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"built_in\">static</span> <span class=\"variable\">$age</span> = <span class=\"number\">20</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"keyword\">new</span> <span class=\"title function_ invoke__\">B</span>())-&gt;<span class=\"title function_ invoke__\">start</span>();</span><br><span class=\"line\">B::<span class=\"title function_ invoke__\">getAge</span>();</span><br><span class=\"line\">B::<span class=\"title function_ invoke__\">getInfo</span>();</span><br></pre></td></tr></table></figure>\n<p>输出结果为：<code><br>B==&gt;Kiv==&gt;20<br>B==&gt;26<br>B==&gt;20\n</code></p>\n"},{"title":"PHP中，通过&改变变量的值，效率如何","abbrlink":"php-assignment","date":"2022-06-02T12:46:42.000Z","updated":"2022-06-02T12:46:42.000Z","_content":"\n\n在PHP中，通过&改变变量的值，效率如何呢，下面来测试一下。\n\n```php\n$arr = ['id' => null, 'name' => 'test', 'age' => null];\n\n$time1 = microtime(true);\n$tmp = &$arr;\nfor ($i = 0; $i < 100000000; $i++) {\n    $tmp['id'] = $i;\n}\nprint_r($arr); \necho PHP_EOL;\necho microtime(true) - $time1;\n\necho PHP_EOL;\n$time2 = microtime(true);\n$tmp1 = null;\nfor ($i = 0; $i < 100000000; $i++) {\n    $tmp1 = $i;\n}\n$tmp['id'] = $tmp1;\nprint_r($arr);\necho PHP_EOL;\necho microtime(true) - $time2;\n\n```\n输出结果为：<code>\nArray ( [id] => 99999999 [name] => test [age] => )\n2.0506858825684\nArray ( [id] => 99999999 [name] => test [age] => )\n1.1653530597687\n</code>\n\n不难看出，两次的处理结果是一样的，但通过&多次改变值，效率较低。","source":"_posts/PHP/其他/PHP中，通过&改变变量的值，效率如何.md","raw":"---\ntitle: PHP中，通过&改变变量的值，效率如何\ntags: [PHP笔记]\ncategories: [PHP]\nabbrlink: 'php-assignment'\ndate: 2022-06-02 20:46:42\nupdated: 2022-06-02 20:46:42\n---\n\n\n在PHP中，通过&改变变量的值，效率如何呢，下面来测试一下。\n\n```php\n$arr = ['id' => null, 'name' => 'test', 'age' => null];\n\n$time1 = microtime(true);\n$tmp = &$arr;\nfor ($i = 0; $i < 100000000; $i++) {\n    $tmp['id'] = $i;\n}\nprint_r($arr); \necho PHP_EOL;\necho microtime(true) - $time1;\n\necho PHP_EOL;\n$time2 = microtime(true);\n$tmp1 = null;\nfor ($i = 0; $i < 100000000; $i++) {\n    $tmp1 = $i;\n}\n$tmp['id'] = $tmp1;\nprint_r($arr);\necho PHP_EOL;\necho microtime(true) - $time2;\n\n```\n输出结果为：<code>\nArray ( [id] => 99999999 [name] => test [age] => )\n2.0506858825684\nArray ( [id] => 99999999 [name] => test [age] => )\n1.1653530597687\n</code>\n\n不难看出，两次的处理结果是一样的，但通过&多次改变值，效率较低。","slug":"PHP/其他/PHP中，通过&改变变量的值，效率如何","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uv006zoshg7oe420tr","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>在PHP中，通过&amp;改变变量的值，效率如何呢，下面来测试一下。</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"string\">'id'</span> =&gt; <span class=\"literal\">null</span>, <span class=\"string\">'name'</span> =&gt; <span class=\"string\">'test'</span>, <span class=\"string\">'age'</span> =&gt; <span class=\"literal\">null</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$time1</span> = <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"variable\">$tmp</span> = &amp;<span class=\"variable\">$arr</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">0</span>; <span class=\"variable\">$i</span> &lt; <span class=\"number\">100000000</span>; <span class=\"variable\">$i</span>++) {</span><br><span class=\"line\">    <span class=\"variable\">$tmp</span>[<span class=\"string\">'id'</span>] = <span class=\"variable\">$i</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$arr</span>); </span><br><span class=\"line\"><span class=\"keyword\">echo</span> PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>) - <span class=\"variable\">$time1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> PHP_EOL;</span><br><span class=\"line\"><span class=\"variable\">$time2</span> = <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"variable\">$tmp1</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">0</span>; <span class=\"variable\">$i</span> &lt; <span class=\"number\">100000000</span>; <span class=\"variable\">$i</span>++) {</span><br><span class=\"line\">    <span class=\"variable\">$tmp1</span> = <span class=\"variable\">$i</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"variable\">$tmp</span>[<span class=\"string\">'id'</span>] = <span class=\"variable\">$tmp1</span>;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>) - <span class=\"variable\">$time2</span>;</span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<p>输出结果为：<code><br>Array ( [id] =&gt; 99999999 [name] =&gt; test [age] =&gt; )<br>2.0506858825684<br>Array ( [id] =&gt; 99999999 [name] =&gt; test [age] =&gt; )<br>1.1653530597687\n</code></p>\n<p>不难看出，两次的处理结果是一样的，但通过&amp;多次改变值，效率较低。</p>\n","excerpt":"","more":"<p>在PHP中，通过&amp;改变变量的值，效率如何呢，下面来测试一下。</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"string\">&#x27;id&#x27;</span> =&gt; <span class=\"literal\">null</span>, <span class=\"string\">&#x27;name&#x27;</span> =&gt; <span class=\"string\">&#x27;test&#x27;</span>, <span class=\"string\">&#x27;age&#x27;</span> =&gt; <span class=\"literal\">null</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$time1</span> = <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"variable\">$tmp</span> = &amp;<span class=\"variable\">$arr</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">0</span>; <span class=\"variable\">$i</span> &lt; <span class=\"number\">100000000</span>; <span class=\"variable\">$i</span>++) &#123;</span><br><span class=\"line\">    <span class=\"variable\">$tmp</span>[<span class=\"string\">&#x27;id&#x27;</span>] = <span class=\"variable\">$i</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$arr</span>); </span><br><span class=\"line\"><span class=\"keyword\">echo</span> PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>) - <span class=\"variable\">$time1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> PHP_EOL;</span><br><span class=\"line\"><span class=\"variable\">$time2</span> = <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>);</span><br><span class=\"line\"><span class=\"variable\">$tmp1</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"variable\">$i</span> = <span class=\"number\">0</span>; <span class=\"variable\">$i</span> &lt; <span class=\"number\">100000000</span>; <span class=\"variable\">$i</span>++) &#123;</span><br><span class=\"line\">    <span class=\"variable\">$tmp1</span> = <span class=\"variable\">$i</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable\">$tmp</span>[<span class=\"string\">&#x27;id&#x27;</span>] = <span class=\"variable\">$tmp1</span>;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> PHP_EOL;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">microtime</span>(<span class=\"literal\">true</span>) - <span class=\"variable\">$time2</span>;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>输出结果为：<code><br>Array ( [id] =&gt; 99999999 [name] =&gt; test [age] =&gt; )<br>2.0506858825684<br>Array ( [id] =&gt; 99999999 [name] =&gt; test [age] =&gt; )<br>1.1653530597687\n</code></p>\n<p>不难看出，两次的处理结果是一样的，但通过&amp;多次改变值，效率较低。</p>\n"},{"title":"PHP任务加锁","abbrlink":"php-task-lock","date":"2023-05-23T10:27:00.000Z","updated":"2023-05-23T10:27:00.000Z","_content":"\n在PHP中，有时候我们需要设置定时任务，同一时间只有一个任务在执行。这就需要使用互斥锁来控制，下面介绍下实现方式：\n\n#### 使用 flock 函数实现文件锁\n\n以下是一个示例：\n```php\n$fp = fopen('/tmp/lock.txt', 'w');\nif (flock($fp, LOCK_EX | LOCK_NB)) { // 获取独占锁\n    // 执行任务\n    // ......\n    // 释放锁\n    flock($fp, LOCK_UN);\n}\nfclose($fp);\n```\n上面的代码使用 flock 函数获取一个文件锁，如果能成功获取到锁，则表示没有其他进程正在执行该任务，我们就可以执行该任务。执行完毕后，要记得释放锁，以便其他进程可以继续执行任务。\n\n#### 使用 Redis 锁等方式实现互斥\n使用 Redis 实现互斥锁的方式较为常见，因为 Redis 本身就支持分布式锁。\n\n以下是使用 Redis 实现互斥锁的示例：\n```php\n$redis = new Redis();\n$redis->connect('127.0.0.1', 6379);\n$key = 'task-lock';\nif ($redis->setnx($key, true)) { // 尝试获取锁\n    $redis->expire($key, 10); // 设置锁的过期时间\n    // 执行任务\n    // ......\n    // 释放锁\n    $redis->del($key);\n}\n```\n上面的代码使用 Redis 的 `setnx` 方法尝试获取一个锁。如果能成功获取到锁，则表示没有其他进程正在执行该任务，我们就可以执行该任务。执行完毕后，要记得删除锁以便其他进程可以继续执行任务。需要注意的是，为了避免程序异常退出而导致锁无法释放，我们需要为锁添加一个过期时间。在 Redis 中，可以使用 `expire` 方法设置键的过期时间。\n\n此外还可以使用其他方式实现互斥锁，比如数据库锁。","source":"_posts/PHP/其他/PHP任务加锁.md","raw":"---\ntitle: PHP任务加锁\ntags:\n  - PHP\n  - lock\ncategories:\n  - PHP\nabbrlink: 'php-task-lock'\ndate: 2023-05-23 18:27:00\nupdated: 2023-05-23 18:27:00\n---\n\n在PHP中，有时候我们需要设置定时任务，同一时间只有一个任务在执行。这就需要使用互斥锁来控制，下面介绍下实现方式：\n\n#### 使用 flock 函数实现文件锁\n\n以下是一个示例：\n```php\n$fp = fopen('/tmp/lock.txt', 'w');\nif (flock($fp, LOCK_EX | LOCK_NB)) { // 获取独占锁\n    // 执行任务\n    // ......\n    // 释放锁\n    flock($fp, LOCK_UN);\n}\nfclose($fp);\n```\n上面的代码使用 flock 函数获取一个文件锁，如果能成功获取到锁，则表示没有其他进程正在执行该任务，我们就可以执行该任务。执行完毕后，要记得释放锁，以便其他进程可以继续执行任务。\n\n#### 使用 Redis 锁等方式实现互斥\n使用 Redis 实现互斥锁的方式较为常见，因为 Redis 本身就支持分布式锁。\n\n以下是使用 Redis 实现互斥锁的示例：\n```php\n$redis = new Redis();\n$redis->connect('127.0.0.1', 6379);\n$key = 'task-lock';\nif ($redis->setnx($key, true)) { // 尝试获取锁\n    $redis->expire($key, 10); // 设置锁的过期时间\n    // 执行任务\n    // ......\n    // 释放锁\n    $redis->del($key);\n}\n```\n上面的代码使用 Redis 的 `setnx` 方法尝试获取一个锁。如果能成功获取到锁，则表示没有其他进程正在执行该任务，我们就可以执行该任务。执行完毕后，要记得删除锁以便其他进程可以继续执行任务。需要注意的是，为了避免程序异常退出而导致锁无法释放，我们需要为锁添加一个过期时间。在 Redis 中，可以使用 `expire` 方法设置键的过期时间。\n\n此外还可以使用其他方式实现互斥锁，比如数据库锁。","slug":"PHP/其他/PHP任务加锁","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uw0072oshg7co809u9","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>在PHP中，有时候我们需要设置定时任务，同一时间只有一个任务在执行。这就需要使用互斥锁来控制，下面介绍下实现方式：</p>\n<h4 id=\"使用-flock-函数实现文件锁\"><a href=\"#使用-flock-函数实现文件锁\" class=\"headerlink\" title=\"使用 flock 函数实现文件锁\"></a>使用 flock 函数实现文件锁</h4><p>以下是一个示例：<br></p><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$fp</span> = <span class=\"title function_ invoke__\">fopen</span>(<span class=\"string\">'/tmp/lock.txt'</span>, <span class=\"string\">'w'</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">flock</span>(<span class=\"variable\">$fp</span>, LOCK_EX | LOCK_NB)) { <span class=\"comment\">// 获取独占锁</span></span><br><span class=\"line\">    <span class=\"comment\">// 执行任务</span></span><br><span class=\"line\">    <span class=\"comment\">// ......</span></span><br><span class=\"line\">    <span class=\"comment\">// 释放锁</span></span><br><span class=\"line\">    <span class=\"title function_ invoke__\">flock</span>(<span class=\"variable\">$fp</span>, LOCK_UN);</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"title function_ invoke__\">fclose</span>(<span class=\"variable\">$fp</span>);</span><br></pre></td></tr></tbody></table></figure><br>上面的代码使用 flock 函数获取一个文件锁，如果能成功获取到锁，则表示没有其他进程正在执行该任务，我们就可以执行该任务。执行完毕后，要记得释放锁，以便其他进程可以继续执行任务。<p></p>\n<h4 id=\"使用-Redis-锁等方式实现互斥\"><a href=\"#使用-Redis-锁等方式实现互斥\" class=\"headerlink\" title=\"使用 Redis 锁等方式实现互斥\"></a>使用 Redis 锁等方式实现互斥</h4><p>使用 Redis 实现互斥锁的方式较为常见，因为 Redis 本身就支持分布式锁。</p>\n<p>以下是使用 Redis 实现互斥锁的示例：<br></p><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$redis</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Redis</span>();</span><br><span class=\"line\"><span class=\"variable\">$redis</span>-&gt;<span class=\"title function_ invoke__\">connect</span>(<span class=\"string\">'127.0.0.1'</span>, <span class=\"number\">6379</span>);</span><br><span class=\"line\"><span class=\"variable\">$key</span> = <span class=\"string\">'task-lock'</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"variable\">$redis</span>-&gt;<span class=\"title function_ invoke__\">setnx</span>(<span class=\"variable\">$key</span>, <span class=\"literal\">true</span>)) { <span class=\"comment\">// 尝试获取锁</span></span><br><span class=\"line\">    <span class=\"variable\">$redis</span>-&gt;<span class=\"title function_ invoke__\">expire</span>(<span class=\"variable\">$key</span>, <span class=\"number\">10</span>); <span class=\"comment\">// 设置锁的过期时间</span></span><br><span class=\"line\">    <span class=\"comment\">// 执行任务</span></span><br><span class=\"line\">    <span class=\"comment\">// ......</span></span><br><span class=\"line\">    <span class=\"comment\">// 释放锁</span></span><br><span class=\"line\">    <span class=\"variable\">$redis</span>-&gt;<span class=\"title function_ invoke__\">del</span>(<span class=\"variable\">$key</span>);</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure><br>上面的代码使用 Redis 的 <code>setnx</code> 方法尝试获取一个锁。如果能成功获取到锁，则表示没有其他进程正在执行该任务，我们就可以执行该任务。执行完毕后，要记得删除锁以便其他进程可以继续执行任务。需要注意的是，为了避免程序异常退出而导致锁无法释放，我们需要为锁添加一个过期时间。在 Redis 中，可以使用 <code>expire</code> 方法设置键的过期时间。<p></p>\n<p>此外还可以使用其他方式实现互斥锁，比如数据库锁。</p>\n","excerpt":"","more":"<p>在PHP中，有时候我们需要设置定时任务，同一时间只有一个任务在执行。这就需要使用互斥锁来控制，下面介绍下实现方式：</p>\n<h4 id=\"使用-flock-函数实现文件锁\"><a href=\"#使用-flock-函数实现文件锁\" class=\"headerlink\" title=\"使用 flock 函数实现文件锁\"></a>使用 flock 函数实现文件锁</h4><p>以下是一个示例：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$fp</span> = <span class=\"title function_ invoke__\">fopen</span>(<span class=\"string\">&#x27;/tmp/lock.txt&#x27;</span>, <span class=\"string\">&#x27;w&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">flock</span>(<span class=\"variable\">$fp</span>, LOCK_EX | LOCK_NB)) &#123; <span class=\"comment\">// 获取独占锁</span></span><br><span class=\"line\">    <span class=\"comment\">// 执行任务</span></span><br><span class=\"line\">    <span class=\"comment\">// ......</span></span><br><span class=\"line\">    <span class=\"comment\">// 释放锁</span></span><br><span class=\"line\">    <span class=\"title function_ invoke__\">flock</span>(<span class=\"variable\">$fp</span>, LOCK_UN);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_ invoke__\">fclose</span>(<span class=\"variable\">$fp</span>);</span><br></pre></td></tr></table></figure><br>上面的代码使用 flock 函数获取一个文件锁，如果能成功获取到锁，则表示没有其他进程正在执行该任务，我们就可以执行该任务。执行完毕后，要记得释放锁，以便其他进程可以继续执行任务。</p>\n<h4 id=\"使用-Redis-锁等方式实现互斥\"><a href=\"#使用-Redis-锁等方式实现互斥\" class=\"headerlink\" title=\"使用 Redis 锁等方式实现互斥\"></a>使用 Redis 锁等方式实现互斥</h4><p>使用 Redis 实现互斥锁的方式较为常见，因为 Redis 本身就支持分布式锁。</p>\n<p>以下是使用 Redis 实现互斥锁的示例：<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$redis</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Redis</span>();</span><br><span class=\"line\"><span class=\"variable\">$redis</span>-&gt;<span class=\"title function_ invoke__\">connect</span>(<span class=\"string\">&#x27;127.0.0.1&#x27;</span>, <span class=\"number\">6379</span>);</span><br><span class=\"line\"><span class=\"variable\">$key</span> = <span class=\"string\">&#x27;task-lock&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"variable\">$redis</span>-&gt;<span class=\"title function_ invoke__\">setnx</span>(<span class=\"variable\">$key</span>, <span class=\"literal\">true</span>)) &#123; <span class=\"comment\">// 尝试获取锁</span></span><br><span class=\"line\">    <span class=\"variable\">$redis</span>-&gt;<span class=\"title function_ invoke__\">expire</span>(<span class=\"variable\">$key</span>, <span class=\"number\">10</span>); <span class=\"comment\">// 设置锁的过期时间</span></span><br><span class=\"line\">    <span class=\"comment\">// 执行任务</span></span><br><span class=\"line\">    <span class=\"comment\">// ......</span></span><br><span class=\"line\">    <span class=\"comment\">// 释放锁</span></span><br><span class=\"line\">    <span class=\"variable\">$redis</span>-&gt;<span class=\"title function_ invoke__\">del</span>(<span class=\"variable\">$key</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>上面的代码使用 Redis 的 <code>setnx</code> 方法尝试获取一个锁。如果能成功获取到锁，则表示没有其他进程正在执行该任务，我们就可以执行该任务。执行完毕后，要记得删除锁以便其他进程可以继续执行任务。需要注意的是，为了避免程序异常退出而导致锁无法释放，我们需要为锁添加一个过期时间。在 Redis 中，可以使用 <code>expire</code> 方法设置键的过期时间。</p>\n<p>此外还可以使用其他方式实现互斥锁，比如数据库锁。</p>\n"},{"title":"PHP使用ES","abbrlink":"php-elasticsearch","date":"2022-04-06T15:22:05.000Z","updated":"2022-04-06T15:22:05.000Z","_content":"\n### 安装步骤\n\n1. 下载安装java\n`https://www.oracle.com/java/technologies/downloads/#jdk18-windows`\n查看版本 java -version\n![](/images/php_es_1.png)\n    \n2. 下载es\n`https://www.elastic.co/cn/downloads/elasticsearch`\n    \n3. 修改config\\elasticsearch.yml文件的配置项\n```\nxpack.security.enabled: false\nxpack.ml.enabled: false\n```\n\n4. 双击 bin\\elasticsearch.bat\n等几十秒后，在浏览器访问：`localhost:9200`\n![](/images/php_es_2.png)\n\n5. 下载Kibana\n`https://www.elastic.co/cn/downloads/kibana`\n运行：`bin\\kibana.bat`\n访问`http://localhost:5601`","source":"_posts/PHP/其他/PHP使用ES.md","raw":"---\ntitle: PHP使用ES\ntags: [elasticsearch]\ncategories: [PHP]\nabbrlink: 'php-elasticsearch'\ndate: 2022-04-06 23:22:05\nupdated: 2022-04-06 23:22:05\n---\n\n### 安装步骤\n\n1. 下载安装java\n`https://www.oracle.com/java/technologies/downloads/#jdk18-windows`\n查看版本 java -version\n![](/images/php_es_1.png)\n    \n2. 下载es\n`https://www.elastic.co/cn/downloads/elasticsearch`\n    \n3. 修改config\\elasticsearch.yml文件的配置项\n```\nxpack.security.enabled: false\nxpack.ml.enabled: false\n```\n\n4. 双击 bin\\elasticsearch.bat\n等几十秒后，在浏览器访问：`localhost:9200`\n![](/images/php_es_2.png)\n\n5. 下载Kibana\n`https://www.elastic.co/cn/downloads/kibana`\n运行：`bin\\kibana.bat`\n访问`http://localhost:5601`","slug":"PHP/其他/PHP使用ES","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uw0075oshg3r7e9hr8","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"安装步骤\"><a href=\"#安装步骤\" class=\"headerlink\" title=\"安装步骤\"></a>安装步骤</h3><ol>\n<li><p>下载安装java<br><code>https://www.oracle.com/java/technologies/downloads/#jdk18-windows</code><br>查看版本 java -version<br><img src=\"/images/php_es_1.png\" alt=\"\"></p>\n</li>\n<li><p>下载es<br><code>https://www.elastic.co/cn/downloads/elasticsearch</code></p>\n</li>\n<li><p>修改config\\elasticsearch.yml文件的配置项</p>\n<figure class=\"highlight stylus\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xpack<span class=\"selector-class\">.security</span><span class=\"selector-class\">.enabled</span>: false</span><br><span class=\"line\">xpack<span class=\"selector-class\">.ml</span><span class=\"selector-class\">.enabled</span>: false</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>双击 bin\\elasticsearch.bat<br>等几十秒后，在浏览器访问：<code>localhost:9200</code><br><img src=\"/images/php_es_2.png\" alt=\"\"></p>\n</li>\n<li><p>下载Kibana<br><code>https://www.elastic.co/cn/downloads/kibana</code><br>运行：<code>bin\\kibana.bat</code><br>访问<code>http://localhost:5601</code></p>\n</li>\n</ol>\n","excerpt":"","more":"<h3 id=\"安装步骤\"><a href=\"#安装步骤\" class=\"headerlink\" title=\"安装步骤\"></a>安装步骤</h3><ol>\n<li><p>下载安装java<br><code>https://www.oracle.com/java/technologies/downloads/#jdk18-windows</code><br>查看版本 java -version<br><img src=\"/images/php_es_1.png\" alt></p>\n</li>\n<li><p>下载es<br><code>https://www.elastic.co/cn/downloads/elasticsearch</code></p>\n</li>\n<li><p>修改config\\elasticsearch.yml文件的配置项</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xpack<span class=\"selector-class\">.security</span><span class=\"selector-class\">.enabled</span>: false</span><br><span class=\"line\">xpack<span class=\"selector-class\">.ml</span><span class=\"selector-class\">.enabled</span>: false</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>双击 bin\\elasticsearch.bat<br>等几十秒后，在浏览器访问：<code>localhost:9200</code><br><img src=\"/images/php_es_2.png\" alt></p>\n</li>\n<li><p>下载Kibana<br><code>https://www.elastic.co/cn/downloads/kibana</code><br>运行：<code>bin\\kibana.bat</code><br>访问<code>http://localhost:5601</code></p>\n</li>\n</ol>\n"},{"title":"PHP实现AES加解密","abbrlink":"php-aes-encrypt","date":"2018-04-20T02:05:00.000Z","_content":"<div class=\"note info\">系统中的账号信息在进行存储的时候，需要做相应的加密处理；比如用户密码一般是以密文形式存储，而且是不可逆的，常用的就是md5加密；而对于某些账户信息(如：手机号码、银行卡号等)就需要进行可逆加密(如：AES)保存，这样既可以保证数据的安全性，又不影响正常的业务处理。</div>\n\n下面介绍一下以PHP实现AES加密解密：\n\n### 1. AES加密解密类\n\n``` php\nnamespace libs;\n/**\n* 利用mcrypt做AES加密解密\n* 支持密钥：64bit（字节长度8）\n* 支持算法：DES\n* 支持模式：ECB\n* 填充方式：PKCS5\n*/\nclass Aes{\n    const CIPHER = MCRYPT_DES;\n    const MODE = MCRYPT_MODE_ECB;\n\n    /**\n     * 加密\n     * @param string $str\t需加密的字符串\n     * @param string $key\t密钥(8位)\n     * @return string   密文\n     */\n    public static function encode($str,$key){\n        $size = mcrypt_get_block_size ( MCRYPT_DES, 'ecb' );\n        $str = self::pkcs5_pad($str, $size);\n        $iv = mcrypt_create_iv(mcrypt_get_iv_size(self::CIPHER,self::MODE),MCRYPT_RAND);\n        $result = mcrypt_encrypt(self::CIPHER, $key, $str, self::MODE, $iv);\n        return base64_encode($result);\n    }\n\n    /**\n     * 解密\n     * @param string $str   密文\n     * @param string $key   密钥(8位)\n     * @return string   明文\n     */\n    public static function decode($str,$key){\n        $str = base64_decode($str);\n        $iv = mcrypt_create_iv(mcrypt_get_iv_size(self::CIPHER,self::MODE),MCRYPT_RAND);\n        $str = trim(mcrypt_decrypt(self::CIPHER, $key, $str, self::MODE, $iv));\n        return  self::pkcs5_unpad($str);\n    }\n\n    /**\n     * PKCS5填充\n     * @param $text\n     * @param $blocksize\n     * @return string\n     */\n    private static function pkcs5_pad($text, $blocksize) {\n        $pad = $blocksize - (strlen($text) % $blocksize);\n        return $text . str_repeat(chr($pad), $pad);\n    }\n\n    /**\n     *\n     * @param $text\n     * @return bool|string\n     */\n    private static function pkcs5_unpad($text) {\n        $pad = ord($text{strlen($text) - 1});\n        if ($pad > strlen($text)) {\n            return false;\n        }\n        if (strspn($text, chr($pad), strlen($text)-$pad) != $pad) {\n            return false;\n        }\n        return substr($text, 0, -1 * $pad);\n    }\n}\n```\n\n### 2. 调用\n\n``` php\nnamespace app\\modules\\demo\\controllers;\n\nuse app\\common\\components\\Controller;\nuse libs\\Aes;\n\nclass TestController extends Controller{\n\n    public function actionTest(){\n        $key = 'WGiSP3UQ';\n        $str = '18958019299';\n        $enStr = Aes::encode($str,$key);\n        $deStr = Aes::decode($enStr,$key);\n        var_dump($str,$enStr,$deStr);\n    }\n}\n```\n\n### 3. 访问http://127.0.0.1/web/demo/test/test ，运行结果如下：\n``` php\nstring(11) \"18958019299\" \nstring(24) \"WiBZggO/DRaczJ3wSirvEw==\" \nstring(11) \"18958019299\"\n```","source":"_posts/PHP/其他/PHP实现AES加解密.md","raw":"---\ntitle: PHP实现AES加解密\ntags: [加解密]\ncategories: [PHP]\nabbrlink: 'php-aes-encrypt'\ndate: 2018-04-20 10:05:00\n---\n<div class=\"note info\">系统中的账号信息在进行存储的时候，需要做相应的加密处理；比如用户密码一般是以密文形式存储，而且是不可逆的，常用的就是md5加密；而对于某些账户信息(如：手机号码、银行卡号等)就需要进行可逆加密(如：AES)保存，这样既可以保证数据的安全性，又不影响正常的业务处理。</div>\n\n下面介绍一下以PHP实现AES加密解密：\n\n### 1. AES加密解密类\n\n``` php\nnamespace libs;\n/**\n* 利用mcrypt做AES加密解密\n* 支持密钥：64bit（字节长度8）\n* 支持算法：DES\n* 支持模式：ECB\n* 填充方式：PKCS5\n*/\nclass Aes{\n    const CIPHER = MCRYPT_DES;\n    const MODE = MCRYPT_MODE_ECB;\n\n    /**\n     * 加密\n     * @param string $str\t需加密的字符串\n     * @param string $key\t密钥(8位)\n     * @return string   密文\n     */\n    public static function encode($str,$key){\n        $size = mcrypt_get_block_size ( MCRYPT_DES, 'ecb' );\n        $str = self::pkcs5_pad($str, $size);\n        $iv = mcrypt_create_iv(mcrypt_get_iv_size(self::CIPHER,self::MODE),MCRYPT_RAND);\n        $result = mcrypt_encrypt(self::CIPHER, $key, $str, self::MODE, $iv);\n        return base64_encode($result);\n    }\n\n    /**\n     * 解密\n     * @param string $str   密文\n     * @param string $key   密钥(8位)\n     * @return string   明文\n     */\n    public static function decode($str,$key){\n        $str = base64_decode($str);\n        $iv = mcrypt_create_iv(mcrypt_get_iv_size(self::CIPHER,self::MODE),MCRYPT_RAND);\n        $str = trim(mcrypt_decrypt(self::CIPHER, $key, $str, self::MODE, $iv));\n        return  self::pkcs5_unpad($str);\n    }\n\n    /**\n     * PKCS5填充\n     * @param $text\n     * @param $blocksize\n     * @return string\n     */\n    private static function pkcs5_pad($text, $blocksize) {\n        $pad = $blocksize - (strlen($text) % $blocksize);\n        return $text . str_repeat(chr($pad), $pad);\n    }\n\n    /**\n     *\n     * @param $text\n     * @return bool|string\n     */\n    private static function pkcs5_unpad($text) {\n        $pad = ord($text{strlen($text) - 1});\n        if ($pad > strlen($text)) {\n            return false;\n        }\n        if (strspn($text, chr($pad), strlen($text)-$pad) != $pad) {\n            return false;\n        }\n        return substr($text, 0, -1 * $pad);\n    }\n}\n```\n\n### 2. 调用\n\n``` php\nnamespace app\\modules\\demo\\controllers;\n\nuse app\\common\\components\\Controller;\nuse libs\\Aes;\n\nclass TestController extends Controller{\n\n    public function actionTest(){\n        $key = 'WGiSP3UQ';\n        $str = '18958019299';\n        $enStr = Aes::encode($str,$key);\n        $deStr = Aes::decode($enStr,$key);\n        var_dump($str,$enStr,$deStr);\n    }\n}\n```\n\n### 3. 访问http://127.0.0.1/web/demo/test/test ，运行结果如下：\n``` php\nstring(11) \"18958019299\" \nstring(24) \"WiBZggO/DRaczJ3wSirvEw==\" \nstring(11) \"18958019299\"\n```","slug":"PHP/其他/PHP实现AES加解密","published":1,"updated":"2024-10-18T01:53:11.265Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2ux0077oshg599fax5m","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">系统中的账号信息在进行存储的时候，需要做相应的加密处理；比如用户密码一般是以密文形式存储，而且是不可逆的，常用的就是md5加密；而对于某些账户信息(如：手机号码、银行卡号等)就需要进行可逆加密(如：AES)保存，这样既可以保证数据的安全性，又不影响正常的业务处理。</div>\n\n<p>下面介绍一下以PHP实现AES加密解密：</p>\n<h3 id=\"1-AES加密解密类\"><a href=\"#1-AES加密解密类\" class=\"headerlink\" title=\"1. AES加密解密类\"></a>1. AES加密解密类</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">libs</span>;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* 利用mcrypt做AES加密解密</span></span><br><span class=\"line\"><span class=\"comment\">* 支持密钥：64bit（字节长度8）</span></span><br><span class=\"line\"><span class=\"comment\">* 支持算法：DES</span></span><br><span class=\"line\"><span class=\"comment\">* 支持模式：ECB</span></span><br><span class=\"line\"><span class=\"comment\">* 填充方式：PKCS5</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Aes</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"variable constant_\">CIPHER</span> = MCRYPT_DES;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"variable constant_\">MODE</span> = MCRYPT_MODE_ECB;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 加密</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $str\t需加密的字符串</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $key\t密钥(8位)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> string   密文</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">encode</span>(<span class=\"params\"><span class=\"variable\">$str</span>,<span class=\"variable\">$key</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$size</span> = <span class=\"title function_ invoke__\">mcrypt_get_block_size</span> ( MCRYPT_DES, <span class=\"string\">'ecb'</span> );</span><br><span class=\"line\">        <span class=\"variable\">$str</span> = <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">pkcs5_pad</span>(<span class=\"variable\">$str</span>, <span class=\"variable\">$size</span>);</span><br><span class=\"line\">        <span class=\"variable\">$iv</span> = <span class=\"title function_ invoke__\">mcrypt_create_iv</span>(<span class=\"title function_ invoke__\">mcrypt_get_iv_size</span>(<span class=\"built_in\">self</span>::<span class=\"variable constant_\">CIPHER</span>,<span class=\"built_in\">self</span>::<span class=\"variable constant_\">MODE</span>),MCRYPT_RAND);</span><br><span class=\"line\">        <span class=\"variable\">$result</span> = <span class=\"title function_ invoke__\">mcrypt_encrypt</span>(<span class=\"built_in\">self</span>::<span class=\"variable constant_\">CIPHER</span>, <span class=\"variable\">$key</span>, <span class=\"variable\">$str</span>, <span class=\"built_in\">self</span>::<span class=\"variable constant_\">MODE</span>, <span class=\"variable\">$iv</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">base64_encode</span>(<span class=\"variable\">$result</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 解密</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $str   密文</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $key   密钥(8位)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> string   明文</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">decode</span>(<span class=\"params\"><span class=\"variable\">$str</span>,<span class=\"variable\">$key</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$str</span> = <span class=\"title function_ invoke__\">base64_decode</span>(<span class=\"variable\">$str</span>);</span><br><span class=\"line\">        <span class=\"variable\">$iv</span> = <span class=\"title function_ invoke__\">mcrypt_create_iv</span>(<span class=\"title function_ invoke__\">mcrypt_get_iv_size</span>(<span class=\"built_in\">self</span>::<span class=\"variable constant_\">CIPHER</span>,<span class=\"built_in\">self</span>::<span class=\"variable constant_\">MODE</span>),MCRYPT_RAND);</span><br><span class=\"line\">        <span class=\"variable\">$str</span> = <span class=\"title function_ invoke__\">trim</span>(<span class=\"title function_ invoke__\">mcrypt_decrypt</span>(<span class=\"built_in\">self</span>::<span class=\"variable constant_\">CIPHER</span>, <span class=\"variable\">$key</span>, <span class=\"variable\">$str</span>, <span class=\"built_in\">self</span>::<span class=\"variable constant_\">MODE</span>, <span class=\"variable\">$iv</span>));</span><br><span class=\"line\">        <span class=\"keyword\">return</span>  <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">pkcs5_unpad</span>(<span class=\"variable\">$str</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * PKCS5填充</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $text</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $blocksize</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> string</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pkcs5_pad</span>(<span class=\"params\"><span class=\"variable\">$text</span>, <span class=\"variable\">$blocksize</span></span>) </span>{</span><br><span class=\"line\">        <span class=\"variable\">$pad</span> = <span class=\"variable\">$blocksize</span> - (<span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$text</span>) % <span class=\"variable\">$blocksize</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$text</span> . <span class=\"title function_ invoke__\">str_repeat</span>(<span class=\"title function_ invoke__\">chr</span>(<span class=\"variable\">$pad</span>), <span class=\"variable\">$pad</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $text</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bool|string</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pkcs5_unpad</span>(<span class=\"params\"><span class=\"variable\">$text</span></span>) </span>{</span><br><span class=\"line\">        <span class=\"variable\">$pad</span> = <span class=\"title function_ invoke__\">ord</span>(<span class=\"variable\">$text</span>{<span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$text</span>) - <span class=\"number\">1</span>});</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$pad</span> &gt; <span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$text</span>)) {</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">strspn</span>(<span class=\"variable\">$text</span>, <span class=\"title function_ invoke__\">chr</span>(<span class=\"variable\">$pad</span>), <span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$text</span>)-<span class=\"variable\">$pad</span>) != <span class=\"variable\">$pad</span>) {</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">substr</span>(<span class=\"variable\">$text</span>, <span class=\"number\">0</span>, -<span class=\"number\">1</span> * <span class=\"variable\">$pad</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"2-调用\"><a href=\"#2-调用\" class=\"headerlink\" title=\"2. 调用\"></a>2. 调用</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">app</span>\\<span class=\"title class_\">modules</span>\\<span class=\"title class_\">demo</span>\\<span class=\"title class_\">controllers</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">app</span>\\<span class=\"title\">common</span>\\<span class=\"title\">components</span>\\<span class=\"title\">Controller</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">libs</span>\\<span class=\"title\">Aes</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestController</span> <span class=\"keyword\">extends</span> <span class=\"title\">Controller</span></span>{</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">actionTest</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$key</span> = <span class=\"string\">'WGiSP3UQ'</span>;</span><br><span class=\"line\">        <span class=\"variable\">$str</span> = <span class=\"string\">'18958019299'</span>;</span><br><span class=\"line\">        <span class=\"variable\">$enStr</span> = <span class=\"title class_\">Aes</span>::<span class=\"title function_ invoke__\">encode</span>(<span class=\"variable\">$str</span>,<span class=\"variable\">$key</span>);</span><br><span class=\"line\">        <span class=\"variable\">$deStr</span> = <span class=\"title class_\">Aes</span>::<span class=\"title function_ invoke__\">decode</span>(<span class=\"variable\">$enStr</span>,<span class=\"variable\">$key</span>);</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$str</span>,<span class=\"variable\">$enStr</span>,<span class=\"variable\">$deStr</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"3-访问http-127-0-0-1-web-demo-test-test-，运行结果如下：\"><a href=\"#3-访问http-127-0-0-1-web-demo-test-test-，运行结果如下：\" class=\"headerlink\" title=\"3. 访问http://127.0.0.1/web/demo/test/test ，运行结果如下：\"></a>3. 访问<a href=\"http://127.0.0.1/web/demo/test/test\">http://127.0.0.1/web/demo/test/test</a> ，运行结果如下：</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">string</span>(<span class=\"number\">11</span>) <span class=\"string\">\"18958019299\"</span> </span><br><span class=\"line\"><span class=\"keyword\">string</span>(<span class=\"number\">24</span>) <span class=\"string\">\"WiBZggO/DRaczJ3wSirvEw==\"</span> </span><br><span class=\"line\"><span class=\"keyword\">string</span>(<span class=\"number\">11</span>) <span class=\"string\">\"18958019299\"</span></span><br></pre></td></tr></tbody></table></figure>","excerpt":"","more":"<div class=\"note info\">系统中的账号信息在进行存储的时候，需要做相应的加密处理；比如用户密码一般是以密文形式存储，而且是不可逆的，常用的就是md5加密；而对于某些账户信息(如：手机号码、银行卡号等)就需要进行可逆加密(如：AES)保存，这样既可以保证数据的安全性，又不影响正常的业务处理。</div>\n\n<p>下面介绍一下以PHP实现AES加密解密：</p>\n<h3 id=\"1-AES加密解密类\"><a href=\"#1-AES加密解密类\" class=\"headerlink\" title=\"1. AES加密解密类\"></a>1. AES加密解密类</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">libs</span>;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* 利用mcrypt做AES加密解密</span></span><br><span class=\"line\"><span class=\"comment\">* 支持密钥：64bit（字节长度8）</span></span><br><span class=\"line\"><span class=\"comment\">* 支持算法：DES</span></span><br><span class=\"line\"><span class=\"comment\">* 支持模式：ECB</span></span><br><span class=\"line\"><span class=\"comment\">* 填充方式：PKCS5</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Aes</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"variable constant_\">CIPHER</span> = MCRYPT_DES;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> <span class=\"variable constant_\">MODE</span> = MCRYPT_MODE_ECB;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 加密</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $str\t需加密的字符串</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $key\t密钥(8位)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> string   密文</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">encode</span>(<span class=\"params\"><span class=\"variable\">$str</span>,<span class=\"variable\">$key</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$size</span> = <span class=\"title function_ invoke__\">mcrypt_get_block_size</span> ( MCRYPT_DES, <span class=\"string\">&#x27;ecb&#x27;</span> );</span><br><span class=\"line\">        <span class=\"variable\">$str</span> = <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">pkcs5_pad</span>(<span class=\"variable\">$str</span>, <span class=\"variable\">$size</span>);</span><br><span class=\"line\">        <span class=\"variable\">$iv</span> = <span class=\"title function_ invoke__\">mcrypt_create_iv</span>(<span class=\"title function_ invoke__\">mcrypt_get_iv_size</span>(<span class=\"built_in\">self</span>::<span class=\"variable constant_\">CIPHER</span>,<span class=\"built_in\">self</span>::<span class=\"variable constant_\">MODE</span>),MCRYPT_RAND);</span><br><span class=\"line\">        <span class=\"variable\">$result</span> = <span class=\"title function_ invoke__\">mcrypt_encrypt</span>(<span class=\"built_in\">self</span>::<span class=\"variable constant_\">CIPHER</span>, <span class=\"variable\">$key</span>, <span class=\"variable\">$str</span>, <span class=\"built_in\">self</span>::<span class=\"variable constant_\">MODE</span>, <span class=\"variable\">$iv</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">base64_encode</span>(<span class=\"variable\">$result</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 解密</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $str   密文</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> string $key   密钥(8位)</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> string   明文</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">decode</span>(<span class=\"params\"><span class=\"variable\">$str</span>,<span class=\"variable\">$key</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$str</span> = <span class=\"title function_ invoke__\">base64_decode</span>(<span class=\"variable\">$str</span>);</span><br><span class=\"line\">        <span class=\"variable\">$iv</span> = <span class=\"title function_ invoke__\">mcrypt_create_iv</span>(<span class=\"title function_ invoke__\">mcrypt_get_iv_size</span>(<span class=\"built_in\">self</span>::<span class=\"variable constant_\">CIPHER</span>,<span class=\"built_in\">self</span>::<span class=\"variable constant_\">MODE</span>),MCRYPT_RAND);</span><br><span class=\"line\">        <span class=\"variable\">$str</span> = <span class=\"title function_ invoke__\">trim</span>(<span class=\"title function_ invoke__\">mcrypt_decrypt</span>(<span class=\"built_in\">self</span>::<span class=\"variable constant_\">CIPHER</span>, <span class=\"variable\">$key</span>, <span class=\"variable\">$str</span>, <span class=\"built_in\">self</span>::<span class=\"variable constant_\">MODE</span>, <span class=\"variable\">$iv</span>));</span><br><span class=\"line\">        <span class=\"keyword\">return</span>  <span class=\"built_in\">self</span>::<span class=\"title function_ invoke__\">pkcs5_unpad</span>(<span class=\"variable\">$str</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * PKCS5填充</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $text</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $blocksize</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> string</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pkcs5_pad</span>(<span class=\"params\"><span class=\"variable\">$text</span>, <span class=\"variable\">$blocksize</span></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$pad</span> = <span class=\"variable\">$blocksize</span> - (<span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$text</span>) % <span class=\"variable\">$blocksize</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$text</span> . <span class=\"title function_ invoke__\">str_repeat</span>(<span class=\"title function_ invoke__\">chr</span>(<span class=\"variable\">$pad</span>), <span class=\"variable\">$pad</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> $text</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> bool|string</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pkcs5_unpad</span>(<span class=\"params\"><span class=\"variable\">$text</span></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$pad</span> = <span class=\"title function_ invoke__\">ord</span>(<span class=\"variable\">$text</span>&#123;<span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$text</span>) - <span class=\"number\">1</span>&#125;);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$pad</span> &gt; <span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$text</span>)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">strspn</span>(<span class=\"variable\">$text</span>, <span class=\"title function_ invoke__\">chr</span>(<span class=\"variable\">$pad</span>), <span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$text</span>)-<span class=\"variable\">$pad</span>) != <span class=\"variable\">$pad</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">substr</span>(<span class=\"variable\">$text</span>, <span class=\"number\">0</span>, -<span class=\"number\">1</span> * <span class=\"variable\">$pad</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-调用\"><a href=\"#2-调用\" class=\"headerlink\" title=\"2. 调用\"></a>2. 调用</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">app</span>\\<span class=\"title class_\">modules</span>\\<span class=\"title class_\">demo</span>\\<span class=\"title class_\">controllers</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">app</span>\\<span class=\"title\">common</span>\\<span class=\"title\">components</span>\\<span class=\"title\">Controller</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">libs</span>\\<span class=\"title\">Aes</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestController</span> <span class=\"keyword\">extends</span> <span class=\"title\">Controller</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">actionTest</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$key</span> = <span class=\"string\">&#x27;WGiSP3UQ&#x27;</span>;</span><br><span class=\"line\">        <span class=\"variable\">$str</span> = <span class=\"string\">&#x27;18958019299&#x27;</span>;</span><br><span class=\"line\">        <span class=\"variable\">$enStr</span> = <span class=\"title class_\">Aes</span>::<span class=\"title function_ invoke__\">encode</span>(<span class=\"variable\">$str</span>,<span class=\"variable\">$key</span>);</span><br><span class=\"line\">        <span class=\"variable\">$deStr</span> = <span class=\"title class_\">Aes</span>::<span class=\"title function_ invoke__\">decode</span>(<span class=\"variable\">$enStr</span>,<span class=\"variable\">$key</span>);</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$str</span>,<span class=\"variable\">$enStr</span>,<span class=\"variable\">$deStr</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-访问http-127-0-0-1-web-demo-test-test-，运行结果如下：\"><a href=\"#3-访问http-127-0-0-1-web-demo-test-test-，运行结果如下：\" class=\"headerlink\" title=\"3. 访问http://127.0.0.1/web/demo/test/test ，运行结果如下：\"></a>3. 访问<a href=\"http://127.0.0.1/web/demo/test/test\">http://127.0.0.1/web/demo/test/test</a> ，运行结果如下：</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">string</span>(<span class=\"number\">11</span>) <span class=\"string\">&quot;18958019299&quot;</span> </span><br><span class=\"line\"><span class=\"keyword\">string</span>(<span class=\"number\">24</span>) <span class=\"string\">&quot;WiBZggO/DRaczJ3wSirvEw==&quot;</span> </span><br><span class=\"line\"><span class=\"keyword\">string</span>(<span class=\"number\">11</span>) <span class=\"string\">&quot;18958019299&quot;</span></span><br></pre></td></tr></table></figure>"},{"title":"PHP常用的算法","abbrlink":"php-common-algorithm","date":"2022-01-12T01:41:25.000Z","updated":"2022-01-12T01:41:25.000Z","_content":"\n### 冒泡排序\n- 时间复杂度：O(N^2)\n- 代码实现\n```php\nfunction bubbleSort($arr){\n    $n = count($arr);\n    for ($i=0; $i<$n-1; $i++){\n        for ($j=$i+1; $j<$n; $j++){\n            if ($arr[$j] < $arr[$i]){\n                [$arr[$i], $arr[$j]] = [$arr[$j], $arr[$i]];\n            }\n        }\n    }\n\n    return $arr;\n}\n\n$arr = [45,2,5,54,3,23];\nprint_r(bubbleSort($arr));\n// Array ( [0] => 2 [1] => 3 [2] => 5 [3] => 23 [4] => 45 [5] => 54 )\n```\n\n### 快速排序\n```php\nfunction quickSort($arr){\n    $n = count($arr);\n    if ($n <= 1)    return $arr;\n    $index = $arr[0];\n    $leftArr = $rightArr = [];\n    for ($i=1; $i<$n; $i++){\n        if ($arr[$i] <= $index){\n            $leftArr[] = $arr[$i];\n        }else{\n            $rightArr[] = $arr[$i];\n        }\n    }\n\n    $leftArr = quickSort($leftArr);\n    $rightArr = quickSort($rightArr);\n\n    return array_merge($leftArr,[$index],$rightArr);\n}\n\n$arr = [1,45,2,5,54,3,23];\nprint_r(quickSort($arr));\n// Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 5 [4] => 23 [5] => 45 [6] => 54 )\n```\n\n### 选择排序\n- 时间复杂度：O(N^2)\n- 代码实现\n```php\nfunction selectSort($arr){\n    $n = count($arr);\n    for ($i=0; $i<$n-1; $i++){\n        $k = $i;\n        for ($j=$i+1; $j<$n; $j++){\n            if ($arr[$k] > $arr[$j]){\n                $k = $j;\n            }\n        }\n        if ($k != $i){\n            [$arr[$k],$arr[$i]] = [$arr[$i],$arr[$k]];\n        }\n    }\n\n    return $arr;\n}\n\n$arr = [1,45,2,5,54,3,23];\nprint_r(selectSort($arr));\n// Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 5 [4] => 23 [5] => 45 [6] => 54 )\n```\n\n### 插入排序\n- 流程\n将一个待排序的无序的数组看作是两个列表，一个有序的列表，一个无序的列表，从无序的列表每次拿出一个待插入的元素，插入到有序的列表中，直到无序列表为空，排序完毕.\n- 实例\n    1. 有一个无序的一维数组是这次需要排序的数组，数组是：[36,12,96,-1]\n    2. 首先把数组的第一个元素 [36] 看作是一个独立的有序的列表，把剩下的元素 [12, 96, -1] 看作是一个无序的列表\n    3. 第一个待插入的元素就是 12，要把 12 插入到有序的列表中，首先需要 12 和 36 比较，如果带插入的元素 12 小于 36, 就需要把 12 插入到 36前面，也就是 36 要后移一位。\n    4. 插入排序实际是需要比较数组元素的总数减一轮，因为第一个元素不需要比较。\n- 时间复杂度：O(N^2)\n- 代码实现\n    ```php\n    function insertSort($arr){\n        if (!is_array($arr))    return null;\n        $count = count($arr);\n        if ($count <= 1){\n            return $arr;\n        }\n    \n        for ($i=1; $i<$count; $i++){\n            $insertValue = $arr[$i];\n            $insertIndex = $i-1;\n            while($insertIndex >= 0 && $insertValue < $arr[$insertIndex]){\n                $arr[$insertIndex+1] = $arr[$insertIndex];\n                $insertIndex--;\n            }\n            $arr[$insertIndex+1] = $insertValue;\n        }\n        return $arr;\n    }\n    \n    $arr = [1,45,2,5,54,3,23];\n    print_r(insertSort($arr));\n    //  Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 5 [4] => 23 [5] => 45 [6] => 54 )\n    ```\n### 归并排序\n\n\n  \n### 二分查找法\n- 概念\n    二分查找也称折半查找（Binary Search），它是一种效率较高的查找方法。但是，折半查找要求线性表必须采用顺序存储结构，而且表中元素按关键字有序排列。\n    首先，假设表中元素是按升序排列，将表中间位置记录的关键字与查找关键字比较，如果两者相等，则查找成功；否则利用中间位置记录将表分成前、后两个子表，如果中间位置记录的关键字大于查找关键字，则进一步查找前一子表，否则进一步查找后一子表。重复以上过程，直到找到满足条件的记录，使查找成功，或直到子表不存在为止，此时查找不成功。\n- 代码实例\n    - 循环二分查找\n    ```php\n    function binarySearch($array,$findVal){\n        if (!is_array($array) || empty($array)) return -1;\n        \n        $start = 0;\n        $end = count($array) - 1;\n        while ($start <= $end){\n            $middle = intval(($start+$end)/2);\n            if ($array[$middle] > $findVal){\n                $end = $middle - 1;\n            }elseif ($array[$middle] < $findVal){\n                $start = $middle + 1;\n            }else{\n                return $middle;\n            }\n        }\n        \n        return -1;\n    }\n        \n    $array = [3,54,67,124,542,642,843];\n    echo binarySearch($array, 542);     // 4\n    ```\n    - 递归二分查找\n    ```php\n    function binarySearch($array,$findVal,$start,$end){\n        $middle = intval(($start+$end)/2);\n        if($start>$end) return -1;\n        if ($array[$middle] > $findVal){\n            return binarySearch($array,$findVal,$start,$middle-1);\n        }elseif ($array[$middle] < $findVal){\n            return binarySearch($array,$findVal,$middle+1,$end);\n        }else{\n            return $middle;\n        }\n    }\n    \n    $array = [3,54,67,124,542,642,843];\n    echo binarySearch($array, 542,0,count($array)-1);     // 4\n    ```","source":"_posts/PHP/其他/PHP常用的算法.md","raw":"---\ntitle: PHP常用的算法\ntags: [算法]\ncategories: [PHP]\nabbrlink: 'php-common-algorithm'\ndate: 2022-01-12 09:41:25\nupdated: 2022-01-12 09:41:25\n---\n\n### 冒泡排序\n- 时间复杂度：O(N^2)\n- 代码实现\n```php\nfunction bubbleSort($arr){\n    $n = count($arr);\n    for ($i=0; $i<$n-1; $i++){\n        for ($j=$i+1; $j<$n; $j++){\n            if ($arr[$j] < $arr[$i]){\n                [$arr[$i], $arr[$j]] = [$arr[$j], $arr[$i]];\n            }\n        }\n    }\n\n    return $arr;\n}\n\n$arr = [45,2,5,54,3,23];\nprint_r(bubbleSort($arr));\n// Array ( [0] => 2 [1] => 3 [2] => 5 [3] => 23 [4] => 45 [5] => 54 )\n```\n\n### 快速排序\n```php\nfunction quickSort($arr){\n    $n = count($arr);\n    if ($n <= 1)    return $arr;\n    $index = $arr[0];\n    $leftArr = $rightArr = [];\n    for ($i=1; $i<$n; $i++){\n        if ($arr[$i] <= $index){\n            $leftArr[] = $arr[$i];\n        }else{\n            $rightArr[] = $arr[$i];\n        }\n    }\n\n    $leftArr = quickSort($leftArr);\n    $rightArr = quickSort($rightArr);\n\n    return array_merge($leftArr,[$index],$rightArr);\n}\n\n$arr = [1,45,2,5,54,3,23];\nprint_r(quickSort($arr));\n// Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 5 [4] => 23 [5] => 45 [6] => 54 )\n```\n\n### 选择排序\n- 时间复杂度：O(N^2)\n- 代码实现\n```php\nfunction selectSort($arr){\n    $n = count($arr);\n    for ($i=0; $i<$n-1; $i++){\n        $k = $i;\n        for ($j=$i+1; $j<$n; $j++){\n            if ($arr[$k] > $arr[$j]){\n                $k = $j;\n            }\n        }\n        if ($k != $i){\n            [$arr[$k],$arr[$i]] = [$arr[$i],$arr[$k]];\n        }\n    }\n\n    return $arr;\n}\n\n$arr = [1,45,2,5,54,3,23];\nprint_r(selectSort($arr));\n// Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 5 [4] => 23 [5] => 45 [6] => 54 )\n```\n\n### 插入排序\n- 流程\n将一个待排序的无序的数组看作是两个列表，一个有序的列表，一个无序的列表，从无序的列表每次拿出一个待插入的元素，插入到有序的列表中，直到无序列表为空，排序完毕.\n- 实例\n    1. 有一个无序的一维数组是这次需要排序的数组，数组是：[36,12,96,-1]\n    2. 首先把数组的第一个元素 [36] 看作是一个独立的有序的列表，把剩下的元素 [12, 96, -1] 看作是一个无序的列表\n    3. 第一个待插入的元素就是 12，要把 12 插入到有序的列表中，首先需要 12 和 36 比较，如果带插入的元素 12 小于 36, 就需要把 12 插入到 36前面，也就是 36 要后移一位。\n    4. 插入排序实际是需要比较数组元素的总数减一轮，因为第一个元素不需要比较。\n- 时间复杂度：O(N^2)\n- 代码实现\n    ```php\n    function insertSort($arr){\n        if (!is_array($arr))    return null;\n        $count = count($arr);\n        if ($count <= 1){\n            return $arr;\n        }\n    \n        for ($i=1; $i<$count; $i++){\n            $insertValue = $arr[$i];\n            $insertIndex = $i-1;\n            while($insertIndex >= 0 && $insertValue < $arr[$insertIndex]){\n                $arr[$insertIndex+1] = $arr[$insertIndex];\n                $insertIndex--;\n            }\n            $arr[$insertIndex+1] = $insertValue;\n        }\n        return $arr;\n    }\n    \n    $arr = [1,45,2,5,54,3,23];\n    print_r(insertSort($arr));\n    //  Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 5 [4] => 23 [5] => 45 [6] => 54 )\n    ```\n### 归并排序\n\n\n  \n### 二分查找法\n- 概念\n    二分查找也称折半查找（Binary Search），它是一种效率较高的查找方法。但是，折半查找要求线性表必须采用顺序存储结构，而且表中元素按关键字有序排列。\n    首先，假设表中元素是按升序排列，将表中间位置记录的关键字与查找关键字比较，如果两者相等，则查找成功；否则利用中间位置记录将表分成前、后两个子表，如果中间位置记录的关键字大于查找关键字，则进一步查找前一子表，否则进一步查找后一子表。重复以上过程，直到找到满足条件的记录，使查找成功，或直到子表不存在为止，此时查找不成功。\n- 代码实例\n    - 循环二分查找\n    ```php\n    function binarySearch($array,$findVal){\n        if (!is_array($array) || empty($array)) return -1;\n        \n        $start = 0;\n        $end = count($array) - 1;\n        while ($start <= $end){\n            $middle = intval(($start+$end)/2);\n            if ($array[$middle] > $findVal){\n                $end = $middle - 1;\n            }elseif ($array[$middle] < $findVal){\n                $start = $middle + 1;\n            }else{\n                return $middle;\n            }\n        }\n        \n        return -1;\n    }\n        \n    $array = [3,54,67,124,542,642,843];\n    echo binarySearch($array, 542);     // 4\n    ```\n    - 递归二分查找\n    ```php\n    function binarySearch($array,$findVal,$start,$end){\n        $middle = intval(($start+$end)/2);\n        if($start>$end) return -1;\n        if ($array[$middle] > $findVal){\n            return binarySearch($array,$findVal,$start,$middle-1);\n        }elseif ($array[$middle] < $findVal){\n            return binarySearch($array,$findVal,$middle+1,$end);\n        }else{\n            return $middle;\n        }\n    }\n    \n    $array = [3,54,67,124,542,642,843];\n    echo binarySearch($array, 542,0,count($array)-1);     // 4\n    ```","slug":"PHP/其他/PHP常用的算法","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uy007boshg5l2ugdym","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"冒泡排序\"><a href=\"#冒泡排序\" class=\"headerlink\" title=\"冒泡排序\"></a>冒泡排序</h3><ul>\n<li>时间复杂度：O(N^2)</li>\n<li>代码实现<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bubbleSort</span>(<span class=\"params\"><span class=\"variable\">$arr</span></span>)</span>{</span><br><span class=\"line\">    <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">0</span>; <span class=\"variable\">$i</span>&lt;<span class=\"variable\">$n</span>-<span class=\"number\">1</span>; <span class=\"variable\">$i</span>++){</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$j</span>=<span class=\"variable\">$i</span>+<span class=\"number\">1</span>; <span class=\"variable\">$j</span>&lt;<span class=\"variable\">$n</span>; <span class=\"variable\">$j</span>++){</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$arr</span>[<span class=\"variable\">$j</span>] &lt; <span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>]){</span><br><span class=\"line\">                [<span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>], <span class=\"variable\">$arr</span>[<span class=\"variable\">$j</span>]] = [<span class=\"variable\">$arr</span>[<span class=\"variable\">$j</span>], <span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>]];</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"number\">45</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">54</span>,<span class=\"number\">3</span>,<span class=\"number\">23</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"title function_ invoke__\">bubbleSort</span>(<span class=\"variable\">$arr</span>));</span><br><span class=\"line\"><span class=\"comment\">// Array ( [0] =&gt; 2 [1] =&gt; 3 [2] =&gt; 5 [3] =&gt; 23 [4] =&gt; 45 [5] =&gt; 54 )</span></span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<h3 id=\"快速排序\"><a href=\"#快速排序\" class=\"headerlink\" title=\"快速排序\"></a>快速排序</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">quickSort</span>(<span class=\"params\"><span class=\"variable\">$arr</span></span>)</span>{</span><br><span class=\"line\">    <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$n</span> &lt;= <span class=\"number\">1</span>)    <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>;</span><br><span class=\"line\">    <span class=\"variable\">$index</span> = <span class=\"variable\">$arr</span>[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"variable\">$leftArr</span> = <span class=\"variable\">$rightArr</span> = [];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">1</span>; <span class=\"variable\">$i</span>&lt;<span class=\"variable\">$n</span>; <span class=\"variable\">$i</span>++){</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>] &lt;= <span class=\"variable\">$index</span>){</span><br><span class=\"line\">            <span class=\"variable\">$leftArr</span>[] = <span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>];</span><br><span class=\"line\">        }<span class=\"keyword\">else</span>{</span><br><span class=\"line\">            <span class=\"variable\">$rightArr</span>[] = <span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>];</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$leftArr</span> = <span class=\"title function_ invoke__\">quickSort</span>(<span class=\"variable\">$leftArr</span>);</span><br><span class=\"line\">    <span class=\"variable\">$rightArr</span> = <span class=\"title function_ invoke__\">quickSort</span>(<span class=\"variable\">$rightArr</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">array_merge</span>(<span class=\"variable\">$leftArr</span>,[<span class=\"variable\">$index</span>],<span class=\"variable\">$rightArr</span>);</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"number\">1</span>,<span class=\"number\">45</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">54</span>,<span class=\"number\">3</span>,<span class=\"number\">23</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"title function_ invoke__\">quickSort</span>(<span class=\"variable\">$arr</span>));</span><br><span class=\"line\"><span class=\"comment\">// Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [3] =&gt; 5 [4] =&gt; 23 [5] =&gt; 45 [6] =&gt; 54 )</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"选择排序\"><a href=\"#选择排序\" class=\"headerlink\" title=\"选择排序\"></a>选择排序</h3><ul>\n<li>时间复杂度：O(N^2)</li>\n<li>代码实现<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selectSort</span>(<span class=\"params\"><span class=\"variable\">$arr</span></span>)</span>{</span><br><span class=\"line\">    <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">0</span>; <span class=\"variable\">$i</span>&lt;<span class=\"variable\">$n</span>-<span class=\"number\">1</span>; <span class=\"variable\">$i</span>++){</span><br><span class=\"line\">        <span class=\"variable\">$k</span> = <span class=\"variable\">$i</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$j</span>=<span class=\"variable\">$i</span>+<span class=\"number\">1</span>; <span class=\"variable\">$j</span>&lt;<span class=\"variable\">$n</span>; <span class=\"variable\">$j</span>++){</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$arr</span>[<span class=\"variable\">$k</span>] &gt; <span class=\"variable\">$arr</span>[<span class=\"variable\">$j</span>]){</span><br><span class=\"line\">                <span class=\"variable\">$k</span> = <span class=\"variable\">$j</span>;</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$k</span> != <span class=\"variable\">$i</span>){</span><br><span class=\"line\">            [<span class=\"variable\">$arr</span>[<span class=\"variable\">$k</span>],<span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>]] = [<span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>],<span class=\"variable\">$arr</span>[<span class=\"variable\">$k</span>]];</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"number\">1</span>,<span class=\"number\">45</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">54</span>,<span class=\"number\">3</span>,<span class=\"number\">23</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"title function_ invoke__\">selectSort</span>(<span class=\"variable\">$arr</span>));</span><br><span class=\"line\"><span class=\"comment\">// Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [3] =&gt; 5 [4] =&gt; 23 [5] =&gt; 45 [6] =&gt; 54 )</span></span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<h3 id=\"插入排序\"><a href=\"#插入排序\" class=\"headerlink\" title=\"插入排序\"></a>插入排序</h3><ul>\n<li>流程<br>将一个待排序的无序的数组看作是两个列表，一个有序的列表，一个无序的列表，从无序的列表每次拿出一个待插入的元素，插入到有序的列表中，直到无序列表为空，排序完毕.</li>\n<li>实例<ol>\n<li>有一个无序的一维数组是这次需要排序的数组，数组是：[36,12,96,-1]</li>\n<li>首先把数组的第一个元素 [36] 看作是一个独立的有序的列表，把剩下的元素 [12, 96, -1] 看作是一个无序的列表</li>\n<li>第一个待插入的元素就是 12，要把 12 插入到有序的列表中，首先需要 12 和 36 比较，如果带插入的元素 12 小于 36, 就需要把 12 插入到 36前面，也就是 36 要后移一位。</li>\n<li>插入排序实际是需要比较数组元素的总数减一轮，因为第一个元素不需要比较。</li>\n</ol>\n</li>\n<li>时间复杂度：O(N^2)</li>\n<li>代码实现  <figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insertSort</span>(<span class=\"params\"><span class=\"variable\">$arr</span></span>)</span>{</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"title function_ invoke__\">is_array</span>(<span class=\"variable\">$arr</span>))    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"variable\">$count</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$count</span> &lt;= <span class=\"number\">1</span>){</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">1</span>; <span class=\"variable\">$i</span>&lt;<span class=\"variable\">$count</span>; <span class=\"variable\">$i</span>++){</span><br><span class=\"line\">        <span class=\"variable\">$insertValue</span> = <span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>];</span><br><span class=\"line\">        <span class=\"variable\">$insertIndex</span> = <span class=\"variable\">$i</span>-<span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"variable\">$insertIndex</span> &gt;= <span class=\"number\">0</span> &amp;&amp; <span class=\"variable\">$insertValue</span> &lt; <span class=\"variable\">$arr</span>[<span class=\"variable\">$insertIndex</span>]){</span><br><span class=\"line\">            <span class=\"variable\">$arr</span>[<span class=\"variable\">$insertIndex</span>+<span class=\"number\">1</span>] = <span class=\"variable\">$arr</span>[<span class=\"variable\">$insertIndex</span>];</span><br><span class=\"line\">            <span class=\"variable\">$insertIndex</span>--;</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"variable\">$arr</span>[<span class=\"variable\">$insertIndex</span>+<span class=\"number\">1</span>] = <span class=\"variable\">$insertValue</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"number\">1</span>,<span class=\"number\">45</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">54</span>,<span class=\"number\">3</span>,<span class=\"number\">23</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"title function_ invoke__\">insertSort</span>(<span class=\"variable\">$arr</span>));</span><br><span class=\"line\"><span class=\"comment\">//  Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [3] =&gt; 5 [4] =&gt; 23 [5] =&gt; 45 [6] =&gt; 54 )</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"归并排序\"><a href=\"#归并排序\" class=\"headerlink\" title=\"归并排序\"></a>归并排序</h3></li>\n</ul>\n<h3 id=\"二分查找法\"><a href=\"#二分查找法\" class=\"headerlink\" title=\"二分查找法\"></a>二分查找法</h3><ul>\n<li>概念<br>  二分查找也称折半查找（Binary Search），它是一种效率较高的查找方法。但是，折半查找要求线性表必须采用顺序存储结构，而且表中元素按关键字有序排列。<br>  首先，假设表中元素是按升序排列，将表中间位置记录的关键字与查找关键字比较，如果两者相等，则查找成功；否则利用中间位置记录将表分成前、后两个子表，如果中间位置记录的关键字大于查找关键字，则进一步查找前一子表，否则进一步查找后一子表。重复以上过程，直到找到满足条件的记录，使查找成功，或直到子表不存在为止，此时查找不成功。</li>\n<li>代码实例<ul>\n<li>循环二分查找<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">binarySearch</span>(<span class=\"params\"><span class=\"variable\">$array</span>,<span class=\"variable\">$findVal</span></span>)</span>{</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"title function_ invoke__\">is_array</span>(<span class=\"variable\">$array</span>) || <span class=\"keyword\">empty</span>(<span class=\"variable\">$array</span>)) <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"variable\">$start</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"variable\">$end</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$array</span>) - <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"variable\">$start</span> &lt;= <span class=\"variable\">$end</span>){</span><br><span class=\"line\">        <span class=\"variable\">$middle</span> = <span class=\"title function_ invoke__\">intval</span>((<span class=\"variable\">$start</span>+<span class=\"variable\">$end</span>)/<span class=\"number\">2</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$array</span>[<span class=\"variable\">$middle</span>] &gt; <span class=\"variable\">$findVal</span>){</span><br><span class=\"line\">            <span class=\"variable\">$end</span> = <span class=\"variable\">$middle</span> - <span class=\"number\">1</span>;</span><br><span class=\"line\">        }<span class=\"keyword\">elseif</span> (<span class=\"variable\">$array</span>[<span class=\"variable\">$middle</span>] &lt; <span class=\"variable\">$findVal</span>){</span><br><span class=\"line\">            <span class=\"variable\">$start</span> = <span class=\"variable\">$middle</span> + <span class=\"number\">1</span>;</span><br><span class=\"line\">        }<span class=\"keyword\">else</span>{</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"variable\">$middle</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"variable\">$array</span> = [<span class=\"number\">3</span>,<span class=\"number\">54</span>,<span class=\"number\">67</span>,<span class=\"number\">124</span>,<span class=\"number\">542</span>,<span class=\"number\">642</span>,<span class=\"number\">843</span>];</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">binarySearch</span>(<span class=\"variable\">$array</span>, <span class=\"number\">542</span>);     <span class=\"comment\">// 4</span></span><br></pre></td></tr></tbody></table></figure></li>\n<li>递归二分查找<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">binarySearch</span>(<span class=\"params\"><span class=\"variable\">$array</span>,<span class=\"variable\">$findVal</span>,<span class=\"variable\">$start</span>,<span class=\"variable\">$end</span></span>)</span>{</span><br><span class=\"line\">    <span class=\"variable\">$middle</span> = <span class=\"title function_ invoke__\">intval</span>((<span class=\"variable\">$start</span>+<span class=\"variable\">$end</span>)/<span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"variable\">$start</span>&gt;<span class=\"variable\">$end</span>) <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$array</span>[<span class=\"variable\">$middle</span>] &gt; <span class=\"variable\">$findVal</span>){</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">binarySearch</span>(<span class=\"variable\">$array</span>,<span class=\"variable\">$findVal</span>,<span class=\"variable\">$start</span>,<span class=\"variable\">$middle</span>-<span class=\"number\">1</span>);</span><br><span class=\"line\">    }<span class=\"keyword\">elseif</span> (<span class=\"variable\">$array</span>[<span class=\"variable\">$middle</span>] &lt; <span class=\"variable\">$findVal</span>){</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">binarySearch</span>(<span class=\"variable\">$array</span>,<span class=\"variable\">$findVal</span>,<span class=\"variable\">$middle</span>+<span class=\"number\">1</span>,<span class=\"variable\">$end</span>);</span><br><span class=\"line\">    }<span class=\"keyword\">else</span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$middle</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$array</span> = [<span class=\"number\">3</span>,<span class=\"number\">54</span>,<span class=\"number\">67</span>,<span class=\"number\">124</span>,<span class=\"number\">542</span>,<span class=\"number\">642</span>,<span class=\"number\">843</span>];</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">binarySearch</span>(<span class=\"variable\">$array</span>, <span class=\"number\">542</span>,<span class=\"number\">0</span>,<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$array</span>)-<span class=\"number\">1</span>);     <span class=\"comment\">// 4</span></span><br></pre></td></tr></tbody></table></figure></li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<h3 id=\"冒泡排序\"><a href=\"#冒泡排序\" class=\"headerlink\" title=\"冒泡排序\"></a>冒泡排序</h3><ul>\n<li>时间复杂度：O(N^2)</li>\n<li>代码实现<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bubbleSort</span>(<span class=\"params\"><span class=\"variable\">$arr</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">0</span>; <span class=\"variable\">$i</span>&lt;<span class=\"variable\">$n</span>-<span class=\"number\">1</span>; <span class=\"variable\">$i</span>++)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$j</span>=<span class=\"variable\">$i</span>+<span class=\"number\">1</span>; <span class=\"variable\">$j</span>&lt;<span class=\"variable\">$n</span>; <span class=\"variable\">$j</span>++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$arr</span>[<span class=\"variable\">$j</span>] &lt; <span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>])&#123;</span><br><span class=\"line\">                [<span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>], <span class=\"variable\">$arr</span>[<span class=\"variable\">$j</span>]] = [<span class=\"variable\">$arr</span>[<span class=\"variable\">$j</span>], <span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>]];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"number\">45</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">54</span>,<span class=\"number\">3</span>,<span class=\"number\">23</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"title function_ invoke__\">bubbleSort</span>(<span class=\"variable\">$arr</span>));</span><br><span class=\"line\"><span class=\"comment\">// Array ( [0] =&gt; 2 [1] =&gt; 3 [2] =&gt; 5 [3] =&gt; 23 [4] =&gt; 45 [5] =&gt; 54 )</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"快速排序\"><a href=\"#快速排序\" class=\"headerlink\" title=\"快速排序\"></a>快速排序</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">quickSort</span>(<span class=\"params\"><span class=\"variable\">$arr</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$n</span> &lt;= <span class=\"number\">1</span>)    <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>;</span><br><span class=\"line\">    <span class=\"variable\">$index</span> = <span class=\"variable\">$arr</span>[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"variable\">$leftArr</span> = <span class=\"variable\">$rightArr</span> = [];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">1</span>; <span class=\"variable\">$i</span>&lt;<span class=\"variable\">$n</span>; <span class=\"variable\">$i</span>++)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>] &lt;= <span class=\"variable\">$index</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable\">$leftArr</span>[] = <span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>];</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"variable\">$rightArr</span>[] = <span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$leftArr</span> = <span class=\"title function_ invoke__\">quickSort</span>(<span class=\"variable\">$leftArr</span>);</span><br><span class=\"line\">    <span class=\"variable\">$rightArr</span> = <span class=\"title function_ invoke__\">quickSort</span>(<span class=\"variable\">$rightArr</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">array_merge</span>(<span class=\"variable\">$leftArr</span>,[<span class=\"variable\">$index</span>],<span class=\"variable\">$rightArr</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"number\">1</span>,<span class=\"number\">45</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">54</span>,<span class=\"number\">3</span>,<span class=\"number\">23</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"title function_ invoke__\">quickSort</span>(<span class=\"variable\">$arr</span>));</span><br><span class=\"line\"><span class=\"comment\">// Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [3] =&gt; 5 [4] =&gt; 23 [5] =&gt; 45 [6] =&gt; 54 )</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"选择排序\"><a href=\"#选择排序\" class=\"headerlink\" title=\"选择排序\"></a>选择排序</h3><ul>\n<li>时间复杂度：O(N^2)</li>\n<li>代码实现<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selectSort</span>(<span class=\"params\"><span class=\"variable\">$arr</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">0</span>; <span class=\"variable\">$i</span>&lt;<span class=\"variable\">$n</span>-<span class=\"number\">1</span>; <span class=\"variable\">$i</span>++)&#123;</span><br><span class=\"line\">        <span class=\"variable\">$k</span> = <span class=\"variable\">$i</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$j</span>=<span class=\"variable\">$i</span>+<span class=\"number\">1</span>; <span class=\"variable\">$j</span>&lt;<span class=\"variable\">$n</span>; <span class=\"variable\">$j</span>++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$arr</span>[<span class=\"variable\">$k</span>] &gt; <span class=\"variable\">$arr</span>[<span class=\"variable\">$j</span>])&#123;</span><br><span class=\"line\">                <span class=\"variable\">$k</span> = <span class=\"variable\">$j</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$k</span> != <span class=\"variable\">$i</span>)&#123;</span><br><span class=\"line\">            [<span class=\"variable\">$arr</span>[<span class=\"variable\">$k</span>],<span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>]] = [<span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>],<span class=\"variable\">$arr</span>[<span class=\"variable\">$k</span>]];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"number\">1</span>,<span class=\"number\">45</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">54</span>,<span class=\"number\">3</span>,<span class=\"number\">23</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"title function_ invoke__\">selectSort</span>(<span class=\"variable\">$arr</span>));</span><br><span class=\"line\"><span class=\"comment\">// Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [3] =&gt; 5 [4] =&gt; 23 [5] =&gt; 45 [6] =&gt; 54 )</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"插入排序\"><a href=\"#插入排序\" class=\"headerlink\" title=\"插入排序\"></a>插入排序</h3><ul>\n<li>流程<br>将一个待排序的无序的数组看作是两个列表，一个有序的列表，一个无序的列表，从无序的列表每次拿出一个待插入的元素，插入到有序的列表中，直到无序列表为空，排序完毕.</li>\n<li>实例<ol>\n<li>有一个无序的一维数组是这次需要排序的数组，数组是：[36,12,96,-1]</li>\n<li>首先把数组的第一个元素 [36] 看作是一个独立的有序的列表，把剩下的元素 [12, 96, -1] 看作是一个无序的列表</li>\n<li>第一个待插入的元素就是 12，要把 12 插入到有序的列表中，首先需要 12 和 36 比较，如果带插入的元素 12 小于 36, 就需要把 12 插入到 36前面，也就是 36 要后移一位。</li>\n<li>插入排序实际是需要比较数组元素的总数减一轮，因为第一个元素不需要比较。</li>\n</ol>\n</li>\n<li>时间复杂度：O(N^2)</li>\n<li>代码实现  <figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">insertSort</span>(<span class=\"params\"><span class=\"variable\">$arr</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"title function_ invoke__\">is_array</span>(<span class=\"variable\">$arr</span>))    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"variable\">$count</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$count</span> &lt;= <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">1</span>; <span class=\"variable\">$i</span>&lt;<span class=\"variable\">$count</span>; <span class=\"variable\">$i</span>++)&#123;</span><br><span class=\"line\">        <span class=\"variable\">$insertValue</span> = <span class=\"variable\">$arr</span>[<span class=\"variable\">$i</span>];</span><br><span class=\"line\">        <span class=\"variable\">$insertIndex</span> = <span class=\"variable\">$i</span>-<span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"variable\">$insertIndex</span> &gt;= <span class=\"number\">0</span> &amp;&amp; <span class=\"variable\">$insertValue</span> &lt; <span class=\"variable\">$arr</span>[<span class=\"variable\">$insertIndex</span>])&#123;</span><br><span class=\"line\">            <span class=\"variable\">$arr</span>[<span class=\"variable\">$insertIndex</span>+<span class=\"number\">1</span>] = <span class=\"variable\">$arr</span>[<span class=\"variable\">$insertIndex</span>];</span><br><span class=\"line\">            <span class=\"variable\">$insertIndex</span>--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"variable\">$arr</span>[<span class=\"variable\">$insertIndex</span>+<span class=\"number\">1</span>] = <span class=\"variable\">$insertValue</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$arr</span> = [<span class=\"number\">1</span>,<span class=\"number\">45</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">54</span>,<span class=\"number\">3</span>,<span class=\"number\">23</span>];</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"title function_ invoke__\">insertSort</span>(<span class=\"variable\">$arr</span>));</span><br><span class=\"line\"><span class=\"comment\">//  Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [3] =&gt; 5 [4] =&gt; 23 [5] =&gt; 45 [6] =&gt; 54 )</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"归并排序\"><a href=\"#归并排序\" class=\"headerlink\" title=\"归并排序\"></a>归并排序</h3></li>\n</ul>\n<h3 id=\"二分查找法\"><a href=\"#二分查找法\" class=\"headerlink\" title=\"二分查找法\"></a>二分查找法</h3><ul>\n<li>概念<br>  二分查找也称折半查找（Binary Search），它是一种效率较高的查找方法。但是，折半查找要求线性表必须采用顺序存储结构，而且表中元素按关键字有序排列。<br>  首先，假设表中元素是按升序排列，将表中间位置记录的关键字与查找关键字比较，如果两者相等，则查找成功；否则利用中间位置记录将表分成前、后两个子表，如果中间位置记录的关键字大于查找关键字，则进一步查找前一子表，否则进一步查找后一子表。重复以上过程，直到找到满足条件的记录，使查找成功，或直到子表不存在为止，此时查找不成功。</li>\n<li>代码实例<ul>\n<li>循环二分查找<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">binarySearch</span>(<span class=\"params\"><span class=\"variable\">$array</span>,<span class=\"variable\">$findVal</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"title function_ invoke__\">is_array</span>(<span class=\"variable\">$array</span>) || <span class=\"keyword\">empty</span>(<span class=\"variable\">$array</span>)) <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"variable\">$start</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"variable\">$end</span> = <span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$array</span>) - <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"variable\">$start</span> &lt;= <span class=\"variable\">$end</span>)&#123;</span><br><span class=\"line\">        <span class=\"variable\">$middle</span> = <span class=\"title function_ invoke__\">intval</span>((<span class=\"variable\">$start</span>+<span class=\"variable\">$end</span>)/<span class=\"number\">2</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$array</span>[<span class=\"variable\">$middle</span>] &gt; <span class=\"variable\">$findVal</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable\">$end</span> = <span class=\"variable\">$middle</span> - <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">elseif</span> (<span class=\"variable\">$array</span>[<span class=\"variable\">$middle</span>] &lt; <span class=\"variable\">$findVal</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable\">$start</span> = <span class=\"variable\">$middle</span> + <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"variable\">$middle</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"variable\">$array</span> = [<span class=\"number\">3</span>,<span class=\"number\">54</span>,<span class=\"number\">67</span>,<span class=\"number\">124</span>,<span class=\"number\">542</span>,<span class=\"number\">642</span>,<span class=\"number\">843</span>];</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">binarySearch</span>(<span class=\"variable\">$array</span>, <span class=\"number\">542</span>);     <span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure></li>\n<li>递归二分查找<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">binarySearch</span>(<span class=\"params\"><span class=\"variable\">$array</span>,<span class=\"variable\">$findVal</span>,<span class=\"variable\">$start</span>,<span class=\"variable\">$end</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$middle</span> = <span class=\"title function_ invoke__\">intval</span>((<span class=\"variable\">$start</span>+<span class=\"variable\">$end</span>)/<span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"variable\">$start</span>&gt;<span class=\"variable\">$end</span>) <span class=\"keyword\">return</span> -<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$array</span>[<span class=\"variable\">$middle</span>] &gt; <span class=\"variable\">$findVal</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">binarySearch</span>(<span class=\"variable\">$array</span>,<span class=\"variable\">$findVal</span>,<span class=\"variable\">$start</span>,<span class=\"variable\">$middle</span>-<span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">elseif</span> (<span class=\"variable\">$array</span>[<span class=\"variable\">$middle</span>] &lt; <span class=\"variable\">$findVal</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">binarySearch</span>(<span class=\"variable\">$array</span>,<span class=\"variable\">$findVal</span>,<span class=\"variable\">$middle</span>+<span class=\"number\">1</span>,<span class=\"variable\">$end</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$middle</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$array</span> = [<span class=\"number\">3</span>,<span class=\"number\">54</span>,<span class=\"number\">67</span>,<span class=\"number\">124</span>,<span class=\"number\">542</span>,<span class=\"number\">642</span>,<span class=\"number\">843</span>];</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">binarySearch</span>(<span class=\"variable\">$array</span>, <span class=\"number\">542</span>,<span class=\"number\">0</span>,<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$array</span>)-<span class=\"number\">1</span>);     <span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n"},{"title":"PHP常用的魔术方法","abbrlink":"php-magic-methods","date":"2020-08-22T02:36:25.000Z","updated":"2020-08-22T02:36:25.000Z","_content":"\n1. __construct()\n\n2. __clone()\n\n3. __get()\n\n4. __set()\n\n5. __call()","source":"_posts/PHP/其他/PHP常用的魔术方法.md","raw":"---\ntitle: PHP常用的魔术方法\ntags: [魔术方法]\ncategories: [PHP]\nabbrlink: 'php-magic-methods'\ndate: 2020-08-22 10:36:25\nupdated: 2020-08-22 10:36:25\n---\n\n1. __construct()\n\n2. __clone()\n\n3. __get()\n\n4. __set()\n\n5. __call()","slug":"PHP/其他/PHP常用的魔术方法","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uy007doshg5jwfg1z7","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li><p>__construct()</p>\n</li>\n<li><p>__clone()</p>\n</li>\n<li><p>__get()</p>\n</li>\n<li><p>__set()</p>\n</li>\n<li><p>__call()</p>\n</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li><p>__construct()</p>\n</li>\n<li><p>__clone()</p>\n</li>\n<li><p>__get()</p>\n</li>\n<li><p>__set()</p>\n</li>\n<li><p>__call()</p>\n</li>\n</ol>\n"},{"title":"PHP实现方法运行前(后)执行指定的程序","abbrlink":"php-auto-run-func","date":"2022-06-02T13:02:57.000Z","updated":"2022-06-02T13:02:57.000Z","_content":"\n\n在PHP中，利用__call()，可实现方法运行前/后执行指定的程序片段。\n\n下面演示下，在test方法执行后自动执行afterTest方法\n\n```php\ntrait A{\n    public function __call($method, $args){\n        if (!method_exists($this, $method)) {\n            throw new Exception('no such method: ' . $method);\n        }\n        $afterMethod = 'after'.ucfirst($method);\n        if (method_exists($this, $afterMethod)) {\n            $rs = call_user_func_array([$this, $method], $args);\n            if ($rs['code'] == 0) {\n                call_user_func_array([$this, $afterMethod], $rs);\n                return $rs;\n            }\n        } else {\n            return call_user_func_array([$this, $method], $args);\n        }\n    }\n\n    private function afterTest(...$args){\n        print_r($args);\n    }\n}\n\nClass B{\n    use A;\n    protected function test($id,$name): array{\n        return $id>10 ? ['code'=>1,'msg'=>'ok'] : ['code'=>0,'msg'=>'error'];\n    }\n}\n\n$rs = (new B())->test(7,'张三');\n```\n输出结果为：\n`Array ( [0] => 0 [1] => error )`\n\n不难看出，这种处理方式存在以下两个缺陷：\n1. 方法需设为外界不可用，protected/privated，在IDE中就无法跳转，其他人维护起来比较困难；\n2. 代码耦合度高，相互影响，不利于后期扩展。","source":"_posts/PHP/其他/PHP实现方法运行前(后)执行指定的程序.md","raw":"---\ntitle: PHP实现方法运行前(后)执行指定的程序\ntags: [PHP笔记]\ncategories: [PHP]\nabbrlink: 'php-auto-run-func'\ndate: 2022-06-02 21:02:57\nupdated: 2022-06-02 21:02:57\n---\n\n\n在PHP中，利用__call()，可实现方法运行前/后执行指定的程序片段。\n\n下面演示下，在test方法执行后自动执行afterTest方法\n\n```php\ntrait A{\n    public function __call($method, $args){\n        if (!method_exists($this, $method)) {\n            throw new Exception('no such method: ' . $method);\n        }\n        $afterMethod = 'after'.ucfirst($method);\n        if (method_exists($this, $afterMethod)) {\n            $rs = call_user_func_array([$this, $method], $args);\n            if ($rs['code'] == 0) {\n                call_user_func_array([$this, $afterMethod], $rs);\n                return $rs;\n            }\n        } else {\n            return call_user_func_array([$this, $method], $args);\n        }\n    }\n\n    private function afterTest(...$args){\n        print_r($args);\n    }\n}\n\nClass B{\n    use A;\n    protected function test($id,$name): array{\n        return $id>10 ? ['code'=>1,'msg'=>'ok'] : ['code'=>0,'msg'=>'error'];\n    }\n}\n\n$rs = (new B())->test(7,'张三');\n```\n输出结果为：\n`Array ( [0] => 0 [1] => error )`\n\n不难看出，这种处理方式存在以下两个缺陷：\n1. 方法需设为外界不可用，protected/privated，在IDE中就无法跳转，其他人维护起来比较困难；\n2. 代码耦合度高，相互影响，不利于后期扩展。","slug":"PHP/其他/PHP实现方法运行前(后)执行指定的程序","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uz007hoshg7kh23zkd","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>在PHP中，利用__call()，可实现方法运行前/后执行指定的程序片段。</p>\n<p>下面演示下，在test方法执行后自动执行afterTest方法</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">trait</span> <span class=\"title\">A</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__call</span>(<span class=\"params\"><span class=\"variable\">$method</span>, <span class=\"variable\">$args</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"title function_ invoke__\">method_exists</span>(<span class=\"variable\">$this</span>, <span class=\"variable\">$method</span>)) {</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Exception</span>(<span class=\"string\">'no such method: '</span> . <span class=\"variable\">$method</span>);</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"variable\">$afterMethod</span> = <span class=\"string\">'after'</span>.<span class=\"title function_ invoke__\">ucfirst</span>(<span class=\"variable\">$method</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">method_exists</span>(<span class=\"variable\">$this</span>, <span class=\"variable\">$afterMethod</span>)) {</span><br><span class=\"line\">            <span class=\"variable\">$rs</span> = <span class=\"title function_ invoke__\">call_user_func_array</span>([<span class=\"variable\">$this</span>, <span class=\"variable\">$method</span>], <span class=\"variable\">$args</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$rs</span>[<span class=\"string\">'code'</span>] == <span class=\"number\">0</span>) {</span><br><span class=\"line\">                <span class=\"title function_ invoke__\">call_user_func_array</span>([<span class=\"variable\">$this</span>, <span class=\"variable\">$afterMethod</span>], <span class=\"variable\">$rs</span>);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"variable\">$rs</span>;</span><br><span class=\"line\">            }</span><br><span class=\"line\">        } <span class=\"keyword\">else</span> {</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">call_user_func_array</span>([<span class=\"variable\">$this</span>, <span class=\"variable\">$method</span>], <span class=\"variable\">$args</span>);</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterTest</span>(<span class=\"params\">...<span class=\"variable\">$args</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$args</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">Class B{</span><br><span class=\"line\">    <span class=\"keyword\">use</span> <span class=\"title\">A</span>;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"><span class=\"variable\">$id</span>,<span class=\"variable\">$name</span></span>): <span class=\"title\">array</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$id</span>&gt;<span class=\"number\">10</span> ? [<span class=\"string\">'code'</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">'msg'</span>=&gt;<span class=\"string\">'ok'</span>] : [<span class=\"string\">'code'</span>=&gt;<span class=\"number\">0</span>,<span class=\"string\">'msg'</span>=&gt;<span class=\"string\">'error'</span>];</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$rs</span> = (<span class=\"keyword\">new</span> <span class=\"title function_ invoke__\">B</span>())-&gt;<span class=\"title function_ invoke__\">test</span>(<span class=\"number\">7</span>,<span class=\"string\">'张三'</span>);</span><br></pre></td></tr></tbody></table></figure>\n<p>输出结果为：<br><code>Array ( [0] =&gt; 0 [1] =&gt; error )</code></p>\n<p>不难看出，这种处理方式存在以下两个缺陷：</p>\n<ol>\n<li>方法需设为外界不可用，protected/privated，在IDE中就无法跳转，其他人维护起来比较困难；</li>\n<li>代码耦合度高，相互影响，不利于后期扩展。</li>\n</ol>\n","excerpt":"","more":"<p>在PHP中，利用__call()，可实现方法运行前/后执行指定的程序片段。</p>\n<p>下面演示下，在test方法执行后自动执行afterTest方法</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">trait</span> <span class=\"title\">A</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__call</span>(<span class=\"params\"><span class=\"variable\">$method</span>, <span class=\"variable\">$args</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"title function_ invoke__\">method_exists</span>(<span class=\"variable\">$this</span>, <span class=\"variable\">$method</span>)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Exception</span>(<span class=\"string\">&#x27;no such method: &#x27;</span> . <span class=\"variable\">$method</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"variable\">$afterMethod</span> = <span class=\"string\">&#x27;after&#x27;</span>.<span class=\"title function_ invoke__\">ucfirst</span>(<span class=\"variable\">$method</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">method_exists</span>(<span class=\"variable\">$this</span>, <span class=\"variable\">$afterMethod</span>)) &#123;</span><br><span class=\"line\">            <span class=\"variable\">$rs</span> = <span class=\"title function_ invoke__\">call_user_func_array</span>([<span class=\"variable\">$this</span>, <span class=\"variable\">$method</span>], <span class=\"variable\">$args</span>);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$rs</span>[<span class=\"string\">&#x27;code&#x27;</span>] == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                <span class=\"title function_ invoke__\">call_user_func_array</span>([<span class=\"variable\">$this</span>, <span class=\"variable\">$afterMethod</span>], <span class=\"variable\">$rs</span>);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"variable\">$rs</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">call_user_func_array</span>([<span class=\"variable\">$this</span>, <span class=\"variable\">$method</span>], <span class=\"variable\">$args</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">afterTest</span>(<span class=\"params\">...<span class=\"variable\">$args</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$args</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Class B&#123;</span><br><span class=\"line\">    <span class=\"keyword\">use</span> <span class=\"title\">A</span>;</span><br><span class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\"><span class=\"variable\">$id</span>,<span class=\"variable\">$name</span></span>): <span class=\"title\">array</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$id</span>&gt;<span class=\"number\">10</span> ? [<span class=\"string\">&#x27;code&#x27;</span>=&gt;<span class=\"number\">1</span>,<span class=\"string\">&#x27;msg&#x27;</span>=&gt;<span class=\"string\">&#x27;ok&#x27;</span>] : [<span class=\"string\">&#x27;code&#x27;</span>=&gt;<span class=\"number\">0</span>,<span class=\"string\">&#x27;msg&#x27;</span>=&gt;<span class=\"string\">&#x27;error&#x27;</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$rs</span> = (<span class=\"keyword\">new</span> <span class=\"title function_ invoke__\">B</span>())-&gt;<span class=\"title function_ invoke__\">test</span>(<span class=\"number\">7</span>,<span class=\"string\">&#x27;张三&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<p>输出结果为：<br><code>Array ( [0] =&gt; 0 [1] =&gt; error )</code></p>\n<p>不难看出，这种处理方式存在以下两个缺陷：</p>\n<ol>\n<li>方法需设为外界不可用，protected/privated，在IDE中就无法跳转，其他人维护起来比较困难；</li>\n<li>代码耦合度高，相互影响，不利于后期扩展。</li>\n</ol>\n"},{"title":"PHP常见面试题","abbrlink":"php-interview","date":"2022-03-07T04:15:40.000Z","updated":"2022-03-07T04:15:40.000Z","_content":"\n#### 1、什么是面向对象？主要特征是什么？\n面向对象是程序的一种设计方式，它利于提高程序的重用性，使程序结构更加清晰。主要特征：封装、继承、多态。\n\n#### 2、session 与 cookie 的区别和联系，请从协议，产生的原因与作用说明?\nA、http无状态协议，不能区分用户是否是从同一个网站上来的，同一个用户请求不同的页面不能看做是同一个用户。\nB、SESSION存储在服务器端，COOKIE保存在客户端。Session比较安全，cookie用某些手段可以修改，不安全。Session依赖于cookie进行传递。\n禁用cookie后，session不能正常使用。Session的缺点：保存在服务器端，每次读取都从服务器进行读取，对服务器有资源消耗。Session保存在服务器端的文件或数据库中，默认保存在文件中，文件路径由php配置文件的session.save_path指定。Session文件是公有的。\n\n区别：\n1. 存放位置：Session 保存在服务器，Cookie 保存在客户端。\n2. 存放的形式：Session 是以对象的形式保存在服务器，Cookie 以字符串的形式保存在客户端。\n3. 用途：Cookies 适合做保存用户的个人设置，爱好等，Session 适合做客户的身份验证\n4. 路径：Session 不能区分路径，同一个用户在访问一个网站期间，所有的 Session 在任何一个地方都可以访问到。而 Cookie 中如果设置了路径参数，那么同一个网站中不同路径下的 Cookie 互相是访问不到的。\n5. 安全性：Cookie 不是很安全，别人可以分析存放在本地的 COOKIE 并进行 COOKIE 欺骗，考虑到安全应当使用 session\n6. 大小以及数量限制：每个域名所包含的 cookie 数：IE7/8,FireFox:50 个，Opera30 个； Cookie 总大小：Firefox 和 Safari 允许 cookie 多达 4097 个字节，Opera 允许 cookie 多达 4096 个字 节，InternetExplorer 允许 cookie 多达 4095 个字节；一般认为 Session 没有大小和数量限制。\n\n关系：\n1. Session 需要借助 Cookie 才能正常工作。如果客户端完全禁止 Cookie，Session 将失效！因为 Session 是由应用服务器维持的一个 服务器端的存储空间，用户在连接服务器时，会由服务器生成一个唯一的 SessionID, 用该 SessionID 为标识符来存取服务器端的 Session 存储空间。而 SessionID 这一数据则是保存到客户端，用 Cookie 保存的，用户提交页面时，会将这一 SessionID 提交到服务器端，来存取 Session 数据。这一过程，是不用开发人员干预的。所以一旦客户端禁用 Cookie，那么 Session 也会失效。\n\n#### 3、HTTP 状态中302、403、 500代码含义？\n一二三四五原则:（即一：消息系列；二：成功系列； 三：重定向系列；四：请求错误系列；五：服务器端错误系列。）\n302:临时转移成功，请求的内容已转移到新位置\n403:禁止访问\n500:服务器内部错误\n401：代表未授权。\n\n#### 4、请写出数据类型(int char varchar datetime text)的意思；请问 varchar 和 char有什么区别？\nInt 整数char 定长字符 Varchar 变长字符 Datetime 日期时间型Text 文本型 Varchar与char的区别 char是固定长度的字符类型，分配多少空间，就占用多长空间。Varchar是可变长度的字符类型，内容有多大就占用多大的空间，能有效节省空间。由于varchar类型是可变的，所以在数据长度改变的时，服务器要进行额外的操作，所以效率比char类型低。\n\n#### 5、MyISAM和 InnoDB 的基本区别？索引结构如何实现？\nA、MyISAM类型不支持事务，表锁，易产生碎片，要经常优化，读写速度较快，适合用于频繁查询的应用；\nB、InnoDB类型支持事务，行锁，有崩溃恢复能力，读写速度比MyISAM慢，适合于插入和更新操作比较多的应用，空间占用大，不支持全文索引等。\n创建索引：alert table tablename add index 索引名 (`字段名`)\n\n#### 6、isset() 和 empty() 区别\nisset判断变量是否存在，可以传入多个变量，若其中一个变量不存在则返回假；empty判断变量是否为空为假，只可传一个变量，如果为空为假则返回真。\n\n#### 7、请说明 PHP 中传值与传引用的区别。什么时候传值什么时候传引用？\n按值传递：函数范围内对值的任何改变在函数外部都会被忽略\n按引用传递：函数范围内对值的任何改变在函数外部也能反映出这些修改\n优缺点：按值传递时，php必须复制值。特别是对于大型的字符串和对象来说，这将会是一个代价很大的操作。按引用传递则不需要复制值，对于性能提高很有好处。\n\n#### 8、在PHP中error_reporting这个函数有什么作用？\n设置PHP的报错级别并返回当前级别。\n\n#### 9、说说你对缓存技术的了解？\n缓存技术是将动态内容缓存到文件中，在一定时间内访问动态页面直接调用缓存文件，而不必重新访问数据库。\n\n#### 10、现在编程中经常采取MVC三层结构，请问MVC分别指哪三层，有什么优点？\nMVC三层分别指：业务模型、视图、控制器，由控制器层调用模型处理数据，然后将数据映射到视图层进行显示，优点是：①可以实现代码的重用性，避免产生代码冗余；②M和V的实现代码分离，从而使同一个程序可以使用不同的表现形式\n\n#### 11、AJAX的优势是什么？\najax是异步传输技术，可以通过javascript实现，也可以通过JQuery框架实现，实现局部刷新，减轻了服务器的压力，也提高了用户体验。\n\n#### 12、在程序的开发中，如何提高程序的运行效率？\nA、优化SQL语句，查询语句中尽量不使用select *，用哪个字段查哪个字段；少用子查询可用表连接代替；少用模糊查询；\nB、数据表中创建索引；\nC、对程序中经常用到的数据生成缓存。\n\n#### 13、请用正则表达式（Regular Expression）写一个函数验证电子邮件的格式是否正确。\n```\nfunction checkemail($email){\n    echo preg_match(‘/^[0-9a-zA-Z-]+@[0-9a-zA-Z-]+\\.[0-9a-zA-Z]+$/’,$email)?’email格式正确‘:’email格式不正确‘;\n}\n```\n\n#### 14、接口和抽象类的区别\n当多个同类的类要设计一个上层，通常设计为抽象类，当多个异构的类要设计一个上层，通常设计为接口。\n\n#### 15、说说数据库的索引\n唯一索引、主键索引、联合索引\n\n#### 16、说说redis常用的数据结构\nstring、list、hash、set、zset等\n\n#### 17、Redis的内存淘汰策略有哪些\nRedis的内存淘汰策略是指在Redis的用于缓存的内存不足时，怎么处理需要新写入且需要申请额外空间的数据。\n- 全局的键空间选择性移除\n    1. noeviction：当内存不足以容纳新写入数据时，新写入操作会报错。\n    2. allkeys-lru：当内存不足以容纳新写入数据时，在键空间中，移除最近最少使用的key。（这个是最常用的）\n    3. allkeys-random：当内存不足以容纳新写入数据时，在键空间中，随机移除某个key。\n- 设置过期时间的键空间选择性移除\n    1. volatile-lru：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，移除最近最少使用的key。\n    2. volatile-random：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，随机移除某个key。\n    3. volatile-ttl：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，有更早过期时间的key优先移除。\n\n#### 18、Redis如何实现延时队列\n使用sortedset，使用时间戳做score, 消息内容作为key,调用zadd来生产消息，消费者使用zrangbyscore获取n秒之前的数据做轮询处理。\n\n","source":"_posts/PHP/其他/PHP常见面试题.md","raw":"---\ntitle: PHP常见面试题\ntags: [面试]\ncategories: [PHP]\nabbrlink: 'php-interview'\ndate: 2022-03-07 12:15:40\nupdated: 2022-03-07 12:15:40\n---\n\n#### 1、什么是面向对象？主要特征是什么？\n面向对象是程序的一种设计方式，它利于提高程序的重用性，使程序结构更加清晰。主要特征：封装、继承、多态。\n\n#### 2、session 与 cookie 的区别和联系，请从协议，产生的原因与作用说明?\nA、http无状态协议，不能区分用户是否是从同一个网站上来的，同一个用户请求不同的页面不能看做是同一个用户。\nB、SESSION存储在服务器端，COOKIE保存在客户端。Session比较安全，cookie用某些手段可以修改，不安全。Session依赖于cookie进行传递。\n禁用cookie后，session不能正常使用。Session的缺点：保存在服务器端，每次读取都从服务器进行读取，对服务器有资源消耗。Session保存在服务器端的文件或数据库中，默认保存在文件中，文件路径由php配置文件的session.save_path指定。Session文件是公有的。\n\n区别：\n1. 存放位置：Session 保存在服务器，Cookie 保存在客户端。\n2. 存放的形式：Session 是以对象的形式保存在服务器，Cookie 以字符串的形式保存在客户端。\n3. 用途：Cookies 适合做保存用户的个人设置，爱好等，Session 适合做客户的身份验证\n4. 路径：Session 不能区分路径，同一个用户在访问一个网站期间，所有的 Session 在任何一个地方都可以访问到。而 Cookie 中如果设置了路径参数，那么同一个网站中不同路径下的 Cookie 互相是访问不到的。\n5. 安全性：Cookie 不是很安全，别人可以分析存放在本地的 COOKIE 并进行 COOKIE 欺骗，考虑到安全应当使用 session\n6. 大小以及数量限制：每个域名所包含的 cookie 数：IE7/8,FireFox:50 个，Opera30 个； Cookie 总大小：Firefox 和 Safari 允许 cookie 多达 4097 个字节，Opera 允许 cookie 多达 4096 个字 节，InternetExplorer 允许 cookie 多达 4095 个字节；一般认为 Session 没有大小和数量限制。\n\n关系：\n1. Session 需要借助 Cookie 才能正常工作。如果客户端完全禁止 Cookie，Session 将失效！因为 Session 是由应用服务器维持的一个 服务器端的存储空间，用户在连接服务器时，会由服务器生成一个唯一的 SessionID, 用该 SessionID 为标识符来存取服务器端的 Session 存储空间。而 SessionID 这一数据则是保存到客户端，用 Cookie 保存的，用户提交页面时，会将这一 SessionID 提交到服务器端，来存取 Session 数据。这一过程，是不用开发人员干预的。所以一旦客户端禁用 Cookie，那么 Session 也会失效。\n\n#### 3、HTTP 状态中302、403、 500代码含义？\n一二三四五原则:（即一：消息系列；二：成功系列； 三：重定向系列；四：请求错误系列；五：服务器端错误系列。）\n302:临时转移成功，请求的内容已转移到新位置\n403:禁止访问\n500:服务器内部错误\n401：代表未授权。\n\n#### 4、请写出数据类型(int char varchar datetime text)的意思；请问 varchar 和 char有什么区别？\nInt 整数char 定长字符 Varchar 变长字符 Datetime 日期时间型Text 文本型 Varchar与char的区别 char是固定长度的字符类型，分配多少空间，就占用多长空间。Varchar是可变长度的字符类型，内容有多大就占用多大的空间，能有效节省空间。由于varchar类型是可变的，所以在数据长度改变的时，服务器要进行额外的操作，所以效率比char类型低。\n\n#### 5、MyISAM和 InnoDB 的基本区别？索引结构如何实现？\nA、MyISAM类型不支持事务，表锁，易产生碎片，要经常优化，读写速度较快，适合用于频繁查询的应用；\nB、InnoDB类型支持事务，行锁，有崩溃恢复能力，读写速度比MyISAM慢，适合于插入和更新操作比较多的应用，空间占用大，不支持全文索引等。\n创建索引：alert table tablename add index 索引名 (`字段名`)\n\n#### 6、isset() 和 empty() 区别\nisset判断变量是否存在，可以传入多个变量，若其中一个变量不存在则返回假；empty判断变量是否为空为假，只可传一个变量，如果为空为假则返回真。\n\n#### 7、请说明 PHP 中传值与传引用的区别。什么时候传值什么时候传引用？\n按值传递：函数范围内对值的任何改变在函数外部都会被忽略\n按引用传递：函数范围内对值的任何改变在函数外部也能反映出这些修改\n优缺点：按值传递时，php必须复制值。特别是对于大型的字符串和对象来说，这将会是一个代价很大的操作。按引用传递则不需要复制值，对于性能提高很有好处。\n\n#### 8、在PHP中error_reporting这个函数有什么作用？\n设置PHP的报错级别并返回当前级别。\n\n#### 9、说说你对缓存技术的了解？\n缓存技术是将动态内容缓存到文件中，在一定时间内访问动态页面直接调用缓存文件，而不必重新访问数据库。\n\n#### 10、现在编程中经常采取MVC三层结构，请问MVC分别指哪三层，有什么优点？\nMVC三层分别指：业务模型、视图、控制器，由控制器层调用模型处理数据，然后将数据映射到视图层进行显示，优点是：①可以实现代码的重用性，避免产生代码冗余；②M和V的实现代码分离，从而使同一个程序可以使用不同的表现形式\n\n#### 11、AJAX的优势是什么？\najax是异步传输技术，可以通过javascript实现，也可以通过JQuery框架实现，实现局部刷新，减轻了服务器的压力，也提高了用户体验。\n\n#### 12、在程序的开发中，如何提高程序的运行效率？\nA、优化SQL语句，查询语句中尽量不使用select *，用哪个字段查哪个字段；少用子查询可用表连接代替；少用模糊查询；\nB、数据表中创建索引；\nC、对程序中经常用到的数据生成缓存。\n\n#### 13、请用正则表达式（Regular Expression）写一个函数验证电子邮件的格式是否正确。\n```\nfunction checkemail($email){\n    echo preg_match(‘/^[0-9a-zA-Z-]+@[0-9a-zA-Z-]+\\.[0-9a-zA-Z]+$/’,$email)?’email格式正确‘:’email格式不正确‘;\n}\n```\n\n#### 14、接口和抽象类的区别\n当多个同类的类要设计一个上层，通常设计为抽象类，当多个异构的类要设计一个上层，通常设计为接口。\n\n#### 15、说说数据库的索引\n唯一索引、主键索引、联合索引\n\n#### 16、说说redis常用的数据结构\nstring、list、hash、set、zset等\n\n#### 17、Redis的内存淘汰策略有哪些\nRedis的内存淘汰策略是指在Redis的用于缓存的内存不足时，怎么处理需要新写入且需要申请额外空间的数据。\n- 全局的键空间选择性移除\n    1. noeviction：当内存不足以容纳新写入数据时，新写入操作会报错。\n    2. allkeys-lru：当内存不足以容纳新写入数据时，在键空间中，移除最近最少使用的key。（这个是最常用的）\n    3. allkeys-random：当内存不足以容纳新写入数据时，在键空间中，随机移除某个key。\n- 设置过期时间的键空间选择性移除\n    1. volatile-lru：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，移除最近最少使用的key。\n    2. volatile-random：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，随机移除某个key。\n    3. volatile-ttl：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，有更早过期时间的key优先移除。\n\n#### 18、Redis如何实现延时队列\n使用sortedset，使用时间戳做score, 消息内容作为key,调用zadd来生产消息，消费者使用zrangbyscore获取n秒之前的数据做轮询处理。\n\n","slug":"PHP/其他/PHP常见面试题","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2uz007joshg8qoqd21m","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h4 id=\"1、什么是面向对象？主要特征是什么？\"><a href=\"#1、什么是面向对象？主要特征是什么？\" class=\"headerlink\" title=\"1、什么是面向对象？主要特征是什么？\"></a>1、什么是面向对象？主要特征是什么？</h4><p>面向对象是程序的一种设计方式，它利于提高程序的重用性，使程序结构更加清晰。主要特征：封装、继承、多态。</p>\n<h4 id=\"2、session-与-cookie-的区别和联系，请从协议，产生的原因与作用说明\"><a href=\"#2、session-与-cookie-的区别和联系，请从协议，产生的原因与作用说明\" class=\"headerlink\" title=\"2、session 与 cookie 的区别和联系，请从协议，产生的原因与作用说明?\"></a>2、session 与 cookie 的区别和联系，请从协议，产生的原因与作用说明?</h4><p>A、http无状态协议，不能区分用户是否是从同一个网站上来的，同一个用户请求不同的页面不能看做是同一个用户。<br>B、SESSION存储在服务器端，COOKIE保存在客户端。Session比较安全，cookie用某些手段可以修改，不安全。Session依赖于cookie进行传递。<br>禁用cookie后，session不能正常使用。Session的缺点：保存在服务器端，每次读取都从服务器进行读取，对服务器有资源消耗。Session保存在服务器端的文件或数据库中，默认保存在文件中，文件路径由php配置文件的session.save_path指定。Session文件是公有的。</p>\n<p>区别：</p>\n<ol>\n<li>存放位置：Session 保存在服务器，Cookie 保存在客户端。</li>\n<li>存放的形式：Session 是以对象的形式保存在服务器，Cookie 以字符串的形式保存在客户端。</li>\n<li>用途：Cookies 适合做保存用户的个人设置，爱好等，Session 适合做客户的身份验证</li>\n<li>路径：Session 不能区分路径，同一个用户在访问一个网站期间，所有的 Session 在任何一个地方都可以访问到。而 Cookie 中如果设置了路径参数，那么同一个网站中不同路径下的 Cookie 互相是访问不到的。</li>\n<li>安全性：Cookie 不是很安全，别人可以分析存放在本地的 COOKIE 并进行 COOKIE 欺骗，考虑到安全应当使用 session</li>\n<li>大小以及数量限制：每个域名所包含的 cookie 数：IE7/8,FireFox:50 个，Opera30 个； Cookie 总大小：Firefox 和 Safari 允许 cookie 多达 4097 个字节，Opera 允许 cookie 多达 4096 个字 节，InternetExplorer 允许 cookie 多达 4095 个字节；一般认为 Session 没有大小和数量限制。</li>\n</ol>\n<p>关系：</p>\n<ol>\n<li>Session 需要借助 Cookie 才能正常工作。如果客户端完全禁止 Cookie，Session 将失效！因为 Session 是由应用服务器维持的一个 服务器端的存储空间，用户在连接服务器时，会由服务器生成一个唯一的 SessionID, 用该 SessionID 为标识符来存取服务器端的 Session 存储空间。而 SessionID 这一数据则是保存到客户端，用 Cookie 保存的，用户提交页面时，会将这一 SessionID 提交到服务器端，来存取 Session 数据。这一过程，是不用开发人员干预的。所以一旦客户端禁用 Cookie，那么 Session 也会失效。</li>\n</ol>\n<h4 id=\"3、HTTP-状态中302、403、-500代码含义？\"><a href=\"#3、HTTP-状态中302、403、-500代码含义？\" class=\"headerlink\" title=\"3、HTTP 状态中302、403、 500代码含义？\"></a>3、HTTP 状态中302、403、 500代码含义？</h4><p>一二三四五原则:（即一：消息系列；二：成功系列； 三：重定向系列；四：请求错误系列；五：服务器端错误系列。）<br>302:临时转移成功，请求的内容已转移到新位置<br>403:禁止访问<br>500:服务器内部错误<br>401：代表未授权。</p>\n<h4 id=\"4、请写出数据类型-int-char-varchar-datetime-text-的意思；请问-varchar-和-char有什么区别？\"><a href=\"#4、请写出数据类型-int-char-varchar-datetime-text-的意思；请问-varchar-和-char有什么区别？\" class=\"headerlink\" title=\"4、请写出数据类型(int char varchar datetime text)的意思；请问 varchar 和 char有什么区别？\"></a>4、请写出数据类型(int char varchar datetime text)的意思；请问 varchar 和 char有什么区别？</h4><p>Int 整数char 定长字符 Varchar 变长字符 Datetime 日期时间型Text 文本型 Varchar与char的区别 char是固定长度的字符类型，分配多少空间，就占用多长空间。Varchar是可变长度的字符类型，内容有多大就占用多大的空间，能有效节省空间。由于varchar类型是可变的，所以在数据长度改变的时，服务器要进行额外的操作，所以效率比char类型低。</p>\n<h4 id=\"5、MyISAM和-InnoDB-的基本区别？索引结构如何实现？\"><a href=\"#5、MyISAM和-InnoDB-的基本区别？索引结构如何实现？\" class=\"headerlink\" title=\"5、MyISAM和 InnoDB 的基本区别？索引结构如何实现？\"></a>5、MyISAM和 InnoDB 的基本区别？索引结构如何实现？</h4><p>A、MyISAM类型不支持事务，表锁，易产生碎片，要经常优化，读写速度较快，适合用于频繁查询的应用；<br>B、InnoDB类型支持事务，行锁，有崩溃恢复能力，读写速度比MyISAM慢，适合于插入和更新操作比较多的应用，空间占用大，不支持全文索引等。<br>创建索引：alert table tablename add index 索引名 (<code>字段名</code>)</p>\n<h4 id=\"6、isset-和-empty-区别\"><a href=\"#6、isset-和-empty-区别\" class=\"headerlink\" title=\"6、isset() 和 empty() 区别\"></a>6、isset() 和 empty() 区别</h4><p>isset判断变量是否存在，可以传入多个变量，若其中一个变量不存在则返回假；empty判断变量是否为空为假，只可传一个变量，如果为空为假则返回真。</p>\n<h4 id=\"7、请说明-PHP-中传值与传引用的区别。什么时候传值什么时候传引用？\"><a href=\"#7、请说明-PHP-中传值与传引用的区别。什么时候传值什么时候传引用？\" class=\"headerlink\" title=\"7、请说明 PHP 中传值与传引用的区别。什么时候传值什么时候传引用？\"></a>7、请说明 PHP 中传值与传引用的区别。什么时候传值什么时候传引用？</h4><p>按值传递：函数范围内对值的任何改变在函数外部都会被忽略<br>按引用传递：函数范围内对值的任何改变在函数外部也能反映出这些修改<br>优缺点：按值传递时，php必须复制值。特别是对于大型的字符串和对象来说，这将会是一个代价很大的操作。按引用传递则不需要复制值，对于性能提高很有好处。</p>\n<h4 id=\"8、在PHP中error-reporting这个函数有什么作用？\"><a href=\"#8、在PHP中error-reporting这个函数有什么作用？\" class=\"headerlink\" title=\"8、在PHP中error_reporting这个函数有什么作用？\"></a>8、在PHP中error_reporting这个函数有什么作用？</h4><p>设置PHP的报错级别并返回当前级别。</p>\n<h4 id=\"9、说说你对缓存技术的了解？\"><a href=\"#9、说说你对缓存技术的了解？\" class=\"headerlink\" title=\"9、说说你对缓存技术的了解？\"></a>9、说说你对缓存技术的了解？</h4><p>缓存技术是将动态内容缓存到文件中，在一定时间内访问动态页面直接调用缓存文件，而不必重新访问数据库。</p>\n<h4 id=\"10、现在编程中经常采取MVC三层结构，请问MVC分别指哪三层，有什么优点？\"><a href=\"#10、现在编程中经常采取MVC三层结构，请问MVC分别指哪三层，有什么优点？\" class=\"headerlink\" title=\"10、现在编程中经常采取MVC三层结构，请问MVC分别指哪三层，有什么优点？\"></a>10、现在编程中经常采取MVC三层结构，请问MVC分别指哪三层，有什么优点？</h4><p>MVC三层分别指：业务模型、视图、控制器，由控制器层调用模型处理数据，然后将数据映射到视图层进行显示，优点是：①可以实现代码的重用性，避免产生代码冗余；②M和V的实现代码分离，从而使同一个程序可以使用不同的表现形式</p>\n<h4 id=\"11、AJAX的优势是什么？\"><a href=\"#11、AJAX的优势是什么？\" class=\"headerlink\" title=\"11、AJAX的优势是什么？\"></a>11、AJAX的优势是什么？</h4><p>ajax是异步传输技术，可以通过javascript实现，也可以通过JQuery框架实现，实现局部刷新，减轻了服务器的压力，也提高了用户体验。</p>\n<h4 id=\"12、在程序的开发中，如何提高程序的运行效率？\"><a href=\"#12、在程序的开发中，如何提高程序的运行效率？\" class=\"headerlink\" title=\"12、在程序的开发中，如何提高程序的运行效率？\"></a>12、在程序的开发中，如何提高程序的运行效率？</h4><p>A、优化SQL语句，查询语句中尽量不使用select *，用哪个字段查哪个字段；少用子查询可用表连接代替；少用模糊查询；<br>B、数据表中创建索引；<br>C、对程序中经常用到的数据生成缓存。</p>\n<h4 id=\"13、请用正则表达式（Regular-Expression）写一个函数验证电子邮件的格式是否正确。\"><a href=\"#13、请用正则表达式（Regular-Expression）写一个函数验证电子邮件的格式是否正确。\" class=\"headerlink\" title=\"13、请用正则表达式（Regular Expression）写一个函数验证电子邮件的格式是否正确。\"></a>13、请用正则表达式（Regular Expression）写一个函数验证电子邮件的格式是否正确。</h4><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkemail</span>(<span class=\"params\"><span class=\"variable\">$email</span></span>)</span>{</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">preg_match</span>(‘/^[<span class=\"number\">0</span>-<span class=\"number\">9</span>a-zA-Z-]+@[<span class=\"number\">0</span>-<span class=\"number\">9</span>a-zA-Z-]+\\.[<span class=\"number\">0</span>-<span class=\"number\">9</span>a-zA-Z]+$/’,<span class=\"variable\">$email</span>)?’email格式正确‘:’email格式不正确‘;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h4 id=\"14、接口和抽象类的区别\"><a href=\"#14、接口和抽象类的区别\" class=\"headerlink\" title=\"14、接口和抽象类的区别\"></a>14、接口和抽象类的区别</h4><p>当多个同类的类要设计一个上层，通常设计为抽象类，当多个异构的类要设计一个上层，通常设计为接口。</p>\n<h4 id=\"15、说说数据库的索引\"><a href=\"#15、说说数据库的索引\" class=\"headerlink\" title=\"15、说说数据库的索引\"></a>15、说说数据库的索引</h4><p>唯一索引、主键索引、联合索引</p>\n<h4 id=\"16、说说redis常用的数据结构\"><a href=\"#16、说说redis常用的数据结构\" class=\"headerlink\" title=\"16、说说redis常用的数据结构\"></a>16、说说redis常用的数据结构</h4><p>string、list、hash、set、zset等</p>\n<h4 id=\"17、Redis的内存淘汰策略有哪些\"><a href=\"#17、Redis的内存淘汰策略有哪些\" class=\"headerlink\" title=\"17、Redis的内存淘汰策略有哪些\"></a>17、Redis的内存淘汰策略有哪些</h4><p>Redis的内存淘汰策略是指在Redis的用于缓存的内存不足时，怎么处理需要新写入且需要申请额外空间的数据。</p>\n<ul>\n<li>全局的键空间选择性移除<ol>\n<li>noeviction：当内存不足以容纳新写入数据时，新写入操作会报错。</li>\n<li>allkeys-lru：当内存不足以容纳新写入数据时，在键空间中，移除最近最少使用的key。（这个是最常用的）</li>\n<li>allkeys-random：当内存不足以容纳新写入数据时，在键空间中，随机移除某个key。</li>\n</ol>\n</li>\n<li>设置过期时间的键空间选择性移除<ol>\n<li>volatile-lru：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，移除最近最少使用的key。</li>\n<li>volatile-random：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，随机移除某个key。</li>\n<li>volatile-ttl：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，有更早过期时间的key优先移除。</li>\n</ol>\n</li>\n</ul>\n<h4 id=\"18、Redis如何实现延时队列\"><a href=\"#18、Redis如何实现延时队列\" class=\"headerlink\" title=\"18、Redis如何实现延时队列\"></a>18、Redis如何实现延时队列</h4><p>使用sortedset，使用时间戳做score, 消息内容作为key,调用zadd来生产消息，消费者使用zrangbyscore获取n秒之前的数据做轮询处理。</p>\n","excerpt":"","more":"<h4 id=\"1、什么是面向对象？主要特征是什么？\"><a href=\"#1、什么是面向对象？主要特征是什么？\" class=\"headerlink\" title=\"1、什么是面向对象？主要特征是什么？\"></a>1、什么是面向对象？主要特征是什么？</h4><p>面向对象是程序的一种设计方式，它利于提高程序的重用性，使程序结构更加清晰。主要特征：封装、继承、多态。</p>\n<h4 id=\"2、session-与-cookie-的区别和联系，请从协议，产生的原因与作用说明\"><a href=\"#2、session-与-cookie-的区别和联系，请从协议，产生的原因与作用说明\" class=\"headerlink\" title=\"2、session 与 cookie 的区别和联系，请从协议，产生的原因与作用说明?\"></a>2、session 与 cookie 的区别和联系，请从协议，产生的原因与作用说明?</h4><p>A、http无状态协议，不能区分用户是否是从同一个网站上来的，同一个用户请求不同的页面不能看做是同一个用户。<br>B、SESSION存储在服务器端，COOKIE保存在客户端。Session比较安全，cookie用某些手段可以修改，不安全。Session依赖于cookie进行传递。<br>禁用cookie后，session不能正常使用。Session的缺点：保存在服务器端，每次读取都从服务器进行读取，对服务器有资源消耗。Session保存在服务器端的文件或数据库中，默认保存在文件中，文件路径由php配置文件的session.save_path指定。Session文件是公有的。</p>\n<p>区别：</p>\n<ol>\n<li>存放位置：Session 保存在服务器，Cookie 保存在客户端。</li>\n<li>存放的形式：Session 是以对象的形式保存在服务器，Cookie 以字符串的形式保存在客户端。</li>\n<li>用途：Cookies 适合做保存用户的个人设置，爱好等，Session 适合做客户的身份验证</li>\n<li>路径：Session 不能区分路径，同一个用户在访问一个网站期间，所有的 Session 在任何一个地方都可以访问到。而 Cookie 中如果设置了路径参数，那么同一个网站中不同路径下的 Cookie 互相是访问不到的。</li>\n<li>安全性：Cookie 不是很安全，别人可以分析存放在本地的 COOKIE 并进行 COOKIE 欺骗，考虑到安全应当使用 session</li>\n<li>大小以及数量限制：每个域名所包含的 cookie 数：IE7/8,FireFox:50 个，Opera30 个； Cookie 总大小：Firefox 和 Safari 允许 cookie 多达 4097 个字节，Opera 允许 cookie 多达 4096 个字 节，InternetExplorer 允许 cookie 多达 4095 个字节；一般认为 Session 没有大小和数量限制。</li>\n</ol>\n<p>关系：</p>\n<ol>\n<li>Session 需要借助 Cookie 才能正常工作。如果客户端完全禁止 Cookie，Session 将失效！因为 Session 是由应用服务器维持的一个 服务器端的存储空间，用户在连接服务器时，会由服务器生成一个唯一的 SessionID, 用该 SessionID 为标识符来存取服务器端的 Session 存储空间。而 SessionID 这一数据则是保存到客户端，用 Cookie 保存的，用户提交页面时，会将这一 SessionID 提交到服务器端，来存取 Session 数据。这一过程，是不用开发人员干预的。所以一旦客户端禁用 Cookie，那么 Session 也会失效。</li>\n</ol>\n<h4 id=\"3、HTTP-状态中302、403、-500代码含义？\"><a href=\"#3、HTTP-状态中302、403、-500代码含义？\" class=\"headerlink\" title=\"3、HTTP 状态中302、403、 500代码含义？\"></a>3、HTTP 状态中302、403、 500代码含义？</h4><p>一二三四五原则:（即一：消息系列；二：成功系列； 三：重定向系列；四：请求错误系列；五：服务器端错误系列。）<br>302:临时转移成功，请求的内容已转移到新位置<br>403:禁止访问<br>500:服务器内部错误<br>401：代表未授权。</p>\n<h4 id=\"4、请写出数据类型-int-char-varchar-datetime-text-的意思；请问-varchar-和-char有什么区别？\"><a href=\"#4、请写出数据类型-int-char-varchar-datetime-text-的意思；请问-varchar-和-char有什么区别？\" class=\"headerlink\" title=\"4、请写出数据类型(int char varchar datetime text)的意思；请问 varchar 和 char有什么区别？\"></a>4、请写出数据类型(int char varchar datetime text)的意思；请问 varchar 和 char有什么区别？</h4><p>Int 整数char 定长字符 Varchar 变长字符 Datetime 日期时间型Text 文本型 Varchar与char的区别 char是固定长度的字符类型，分配多少空间，就占用多长空间。Varchar是可变长度的字符类型，内容有多大就占用多大的空间，能有效节省空间。由于varchar类型是可变的，所以在数据长度改变的时，服务器要进行额外的操作，所以效率比char类型低。</p>\n<h4 id=\"5、MyISAM和-InnoDB-的基本区别？索引结构如何实现？\"><a href=\"#5、MyISAM和-InnoDB-的基本区别？索引结构如何实现？\" class=\"headerlink\" title=\"5、MyISAM和 InnoDB 的基本区别？索引结构如何实现？\"></a>5、MyISAM和 InnoDB 的基本区别？索引结构如何实现？</h4><p>A、MyISAM类型不支持事务，表锁，易产生碎片，要经常优化，读写速度较快，适合用于频繁查询的应用；<br>B、InnoDB类型支持事务，行锁，有崩溃恢复能力，读写速度比MyISAM慢，适合于插入和更新操作比较多的应用，空间占用大，不支持全文索引等。<br>创建索引：alert table tablename add index 索引名 (<code>字段名</code>)</p>\n<h4 id=\"6、isset-和-empty-区别\"><a href=\"#6、isset-和-empty-区别\" class=\"headerlink\" title=\"6、isset() 和 empty() 区别\"></a>6、isset() 和 empty() 区别</h4><p>isset判断变量是否存在，可以传入多个变量，若其中一个变量不存在则返回假；empty判断变量是否为空为假，只可传一个变量，如果为空为假则返回真。</p>\n<h4 id=\"7、请说明-PHP-中传值与传引用的区别。什么时候传值什么时候传引用？\"><a href=\"#7、请说明-PHP-中传值与传引用的区别。什么时候传值什么时候传引用？\" class=\"headerlink\" title=\"7、请说明 PHP 中传值与传引用的区别。什么时候传值什么时候传引用？\"></a>7、请说明 PHP 中传值与传引用的区别。什么时候传值什么时候传引用？</h4><p>按值传递：函数范围内对值的任何改变在函数外部都会被忽略<br>按引用传递：函数范围内对值的任何改变在函数外部也能反映出这些修改<br>优缺点：按值传递时，php必须复制值。特别是对于大型的字符串和对象来说，这将会是一个代价很大的操作。按引用传递则不需要复制值，对于性能提高很有好处。</p>\n<h4 id=\"8、在PHP中error-reporting这个函数有什么作用？\"><a href=\"#8、在PHP中error-reporting这个函数有什么作用？\" class=\"headerlink\" title=\"8、在PHP中error_reporting这个函数有什么作用？\"></a>8、在PHP中error_reporting这个函数有什么作用？</h4><p>设置PHP的报错级别并返回当前级别。</p>\n<h4 id=\"9、说说你对缓存技术的了解？\"><a href=\"#9、说说你对缓存技术的了解？\" class=\"headerlink\" title=\"9、说说你对缓存技术的了解？\"></a>9、说说你对缓存技术的了解？</h4><p>缓存技术是将动态内容缓存到文件中，在一定时间内访问动态页面直接调用缓存文件，而不必重新访问数据库。</p>\n<h4 id=\"10、现在编程中经常采取MVC三层结构，请问MVC分别指哪三层，有什么优点？\"><a href=\"#10、现在编程中经常采取MVC三层结构，请问MVC分别指哪三层，有什么优点？\" class=\"headerlink\" title=\"10、现在编程中经常采取MVC三层结构，请问MVC分别指哪三层，有什么优点？\"></a>10、现在编程中经常采取MVC三层结构，请问MVC分别指哪三层，有什么优点？</h4><p>MVC三层分别指：业务模型、视图、控制器，由控制器层调用模型处理数据，然后将数据映射到视图层进行显示，优点是：①可以实现代码的重用性，避免产生代码冗余；②M和V的实现代码分离，从而使同一个程序可以使用不同的表现形式</p>\n<h4 id=\"11、AJAX的优势是什么？\"><a href=\"#11、AJAX的优势是什么？\" class=\"headerlink\" title=\"11、AJAX的优势是什么？\"></a>11、AJAX的优势是什么？</h4><p>ajax是异步传输技术，可以通过javascript实现，也可以通过JQuery框架实现，实现局部刷新，减轻了服务器的压力，也提高了用户体验。</p>\n<h4 id=\"12、在程序的开发中，如何提高程序的运行效率？\"><a href=\"#12、在程序的开发中，如何提高程序的运行效率？\" class=\"headerlink\" title=\"12、在程序的开发中，如何提高程序的运行效率？\"></a>12、在程序的开发中，如何提高程序的运行效率？</h4><p>A、优化SQL语句，查询语句中尽量不使用select *，用哪个字段查哪个字段；少用子查询可用表连接代替；少用模糊查询；<br>B、数据表中创建索引；<br>C、对程序中经常用到的数据生成缓存。</p>\n<h4 id=\"13、请用正则表达式（Regular-Expression）写一个函数验证电子邮件的格式是否正确。\"><a href=\"#13、请用正则表达式（Regular-Expression）写一个函数验证电子邮件的格式是否正确。\" class=\"headerlink\" title=\"13、请用正则表达式（Regular Expression）写一个函数验证电子邮件的格式是否正确。\"></a>13、请用正则表达式（Regular Expression）写一个函数验证电子邮件的格式是否正确。</h4><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">checkemail</span>(<span class=\"params\"><span class=\"variable\">$email</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"title function_ invoke__\">preg_match</span>(‘/^[<span class=\"number\">0</span>-<span class=\"number\">9</span>a-zA-Z-]+@[<span class=\"number\">0</span>-<span class=\"number\">9</span>a-zA-Z-]+\\.[<span class=\"number\">0</span>-<span class=\"number\">9</span>a-zA-Z]+$/’,<span class=\"variable\">$email</span>)?’email格式正确‘:’email格式不正确‘;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"14、接口和抽象类的区别\"><a href=\"#14、接口和抽象类的区别\" class=\"headerlink\" title=\"14、接口和抽象类的区别\"></a>14、接口和抽象类的区别</h4><p>当多个同类的类要设计一个上层，通常设计为抽象类，当多个异构的类要设计一个上层，通常设计为接口。</p>\n<h4 id=\"15、说说数据库的索引\"><a href=\"#15、说说数据库的索引\" class=\"headerlink\" title=\"15、说说数据库的索引\"></a>15、说说数据库的索引</h4><p>唯一索引、主键索引、联合索引</p>\n<h4 id=\"16、说说redis常用的数据结构\"><a href=\"#16、说说redis常用的数据结构\" class=\"headerlink\" title=\"16、说说redis常用的数据结构\"></a>16、说说redis常用的数据结构</h4><p>string、list、hash、set、zset等</p>\n<h4 id=\"17、Redis的内存淘汰策略有哪些\"><a href=\"#17、Redis的内存淘汰策略有哪些\" class=\"headerlink\" title=\"17、Redis的内存淘汰策略有哪些\"></a>17、Redis的内存淘汰策略有哪些</h4><p>Redis的内存淘汰策略是指在Redis的用于缓存的内存不足时，怎么处理需要新写入且需要申请额外空间的数据。</p>\n<ul>\n<li>全局的键空间选择性移除<ol>\n<li>noeviction：当内存不足以容纳新写入数据时，新写入操作会报错。</li>\n<li>allkeys-lru：当内存不足以容纳新写入数据时，在键空间中，移除最近最少使用的key。（这个是最常用的）</li>\n<li>allkeys-random：当内存不足以容纳新写入数据时，在键空间中，随机移除某个key。</li>\n</ol>\n</li>\n<li>设置过期时间的键空间选择性移除<ol>\n<li>volatile-lru：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，移除最近最少使用的key。</li>\n<li>volatile-random：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，随机移除某个key。</li>\n<li>volatile-ttl：当内存不足以容纳新写入数据时，在设置了过期时间的键空间中，有更早过期时间的key优先移除。</li>\n</ol>\n</li>\n</ul>\n<h4 id=\"18、Redis如何实现延时队列\"><a href=\"#18、Redis如何实现延时队列\" class=\"headerlink\" title=\"18、Redis如何实现延时队列\"></a>18、Redis如何实现延时队列</h4><p>使用sortedset，使用时间戳做score, 消息内容作为key,调用zadd来生产消息，消费者使用zrangbyscore获取n秒之前的数据做轮询处理。</p>\n"},{"title":"PHP生成数据字典","abbrlink":"make-dictionary-by-php","date":"2018-06-21T14:37:00.000Z","updated":"2018-06-21T14:37:00.000Z","_content":"通过php代码生成MySQL数据字典，代码如下：\n\n``` \n<?php\n/**\n * 生成mysql数据字典\n */\nheader(\"Content-type: text/html; charset=utf-8\");\n//配置数据库\n$dbserver   = \"127.0.0.1\";\n$dbusername = \"root\";\n$dbpassword = \"root\";\n$database   = \"demodb\";\n\n//其他配置\n$mysql_conn = @mysql_connect($dbserver, $dbusername, $dbpassword) or die(\"Mysql connect is error.\");\nmysql_select_db($database, $mysql_conn);\nmysql_query('SET NAMES utf8', $mysql_conn);\n$table_result = mysql_query('show tables', $mysql_conn);\n\n$no_show_table = array();    //不需要显示的表\n$no_show_field = array();   //不需要显示的字段\n\n//取得所有的表名\nwhile($row = mysql_fetch_array($table_result)){\n\tif(!in_array($row[0],$no_show_table)){\n\t\t$tables[]['TABLE_NAME'] = $row[0];\n\t}\n}\n//替换所以表的表前缀\nif(!empty($_GET['prefix'])){ \n\t$prefix = 'wxaj';\n\tforeach($tables as $key => $val){\n\t\t$tableName = $val['TABLE_NAME'];\n\t\t$string = explode('_',$tableName);\n\t\tif($string[0] != $prefix){  \n\t\t\t$string[0] = $prefix;  \n\t\t\t$newTableName = implode('_', $string);  \n\t\t\tmysql_query('rename table '.$tableName.' TO '.$newTableName);  \n\t\t}\n\t}\n\techo \"替换成功！\";exit();\n}\n\n//循环取得所有表的备注及表中列消息\nforeach ($tables as $k=>$v) {\n    $sql  = 'SELECT * FROM ';\n    $sql .= 'INFORMATION_SCHEMA.TABLES ';\n    $sql .= 'WHERE ';\n    $sql .= \"table_name = '{$v['TABLE_NAME']}'  AND table_schema = '{$database}'\";\n    $table_result = mysql_query($sql, $mysql_conn);\n    while ($t = mysql_fetch_array($table_result) ) {\n        $tables[$k]['TABLE_COMMENT'] = $t['TABLE_COMMENT'];\n    }\n\n    $sql  = 'SELECT column_name FROM ';\n    $sql .= 'INFORMATION_SCHEMA.`KEY_COLUMN_USAGE` ';\n    $sql .= 'WHERE ';\n    $sql .= \"table_name = '{$v['TABLE_NAME']}'  AND constraint_name = 'PRIMARY'\";\n    $pk_result = mysql_query($sql, $mysql_conn);\n    $pks = [];\n    while ($t = mysql_fetch_array($pk_result) ) {\n        $pks[] = $t['column_name'];\n    }\n    $tables[$k]['PRIMARY_KEY'] = $pks;\n\n    $sql  = 'SELECT * FROM ';\n    $sql .= 'INFORMATION_SCHEMA.COLUMNS ';\n    $sql .= 'WHERE ';\n    $sql .= \"table_name = '{$v['TABLE_NAME']}' AND table_schema = '{$database}'\";\n\n    $fields = [];\n    $field_result = mysql_query($sql, $mysql_conn);\n    while ($t = mysql_fetch_array($field_result) ) {\n        $fields[] = $t;\n    }\n    $tables[$k]['COLUMN'] = $fields;\n}\nmysql_close($mysql_conn);\n\n\n$html = '';\n//循环所有表\nforeach ($tables as $k=>$v) {\n    $html .= '\t<h3>' . ($k + 1) . '、' . $v['TABLE_COMMENT'] .'  （'. $v['TABLE_NAME']. '）</h3>'.\"\\n\";\n    $html .= '\t<table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" width=\"100%\">'.\"\\n\";\n    $html .= '\t\t<tbody>'.\"\\n\";\n\t$html .= '\t\t\t<tr>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>字段名</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>数据类型</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>默认值</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>允许非空</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>自动递增</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>是否主键</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>备注</th>'.\"\\n\";\n\t$html .= '\t\t\t</tr>'.\"\\n\";\n\n    foreach ($v['COLUMN'] as $f) {\n\t\tif(empty($no_show_field[$v['TABLE_NAME']]) || !is_array($no_show_field[$v['TABLE_NAME']])){ \n\t\t\t$no_show_field[$v['TABLE_NAME']] = array();\n\t\t}\n\t\tif(!in_array($f['COLUMN_NAME'],$no_show_field[$v['TABLE_NAME']])){\n\t\t\t$html .= '\t\t\t<tr>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c1\">' . $f['COLUMN_NAME'] . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c2\">' . $f['COLUMN_TYPE'] . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c3\">' . $f['COLUMN_DEFAULT'] . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c4\">' . $f['IS_NULLABLE'] . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c5\">' . ($f['EXTRA']=='auto_increment'?'是':'&nbsp;') . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c6\">' . (in_array($f['COLUMN_NAME'],$v['PRIMARY_KEY'])?'是':'&nbsp;') . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c7\">' . $f['COLUMN_COMMENT'] . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t</tr>'.\"\\n\";\n\t\t}\n    }\n    $html .= '\t\t</tbody>'.\"\\n\";\n\t$html .= '\t</table>'.\"\\n\";\n}\n?>\n\n\n<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>数据字典</title>\n<meta name=\"generator\" content=\"ThinkDb V1.0\" />\n<meta name=\"author\" content=\"Crazy_boy\" />\n<meta name=\"copyright\" content=\"2014-208 zotuo.com\" />\n<style>\nbody, td, th { font-family: \"微软雅黑\"; font-size: 14px; }\n.warp{margin:auto; width:900px;}\n.warp h3{margin:0px; padding:0px; line-height:30px; margin-top:10px;}\ntable { border-collapse: collapse; border: 1px solid #CCC; background: #efefef; }\ntable th { text-align: left; font-weight: bold; height: 26px; line-height: 26px; font-size: 14px; text-align:center; border: 1px solid #CCC; padding:5px;}\ntable td { height: 20px; font-size: 14px; border: 1px solid #CCC; background-color: #fff; padding:5px;}\n.c1 { width: 120px; }\n.c2 { width: 120px; }\n.c3 { width: 150px; }\n.c4 { width: 80px; text-align:center;}\n.c5 { width: 80px; text-align:center;}\n.c6 { width: 80px; text-align:center;}\n.c7 { width: 270px; }\n</style>\n</head>\n<body>\n<div class=\"warp\">\n\t<h1 style=\"text-align:center;\">数据字典</h1>\n<?php echo $html; ?>\n</div>\n</body>\n</html>\n\n```\n其中$dbserver、$dbusername、$dbpassword、$database需配置为相应的数据库IP地址、用户名、密码、数据库名。\n代码下载：[dictionary.php](/codes/dictionary.php)\n","source":"_posts/PHP/其他/PHP生成数据字典.md","raw":"---\ntitle: PHP生成数据字典\ntags: [数据字典]\ncategories: [PHP]\nabbrlink: 'make-dictionary-by-php'\ndate: 2018-06-21 22:37:00\nupdated: 2018-06-21 22:37:00\n---\n通过php代码生成MySQL数据字典，代码如下：\n\n``` \n<?php\n/**\n * 生成mysql数据字典\n */\nheader(\"Content-type: text/html; charset=utf-8\");\n//配置数据库\n$dbserver   = \"127.0.0.1\";\n$dbusername = \"root\";\n$dbpassword = \"root\";\n$database   = \"demodb\";\n\n//其他配置\n$mysql_conn = @mysql_connect($dbserver, $dbusername, $dbpassword) or die(\"Mysql connect is error.\");\nmysql_select_db($database, $mysql_conn);\nmysql_query('SET NAMES utf8', $mysql_conn);\n$table_result = mysql_query('show tables', $mysql_conn);\n\n$no_show_table = array();    //不需要显示的表\n$no_show_field = array();   //不需要显示的字段\n\n//取得所有的表名\nwhile($row = mysql_fetch_array($table_result)){\n\tif(!in_array($row[0],$no_show_table)){\n\t\t$tables[]['TABLE_NAME'] = $row[0];\n\t}\n}\n//替换所以表的表前缀\nif(!empty($_GET['prefix'])){ \n\t$prefix = 'wxaj';\n\tforeach($tables as $key => $val){\n\t\t$tableName = $val['TABLE_NAME'];\n\t\t$string = explode('_',$tableName);\n\t\tif($string[0] != $prefix){  \n\t\t\t$string[0] = $prefix;  \n\t\t\t$newTableName = implode('_', $string);  \n\t\t\tmysql_query('rename table '.$tableName.' TO '.$newTableName);  \n\t\t}\n\t}\n\techo \"替换成功！\";exit();\n}\n\n//循环取得所有表的备注及表中列消息\nforeach ($tables as $k=>$v) {\n    $sql  = 'SELECT * FROM ';\n    $sql .= 'INFORMATION_SCHEMA.TABLES ';\n    $sql .= 'WHERE ';\n    $sql .= \"table_name = '{$v['TABLE_NAME']}'  AND table_schema = '{$database}'\";\n    $table_result = mysql_query($sql, $mysql_conn);\n    while ($t = mysql_fetch_array($table_result) ) {\n        $tables[$k]['TABLE_COMMENT'] = $t['TABLE_COMMENT'];\n    }\n\n    $sql  = 'SELECT column_name FROM ';\n    $sql .= 'INFORMATION_SCHEMA.`KEY_COLUMN_USAGE` ';\n    $sql .= 'WHERE ';\n    $sql .= \"table_name = '{$v['TABLE_NAME']}'  AND constraint_name = 'PRIMARY'\";\n    $pk_result = mysql_query($sql, $mysql_conn);\n    $pks = [];\n    while ($t = mysql_fetch_array($pk_result) ) {\n        $pks[] = $t['column_name'];\n    }\n    $tables[$k]['PRIMARY_KEY'] = $pks;\n\n    $sql  = 'SELECT * FROM ';\n    $sql .= 'INFORMATION_SCHEMA.COLUMNS ';\n    $sql .= 'WHERE ';\n    $sql .= \"table_name = '{$v['TABLE_NAME']}' AND table_schema = '{$database}'\";\n\n    $fields = [];\n    $field_result = mysql_query($sql, $mysql_conn);\n    while ($t = mysql_fetch_array($field_result) ) {\n        $fields[] = $t;\n    }\n    $tables[$k]['COLUMN'] = $fields;\n}\nmysql_close($mysql_conn);\n\n\n$html = '';\n//循环所有表\nforeach ($tables as $k=>$v) {\n    $html .= '\t<h3>' . ($k + 1) . '、' . $v['TABLE_COMMENT'] .'  （'. $v['TABLE_NAME']. '）</h3>'.\"\\n\";\n    $html .= '\t<table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" width=\"100%\">'.\"\\n\";\n    $html .= '\t\t<tbody>'.\"\\n\";\n\t$html .= '\t\t\t<tr>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>字段名</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>数据类型</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>默认值</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>允许非空</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>自动递增</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>是否主键</th>'.\"\\n\";\n\t$html .= '\t\t\t\t<th>备注</th>'.\"\\n\";\n\t$html .= '\t\t\t</tr>'.\"\\n\";\n\n    foreach ($v['COLUMN'] as $f) {\n\t\tif(empty($no_show_field[$v['TABLE_NAME']]) || !is_array($no_show_field[$v['TABLE_NAME']])){ \n\t\t\t$no_show_field[$v['TABLE_NAME']] = array();\n\t\t}\n\t\tif(!in_array($f['COLUMN_NAME'],$no_show_field[$v['TABLE_NAME']])){\n\t\t\t$html .= '\t\t\t<tr>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c1\">' . $f['COLUMN_NAME'] . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c2\">' . $f['COLUMN_TYPE'] . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c3\">' . $f['COLUMN_DEFAULT'] . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c4\">' . $f['IS_NULLABLE'] . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c5\">' . ($f['EXTRA']=='auto_increment'?'是':'&nbsp;') . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c6\">' . (in_array($f['COLUMN_NAME'],$v['PRIMARY_KEY'])?'是':'&nbsp;') . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t\t<td class=\"c7\">' . $f['COLUMN_COMMENT'] . '</td>'.\"\\n\";\n\t\t\t$html .= '\t\t\t</tr>'.\"\\n\";\n\t\t}\n    }\n    $html .= '\t\t</tbody>'.\"\\n\";\n\t$html .= '\t</table>'.\"\\n\";\n}\n?>\n\n\n<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>数据字典</title>\n<meta name=\"generator\" content=\"ThinkDb V1.0\" />\n<meta name=\"author\" content=\"Crazy_boy\" />\n<meta name=\"copyright\" content=\"2014-208 zotuo.com\" />\n<style>\nbody, td, th { font-family: \"微软雅黑\"; font-size: 14px; }\n.warp{margin:auto; width:900px;}\n.warp h3{margin:0px; padding:0px; line-height:30px; margin-top:10px;}\ntable { border-collapse: collapse; border: 1px solid #CCC; background: #efefef; }\ntable th { text-align: left; font-weight: bold; height: 26px; line-height: 26px; font-size: 14px; text-align:center; border: 1px solid #CCC; padding:5px;}\ntable td { height: 20px; font-size: 14px; border: 1px solid #CCC; background-color: #fff; padding:5px;}\n.c1 { width: 120px; }\n.c2 { width: 120px; }\n.c3 { width: 150px; }\n.c4 { width: 80px; text-align:center;}\n.c5 { width: 80px; text-align:center;}\n.c6 { width: 80px; text-align:center;}\n.c7 { width: 270px; }\n</style>\n</head>\n<body>\n<div class=\"warp\">\n\t<h1 style=\"text-align:center;\">数据字典</h1>\n<?php echo $html; ?>\n</div>\n</body>\n</html>\n\n```\n其中$dbserver、$dbusername、$dbpassword、$database需配置为相应的数据库IP地址、用户名、密码、数据库名。\n代码下载：[dictionary.php](/codes/dictionary.php)\n","slug":"PHP/其他/PHP生成数据字典","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v0007noshgcljufdwx","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>通过php代码生成MySQL数据字典，代码如下：</p>\n<figure class=\"highlight php-template\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-php\"><span class=\"meta\">&lt;?php</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-php\"> * 生成mysql数据字典</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-php\"> */</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"title function_ invoke__\">header</span>(<span class=\"string\">\"Content-type: text/html; charset=utf-8\"</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//配置数据库</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$dbserver</span>   = <span class=\"string\">\"127.0.0.1\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$dbusername</span> = <span class=\"string\">\"root\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$dbpassword</span> = <span class=\"string\">\"root\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$database</span>   = <span class=\"string\">\"demodb\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//其他配置</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$mysql_conn</span> = @<span class=\"title function_ invoke__\">mysql_connect</span>(<span class=\"variable\">$dbserver</span>, <span class=\"variable\">$dbusername</span>, <span class=\"variable\">$dbpassword</span>) <span class=\"keyword\">or</span> <span class=\"keyword\">die</span>(<span class=\"string\">\"Mysql connect is error.\"</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"title function_ invoke__\">mysql_select_db</span>(<span class=\"variable\">$database</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"string\">'SET NAMES utf8'</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$table_result</span> = <span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"string\">'show tables'</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$no_show_table</span> = <span class=\"keyword\">array</span>();    <span class=\"comment\">//不需要显示的表</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$no_show_field</span> = <span class=\"keyword\">array</span>();   <span class=\"comment\">//不需要显示的字段</span></span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//取得所有的表名</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"keyword\">while</span>(<span class=\"variable\">$row</span> = <span class=\"title function_ invoke__\">mysql_fetch_array</span>(<span class=\"variable\">$table_result</span>)){</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"keyword\">if</span>(!<span class=\"title function_ invoke__\">in_array</span>(<span class=\"variable\">$row</span>[<span class=\"number\">0</span>],<span class=\"variable\">$no_show_table</span>)){</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"variable\">$tables</span>[][<span class=\"string\">'TABLE_NAME'</span>] = <span class=\"variable\">$row</span>[<span class=\"number\">0</span>];</span></span><br><span class=\"line\"><span class=\"language-php\">\t}</span></span><br><span class=\"line\"><span class=\"language-php\">}</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//替换所以表的表前缀</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"keyword\">if</span>(!<span class=\"keyword\">empty</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">'prefix'</span>])){ </span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$prefix</span> = <span class=\"string\">'wxaj'</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"keyword\">foreach</span>(<span class=\"variable\">$tables</span> <span class=\"keyword\">as</span> <span class=\"variable\">$key</span> =&gt; <span class=\"variable\">$val</span>){</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"variable\">$tableName</span> = <span class=\"variable\">$val</span>[<span class=\"string\">'TABLE_NAME'</span>];</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"variable\">$string</span> = <span class=\"title function_ invoke__\">explode</span>(<span class=\"string\">'_'</span>,<span class=\"variable\">$tableName</span>);</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"keyword\">if</span>(<span class=\"variable\">$string</span>[<span class=\"number\">0</span>] != <span class=\"variable\">$prefix</span>){  </span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$string</span>[<span class=\"number\">0</span>] = <span class=\"variable\">$prefix</span>;  </span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$newTableName</span> = <span class=\"title function_ invoke__\">implode</span>(<span class=\"string\">'_'</span>, <span class=\"variable\">$string</span>);  </span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"string\">'rename table '</span>.<span class=\"variable\">$tableName</span>.<span class=\"string\">' TO '</span>.<span class=\"variable\">$newTableName</span>);  </span></span><br><span class=\"line\"><span class=\"language-php\">\t\t}</span></span><br><span class=\"line\"><span class=\"language-php\">\t}</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"keyword\">echo</span> <span class=\"string\">\"替换成功！\"</span>;<span class=\"keyword\">exit</span>();</span></span><br><span class=\"line\"><span class=\"language-php\">}</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//循环取得所有表的备注及表中列消息</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"keyword\">foreach</span> (<span class=\"variable\">$tables</span> <span class=\"keyword\">as</span> <span class=\"variable\">$k</span>=&gt;<span class=\"variable\">$v</span>) {</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span>  = <span class=\"string\">'SELECT * FROM '</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">'INFORMATION_SCHEMA.TABLES '</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">'WHERE '</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">\"table_name = '<span class=\"subst\">{$v['TABLE_NAME']}</span>'  AND table_schema = '<span class=\"subst\">{$database}</span>'\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$table_result</span> = <span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"variable\">$sql</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"keyword\">while</span> (<span class=\"variable\">$t</span> = <span class=\"title function_ invoke__\">mysql_fetch_array</span>(<span class=\"variable\">$table_result</span>) ) {</span></span><br><span class=\"line\"><span class=\"language-php\">        <span class=\"variable\">$tables</span>[<span class=\"variable\">$k</span>][<span class=\"string\">'TABLE_COMMENT'</span>] = <span class=\"variable\">$t</span>[<span class=\"string\">'TABLE_COMMENT'</span>];</span></span><br><span class=\"line\"><span class=\"language-php\">    }</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span>  = <span class=\"string\">'SELECT column_name FROM '</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">'INFORMATION_SCHEMA.`KEY_COLUMN_USAGE` '</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">'WHERE '</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">\"table_name = '<span class=\"subst\">{$v['TABLE_NAME']}</span>'  AND constraint_name = 'PRIMARY'\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$pk_result</span> = <span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"variable\">$sql</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$pks</span> = [];</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"keyword\">while</span> (<span class=\"variable\">$t</span> = <span class=\"title function_ invoke__\">mysql_fetch_array</span>(<span class=\"variable\">$pk_result</span>) ) {</span></span><br><span class=\"line\"><span class=\"language-php\">        <span class=\"variable\">$pks</span>[] = <span class=\"variable\">$t</span>[<span class=\"string\">'column_name'</span>];</span></span><br><span class=\"line\"><span class=\"language-php\">    }</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$tables</span>[<span class=\"variable\">$k</span>][<span class=\"string\">'PRIMARY_KEY'</span>] = <span class=\"variable\">$pks</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span>  = <span class=\"string\">'SELECT * FROM '</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">'INFORMATION_SCHEMA.COLUMNS '</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">'WHERE '</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">\"table_name = '<span class=\"subst\">{$v['TABLE_NAME']}</span>' AND table_schema = '<span class=\"subst\">{$database}</span>'\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$fields</span> = [];</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$field_result</span> = <span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"variable\">$sql</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"keyword\">while</span> (<span class=\"variable\">$t</span> = <span class=\"title function_ invoke__\">mysql_fetch_array</span>(<span class=\"variable\">$field_result</span>) ) {</span></span><br><span class=\"line\"><span class=\"language-php\">        <span class=\"variable\">$fields</span>[] = <span class=\"variable\">$t</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    }</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$tables</span>[<span class=\"variable\">$k</span>][<span class=\"string\">'COLUMN'</span>] = <span class=\"variable\">$fields</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">}</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"title function_ invoke__\">mysql_close</span>(<span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$html</span> = <span class=\"string\">''</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//循环所有表</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"keyword\">foreach</span> (<span class=\"variable\">$tables</span> <span class=\"keyword\">as</span> <span class=\"variable\">$k</span>=&gt;<span class=\"variable\">$v</span>) {</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$html</span> .= <span class=\"string\">'\t&lt;h3&gt;'</span> . (<span class=\"variable\">$k</span> + <span class=\"number\">1</span>) . <span class=\"string\">'、'</span> . <span class=\"variable\">$v</span>[<span class=\"string\">'TABLE_COMMENT'</span>] .<span class=\"string\">'  （'</span>. <span class=\"variable\">$v</span>[<span class=\"string\">'TABLE_NAME'</span>]. <span class=\"string\">'）&lt;/h3&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$html</span> .= <span class=\"string\">'\t&lt;table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" width=\"100%\"&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t&lt;tbody&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t&lt;tr&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;th&gt;字段名&lt;/th&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;th&gt;数据类型&lt;/th&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;th&gt;默认值&lt;/th&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;th&gt;允许非空&lt;/th&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;th&gt;自动递增&lt;/th&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;th&gt;是否主键&lt;/th&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;th&gt;备注&lt;/th&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t&lt;/tr&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"keyword\">foreach</span> (<span class=\"variable\">$v</span>[<span class=\"string\">'COLUMN'</span>] <span class=\"keyword\">as</span> <span class=\"variable\">$f</span>) {</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"keyword\">if</span>(<span class=\"keyword\">empty</span>(<span class=\"variable\">$no_show_field</span>[<span class=\"variable\">$v</span>[<span class=\"string\">'TABLE_NAME'</span>]]) || !<span class=\"title function_ invoke__\">is_array</span>(<span class=\"variable\">$no_show_field</span>[<span class=\"variable\">$v</span>[<span class=\"string\">'TABLE_NAME'</span>]])){ </span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$no_show_field</span>[<span class=\"variable\">$v</span>[<span class=\"string\">'TABLE_NAME'</span>]] = <span class=\"keyword\">array</span>();</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t}</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"keyword\">if</span>(!<span class=\"title function_ invoke__\">in_array</span>(<span class=\"variable\">$f</span>[<span class=\"string\">'COLUMN_NAME'</span>],<span class=\"variable\">$no_show_field</span>[<span class=\"variable\">$v</span>[<span class=\"string\">'TABLE_NAME'</span>]])){</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t&lt;tr&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;td class=\"c1\"&gt;'</span> . <span class=\"variable\">$f</span>[<span class=\"string\">'COLUMN_NAME'</span>] . <span class=\"string\">'&lt;/td&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;td class=\"c2\"&gt;'</span> . <span class=\"variable\">$f</span>[<span class=\"string\">'COLUMN_TYPE'</span>] . <span class=\"string\">'&lt;/td&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;td class=\"c3\"&gt;'</span> . <span class=\"variable\">$f</span>[<span class=\"string\">'COLUMN_DEFAULT'</span>] . <span class=\"string\">'&lt;/td&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;td class=\"c4\"&gt;'</span> . <span class=\"variable\">$f</span>[<span class=\"string\">'IS_NULLABLE'</span>] . <span class=\"string\">'&lt;/td&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;td class=\"c5\"&gt;'</span> . (<span class=\"variable\">$f</span>[<span class=\"string\">'EXTRA'</span>]==<span class=\"string\">'auto_increment'</span>?<span class=\"string\">'是'</span>:<span class=\"string\">'&amp;nbsp;'</span>) . <span class=\"string\">'&lt;/td&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;td class=\"c6\"&gt;'</span> . (<span class=\"title function_ invoke__\">in_array</span>(<span class=\"variable\">$f</span>[<span class=\"string\">'COLUMN_NAME'</span>],<span class=\"variable\">$v</span>[<span class=\"string\">'PRIMARY_KEY'</span>])?<span class=\"string\">'是'</span>:<span class=\"string\">'&amp;nbsp;'</span>) . <span class=\"string\">'&lt;/td&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t\t&lt;td class=\"c7\"&gt;'</span> . <span class=\"variable\">$f</span>[<span class=\"string\">'COLUMN_COMMENT'</span>] . <span class=\"string\">'&lt;/td&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t\t&lt;/tr&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t}</span></span><br><span class=\"line\"><span class=\"language-php\">    }</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$html</span> .= <span class=\"string\">'\t\t&lt;/tbody&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">'\t&lt;/table&gt;'</span>.<span class=\"string\">\"\\n\"</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">}</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"meta\">?&gt;</span></span><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"meta\">&lt;!doctype <span class=\"keyword\">html</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>数据字典<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"generator\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ThinkDb V1.0\"</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"author\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"Crazy_boy\"</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"copyright\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"2014-208 zotuo.com\"</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-tag\">body</span>, <span class=\"selector-tag\">td</span>, <span class=\"selector-tag\">th</span> { <span class=\"attribute\">font-family</span>: <span class=\"string\">\"微软雅黑\"</span>; <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>; }</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.warp</span>{<span class=\"attribute\">margin</span>:auto; <span class=\"attribute\">width</span>:<span class=\"number\">900px</span>;}</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.warp</span> <span class=\"selector-tag\">h3</span>{<span class=\"attribute\">margin</span>:<span class=\"number\">0px</span>; <span class=\"attribute\">padding</span>:<span class=\"number\">0px</span>; <span class=\"attribute\">line-height</span>:<span class=\"number\">30px</span>; <span class=\"attribute\">margin-top</span>:<span class=\"number\">10px</span>;}</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-tag\">table</span> { <span class=\"attribute\">border-collapse</span>: collapse; <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#CCC</span>; <span class=\"attribute\">background</span>: <span class=\"number\">#efefef</span>; }</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-tag\">table</span> <span class=\"selector-tag\">th</span> { <span class=\"attribute\">text-align</span>: left; <span class=\"attribute\">font-weight</span>: bold; <span class=\"attribute\">height</span>: <span class=\"number\">26px</span>; <span class=\"attribute\">line-height</span>: <span class=\"number\">26px</span>; <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>; <span class=\"attribute\">text-align</span>:center; <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#CCC</span>; <span class=\"attribute\">padding</span>:<span class=\"number\">5px</span>;}</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-tag\">table</span> <span class=\"selector-tag\">td</span> { <span class=\"attribute\">height</span>: <span class=\"number\">20px</span>; <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>; <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#CCC</span>; <span class=\"attribute\">background-color</span>: <span class=\"number\">#fff</span>; <span class=\"attribute\">padding</span>:<span class=\"number\">5px</span>;}</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c1</span> { <span class=\"attribute\">width</span>: <span class=\"number\">120px</span>; }</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c2</span> { <span class=\"attribute\">width</span>: <span class=\"number\">120px</span>; }</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c3</span> { <span class=\"attribute\">width</span>: <span class=\"number\">150px</span>; }</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c4</span> { <span class=\"attribute\">width</span>: <span class=\"number\">80px</span>; <span class=\"attribute\">text-align</span>:center;}</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c5</span> { <span class=\"attribute\">width</span>: <span class=\"number\">80px</span>; <span class=\"attribute\">text-align</span>:center;}</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c6</span> { <span class=\"attribute\">width</span>: <span class=\"number\">80px</span>; <span class=\"attribute\">text-align</span>:center;}</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c7</span> { <span class=\"attribute\">width</span>: <span class=\"number\">270px</span>; }</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"warp\"</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">\t<span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">style</span>=<span class=\"string\">\"text-align:center;\"</span>&gt;</span>数据字典<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"></span><span class=\"language-php\"><span class=\"meta\">&lt;?php</span> <span class=\"keyword\">echo</span> <span class=\"variable\">$html</span>; <span class=\"meta\">?&gt;</span></span><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"></span></span><br></pre></td></tr></tbody></table></figure>\n<p>其中$dbserver、$dbusername、$dbpassword、$database需配置为相应的数据库IP地址、用户名、密码、数据库名。<br>代码下载：<a href=\"/codes/dictionary.php\">dictionary.php</a></p>\n","excerpt":"","more":"<p>通过php代码生成MySQL数据字典，代码如下：</p>\n<figure class=\"highlight php-template\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"language-php\"><span class=\"meta\">&lt;?php</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">/**</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-php\"> * 生成mysql数据字典</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-php\"> */</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"title function_ invoke__\">header</span>(<span class=\"string\">&quot;Content-type: text/html; charset=utf-8&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//配置数据库</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$dbserver</span>   = <span class=\"string\">&quot;127.0.0.1&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$dbusername</span> = <span class=\"string\">&quot;root&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$dbpassword</span> = <span class=\"string\">&quot;root&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$database</span>   = <span class=\"string\">&quot;demodb&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//其他配置</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$mysql_conn</span> = @<span class=\"title function_ invoke__\">mysql_connect</span>(<span class=\"variable\">$dbserver</span>, <span class=\"variable\">$dbusername</span>, <span class=\"variable\">$dbpassword</span>) <span class=\"keyword\">or</span> <span class=\"keyword\">die</span>(<span class=\"string\">&quot;Mysql connect is error.&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"title function_ invoke__\">mysql_select_db</span>(<span class=\"variable\">$database</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"string\">&#x27;SET NAMES utf8&#x27;</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$table_result</span> = <span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"string\">&#x27;show tables&#x27;</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$no_show_table</span> = <span class=\"keyword\">array</span>();    <span class=\"comment\">//不需要显示的表</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$no_show_field</span> = <span class=\"keyword\">array</span>();   <span class=\"comment\">//不需要显示的字段</span></span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//取得所有的表名</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"keyword\">while</span>(<span class=\"variable\">$row</span> = <span class=\"title function_ invoke__\">mysql_fetch_array</span>(<span class=\"variable\">$table_result</span>))&#123;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"keyword\">if</span>(!<span class=\"title function_ invoke__\">in_array</span>(<span class=\"variable\">$row</span>[<span class=\"number\">0</span>],<span class=\"variable\">$no_show_table</span>))&#123;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"variable\">$tables</span>[][<span class=\"string\">&#x27;TABLE_NAME&#x27;</span>] = <span class=\"variable\">$row</span>[<span class=\"number\">0</span>];</span></span><br><span class=\"line\"><span class=\"language-php\">\t&#125;</span></span><br><span class=\"line\"><span class=\"language-php\">&#125;</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//替换所以表的表前缀</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"keyword\">if</span>(!<span class=\"keyword\">empty</span>(<span class=\"variable\">$_GET</span>[<span class=\"string\">&#x27;prefix&#x27;</span>]))&#123; </span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$prefix</span> = <span class=\"string\">&#x27;wxaj&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"keyword\">foreach</span>(<span class=\"variable\">$tables</span> <span class=\"keyword\">as</span> <span class=\"variable\">$key</span> =&gt; <span class=\"variable\">$val</span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"variable\">$tableName</span> = <span class=\"variable\">$val</span>[<span class=\"string\">&#x27;TABLE_NAME&#x27;</span>];</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"variable\">$string</span> = <span class=\"title function_ invoke__\">explode</span>(<span class=\"string\">&#x27;_&#x27;</span>,<span class=\"variable\">$tableName</span>);</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"keyword\">if</span>(<span class=\"variable\">$string</span>[<span class=\"number\">0</span>] != <span class=\"variable\">$prefix</span>)&#123;  </span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$string</span>[<span class=\"number\">0</span>] = <span class=\"variable\">$prefix</span>;  </span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$newTableName</span> = <span class=\"title function_ invoke__\">implode</span>(<span class=\"string\">&#x27;_&#x27;</span>, <span class=\"variable\">$string</span>);  </span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"string\">&#x27;rename table &#x27;</span>.<span class=\"variable\">$tableName</span>.<span class=\"string\">&#x27; TO &#x27;</span>.<span class=\"variable\">$newTableName</span>);  </span></span><br><span class=\"line\"><span class=\"language-php\">\t\t&#125;</span></span><br><span class=\"line\"><span class=\"language-php\">\t&#125;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"keyword\">echo</span> <span class=\"string\">&quot;替换成功！&quot;</span>;<span class=\"keyword\">exit</span>();</span></span><br><span class=\"line\"><span class=\"language-php\">&#125;</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//循环取得所有表的备注及表中列消息</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"keyword\">foreach</span> (<span class=\"variable\">$tables</span> <span class=\"keyword\">as</span> <span class=\"variable\">$k</span>=&gt;<span class=\"variable\">$v</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span>  = <span class=\"string\">&#x27;SELECT * FROM &#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">&#x27;INFORMATION_SCHEMA.TABLES &#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">&#x27;WHERE &#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">&quot;table_name = &#x27;<span class=\"subst\">&#123;$v[&#x27;TABLE_NAME&#x27;]&#125;</span>&#x27;  AND table_schema = &#x27;<span class=\"subst\">&#123;$database&#125;</span>&#x27;&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$table_result</span> = <span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"variable\">$sql</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"keyword\">while</span> (<span class=\"variable\">$t</span> = <span class=\"title function_ invoke__\">mysql_fetch_array</span>(<span class=\"variable\">$table_result</span>) ) &#123;</span></span><br><span class=\"line\"><span class=\"language-php\">        <span class=\"variable\">$tables</span>[<span class=\"variable\">$k</span>][<span class=\"string\">&#x27;TABLE_COMMENT&#x27;</span>] = <span class=\"variable\">$t</span>[<span class=\"string\">&#x27;TABLE_COMMENT&#x27;</span>];</span></span><br><span class=\"line\"><span class=\"language-php\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span>  = <span class=\"string\">&#x27;SELECT column_name FROM &#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">&#x27;INFORMATION_SCHEMA.`KEY_COLUMN_USAGE` &#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">&#x27;WHERE &#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">&quot;table_name = &#x27;<span class=\"subst\">&#123;$v[&#x27;TABLE_NAME&#x27;]&#125;</span>&#x27;  AND constraint_name = &#x27;PRIMARY&#x27;&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$pk_result</span> = <span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"variable\">$sql</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$pks</span> = [];</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"keyword\">while</span> (<span class=\"variable\">$t</span> = <span class=\"title function_ invoke__\">mysql_fetch_array</span>(<span class=\"variable\">$pk_result</span>) ) &#123;</span></span><br><span class=\"line\"><span class=\"language-php\">        <span class=\"variable\">$pks</span>[] = <span class=\"variable\">$t</span>[<span class=\"string\">&#x27;column_name&#x27;</span>];</span></span><br><span class=\"line\"><span class=\"language-php\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$tables</span>[<span class=\"variable\">$k</span>][<span class=\"string\">&#x27;PRIMARY_KEY&#x27;</span>] = <span class=\"variable\">$pks</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span>  = <span class=\"string\">&#x27;SELECT * FROM &#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">&#x27;INFORMATION_SCHEMA.COLUMNS &#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">&#x27;WHERE &#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$sql</span> .= <span class=\"string\">&quot;table_name = &#x27;<span class=\"subst\">&#123;$v[&#x27;TABLE_NAME&#x27;]&#125;</span>&#x27; AND table_schema = &#x27;<span class=\"subst\">&#123;$database&#125;</span>&#x27;&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$fields</span> = [];</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$field_result</span> = <span class=\"title function_ invoke__\">mysql_query</span>(<span class=\"variable\">$sql</span>, <span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"keyword\">while</span> (<span class=\"variable\">$t</span> = <span class=\"title function_ invoke__\">mysql_fetch_array</span>(<span class=\"variable\">$field_result</span>) ) &#123;</span></span><br><span class=\"line\"><span class=\"language-php\">        <span class=\"variable\">$fields</span>[] = <span class=\"variable\">$t</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$tables</span>[<span class=\"variable\">$k</span>][<span class=\"string\">&#x27;COLUMN&#x27;</span>] = <span class=\"variable\">$fields</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">&#125;</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"title function_ invoke__\">mysql_close</span>(<span class=\"variable\">$mysql_conn</span>);</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"variable\">$html</span> = <span class=\"string\">&#x27;&#x27;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"comment\">//循环所有表</span></span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"keyword\">foreach</span> (<span class=\"variable\">$tables</span> <span class=\"keyword\">as</span> <span class=\"variable\">$k</span>=&gt;<span class=\"variable\">$v</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t&lt;h3&gt;&#x27;</span> . (<span class=\"variable\">$k</span> + <span class=\"number\">1</span>) . <span class=\"string\">&#x27;、&#x27;</span> . <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;TABLE_COMMENT&#x27;</span>] .<span class=\"string\">&#x27;  （&#x27;</span>. <span class=\"variable\">$v</span>[<span class=\"string\">&#x27;TABLE_NAME&#x27;</span>]. <span class=\"string\">&#x27;）&lt;/h3&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t&lt;table border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; width=&quot;100%&quot;&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t&lt;tbody&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t&lt;tr&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;th&gt;字段名&lt;/th&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;th&gt;数据类型&lt;/th&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;th&gt;默认值&lt;/th&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;th&gt;允许非空&lt;/th&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;th&gt;自动递增&lt;/th&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;th&gt;是否主键&lt;/th&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;th&gt;备注&lt;/th&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t&lt;/tr&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\"></span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"keyword\">foreach</span> (<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;COLUMN&#x27;</span>] <span class=\"keyword\">as</span> <span class=\"variable\">$f</span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"keyword\">if</span>(<span class=\"keyword\">empty</span>(<span class=\"variable\">$no_show_field</span>[<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;TABLE_NAME&#x27;</span>]]) || !<span class=\"title function_ invoke__\">is_array</span>(<span class=\"variable\">$no_show_field</span>[<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;TABLE_NAME&#x27;</span>]]))&#123; </span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$no_show_field</span>[<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;TABLE_NAME&#x27;</span>]] = <span class=\"keyword\">array</span>();</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t&#125;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t<span class=\"keyword\">if</span>(!<span class=\"title function_ invoke__\">in_array</span>(<span class=\"variable\">$f</span>[<span class=\"string\">&#x27;COLUMN_NAME&#x27;</span>],<span class=\"variable\">$no_show_field</span>[<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;TABLE_NAME&#x27;</span>]]))&#123;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t&lt;tr&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;td class=&quot;c1&quot;&gt;&#x27;</span> . <span class=\"variable\">$f</span>[<span class=\"string\">&#x27;COLUMN_NAME&#x27;</span>] . <span class=\"string\">&#x27;&lt;/td&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;td class=&quot;c2&quot;&gt;&#x27;</span> . <span class=\"variable\">$f</span>[<span class=\"string\">&#x27;COLUMN_TYPE&#x27;</span>] . <span class=\"string\">&#x27;&lt;/td&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;td class=&quot;c3&quot;&gt;&#x27;</span> . <span class=\"variable\">$f</span>[<span class=\"string\">&#x27;COLUMN_DEFAULT&#x27;</span>] . <span class=\"string\">&#x27;&lt;/td&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;td class=&quot;c4&quot;&gt;&#x27;</span> . <span class=\"variable\">$f</span>[<span class=\"string\">&#x27;IS_NULLABLE&#x27;</span>] . <span class=\"string\">&#x27;&lt;/td&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;td class=&quot;c5&quot;&gt;&#x27;</span> . (<span class=\"variable\">$f</span>[<span class=\"string\">&#x27;EXTRA&#x27;</span>]==<span class=\"string\">&#x27;auto_increment&#x27;</span>?<span class=\"string\">&#x27;是&#x27;</span>:<span class=\"string\">&#x27;&amp;nbsp;&#x27;</span>) . <span class=\"string\">&#x27;&lt;/td&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;td class=&quot;c6&quot;&gt;&#x27;</span> . (<span class=\"title function_ invoke__\">in_array</span>(<span class=\"variable\">$f</span>[<span class=\"string\">&#x27;COLUMN_NAME&#x27;</span>],<span class=\"variable\">$v</span>[<span class=\"string\">&#x27;PRIMARY_KEY&#x27;</span>])?<span class=\"string\">&#x27;是&#x27;</span>:<span class=\"string\">&#x27;&amp;nbsp;&#x27;</span>) . <span class=\"string\">&#x27;&lt;/td&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t\t&lt;td class=&quot;c7&quot;&gt;&#x27;</span> . <span class=\"variable\">$f</span>[<span class=\"string\">&#x27;COLUMN_COMMENT&#x27;</span>] . <span class=\"string\">&#x27;&lt;/td&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t\t&lt;/tr&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t\t&#125;</span></span><br><span class=\"line\"><span class=\"language-php\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-php\">    <span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t\t&lt;/tbody&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">\t<span class=\"variable\">$html</span> .= <span class=\"string\">&#x27;\t&lt;/table&gt;&#x27;</span>.<span class=\"string\">&quot;\\n&quot;</span>;</span></span><br><span class=\"line\"><span class=\"language-php\">&#125;</span></span><br><span class=\"line\"><span class=\"language-php\"><span class=\"meta\">?&gt;</span></span><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"meta\">&lt;!doctype <span class=\"keyword\">html</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;utf-8&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>数据字典<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;generator&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;ThinkDb V1.0&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;author&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;Crazy_boy&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;copyright&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;2014-208 zotuo.com&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-tag\">body</span>, <span class=\"selector-tag\">td</span>, <span class=\"selector-tag\">th</span> &#123; <span class=\"attribute\">font-family</span>: <span class=\"string\">&quot;微软雅黑&quot;</span>; <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>; &#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.warp</span>&#123;<span class=\"attribute\">margin</span>:auto; <span class=\"attribute\">width</span>:<span class=\"number\">900px</span>;&#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.warp</span> <span class=\"selector-tag\">h3</span>&#123;<span class=\"attribute\">margin</span>:<span class=\"number\">0px</span>; <span class=\"attribute\">padding</span>:<span class=\"number\">0px</span>; <span class=\"attribute\">line-height</span>:<span class=\"number\">30px</span>; <span class=\"attribute\">margin-top</span>:<span class=\"number\">10px</span>;&#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-tag\">table</span> &#123; <span class=\"attribute\">border-collapse</span>: collapse; <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#CCC</span>; <span class=\"attribute\">background</span>: <span class=\"number\">#efefef</span>; &#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-tag\">table</span> <span class=\"selector-tag\">th</span> &#123; <span class=\"attribute\">text-align</span>: left; <span class=\"attribute\">font-weight</span>: bold; <span class=\"attribute\">height</span>: <span class=\"number\">26px</span>; <span class=\"attribute\">line-height</span>: <span class=\"number\">26px</span>; <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>; <span class=\"attribute\">text-align</span>:center; <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#CCC</span>; <span class=\"attribute\">padding</span>:<span class=\"number\">5px</span>;&#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-tag\">table</span> <span class=\"selector-tag\">td</span> &#123; <span class=\"attribute\">height</span>: <span class=\"number\">20px</span>; <span class=\"attribute\">font-size</span>: <span class=\"number\">14px</span>; <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#CCC</span>; <span class=\"attribute\">background-color</span>: <span class=\"number\">#fff</span>; <span class=\"attribute\">padding</span>:<span class=\"number\">5px</span>;&#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c1</span> &#123; <span class=\"attribute\">width</span>: <span class=\"number\">120px</span>; &#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c2</span> &#123; <span class=\"attribute\">width</span>: <span class=\"number\">120px</span>; &#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c3</span> &#123; <span class=\"attribute\">width</span>: <span class=\"number\">150px</span>; &#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c4</span> &#123; <span class=\"attribute\">width</span>: <span class=\"number\">80px</span>; <span class=\"attribute\">text-align</span>:center;&#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c5</span> &#123; <span class=\"attribute\">width</span>: <span class=\"number\">80px</span>; <span class=\"attribute\">text-align</span>:center;&#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c6</span> &#123; <span class=\"attribute\">width</span>: <span class=\"number\">80px</span>; <span class=\"attribute\">text-align</span>:center;&#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"><span class=\"selector-class\">.c7</span> &#123; <span class=\"attribute\">width</span>: <span class=\"number\">270px</span>; &#125;</span></span></span><br><span class=\"line\"><span class=\"language-css\"><span class=\"language-xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;warp&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">\t<span class=\"tag\">&lt;<span class=\"name\">h1</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;text-align:center;&quot;</span>&gt;</span>数据字典<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"></span><span class=\"language-php\"><span class=\"meta\">&lt;?php</span> <span class=\"keyword\">echo</span> <span class=\"variable\">$html</span>; <span class=\"meta\">?&gt;</span></span><span class=\"language-xml\"></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\"></span></span><br></pre></td></tr></table></figure>\n<p>其中$dbserver、$dbusername、$dbpassword、$database需配置为相应的数据库IP地址、用户名、密码、数据库名。<br>代码下载：<a href=\"/codes/dictionary.php\">dictionary.php</a></p>\n"},{"title":"Yii2使用笔记","abbrlink":"php-yii2-notes","date":"2021-05-27T07:52:24.000Z","updated":"2021-05-27T07:52:24.000Z","_content":"\n### 1. 安装Yii2第三方扩展\n\n- 方法一：composer安装\n```\nphp composer.phar require php-amqplib/php-amqplib\n或者\n在composer.json文件的require里添加\"php-amqplib/php-amqplib\": \"~2.7\"，然后执行composer update\n```\n- 方法二：手动添加\n1、拷贝php-amqplib扩展到vendor目录下，\n2、在vendor/yiisoft/extensions.php里添加如下配置项：\n   ```\n  'php-amqplib/php-amqplib' =>\n     array (\n        'name' => 'php-amqplib/php-amqplib',\n        'version' => '2.4.5.0',\n        'alias' =>\n           array (\n              '@PhpAmqpLib' => $vendorDir . '/php-amqplib/php-amqplib/PhpAmqpLib',\n           ),\n     ), \n  ```\n\n","source":"_posts/PHP/其他/Yii2使用笔记.md","raw":"---\ntitle: Yii2使用笔记\ntags: [Yii2]\ncategories: [PHP]\nabbrlink: 'php-yii2-notes'\ndate: 2021-05-27 15:52:24\nupdated: 2021-05-27 15:52:24\n---\n\n### 1. 安装Yii2第三方扩展\n\n- 方法一：composer安装\n```\nphp composer.phar require php-amqplib/php-amqplib\n或者\n在composer.json文件的require里添加\"php-amqplib/php-amqplib\": \"~2.7\"，然后执行composer update\n```\n- 方法二：手动添加\n1、拷贝php-amqplib扩展到vendor目录下，\n2、在vendor/yiisoft/extensions.php里添加如下配置项：\n   ```\n  'php-amqplib/php-amqplib' =>\n     array (\n        'name' => 'php-amqplib/php-amqplib',\n        'version' => '2.4.5.0',\n        'alias' =>\n           array (\n              '@PhpAmqpLib' => $vendorDir . '/php-amqplib/php-amqplib/PhpAmqpLib',\n           ),\n     ), \n  ```\n\n","slug":"PHP/其他/Yii2使用笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v1007ooshg0l34dcvn","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-安装Yii2第三方扩展\"><a href=\"#1-安装Yii2第三方扩展\" class=\"headerlink\" title=\"1. 安装Yii2第三方扩展\"></a>1. 安装Yii2第三方扩展</h3><ul>\n<li>方法一：composer安装<figure class=\"highlight armasm\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">php</span> composer.phar <span class=\"meta\">require</span> php-amqplib/php-amqplib</span><br><span class=\"line\">或者</span><br><span class=\"line\">在composer.json文件的<span class=\"meta\">require</span>里添加<span class=\"string\">\"php-amqplib/php-amqplib\"</span>: <span class=\"string\">\"~2.7\"</span>，然后执行composer update</span><br></pre></td></tr></tbody></table></figure></li>\n<li>方法二：手动添加<br>1、拷贝php-amqplib扩展到vendor目录下，<br>2、在vendor/yiisoft/extensions.php里添加如下配置项： <figure class=\"highlight smali\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">'php-amqplib/php-amqplib' =&gt;</span><br><span class=\"line\">  <span class=\"built_in\"> array </span>(</span><br><span class=\"line\">      'name' =&gt; 'php-amqplib/php-amqplib',</span><br><span class=\"line\">      'version' =&gt; '2.4.5.0',</span><br><span class=\"line\">      'alias' =&gt;</span><br><span class=\"line\">        <span class=\"built_in\"> array </span>(</span><br><span class=\"line\">            '@PhpAmqpLib' =&gt; $vendorDir . '/php-amqplib/php-amqplib/PhpAmqpLib',</span><br><span class=\"line\">         ),</span><br><span class=\"line\">   ), </span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n","excerpt":"","more":"<h3 id=\"1-安装Yii2第三方扩展\"><a href=\"#1-安装Yii2第三方扩展\" class=\"headerlink\" title=\"1. 安装Yii2第三方扩展\"></a>1. 安装Yii2第三方扩展</h3><ul>\n<li>方法一：composer安装<figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">php</span> composer.phar <span class=\"meta\">require</span> php-amqplib/php-amqplib</span><br><span class=\"line\">或者</span><br><span class=\"line\">在composer.json文件的<span class=\"meta\">require</span>里添加<span class=\"string\">&quot;php-amqplib/php-amqplib&quot;</span>: <span class=\"string\">&quot;~2.7&quot;</span>，然后执行composer update</span><br></pre></td></tr></table></figure></li>\n<li>方法二：手动添加<br>1、拷贝php-amqplib扩展到vendor目录下，<br>2、在vendor/yiisoft/extensions.php里添加如下配置项： <figure class=\"highlight smali\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x27;php-amqplib/php-amqplib&#x27; =&gt;</span><br><span class=\"line\">  <span class=\"built_in\"> array </span>(</span><br><span class=\"line\">      &#x27;name&#x27; =&gt; &#x27;php-amqplib/php-amqplib&#x27;,</span><br><span class=\"line\">      &#x27;version&#x27; =&gt; &#x27;2.4.5.0&#x27;,</span><br><span class=\"line\">      &#x27;alias&#x27; =&gt;</span><br><span class=\"line\">        <span class=\"built_in\"> array </span>(</span><br><span class=\"line\">            &#x27;@PhpAmqpLib&#x27; =&gt; $vendorDir . &#x27;/php-amqplib/php-amqplib/PhpAmqpLib&#x27;,</span><br><span class=\"line\">         ),</span><br><span class=\"line\">   ), </span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n"},{"title":"PHP运维笔记","abbrlink":"php-operate-note","date":"2019-03-20T09:37:00.000Z","updated":"2019-03-20T09:40:00.000Z","_content":"\n### 1. 常见命令\n    查看PHP扩展：`php -m`\n    查看扩展的版本信息：`php -ri 扩展名`  如：`php -ri redis`\n\n","source":"_posts/PHP/其他/PHP运维笔记.md","raw":"---\ntitle: PHP运维笔记\ntags: [运维]\ncategories: [PHP]\nabbrlink: 'php-operate-note'\ndate: 2019-03-20 17:37:00\nupdated: 2019-03-20 17:40:00\n---\n\n### 1. 常见命令\n    查看PHP扩展：`php -m`\n    查看扩展的版本信息：`php -ri 扩展名`  如：`php -ri redis`\n\n","slug":"PHP/其他/PHP运维笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v1007toshg2nmqd1qu","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-常见命令\"><a href=\"#1-常见命令\" class=\"headerlink\" title=\"1. 常见命令\"></a>1. 常见命令</h3><pre><code>查看PHP扩展：`php -m`\n查看扩展的版本信息：`php -ri 扩展名`  如：`php -ri redis`\n</code></pre>","excerpt":"","more":"<h3 id=\"1-常见命令\"><a href=\"#1-常见命令\" class=\"headerlink\" title=\"1. 常见命令\"></a>1. 常见命令</h3><pre><code>查看PHP扩展：`php -m`\n查看扩展的版本信息：`php -ri 扩展名`  如：`php -ri redis`\n</code></pre>"},{"title":"phpStorm配置xdebug","abbrlink":"phpstorm-setting-xdebug","date":"2024-10-23T07:44:02.000Z","updated":"2024-10-23T07:44:02.000Z","_content":"<div class=\"note info\">在php开发中，经常遇到一些奇怪的问题，一时半会儿排查不出原因；这时候就需要进行断点调试，xdebug就是常用的一种断点调试工具，下面介绍下如何设置的。</div>\n\n### xdebug设置\n\n1. 开启xdebug扩展，并配置php.ini，重启php\n```\n[Xdebug]\nzend_extension=D:/phpstudy_pro/Extensions/php/php7.1.9nts/ext/php_xdebug.dll\nxdebug.collect_params=1\nxdebug.collect_return=1\nxdebug.auto_trace=Off\nxdebug.trace_output_dir=D:/phpstudy_pro/Extensions/php_log/php7.1.9nts.xdebug.trace\nxdebug.profiler_enable=Off\nxdebug.profiler_output_dir=D:/phpstudy_pro/Extensions/php_log/php7.1.9nts.xdebug.profiler\nxdebug.remote_enable=On\nxdebug.remote_autostart=1\nxdebug.remote_host=127.0.0.1\nxdebug.remote_port=9003\nxdebug.remote_handler=dbgp\nxdebug.remote_connect_back=0\nxdebug.idekey=PHPSTORM\n```\n2. 配置phpStorm\n![](/images/xdebug_1.png)\n![](/images/xdebug_2.png)\n![](/images/xdebug_3.png)\n![](/images/xdebug_4.png)\n\n3. 开启xdebug\n![](/images/xdebug_5.png)\n\n4. 重启phpStorm，可以愉快地使用了\n\n\n### 问题排查\n\n如果xdebug不生效，可以检查下配置是否正确\n![](/images/xdebug_6.png)\n\n\n### 常用快捷键\n\n在 PHPStorm 中使用 Xdebug 进行命令行调试时，虽然没有图形界面那么直观，但通过一些快捷键，我们可以高效地控制调试过程。\n**注意：** 具体的快捷键可能因 PHPStorm 版本和操作系统而略有不同。可以通过 **Help -> Keymap Reference** 查看当前配置的快捷键。\n\n* **Step Over (F8)：** 执行当前行，如果当前行有函数调用，则不进入函数内部。\n* **Step Into (F7)：** 执行当前行，如果当前行有函数调用，则进入函数内部。\n* **Step Out (Shift+F8)：** 从当前函数返回。\n* **Run to Cursor (Alt+F9)：** 执行代码直到光标所在行。\n* **Evaluate Expression (Alt+F8)：** 计算表达式并显示结果。\n* **Toggle Line Breakpoint (Ctrl+F8)：** 在当前行设置或取消断点。\n* **View Breakpoints (Ctrl+Shift+F8)：** 查看所有断点。\n\n* **Resume Program (F9)：** 继续执行程序直到下一个断点。\n* **Pause Program (Ctrl+F2)：** 暂停程序执行。\n* **Mute Breakpoints (Ctrl+Shift+N)：** 禁用所有断点。\n* **Show Execution Point (Ctrl+Alt+F10)：** 跳转到当前执行行。\n\n\n### 示例：调试一个 PHP 命令行脚本\n\n1. **设置断点：** 在要调试的代码行设置断点。\n2. **配置运行配置：** 在 PHPStorm 中创建一个新的运行配置，选择 PHP，配置好脚本路径、参数等。\n3. **启动调试：** 点击运行配置旁边的调试按钮。\n4. **使用快捷键控制调试过程：** 根据需要使用上述快捷键进行单步执行、跳过、进入函数等操作。\n\n### 注意\n* **Xdebug 配置：** 确保 Xdebug 已正确配置，并且 PHPStorm 的配置与 Xdebug 的配置一致。\n* **命令行参数：** 如果脚本需要命令行参数，可以在运行配置中设置。\n* **远程调试：** 如果需要调试远程服务器上的代码，需要配置远程调试。\n\n**通过熟练掌握这些快捷键，我们可以更有效地进行 PHP 命令行调试，提高开发效率。**\n\n**温馨提示：**\n\n* **具体操作可能因 PHPStorm 版本和操作系统而略有差异，请参考官方文档。**\n* **Xdebug 的配置非常重要，配置不正确会导致调试无法进行。**\n* **善用 PHPStorm 的调试功能，可以帮助我们快速定位并解决问题。**\n","source":"_posts/PHP/其他/phpStorm配置xdebug.md","raw":"---\ntitle: phpStorm配置xdebug\ntags: [phpStorm,xdebug]\ncategories: [phpStorm]\nabbrlink: 'phpstorm-setting-xdebug'\ndate: 2024-10-23 15:44:02\nupdated: 2024-10-23 15:44:02\n---\n<div class=\"note info\">在php开发中，经常遇到一些奇怪的问题，一时半会儿排查不出原因；这时候就需要进行断点调试，xdebug就是常用的一种断点调试工具，下面介绍下如何设置的。</div>\n\n### xdebug设置\n\n1. 开启xdebug扩展，并配置php.ini，重启php\n```\n[Xdebug]\nzend_extension=D:/phpstudy_pro/Extensions/php/php7.1.9nts/ext/php_xdebug.dll\nxdebug.collect_params=1\nxdebug.collect_return=1\nxdebug.auto_trace=Off\nxdebug.trace_output_dir=D:/phpstudy_pro/Extensions/php_log/php7.1.9nts.xdebug.trace\nxdebug.profiler_enable=Off\nxdebug.profiler_output_dir=D:/phpstudy_pro/Extensions/php_log/php7.1.9nts.xdebug.profiler\nxdebug.remote_enable=On\nxdebug.remote_autostart=1\nxdebug.remote_host=127.0.0.1\nxdebug.remote_port=9003\nxdebug.remote_handler=dbgp\nxdebug.remote_connect_back=0\nxdebug.idekey=PHPSTORM\n```\n2. 配置phpStorm\n![](/images/xdebug_1.png)\n![](/images/xdebug_2.png)\n![](/images/xdebug_3.png)\n![](/images/xdebug_4.png)\n\n3. 开启xdebug\n![](/images/xdebug_5.png)\n\n4. 重启phpStorm，可以愉快地使用了\n\n\n### 问题排查\n\n如果xdebug不生效，可以检查下配置是否正确\n![](/images/xdebug_6.png)\n\n\n### 常用快捷键\n\n在 PHPStorm 中使用 Xdebug 进行命令行调试时，虽然没有图形界面那么直观，但通过一些快捷键，我们可以高效地控制调试过程。\n**注意：** 具体的快捷键可能因 PHPStorm 版本和操作系统而略有不同。可以通过 **Help -> Keymap Reference** 查看当前配置的快捷键。\n\n* **Step Over (F8)：** 执行当前行，如果当前行有函数调用，则不进入函数内部。\n* **Step Into (F7)：** 执行当前行，如果当前行有函数调用，则进入函数内部。\n* **Step Out (Shift+F8)：** 从当前函数返回。\n* **Run to Cursor (Alt+F9)：** 执行代码直到光标所在行。\n* **Evaluate Expression (Alt+F8)：** 计算表达式并显示结果。\n* **Toggle Line Breakpoint (Ctrl+F8)：** 在当前行设置或取消断点。\n* **View Breakpoints (Ctrl+Shift+F8)：** 查看所有断点。\n\n* **Resume Program (F9)：** 继续执行程序直到下一个断点。\n* **Pause Program (Ctrl+F2)：** 暂停程序执行。\n* **Mute Breakpoints (Ctrl+Shift+N)：** 禁用所有断点。\n* **Show Execution Point (Ctrl+Alt+F10)：** 跳转到当前执行行。\n\n\n### 示例：调试一个 PHP 命令行脚本\n\n1. **设置断点：** 在要调试的代码行设置断点。\n2. **配置运行配置：** 在 PHPStorm 中创建一个新的运行配置，选择 PHP，配置好脚本路径、参数等。\n3. **启动调试：** 点击运行配置旁边的调试按钮。\n4. **使用快捷键控制调试过程：** 根据需要使用上述快捷键进行单步执行、跳过、进入函数等操作。\n\n### 注意\n* **Xdebug 配置：** 确保 Xdebug 已正确配置，并且 PHPStorm 的配置与 Xdebug 的配置一致。\n* **命令行参数：** 如果脚本需要命令行参数，可以在运行配置中设置。\n* **远程调试：** 如果需要调试远程服务器上的代码，需要配置远程调试。\n\n**通过熟练掌握这些快捷键，我们可以更有效地进行 PHP 命令行调试，提高开发效率。**\n\n**温馨提示：**\n\n* **具体操作可能因 PHPStorm 版本和操作系统而略有差异，请参考官方文档。**\n* **Xdebug 的配置非常重要，配置不正确会导致调试无法进行。**\n* **善用 PHPStorm 的调试功能，可以帮助我们快速定位并解决问题。**\n","slug":"PHP/其他/phpStorm配置xdebug","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v2007uoshg4o0u8fpj","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">在php开发中，经常遇到一些奇怪的问题，一时半会儿排查不出原因；这时候就需要进行断点调试，xdebug就是常用的一种断点调试工具，下面介绍下如何设置的。</div>\n\n<h3 id=\"xdebug设置\"><a href=\"#xdebug设置\" class=\"headerlink\" title=\"xdebug设置\"></a>xdebug设置</h3><ol>\n<li>开启xdebug扩展，并配置php.ini，重启php<figure class=\"highlight ini\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[Xdebug]</span></span><br><span class=\"line\"><span class=\"attr\">zend_extension</span>=D:/phpstudy_pro/Extensions/php/php7.<span class=\"number\">1.9</span>nts/ext/php_xdebug.dll</span><br><span class=\"line\"><span class=\"attr\">xdebug.collect_params</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.collect_return</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.auto_trace</span>=<span class=\"literal\">Off</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.trace_output_dir</span>=D:/phpstudy_pro/Extensions/php_log/php7.<span class=\"number\">1.9</span>nts.xdebug.trace</span><br><span class=\"line\"><span class=\"attr\">xdebug.profiler_enable</span>=<span class=\"literal\">Off</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.profiler_output_dir</span>=D:/phpstudy_pro/Extensions/php_log/php7.<span class=\"number\">1.9</span>nts.xdebug.profiler</span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_enable</span>=<span class=\"literal\">On</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_autostart</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_host</span>=<span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_port</span>=<span class=\"number\">9003</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_handler</span>=dbgp</span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_connect_back</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.idekey</span>=PHPSTORM</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>配置phpStorm<br><img src=\"/images/xdebug_1.png\" alt=\"\"><br><img src=\"/images/xdebug_2.png\" alt=\"\"><br><img src=\"/images/xdebug_3.png\" alt=\"\"><br><img src=\"/images/xdebug_4.png\" alt=\"\"></p>\n</li>\n<li><p>开启xdebug<br><img src=\"/images/xdebug_5.png\" alt=\"\"></p>\n</li>\n<li><p>重启phpStorm，可以愉快地使用了</p>\n</li>\n</ol>\n<h3 id=\"问题排查\"><a href=\"#问题排查\" class=\"headerlink\" title=\"问题排查\"></a>问题排查</h3><p>如果xdebug不生效，可以检查下配置是否正确<br><img src=\"/images/xdebug_6.png\" alt=\"\"></p>\n<h3 id=\"常用快捷键\"><a href=\"#常用快捷键\" class=\"headerlink\" title=\"常用快捷键\"></a>常用快捷键</h3><p>在 PHPStorm 中使用 Xdebug 进行命令行调试时，虽然没有图形界面那么直观，但通过一些快捷键，我们可以高效地控制调试过程。<br><strong>注意：</strong> 具体的快捷键可能因 PHPStorm 版本和操作系统而略有不同。可以通过 <strong>Help -&gt; Keymap Reference</strong> 查看当前配置的快捷键。</p>\n<ul>\n<li><strong>Step Over (F8)：</strong> 执行当前行，如果当前行有函数调用，则不进入函数内部。</li>\n<li><strong>Step Into (F7)：</strong> 执行当前行，如果当前行有函数调用，则进入函数内部。</li>\n<li><strong>Step Out (Shift+F8)：</strong> 从当前函数返回。</li>\n<li><strong>Run to Cursor (Alt+F9)：</strong> 执行代码直到光标所在行。</li>\n<li><strong>Evaluate Expression (Alt+F8)：</strong> 计算表达式并显示结果。</li>\n<li><strong>Toggle Line Breakpoint (Ctrl+F8)：</strong> 在当前行设置或取消断点。</li>\n<li><p><strong>View Breakpoints (Ctrl+Shift+F8)：</strong> 查看所有断点。</p>\n</li>\n<li><p><strong>Resume Program (F9)：</strong> 继续执行程序直到下一个断点。</p>\n</li>\n<li><strong>Pause Program (Ctrl+F2)：</strong> 暂停程序执行。</li>\n<li><strong>Mute Breakpoints (Ctrl+Shift+N)：</strong> 禁用所有断点。</li>\n<li><strong>Show Execution Point (Ctrl+Alt+F10)：</strong> 跳转到当前执行行。</li>\n</ul>\n<h3 id=\"示例：调试一个-PHP-命令行脚本\"><a href=\"#示例：调试一个-PHP-命令行脚本\" class=\"headerlink\" title=\"示例：调试一个 PHP 命令行脚本\"></a>示例：调试一个 PHP 命令行脚本</h3><ol>\n<li><strong>设置断点：</strong> 在要调试的代码行设置断点。</li>\n<li><strong>配置运行配置：</strong> 在 PHPStorm 中创建一个新的运行配置，选择 PHP，配置好脚本路径、参数等。</li>\n<li><strong>启动调试：</strong> 点击运行配置旁边的调试按钮。</li>\n<li><strong>使用快捷键控制调试过程：</strong> 根据需要使用上述快捷键进行单步执行、跳过、进入函数等操作。</li>\n</ol>\n<h3 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h3><ul>\n<li><strong>Xdebug 配置：</strong> 确保 Xdebug 已正确配置，并且 PHPStorm 的配置与 Xdebug 的配置一致。</li>\n<li><strong>命令行参数：</strong> 如果脚本需要命令行参数，可以在运行配置中设置。</li>\n<li><strong>远程调试：</strong> 如果需要调试远程服务器上的代码，需要配置远程调试。</li>\n</ul>\n<p><strong>通过熟练掌握这些快捷键，我们可以更有效地进行 PHP 命令行调试，提高开发效率。</strong></p>\n<p><strong>温馨提示：</strong></p>\n<ul>\n<li><strong>具体操作可能因 PHPStorm 版本和操作系统而略有差异，请参考官方文档。</strong></li>\n<li><strong>Xdebug 的配置非常重要，配置不正确会导致调试无法进行。</strong></li>\n<li><strong>善用 PHPStorm 的调试功能，可以帮助我们快速定位并解决问题。</strong></li>\n</ul>\n","excerpt":"","more":"<div class=\"note info\">在php开发中，经常遇到一些奇怪的问题，一时半会儿排查不出原因；这时候就需要进行断点调试，xdebug就是常用的一种断点调试工具，下面介绍下如何设置的。</div>\n\n<h3 id=\"xdebug设置\"><a href=\"#xdebug设置\" class=\"headerlink\" title=\"xdebug设置\"></a>xdebug设置</h3><ol>\n<li>开启xdebug扩展，并配置php.ini，重启php<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[Xdebug]</span></span><br><span class=\"line\"><span class=\"attr\">zend_extension</span>=D:/phpstudy_pro/Extensions/php/php7.<span class=\"number\">1.9</span>nts/ext/php_xdebug.dll</span><br><span class=\"line\"><span class=\"attr\">xdebug.collect_params</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.collect_return</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.auto_trace</span>=<span class=\"literal\">Off</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.trace_output_dir</span>=D:/phpstudy_pro/Extensions/php_log/php7.<span class=\"number\">1.9</span>nts.xdebug.trace</span><br><span class=\"line\"><span class=\"attr\">xdebug.profiler_enable</span>=<span class=\"literal\">Off</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.profiler_output_dir</span>=D:/phpstudy_pro/Extensions/php_log/php7.<span class=\"number\">1.9</span>nts.xdebug.profiler</span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_enable</span>=<span class=\"literal\">On</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_autostart</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_host</span>=<span class=\"number\">127.0</span>.<span class=\"number\">0.1</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_port</span>=<span class=\"number\">9003</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_handler</span>=dbgp</span><br><span class=\"line\"><span class=\"attr\">xdebug.remote_connect_back</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">xdebug.idekey</span>=PHPSTORM</span><br></pre></td></tr></table></figure></li>\n<li><p>配置phpStorm<br><img src=\"/images/xdebug_1.png\" alt><br><img src=\"/images/xdebug_2.png\" alt><br><img src=\"/images/xdebug_3.png\" alt><br><img src=\"/images/xdebug_4.png\" alt></p>\n</li>\n<li><p>开启xdebug<br><img src=\"/images/xdebug_5.png\" alt></p>\n</li>\n<li><p>重启phpStorm，可以愉快地使用了</p>\n</li>\n</ol>\n<h3 id=\"问题排查\"><a href=\"#问题排查\" class=\"headerlink\" title=\"问题排查\"></a>问题排查</h3><p>如果xdebug不生效，可以检查下配置是否正确<br><img src=\"/images/xdebug_6.png\" alt></p>\n<h3 id=\"常用快捷键\"><a href=\"#常用快捷键\" class=\"headerlink\" title=\"常用快捷键\"></a>常用快捷键</h3><p>在 PHPStorm 中使用 Xdebug 进行命令行调试时，虽然没有图形界面那么直观，但通过一些快捷键，我们可以高效地控制调试过程。<br><strong>注意：</strong> 具体的快捷键可能因 PHPStorm 版本和操作系统而略有不同。可以通过 <strong>Help -&gt; Keymap Reference</strong> 查看当前配置的快捷键。</p>\n<ul>\n<li><strong>Step Over (F8)：</strong> 执行当前行，如果当前行有函数调用，则不进入函数内部。</li>\n<li><strong>Step Into (F7)：</strong> 执行当前行，如果当前行有函数调用，则进入函数内部。</li>\n<li><strong>Step Out (Shift+F8)：</strong> 从当前函数返回。</li>\n<li><strong>Run to Cursor (Alt+F9)：</strong> 执行代码直到光标所在行。</li>\n<li><strong>Evaluate Expression (Alt+F8)：</strong> 计算表达式并显示结果。</li>\n<li><strong>Toggle Line Breakpoint (Ctrl+F8)：</strong> 在当前行设置或取消断点。</li>\n<li><p><strong>View Breakpoints (Ctrl+Shift+F8)：</strong> 查看所有断点。</p>\n</li>\n<li><p><strong>Resume Program (F9)：</strong> 继续执行程序直到下一个断点。</p>\n</li>\n<li><strong>Pause Program (Ctrl+F2)：</strong> 暂停程序执行。</li>\n<li><strong>Mute Breakpoints (Ctrl+Shift+N)：</strong> 禁用所有断点。</li>\n<li><strong>Show Execution Point (Ctrl+Alt+F10)：</strong> 跳转到当前执行行。</li>\n</ul>\n<h3 id=\"示例：调试一个-PHP-命令行脚本\"><a href=\"#示例：调试一个-PHP-命令行脚本\" class=\"headerlink\" title=\"示例：调试一个 PHP 命令行脚本\"></a>示例：调试一个 PHP 命令行脚本</h3><ol>\n<li><strong>设置断点：</strong> 在要调试的代码行设置断点。</li>\n<li><strong>配置运行配置：</strong> 在 PHPStorm 中创建一个新的运行配置，选择 PHP，配置好脚本路径、参数等。</li>\n<li><strong>启动调试：</strong> 点击运行配置旁边的调试按钮。</li>\n<li><strong>使用快捷键控制调试过程：</strong> 根据需要使用上述快捷键进行单步执行、跳过、进入函数等操作。</li>\n</ol>\n<h3 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h3><ul>\n<li><strong>Xdebug 配置：</strong> 确保 Xdebug 已正确配置，并且 PHPStorm 的配置与 Xdebug 的配置一致。</li>\n<li><strong>命令行参数：</strong> 如果脚本需要命令行参数，可以在运行配置中设置。</li>\n<li><strong>远程调试：</strong> 如果需要调试远程服务器上的代码，需要配置远程调试。</li>\n</ul>\n<p><strong>通过熟练掌握这些快捷键，我们可以更有效地进行 PHP 命令行调试，提高开发效率。</strong></p>\n<p><strong>温馨提示：</strong></p>\n<ul>\n<li><strong>具体操作可能因 PHPStorm 版本和操作系统而略有差异，请参考官方文档。</strong></li>\n<li><strong>Xdebug 的配置非常重要，配置不正确会导致调试无法进行。</strong></li>\n<li><strong>善用 PHPStorm 的调试功能，可以帮助我们快速定位并解决问题。</strong></li>\n</ul>\n"},{"title":"rabbitMQ+yii2实现远程过程调用(RPC)","abbrlink":"yii2-rabbitmq","date":"2021-05-27T07:52:24.000Z","updated":"2021-05-27T07:52:24.000Z","_content":"\n### RPC服务端代码\n```\n<?php\n\nnamespace console\\controllers;\n\nuse yii;\nuse yii\\console\\Controller;\nuse PhpAmqpLib\\Connection\\AMQPStreamConnection;\nuse PhpAmqpLib\\Message\\AMQPMessage;\n\nclass RpcServerController extends Controller{\n\n\tprivate $channel;\n\tprivate  $connection;\n\t\n\tpublic function init (){\n        $amqp = yii::$app->params['amqp'];\n        \n        //建立一个到RabbitMQ服务器的连接\n        $this->connection = new AMQPStreamConnection($amqp[\"host\"], $amqp[\"port\"], $amqp[\"user\"], $amqp[\"password\"]);\n        $this->channel = $this->connection->channel();\n\t}\n\t\n\t/**\n\t * RPC服务端\n\t */\n\tpublic function actionRpcServer(){\n        //建立一个到RabbitMQ服务器的连接\n        $connection = $this->connection;\n        $channel = $this->channel;\n        \n        //接下来,我们创建一个通道\n        $channel->queue_declare('rpc_queue',false,false,false,false);\n        function fib($n) {\n           return $n;\n        }\n        \n        //回调\n        $callback = function($req){\n            $n = intval($req->body);\n            echo \" [.] fib(\", $n, \")\\n\";\n            $msg = new AMQPMessage((string) fib($n),[]'correlation_id' => $req->get('correlation_id')]);\n            $req->delivery_info['channel']->basic_publish($msg,'', $req->get('reply_to'));\n            $req->delivery_info['channel']->basic_ack($req->delivery_info['delivery_tag']);\n        };\n        \n        $channel->basic_qos(null,1,null);\n        $channel->basic_consume('rpc_queue','',false,false,false,false,$callback);\n        \n        while (count($channel->callbacks)) {\n\t\t\t$channel->wait();\n        }\n        \n        $channel->close();\n        $connection->close();\n\t}\n}\n```\n\n### RPC客户端代码\n```\n<?php\n\n\nnamespace service\\entry;\n\n\nuse common\\components\\BaseServer;\nuse common\\library\\Helper;\nuse PhpAmqpLib\\Channel\\AMQPChannel;\nuse PhpAmqpLib\\Connection\\AMQPStreamConnection;\nuse PhpAmqpLib\\Message\\AMQPMessage;\nuse PhpAmqpLib\\Wire\\AMQPTable;\nuse Yii;\n\nclass RemoteOpenDoor extends BaseServer\n{\n   const EXPIRE = 5;\n   const QUEUE_NAME = \"remote_open_door\";\n   public $devSn,$schoolId;\n\n   /**\n    * @var AMQPChannel\n    */\n   private $channel;\n   private $connection,$replyQueue,$corrId,$response,$params;\n   private $door = [1,2];\n\n   public function init(){\n      $amqp = Yii::$app->params['rabbitMQ'];\n      $this->connection = new AMQPStreamConnection($amqp['host'],$amqp['port'],$amqp['user'],$amqp['password'],$amqp['vhost']);\n      if(!$this->connection->isConnected()){\n         $this->setError(10003,'连接失败');\n         return false;\n      }\n      $this->channel = $this->connection->channel();\n\n      $arguments = new AMQPTable();\n      $arguments->set(\"x-message-ttl\",10000);    //消息10s过期\n      //$this->channel->queue_declare(self::QUEUE_NAME,false,false,false,false,false,$arguments);\n      $this->channel->exchange_declare(self::QUEUE_NAME,'topic',false,false,false);\n      //$this->replyQueue = $this->devSn.'_'.$this->schoolId.'_'.microtime(true);\n      list($this->replyQueue, ,) = $this->channel->queue_declare(\"\",false,false,false,true,false);\n      //回调\n      $callback = function(AMQPMessage $rep){\n         //var_dump($rep->get_properties());die;\n         if($rep->get('correlation_id') == $this->corrId) {\n            $this->response = $rep->body;\n         }\n      };\n\n      //接收回调信息\n      $this->channel->basic_consume( $this->replyQueue,'',false,false,false,false,$callback);\n   }\n\n   public function __construct(){\n      $this->init();\n   }\n\n   //组装参数\n   protected function buildParams(){\n      $params = [\n         'expire'=>intval(time() + self::EXPIRE),\n         'devSn'=>intval($this->devSn),\n         'door'=>$this->door,\n      ];\n\n      $this->params = json_encode($params,true);\n   }\n\n\n   //发送mq开门指令\n   public function open(){\n      $this->buildParams();\n      $this->corrId = uniqid();\n      $this->response = null;\n      $properties = ['correlation_id'=>$this->corrId,'reply_to'=>$this->replyQueue];\n      $message = new AMQPMessage($this->params,$properties);\n      $this->channel->basic_publish($message,self::QUEUE_NAME,sprintf('school.%d',$this->schoolId));\n\n      //test\n      /*$message = new AMQPMessage(json_encode(['FailDoor'=>[1,2]],true),$properties);\n      $this->channel->basic_publish($message,'',$this->replyQueue);*/\n\n      try{\n         $this->channel->wait(null,false,self::EXPIRE);\n      }catch (\\Exception $exception){\n         $this->setError(10003,'开门失败');\n         return false;\n      }\n\n\n      //var_dump($this->response);\n      // // $this->channel->close();\n      // $this->connection->close();\n\n      $rs = json_decode($this->response,true);\n      if (!is_array($rs['failDoor']) && (!$rs['failDoor'] || $rs['failDoor']!=$this->door)){\n         return true;\n      }\n\n      $this->setError(10003,'开门失败');\n      return false;\n   }\n}\n```\n\n### 客户端调用代码：\n```\n$server = new RemoteOpenDoor();\n$server->devSn = $devSn;\n$server->schoolId = $teacher->getSchoolId();\n$rs = $server->open();\n$error = $server->getError();\nif(!$rs){\n   return $error ? \\Yii::$app->responseHelper->error($error)->response() : \\Yii::$app->responseHelper->error(new Error(110000,'操作失败！'))->response();\n}\n\nreturn \\Yii::$app->responseHelper->success(null)->response();\n```\n\n### 参考文档\nhttps://blog.csdn.net/weixin_36851500/article/details/93501861","source":"_posts/PHP/其他/rabbitMQ+yii2实现远程过程调用(RPC).md","raw":"---\ntitle: rabbitMQ+yii2实现远程过程调用(RPC)\ntags: [RPC]\ncategories: [PHP]\nabbrlink: 'yii2-rabbitmq'\ndate: 2021-05-27 15:52:24\nupdated: 2021-05-27 15:52:24\n---\n\n### RPC服务端代码\n```\n<?php\n\nnamespace console\\controllers;\n\nuse yii;\nuse yii\\console\\Controller;\nuse PhpAmqpLib\\Connection\\AMQPStreamConnection;\nuse PhpAmqpLib\\Message\\AMQPMessage;\n\nclass RpcServerController extends Controller{\n\n\tprivate $channel;\n\tprivate  $connection;\n\t\n\tpublic function init (){\n        $amqp = yii::$app->params['amqp'];\n        \n        //建立一个到RabbitMQ服务器的连接\n        $this->connection = new AMQPStreamConnection($amqp[\"host\"], $amqp[\"port\"], $amqp[\"user\"], $amqp[\"password\"]);\n        $this->channel = $this->connection->channel();\n\t}\n\t\n\t/**\n\t * RPC服务端\n\t */\n\tpublic function actionRpcServer(){\n        //建立一个到RabbitMQ服务器的连接\n        $connection = $this->connection;\n        $channel = $this->channel;\n        \n        //接下来,我们创建一个通道\n        $channel->queue_declare('rpc_queue',false,false,false,false);\n        function fib($n) {\n           return $n;\n        }\n        \n        //回调\n        $callback = function($req){\n            $n = intval($req->body);\n            echo \" [.] fib(\", $n, \")\\n\";\n            $msg = new AMQPMessage((string) fib($n),[]'correlation_id' => $req->get('correlation_id')]);\n            $req->delivery_info['channel']->basic_publish($msg,'', $req->get('reply_to'));\n            $req->delivery_info['channel']->basic_ack($req->delivery_info['delivery_tag']);\n        };\n        \n        $channel->basic_qos(null,1,null);\n        $channel->basic_consume('rpc_queue','',false,false,false,false,$callback);\n        \n        while (count($channel->callbacks)) {\n\t\t\t$channel->wait();\n        }\n        \n        $channel->close();\n        $connection->close();\n\t}\n}\n```\n\n### RPC客户端代码\n```\n<?php\n\n\nnamespace service\\entry;\n\n\nuse common\\components\\BaseServer;\nuse common\\library\\Helper;\nuse PhpAmqpLib\\Channel\\AMQPChannel;\nuse PhpAmqpLib\\Connection\\AMQPStreamConnection;\nuse PhpAmqpLib\\Message\\AMQPMessage;\nuse PhpAmqpLib\\Wire\\AMQPTable;\nuse Yii;\n\nclass RemoteOpenDoor extends BaseServer\n{\n   const EXPIRE = 5;\n   const QUEUE_NAME = \"remote_open_door\";\n   public $devSn,$schoolId;\n\n   /**\n    * @var AMQPChannel\n    */\n   private $channel;\n   private $connection,$replyQueue,$corrId,$response,$params;\n   private $door = [1,2];\n\n   public function init(){\n      $amqp = Yii::$app->params['rabbitMQ'];\n      $this->connection = new AMQPStreamConnection($amqp['host'],$amqp['port'],$amqp['user'],$amqp['password'],$amqp['vhost']);\n      if(!$this->connection->isConnected()){\n         $this->setError(10003,'连接失败');\n         return false;\n      }\n      $this->channel = $this->connection->channel();\n\n      $arguments = new AMQPTable();\n      $arguments->set(\"x-message-ttl\",10000);    //消息10s过期\n      //$this->channel->queue_declare(self::QUEUE_NAME,false,false,false,false,false,$arguments);\n      $this->channel->exchange_declare(self::QUEUE_NAME,'topic',false,false,false);\n      //$this->replyQueue = $this->devSn.'_'.$this->schoolId.'_'.microtime(true);\n      list($this->replyQueue, ,) = $this->channel->queue_declare(\"\",false,false,false,true,false);\n      //回调\n      $callback = function(AMQPMessage $rep){\n         //var_dump($rep->get_properties());die;\n         if($rep->get('correlation_id') == $this->corrId) {\n            $this->response = $rep->body;\n         }\n      };\n\n      //接收回调信息\n      $this->channel->basic_consume( $this->replyQueue,'',false,false,false,false,$callback);\n   }\n\n   public function __construct(){\n      $this->init();\n   }\n\n   //组装参数\n   protected function buildParams(){\n      $params = [\n         'expire'=>intval(time() + self::EXPIRE),\n         'devSn'=>intval($this->devSn),\n         'door'=>$this->door,\n      ];\n\n      $this->params = json_encode($params,true);\n   }\n\n\n   //发送mq开门指令\n   public function open(){\n      $this->buildParams();\n      $this->corrId = uniqid();\n      $this->response = null;\n      $properties = ['correlation_id'=>$this->corrId,'reply_to'=>$this->replyQueue];\n      $message = new AMQPMessage($this->params,$properties);\n      $this->channel->basic_publish($message,self::QUEUE_NAME,sprintf('school.%d',$this->schoolId));\n\n      //test\n      /*$message = new AMQPMessage(json_encode(['FailDoor'=>[1,2]],true),$properties);\n      $this->channel->basic_publish($message,'',$this->replyQueue);*/\n\n      try{\n         $this->channel->wait(null,false,self::EXPIRE);\n      }catch (\\Exception $exception){\n         $this->setError(10003,'开门失败');\n         return false;\n      }\n\n\n      //var_dump($this->response);\n      // // $this->channel->close();\n      // $this->connection->close();\n\n      $rs = json_decode($this->response,true);\n      if (!is_array($rs['failDoor']) && (!$rs['failDoor'] || $rs['failDoor']!=$this->door)){\n         return true;\n      }\n\n      $this->setError(10003,'开门失败');\n      return false;\n   }\n}\n```\n\n### 客户端调用代码：\n```\n$server = new RemoteOpenDoor();\n$server->devSn = $devSn;\n$server->schoolId = $teacher->getSchoolId();\n$rs = $server->open();\n$error = $server->getError();\nif(!$rs){\n   return $error ? \\Yii::$app->responseHelper->error($error)->response() : \\Yii::$app->responseHelper->error(new Error(110000,'操作失败！'))->response();\n}\n\nreturn \\Yii::$app->responseHelper->success(null)->response();\n```\n\n### 参考文档\nhttps://blog.csdn.net/weixin_36851500/article/details/93501861","slug":"PHP/其他/rabbitMQ+yii2实现远程过程调用(RPC)","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v3007yoshg5kcd8gco","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"RPC服务端代码\"><a href=\"#RPC服务端代码\" class=\"headerlink\" title=\"RPC服务端代码\"></a>RPC服务端代码</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">console</span>\\<span class=\"title class_\">controllers</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">yii</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">yii</span>\\<span class=\"title\">console</span>\\<span class=\"title\">Controller</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Connection</span>\\<span class=\"title\">AMQPStreamConnection</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Message</span>\\<span class=\"title\">AMQPMessage</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RpcServerController</span> <span class=\"keyword\">extends</span> <span class=\"title\">Controller</span></span>{</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"variable\">$channel</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span>  <span class=\"variable\">$connection</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span> (<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$amqp</span> = yii::<span class=\"variable\">$app</span>-&gt;params[<span class=\"string\">'amqp'</span>];</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//建立一个到RabbitMQ服务器的连接</span></span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;connection = <span class=\"keyword\">new</span> <span class=\"title class_\">AMQPStreamConnection</span>(<span class=\"variable\">$amqp</span>[<span class=\"string\">\"host\"</span>], <span class=\"variable\">$amqp</span>[<span class=\"string\">\"port\"</span>], <span class=\"variable\">$amqp</span>[<span class=\"string\">\"user\"</span>], <span class=\"variable\">$amqp</span>[<span class=\"string\">\"password\"</span>]);</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;channel = <span class=\"variable language_\">$this</span>-&gt;connection-&gt;<span class=\"title function_ invoke__\">channel</span>();</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * RPC服务端</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">actionRpcServer</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"comment\">//建立一个到RabbitMQ服务器的连接</span></span><br><span class=\"line\">        <span class=\"variable\">$connection</span> = <span class=\"variable language_\">$this</span>-&gt;connection;</span><br><span class=\"line\">        <span class=\"variable\">$channel</span> = <span class=\"variable language_\">$this</span>-&gt;channel;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//接下来,我们创建一个通道</span></span><br><span class=\"line\">        <span class=\"variable\">$channel</span>-&gt;<span class=\"title function_ invoke__\">queue_declare</span>(<span class=\"string\">'rpc_queue'</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>);</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fib</span>(<span class=\"params\"><span class=\"variable\">$n</span></span>) </span>{</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"variable\">$n</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//回调</span></span><br><span class=\"line\">        <span class=\"variable\">$callback</span> = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"><span class=\"variable\">$req</span></span>)</span>{</span><br><span class=\"line\">            <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$req</span>-&gt;body);</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">\" [.] fib(\"</span>, <span class=\"variable\">$n</span>, <span class=\"string\">\")\\n\"</span>;</span><br><span class=\"line\">            <span class=\"variable\">$msg</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">AMQPMessage</span>((<span class=\"keyword\">string</span>) <span class=\"title function_ invoke__\">fib</span>(<span class=\"variable\">$n</span>),[]<span class=\"string\">'correlation_id'</span> =&gt; <span class=\"variable\">$req</span>-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"string\">'correlation_id'</span>)]);</span><br><span class=\"line\">            <span class=\"variable\">$req</span>-&gt;delivery_info[<span class=\"string\">'channel'</span>]-&gt;<span class=\"title function_ invoke__\">basic_publish</span>(<span class=\"variable\">$msg</span>,<span class=\"string\">''</span>, <span class=\"variable\">$req</span>-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"string\">'reply_to'</span>));</span><br><span class=\"line\">            <span class=\"variable\">$req</span>-&gt;delivery_info[<span class=\"string\">'channel'</span>]-&gt;<span class=\"title function_ invoke__\">basic_ack</span>(<span class=\"variable\">$req</span>-&gt;delivery_info[<span class=\"string\">'delivery_tag'</span>]);</span><br><span class=\"line\">        };</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"variable\">$channel</span>-&gt;<span class=\"title function_ invoke__\">basic_qos</span>(<span class=\"literal\">null</span>,<span class=\"number\">1</span>,<span class=\"literal\">null</span>);</span><br><span class=\"line\">        <span class=\"variable\">$channel</span>-&gt;<span class=\"title function_ invoke__\">basic_consume</span>(<span class=\"string\">'rpc_queue'</span>,<span class=\"string\">''</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"variable\">$callback</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$channel</span>-&gt;callbacks)) {</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$channel</span>-&gt;<span class=\"title function_ invoke__\">wait</span>();</span><br><span class=\"line\">        }</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"variable\">$channel</span>-&gt;<span class=\"title function_ invoke__\">close</span>();</span><br><span class=\"line\">        <span class=\"variable\">$connection</span>-&gt;<span class=\"title function_ invoke__\">close</span>();</span><br><span class=\"line\">\t}</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"RPC客户端代码\"><a href=\"#RPC客户端代码\" class=\"headerlink\" title=\"RPC客户端代码\"></a>RPC客户端代码</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">service</span>\\<span class=\"title class_\">entry</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">common</span>\\<span class=\"title\">components</span>\\<span class=\"title\">BaseServer</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">common</span>\\<span class=\"title\">library</span>\\<span class=\"title\">Helper</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Channel</span>\\<span class=\"title\">AMQPChannel</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Connection</span>\\<span class=\"title\">AMQPStreamConnection</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Message</span>\\<span class=\"title\">AMQPMessage</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Wire</span>\\<span class=\"title\">AMQPTable</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Yii</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RemoteOpenDoor</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseServer</span></span></span><br><span class=\"line\"><span class=\"class\"></span>{</span><br><span class=\"line\">   <span class=\"keyword\">const</span> <span class=\"variable constant_\">EXPIRE</span> = <span class=\"number\">5</span>;</span><br><span class=\"line\">   <span class=\"keyword\">const</span> <span class=\"variable constant_\">QUEUE_NAME</span> = <span class=\"string\">\"remote_open_door\"</span>;</span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"variable\">$devSn</span>,<span class=\"variable\">$schoolId</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@var</span> AMQPChannel</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"variable\">$channel</span>;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"variable\">$connection</span>,<span class=\"variable\">$replyQueue</span>,<span class=\"variable\">$corrId</span>,<span class=\"variable\">$response</span>,<span class=\"variable\">$params</span>;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"variable\">$door</span> = [<span class=\"number\">1</span>,<span class=\"number\">2</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">      <span class=\"variable\">$amqp</span> = <span class=\"title class_\">Yii</span>::<span class=\"variable\">$app</span>-&gt;params[<span class=\"string\">'rabbitMQ'</span>];</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;connection = <span class=\"keyword\">new</span> <span class=\"title class_\">AMQPStreamConnection</span>(<span class=\"variable\">$amqp</span>[<span class=\"string\">'host'</span>],<span class=\"variable\">$amqp</span>[<span class=\"string\">'port'</span>],<span class=\"variable\">$amqp</span>[<span class=\"string\">'user'</span>],<span class=\"variable\">$amqp</span>[<span class=\"string\">'password'</span>],<span class=\"variable\">$amqp</span>[<span class=\"string\">'vhost'</span>]);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(!<span class=\"variable language_\">$this</span>-&gt;connection-&gt;<span class=\"title function_ invoke__\">isConnected</span>()){</span><br><span class=\"line\">         <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">setError</span>(<span class=\"number\">10003</span>,<span class=\"string\">'连接失败'</span>);</span><br><span class=\"line\">         <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      }</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;channel = <span class=\"variable language_\">$this</span>-&gt;connection-&gt;<span class=\"title function_ invoke__\">channel</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"variable\">$arguments</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">AMQPTable</span>();</span><br><span class=\"line\">      <span class=\"variable\">$arguments</span>-&gt;<span class=\"title function_ invoke__\">set</span>(<span class=\"string\">\"x-message-ttl\"</span>,<span class=\"number\">10000</span>);    <span class=\"comment\">//消息10s过期</span></span><br><span class=\"line\">      <span class=\"comment\">//$this-&gt;channel-&gt;queue_declare(self::QUEUE_NAME,false,false,false,false,false,$arguments);</span></span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;channel-&gt;<span class=\"title function_ invoke__\">exchange_declare</span>(<span class=\"built_in\">self</span>::<span class=\"variable constant_\">QUEUE_NAME</span>,<span class=\"string\">'topic'</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>);</span><br><span class=\"line\">      <span class=\"comment\">//$this-&gt;replyQueue = $this-&gt;devSn.'_'.$this-&gt;schoolId.'_'.microtime(true);</span></span><br><span class=\"line\">      <span class=\"keyword\">list</span>(<span class=\"variable language_\">$this</span>-&gt;replyQueue, ,) = <span class=\"variable language_\">$this</span>-&gt;channel-&gt;<span class=\"title function_ invoke__\">queue_declare</span>(<span class=\"string\">\"\"</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">true</span>,<span class=\"literal\">false</span>);</span><br><span class=\"line\">      <span class=\"comment\">//回调</span></span><br><span class=\"line\">      <span class=\"variable\">$callback</span> = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">AMQPMessage <span class=\"variable\">$rep</span></span>)</span>{</span><br><span class=\"line\">         <span class=\"comment\">//var_dump($rep-&gt;get_properties());die;</span></span><br><span class=\"line\">         <span class=\"keyword\">if</span>(<span class=\"variable\">$rep</span>-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"string\">'correlation_id'</span>) == <span class=\"variable language_\">$this</span>-&gt;corrId) {</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;response = <span class=\"variable\">$rep</span>-&gt;body;</span><br><span class=\"line\">         }</span><br><span class=\"line\">      };</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//接收回调信息</span></span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;channel-&gt;<span class=\"title function_ invoke__\">basic_consume</span>( <span class=\"variable\">$this</span>-&gt;replyQueue,<span class=\"string\">''</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"variable\">$callback</span>);</span><br><span class=\"line\">   }</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">init</span>();</span><br><span class=\"line\">   }</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">//组装参数</span></span><br><span class=\"line\">   <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildParams</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">      <span class=\"variable\">$params</span> = [</span><br><span class=\"line\">         <span class=\"string\">'expire'</span>=&gt;<span class=\"title function_ invoke__\">intval</span>(<span class=\"title function_ invoke__\">time</span>() + <span class=\"built_in\">self</span>::<span class=\"variable constant_\">EXPIRE</span>),</span><br><span class=\"line\">         <span class=\"string\">'devSn'</span>=&gt;<span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$this</span>-&gt;devSn),</span><br><span class=\"line\">         <span class=\"string\">'door'</span>=&gt;<span class=\"variable language_\">$this</span>-&gt;door,</span><br><span class=\"line\">      ];</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;params = <span class=\"title function_ invoke__\">json_encode</span>(<span class=\"variable\">$params</span>,<span class=\"literal\">true</span>);</span><br><span class=\"line\">   }</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">//发送mq开门指令</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">open</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">buildParams</span>();</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;corrId = <span class=\"title function_ invoke__\">uniqid</span>();</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;response = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      <span class=\"variable\">$properties</span> = [<span class=\"string\">'correlation_id'</span>=&gt;<span class=\"variable language_\">$this</span>-&gt;corrId,<span class=\"string\">'reply_to'</span>=&gt;<span class=\"variable language_\">$this</span>-&gt;replyQueue];</span><br><span class=\"line\">      <span class=\"variable\">$message</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">AMQPMessage</span>(<span class=\"variable language_\">$this</span>-&gt;params,<span class=\"variable\">$properties</span>);</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;channel-&gt;<span class=\"title function_ invoke__\">basic_publish</span>(<span class=\"variable\">$message</span>,<span class=\"built_in\">self</span>::<span class=\"variable constant_\">QUEUE_NAME</span>,<span class=\"title function_ invoke__\">sprintf</span>(<span class=\"string\">'school.%d'</span>,<span class=\"variable\">$this</span>-&gt;schoolId));</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//test</span></span><br><span class=\"line\">      <span class=\"comment\">/*$message = new AMQPMessage(json_encode(['FailDoor'=&gt;[1,2]],true),$properties);</span></span><br><span class=\"line\"><span class=\"comment\">      $this-&gt;channel-&gt;basic_publish($message,'',$this-&gt;replyQueue);*/</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">try</span>{</span><br><span class=\"line\">         <span class=\"variable language_\">$this</span>-&gt;channel-&gt;<span class=\"title function_ invoke__\">wait</span>(<span class=\"literal\">null</span>,<span class=\"literal\">false</span>,<span class=\"built_in\">self</span>::<span class=\"variable constant_\">EXPIRE</span>);</span><br><span class=\"line\">      }<span class=\"keyword\">catch</span> (\\<span class=\"built_in\">Exception</span> <span class=\"variable\">$exception</span>){</span><br><span class=\"line\">         <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">setError</span>(<span class=\"number\">10003</span>,<span class=\"string\">'开门失败'</span>);</span><br><span class=\"line\">         <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      }</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//var_dump($this-&gt;response);</span></span><br><span class=\"line\">      <span class=\"comment\">// // $this-&gt;channel-&gt;close();</span></span><br><span class=\"line\">      <span class=\"comment\">// $this-&gt;connection-&gt;close();</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"variable\">$rs</span> = <span class=\"title function_ invoke__\">json_decode</span>(<span class=\"variable\">$this</span>-&gt;response,<span class=\"literal\">true</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"title function_ invoke__\">is_array</span>(<span class=\"variable\">$rs</span>[<span class=\"string\">'failDoor'</span>]) &amp;&amp; (!<span class=\"variable\">$rs</span>[<span class=\"string\">'failDoor'</span>] || <span class=\"variable\">$rs</span>[<span class=\"string\">'failDoor'</span>]!=<span class=\"variable language_\">$this</span>-&gt;door)){</span><br><span class=\"line\">         <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">      }</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">setError</span>(<span class=\"number\">10003</span>,<span class=\"string\">'开门失败'</span>);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">   }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"客户端调用代码：\"><a href=\"#客户端调用代码：\" class=\"headerlink\" title=\"客户端调用代码：\"></a>客户端调用代码：</h3><figure class=\"highlight xl\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$server = new RemoteOpenDoor();</span><br><span class=\"line\">$<span class=\"function\"><span class=\"title\">server</span>-&gt;</span>devSn = $devSn;</span><br><span class=\"line\">$<span class=\"function\"><span class=\"title\">server</span>-&gt;</span><span class=\"function\"><span class=\"title\">schoolId</span> = $teacher-&gt;</span>getSchoolId();</span><br><span class=\"line\">$<span class=\"function\"><span class=\"title\">rs</span> = $server-&gt;</span>open();</span><br><span class=\"line\">$<span class=\"function\"><span class=\"title\">error</span> = $server-&gt;</span>getError();</span><br><span class=\"line\"><span class=\"keyword\">if</span>(!$rs){</span><br><span class=\"line\">   <span class=\"function\"><span class=\"title\">return</span> $error ? \\Yii::$app-&gt;</span><span class=\"function\"><span class=\"title\">responseHelper</span>-&gt;</span><span class=\"function\"><span class=\"title\">error</span>($error)-&gt;</span><span class=\"function\"><span class=\"title\">response</span>() : \\Yii::$app-&gt;</span><span class=\"function\"><span class=\"title\">responseHelper</span>-&gt;</span><span class=\"function\"><span class=\"title\">error</span>(new Error(110000,'操作失败！'))-&gt;</span>response();</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">return</span> \\Yii::$app-&gt;</span><span class=\"function\"><span class=\"title\">responseHelper</span>-&gt;</span><span class=\"function\"><span class=\"title\">success</span>(null)-&gt;</span>response();</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p><a href=\"https://blog.csdn.net/weixin_36851500/article/details/93501861\">https://blog.csdn.net/weixin_36851500/article/details/93501861</a></p>\n","excerpt":"","more":"<h3 id=\"RPC服务端代码\"><a href=\"#RPC服务端代码\" class=\"headerlink\" title=\"RPC服务端代码\"></a>RPC服务端代码</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">console</span>\\<span class=\"title class_\">controllers</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">yii</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">yii</span>\\<span class=\"title\">console</span>\\<span class=\"title\">Controller</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Connection</span>\\<span class=\"title\">AMQPStreamConnection</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Message</span>\\<span class=\"title\">AMQPMessage</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RpcServerController</span> <span class=\"keyword\">extends</span> <span class=\"title\">Controller</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"variable\">$channel</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span>  <span class=\"variable\">$connection</span>;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span> (<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$amqp</span> = yii::<span class=\"variable\">$app</span>-&gt;params[<span class=\"string\">&#x27;amqp&#x27;</span>];</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//建立一个到RabbitMQ服务器的连接</span></span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;connection = <span class=\"keyword\">new</span> <span class=\"title class_\">AMQPStreamConnection</span>(<span class=\"variable\">$amqp</span>[<span class=\"string\">&quot;host&quot;</span>], <span class=\"variable\">$amqp</span>[<span class=\"string\">&quot;port&quot;</span>], <span class=\"variable\">$amqp</span>[<span class=\"string\">&quot;user&quot;</span>], <span class=\"variable\">$amqp</span>[<span class=\"string\">&quot;password&quot;</span>]);</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;channel = <span class=\"variable language_\">$this</span>-&gt;connection-&gt;<span class=\"title function_ invoke__\">channel</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * RPC服务端</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">actionRpcServer</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//建立一个到RabbitMQ服务器的连接</span></span><br><span class=\"line\">        <span class=\"variable\">$connection</span> = <span class=\"variable language_\">$this</span>-&gt;connection;</span><br><span class=\"line\">        <span class=\"variable\">$channel</span> = <span class=\"variable language_\">$this</span>-&gt;channel;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//接下来,我们创建一个通道</span></span><br><span class=\"line\">        <span class=\"variable\">$channel</span>-&gt;<span class=\"title function_ invoke__\">queue_declare</span>(<span class=\"string\">&#x27;rpc_queue&#x27;</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>);</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fib</span>(<span class=\"params\"><span class=\"variable\">$n</span></span>) </span>&#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"variable\">$n</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//回调</span></span><br><span class=\"line\">        <span class=\"variable\">$callback</span> = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"><span class=\"variable\">$req</span></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"variable\">$n</span> = <span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$req</span>-&gt;body);</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&quot; [.] fib(&quot;</span>, <span class=\"variable\">$n</span>, <span class=\"string\">&quot;)\\n&quot;</span>;</span><br><span class=\"line\">            <span class=\"variable\">$msg</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">AMQPMessage</span>((<span class=\"keyword\">string</span>) <span class=\"title function_ invoke__\">fib</span>(<span class=\"variable\">$n</span>),[]<span class=\"string\">&#x27;correlation_id&#x27;</span> =&gt; <span class=\"variable\">$req</span>-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"string\">&#x27;correlation_id&#x27;</span>)]);</span><br><span class=\"line\">            <span class=\"variable\">$req</span>-&gt;delivery_info[<span class=\"string\">&#x27;channel&#x27;</span>]-&gt;<span class=\"title function_ invoke__\">basic_publish</span>(<span class=\"variable\">$msg</span>,<span class=\"string\">&#x27;&#x27;</span>, <span class=\"variable\">$req</span>-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"string\">&#x27;reply_to&#x27;</span>));</span><br><span class=\"line\">            <span class=\"variable\">$req</span>-&gt;delivery_info[<span class=\"string\">&#x27;channel&#x27;</span>]-&gt;<span class=\"title function_ invoke__\">basic_ack</span>(<span class=\"variable\">$req</span>-&gt;delivery_info[<span class=\"string\">&#x27;delivery_tag&#x27;</span>]);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"variable\">$channel</span>-&gt;<span class=\"title function_ invoke__\">basic_qos</span>(<span class=\"literal\">null</span>,<span class=\"number\">1</span>,<span class=\"literal\">null</span>);</span><br><span class=\"line\">        <span class=\"variable\">$channel</span>-&gt;<span class=\"title function_ invoke__\">basic_consume</span>(<span class=\"string\">&#x27;rpc_queue&#x27;</span>,<span class=\"string\">&#x27;&#x27;</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"variable\">$callback</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">while</span> (<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$channel</span>-&gt;callbacks)) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"variable\">$channel</span>-&gt;<span class=\"title function_ invoke__\">wait</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"variable\">$channel</span>-&gt;<span class=\"title function_ invoke__\">close</span>();</span><br><span class=\"line\">        <span class=\"variable\">$connection</span>-&gt;<span class=\"title function_ invoke__\">close</span>();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"RPC客户端代码\"><a href=\"#RPC客户端代码\" class=\"headerlink\" title=\"RPC客户端代码\"></a>RPC客户端代码</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title class_\">service</span>\\<span class=\"title class_\">entry</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">common</span>\\<span class=\"title\">components</span>\\<span class=\"title\">BaseServer</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">common</span>\\<span class=\"title\">library</span>\\<span class=\"title\">Helper</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Channel</span>\\<span class=\"title\">AMQPChannel</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Connection</span>\\<span class=\"title\">AMQPStreamConnection</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Message</span>\\<span class=\"title\">AMQPMessage</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">PhpAmqpLib</span>\\<span class=\"title\">Wire</span>\\<span class=\"title\">AMQPTable</span>;</span><br><span class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Yii</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RemoteOpenDoor</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseServer</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">const</span> <span class=\"variable constant_\">EXPIRE</span> = <span class=\"number\">5</span>;</span><br><span class=\"line\">   <span class=\"keyword\">const</span> <span class=\"variable constant_\">QUEUE_NAME</span> = <span class=\"string\">&quot;remote_open_door&quot;</span>;</span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"variable\">$devSn</span>,<span class=\"variable\">$schoolId</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@var</span> AMQPChannel</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"variable\">$channel</span>;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"variable\">$connection</span>,<span class=\"variable\">$replyQueue</span>,<span class=\"variable\">$corrId</span>,<span class=\"variable\">$response</span>,<span class=\"variable\">$params</span>;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"variable\">$door</span> = [<span class=\"number\">1</span>,<span class=\"number\">2</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">      <span class=\"variable\">$amqp</span> = <span class=\"title class_\">Yii</span>::<span class=\"variable\">$app</span>-&gt;params[<span class=\"string\">&#x27;rabbitMQ&#x27;</span>];</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;connection = <span class=\"keyword\">new</span> <span class=\"title class_\">AMQPStreamConnection</span>(<span class=\"variable\">$amqp</span>[<span class=\"string\">&#x27;host&#x27;</span>],<span class=\"variable\">$amqp</span>[<span class=\"string\">&#x27;port&#x27;</span>],<span class=\"variable\">$amqp</span>[<span class=\"string\">&#x27;user&#x27;</span>],<span class=\"variable\">$amqp</span>[<span class=\"string\">&#x27;password&#x27;</span>],<span class=\"variable\">$amqp</span>[<span class=\"string\">&#x27;vhost&#x27;</span>]);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(!<span class=\"variable language_\">$this</span>-&gt;connection-&gt;<span class=\"title function_ invoke__\">isConnected</span>())&#123;</span><br><span class=\"line\">         <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">setError</span>(<span class=\"number\">10003</span>,<span class=\"string\">&#x27;连接失败&#x27;</span>);</span><br><span class=\"line\">         <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;channel = <span class=\"variable language_\">$this</span>-&gt;connection-&gt;<span class=\"title function_ invoke__\">channel</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"variable\">$arguments</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">AMQPTable</span>();</span><br><span class=\"line\">      <span class=\"variable\">$arguments</span>-&gt;<span class=\"title function_ invoke__\">set</span>(<span class=\"string\">&quot;x-message-ttl&quot;</span>,<span class=\"number\">10000</span>);    <span class=\"comment\">//消息10s过期</span></span><br><span class=\"line\">      <span class=\"comment\">//$this-&gt;channel-&gt;queue_declare(self::QUEUE_NAME,false,false,false,false,false,$arguments);</span></span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;channel-&gt;<span class=\"title function_ invoke__\">exchange_declare</span>(<span class=\"built_in\">self</span>::<span class=\"variable constant_\">QUEUE_NAME</span>,<span class=\"string\">&#x27;topic&#x27;</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>);</span><br><span class=\"line\">      <span class=\"comment\">//$this-&gt;replyQueue = $this-&gt;devSn.&#x27;_&#x27;.$this-&gt;schoolId.&#x27;_&#x27;.microtime(true);</span></span><br><span class=\"line\">      <span class=\"keyword\">list</span>(<span class=\"variable language_\">$this</span>-&gt;replyQueue, ,) = <span class=\"variable language_\">$this</span>-&gt;channel-&gt;<span class=\"title function_ invoke__\">queue_declare</span>(<span class=\"string\">&quot;&quot;</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">true</span>,<span class=\"literal\">false</span>);</span><br><span class=\"line\">      <span class=\"comment\">//回调</span></span><br><span class=\"line\">      <span class=\"variable\">$callback</span> = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">AMQPMessage <span class=\"variable\">$rep</span></span>)</span>&#123;</span><br><span class=\"line\">         <span class=\"comment\">//var_dump($rep-&gt;get_properties());die;</span></span><br><span class=\"line\">         <span class=\"keyword\">if</span>(<span class=\"variable\">$rep</span>-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"string\">&#x27;correlation_id&#x27;</span>) == <span class=\"variable language_\">$this</span>-&gt;corrId) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;response = <span class=\"variable\">$rep</span>-&gt;body;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//接收回调信息</span></span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;channel-&gt;<span class=\"title function_ invoke__\">basic_consume</span>( <span class=\"variable\">$this</span>-&gt;replyQueue,<span class=\"string\">&#x27;&#x27;</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"literal\">false</span>,<span class=\"variable\">$callback</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">init</span>();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">//组装参数</span></span><br><span class=\"line\">   <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildParams</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">      <span class=\"variable\">$params</span> = [</span><br><span class=\"line\">         <span class=\"string\">&#x27;expire&#x27;</span>=&gt;<span class=\"title function_ invoke__\">intval</span>(<span class=\"title function_ invoke__\">time</span>() + <span class=\"built_in\">self</span>::<span class=\"variable constant_\">EXPIRE</span>),</span><br><span class=\"line\">         <span class=\"string\">&#x27;devSn&#x27;</span>=&gt;<span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$this</span>-&gt;devSn),</span><br><span class=\"line\">         <span class=\"string\">&#x27;door&#x27;</span>=&gt;<span class=\"variable language_\">$this</span>-&gt;door,</span><br><span class=\"line\">      ];</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;params = <span class=\"title function_ invoke__\">json_encode</span>(<span class=\"variable\">$params</span>,<span class=\"literal\">true</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">//发送mq开门指令</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">open</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">buildParams</span>();</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;corrId = <span class=\"title function_ invoke__\">uniqid</span>();</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;response = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      <span class=\"variable\">$properties</span> = [<span class=\"string\">&#x27;correlation_id&#x27;</span>=&gt;<span class=\"variable language_\">$this</span>-&gt;corrId,<span class=\"string\">&#x27;reply_to&#x27;</span>=&gt;<span class=\"variable language_\">$this</span>-&gt;replyQueue];</span><br><span class=\"line\">      <span class=\"variable\">$message</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">AMQPMessage</span>(<span class=\"variable language_\">$this</span>-&gt;params,<span class=\"variable\">$properties</span>);</span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;channel-&gt;<span class=\"title function_ invoke__\">basic_publish</span>(<span class=\"variable\">$message</span>,<span class=\"built_in\">self</span>::<span class=\"variable constant_\">QUEUE_NAME</span>,<span class=\"title function_ invoke__\">sprintf</span>(<span class=\"string\">&#x27;school.%d&#x27;</span>,<span class=\"variable\">$this</span>-&gt;schoolId));</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//test</span></span><br><span class=\"line\">      <span class=\"comment\">/*$message = new AMQPMessage(json_encode([&#x27;FailDoor&#x27;=&gt;[1,2]],true),$properties);</span></span><br><span class=\"line\"><span class=\"comment\">      $this-&gt;channel-&gt;basic_publish($message,&#x27;&#x27;,$this-&gt;replyQueue);*/</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">         <span class=\"variable language_\">$this</span>-&gt;channel-&gt;<span class=\"title function_ invoke__\">wait</span>(<span class=\"literal\">null</span>,<span class=\"literal\">false</span>,<span class=\"built_in\">self</span>::<span class=\"variable constant_\">EXPIRE</span>);</span><br><span class=\"line\">      &#125;<span class=\"keyword\">catch</span> (\\<span class=\"built_in\">Exception</span> <span class=\"variable\">$exception</span>)&#123;</span><br><span class=\"line\">         <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">setError</span>(<span class=\"number\">10003</span>,<span class=\"string\">&#x27;开门失败&#x27;</span>);</span><br><span class=\"line\">         <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//var_dump($this-&gt;response);</span></span><br><span class=\"line\">      <span class=\"comment\">// // $this-&gt;channel-&gt;close();</span></span><br><span class=\"line\">      <span class=\"comment\">// $this-&gt;connection-&gt;close();</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"variable\">$rs</span> = <span class=\"title function_ invoke__\">json_decode</span>(<span class=\"variable\">$this</span>-&gt;response,<span class=\"literal\">true</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"title function_ invoke__\">is_array</span>(<span class=\"variable\">$rs</span>[<span class=\"string\">&#x27;failDoor&#x27;</span>]) &amp;&amp; (!<span class=\"variable\">$rs</span>[<span class=\"string\">&#x27;failDoor&#x27;</span>] || <span class=\"variable\">$rs</span>[<span class=\"string\">&#x27;failDoor&#x27;</span>]!=<span class=\"variable language_\">$this</span>-&gt;door))&#123;</span><br><span class=\"line\">         <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">setError</span>(<span class=\"number\">10003</span>,<span class=\"string\">&#x27;开门失败&#x27;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"客户端调用代码：\"><a href=\"#客户端调用代码：\" class=\"headerlink\" title=\"客户端调用代码：\"></a>客户端调用代码：</h3><figure class=\"highlight xl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$server = new RemoteOpenDoor();</span><br><span class=\"line\">$<span class=\"function\"><span class=\"title\">server</span>-&gt;</span>devSn = $devSn;</span><br><span class=\"line\">$<span class=\"function\"><span class=\"title\">server</span>-&gt;</span><span class=\"function\"><span class=\"title\">schoolId</span> = $teacher-&gt;</span>getSchoolId();</span><br><span class=\"line\">$<span class=\"function\"><span class=\"title\">rs</span> = $server-&gt;</span>open();</span><br><span class=\"line\">$<span class=\"function\"><span class=\"title\">error</span> = $server-&gt;</span>getError();</span><br><span class=\"line\"><span class=\"keyword\">if</span>(!$rs)&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"title\">return</span> $error ? \\Yii::$app-&gt;</span><span class=\"function\"><span class=\"title\">responseHelper</span>-&gt;</span><span class=\"function\"><span class=\"title\">error</span>($error)-&gt;</span><span class=\"function\"><span class=\"title\">response</span>() : \\Yii::$app-&gt;</span><span class=\"function\"><span class=\"title\">responseHelper</span>-&gt;</span><span class=\"function\"><span class=\"title\">error</span>(new Error(110000,&#x27;操作失败！&#x27;))-&gt;</span>response();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">return</span> \\Yii::$app-&gt;</span><span class=\"function\"><span class=\"title\">responseHelper</span>-&gt;</span><span class=\"function\"><span class=\"title\">success</span>(null)-&gt;</span>response();</span><br></pre></td></tr></table></figure>\n<h3 id=\"参考文档\"><a href=\"#参考文档\" class=\"headerlink\" title=\"参考文档\"></a>参考文档</h3><p><a href=\"https://blog.csdn.net/weixin_36851500/article/details/93501861\">https://blog.csdn.net/weixin_36851500/article/details/93501861</a></p>\n"},{"title":"windows下批处理","abbrlink":"php-bat","date":"2022-03-02T05:22:05.000Z","updated":"2022-03-02T05:22:05.000Z","_content":"\n因工作需要，需要按条件删除指定表中大批量数据，故用php做了个站点页面处理程序，每页处理500条数据，处理后sleep(5)，跳转下一页；但程序运行中可能出现超时页面挂掉的情况，为了减少个人的工作量，就借助windows的任务计划程序，设置每两个小时，关闭浏览器，休眠几秒，再次在浏览器中访问处理程序地址。没想到效果还不错。下面是计划任务的bat程序。\n```\nTASKKILL /F /IM chrome.exe\nping -n 10 127.0.0.1 > nul\ncmd /c start https://manage.lepayedu.com/index.php/my-test/deal-school-entry?page=100\n```\n![](/images/php_bat_1.png)","source":"_posts/PHP/其他/windows下批处理.md","raw":"---\ntitle: windows下批处理\ntags: [PHP]\ncategories: [PHP]\nabbrlink: 'php-bat'\ndate: 2022-03-02 13:22:05\nupdated: 2022-03-02 13:22:05\n---\n\n因工作需要，需要按条件删除指定表中大批量数据，故用php做了个站点页面处理程序，每页处理500条数据，处理后sleep(5)，跳转下一页；但程序运行中可能出现超时页面挂掉的情况，为了减少个人的工作量，就借助windows的任务计划程序，设置每两个小时，关闭浏览器，休眠几秒，再次在浏览器中访问处理程序地址。没想到效果还不错。下面是计划任务的bat程序。\n```\nTASKKILL /F /IM chrome.exe\nping -n 10 127.0.0.1 > nul\ncmd /c start https://manage.lepayedu.com/index.php/my-test/deal-school-entry?page=100\n```\n![](/images/php_bat_1.png)","slug":"PHP/其他/windows下批处理","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v30080oshgffmthj0e","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>因工作需要，需要按条件删除指定表中大批量数据，故用php做了个站点页面处理程序，每页处理500条数据，处理后sleep(5)，跳转下一页；但程序运行中可能出现超时页面挂掉的情况，为了减少个人的工作量，就借助windows的任务计划程序，设置每两个小时，关闭浏览器，休眠几秒，再次在浏览器中访问处理程序地址。没想到效果还不错。下面是计划任务的bat程序。<br></p><figure class=\"highlight dos\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">TASKKILL</span> /F /IM chrome.exe</span><br><span class=\"line\"><span class=\"built_in\">ping</span> -n <span class=\"number\">10</span> <span class=\"number\">127</span>.<span class=\"number\">0</span>.<span class=\"number\">0</span>.<span class=\"number\">1</span> &gt; <span class=\"built_in\">nul</span></span><br><span class=\"line\"><span class=\"built_in\">cmd</span> /c <span class=\"built_in\">start</span> https://manage.lepayedu.com/index.php/my-test/deal-school-entry?page=<span class=\"number\">100</span></span><br></pre></td></tr></tbody></table></figure><br><img src=\"/images/php_bat_1.png\" alt=\"\"><p></p>\n","excerpt":"","more":"<p>因工作需要，需要按条件删除指定表中大批量数据，故用php做了个站点页面处理程序，每页处理500条数据，处理后sleep(5)，跳转下一页；但程序运行中可能出现超时页面挂掉的情况，为了减少个人的工作量，就借助windows的任务计划程序，设置每两个小时，关闭浏览器，休眠几秒，再次在浏览器中访问处理程序地址。没想到效果还不错。下面是计划任务的bat程序。<br><figure class=\"highlight dos\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">TASKKILL</span> /F /IM chrome.exe</span><br><span class=\"line\"><span class=\"built_in\">ping</span> -n <span class=\"number\">10</span> <span class=\"number\">127</span>.<span class=\"number\">0</span>.<span class=\"number\">0</span>.<span class=\"number\">1</span> &gt; <span class=\"built_in\">nul</span></span><br><span class=\"line\"><span class=\"built_in\">cmd</span> /c <span class=\"built_in\">start</span> https://manage.lepayedu.com/index.php/my-test/deal-school-entry?page=<span class=\"number\">100</span></span><br></pre></td></tr></table></figure><br><img src=\"/images/php_bat_1.png\" alt></p>\n"},{"title":"自己封装的一些常用的PHP函数","abbrlink":"php-some-my-functions","date":"2022-02-27T13:26:25.000Z","updated":"2022-02-27T13:26:25.000Z","_content":"\n### 1. 将字符串每隔n位显示一个指定字符\n``` php\n/**\n * 将字符串每隔n位显示一个指定字符\n * @param string $str   原始字符串\n * @param int $n        间隔位数\n * @param string $d     分隔符\n * @return string       结果字符串\n * eg: ed4a32c2=>ed:4a:32:c2\n */\nfunction divisionStr(string $str,int $n,string $d=\" \"):string{\n    return join($d,str_split($str,$n)));\n}\n``` \n\n### 2. 打印图片的每一个像素颜色值\n``` php\n/**\n * 打印图片的每一个像素颜色值\n * @param string $picUrl    图片路径\n */\nfunction printPicPixels(string $picUrl): void {\n    $i = imagecreatefrompng($picUrl);\n    if (!$i)    return ;\n    for ($y = 0; $y < imagesy($i); $y++) {\n        for ($x = 0; $x < imagesx($i); $x++) {\n            $rgb = imagecolorat($i, $x, $y);\n            $r = ($rgb >> 16) & 0xFF;\n            $g = ($rgb >> 8) & 0xFF;\n            $b = $rgb & 0xFF;\n            echo \"rgb($r,$g,$b)\";\n        }\n    }\n}\n``` \n\n### 3. 字符串按照ASCII码顺序排序\n```php\n/**\n * 字符串按照ASCII码顺序排序\n * @param string $str 字符串\n * @param int $sort 排序\n * @return string\n */\nfunction sortStr(string $str, $sort=SORT_ASC): string{\n    $arr = str_split($str);\n    if ($sort == SORT_ASC){\n        asort($arr);\n    }else{\n        arsort($arr);\n    }\n\n    return join('', $arr);\n}\n```\n\n### 4. 字节数转化为常用单位\n```php\n/**\n * 字节数转化为常用单位\n * @param int $size 字节数\n * @return string\n */\nfunction convert(int $size): string{\n    $unit = ['b', 'kb', 'mb', 'gb', 'tb', 'pb'];\n    $exp = floor(log($size, 1024));\n    return round($size / pow(1024, $exp), 2) . ' ' . $unit[$exp];\n}\n// 使用：查看内存使用 echo convert(memory_get_usage(false));\n```\n\n### 5. ping指定地址，用于监控服务器是否在线\n```php\n/**\n * ping 指定地址\n * @param string $address\n * @return bool\n */\npublic function pingHost($address){\n    $address = parse_url($address);\n    $host = isset($address['host']) ? $address['host'] : '';\n    if(!$host)  return false;\n    $status = -1;\n    if (strcasecmp(PHP_OS, 'WINNT') === 0) {\n        $rs = exec(\"ping -n 1 {$host}\", $outcome, $status);  // Windows 服务器下\n    } elseif (strcasecmp(PHP_OS, 'Linux') === 0) {\n        $rs = exec(\"ping -c 1 {$host}\", $outcome, $status);  // Linux 服务器下\n    }\n\n    return $status==0 ? true : false;\n}\n\n//$url = \"https://cloud.tencent.com/document/api/457/37184?id=232\";\n//var_dump(pingHost($url));       //true\n```\n\n### 6. 文本变量替换\n```php\n/**\n * 变量替换\n * @param string $string 要进行替换的原始字符串\n * @param array $params 关联数组(包含需要替换的占位符和对应的值)\n * @return string\n */\nfunction replaceString(string $string, array $params = []): string\n{\n    foreach ($params as $key => $value) {\n        $placeholder = '{' . $key . '}';\n        $string = str_replace($placeholder, $value, $string);\n    }\n    return $string;\n}\n\n//    $string = 'Accumulated login {amount} days';\n//    $params = ['amount' => 20];\n//\n//    $result = replaceString($string, $params);\n//    echo $result;  // 输出：Accumulated login 20 days\n```\n\n### 7. 判断指定数字是否在区间里\n```php\n/**\n * 判断指定数字是否在区间里\n * @param int|float $num    指定数字\n * @param string $interval  区间  支持格式：(,20)、[10,5)、【20.5,)、(-∞，50.1)、(-∞,+∞)、(,)\n * @return bool\n */\nfunction isInInterval($num, $interval): bool\n{\n    $pattern = '/^([\\[\\(])(-?∞|\\d*),(\\+?∞|\\d*)([\\]\\)])$/';\n    $res = preg_match($pattern, $interval, $matches);\n    if (!$res)  return false;\n\n    $leftBracket = $matches[1];\n    $leftNum = $matches[2];\n    $rightNum = $matches[3];\n    $rightBracket = $matches[4];\n\n    if ($leftNum !== '∞' && $leftNum !== '') {\n        if ($leftBracket == '[') {\n            if ($num < $leftNum) {\n                return false;\n            }\n        } else {\n            if ($num <= $leftNum) {\n                return false;\n            }\n        }\n    }\n\n    if ($rightNum !== '+∞' && $rightNum !== '') {\n        if ($rightBracket == ']') {\n            if ($num > $rightNum) {\n                return false;\n            }\n        } else {\n            if ($num >= $rightNum) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\n//    $num = 20;\n//    $interval = \"(20,]\";\n//    if (MathUtils::isInInterval($num, $interval)) {\n//        echo \"数字 {$num} 在区间 {$interval} 中\";\n//    } else {\n//        echo \"数字 {$num} 不在区间 {$interval} 中\";\n//    }\n```","source":"_posts/PHP/其他/自己封装的一些常用的PHP函数.md","raw":"---\ntitle: 自己封装的一些常用的PHP函数\ntags: [PHP函数]\ncategories: [PHP]\nabbrlink: 'php-some-my-functions'\ndate: 2022-02-27 21:26:25\nupdated: 2022-02-27 21:26:25\n---\n\n### 1. 将字符串每隔n位显示一个指定字符\n``` php\n/**\n * 将字符串每隔n位显示一个指定字符\n * @param string $str   原始字符串\n * @param int $n        间隔位数\n * @param string $d     分隔符\n * @return string       结果字符串\n * eg: ed4a32c2=>ed:4a:32:c2\n */\nfunction divisionStr(string $str,int $n,string $d=\" \"):string{\n    return join($d,str_split($str,$n)));\n}\n``` \n\n### 2. 打印图片的每一个像素颜色值\n``` php\n/**\n * 打印图片的每一个像素颜色值\n * @param string $picUrl    图片路径\n */\nfunction printPicPixels(string $picUrl): void {\n    $i = imagecreatefrompng($picUrl);\n    if (!$i)    return ;\n    for ($y = 0; $y < imagesy($i); $y++) {\n        for ($x = 0; $x < imagesx($i); $x++) {\n            $rgb = imagecolorat($i, $x, $y);\n            $r = ($rgb >> 16) & 0xFF;\n            $g = ($rgb >> 8) & 0xFF;\n            $b = $rgb & 0xFF;\n            echo \"rgb($r,$g,$b)\";\n        }\n    }\n}\n``` \n\n### 3. 字符串按照ASCII码顺序排序\n```php\n/**\n * 字符串按照ASCII码顺序排序\n * @param string $str 字符串\n * @param int $sort 排序\n * @return string\n */\nfunction sortStr(string $str, $sort=SORT_ASC): string{\n    $arr = str_split($str);\n    if ($sort == SORT_ASC){\n        asort($arr);\n    }else{\n        arsort($arr);\n    }\n\n    return join('', $arr);\n}\n```\n\n### 4. 字节数转化为常用单位\n```php\n/**\n * 字节数转化为常用单位\n * @param int $size 字节数\n * @return string\n */\nfunction convert(int $size): string{\n    $unit = ['b', 'kb', 'mb', 'gb', 'tb', 'pb'];\n    $exp = floor(log($size, 1024));\n    return round($size / pow(1024, $exp), 2) . ' ' . $unit[$exp];\n}\n// 使用：查看内存使用 echo convert(memory_get_usage(false));\n```\n\n### 5. ping指定地址，用于监控服务器是否在线\n```php\n/**\n * ping 指定地址\n * @param string $address\n * @return bool\n */\npublic function pingHost($address){\n    $address = parse_url($address);\n    $host = isset($address['host']) ? $address['host'] : '';\n    if(!$host)  return false;\n    $status = -1;\n    if (strcasecmp(PHP_OS, 'WINNT') === 0) {\n        $rs = exec(\"ping -n 1 {$host}\", $outcome, $status);  // Windows 服务器下\n    } elseif (strcasecmp(PHP_OS, 'Linux') === 0) {\n        $rs = exec(\"ping -c 1 {$host}\", $outcome, $status);  // Linux 服务器下\n    }\n\n    return $status==0 ? true : false;\n}\n\n//$url = \"https://cloud.tencent.com/document/api/457/37184?id=232\";\n//var_dump(pingHost($url));       //true\n```\n\n### 6. 文本变量替换\n```php\n/**\n * 变量替换\n * @param string $string 要进行替换的原始字符串\n * @param array $params 关联数组(包含需要替换的占位符和对应的值)\n * @return string\n */\nfunction replaceString(string $string, array $params = []): string\n{\n    foreach ($params as $key => $value) {\n        $placeholder = '{' . $key . '}';\n        $string = str_replace($placeholder, $value, $string);\n    }\n    return $string;\n}\n\n//    $string = 'Accumulated login {amount} days';\n//    $params = ['amount' => 20];\n//\n//    $result = replaceString($string, $params);\n//    echo $result;  // 输出：Accumulated login 20 days\n```\n\n### 7. 判断指定数字是否在区间里\n```php\n/**\n * 判断指定数字是否在区间里\n * @param int|float $num    指定数字\n * @param string $interval  区间  支持格式：(,20)、[10,5)、【20.5,)、(-∞，50.1)、(-∞,+∞)、(,)\n * @return bool\n */\nfunction isInInterval($num, $interval): bool\n{\n    $pattern = '/^([\\[\\(])(-?∞|\\d*),(\\+?∞|\\d*)([\\]\\)])$/';\n    $res = preg_match($pattern, $interval, $matches);\n    if (!$res)  return false;\n\n    $leftBracket = $matches[1];\n    $leftNum = $matches[2];\n    $rightNum = $matches[3];\n    $rightBracket = $matches[4];\n\n    if ($leftNum !== '∞' && $leftNum !== '') {\n        if ($leftBracket == '[') {\n            if ($num < $leftNum) {\n                return false;\n            }\n        } else {\n            if ($num <= $leftNum) {\n                return false;\n            }\n        }\n    }\n\n    if ($rightNum !== '+∞' && $rightNum !== '') {\n        if ($rightBracket == ']') {\n            if ($num > $rightNum) {\n                return false;\n            }\n        } else {\n            if ($num >= $rightNum) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\n//    $num = 20;\n//    $interval = \"(20,]\";\n//    if (MathUtils::isInInterval($num, $interval)) {\n//        echo \"数字 {$num} 在区间 {$interval} 中\";\n//    } else {\n//        echo \"数字 {$num} 不在区间 {$interval} 中\";\n//    }\n```","slug":"PHP/其他/自己封装的一些常用的PHP函数","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v40084oshg3c7z4n2z","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-将字符串每隔n位显示一个指定字符\"><a href=\"#1-将字符串每隔n位显示一个指定字符\" class=\"headerlink\" title=\"1. 将字符串每隔n位显示一个指定字符\"></a>1. 将字符串每隔n位显示一个指定字符</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 将字符串每隔n位显示一个指定字符</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $str   原始字符串</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $n        间隔位数</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $d     分隔符</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> string       结果字符串</span></span><br><span class=\"line\"><span class=\"comment\"> * eg: ed4a32c2=&gt;ed:4a:32:c2</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">divisionStr</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$str</span>,<span class=\"keyword\">int</span> <span class=\"variable\">$n</span>,<span class=\"keyword\">string</span> <span class=\"variable\">$d</span>=<span class=\"string\">\" \"</span></span>):<span class=\"title\">string</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">join</span>(<span class=\"variable\">$d</span>,<span class=\"title function_ invoke__\">str_split</span>(<span class=\"variable\">$str</span>,<span class=\"variable\">$n</span>)));</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"2-打印图片的每一个像素颜色值\"><a href=\"#2-打印图片的每一个像素颜色值\" class=\"headerlink\" title=\"2. 打印图片的每一个像素颜色值\"></a>2. 打印图片的每一个像素颜色值</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 打印图片的每一个像素颜色值</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $picUrl    图片路径</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">printPicPixels</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$picUrl</span></span>): <span class=\"title\">void</span> </span>{</span><br><span class=\"line\">    <span class=\"variable\">$i</span> = <span class=\"title function_ invoke__\">imagecreatefrompng</span>(<span class=\"variable\">$picUrl</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"variable\">$i</span>)    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$y</span> = <span class=\"number\">0</span>; <span class=\"variable\">$y</span> &lt; <span class=\"title function_ invoke__\">imagesy</span>(<span class=\"variable\">$i</span>); <span class=\"variable\">$y</span>++) {</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$x</span> = <span class=\"number\">0</span>; <span class=\"variable\">$x</span> &lt; <span class=\"title function_ invoke__\">imagesx</span>(<span class=\"variable\">$i</span>); <span class=\"variable\">$x</span>++) {</span><br><span class=\"line\">            <span class=\"variable\">$rgb</span> = <span class=\"title function_ invoke__\">imagecolorat</span>(<span class=\"variable\">$i</span>, <span class=\"variable\">$x</span>, <span class=\"variable\">$y</span>);</span><br><span class=\"line\">            <span class=\"variable\">$r</span> = (<span class=\"variable\">$rgb</span> &gt;&gt; <span class=\"number\">16</span>) &amp; <span class=\"number\">0xFF</span>;</span><br><span class=\"line\">            <span class=\"variable\">$g</span> = (<span class=\"variable\">$rgb</span> &gt;&gt; <span class=\"number\">8</span>) &amp; <span class=\"number\">0xFF</span>;</span><br><span class=\"line\">            <span class=\"variable\">$b</span> = <span class=\"variable\">$rgb</span> &amp; <span class=\"number\">0xFF</span>;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">\"rgb(<span class=\"subst\">$r</span>,<span class=\"subst\">$g</span>,<span class=\"subst\">$b</span>)\"</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"3-字符串按照ASCII码顺序排序\"><a href=\"#3-字符串按照ASCII码顺序排序\" class=\"headerlink\" title=\"3. 字符串按照ASCII码顺序排序\"></a>3. 字符串按照ASCII码顺序排序</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 字符串按照ASCII码顺序排序</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $str 字符串</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $sort 排序</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> string</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sortStr</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$str</span>, <span class=\"variable\">$sort</span>=SORT_ASC</span>): <span class=\"title\">string</span></span>{</span><br><span class=\"line\">    <span class=\"variable\">$arr</span> = <span class=\"title function_ invoke__\">str_split</span>(<span class=\"variable\">$str</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$sort</span> == SORT_ASC){</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">asort</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    }<span class=\"keyword\">else</span>{</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">arsort</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">join</span>(<span class=\"string\">''</span>, <span class=\"variable\">$arr</span>);</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"4-字节数转化为常用单位\"><a href=\"#4-字节数转化为常用单位\" class=\"headerlink\" title=\"4. 字节数转化为常用单位\"></a>4. 字节数转化为常用单位</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 字节数转化为常用单位</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $size 字节数</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> string</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">convert</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$size</span></span>): <span class=\"title\">string</span></span>{</span><br><span class=\"line\">    <span class=\"variable\">$unit</span> = [<span class=\"string\">'b'</span>, <span class=\"string\">'kb'</span>, <span class=\"string\">'mb'</span>, <span class=\"string\">'gb'</span>, <span class=\"string\">'tb'</span>, <span class=\"string\">'pb'</span>];</span><br><span class=\"line\">    <span class=\"variable\">$exp</span> = <span class=\"title function_ invoke__\">floor</span>(<span class=\"title function_ invoke__\">log</span>(<span class=\"variable\">$size</span>, <span class=\"number\">1024</span>));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">round</span>(<span class=\"variable\">$size</span> / <span class=\"title function_ invoke__\">pow</span>(<span class=\"number\">1024</span>, <span class=\"variable\">$exp</span>), <span class=\"number\">2</span>) . <span class=\"string\">' '</span> . <span class=\"variable\">$unit</span>[<span class=\"variable\">$exp</span>];</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"comment\">// 使用：查看内存使用 echo convert(memory_get_usage(false));</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"5-ping指定地址，用于监控服务器是否在线\"><a href=\"#5-ping指定地址，用于监控服务器是否在线\" class=\"headerlink\" title=\"5. ping指定地址，用于监控服务器是否在线\"></a>5. ping指定地址，用于监控服务器是否在线</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ping 指定地址</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $address</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> bool</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pingHost</span>(<span class=\"params\"><span class=\"variable\">$address</span></span>)</span>{</span><br><span class=\"line\">    <span class=\"variable\">$address</span> = <span class=\"title function_ invoke__\">parse_url</span>(<span class=\"variable\">$address</span>);</span><br><span class=\"line\">    <span class=\"variable\">$host</span> = <span class=\"keyword\">isset</span>(<span class=\"variable\">$address</span>[<span class=\"string\">'host'</span>]) ? <span class=\"variable\">$address</span>[<span class=\"string\">'host'</span>] : <span class=\"string\">''</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!<span class=\"variable\">$host</span>)  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"variable\">$status</span> = -<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">strcasecmp</span>(PHP_OS, <span class=\"string\">'WINNT'</span>) === <span class=\"number\">0</span>) {</span><br><span class=\"line\">        <span class=\"variable\">$rs</span> = <span class=\"title function_ invoke__\">exec</span>(<span class=\"string\">\"ping -n 1 <span class=\"subst\">{$host}</span>\"</span>, <span class=\"variable\">$outcome</span>, <span class=\"variable\">$status</span>);  <span class=\"comment\">// Windows 服务器下</span></span><br><span class=\"line\">    } <span class=\"keyword\">elseif</span> (<span class=\"title function_ invoke__\">strcasecmp</span>(PHP_OS, <span class=\"string\">'Linux'</span>) === <span class=\"number\">0</span>) {</span><br><span class=\"line\">        <span class=\"variable\">$rs</span> = <span class=\"title function_ invoke__\">exec</span>(<span class=\"string\">\"ping -c 1 <span class=\"subst\">{$host}</span>\"</span>, <span class=\"variable\">$outcome</span>, <span class=\"variable\">$status</span>);  <span class=\"comment\">// Linux 服务器下</span></span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$status</span>==<span class=\"number\">0</span> ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//$url = \"https://cloud.tencent.com/document/api/457/37184?id=232\";</span></span><br><span class=\"line\"><span class=\"comment\">//var_dump(pingHost($url));       //true</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"6-文本变量替换\"><a href=\"#6-文本变量替换\" class=\"headerlink\" title=\"6. 文本变量替换\"></a>6. 文本变量替换</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 变量替换</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $string 要进行替换的原始字符串</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $params 关联数组(包含需要替换的占位符和对应的值)</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> string</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replaceString</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$string</span>, <span class=\"keyword\">array</span> <span class=\"variable\">$params</span> = []</span>): <span class=\"title\">string</span></span></span><br><span class=\"line\"><span class=\"function\"></span>{</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> (<span class=\"variable\">$params</span> <span class=\"keyword\">as</span> <span class=\"variable\">$key</span> =&gt; <span class=\"variable\">$value</span>) {</span><br><span class=\"line\">        <span class=\"variable\">$placeholder</span> = <span class=\"string\">'{'</span> . <span class=\"variable\">$key</span> . <span class=\"string\">'}'</span>;</span><br><span class=\"line\">        <span class=\"variable\">$string</span> = <span class=\"title function_ invoke__\">str_replace</span>(<span class=\"variable\">$placeholder</span>, <span class=\"variable\">$value</span>, <span class=\"variable\">$string</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$string</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//    $string = 'Accumulated login {amount} days';</span></span><br><span class=\"line\"><span class=\"comment\">//    $params = ['amount' =&gt; 20];</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//    $result = replaceString($string, $params);</span></span><br><span class=\"line\"><span class=\"comment\">//    echo $result;  // 输出：Accumulated login 20 days</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"7-判断指定数字是否在区间里\"><a href=\"#7-判断指定数字是否在区间里\" class=\"headerlink\" title=\"7. 判断指定数字是否在区间里\"></a>7. 判断指定数字是否在区间里</h3><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 判断指定数字是否在区间里</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int|float $num    指定数字</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $interval  区间  支持格式：(,20)、[10,5)、【20.5,)、(-∞，50.1)、(-∞,+∞)、(,)</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> bool</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isInInterval</span>(<span class=\"params\"><span class=\"variable\">$num</span>, <span class=\"variable\">$interval</span></span>): <span class=\"title\">bool</span></span></span><br><span class=\"line\"><span class=\"function\"></span>{</span><br><span class=\"line\">    <span class=\"variable\">$pattern</span> = <span class=\"string\">'/^([\\[\\(])(-?∞|\\d*),(\\+?∞|\\d*)([\\]\\)])$/'</span>;</span><br><span class=\"line\">    <span class=\"variable\">$res</span> = <span class=\"title function_ invoke__\">preg_match</span>(<span class=\"variable\">$pattern</span>, <span class=\"variable\">$interval</span>, <span class=\"variable\">$matches</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"variable\">$res</span>)  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$leftBracket</span> = <span class=\"variable\">$matches</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"variable\">$leftNum</span> = <span class=\"variable\">$matches</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">    <span class=\"variable\">$rightNum</span> = <span class=\"variable\">$matches</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">    <span class=\"variable\">$rightBracket</span> = <span class=\"variable\">$matches</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$leftNum</span> !== <span class=\"string\">'∞'</span> &amp;&amp; <span class=\"variable\">$leftNum</span> !== <span class=\"string\">''</span>) {</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$leftBracket</span> == <span class=\"string\">'['</span>) {</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$num</span> &lt; <span class=\"variable\">$leftNum</span>) {</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            }</span><br><span class=\"line\">        } <span class=\"keyword\">else</span> {</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$num</span> &lt;= <span class=\"variable\">$leftNum</span>) {</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$rightNum</span> !== <span class=\"string\">'+∞'</span> &amp;&amp; <span class=\"variable\">$rightNum</span> !== <span class=\"string\">''</span>) {</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$rightBracket</span> == <span class=\"string\">']'</span>) {</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$num</span> &gt; <span class=\"variable\">$rightNum</span>) {</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            }</span><br><span class=\"line\">        } <span class=\"keyword\">else</span> {</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$num</span> &gt;= <span class=\"variable\">$rightNum</span>) {</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//    $num = 20;</span></span><br><span class=\"line\"><span class=\"comment\">//    $interval = \"(20,]\";</span></span><br><span class=\"line\"><span class=\"comment\">//    if (MathUtils::isInInterval($num, $interval)) {</span></span><br><span class=\"line\"><span class=\"comment\">//        echo \"数字 {$num} 在区间 {$interval} 中\";</span></span><br><span class=\"line\"><span class=\"comment\">//    } else {</span></span><br><span class=\"line\"><span class=\"comment\">//        echo \"数字 {$num} 不在区间 {$interval} 中\";</span></span><br><span class=\"line\"><span class=\"comment\">//    }</span></span><br></pre></td></tr></tbody></table></figure>","excerpt":"","more":"<h3 id=\"1-将字符串每隔n位显示一个指定字符\"><a href=\"#1-将字符串每隔n位显示一个指定字符\" class=\"headerlink\" title=\"1. 将字符串每隔n位显示一个指定字符\"></a>1. 将字符串每隔n位显示一个指定字符</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 将字符串每隔n位显示一个指定字符</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $str   原始字符串</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $n        间隔位数</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $d     分隔符</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> string       结果字符串</span></span><br><span class=\"line\"><span class=\"comment\"> * eg: ed4a32c2=&gt;ed:4a:32:c2</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">divisionStr</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$str</span>,<span class=\"keyword\">int</span> <span class=\"variable\">$n</span>,<span class=\"keyword\">string</span> <span class=\"variable\">$d</span>=<span class=\"string\">&quot; &quot;</span></span>):<span class=\"title\">string</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">join</span>(<span class=\"variable\">$d</span>,<span class=\"title function_ invoke__\">str_split</span>(<span class=\"variable\">$str</span>,<span class=\"variable\">$n</span>)));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-打印图片的每一个像素颜色值\"><a href=\"#2-打印图片的每一个像素颜色值\" class=\"headerlink\" title=\"2. 打印图片的每一个像素颜色值\"></a>2. 打印图片的每一个像素颜色值</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 打印图片的每一个像素颜色值</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $picUrl    图片路径</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">printPicPixels</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$picUrl</span></span>): <span class=\"title\">void</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$i</span> = <span class=\"title function_ invoke__\">imagecreatefrompng</span>(<span class=\"variable\">$picUrl</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"variable\">$i</span>)    <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"variable\">$y</span> = <span class=\"number\">0</span>; <span class=\"variable\">$y</span> &lt; <span class=\"title function_ invoke__\">imagesy</span>(<span class=\"variable\">$i</span>); <span class=\"variable\">$y</span>++) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$x</span> = <span class=\"number\">0</span>; <span class=\"variable\">$x</span> &lt; <span class=\"title function_ invoke__\">imagesx</span>(<span class=\"variable\">$i</span>); <span class=\"variable\">$x</span>++) &#123;</span><br><span class=\"line\">            <span class=\"variable\">$rgb</span> = <span class=\"title function_ invoke__\">imagecolorat</span>(<span class=\"variable\">$i</span>, <span class=\"variable\">$x</span>, <span class=\"variable\">$y</span>);</span><br><span class=\"line\">            <span class=\"variable\">$r</span> = (<span class=\"variable\">$rgb</span> &gt;&gt; <span class=\"number\">16</span>) &amp; <span class=\"number\">0xFF</span>;</span><br><span class=\"line\">            <span class=\"variable\">$g</span> = (<span class=\"variable\">$rgb</span> &gt;&gt; <span class=\"number\">8</span>) &amp; <span class=\"number\">0xFF</span>;</span><br><span class=\"line\">            <span class=\"variable\">$b</span> = <span class=\"variable\">$rgb</span> &amp; <span class=\"number\">0xFF</span>;</span><br><span class=\"line\">            <span class=\"keyword\">echo</span> <span class=\"string\">&quot;rgb(<span class=\"subst\">$r</span>,<span class=\"subst\">$g</span>,<span class=\"subst\">$b</span>)&quot;</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-字符串按照ASCII码顺序排序\"><a href=\"#3-字符串按照ASCII码顺序排序\" class=\"headerlink\" title=\"3. 字符串按照ASCII码顺序排序\"></a>3. 字符串按照ASCII码顺序排序</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 字符串按照ASCII码顺序排序</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $str 字符串</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $sort 排序</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> string</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sortStr</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$str</span>, <span class=\"variable\">$sort</span>=SORT_ASC</span>): <span class=\"title\">string</span></span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$arr</span> = <span class=\"title function_ invoke__\">str_split</span>(<span class=\"variable\">$str</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$sort</span> == SORT_ASC)&#123;</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">asort</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">arsort</span>(<span class=\"variable\">$arr</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">join</span>(<span class=\"string\">&#x27;&#x27;</span>, <span class=\"variable\">$arr</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-字节数转化为常用单位\"><a href=\"#4-字节数转化为常用单位\" class=\"headerlink\" title=\"4. 字节数转化为常用单位\"></a>4. 字节数转化为常用单位</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 字节数转化为常用单位</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int $size 字节数</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> string</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">convert</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$size</span></span>): <span class=\"title\">string</span></span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$unit</span> = [<span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;kb&#x27;</span>, <span class=\"string\">&#x27;mb&#x27;</span>, <span class=\"string\">&#x27;gb&#x27;</span>, <span class=\"string\">&#x27;tb&#x27;</span>, <span class=\"string\">&#x27;pb&#x27;</span>];</span><br><span class=\"line\">    <span class=\"variable\">$exp</span> = <span class=\"title function_ invoke__\">floor</span>(<span class=\"title function_ invoke__\">log</span>(<span class=\"variable\">$size</span>, <span class=\"number\">1024</span>));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">round</span>(<span class=\"variable\">$size</span> / <span class=\"title function_ invoke__\">pow</span>(<span class=\"number\">1024</span>, <span class=\"variable\">$exp</span>), <span class=\"number\">2</span>) . <span class=\"string\">&#x27; &#x27;</span> . <span class=\"variable\">$unit</span>[<span class=\"variable\">$exp</span>];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 使用：查看内存使用 echo convert(memory_get_usage(false));</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"5-ping指定地址，用于监控服务器是否在线\"><a href=\"#5-ping指定地址，用于监控服务器是否在线\" class=\"headerlink\" title=\"5. ping指定地址，用于监控服务器是否在线\"></a>5. ping指定地址，用于监控服务器是否在线</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ping 指定地址</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $address</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> bool</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pingHost</span>(<span class=\"params\"><span class=\"variable\">$address</span></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$address</span> = <span class=\"title function_ invoke__\">parse_url</span>(<span class=\"variable\">$address</span>);</span><br><span class=\"line\">    <span class=\"variable\">$host</span> = <span class=\"keyword\">isset</span>(<span class=\"variable\">$address</span>[<span class=\"string\">&#x27;host&#x27;</span>]) ? <span class=\"variable\">$address</span>[<span class=\"string\">&#x27;host&#x27;</span>] : <span class=\"string\">&#x27;&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!<span class=\"variable\">$host</span>)  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"variable\">$status</span> = -<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">strcasecmp</span>(PHP_OS, <span class=\"string\">&#x27;WINNT&#x27;</span>) === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable\">$rs</span> = <span class=\"title function_ invoke__\">exec</span>(<span class=\"string\">&quot;ping -n 1 <span class=\"subst\">&#123;$host&#125;</span>&quot;</span>, <span class=\"variable\">$outcome</span>, <span class=\"variable\">$status</span>);  <span class=\"comment\">// Windows 服务器下</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">elseif</span> (<span class=\"title function_ invoke__\">strcasecmp</span>(PHP_OS, <span class=\"string\">&#x27;Linux&#x27;</span>) === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable\">$rs</span> = <span class=\"title function_ invoke__\">exec</span>(<span class=\"string\">&quot;ping -c 1 <span class=\"subst\">&#123;$host&#125;</span>&quot;</span>, <span class=\"variable\">$outcome</span>, <span class=\"variable\">$status</span>);  <span class=\"comment\">// Linux 服务器下</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$status</span>==<span class=\"number\">0</span> ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//$url = &quot;https://cloud.tencent.com/document/api/457/37184?id=232&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">//var_dump(pingHost($url));       //true</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"6-文本变量替换\"><a href=\"#6-文本变量替换\" class=\"headerlink\" title=\"6. 文本变量替换\"></a>6. 文本变量替换</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 变量替换</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $string 要进行替换的原始字符串</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> array $params 关联数组(包含需要替换的占位符和对应的值)</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> string</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replaceString</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$string</span>, <span class=\"keyword\">array</span> <span class=\"variable\">$params</span> = []</span>): <span class=\"title\">string</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">foreach</span> (<span class=\"variable\">$params</span> <span class=\"keyword\">as</span> <span class=\"variable\">$key</span> =&gt; <span class=\"variable\">$value</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable\">$placeholder</span> = <span class=\"string\">&#x27;&#123;&#x27;</span> . <span class=\"variable\">$key</span> . <span class=\"string\">&#x27;&#125;&#x27;</span>;</span><br><span class=\"line\">        <span class=\"variable\">$string</span> = <span class=\"title function_ invoke__\">str_replace</span>(<span class=\"variable\">$placeholder</span>, <span class=\"variable\">$value</span>, <span class=\"variable\">$string</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable\">$string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//    $string = &#x27;Accumulated login &#123;amount&#125; days&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">//    $params = [&#x27;amount&#x27; =&gt; 20];</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//    $result = replaceString($string, $params);</span></span><br><span class=\"line\"><span class=\"comment\">//    echo $result;  // 输出：Accumulated login 20 days</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"7-判断指定数字是否在区间里\"><a href=\"#7-判断指定数字是否在区间里\" class=\"headerlink\" title=\"7. 判断指定数字是否在区间里\"></a>7. 判断指定数字是否在区间里</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 判断指定数字是否在区间里</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> int|float $num    指定数字</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> string $interval  区间  支持格式：(,20)、[10,5)、【20.5,)、(-∞，50.1)、(-∞,+∞)、(,)</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> bool</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isInInterval</span>(<span class=\"params\"><span class=\"variable\">$num</span>, <span class=\"variable\">$interval</span></span>): <span class=\"title\">bool</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"variable\">$pattern</span> = <span class=\"string\">&#x27;/^([\\[\\(])(-?∞|\\d*),(\\+?∞|\\d*)([\\]\\)])$/&#x27;</span>;</span><br><span class=\"line\">    <span class=\"variable\">$res</span> = <span class=\"title function_ invoke__\">preg_match</span>(<span class=\"variable\">$pattern</span>, <span class=\"variable\">$interval</span>, <span class=\"variable\">$matches</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"variable\">$res</span>)  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"variable\">$leftBracket</span> = <span class=\"variable\">$matches</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"variable\">$leftNum</span> = <span class=\"variable\">$matches</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">    <span class=\"variable\">$rightNum</span> = <span class=\"variable\">$matches</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">    <span class=\"variable\">$rightBracket</span> = <span class=\"variable\">$matches</span>[<span class=\"number\">4</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$leftNum</span> !== <span class=\"string\">&#x27;∞&#x27;</span> &amp;&amp; <span class=\"variable\">$leftNum</span> !== <span class=\"string\">&#x27;&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$leftBracket</span> == <span class=\"string\">&#x27;[&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$num</span> &lt; <span class=\"variable\">$leftNum</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$num</span> &lt;= <span class=\"variable\">$leftNum</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"variable\">$rightNum</span> !== <span class=\"string\">&#x27;+∞&#x27;</span> &amp;&amp; <span class=\"variable\">$rightNum</span> !== <span class=\"string\">&#x27;&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable\">$rightBracket</span> == <span class=\"string\">&#x27;]&#x27;</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$num</span> &gt; <span class=\"variable\">$rightNum</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"variable\">$num</span> &gt;= <span class=\"variable\">$rightNum</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//    $num = 20;</span></span><br><span class=\"line\"><span class=\"comment\">//    $interval = &quot;(20,]&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">//    if (MathUtils::isInInterval($num, $interval)) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//        echo &quot;数字 &#123;$num&#125; 在区间 &#123;$interval&#125; 中&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">//    &#125; else &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//        echo &quot;数字 &#123;$num&#125; 不在区间 &#123;$interval&#125; 中&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">//    &#125;</span></span><br></pre></td></tr></table></figure>"},{"title":"详解php.ini","abbrlink":"php-ini-config","date":"2020-07-12T11:44:25.000Z","updated":"2020-07-12T11:44:25.000Z","_content":"\n1. safe_mode_exec_dir \n    设置安全模式下脚本可执行的目录，如果要通过popen()、system()、exec()等执行脚本，则该脚本需放在本配置设置的目录下。","source":"_posts/PHP/其他/详解php.ini.md","raw":"---\ntitle: 详解php.ini\ntags: [PHP]\ncategories: [PHP]\nabbrlink: 'php-ini-config'\ndate: 2020-07-12 19:44:25\nupdated: 2020-07-12 19:44:25\n---\n\n1. safe_mode_exec_dir \n    设置安全模式下脚本可执行的目录，如果要通过popen()、system()、exec()等执行脚本，则该脚本需放在本配置设置的目录下。","slug":"PHP/其他/详解php.ini","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v40086oshggsrl9o2r","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li>safe_mode_exec_dir<br> 设置安全模式下脚本可执行的目录，如果要通过popen()、system()、exec()等执行脚本，则该脚本需放在本配置设置的目录下。</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li>safe_mode_exec_dir<br> 设置安全模式下脚本可执行的目录，如果要通过popen()、system()、exec()等执行脚本，则该脚本需放在本配置设置的目录下。</li>\n</ol>\n"},{"title":"Excel使用小技巧","abbrlink":"e939ff3c","date":"2019-10-26T06:16:36.000Z","updated":"2019-10-26T06:16:36.000Z","_content":"\n### 1. excel固定第一行：\n选择第二行，点击视图里的冻结窗口即可。\n\n### 2. excel分列：\n\t如：将某一列的数据由C4159D5953D8转为C4:15:9D:59:53:D8格式：\n```shell\n# 公式为\n=left(A1,2) & \":\" & mid(A1,3,2) & \":\" & mid(A1,5,2) & \":\" & mid(A1,7,2) & \":\" & mid(A1,9,2) & \":\" & right(A1,2)\n```\n### 3. 删除重复项：\n    选中数据区域->数据->删除重复项->确定\n    \n### 4. VLOOKUP函数的使用","source":"_posts/Windows/Excel/Excel使用小技巧.md","raw":"---\ntitle: Excel使用小技巧\ntags: [Excel]\ncategories: Windows\nabbrlink: e939ff3c\ndate: 2019-10-26 14:16:36\nupdated: 2019-10-26 14:16:36\n---\n\n### 1. excel固定第一行：\n选择第二行，点击视图里的冻结窗口即可。\n\n### 2. excel分列：\n\t如：将某一列的数据由C4159D5953D8转为C4:15:9D:59:53:D8格式：\n```shell\n# 公式为\n=left(A1,2) & \":\" & mid(A1,3,2) & \":\" & mid(A1,5,2) & \":\" & mid(A1,7,2) & \":\" & mid(A1,9,2) & \":\" & right(A1,2)\n```\n### 3. 删除重复项：\n    选中数据区域->数据->删除重复项->确定\n    \n### 4. VLOOKUP函数的使用","slug":"Windows/Excel/Excel使用小技巧","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v5008aoshg1e3i5ipj","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-excel固定第一行：\"><a href=\"#1-excel固定第一行：\" class=\"headerlink\" title=\"1. excel固定第一行：\"></a>1. excel固定第一行：</h3><p>选择第二行，点击视图里的冻结窗口即可。</p>\n<h3 id=\"2-excel分列：\"><a href=\"#2-excel分列：\" class=\"headerlink\" title=\"2. excel分列：\"></a>2. excel分列：</h3><pre><code>如：将某一列的数据由C4159D5953D8转为C4:15:9D:59:53:D8格式：\n</code></pre><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">公式为</span></span><br><span class=\"line\">=left(A1,2) &amp; \":\" &amp; mid(A1,3,2) &amp; \":\" &amp; mid(A1,5,2) &amp; \":\" &amp; mid(A1,7,2) &amp; \":\" &amp; mid(A1,9,2) &amp; \":\" &amp; right(A1,2)</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"3-删除重复项：\"><a href=\"#3-删除重复项：\" class=\"headerlink\" title=\"3. 删除重复项：\"></a>3. 删除重复项：</h3><pre><code>选中数据区域-&gt;数据-&gt;删除重复项-&gt;确定\n</code></pre><h3 id=\"4-VLOOKUP函数的使用\"><a href=\"#4-VLOOKUP函数的使用\" class=\"headerlink\" title=\"4. VLOOKUP函数的使用\"></a>4. VLOOKUP函数的使用</h3>","excerpt":"","more":"<h3 id=\"1-excel固定第一行：\"><a href=\"#1-excel固定第一行：\" class=\"headerlink\" title=\"1. excel固定第一行：\"></a>1. excel固定第一行：</h3><p>选择第二行，点击视图里的冻结窗口即可。</p>\n<h3 id=\"2-excel分列：\"><a href=\"#2-excel分列：\" class=\"headerlink\" title=\"2. excel分列：\"></a>2. excel分列：</h3><pre><code>如：将某一列的数据由C4159D5953D8转为C4:15:9D:59:53:D8格式：\n</code></pre><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">公式为</span></span><br><span class=\"line\">=left(A1,2) &amp; &quot;:&quot; &amp; mid(A1,3,2) &amp; &quot;:&quot; &amp; mid(A1,5,2) &amp; &quot;:&quot; &amp; mid(A1,7,2) &amp; &quot;:&quot; &amp; mid(A1,9,2) &amp; &quot;:&quot; &amp; right(A1,2)</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-删除重复项：\"><a href=\"#3-删除重复项：\" class=\"headerlink\" title=\"3. 删除重复项：\"></a>3. 删除重复项：</h3><pre><code>选中数据区域-&gt;数据-&gt;删除重复项-&gt;确定\n</code></pre><h3 id=\"4-VLOOKUP函数的使用\"><a href=\"#4-VLOOKUP函数的使用\" class=\"headerlink\" title=\"4. VLOOKUP函数的使用\"></a>4. VLOOKUP函数的使用</h3>"},{"title":"Windows下如何将桌面位置移到其他地方","abbrlink":"windows-move-desktop","date":"2022-08-29T03:06:15.000Z","updated":"2022-08-29T03:06:15.000Z","_content":"\n<div class=\"note info\">一般windows系统的桌面都是放在C盘里的，如果桌面内容过多就会导致C盘空间不足。为了保证电脑的干净整洁，除了需要定期清理桌面内容，其实我们还可以把桌面移动到其他地方。</div>\n\n1. 在\"快速访问\"里找到桌面\n![](/images/window_move_desktop_1.png)\n2. 右键\"属性\"，在\"位置\"栏点击\"移动\"，选择目录，我这里选择事先创建的空文件夹(D:\\desktop)，然后点击\"应用\"\n![](/images/window_move_desktop_2.png)\n3. 然后点击\"是\"\n![](/images/window_move_desktop_3.png)\n4. 桌面内容开始移动，待移动完成，点击\"确定\"即可\n![](/images/window_move_desktop_4.png)\n5. 我们现在在`D:\\desktop`就可以看到桌面的内容了。\n![](/images/window_move_desktop_5.png)\n","source":"_posts/Windows/其他/Windows下如何将桌面位置移到其他地方.md","raw":"---\ntitle: Windows下如何将桌面位置移到其他地方\ntags: [Windows]\ncategories: Windows\nabbrlink: 'windows-move-desktop'\ndate: 2022-08-29 11:06:15\nupdated: 2022-08-29 11:06:15\n---\n\n<div class=\"note info\">一般windows系统的桌面都是放在C盘里的，如果桌面内容过多就会导致C盘空间不足。为了保证电脑的干净整洁，除了需要定期清理桌面内容，其实我们还可以把桌面移动到其他地方。</div>\n\n1. 在\"快速访问\"里找到桌面\n![](/images/window_move_desktop_1.png)\n2. 右键\"属性\"，在\"位置\"栏点击\"移动\"，选择目录，我这里选择事先创建的空文件夹(D:\\desktop)，然后点击\"应用\"\n![](/images/window_move_desktop_2.png)\n3. 然后点击\"是\"\n![](/images/window_move_desktop_3.png)\n4. 桌面内容开始移动，待移动完成，点击\"确定\"即可\n![](/images/window_move_desktop_4.png)\n5. 我们现在在`D:\\desktop`就可以看到桌面的内容了。\n![](/images/window_move_desktop_5.png)\n","slug":"Windows/其他/Windows下如何将桌面位置移到其他地方","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v6008coshg238o9h3a","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">一般windows系统的桌面都是放在C盘里的，如果桌面内容过多就会导致C盘空间不足。为了保证电脑的干净整洁，除了需要定期清理桌面内容，其实我们还可以把桌面移动到其他地方。</div>\n\n<ol>\n<li>在”快速访问”里找到桌面<br><img src=\"/images/window_move_desktop_1.png\" alt=\"\"></li>\n<li>右键”属性”，在”位置”栏点击”移动”，选择目录，我这里选择事先创建的空文件夹(D:\\desktop)，然后点击”应用”<br><img src=\"/images/window_move_desktop_2.png\" alt=\"\"></li>\n<li>然后点击”是”<br><img src=\"/images/window_move_desktop_3.png\" alt=\"\"></li>\n<li>桌面内容开始移动，待移动完成，点击”确定”即可<br><img src=\"/images/window_move_desktop_4.png\" alt=\"\"></li>\n<li>我们现在在<code>D:\\desktop</code>就可以看到桌面的内容了。<br><img src=\"/images/window_move_desktop_5.png\" alt=\"\"></li>\n</ol>\n","excerpt":"","more":"<div class=\"note info\">一般windows系统的桌面都是放在C盘里的，如果桌面内容过多就会导致C盘空间不足。为了保证电脑的干净整洁，除了需要定期清理桌面内容，其实我们还可以把桌面移动到其他地方。</div>\n\n<ol>\n<li>在”快速访问”里找到桌面<br><img src=\"/images/window_move_desktop_1.png\" alt></li>\n<li>右键”属性”，在”位置”栏点击”移动”，选择目录，我这里选择事先创建的空文件夹(D:\\desktop)，然后点击”应用”<br><img src=\"/images/window_move_desktop_2.png\" alt></li>\n<li>然后点击”是”<br><img src=\"/images/window_move_desktop_3.png\" alt></li>\n<li>桌面内容开始移动，待移动完成，点击”确定”即可<br><img src=\"/images/window_move_desktop_4.png\" alt></li>\n<li>我们现在在<code>D:\\desktop</code>就可以看到桌面的内容了。<br><img src=\"/images/window_move_desktop_5.png\" alt></li>\n</ol>\n"},{"title":"Windows下快捷键使用","abbrlink":"windows-short-cut","date":"2022-04-25T09:29:40.000Z","updated":"2022-04-25T09:29:40.000Z","_content":"\n1. 通过Tab键可以在当前界面将光标向下切换，Tab+Shift是向上切换。","source":"_posts/Windows/其他/Windows下快捷键使用.md","raw":"---\ntitle: Windows下快捷键使用\ntags: [Windows]\ncategories: Windows\nabbrlink: 'windows-short-cut'\ndate: 2022-04-25 17:29:40\nupdated: 2022-04-25 17:29:40\n---\n\n1. 通过Tab键可以在当前界面将光标向下切换，Tab+Shift是向上切换。","slug":"Windows/其他/Windows下快捷键使用","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v6008goshg0uga0rri","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li>通过Tab键可以在当前界面将光标向下切换，Tab+Shift是向上切换。</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li>通过Tab键可以在当前界面将光标向下切换，Tab+Shift是向上切换。</li>\n</ol>\n"},{"title":"Windows下快速拆分txt文件","abbrlink":"windows-quick-split-file","date":"2022-05-08T08:37:12.000Z","updated":"2022-05-08T08:37:12.000Z","_content":"有时候，需要把一个大的txt文件拆分为多个小文件，并行处理文件里的内容，来提高工作效率。下面介绍一下在windows下的拆分方法。\n\n现在有个a.txt文件，里面有若干行内容，现要拆分为多个小文件\n![](/images/split_txt_1.png)\n\n## 操作步骤\n### 1、在文件所在目录打开git bash；\n### 2、创建一个文件夹\n![](/images/split_txt_2.png)\n### 3、执行命令\n``` bash\nsplit -l 5 -d -a 1 a.txt tmp/m_ && cd tmp/ && ls|grep m_|xargs -n1 -i{} mv  {} {}.txt\n``` \n命令分解：\n``` bash\n-l 5 ：按行分割，每个文件5行\n-d ：添加数字后缀，如00,01\n-a 1 : 用一位数据来顺序命名(从0开始)\ntmp/ ：拆分后的文件放在tmp目录下\nm_ ：拆分后的文件名前缀\n&& cd tmp/ && ls|grep m_|xargs -n1 -i{} mv  {} {}.txt ：进入tmp目录，对拆分后的文件添加扩展名txt(默认生成的文件是没有扩展名的)\n``` \n### 4、在tmp目录下就看到生成的文件了\n![](/images/split_txt_3.png)\n\n注：对xlsx文件拆分有问题","source":"_posts/Windows/其他/Windows下快速拆分txt文件.md","raw":"---\ntitle: Windows下快速拆分txt文件\ntags: [Windows]\ncategories: Windows\nabbrlink: 'windows-quick-split-file'\ndate: 2022-05-08 16:37:12\nupdated: 2022-05-08 16:37:12\n---\n有时候，需要把一个大的txt文件拆分为多个小文件，并行处理文件里的内容，来提高工作效率。下面介绍一下在windows下的拆分方法。\n\n现在有个a.txt文件，里面有若干行内容，现要拆分为多个小文件\n![](/images/split_txt_1.png)\n\n## 操作步骤\n### 1、在文件所在目录打开git bash；\n### 2、创建一个文件夹\n![](/images/split_txt_2.png)\n### 3、执行命令\n``` bash\nsplit -l 5 -d -a 1 a.txt tmp/m_ && cd tmp/ && ls|grep m_|xargs -n1 -i{} mv  {} {}.txt\n``` \n命令分解：\n``` bash\n-l 5 ：按行分割，每个文件5行\n-d ：添加数字后缀，如00,01\n-a 1 : 用一位数据来顺序命名(从0开始)\ntmp/ ：拆分后的文件放在tmp目录下\nm_ ：拆分后的文件名前缀\n&& cd tmp/ && ls|grep m_|xargs -n1 -i{} mv  {} {}.txt ：进入tmp目录，对拆分后的文件添加扩展名txt(默认生成的文件是没有扩展名的)\n``` \n### 4、在tmp目录下就看到生成的文件了\n![](/images/split_txt_3.png)\n\n注：对xlsx文件拆分有问题","slug":"Windows/其他/Windows下快速拆分txt文件","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v7008joshg6jq8bido","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>有时候，需要把一个大的txt文件拆分为多个小文件，并行处理文件里的内容，来提高工作效率。下面介绍一下在windows下的拆分方法。</p>\n<p>现在有个a.txt文件，里面有若干行内容，现要拆分为多个小文件<br><img src=\"/images/split_txt_1.png\" alt=\"\"></p>\n<h2 id=\"操作步骤\"><a href=\"#操作步骤\" class=\"headerlink\" title=\"操作步骤\"></a>操作步骤</h2><h3 id=\"1、在文件所在目录打开git-bash；\"><a href=\"#1、在文件所在目录打开git-bash；\" class=\"headerlink\" title=\"1、在文件所在目录打开git bash；\"></a>1、在文件所在目录打开git bash；</h3><h3 id=\"2、创建一个文件夹\"><a href=\"#2、创建一个文件夹\" class=\"headerlink\" title=\"2、创建一个文件夹\"></a>2、创建一个文件夹</h3><p><img src=\"/images/split_txt_2.png\" alt=\"\"></p>\n<h3 id=\"3、执行命令\"><a href=\"#3、执行命令\" class=\"headerlink\" title=\"3、执行命令\"></a>3、执行命令</h3><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">split</span> -l 5 -d -a 1 a.txt tmp/m_ &amp;&amp; <span class=\"built_in\">cd</span> tmp/ &amp;&amp; <span class=\"built_in\">ls</span>|grep m_|xargs -n1 -i{} <span class=\"built_in\">mv</span>  {} {}.txt</span><br></pre></td></tr></tbody></table></figure>\n<p>命令分解：<br></p><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-l 5 ：按行分割，每个文件5行</span><br><span class=\"line\">-d ：添加数字后缀，如00,01</span><br><span class=\"line\">-a 1 : 用一位数据来顺序命名(从0开始)</span><br><span class=\"line\">tmp/ ：拆分后的文件放在tmp目录下</span><br><span class=\"line\">m_ ：拆分后的文件名前缀</span><br><span class=\"line\">&amp;&amp; <span class=\"built_in\">cd</span> tmp/ &amp;&amp; <span class=\"built_in\">ls</span>|grep m_|xargs -n1 -i{} <span class=\"built_in\">mv</span>  {} {}.txt ：进入tmp目录，对拆分后的文件添加扩展名txt(默认生成的文件是没有扩展名的)</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h3 id=\"4、在tmp目录下就看到生成的文件了\"><a href=\"#4、在tmp目录下就看到生成的文件了\" class=\"headerlink\" title=\"4、在tmp目录下就看到生成的文件了\"></a>4、在tmp目录下就看到生成的文件了</h3><p><img src=\"/images/split_txt_3.png\" alt=\"\"></p>\n<p>注：对xlsx文件拆分有问题</p>\n","excerpt":"","more":"<p>有时候，需要把一个大的txt文件拆分为多个小文件，并行处理文件里的内容，来提高工作效率。下面介绍一下在windows下的拆分方法。</p>\n<p>现在有个a.txt文件，里面有若干行内容，现要拆分为多个小文件<br><img src=\"/images/split_txt_1.png\" alt></p>\n<h2 id=\"操作步骤\"><a href=\"#操作步骤\" class=\"headerlink\" title=\"操作步骤\"></a>操作步骤</h2><h3 id=\"1、在文件所在目录打开git-bash；\"><a href=\"#1、在文件所在目录打开git-bash；\" class=\"headerlink\" title=\"1、在文件所在目录打开git bash；\"></a>1、在文件所在目录打开git bash；</h3><h3 id=\"2、创建一个文件夹\"><a href=\"#2、创建一个文件夹\" class=\"headerlink\" title=\"2、创建一个文件夹\"></a>2、创建一个文件夹</h3><p><img src=\"/images/split_txt_2.png\" alt></p>\n<h3 id=\"3、执行命令\"><a href=\"#3、执行命令\" class=\"headerlink\" title=\"3、执行命令\"></a>3、执行命令</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">split</span> -l 5 -d -a 1 a.txt tmp/m_ &amp;&amp; <span class=\"built_in\">cd</span> tmp/ &amp;&amp; <span class=\"built_in\">ls</span>|grep m_|xargs -n1 -i&#123;&#125; <span class=\"built_in\">mv</span>  &#123;&#125; &#123;&#125;.txt</span><br></pre></td></tr></table></figure>\n<p>命令分解：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-l 5 ：按行分割，每个文件5行</span><br><span class=\"line\">-d ：添加数字后缀，如00,01</span><br><span class=\"line\">-a 1 : 用一位数据来顺序命名(从0开始)</span><br><span class=\"line\">tmp/ ：拆分后的文件放在tmp目录下</span><br><span class=\"line\">m_ ：拆分后的文件名前缀</span><br><span class=\"line\">&amp;&amp; <span class=\"built_in\">cd</span> tmp/ &amp;&amp; <span class=\"built_in\">ls</span>|grep m_|xargs -n1 -i&#123;&#125; <span class=\"built_in\">mv</span>  &#123;&#125; &#123;&#125;.txt ：进入tmp目录，对拆分后的文件添加扩展名txt(默认生成的文件是没有扩展名的)</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"4、在tmp目录下就看到生成的文件了\"><a href=\"#4、在tmp目录下就看到生成的文件了\" class=\"headerlink\" title=\"4、在tmp目录下就看到生成的文件了\"></a>4、在tmp目录下就看到生成的文件了</h3><p><img src=\"/images/split_txt_3.png\" alt></p>\n<p>注：对xlsx文件拆分有问题</p>\n"},{"title":"Windows下电脑截图","abbrlink":"windows-screen-shot","date":"2022-03-20T01:25:08.000Z","updated":"2022-03-20T01:25:08.000Z","_content":"1、QQ截图：`ctrl+alt+A`\n2、花式截图：`Win+shift+S`  可截任意形状\n3、微信截图：`Alt+A`\n4、浏览器截图：`Ctrl+shift+X`\n5、WPS截图：`Ctrl+Alt+X ` ","source":"_posts/Windows/其他/Windows下电脑截图.md","raw":"---\ntitle: Windows下电脑截图\ntags: [Windows]\ncategories: Windows\nabbrlink: 'windows-screen-shot'\ndate: 2022-03-20 09:25:08\nupdated: 2022-03-20 09:25:08\n---\n1、QQ截图：`ctrl+alt+A`\n2、花式截图：`Win+shift+S`  可截任意形状\n3、微信截图：`Alt+A`\n4、浏览器截图：`Ctrl+shift+X`\n5、WPS截图：`Ctrl+Alt+X ` ","slug":"Windows/其他/Windows下电脑截图","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v7008koshg1gx6gti9","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>1、QQ截图：<code>ctrl+alt+A</code><br>2、花式截图：<code>Win+shift+S</code>  可截任意形状<br>3、微信截图：<code>Alt+A</code><br>4、浏览器截图：<code>Ctrl+shift+X</code><br>5、WPS截图：<code>Ctrl+Alt+X</code> </p>\n","excerpt":"","more":"<p>1、QQ截图：<code>ctrl+alt+A</code><br>2、花式截图：<code>Win+shift+S</code>  可截任意形状<br>3、微信截图：<code>Alt+A</code><br>4、浏览器截图：<code>Ctrl+shift+X</code><br>5、WPS截图：<code>Ctrl+Alt+X</code> </p>\n"},{"title":"目标管理","abbrlink":"target-management","date":"2021-12-31T04:10:00.000Z","updated":"2021-12-31T04:10:00.000Z","_content":"\n## 目标管理\n## 向上管理\n## 向下负责\n## 激励团队","source":"_posts/技术管理/团队管理/目标管理.md","raw":"---\ntitle: 目标管理\ntags: [目标管理]\ncategories: [技术管理]\nabbrlink: 'target-management'\ndate: 2021-12-31 12:10:00\nupdated: 2021-12-31 12:10:00\n---\n\n## 目标管理\n## 向上管理\n## 向下负责\n## 激励团队","slug":"技术管理/团队管理/目标管理","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v8008poshgf2013cdu","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"目标管理\"><a href=\"#目标管理\" class=\"headerlink\" title=\"目标管理\"></a>目标管理</h2><h2 id=\"向上管理\"><a href=\"#向上管理\" class=\"headerlink\" title=\"向上管理\"></a>向上管理</h2><h2 id=\"向下负责\"><a href=\"#向下负责\" class=\"headerlink\" title=\"向下负责\"></a>向下负责</h2><h2 id=\"激励团队\"><a href=\"#激励团队\" class=\"headerlink\" title=\"激励团队\"></a>激励团队</h2>","excerpt":"","more":"<h2 id=\"目标管理\"><a href=\"#目标管理\" class=\"headerlink\" title=\"目标管理\"></a>目标管理</h2><h2 id=\"向上管理\"><a href=\"#向上管理\" class=\"headerlink\" title=\"向上管理\"></a>向上管理</h2><h2 id=\"向下负责\"><a href=\"#向下负责\" class=\"headerlink\" title=\"向下负责\"></a>向下负责</h2><h2 id=\"激励团队\"><a href=\"#激励团队\" class=\"headerlink\" title=\"激励团队\"></a>激励团队</h2>"},{"title":"领导与下属交往之道","abbrlink":"relation-between-leaders-and-staffs","date":"2019-10-24T03:32:00.000Z","updated":"2019-10-24T03:32:00.000Z","_content":"\n1. 非工作时间，不要拿工作上的事来打压威胁下属；这会让下属心生反感。\n    如：领导让下属帮忙做某件事情，下属不肯，领导就说以后所有的工作都指派给你，升职加薪想都别想……\n    \n2. 对下属不好分配任务，工期评估过长，如何处理？\n    - 不要口头安排任务，引入任务管理系统，设置好截止日期，需求描述清楚，通知下属及时完成；\n    - 评估每个任务的标准产出(行业中等偏上水平的一个员工完成某个任务所需的时间)，由于每个任务有大小难易之分，所以要私下评估出每个任务的标准产出；如果无法评估，那就按照自己的水平来评估即可，即：假设自己来做这个任务需要花多少时间，就是标准产出时间。\n    - 定期对每个员工的标准产出进行统计，结合员工级别、薪资、工作时间和标准产出就可以对大家的状态有个清晰的认识了。\n    ![](/images/tec_manage_1.png)\n    从上面的统计中，很容易就能看出谁是老油条了","source":"_posts/技术管理/团队管理/领导与下属交往之道.md","raw":"---\ntitle: 领导与下属交往之道\ntags: [职场之道]\ncategories: [技术管理]\nabbrlink: 'relation-between-leaders-and-staffs'\ndate: 2019-10-24 11:32:00\nupdated: 2019-10-24 11:32:00\n---\n\n1. 非工作时间，不要拿工作上的事来打压威胁下属；这会让下属心生反感。\n    如：领导让下属帮忙做某件事情，下属不肯，领导就说以后所有的工作都指派给你，升职加薪想都别想……\n    \n2. 对下属不好分配任务，工期评估过长，如何处理？\n    - 不要口头安排任务，引入任务管理系统，设置好截止日期，需求描述清楚，通知下属及时完成；\n    - 评估每个任务的标准产出(行业中等偏上水平的一个员工完成某个任务所需的时间)，由于每个任务有大小难易之分，所以要私下评估出每个任务的标准产出；如果无法评估，那就按照自己的水平来评估即可，即：假设自己来做这个任务需要花多少时间，就是标准产出时间。\n    - 定期对每个员工的标准产出进行统计，结合员工级别、薪资、工作时间和标准产出就可以对大家的状态有个清晰的认识了。\n    ![](/images/tec_manage_1.png)\n    从上面的统计中，很容易就能看出谁是老油条了","slug":"技术管理/团队管理/领导与下属交往之道","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2v9008qoshg61zzdv2s","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li><p>非工作时间，不要拿工作上的事来打压威胁下属；这会让下属心生反感。<br> 如：领导让下属帮忙做某件事情，下属不肯，领导就说以后所有的工作都指派给你，升职加薪想都别想……</p>\n</li>\n<li><p>对下属不好分配任务，工期评估过长，如何处理？</p>\n<ul>\n<li>不要口头安排任务，引入任务管理系统，设置好截止日期，需求描述清楚，通知下属及时完成；</li>\n<li>评估每个任务的标准产出(行业中等偏上水平的一个员工完成某个任务所需的时间)，由于每个任务有大小难易之分，所以要私下评估出每个任务的标准产出；如果无法评估，那就按照自己的水平来评估即可，即：假设自己来做这个任务需要花多少时间，就是标准产出时间。</li>\n<li>定期对每个员工的标准产出进行统计，结合员工级别、薪资、工作时间和标准产出就可以对大家的状态有个清晰的认识了。<br><img src=\"/images/tec_manage_1.png\" alt=\"\"><br>从上面的统计中，很容易就能看出谁是老油条了</li>\n</ul>\n</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li><p>非工作时间，不要拿工作上的事来打压威胁下属；这会让下属心生反感。<br> 如：领导让下属帮忙做某件事情，下属不肯，领导就说以后所有的工作都指派给你，升职加薪想都别想……</p>\n</li>\n<li><p>对下属不好分配任务，工期评估过长，如何处理？</p>\n<ul>\n<li>不要口头安排任务，引入任务管理系统，设置好截止日期，需求描述清楚，通知下属及时完成；</li>\n<li>评估每个任务的标准产出(行业中等偏上水平的一个员工完成某个任务所需的时间)，由于每个任务有大小难易之分，所以要私下评估出每个任务的标准产出；如果无法评估，那就按照自己的水平来评估即可，即：假设自己来做这个任务需要花多少时间，就是标准产出时间。</li>\n<li>定期对每个员工的标准产出进行统计，结合员工级别、薪资、工作时间和标准产出就可以对大家的状态有个清晰的认识了。<br><img src=\"/images/tec_manage_1.png\" alt><br>从上面的统计中，很容易就能看出谁是老油条了</li>\n</ul>\n</li>\n</ol>\n"},{"title":"代码规范建议","password":"345$#3dt5sARJFsdg34d&$%53grg","abbrlink":"coding-standard-tips","date":"2022-04-28T09:21:00.000Z","updated":"2022-04-28T09:21:00.000Z","_content":"## 1. 参数规范\n 在函数/方法里，未设置默认值的参数应放在设置默认值的参数前，如：\n``` bash\n    function test($age = 21, $id, $options = []){\n         print_r(func_get_args());\n     }\n``` \n\n 上述代码在IDE中会对$age=21，提示“Optional parameter is provided before required”，应改为：\n\n``` bash\n    function test($id, $age = 21, $options = []){\n         print_r(func_get_args());\n     }\n``` \n## 2. 命名规范\n 常用的四种命名格式：驼峰、帕斯卡、蛇形、串形，主要是为了解决多个单词之间的空格问题。\n   * 驼峰命名（Camel Case），又叫小驼峰，除了第一个单词，其他单词首字母大写：\n   原始：`last login time`\n   驼峰：`lastLoginTime`\n   * 帕斯卡（Pascal Case），又叫大驼峰，跟驼峰命名很像，只不过所有单词首字母都需要大写：\n   原始：`last login time`\n   帕斯卡：`LastLoginTime`\n   * 蛇形（Snake Case），全由小写字母和下划线组成，是指用下划线(_)作用单词间的分隔符：\n   原始：`last login time`\n   蛇形：`last_login_time`\n   * 串行（Kebab Case），又叫脊柱命名法（spinal case），是指用短横线(-)作用单词间的分隔符：\n   原始：`last login time`\n   串行：`last-login-time`\n一般而言，函数名或方法名采用小驼峰，类名采用大驼峰，数据库字段名采用蛇形。\n\n### 3. 二次确认\n 不可撤销的高危操作需二次确认，如删除、批量推送","source":"_posts/技术管理/软件管理/代码规范建议.md","raw":"---\ntitle: 代码规范建议\ntags: [代码规范]\ncategories: [编程]\npassword: 345$#3dt5sARJFsdg34d&$%53grg\nabbrlink: 'coding-standard-tips'\ndate: 2022-04-28 17:21:00\nupdated: 2022-04-28 17:21:00\n---\n## 1. 参数规范\n 在函数/方法里，未设置默认值的参数应放在设置默认值的参数前，如：\n``` bash\n    function test($age = 21, $id, $options = []){\n         print_r(func_get_args());\n     }\n``` \n\n 上述代码在IDE中会对$age=21，提示“Optional parameter is provided before required”，应改为：\n\n``` bash\n    function test($id, $age = 21, $options = []){\n         print_r(func_get_args());\n     }\n``` \n## 2. 命名规范\n 常用的四种命名格式：驼峰、帕斯卡、蛇形、串形，主要是为了解决多个单词之间的空格问题。\n   * 驼峰命名（Camel Case），又叫小驼峰，除了第一个单词，其他单词首字母大写：\n   原始：`last login time`\n   驼峰：`lastLoginTime`\n   * 帕斯卡（Pascal Case），又叫大驼峰，跟驼峰命名很像，只不过所有单词首字母都需要大写：\n   原始：`last login time`\n   帕斯卡：`LastLoginTime`\n   * 蛇形（Snake Case），全由小写字母和下划线组成，是指用下划线(_)作用单词间的分隔符：\n   原始：`last login time`\n   蛇形：`last_login_time`\n   * 串行（Kebab Case），又叫脊柱命名法（spinal case），是指用短横线(-)作用单词间的分隔符：\n   原始：`last login time`\n   串行：`last-login-time`\n一般而言，函数名或方法名采用小驼峰，类名采用大驼峰，数据库字段名采用蛇形。\n\n### 3. 二次确认\n 不可撤销的高危操作需二次确认，如删除、批量推送","slug":"技术管理/软件管理/代码规范建议","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2va008uoshg3ttm2icn","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"1-参数规范\"><a href=\"#1-参数规范\" class=\"headerlink\" title=\"1. 参数规范\"></a>1. 参数规范</h2><p> 在函数/方法里，未设置默认值的参数应放在设置默认值的参数前，如：<br></p><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"built_in\">test</span>(<span class=\"variable\">$age</span> = 21, <span class=\"variable\">$id</span>, <span class=\"variable\">$options</span> = []){</span><br><span class=\"line\">     print_r(func_get_args());</span><br><span class=\"line\"> }</span><br></pre></td></tr></tbody></table></figure><p></p>\n<p> 上述代码在IDE中会对$age=21，提示“Optional parameter is provided before required”，应改为：</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"built_in\">test</span>(<span class=\"variable\">$id</span>, <span class=\"variable\">$age</span> = 21, <span class=\"variable\">$options</span> = []){</span><br><span class=\"line\">     print_r(func_get_args());</span><br><span class=\"line\"> }</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"2-命名规范\"><a href=\"#2-命名规范\" class=\"headerlink\" title=\"2. 命名规范\"></a>2. 命名规范</h2><p> 常用的四种命名格式：驼峰、帕斯卡、蛇形、串形，主要是为了解决多个单词之间的空格问题。</p>\n<ul>\n<li>驼峰命名（Camel Case），又叫小驼峰，除了第一个单词，其他单词首字母大写：<br>原始：<code>last login time</code><br>驼峰：<code>lastLoginTime</code></li>\n<li>帕斯卡（Pascal Case），又叫大驼峰，跟驼峰命名很像，只不过所有单词首字母都需要大写：<br>原始：<code>last login time</code><br>帕斯卡：<code>LastLoginTime</code></li>\n<li>蛇形（Snake Case），全由小写字母和下划线组成，是指用下划线(_)作用单词间的分隔符：<br>原始：<code>last login time</code><br>蛇形：<code>last_login_time</code></li>\n<li>串行（Kebab Case），又叫脊柱命名法（spinal case），是指用短横线(-)作用单词间的分隔符：<br>原始：<code>last login time</code><br>串行：<code>last-login-time</code><br>一般而言，函数名或方法名采用小驼峰，类名采用大驼峰，数据库字段名采用蛇形。</li>\n</ul>\n<h3 id=\"3-二次确认\"><a href=\"#3-二次确认\" class=\"headerlink\" title=\"3. 二次确认\"></a>3. 二次确认</h3><p> 不可撤销的高危操作需二次确认，如删除、批量推送</p>\n","excerpt":"","more":"<h2 id=\"1-参数规范\"><a href=\"#1-参数规范\" class=\"headerlink\" title=\"1. 参数规范\"></a>1. 参数规范</h2><p> 在函数/方法里，未设置默认值的参数应放在设置默认值的参数前，如：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"built_in\">test</span>(<span class=\"variable\">$age</span> = 21, <span class=\"variable\">$id</span>, <span class=\"variable\">$options</span> = [])&#123;</span><br><span class=\"line\">     print_r(func_get_args());</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure></p>\n<p> 上述代码在IDE中会对$age=21，提示“Optional parameter is provided before required”，应改为：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"built_in\">test</span>(<span class=\"variable\">$id</span>, <span class=\"variable\">$age</span> = 21, <span class=\"variable\">$options</span> = [])&#123;</span><br><span class=\"line\">     print_r(func_get_args());</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"2-命名规范\"><a href=\"#2-命名规范\" class=\"headerlink\" title=\"2. 命名规范\"></a>2. 命名规范</h2><p> 常用的四种命名格式：驼峰、帕斯卡、蛇形、串形，主要是为了解决多个单词之间的空格问题。</p>\n<ul>\n<li>驼峰命名（Camel Case），又叫小驼峰，除了第一个单词，其他单词首字母大写：<br>原始：<code>last login time</code><br>驼峰：<code>lastLoginTime</code></li>\n<li>帕斯卡（Pascal Case），又叫大驼峰，跟驼峰命名很像，只不过所有单词首字母都需要大写：<br>原始：<code>last login time</code><br>帕斯卡：<code>LastLoginTime</code></li>\n<li>蛇形（Snake Case），全由小写字母和下划线组成，是指用下划线(_)作用单词间的分隔符：<br>原始：<code>last login time</code><br>蛇形：<code>last_login_time</code></li>\n<li>串行（Kebab Case），又叫脊柱命名法（spinal case），是指用短横线(-)作用单词间的分隔符：<br>原始：<code>last login time</code><br>串行：<code>last-login-time</code><br>一般而言，函数名或方法名采用小驼峰，类名采用大驼峰，数据库字段名采用蛇形。</li>\n</ul>\n<h3 id=\"3-二次确认\"><a href=\"#3-二次确认\" class=\"headerlink\" title=\"3. 二次确认\"></a>3. 二次确认</h3><p> 不可撤销的高危操作需二次确认，如删除、批量推送</p>\n"},{"title":"phpStorm使用笔记","abbrlink":"phpstorm-notes","date":"2022-05-12T09:17:55.000Z","updated":"2022-10-18T09:17:55.000Z","_content":"#### phpStorm显示类的函数或方法列表\n 点击左下方的Structure即可\n![](/images/phpstorm_notes_1.png)\n\n#### 设置在新窗口打开项目\n 在File=>Settings=>Appearance & Behavior=>System Settings中设置\n![](/images/phpstorm_notes_2.png)\n\n#### 修改字体的风格和大小\n 在File=>Setting=>Editor/Font中设置\n![](/images/phpstorm_notes_3.png)\n\n#### 在phpstorm中写lua\n 可以安装插件[EmmyLua](https://github.com/EmmyLua/IntelliJ-EmmyLua)\n\n ","source":"_posts/编辑器/phpStorm/phpStorm使用笔记.md","raw":"---\ntitle: phpStorm使用笔记\ntags: [phpStorm]\ncategories: [PHP]\nabbrlink: 'phpstorm-notes'\ndate: 2022-05-12 17:17:55\nupdated: 2022-10-18 17:17:55\n---\n#### phpStorm显示类的函数或方法列表\n 点击左下方的Structure即可\n![](/images/phpstorm_notes_1.png)\n\n#### 设置在新窗口打开项目\n 在File=>Settings=>Appearance & Behavior=>System Settings中设置\n![](/images/phpstorm_notes_2.png)\n\n#### 修改字体的风格和大小\n 在File=>Setting=>Editor/Font中设置\n![](/images/phpstorm_notes_3.png)\n\n#### 在phpstorm中写lua\n 可以安装插件[EmmyLua](https://github.com/EmmyLua/IntelliJ-EmmyLua)\n\n ","slug":"编辑器/phpStorm/phpStorm使用笔记","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2va008woshg6nng042r","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h4 id=\"phpStorm显示类的函数或方法列表\"><a href=\"#phpStorm显示类的函数或方法列表\" class=\"headerlink\" title=\"phpStorm显示类的函数或方法列表\"></a>phpStorm显示类的函数或方法列表</h4><p> 点击左下方的Structure即可<br><img src=\"/images/phpstorm_notes_1.png\" alt=\"\"></p>\n<h4 id=\"设置在新窗口打开项目\"><a href=\"#设置在新窗口打开项目\" class=\"headerlink\" title=\"设置在新窗口打开项目\"></a>设置在新窗口打开项目</h4><p> 在File=&gt;Settings=&gt;Appearance &amp; Behavior=&gt;System Settings中设置<br><img src=\"/images/phpstorm_notes_2.png\" alt=\"\"></p>\n<h4 id=\"修改字体的风格和大小\"><a href=\"#修改字体的风格和大小\" class=\"headerlink\" title=\"修改字体的风格和大小\"></a>修改字体的风格和大小</h4><p> 在File=&gt;Setting=&gt;Editor/Font中设置<br><img src=\"/images/phpstorm_notes_3.png\" alt=\"\"></p>\n<h4 id=\"在phpstorm中写lua\"><a href=\"#在phpstorm中写lua\" class=\"headerlink\" title=\"在phpstorm中写lua\"></a>在phpstorm中写lua</h4><p> 可以安装插件<a href=\"https://github.com/EmmyLua/IntelliJ-EmmyLua\">EmmyLua</a></p>\n","excerpt":"","more":"<h4 id=\"phpStorm显示类的函数或方法列表\"><a href=\"#phpStorm显示类的函数或方法列表\" class=\"headerlink\" title=\"phpStorm显示类的函数或方法列表\"></a>phpStorm显示类的函数或方法列表</h4><p> 点击左下方的Structure即可<br><img src=\"/images/phpstorm_notes_1.png\" alt></p>\n<h4 id=\"设置在新窗口打开项目\"><a href=\"#设置在新窗口打开项目\" class=\"headerlink\" title=\"设置在新窗口打开项目\"></a>设置在新窗口打开项目</h4><p> 在File=&gt;Settings=&gt;Appearance &amp; Behavior=&gt;System Settings中设置<br><img src=\"/images/phpstorm_notes_2.png\" alt></p>\n<h4 id=\"修改字体的风格和大小\"><a href=\"#修改字体的风格和大小\" class=\"headerlink\" title=\"修改字体的风格和大小\"></a>修改字体的风格和大小</h4><p> 在File=&gt;Setting=&gt;Editor/Font中设置<br><img src=\"/images/phpstorm_notes_3.png\" alt></p>\n<h4 id=\"在phpstorm中写lua\"><a href=\"#在phpstorm中写lua\" class=\"headerlink\" title=\"在phpstorm中写lua\"></a>在phpstorm中写lua</h4><p> 可以安装插件<a href=\"https://github.com/EmmyLua/IntelliJ-EmmyLua\">EmmyLua</a></p>\n"},{"title":"phpStorm实现保存后，代码自动格式化","abbrlink":"phpstorm-auto-format","date":"2022-04-26T09:51:46.000Z","updated":"2022-04-26T09:51:46.000Z","_content":"鉴于个人编程风格的不同，为了保证团队开发能更好地开展，需要进行代码统一格式化。我们可以在ctrl+s的时候让IED来自动格式化保存。\n下面介绍下设置步骤：\n### 1. 点击File-》Settings-》Keymap\n![](/images/phpstorm_auth_format_1.png)\n\n### 2. 在右侧搜索save ALL\n![](/images/phpstorm_auth_format_2.png)\n\n### 3. 右键点击Save All，选择Remove Ctrl+S\n![](/images/phpstorm_auth_format_3.png)\n\n### 4. 右键点击Save All，选择Add Keyboard Shortcut，然后按键盘shift+ctrl+alt+s，然后保存。\n![](/images/phpstorm_auth_format_4.png)\nPS:shift+ctrl+alt+s这个可以自己随便设置，但是不能和其他的快捷键冲突，而且要记住，一会我们会用得到。\n\n### 5. 点击Edit(编辑)->Macros(宏)->Start Macro Recording(开始录制宏)。\n右下角会出现这样一个图标\n![](/images/phpstorm_auth_format_5.png)\n然后先按ctrl+alt+l，再按我们刚刚把save  all设置的快捷键shift+ctrl+alt+s，最后点击红色的小方块结束录制宏\n![](/images/phpstorm_auth_format_6.png)\n保存宏：名称设置为：Format And Save（这个名字随意啦，自己记得就好）\n![](/images/phpstorm_auth_format_7.png)\n\n### 6. 点击File-》Settings-》Keymap  搜索Format And Save\n\n### 7. 右键点击Format And Save，选择Add Keyboard Shortcut,设置为command+s，保存就可以了\n![](/images/phpstorm_auth_format_8.png)\n最后试一下吧，ctrl+s 就实现了 保存+代码格式化","source":"_posts/编辑器/phpStorm/phpStorm实现保存后，代码自动格式化.md","raw":"---\ntitle: phpStorm实现保存后，代码自动格式化\ntags: [phpStorm]\ncategories: [PHP]\nabbrlink: 'phpstorm-auto-format'\ndate: 2022-04-26 17:51:46\nupdated: 2022-04-26 17:51:46\n---\n鉴于个人编程风格的不同，为了保证团队开发能更好地开展，需要进行代码统一格式化。我们可以在ctrl+s的时候让IED来自动格式化保存。\n下面介绍下设置步骤：\n### 1. 点击File-》Settings-》Keymap\n![](/images/phpstorm_auth_format_1.png)\n\n### 2. 在右侧搜索save ALL\n![](/images/phpstorm_auth_format_2.png)\n\n### 3. 右键点击Save All，选择Remove Ctrl+S\n![](/images/phpstorm_auth_format_3.png)\n\n### 4. 右键点击Save All，选择Add Keyboard Shortcut，然后按键盘shift+ctrl+alt+s，然后保存。\n![](/images/phpstorm_auth_format_4.png)\nPS:shift+ctrl+alt+s这个可以自己随便设置，但是不能和其他的快捷键冲突，而且要记住，一会我们会用得到。\n\n### 5. 点击Edit(编辑)->Macros(宏)->Start Macro Recording(开始录制宏)。\n右下角会出现这样一个图标\n![](/images/phpstorm_auth_format_5.png)\n然后先按ctrl+alt+l，再按我们刚刚把save  all设置的快捷键shift+ctrl+alt+s，最后点击红色的小方块结束录制宏\n![](/images/phpstorm_auth_format_6.png)\n保存宏：名称设置为：Format And Save（这个名字随意啦，自己记得就好）\n![](/images/phpstorm_auth_format_7.png)\n\n### 6. 点击File-》Settings-》Keymap  搜索Format And Save\n\n### 7. 右键点击Format And Save，选择Add Keyboard Shortcut,设置为command+s，保存就可以了\n![](/images/phpstorm_auth_format_8.png)\n最后试一下吧，ctrl+s 就实现了 保存+代码格式化","slug":"编辑器/phpStorm/phpStorm实现保存后，代码自动格式化","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vb0090oshg88a224bl","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>鉴于个人编程风格的不同，为了保证团队开发能更好地开展，需要进行代码统一格式化。我们可以在ctrl+s的时候让IED来自动格式化保存。<br>下面介绍下设置步骤：</p>\n<h3 id=\"1-点击File-》Settings-》Keymap\"><a href=\"#1-点击File-》Settings-》Keymap\" class=\"headerlink\" title=\"1. 点击File-》Settings-》Keymap\"></a>1. 点击File-》Settings-》Keymap</h3><p><img src=\"/images/phpstorm_auth_format_1.png\" alt=\"\"></p>\n<h3 id=\"2-在右侧搜索save-ALL\"><a href=\"#2-在右侧搜索save-ALL\" class=\"headerlink\" title=\"2. 在右侧搜索save ALL\"></a>2. 在右侧搜索save ALL</h3><p><img src=\"/images/phpstorm_auth_format_2.png\" alt=\"\"></p>\n<h3 id=\"3-右键点击Save-All，选择Remove-Ctrl-S\"><a href=\"#3-右键点击Save-All，选择Remove-Ctrl-S\" class=\"headerlink\" title=\"3. 右键点击Save All，选择Remove Ctrl+S\"></a>3. 右键点击Save All，选择Remove Ctrl+S</h3><p><img src=\"/images/phpstorm_auth_format_3.png\" alt=\"\"></p>\n<h3 id=\"4-右键点击Save-All，选择Add-Keyboard-Shortcut，然后按键盘shift-ctrl-alt-s，然后保存。\"><a href=\"#4-右键点击Save-All，选择Add-Keyboard-Shortcut，然后按键盘shift-ctrl-alt-s，然后保存。\" class=\"headerlink\" title=\"4. 右键点击Save All，选择Add Keyboard Shortcut，然后按键盘shift+ctrl+alt+s，然后保存。\"></a>4. 右键点击Save All，选择Add Keyboard Shortcut，然后按键盘shift+ctrl+alt+s，然后保存。</h3><p><img src=\"/images/phpstorm_auth_format_4.png\" alt=\"\"><br>PS:shift+ctrl+alt+s这个可以自己随便设置，但是不能和其他的快捷键冲突，而且要记住，一会我们会用得到。</p>\n<h3 id=\"5-点击Edit-编辑-gt-Macros-宏-gt-Start-Macro-Recording-开始录制宏-。\"><a href=\"#5-点击Edit-编辑-gt-Macros-宏-gt-Start-Macro-Recording-开始录制宏-。\" class=\"headerlink\" title=\"5. 点击Edit(编辑)->Macros(宏)->Start Macro Recording(开始录制宏)。\"></a>5. 点击Edit(编辑)-&gt;Macros(宏)-&gt;Start Macro Recording(开始录制宏)。</h3><p>右下角会出现这样一个图标<br><img src=\"/images/phpstorm_auth_format_5.png\" alt=\"\"><br>然后先按ctrl+alt+l，再按我们刚刚把save  all设置的快捷键shift+ctrl+alt+s，最后点击红色的小方块结束录制宏<br><img src=\"/images/phpstorm_auth_format_6.png\" alt=\"\"><br>保存宏：名称设置为：Format And Save（这个名字随意啦，自己记得就好）<br><img src=\"/images/phpstorm_auth_format_7.png\" alt=\"\"></p>\n<h3 id=\"6-点击File-》Settings-》Keymap-搜索Format-And-Save\"><a href=\"#6-点击File-》Settings-》Keymap-搜索Format-And-Save\" class=\"headerlink\" title=\"6. 点击File-》Settings-》Keymap  搜索Format And Save\"></a>6. 点击File-》Settings-》Keymap  搜索Format And Save</h3><h3 id=\"7-右键点击Format-And-Save，选择Add-Keyboard-Shortcut-设置为command-s，保存就可以了\"><a href=\"#7-右键点击Format-And-Save，选择Add-Keyboard-Shortcut-设置为command-s，保存就可以了\" class=\"headerlink\" title=\"7. 右键点击Format And Save，选择Add Keyboard Shortcut,设置为command+s，保存就可以了\"></a>7. 右键点击Format And Save，选择Add Keyboard Shortcut,设置为command+s，保存就可以了</h3><p><img src=\"/images/phpstorm_auth_format_8.png\" alt=\"\"><br>最后试一下吧，ctrl+s 就实现了 保存+代码格式化</p>\n","excerpt":"","more":"<p>鉴于个人编程风格的不同，为了保证团队开发能更好地开展，需要进行代码统一格式化。我们可以在ctrl+s的时候让IED来自动格式化保存。<br>下面介绍下设置步骤：</p>\n<h3 id=\"1-点击File-》Settings-》Keymap\"><a href=\"#1-点击File-》Settings-》Keymap\" class=\"headerlink\" title=\"1. 点击File-》Settings-》Keymap\"></a>1. 点击File-》Settings-》Keymap</h3><p><img src=\"/images/phpstorm_auth_format_1.png\" alt></p>\n<h3 id=\"2-在右侧搜索save-ALL\"><a href=\"#2-在右侧搜索save-ALL\" class=\"headerlink\" title=\"2. 在右侧搜索save ALL\"></a>2. 在右侧搜索save ALL</h3><p><img src=\"/images/phpstorm_auth_format_2.png\" alt></p>\n<h3 id=\"3-右键点击Save-All，选择Remove-Ctrl-S\"><a href=\"#3-右键点击Save-All，选择Remove-Ctrl-S\" class=\"headerlink\" title=\"3. 右键点击Save All，选择Remove Ctrl+S\"></a>3. 右键点击Save All，选择Remove Ctrl+S</h3><p><img src=\"/images/phpstorm_auth_format_3.png\" alt></p>\n<h3 id=\"4-右键点击Save-All，选择Add-Keyboard-Shortcut，然后按键盘shift-ctrl-alt-s，然后保存。\"><a href=\"#4-右键点击Save-All，选择Add-Keyboard-Shortcut，然后按键盘shift-ctrl-alt-s，然后保存。\" class=\"headerlink\" title=\"4. 右键点击Save All，选择Add Keyboard Shortcut，然后按键盘shift+ctrl+alt+s，然后保存。\"></a>4. 右键点击Save All，选择Add Keyboard Shortcut，然后按键盘shift+ctrl+alt+s，然后保存。</h3><p><img src=\"/images/phpstorm_auth_format_4.png\" alt><br>PS:shift+ctrl+alt+s这个可以自己随便设置，但是不能和其他的快捷键冲突，而且要记住，一会我们会用得到。</p>\n<h3 id=\"5-点击Edit-编辑-gt-Macros-宏-gt-Start-Macro-Recording-开始录制宏-。\"><a href=\"#5-点击Edit-编辑-gt-Macros-宏-gt-Start-Macro-Recording-开始录制宏-。\" class=\"headerlink\" title=\"5. 点击Edit(编辑)-&gt;Macros(宏)-&gt;Start Macro Recording(开始录制宏)。\"></a>5. 点击Edit(编辑)-&gt;Macros(宏)-&gt;Start Macro Recording(开始录制宏)。</h3><p>右下角会出现这样一个图标<br><img src=\"/images/phpstorm_auth_format_5.png\" alt><br>然后先按ctrl+alt+l，再按我们刚刚把save  all设置的快捷键shift+ctrl+alt+s，最后点击红色的小方块结束录制宏<br><img src=\"/images/phpstorm_auth_format_6.png\" alt><br>保存宏：名称设置为：Format And Save（这个名字随意啦，自己记得就好）<br><img src=\"/images/phpstorm_auth_format_7.png\" alt></p>\n<h3 id=\"6-点击File-》Settings-》Keymap-搜索Format-And-Save\"><a href=\"#6-点击File-》Settings-》Keymap-搜索Format-And-Save\" class=\"headerlink\" title=\"6. 点击File-》Settings-》Keymap  搜索Format And Save\"></a>6. 点击File-》Settings-》Keymap  搜索Format And Save</h3><h3 id=\"7-右键点击Format-And-Save，选择Add-Keyboard-Shortcut-设置为command-s，保存就可以了\"><a href=\"#7-右键点击Format-And-Save，选择Add-Keyboard-Shortcut-设置为command-s，保存就可以了\" class=\"headerlink\" title=\"7. 右键点击Format And Save，选择Add Keyboard Shortcut,设置为command+s，保存就可以了\"></a>7. 右键点击Format And Save，选择Add Keyboard Shortcut,设置为command+s，保存就可以了</h3><p><img src=\"/images/phpstorm_auth_format_8.png\" alt><br>最后试一下吧，ctrl+s 就实现了 保存+代码格式化</p>\n"},{"title":"phpStorm常用快捷键","abbrlink":"phpstorm-quick-key","date":"2022-05-17T00:21:00.000Z","updated":"2022-05-17T00:21:00.000Z","_content":"\n\n### 删除某行\nctrl+Y\n","source":"_posts/编辑器/phpStorm/phpStorm常用快捷键.md","raw":"---\ntitle: phpStorm常用快捷键\ntags: [phpStorm]\ncategories: [PHP]\nabbrlink: 'phpstorm-quick-key'\ndate: 2022-05-17 08:21:00\nupdated: 2022-05-17 08:21:00\n---\n\n\n### 删除某行\nctrl+Y\n","slug":"编辑器/phpStorm/phpStorm常用快捷键","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vb0092oshg9qajead5","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"删除某行\"><a href=\"#删除某行\" class=\"headerlink\" title=\"删除某行\"></a>删除某行</h3><p>ctrl+Y</p>\n","excerpt":"","more":"<h3 id=\"删除某行\"><a href=\"#删除某行\" class=\"headerlink\" title=\"删除某行\"></a>删除某行</h3><p>ctrl+Y</p>\n"},{"title":"phpStorm查找指定文件的修改历史","abbrlink":"phpstorm-show-history","date":"2022-04-27T01:53:23.000Z","updated":"2022-04-27T01:53:23.000Z","_content":"打开需要查找的文件，对着文件右击选择Local History=>Show History\n![](/images/phpstorm_show_history_1.png)\n![](/images/phpstorm_show_history_2.png)","source":"_posts/编辑器/phpStorm/phpStorm查找指定文件的修改历史.md","raw":"---\ntitle: phpStorm查找指定文件的修改历史\ntags: [phpStorm]\ncategories: [PHP]\nabbrlink: 'phpstorm-show-history'\ndate: 2022-04-27 09:53:23\nupdated: 2022-04-27 09:53:23\n---\n打开需要查找的文件，对着文件右击选择Local History=>Show History\n![](/images/phpstorm_show_history_1.png)\n![](/images/phpstorm_show_history_2.png)","slug":"编辑器/phpStorm/phpStorm查找指定文件的修改历史","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vc0096oshg9v7308ac","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>打开需要查找的文件，对着文件右击选择Local History=&gt;Show History<br><img src=\"/images/phpstorm_show_history_1.png\" alt=\"\"><br><img src=\"/images/phpstorm_show_history_2.png\" alt=\"\"></p>\n","excerpt":"","more":"<p>打开需要查找的文件，对着文件右击选择Local History=&gt;Show History<br><img src=\"/images/phpstorm_show_history_1.png\" alt><br><img src=\"/images/phpstorm_show_history_2.png\" alt></p>\n"},{"title":"解决phpStorm无法显示目录结构的问题","abbrlink":"phpstorm-show-dir","date":"2022-05-16T09:51:46.000Z","updated":"2022-05-16T09:51:46.000Z","_content":"\n问题：PhpStorm侧边栏Project里面只显示文件不显示文件夹\n![](/images/phpstorm_show_dir_1.png)\n\n解决：删除项目根目录下的.idea文件夹，重启Phpstorm打开项目目录。Alt + 1调出左侧的目录\n![](/images/phpstorm_show_dir_2.png)\n","source":"_posts/编辑器/phpStorm/解决phpStorm无法显示目录结构的问题.md","raw":"---\ntitle: 解决phpStorm无法显示目录结构的问题\ntags: [phpStorm]\ncategories: [PHP]\nabbrlink: 'phpstorm-show-dir'\ndate: 2022-05-16 17:51:46\nupdated: 2022-05-16 17:51:46\n---\n\n问题：PhpStorm侧边栏Project里面只显示文件不显示文件夹\n![](/images/phpstorm_show_dir_1.png)\n\n解决：删除项目根目录下的.idea文件夹，重启Phpstorm打开项目目录。Alt + 1调出左侧的目录\n![](/images/phpstorm_show_dir_2.png)\n","slug":"编辑器/phpStorm/解决phpStorm无法显示目录结构的问题","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vc0097oshg6p7a6nxu","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>问题：PhpStorm侧边栏Project里面只显示文件不显示文件夹<br><img src=\"/images/phpstorm_show_dir_1.png\" alt=\"\"></p>\n<p>解决：删除项目根目录下的.idea文件夹，重启Phpstorm打开项目目录。Alt + 1调出左侧的目录<br><img src=\"/images/phpstorm_show_dir_2.png\" alt=\"\"></p>\n","excerpt":"","more":"<p>问题：PhpStorm侧边栏Project里面只显示文件不显示文件夹<br><img src=\"/images/phpstorm_show_dir_1.png\" alt></p>\n<p>解决：删除项目根目录下的.idea文件夹，重启Phpstorm打开项目目录。Alt + 1调出左侧的目录<br><img src=\"/images/phpstorm_show_dir_2.png\" alt></p>\n"},{"title":"架构学习","abbrlink":"architecture-notes","date":"2018-06-05T01:44:00.000Z","_content":"\n1. 架构设计的主要目的是为了解决软件系统复杂度带来的问题。\n2. 架构的复杂度来源：高性能、高可用、可扩展性、其它(低成本、安全、规模等)。\n3. 架构设计的三原则：合适优于业界领先、简单优于复杂、演化优于一步到位。\n","source":"_posts/系统设计及优化/架构/架构学习.md","raw":"---\ntitle: 架构学习\ntags: [软件架构]\ncategories: [架构]\nabbrlink: 'architecture-notes'\ndate: 2018-06-05 09:44:00\n---\n\n1. 架构设计的主要目的是为了解决软件系统复杂度带来的问题。\n2. 架构的复杂度来源：高性能、高可用、可扩展性、其它(低成本、安全、规模等)。\n3. 架构设计的三原则：合适优于业界领先、简单优于复杂、演化优于一步到位。\n","slug":"系统设计及优化/架构/架构学习","published":1,"updated":"2024-10-18T01:57:25.728Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2vd009aoshg8uos7jfu","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li>架构设计的主要目的是为了解决软件系统复杂度带来的问题。</li>\n<li>架构的复杂度来源：高性能、高可用、可扩展性、其它(低成本、安全、规模等)。</li>\n<li>架构设计的三原则：合适优于业界领先、简单优于复杂、演化优于一步到位。</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li>架构设计的主要目的是为了解决软件系统复杂度带来的问题。</li>\n<li>架构的复杂度来源：高性能、高可用、可扩展性、其它(低成本、安全、规模等)。</li>\n<li>架构设计的三原则：合适优于业界领先、简单优于复杂、演化优于一步到位。</li>\n</ol>\n"},{"title":"系统设计","abbrlink":"soft-system-design","date":"2021-04-26T02:14:20.000Z","updated":"2022-03-17T03:28:34.000Z","_content":"\n### 1. 系统分析\n - 对于初期单一系统的产品来说，一个数据库➕一个平台程序即可；\n\n - 对于含有两个及以上平台的初期产品来说，系统结构应该是：多个平台程序➕一个服务中心➕一个或多个数据库；\n\n - 对于多平台且需与第三方交互的产品来说，系统结构应该是：多个平台程序➕一个开放平台（含接口及订阅）➕一个服务中台（一个服务中心➕一个socket服务器➕一个异步数据处理中心）➕多个数据库；\n\n### 2. 如何设计一个高并发、高可用的系统\n![](/images/soft_design_1.png)","source":"_posts/系统设计及优化/架构/系统设计.md","raw":"---\ntitle: 系统设计\ntags: [系统设计]\ncategories: [架构]\nabbrlink: 'soft-system-design'\ndate: 2021-04-26 10:14:20\nupdated: 2022-03-17 11:28:34\n---\n\n### 1. 系统分析\n - 对于初期单一系统的产品来说，一个数据库➕一个平台程序即可；\n\n - 对于含有两个及以上平台的初期产品来说，系统结构应该是：多个平台程序➕一个服务中心➕一个或多个数据库；\n\n - 对于多平台且需与第三方交互的产品来说，系统结构应该是：多个平台程序➕一个开放平台（含接口及订阅）➕一个服务中台（一个服务中心➕一个socket服务器➕一个异步数据处理中心）➕多个数据库；\n\n### 2. 如何设计一个高并发、高可用的系统\n![](/images/soft_design_1.png)","slug":"系统设计及优化/架构/系统设计","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2ve009coshgclzu0ztd","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-系统分析\"><a href=\"#1-系统分析\" class=\"headerlink\" title=\"1. 系统分析\"></a>1. 系统分析</h3><ul>\n<li><p>对于初期单一系统的产品来说，一个数据库➕一个平台程序即可；</p>\n</li>\n<li><p>对于含有两个及以上平台的初期产品来说，系统结构应该是：多个平台程序➕一个服务中心➕一个或多个数据库；</p>\n</li>\n<li><p>对于多平台且需与第三方交互的产品来说，系统结构应该是：多个平台程序➕一个开放平台（含接口及订阅）➕一个服务中台（一个服务中心➕一个socket服务器➕一个异步数据处理中心）➕多个数据库；</p>\n</li>\n</ul>\n<h3 id=\"2-如何设计一个高并发、高可用的系统\"><a href=\"#2-如何设计一个高并发、高可用的系统\" class=\"headerlink\" title=\"2. 如何设计一个高并发、高可用的系统\"></a>2. 如何设计一个高并发、高可用的系统</h3><p><img src=\"/images/soft_design_1.png\" alt=\"\"></p>\n","excerpt":"","more":"<h3 id=\"1-系统分析\"><a href=\"#1-系统分析\" class=\"headerlink\" title=\"1. 系统分析\"></a>1. 系统分析</h3><ul>\n<li><p>对于初期单一系统的产品来说，一个数据库➕一个平台程序即可；</p>\n</li>\n<li><p>对于含有两个及以上平台的初期产品来说，系统结构应该是：多个平台程序➕一个服务中心➕一个或多个数据库；</p>\n</li>\n<li><p>对于多平台且需与第三方交互的产品来说，系统结构应该是：多个平台程序➕一个开放平台（含接口及订阅）➕一个服务中台（一个服务中心➕一个socket服务器➕一个异步数据处理中心）➕多个数据库；</p>\n</li>\n</ul>\n<h3 id=\"2-如何设计一个高并发、高可用的系统\"><a href=\"#2-如何设计一个高并发、高可用的系统\" class=\"headerlink\" title=\"2. 如何设计一个高并发、高可用的系统\"></a>2. 如何设计一个高并发、高可用的系统</h3><p><img src=\"/images/soft_design_1.png\" alt></p>\n"},{"title":"记一次高并发迭代之路！！","abbrlink":"high-concurrent-experience","date":"2024-05-21T03:19:18.128Z","top":999,"_content":"\n### 前因\n2020年之初，新冠肺炎突然来势汹汹，在全国人民的团结努力下，抗疫战进入了僵持阶段，2月24日我公司一复工，就接到了成都市XX区领导的需求，需要在一周内开发上线一个针对全区师生(10万人左右)疫情每日打卡平台。\n\n### 分析\n其实就是需要做一个用户每日登陆填报问卷的功能。此平台需要有一个管理后台，一个h5打卡填报及其附属页面。\n\n### 雏形\n由于时间紧，对项目进行简单分析后，确定功能(后台：用户信息管理、打卡记录、数据统计，前台：用户登陆、打卡、快速打卡、打卡记录)后，我们就着手开发。功能很快开发开发完成并上线。\n\n### 迭代\n上线前的测试阶段，我们发现有些信息是固定的但每个人都需要查询，比如省市区信息，于是我们进行了redis缓存。由于后台的统计过于复杂，于是使用golang开发了计划任务，每两分钟统计一次数据。\n领导验收时又提了一些功能改进，在改进时，我们发现用户数有10万左右，单一的打卡接口可能会堵塞，于是进行了优化，打卡接口只进行普通的填报信息校验，校验通过后，异步调用golang接口进行打卡信息保存，这样有一个坏处就是数据保存延迟，可能会出现打卡后看不到记录。为防止用户多次打卡，在填报信息校验通过后，将当天打卡人的唯一标识存入redis，如果存在redis中就不让再次打卡，当然如果打卡信息保存失败，go程序需删除该人当日的打卡缓存。\n上线试运行期间，发现用户打卡打卡页面很慢，经分析，服务器带宽只有10M，前端页面图片未压缩，于是进行图片、js、css等资源文件压缩，单纯压测前端页面(压缩后未425k)，明显带宽不够，加大到100M，前端页面图片CND加速后，压测1000并发无问题。压测打卡接口，1000并发连接超时失败率20%，800并发连接超时失败率10%。\n压测一个通宵后，本以为平安无事了，结果第二天一早上就卡得不行，原来是后台查询过慢，导致cpu飙升，前台用户查询不到数据，看慢查询发现，时不时有几个查询sql消耗时间过长，show preocesslist也看到异常。先加索引优化，但效果不明显，结果发现是在进行联表查询的时候，大表联了大表，大表牵引本来就是问题，于是对业务表进行了合并，5张表合成一张表，并添加索引，后台查询立马飞快。更新程序后，暂时一切正常了。\n没想到第二天一早上服务器有出问题了，并发飙升到2万多，有很多insert 语句造成了锁表，而很多的select语句有无法执行。突然意识到myisam使用insert的时候会造成锁表，需要支持并发插入，得修改concurrent_insert=2,；另一方面有个在慢查询中有两个select语句出现很频繁，但耗时不高(0.60s左右)，explain发现居然没有使用索引，立马加上索引，查询耗时降低到0.02s。在无法kill sql进程的情况下，只能进行停止Nginx，重启数据库，重启后一切正常。\n由于可能并发过高，我们选择了服务器升级，单台数据库可能扛不住。全迁移到阿里云，使用阿里云的数据库，读写分离，一主多从，弹性伸缩。一切ok，监控两日后发现并发在8000左右。\n\n### 总结\n架构设计的原则：简单、合适高于一切。\n高并发需考虑带宽，页面缓存压缩、静态数据缓存、接口异步多线程处理。\n慢查询除了关注耗时过长的sql，还得注意使用频繁的sql。\n高并发当程序优化到极致后，需考虑服务器优化，读写分离，redis集群等。","source":"_posts/系统设计及优化/架构/记一次高并发迭代之路.md","raw":"---\ntitle: 记一次高并发迭代之路！！\ntags: [高并发]\ncategories: [架构]\nabbrlink: 'high-concurrent-experience'\ndate: 2020--03-15 11:31:24\ntop: 999\n---\n\n### 前因\n2020年之初，新冠肺炎突然来势汹汹，在全国人民的团结努力下，抗疫战进入了僵持阶段，2月24日我公司一复工，就接到了成都市XX区领导的需求，需要在一周内开发上线一个针对全区师生(10万人左右)疫情每日打卡平台。\n\n### 分析\n其实就是需要做一个用户每日登陆填报问卷的功能。此平台需要有一个管理后台，一个h5打卡填报及其附属页面。\n\n### 雏形\n由于时间紧，对项目进行简单分析后，确定功能(后台：用户信息管理、打卡记录、数据统计，前台：用户登陆、打卡、快速打卡、打卡记录)后，我们就着手开发。功能很快开发开发完成并上线。\n\n### 迭代\n上线前的测试阶段，我们发现有些信息是固定的但每个人都需要查询，比如省市区信息，于是我们进行了redis缓存。由于后台的统计过于复杂，于是使用golang开发了计划任务，每两分钟统计一次数据。\n领导验收时又提了一些功能改进，在改进时，我们发现用户数有10万左右，单一的打卡接口可能会堵塞，于是进行了优化，打卡接口只进行普通的填报信息校验，校验通过后，异步调用golang接口进行打卡信息保存，这样有一个坏处就是数据保存延迟，可能会出现打卡后看不到记录。为防止用户多次打卡，在填报信息校验通过后，将当天打卡人的唯一标识存入redis，如果存在redis中就不让再次打卡，当然如果打卡信息保存失败，go程序需删除该人当日的打卡缓存。\n上线试运行期间，发现用户打卡打卡页面很慢，经分析，服务器带宽只有10M，前端页面图片未压缩，于是进行图片、js、css等资源文件压缩，单纯压测前端页面(压缩后未425k)，明显带宽不够，加大到100M，前端页面图片CND加速后，压测1000并发无问题。压测打卡接口，1000并发连接超时失败率20%，800并发连接超时失败率10%。\n压测一个通宵后，本以为平安无事了，结果第二天一早上就卡得不行，原来是后台查询过慢，导致cpu飙升，前台用户查询不到数据，看慢查询发现，时不时有几个查询sql消耗时间过长，show preocesslist也看到异常。先加索引优化，但效果不明显，结果发现是在进行联表查询的时候，大表联了大表，大表牵引本来就是问题，于是对业务表进行了合并，5张表合成一张表，并添加索引，后台查询立马飞快。更新程序后，暂时一切正常了。\n没想到第二天一早上服务器有出问题了，并发飙升到2万多，有很多insert 语句造成了锁表，而很多的select语句有无法执行。突然意识到myisam使用insert的时候会造成锁表，需要支持并发插入，得修改concurrent_insert=2,；另一方面有个在慢查询中有两个select语句出现很频繁，但耗时不高(0.60s左右)，explain发现居然没有使用索引，立马加上索引，查询耗时降低到0.02s。在无法kill sql进程的情况下，只能进行停止Nginx，重启数据库，重启后一切正常。\n由于可能并发过高，我们选择了服务器升级，单台数据库可能扛不住。全迁移到阿里云，使用阿里云的数据库，读写分离，一主多从，弹性伸缩。一切ok，监控两日后发现并发在8000左右。\n\n### 总结\n架构设计的原则：简单、合适高于一切。\n高并发需考虑带宽，页面缓存压缩、静态数据缓存、接口异步多线程处理。\n慢查询除了关注耗时过长的sql，还得注意使用频繁的sql。\n高并发当程序优化到极致后，需考虑服务器优化，读写分离，redis集群等。","slug":"系统设计及优化/架构/记一次高并发迭代之路","published":1,"updated":"2024-10-18T01:57:25.679Z","comments":1,"layout":"post","photos":[],"_id":"cm3iee2ve009foshghxnh5p0g","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"前因\"><a href=\"#前因\" class=\"headerlink\" title=\"前因\"></a>前因</h3><p>2020年之初，新冠肺炎突然来势汹汹，在全国人民的团结努力下，抗疫战进入了僵持阶段，2月24日我公司一复工，就接到了成都市XX区领导的需求，需要在一周内开发上线一个针对全区师生(10万人左右)疫情每日打卡平台。</p>\n<h3 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h3><p>其实就是需要做一个用户每日登陆填报问卷的功能。此平台需要有一个管理后台，一个h5打卡填报及其附属页面。</p>\n<h3 id=\"雏形\"><a href=\"#雏形\" class=\"headerlink\" title=\"雏形\"></a>雏形</h3><p>由于时间紧，对项目进行简单分析后，确定功能(后台：用户信息管理、打卡记录、数据统计，前台：用户登陆、打卡、快速打卡、打卡记录)后，我们就着手开发。功能很快开发开发完成并上线。</p>\n<h3 id=\"迭代\"><a href=\"#迭代\" class=\"headerlink\" title=\"迭代\"></a>迭代</h3><p>上线前的测试阶段，我们发现有些信息是固定的但每个人都需要查询，比如省市区信息，于是我们进行了redis缓存。由于后台的统计过于复杂，于是使用golang开发了计划任务，每两分钟统计一次数据。<br>领导验收时又提了一些功能改进，在改进时，我们发现用户数有10万左右，单一的打卡接口可能会堵塞，于是进行了优化，打卡接口只进行普通的填报信息校验，校验通过后，异步调用golang接口进行打卡信息保存，这样有一个坏处就是数据保存延迟，可能会出现打卡后看不到记录。为防止用户多次打卡，在填报信息校验通过后，将当天打卡人的唯一标识存入redis，如果存在redis中就不让再次打卡，当然如果打卡信息保存失败，go程序需删除该人当日的打卡缓存。<br>上线试运行期间，发现用户打卡打卡页面很慢，经分析，服务器带宽只有10M，前端页面图片未压缩，于是进行图片、js、css等资源文件压缩，单纯压测前端页面(压缩后未425k)，明显带宽不够，加大到100M，前端页面图片CND加速后，压测1000并发无问题。压测打卡接口，1000并发连接超时失败率20%，800并发连接超时失败率10%。<br>压测一个通宵后，本以为平安无事了，结果第二天一早上就卡得不行，原来是后台查询过慢，导致cpu飙升，前台用户查询不到数据，看慢查询发现，时不时有几个查询sql消耗时间过长，show preocesslist也看到异常。先加索引优化，但效果不明显，结果发现是在进行联表查询的时候，大表联了大表，大表牵引本来就是问题，于是对业务表进行了合并，5张表合成一张表，并添加索引，后台查询立马飞快。更新程序后，暂时一切正常了。<br>没想到第二天一早上服务器有出问题了，并发飙升到2万多，有很多insert 语句造成了锁表，而很多的select语句有无法执行。突然意识到myisam使用insert的时候会造成锁表，需要支持并发插入，得修改concurrent_insert=2,；另一方面有个在慢查询中有两个select语句出现很频繁，但耗时不高(0.60s左右)，explain发现居然没有使用索引，立马加上索引，查询耗时降低到0.02s。在无法kill sql进程的情况下，只能进行停止Nginx，重启数据库，重启后一切正常。<br>由于可能并发过高，我们选择了服务器升级，单台数据库可能扛不住。全迁移到阿里云，使用阿里云的数据库，读写分离，一主多从，弹性伸缩。一切ok，监控两日后发现并发在8000左右。</p>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>架构设计的原则：简单、合适高于一切。<br>高并发需考虑带宽，页面缓存压缩、静态数据缓存、接口异步多线程处理。<br>慢查询除了关注耗时过长的sql，还得注意使用频繁的sql。<br>高并发当程序优化到极致后，需考虑服务器优化，读写分离，redis集群等。</p>\n","excerpt":"","more":"<h3 id=\"前因\"><a href=\"#前因\" class=\"headerlink\" title=\"前因\"></a>前因</h3><p>2020年之初，新冠肺炎突然来势汹汹，在全国人民的团结努力下，抗疫战进入了僵持阶段，2月24日我公司一复工，就接到了成都市XX区领导的需求，需要在一周内开发上线一个针对全区师生(10万人左右)疫情每日打卡平台。</p>\n<h3 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h3><p>其实就是需要做一个用户每日登陆填报问卷的功能。此平台需要有一个管理后台，一个h5打卡填报及其附属页面。</p>\n<h3 id=\"雏形\"><a href=\"#雏形\" class=\"headerlink\" title=\"雏形\"></a>雏形</h3><p>由于时间紧，对项目进行简单分析后，确定功能(后台：用户信息管理、打卡记录、数据统计，前台：用户登陆、打卡、快速打卡、打卡记录)后，我们就着手开发。功能很快开发开发完成并上线。</p>\n<h3 id=\"迭代\"><a href=\"#迭代\" class=\"headerlink\" title=\"迭代\"></a>迭代</h3><p>上线前的测试阶段，我们发现有些信息是固定的但每个人都需要查询，比如省市区信息，于是我们进行了redis缓存。由于后台的统计过于复杂，于是使用golang开发了计划任务，每两分钟统计一次数据。<br>领导验收时又提了一些功能改进，在改进时，我们发现用户数有10万左右，单一的打卡接口可能会堵塞，于是进行了优化，打卡接口只进行普通的填报信息校验，校验通过后，异步调用golang接口进行打卡信息保存，这样有一个坏处就是数据保存延迟，可能会出现打卡后看不到记录。为防止用户多次打卡，在填报信息校验通过后，将当天打卡人的唯一标识存入redis，如果存在redis中就不让再次打卡，当然如果打卡信息保存失败，go程序需删除该人当日的打卡缓存。<br>上线试运行期间，发现用户打卡打卡页面很慢，经分析，服务器带宽只有10M，前端页面图片未压缩，于是进行图片、js、css等资源文件压缩，单纯压测前端页面(压缩后未425k)，明显带宽不够，加大到100M，前端页面图片CND加速后，压测1000并发无问题。压测打卡接口，1000并发连接超时失败率20%，800并发连接超时失败率10%。<br>压测一个通宵后，本以为平安无事了，结果第二天一早上就卡得不行，原来是后台查询过慢，导致cpu飙升，前台用户查询不到数据，看慢查询发现，时不时有几个查询sql消耗时间过长，show preocesslist也看到异常。先加索引优化，但效果不明显，结果发现是在进行联表查询的时候，大表联了大表，大表牵引本来就是问题，于是对业务表进行了合并，5张表合成一张表，并添加索引，后台查询立马飞快。更新程序后，暂时一切正常了。<br>没想到第二天一早上服务器有出问题了，并发飙升到2万多，有很多insert 语句造成了锁表，而很多的select语句有无法执行。突然意识到myisam使用insert的时候会造成锁表，需要支持并发插入，得修改concurrent_insert=2,；另一方面有个在慢查询中有两个select语句出现很频繁，但耗时不高(0.60s左右)，explain发现居然没有使用索引，立马加上索引，查询耗时降低到0.02s。在无法kill sql进程的情况下，只能进行停止Nginx，重启数据库，重启后一切正常。<br>由于可能并发过高，我们选择了服务器升级，单台数据库可能扛不住。全迁移到阿里云，使用阿里云的数据库，读写分离，一主多从，弹性伸缩。一切ok，监控两日后发现并发在8000左右。</p>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>架构设计的原则：简单、合适高于一切。<br>高并发需考虑带宽，页面缓存压缩、静态数据缓存、接口异步多线程处理。<br>慢查询除了关注耗时过长的sql，还得注意使用频繁的sql。<br>高并发当程序优化到极致后，需考虑服务器优化，读写分离，redis集群等。</p>\n"},{"title":"Docker使用","abbrlink":"docker-notes","date":"2018-06-05T01:44:00.000Z","updated":"2018-06-05T02:02:00.000Z","_content":"\n1. windows7 安装docker，需要利用 docker toolbox 来安装。","source":"_posts/运维/Docker/Docker使用.md","raw":"---\ntitle: Docker使用\ntags: [Docker]\ncategories: Docker\nabbrlink: 'docker-notes'\ndate: 2018-06-05 09:44:00\nupdated: 2018-06-05 10:02:00\n---\n\n1. windows7 安装docker，需要利用 docker toolbox 来安装。","slug":"运维/Docker/Docker使用","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vf009ioshghs0lh4mp","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><ol>\n<li>windows7 安装docker，需要利用 docker toolbox 来安装。</li>\n</ol>\n","excerpt":"","more":"<ol>\n<li>windows7 安装docker，需要利用 docker toolbox 来安装。</li>\n</ol>\n"},{"title":"设计模式——中介者模式","abbrlink":"mediator-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n\n### 示例\n下面看下中介者模式的代码实现\n\n```php\ninterface Mediator{\n    public function createMediator(): void;\n    public function workAll(): void;\n}\n\nclass MyMediator implements Mediator{\n    private User $user1,$user2;\n\n    public function getUser1(): User{\n        return $this->user1;\n    }\n\n    public function getUser2(): User{\n        return $this->user2;\n    }\n\n    public function createMediator(): void{\n        $this->user1 = new User1($this);\n        $this->user2 = new User2($this);\n    }\n\n    public function workAll(): void{\n        $this->user1->work();\n        $this->user2->work();\n    }\n}\n\nabstract class User{\n    private Mediator $mediator;\n\n    public function __construct(Mediator $mediator){\n        $this->mediator = $mediator;\n    }\n\n    public function getMediator(): Mediator{\n        return $this->mediator;\n    }\n\n    public abstract function work():void;\n}\n\nclass User1 extends User{\n    public function __construct(Mediator $mediator){\n        parent::__construct($mediator);\n    }\n    public function work(): void{\n        echo \"user1 exe!\" . PHP_EOL;\n    }\n}\n\nclass User2 extends User{\n    public function __construct(Mediator $mediator){\n        parent::__construct($mediator);\n    }\n\n    public function work(): void{\n        echo \"user2 exe!\" . PHP_EOL;\n    }\n}\n\n\n// 调用\n$mediator = new MyMediator();\n$mediator->createMediator();\n$mediator->workAll();\n/**\n * output:\n * user1 exe!\n * user2 exe!\n * \n */\n\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/中介者模式.md","raw":"---\ntitle: 设计模式——中介者模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'mediator-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n\n### 示例\n下面看下中介者模式的代码实现\n\n```php\ninterface Mediator{\n    public function createMediator(): void;\n    public function workAll(): void;\n}\n\nclass MyMediator implements Mediator{\n    private User $user1,$user2;\n\n    public function getUser1(): User{\n        return $this->user1;\n    }\n\n    public function getUser2(): User{\n        return $this->user2;\n    }\n\n    public function createMediator(): void{\n        $this->user1 = new User1($this);\n        $this->user2 = new User2($this);\n    }\n\n    public function workAll(): void{\n        $this->user1->work();\n        $this->user2->work();\n    }\n}\n\nabstract class User{\n    private Mediator $mediator;\n\n    public function __construct(Mediator $mediator){\n        $this->mediator = $mediator;\n    }\n\n    public function getMediator(): Mediator{\n        return $this->mediator;\n    }\n\n    public abstract function work():void;\n}\n\nclass User1 extends User{\n    public function __construct(Mediator $mediator){\n        parent::__construct($mediator);\n    }\n    public function work(): void{\n        echo \"user1 exe!\" . PHP_EOL;\n    }\n}\n\nclass User2 extends User{\n    public function __construct(Mediator $mediator){\n        parent::__construct($mediator);\n    }\n\n    public function work(): void{\n        echo \"user2 exe!\" . PHP_EOL;\n    }\n}\n\n\n// 调用\n$mediator = new MyMediator();\n$mediator->createMediator();\n$mediator->workAll();\n/**\n * output:\n * user1 exe!\n * user2 exe!\n * \n */\n\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/中介者模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vg009moshg3wblgadb","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下中介者模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Mediator</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMediator</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">workAll</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyMediator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Mediator</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> User <span class=\"variable\">$user1</span>,<span class=\"variable\">$user2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUser1</span>(<span class=\"params\"></span>): <span class=\"title\">User</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;user1;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUser2</span>(<span class=\"params\"></span>): <span class=\"title\">User</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;user2;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMediator</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;user1 = <span class=\"keyword\">new</span> <span class=\"title class_\">User1</span>(<span class=\"variable language_\">$this</span>);</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;user2 = <span class=\"keyword\">new</span> <span class=\"title class_\">User2</span>(<span class=\"variable language_\">$this</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">workAll</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;user1-&gt;<span class=\"title function_ invoke__\">work</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;user2-&gt;<span class=\"title function_ invoke__\">work</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Mediator <span class=\"variable\">$mediator</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator <span class=\"variable\">$mediator</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;mediator = <span class=\"variable\">$mediator</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMediator</span>(<span class=\"params\"></span>): <span class=\"title\">Mediator</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;mediator;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">work</span>(<span class=\"params\"></span>):<span class=\"title\">void</span></span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User1</span> <span class=\"keyword\">extends</span> <span class=\"title\">User</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator <span class=\"variable\">$mediator</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::<span class=\"title function_ invoke__\">__construct</span>(<span class=\"variable\">$mediator</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">work</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"user1 exe!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User2</span> <span class=\"keyword\">extends</span> <span class=\"title\">User</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator <span class=\"variable\">$mediator</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::<span class=\"title function_ invoke__\">__construct</span>(<span class=\"variable\">$mediator</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">work</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"user2 exe!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$mediator</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyMediator</span>();</span><br><span class=\"line\"><span class=\"variable\">$mediator</span>-&gt;<span class=\"title function_ invoke__\">createMediator</span>();</span><br><span class=\"line\"><span class=\"variable\">$mediator</span>-&gt;<span class=\"title function_ invoke__\">workAll</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * user1 exe!</span></span><br><span class=\"line\"><span class=\"comment\"> * user2 exe!</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下中介者模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Mediator</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMediator</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">workAll</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyMediator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Mediator</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> User <span class=\"variable\">$user1</span>,<span class=\"variable\">$user2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUser1</span>(<span class=\"params\"></span>): <span class=\"title\">User</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;user1;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getUser2</span>(<span class=\"params\"></span>): <span class=\"title\">User</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;user2;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMediator</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;user1 = <span class=\"keyword\">new</span> <span class=\"title class_\">User1</span>(<span class=\"variable language_\">$this</span>);</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;user2 = <span class=\"keyword\">new</span> <span class=\"title class_\">User2</span>(<span class=\"variable language_\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">workAll</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;user1-&gt;<span class=\"title function_ invoke__\">work</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;user2-&gt;<span class=\"title function_ invoke__\">work</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Mediator <span class=\"variable\">$mediator</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator <span class=\"variable\">$mediator</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;mediator = <span class=\"variable\">$mediator</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMediator</span>(<span class=\"params\"></span>): <span class=\"title\">Mediator</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;mediator;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">work</span>(<span class=\"params\"></span>):<span class=\"title\">void</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User1</span> <span class=\"keyword\">extends</span> <span class=\"title\">User</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator <span class=\"variable\">$mediator</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::<span class=\"title function_ invoke__\">__construct</span>(<span class=\"variable\">$mediator</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">work</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;user1 exe!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User2</span> <span class=\"keyword\">extends</span> <span class=\"title\">User</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Mediator <span class=\"variable\">$mediator</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">parent</span>::<span class=\"title function_ invoke__\">__construct</span>(<span class=\"variable\">$mediator</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">work</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;user2 exe!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$mediator</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyMediator</span>();</span><br><span class=\"line\"><span class=\"variable\">$mediator</span>-&gt;<span class=\"title function_ invoke__\">createMediator</span>();</span><br><span class=\"line\"><span class=\"variable\">$mediator</span>-&gt;<span class=\"title function_ invoke__\">workAll</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * user1 exe!</span></span><br><span class=\"line\"><span class=\"comment\"> * user2 exe!</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——享元模式","abbrlink":"flyweight-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n  享元模式的主要目的是实现对象的共享，即共享池，当系统中对象多的时候可以减少内存的开销，通常与工厂模式一起使用。\n  FlyWeightFactory负责创建和管理享元单元，当一个客户端请求时，工厂需要检查当前对象池中是否有符合条件的对象，如果有，就返回已经存在的对象，如果没有，则创建一个新对象，FlyWeight是超类。一提到共享池，我们很容易联想到Java里面的JDBC连接池，想想每个连接的特点，我们不难总结出：适用于作共享的一些个对象，他们有一些共有的属性，就拿数据库连接池来说，url、driverClassName、username、password及dbname，这些属性对于每个连接来说都是一样的，所以就适合用享元模式来处理，建一个工厂类，将上述类似属性作为内部数据，其它的作为外部数据，在方法调用时，当做参数传进来，这样就节省了空间，减少了实例的数量。\n  \n### 示例\n下面看下享元模式的代码实现\n\n```php\nclass ConnectionPool{\n    private array $pool;\n\n    private string $server = '127.0.0.1';\n    private string $username = 'root';\n    private string $password = 'root';\n    private string $database = 'test';\n\n    private int $poolSize = 100;\n    private static ?ConnectionPool $instance = null;\n\n    public $conn = null;\n\n    public function __construct(){\n        $this->pool = [];\n        for ($i=0; $i<$this->poolSize; $i++){\n            try {\n                $mysqlConn = mysqli_connect($this->server, $this->username, $this->password);\n                if (!$mysqlConn)  die(\"connect error\");\n                mysqli_select_db($mysqlConn,$this->database);\n                mysqli_query($mysqlConn,'SET NAMES utf8');\n                $this->pool[] = $mysqlConn;\n            }catch (Exception $e){\n                die(\"connect error\");\n            }\n        }\n    }\n\n    public function getConnection(){\n        if (count($this->pool) > 0){\n            $this->conn = array_shift($this->pool);\n            return $this->conn;\n        }else{\n            return null;\n        }\n    }\n}\n\n$connPool = new ConnectionPool();\n$conn1 = $connPool->getConnection();\n$conn2 = $connPool->getConnection();\nvar_dump($conn1===$conn2);      //false\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/享元模式.md","raw":"---\ntitle: 设计模式——享元模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'flyweight-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n  享元模式的主要目的是实现对象的共享，即共享池，当系统中对象多的时候可以减少内存的开销，通常与工厂模式一起使用。\n  FlyWeightFactory负责创建和管理享元单元，当一个客户端请求时，工厂需要检查当前对象池中是否有符合条件的对象，如果有，就返回已经存在的对象，如果没有，则创建一个新对象，FlyWeight是超类。一提到共享池，我们很容易联想到Java里面的JDBC连接池，想想每个连接的特点，我们不难总结出：适用于作共享的一些个对象，他们有一些共有的属性，就拿数据库连接池来说，url、driverClassName、username、password及dbname，这些属性对于每个连接来说都是一样的，所以就适合用享元模式来处理，建一个工厂类，将上述类似属性作为内部数据，其它的作为外部数据，在方法调用时，当做参数传进来，这样就节省了空间，减少了实例的数量。\n  \n### 示例\n下面看下享元模式的代码实现\n\n```php\nclass ConnectionPool{\n    private array $pool;\n\n    private string $server = '127.0.0.1';\n    private string $username = 'root';\n    private string $password = 'root';\n    private string $database = 'test';\n\n    private int $poolSize = 100;\n    private static ?ConnectionPool $instance = null;\n\n    public $conn = null;\n\n    public function __construct(){\n        $this->pool = [];\n        for ($i=0; $i<$this->poolSize; $i++){\n            try {\n                $mysqlConn = mysqli_connect($this->server, $this->username, $this->password);\n                if (!$mysqlConn)  die(\"connect error\");\n                mysqli_select_db($mysqlConn,$this->database);\n                mysqli_query($mysqlConn,'SET NAMES utf8');\n                $this->pool[] = $mysqlConn;\n            }catch (Exception $e){\n                die(\"connect error\");\n            }\n        }\n    }\n\n    public function getConnection(){\n        if (count($this->pool) > 0){\n            $this->conn = array_shift($this->pool);\n            return $this->conn;\n        }else{\n            return null;\n        }\n    }\n}\n\n$connPool = new ConnectionPool();\n$conn1 = $connPool->getConnection();\n$conn2 = $connPool->getConnection();\nvar_dump($conn1===$conn2);      //false\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/享元模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vg009qoshg19kigiun","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  享元模式的主要目的是实现对象的共享，即共享池，当系统中对象多的时候可以减少内存的开销，通常与工厂模式一起使用。<br>  FlyWeightFactory负责创建和管理享元单元，当一个客户端请求时，工厂需要检查当前对象池中是否有符合条件的对象，如果有，就返回已经存在的对象，如果没有，则创建一个新对象，FlyWeight是超类。一提到共享池，我们很容易联想到Java里面的JDBC连接池，想想每个连接的特点，我们不难总结出：适用于作共享的一些个对象，他们有一些共有的属性，就拿数据库连接池来说，url、driverClassName、username、password及dbname，这些属性对于每个连接来说都是一样的，所以就适合用享元模式来处理，建一个工厂类，将上述类似属性作为内部数据，其它的作为外部数据，在方法调用时，当做参数传进来，这样就节省了空间，减少了实例的数量。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下享元模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConnectionPool</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">array</span> <span class=\"variable\">$pool</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$server</span> = <span class=\"string\">'127.0.0.1'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$username</span> = <span class=\"string\">'root'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$password</span> = <span class=\"string\">'root'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$database</span> = <span class=\"string\">'test'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"variable\">$poolSize</span> = <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> ?ConnectionPool <span class=\"variable\">$instance</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"variable\">$conn</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;pool = [];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">0</span>; <span class=\"variable\">$i</span>&lt;<span class=\"variable language_\">$this</span>-&gt;poolSize; <span class=\"variable\">$i</span>++){</span><br><span class=\"line\">            <span class=\"keyword\">try</span> {</span><br><span class=\"line\">                <span class=\"variable\">$mysqlConn</span> = <span class=\"title function_ invoke__\">mysqli_connect</span>(<span class=\"variable\">$this</span>-&gt;server, <span class=\"variable\">$this</span>-&gt;username, <span class=\"variable\">$this</span>-&gt;password);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!<span class=\"variable\">$mysqlConn</span>)  <span class=\"keyword\">die</span>(<span class=\"string\">\"connect error\"</span>);</span><br><span class=\"line\">                <span class=\"title function_ invoke__\">mysqli_select_db</span>(<span class=\"variable\">$mysqlConn</span>,<span class=\"variable\">$this</span>-&gt;database);</span><br><span class=\"line\">                <span class=\"title function_ invoke__\">mysqli_query</span>(<span class=\"variable\">$mysqlConn</span>,<span class=\"string\">'SET NAMES utf8'</span>);</span><br><span class=\"line\">                <span class=\"variable language_\">$this</span>-&gt;pool[] = <span class=\"variable\">$mysqlConn</span>;</span><br><span class=\"line\">            }<span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> <span class=\"variable\">$e</span>){</span><br><span class=\"line\">                <span class=\"keyword\">die</span>(<span class=\"string\">\"connect error\"</span>);</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getConnection</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$this</span>-&gt;pool) &gt; <span class=\"number\">0</span>){</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;conn = <span class=\"title function_ invoke__\">array_shift</span>(<span class=\"variable\">$this</span>-&gt;pool);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;conn;</span><br><span class=\"line\">        }<span class=\"keyword\">else</span>{</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$connPool</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ConnectionPool</span>();</span><br><span class=\"line\"><span class=\"variable\">$conn1</span> = <span class=\"variable\">$connPool</span>-&gt;<span class=\"title function_ invoke__\">getConnection</span>();</span><br><span class=\"line\"><span class=\"variable\">$conn2</span> = <span class=\"variable\">$connPool</span>-&gt;<span class=\"title function_ invoke__\">getConnection</span>();</span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$conn1</span>===<span class=\"variable\">$conn2</span>);      <span class=\"comment\">//false</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  享元模式的主要目的是实现对象的共享，即共享池，当系统中对象多的时候可以减少内存的开销，通常与工厂模式一起使用。<br>  FlyWeightFactory负责创建和管理享元单元，当一个客户端请求时，工厂需要检查当前对象池中是否有符合条件的对象，如果有，就返回已经存在的对象，如果没有，则创建一个新对象，FlyWeight是超类。一提到共享池，我们很容易联想到Java里面的JDBC连接池，想想每个连接的特点，我们不难总结出：适用于作共享的一些个对象，他们有一些共有的属性，就拿数据库连接池来说，url、driverClassName、username、password及dbname，这些属性对于每个连接来说都是一样的，所以就适合用享元模式来处理，建一个工厂类，将上述类似属性作为内部数据，其它的作为外部数据，在方法调用时，当做参数传进来，这样就节省了空间，减少了实例的数量。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下享元模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConnectionPool</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">array</span> <span class=\"variable\">$pool</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$server</span> = <span class=\"string\">&#x27;127.0.0.1&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$username</span> = <span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$password</span> = <span class=\"string\">&#x27;root&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$database</span> = <span class=\"string\">&#x27;test&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"variable\">$poolSize</span> = <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> ?ConnectionPool <span class=\"variable\">$instance</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"variable\">$conn</span> = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;pool = [];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"variable\">$i</span>=<span class=\"number\">0</span>; <span class=\"variable\">$i</span>&lt;<span class=\"variable language_\">$this</span>-&gt;poolSize; <span class=\"variable\">$i</span>++)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                <span class=\"variable\">$mysqlConn</span> = <span class=\"title function_ invoke__\">mysqli_connect</span>(<span class=\"variable\">$this</span>-&gt;server, <span class=\"variable\">$this</span>-&gt;username, <span class=\"variable\">$this</span>-&gt;password);</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (!<span class=\"variable\">$mysqlConn</span>)  <span class=\"keyword\">die</span>(<span class=\"string\">&quot;connect error&quot;</span>);</span><br><span class=\"line\">                <span class=\"title function_ invoke__\">mysqli_select_db</span>(<span class=\"variable\">$mysqlConn</span>,<span class=\"variable\">$this</span>-&gt;database);</span><br><span class=\"line\">                <span class=\"title function_ invoke__\">mysqli_query</span>(<span class=\"variable\">$mysqlConn</span>,<span class=\"string\">&#x27;SET NAMES utf8&#x27;</span>);</span><br><span class=\"line\">                <span class=\"variable language_\">$this</span>-&gt;pool[] = <span class=\"variable\">$mysqlConn</span>;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">catch</span> (<span class=\"built_in\">Exception</span> <span class=\"variable\">$e</span>)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">die</span>(<span class=\"string\">&quot;connect error&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getConnection</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"title function_ invoke__\">count</span>(<span class=\"variable\">$this</span>-&gt;pool) &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;conn = <span class=\"title function_ invoke__\">array_shift</span>(<span class=\"variable\">$this</span>-&gt;pool);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;conn;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$connPool</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ConnectionPool</span>();</span><br><span class=\"line\"><span class=\"variable\">$conn1</span> = <span class=\"variable\">$connPool</span>-&gt;<span class=\"title function_ invoke__\">getConnection</span>();</span><br><span class=\"line\"><span class=\"variable\">$conn2</span> = <span class=\"variable\">$connPool</span>-&gt;<span class=\"title function_ invoke__\">getConnection</span>();</span><br><span class=\"line\"><span class=\"title function_ invoke__\">var_dump</span>(<span class=\"variable\">$conn1</span>===<span class=\"variable\">$conn2</span>);      <span class=\"comment\">//false</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——代理模式","abbrlink":"proxy-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n其实每个模式名称就表明了该模式的作用，代理模式就是多一个代理类出来，替原对象进行一些操作，比如我们在租房子的时候回去找中介，为什么呢？因为你对该地区房屋的信息掌握的不够全面，希望找一个更熟悉的人去帮你做，此处的代理就是这个意思。再如我们有的时候打官司，我们需要请律师，因为律师在法律方面有专长，可以替我们进行操作，表达我们的想法。\n\n### 示例\n下面看下代理模式的代码实现\n\n```php\n// 创建接口Sourceable\ninterface Sourceable{\n    public function method();\n}\n\n// 类Source实现接口Sourceable\nclass Source implements Sourceable{\n    public function method(){\n        echo \"the original method!\" . PHP_EOL;\n    }\n}\n\n// 代理类Proxy实现Sourceable\nclass Proxy implements Sourceable{\n    private Source $source;\n    public function __construct(){\n        $this->source = new Source();\n    }\n    public function method(){\n        $this->before();\n        $this->source->method();\n        $this->after();\n    }\n    private function before(){\n        echo \"before proxy!\" . PHP_EOL;\n    }\n    private function after(){\n        echo \"after proxy!\" . PHP_EOL;\n    }\n}\n\n\n// 调用\n$source = new Proxy();\n$source->method();\n\n/**\n * output:\n * before proxy!\n * the original method!\n * after proxy!\n * \n */\n```\n\n### 总结\n如果已有的方法在使用的时候需要对原有的方法进行改进，此时有两种办法：\n    1、修改原有的方法来适应。这样违反了“对扩展开放，对修改关闭”的原则。\n    2、就是采用一个代理类调用原有的方法，且对产生的结果进行控制。这种方法就是代理模式。\n使用代理模式，可以将功能划分的更加清晰，有助于后期维护！","source":"_posts/系统设计及优化/设计模式/代理模式.md","raw":"---\ntitle: 设计模式——代理模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'proxy-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n其实每个模式名称就表明了该模式的作用，代理模式就是多一个代理类出来，替原对象进行一些操作，比如我们在租房子的时候回去找中介，为什么呢？因为你对该地区房屋的信息掌握的不够全面，希望找一个更熟悉的人去帮你做，此处的代理就是这个意思。再如我们有的时候打官司，我们需要请律师，因为律师在法律方面有专长，可以替我们进行操作，表达我们的想法。\n\n### 示例\n下面看下代理模式的代码实现\n\n```php\n// 创建接口Sourceable\ninterface Sourceable{\n    public function method();\n}\n\n// 类Source实现接口Sourceable\nclass Source implements Sourceable{\n    public function method(){\n        echo \"the original method!\" . PHP_EOL;\n    }\n}\n\n// 代理类Proxy实现Sourceable\nclass Proxy implements Sourceable{\n    private Source $source;\n    public function __construct(){\n        $this->source = new Source();\n    }\n    public function method(){\n        $this->before();\n        $this->source->method();\n        $this->after();\n    }\n    private function before(){\n        echo \"before proxy!\" . PHP_EOL;\n    }\n    private function after(){\n        echo \"after proxy!\" . PHP_EOL;\n    }\n}\n\n\n// 调用\n$source = new Proxy();\n$source->method();\n\n/**\n * output:\n * before proxy!\n * the original method!\n * after proxy!\n * \n */\n```\n\n### 总结\n如果已有的方法在使用的时候需要对原有的方法进行改进，此时有两种办法：\n    1、修改原有的方法来适应。这样违反了“对扩展开放，对修改关闭”的原则。\n    2、就是采用一个代理类调用原有的方法，且对产生的结果进行控制。这种方法就是代理模式。\n使用代理模式，可以将功能划分的更加清晰，有助于后期维护！","slug":"系统设计及优化/设计模式/代理模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vh009uoshg5pge94sl","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>其实每个模式名称就表明了该模式的作用，代理模式就是多一个代理类出来，替原对象进行一些操作，比如我们在租房子的时候回去找中介，为什么呢？因为你对该地区房屋的信息掌握的不够全面，希望找一个更熟悉的人去帮你做，此处的代理就是这个意思。再如我们有的时候打官司，我们需要请律师，因为律师在法律方面有专长，可以替我们进行操作，表达我们的想法。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下代理模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建接口Sourceable</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 类Source实现接口Sourceable</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Source</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"the original method!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 代理类Proxy实现Sourceable</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Proxy</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Source <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source = <span class=\"keyword\">new</span> <span class=\"title class_\">Source</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">before</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">after</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">before</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"before proxy!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">after</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"after proxy!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$source</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Proxy</span>();</span><br><span class=\"line\"><span class=\"variable\">$source</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * before proxy!</span></span><br><span class=\"line\"><span class=\"comment\"> * the original method!</span></span><br><span class=\"line\"><span class=\"comment\"> * after proxy!</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>如果已有的方法在使用的时候需要对原有的方法进行改进，此时有两种办法：<br>    1、修改原有的方法来适应。这样违反了“对扩展开放，对修改关闭”的原则。<br>    2、就是采用一个代理类调用原有的方法，且对产生的结果进行控制。这种方法就是代理模式。<br>使用代理模式，可以将功能划分的更加清晰，有助于后期维护！</p>\n","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>其实每个模式名称就表明了该模式的作用，代理模式就是多一个代理类出来，替原对象进行一些操作，比如我们在租房子的时候回去找中介，为什么呢？因为你对该地区房屋的信息掌握的不够全面，希望找一个更熟悉的人去帮你做，此处的代理就是这个意思。再如我们有的时候打官司，我们需要请律师，因为律师在法律方面有专长，可以替我们进行操作，表达我们的想法。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下代理模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建接口Sourceable</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 类Source实现接口Sourceable</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Source</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;the original method!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 代理类Proxy实现Sourceable</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Proxy</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Source <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source = <span class=\"keyword\">new</span> <span class=\"title class_\">Source</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">before</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">after</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">before</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;before proxy!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">after</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;after proxy!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$source</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Proxy</span>();</span><br><span class=\"line\"><span class=\"variable\">$source</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * before proxy!</span></span><br><span class=\"line\"><span class=\"comment\"> * the original method!</span></span><br><span class=\"line\"><span class=\"comment\"> * after proxy!</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>如果已有的方法在使用的时候需要对原有的方法进行改进，此时有两种办法：<br>    1、修改原有的方法来适应。这样违反了“对扩展开放，对修改关闭”的原则。<br>    2、就是采用一个代理类调用原有的方法，且对产生的结果进行控制。这种方法就是代理模式。<br>使用代理模式，可以将功能划分的更加清晰，有助于后期维护！</p>\n"},{"title":"设计模式——单例模式","abbrlink":"singleton-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n单例对象（Singleton）是一种常用的设计模式。在Java应用中，单例对象能保证在一个JVM中，该对象只有一个实例存在。\n单例模式适用于经常被访问的对象，或是创建和销毁需要调用大量资源和时间的对象，使用单例模式可以避免频繁创建和销毁对象。单例模式的常用实现方法有 4 种：饿汉模式、懒汉模式、静态内部类和枚举。从写法的简洁性、线程安全性和代码的易懂性等方面综合来看，博主比较推荐使用枚举或懒汉模式来实现单例模式。\n\n### 示例\n下面看下单例模式的代码实现\n\n```php\nclass Singleton{\n    //持有私有静态实例，防止被引用，此处赋值为null，目的是实现延迟加载\n    private static ?Singleton $instance=null;\n\n    // 禁止被实例化\n    private function __construct(){}\n\n    // 禁止被克隆\n    private function __clone(){}\n\n    public static function getInstance(): Singleton{\n        //if (!self::$instance){    有线程安全问题\n        if (!self::$instance instanceof self){\n            self::$instance = new self();\n        }\n        return self::$instance;\n    }\n}\n```\n\n如果使用<code>if (!self::$instance){ </code>会有线程安全问题\n- a. A、B线程同时进入了getInstance \n- b. A首先进入if判断，由于instance为null，所以它执行self::$instance = new self();\n- c. 由于内存的优化机制，会先划出了一些分配给Singleton实例的空白内存，并赋值给instance成员（注意此时内存没有开始初始化这个实例），然后A离开了if代码块。\n- d. B进入if判断，由于instance此时不是null，因此它马上离开了if代码块并将结果返回给调用该方法的程序。\n- e. 此时B线程打算使用Singleton实例，却发现它没有被初始化，于是错误发生了。 \n改为<code>if (!self::$instance instanceof self){</code>即可\n\n### 总结\n单例模式有几个好处：\n    1、某些类创建比较频繁，对于一些大型的对象，这是一笔很大的系统开销。\n    2、省去了new操作符，降低了系统内存的使用频率，减轻GC压力。\n    3、有些类如交易所的核心交易引擎，控制着交易流程，如果该类可以创建多个的话，系统完全乱了。（比如一个军队出现了多个司令员同时指挥，肯定会乱成一团），所以只有使用单例模式，才能保证核心交易服务器独立控制整个流程。","source":"_posts/系统设计及优化/设计模式/单例模式.md","raw":"---\ntitle: 设计模式——单例模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'singleton-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n单例对象（Singleton）是一种常用的设计模式。在Java应用中，单例对象能保证在一个JVM中，该对象只有一个实例存在。\n单例模式适用于经常被访问的对象，或是创建和销毁需要调用大量资源和时间的对象，使用单例模式可以避免频繁创建和销毁对象。单例模式的常用实现方法有 4 种：饿汉模式、懒汉模式、静态内部类和枚举。从写法的简洁性、线程安全性和代码的易懂性等方面综合来看，博主比较推荐使用枚举或懒汉模式来实现单例模式。\n\n### 示例\n下面看下单例模式的代码实现\n\n```php\nclass Singleton{\n    //持有私有静态实例，防止被引用，此处赋值为null，目的是实现延迟加载\n    private static ?Singleton $instance=null;\n\n    // 禁止被实例化\n    private function __construct(){}\n\n    // 禁止被克隆\n    private function __clone(){}\n\n    public static function getInstance(): Singleton{\n        //if (!self::$instance){    有线程安全问题\n        if (!self::$instance instanceof self){\n            self::$instance = new self();\n        }\n        return self::$instance;\n    }\n}\n```\n\n如果使用<code>if (!self::$instance){ </code>会有线程安全问题\n- a. A、B线程同时进入了getInstance \n- b. A首先进入if判断，由于instance为null，所以它执行self::$instance = new self();\n- c. 由于内存的优化机制，会先划出了一些分配给Singleton实例的空白内存，并赋值给instance成员（注意此时内存没有开始初始化这个实例），然后A离开了if代码块。\n- d. B进入if判断，由于instance此时不是null，因此它马上离开了if代码块并将结果返回给调用该方法的程序。\n- e. 此时B线程打算使用Singleton实例，却发现它没有被初始化，于是错误发生了。 \n改为<code>if (!self::$instance instanceof self){</code>即可\n\n### 总结\n单例模式有几个好处：\n    1、某些类创建比较频繁，对于一些大型的对象，这是一笔很大的系统开销。\n    2、省去了new操作符，降低了系统内存的使用频率，减轻GC压力。\n    3、有些类如交易所的核心交易引擎，控制着交易流程，如果该类可以创建多个的话，系统完全乱了。（比如一个军队出现了多个司令员同时指挥，肯定会乱成一团），所以只有使用单例模式，才能保证核心交易服务器独立控制整个流程。","slug":"系统设计及优化/设计模式/单例模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vi009xoshg4o1c2m68","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>单例对象（Singleton）是一种常用的设计模式。在Java应用中，单例对象能保证在一个JVM中，该对象只有一个实例存在。<br>单例模式适用于经常被访问的对象，或是创建和销毁需要调用大量资源和时间的对象，使用单例模式可以避免频繁创建和销毁对象。单例模式的常用实现方法有 4 种：饿汉模式、懒汉模式、静态内部类和枚举。从写法的简洁性、线程安全性和代码的易懂性等方面综合来看，博主比较推荐使用枚举或懒汉模式来实现单例模式。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下单例模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>{</span><br><span class=\"line\">    <span class=\"comment\">//持有私有静态实例，防止被引用，此处赋值为null，目的是实现延迟加载</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> ?Singleton <span class=\"variable\">$instance</span>=<span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 禁止被实例化</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 禁止被克隆</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__clone</span>(<span class=\"params\"></span>)</span>{}</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInstance</span>(<span class=\"params\"></span>): <span class=\"title\">Singleton</span></span>{</span><br><span class=\"line\">        <span class=\"comment\">//if (!self::$instance){    有线程安全问题</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span> <span class=\"keyword\">instanceof</span> <span class=\"built_in\">self</span>){</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span> = <span class=\"keyword\">new</span> <span class=\"built_in\">self</span>();</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n<p>如果使用<code>if (!self::$instance){ </code>会有线程安全问题</p>\n<ul>\n<li>a. A、B线程同时进入了getInstance </li>\n<li>b. A首先进入if判断，由于instance为null，所以它执行self::$instance = new self();</li>\n<li>c. 由于内存的优化机制，会先划出了一些分配给Singleton实例的空白内存，并赋值给instance成员（注意此时内存没有开始初始化这个实例），然后A离开了if代码块。</li>\n<li>d. B进入if判断，由于instance此时不是null，因此它马上离开了if代码块并将结果返回给调用该方法的程序。</li>\n<li>e. 此时B线程打算使用Singleton实例，却发现它没有被初始化，于是错误发生了。<br>改为<code>if (!self::$instance instanceof self){</code>即可</li>\n</ul>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>单例模式有几个好处：<br>    1、某些类创建比较频繁，对于一些大型的对象，这是一笔很大的系统开销。<br>    2、省去了new操作符，降低了系统内存的使用频率，减轻GC压力。<br>    3、有些类如交易所的核心交易引擎，控制着交易流程，如果该类可以创建多个的话，系统完全乱了。（比如一个军队出现了多个司令员同时指挥，肯定会乱成一团），所以只有使用单例模式，才能保证核心交易服务器独立控制整个流程。</p>\n","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>单例对象（Singleton）是一种常用的设计模式。在Java应用中，单例对象能保证在一个JVM中，该对象只有一个实例存在。<br>单例模式适用于经常被访问的对象，或是创建和销毁需要调用大量资源和时间的对象，使用单例模式可以避免频繁创建和销毁对象。单例模式的常用实现方法有 4 种：饿汉模式、懒汉模式、静态内部类和枚举。从写法的简洁性、线程安全性和代码的易懂性等方面综合来看，博主比较推荐使用枚举或懒汉模式来实现单例模式。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下单例模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//持有私有静态实例，防止被引用，此处赋值为null，目的是实现延迟加载</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">static</span> ?Singleton <span class=\"variable\">$instance</span>=<span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 禁止被实例化</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 禁止被克隆</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__clone</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getInstance</span>(<span class=\"params\"></span>): <span class=\"title\">Singleton</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//if (!self::$instance)&#123;    有线程安全问题</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span> <span class=\"keyword\">instanceof</span> <span class=\"built_in\">self</span>)&#123;</span><br><span class=\"line\">            <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span> = <span class=\"keyword\">new</span> <span class=\"built_in\">self</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">self</span>::<span class=\"variable\">$instance</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>如果使用<code>if (!self::$instance)&#123; </code>会有线程安全问题</p>\n<ul>\n<li>a. A、B线程同时进入了getInstance </li>\n<li>b. A首先进入if判断，由于instance为null，所以它执行self::$instance = new self();</li>\n<li>c. 由于内存的优化机制，会先划出了一些分配给Singleton实例的空白内存，并赋值给instance成员（注意此时内存没有开始初始化这个实例），然后A离开了if代码块。</li>\n<li>d. B进入if判断，由于instance此时不是null，因此它马上离开了if代码块并将结果返回给调用该方法的程序。</li>\n<li>e. 此时B线程打算使用Singleton实例，却发现它没有被初始化，于是错误发生了。<br>改为<code>if (!self::$instance instanceof self)&#123;</code>即可</li>\n</ul>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>单例模式有几个好处：<br>    1、某些类创建比较频繁，对于一些大型的对象，这是一笔很大的系统开销。<br>    2、省去了new操作符，降低了系统内存的使用频率，减轻GC压力。<br>    3、有些类如交易所的核心交易引擎，控制着交易流程，如果该类可以创建多个的话，系统完全乱了。（比如一个军队出现了多个司令员同时指挥，肯定会乱成一团），所以只有使用单例模式，才能保证核心交易服务器独立控制整个流程。</p>\n"},{"title":"设计模式——原型模式","abbrlink":"prototype-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n  将一个对象作为原型，对其进行复制、克隆，产生一个和原对象类似的新对象。\n  ![](/images/prototype-pattern-1.png)\n### 示例\n下面看下原型模式的代码实现\n\n```php\n// 定义了一个原型\nabstract class Prototype{\n    public $v = 'clone'.PHP_EOL;\n    public function __construct(){\n        echo 'create'.PHP_EOL;\n    }\n    abstract public function __clone();\n}\n\nclass ConcretePrototype1 extends Prototype{\n    public function __clone(){\n\n    }\n    public function init($param){\n        $this->v = $param;\n    }\n}\n\nclass ConcretePrototype2 extends Prototype{\n    //当外部使用clone关键字进行对象克隆时，直接就会进入这个魔术方法中。\n    //在这个魔术方法里面我们可以对属性进行处理，特别是针对引用属性进行一些独特的处理。\n    public function __clone(){\n        $this->v = 'clone 2';\n    }\n}\n\n\n\n// 调用\n$p = new ConcretePrototype1();\n$p->init('hello');\n$p1 = clone $p;    // ConcretePrototype1的__construct不会被执行\necho $p->v.'=='.$p1->v;     // output: create hello==hello\n\n\n$p = new ConcretePrototype2();\n$p2 = clone $p;\necho $p->v.'=='.$p2->v;     // output: create clone ==clone 2\n\n// 浅复制：将一个对象复制后，基本数据类型的变量都会重新创建，而引用类型，指向的还是原对象所指向的。\n// 深复制：将一个对象复制后，不论是基本数据类型还有引用类型，都是重新创建的。简单来说，就是深复制进行了完全彻底的复制，而浅复制不彻底。\n\n```\n\n### 总结\n  特点：减少创建对象时的开销\n  ","source":"_posts/系统设计及优化/设计模式/原型模式.md","raw":"---\ntitle: 设计模式——原型模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'prototype-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n  将一个对象作为原型，对其进行复制、克隆，产生一个和原对象类似的新对象。\n  ![](/images/prototype-pattern-1.png)\n### 示例\n下面看下原型模式的代码实现\n\n```php\n// 定义了一个原型\nabstract class Prototype{\n    public $v = 'clone'.PHP_EOL;\n    public function __construct(){\n        echo 'create'.PHP_EOL;\n    }\n    abstract public function __clone();\n}\n\nclass ConcretePrototype1 extends Prototype{\n    public function __clone(){\n\n    }\n    public function init($param){\n        $this->v = $param;\n    }\n}\n\nclass ConcretePrototype2 extends Prototype{\n    //当外部使用clone关键字进行对象克隆时，直接就会进入这个魔术方法中。\n    //在这个魔术方法里面我们可以对属性进行处理，特别是针对引用属性进行一些独特的处理。\n    public function __clone(){\n        $this->v = 'clone 2';\n    }\n}\n\n\n\n// 调用\n$p = new ConcretePrototype1();\n$p->init('hello');\n$p1 = clone $p;    // ConcretePrototype1的__construct不会被执行\necho $p->v.'=='.$p1->v;     // output: create hello==hello\n\n\n$p = new ConcretePrototype2();\n$p2 = clone $p;\necho $p->v.'=='.$p2->v;     // output: create clone ==clone 2\n\n// 浅复制：将一个对象复制后，基本数据类型的变量都会重新创建，而引用类型，指向的还是原对象所指向的。\n// 深复制：将一个对象复制后，不论是基本数据类型还有引用类型，都是重新创建的。简单来说，就是深复制进行了完全彻底的复制，而浅复制不彻底。\n\n```\n\n### 总结\n  特点：减少创建对象时的开销\n  ","slug":"系统设计及优化/设计模式/原型模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vj00a0oshg4cx7czvb","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  将一个对象作为原型，对其进行复制、克隆，产生一个和原对象类似的新对象。<br>  <img src=\"/images/prototype-pattern-1.png\" alt=\"\"></p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下原型模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 定义了一个原型</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Prototype</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"variable\">$v</span> = <span class=\"string\">'clone'</span>.PHP_EOL;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'create'</span>.PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__clone</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcretePrototype1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Prototype</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__clone</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\"></span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\"><span class=\"variable\">$param</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;v = <span class=\"variable\">$param</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcretePrototype2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Prototype</span></span>{</span><br><span class=\"line\">    <span class=\"comment\">//当外部使用clone关键字进行对象克隆时，直接就会进入这个魔术方法中。</span></span><br><span class=\"line\">    <span class=\"comment\">//在这个魔术方法里面我们可以对属性进行处理，特别是针对引用属性进行一些独特的处理。</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__clone</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;v = <span class=\"string\">'clone 2'</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$p</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ConcretePrototype1</span>();</span><br><span class=\"line\"><span class=\"variable\">$p</span>-&gt;<span class=\"title function_ invoke__\">init</span>(<span class=\"string\">'hello'</span>);</span><br><span class=\"line\"><span class=\"variable\">$p1</span> = <span class=\"keyword\">clone</span> <span class=\"variable\">$p</span>;    <span class=\"comment\">// ConcretePrototype1的__construct不会被执行</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$p</span>-&gt;v.<span class=\"string\">'=='</span>.<span class=\"variable\">$p1</span>-&gt;v;     <span class=\"comment\">// output: create hello==hello</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$p</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ConcretePrototype2</span>();</span><br><span class=\"line\"><span class=\"variable\">$p2</span> = <span class=\"keyword\">clone</span> <span class=\"variable\">$p</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$p</span>-&gt;v.<span class=\"string\">'=='</span>.<span class=\"variable\">$p2</span>-&gt;v;     <span class=\"comment\">// output: create clone ==clone 2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 浅复制：将一个对象复制后，基本数据类型的变量都会重新创建，而引用类型，指向的还是原对象所指向的。</span></span><br><span class=\"line\"><span class=\"comment\">// 深复制：将一个对象复制后，不论是基本数据类型还有引用类型，都是重新创建的。简单来说，就是深复制进行了完全彻底的复制，而浅复制不彻底。</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>  特点：减少创建对象时的开销</p>\n","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  将一个对象作为原型，对其进行复制、克隆，产生一个和原对象类似的新对象。<br>  <img src=\"/images/prototype-pattern-1.png\" alt></p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下原型模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 定义了一个原型</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Prototype</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"variable\">$v</span> = <span class=\"string\">&#x27;clone&#x27;</span>.PHP_EOL;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;create&#x27;</span>.PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__clone</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcretePrototype1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Prototype</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__clone</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\"><span class=\"variable\">$param</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;v = <span class=\"variable\">$param</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcretePrototype2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Prototype</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//当外部使用clone关键字进行对象克隆时，直接就会进入这个魔术方法中。</span></span><br><span class=\"line\">    <span class=\"comment\">//在这个魔术方法里面我们可以对属性进行处理，特别是针对引用属性进行一些独特的处理。</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__clone</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;v = <span class=\"string\">&#x27;clone 2&#x27;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$p</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ConcretePrototype1</span>();</span><br><span class=\"line\"><span class=\"variable\">$p</span>-&gt;<span class=\"title function_ invoke__\">init</span>(<span class=\"string\">&#x27;hello&#x27;</span>);</span><br><span class=\"line\"><span class=\"variable\">$p1</span> = <span class=\"keyword\">clone</span> <span class=\"variable\">$p</span>;    <span class=\"comment\">// ConcretePrototype1的__construct不会被执行</span></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$p</span>-&gt;v.<span class=\"string\">&#x27;==&#x27;</span>.<span class=\"variable\">$p1</span>-&gt;v;     <span class=\"comment\">// output: create hello==hello</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$p</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ConcretePrototype2</span>();</span><br><span class=\"line\"><span class=\"variable\">$p2</span> = <span class=\"keyword\">clone</span> <span class=\"variable\">$p</span>;</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$p</span>-&gt;v.<span class=\"string\">&#x27;==&#x27;</span>.<span class=\"variable\">$p2</span>-&gt;v;     <span class=\"comment\">// output: create clone ==clone 2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 浅复制：将一个对象复制后，基本数据类型的变量都会重新创建，而引用类型，指向的还是原对象所指向的。</span></span><br><span class=\"line\"><span class=\"comment\">// 深复制：将一个对象复制后，不论是基本数据类型还有引用类型，都是重新创建的。简单来说，就是深复制进行了完全彻底的复制，而浅复制不彻底。</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>  特点：减少创建对象时的开销</p>\n"},{"title":"设计模式——命令模式","abbrlink":"command-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n\n### 示例\n下面看下命令模式的代码实现\n\n```php\n// 创建接口Command\ninterface Command{\n    public function exe();\n}\n\nclass Receiver{\n    public function action(){\n        echo \"command received!\";\n    }\n}\n\n// 类MyCommand实现接口Command\nclass MyCommand implements Command{\n    private Receiver $receiver;\n    public function __construct(Receiver $receiver){\n        $this->receiver = $receiver;\n    }\n\n    public function exe(){\n        $this->receiver->action();\n    }\n}\n\nclass Invoker{\n    private Command $command;\n    public function __construct(Command $command){\n        $this->command = $command;\n    }\n    public function action(){\n        $this->command->exe();\n    }\n}\n\n\n// 调用\n$receiver = new Receiver();\n$cmd = new MyCommand($receiver);\n$invoker = new Invoker($cmd);\n$invoker->action();\n// output:  command received!\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/命令模式.md","raw":"---\ntitle: 设计模式——命令模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'command-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n\n### 示例\n下面看下命令模式的代码实现\n\n```php\n// 创建接口Command\ninterface Command{\n    public function exe();\n}\n\nclass Receiver{\n    public function action(){\n        echo \"command received!\";\n    }\n}\n\n// 类MyCommand实现接口Command\nclass MyCommand implements Command{\n    private Receiver $receiver;\n    public function __construct(Receiver $receiver){\n        $this->receiver = $receiver;\n    }\n\n    public function exe(){\n        $this->receiver->action();\n    }\n}\n\nclass Invoker{\n    private Command $command;\n    public function __construct(Command $command){\n        $this->command = $command;\n    }\n    public function action(){\n        $this->command->exe();\n    }\n}\n\n\n// 调用\n$receiver = new Receiver();\n$cmd = new MyCommand($receiver);\n$invoker = new Invoker($cmd);\n$invoker->action();\n// output:  command received!\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/命令模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vj00a2oshg8ggehrjm","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下命令模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建接口Command</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Command</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">exe</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Receiver</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">action</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"command received!\"</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 类MyCommand实现接口Command</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyCommand</span> <span class=\"keyword\">implements</span> <span class=\"title\">Command</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Receiver <span class=\"variable\">$receiver</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Receiver <span class=\"variable\">$receiver</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;receiver = <span class=\"variable\">$receiver</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">exe</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;receiver-&gt;<span class=\"title function_ invoke__\">action</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Invoker</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Command <span class=\"variable\">$command</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Command <span class=\"variable\">$command</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;command = <span class=\"variable\">$command</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">action</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;command-&gt;<span class=\"title function_ invoke__\">exe</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$receiver</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Receiver</span>();</span><br><span class=\"line\"><span class=\"variable\">$cmd</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyCommand</span>(<span class=\"variable\">$receiver</span>);</span><br><span class=\"line\"><span class=\"variable\">$invoker</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Invoker</span>(<span class=\"variable\">$cmd</span>);</span><br><span class=\"line\"><span class=\"variable\">$invoker</span>-&gt;<span class=\"title function_ invoke__\">action</span>();</span><br><span class=\"line\"><span class=\"comment\">// output:  command received!</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下命令模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建接口Command</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Command</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">exe</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Receiver</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">action</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;command received!&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 类MyCommand实现接口Command</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyCommand</span> <span class=\"keyword\">implements</span> <span class=\"title\">Command</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Receiver <span class=\"variable\">$receiver</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Receiver <span class=\"variable\">$receiver</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;receiver = <span class=\"variable\">$receiver</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">exe</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;receiver-&gt;<span class=\"title function_ invoke__\">action</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Invoker</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Command <span class=\"variable\">$command</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Command <span class=\"variable\">$command</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;command = <span class=\"variable\">$command</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">action</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;command-&gt;<span class=\"title function_ invoke__\">exe</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$receiver</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Receiver</span>();</span><br><span class=\"line\"><span class=\"variable\">$cmd</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyCommand</span>(<span class=\"variable\">$receiver</span>);</span><br><span class=\"line\"><span class=\"variable\">$invoker</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Invoker</span>(<span class=\"variable\">$cmd</span>);</span><br><span class=\"line\"><span class=\"variable\">$invoker</span>-&gt;<span class=\"title function_ invoke__\">action</span>();</span><br><span class=\"line\"><span class=\"comment\">// output:  command received!</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——备忘录模式","abbrlink":"memento-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n\n### 示例\n下面看下备忘录模式的代码实现\n\n```php\nclass Original{\n    private string $value;\n\n    public function __construct(string $value){\n        $this->value = $value;\n    }\n\n    public function getValue(): string{\n        return $this->value;\n    }\n\n    public function setValue(string $value){\n        $this->value = $value;\n    }\n\n    public function createMemento(): Memento{\n        return new Memento($this->value);\n    }\n\n    public function restoreMemento(Memento $memento){\n        $this->value = $memento->getValue();\n    }\n}\n\nclass Memento{\n    private string $value;\n\n    public function __construct(string $value){\n        $this->value = $value;\n    }\n\n    public function getValue(): string{\n        return $this->value;\n    }\n\n    public function setValue(string $value){\n        $this->value = $value;\n    }\n}\n\nclass Storage{\n    private Memento $memento;\n\n    public function __construct(Memento $memento){\n        $this->memento = $memento;\n    }\n\n    public function getMemento(): Memento{\n        return $this->memento;\n    }\n\n    public function setMemento(Memento $memento){\n        $this->memento = $memento;\n    }\n}\n\n\n// 调用\n$origi = new Original(\"egg\");\n$storage = new Storage($origi->createMemento());\n\necho \"初始化状态为：\" . $origi->getValue() . PHP_EOL;\n$origi->setValue(\"niu\");\necho \"修改后的状态为：\" . $origi->getValue() . PHP_EOL;\n\n$origi->restoreMemento($storage->getMemento());\necho \"恢复后的状态为：\" . $origi->getValue() . PHP_EOL;\n/**\n * output:\n * 初始化状态为：egg\n * 修改后的状态为：niu\n * 恢复后的状态为：egg\n * \n */\n\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/备忘录模式.md","raw":"---\ntitle: 设计模式——备忘录模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'memento-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n\n### 示例\n下面看下备忘录模式的代码实现\n\n```php\nclass Original{\n    private string $value;\n\n    public function __construct(string $value){\n        $this->value = $value;\n    }\n\n    public function getValue(): string{\n        return $this->value;\n    }\n\n    public function setValue(string $value){\n        $this->value = $value;\n    }\n\n    public function createMemento(): Memento{\n        return new Memento($this->value);\n    }\n\n    public function restoreMemento(Memento $memento){\n        $this->value = $memento->getValue();\n    }\n}\n\nclass Memento{\n    private string $value;\n\n    public function __construct(string $value){\n        $this->value = $value;\n    }\n\n    public function getValue(): string{\n        return $this->value;\n    }\n\n    public function setValue(string $value){\n        $this->value = $value;\n    }\n}\n\nclass Storage{\n    private Memento $memento;\n\n    public function __construct(Memento $memento){\n        $this->memento = $memento;\n    }\n\n    public function getMemento(): Memento{\n        return $this->memento;\n    }\n\n    public function setMemento(Memento $memento){\n        $this->memento = $memento;\n    }\n}\n\n\n// 调用\n$origi = new Original(\"egg\");\n$storage = new Storage($origi->createMemento());\n\necho \"初始化状态为：\" . $origi->getValue() . PHP_EOL;\n$origi->setValue(\"niu\");\necho \"修改后的状态为：\" . $origi->getValue() . PHP_EOL;\n\n$origi->restoreMemento($storage->getMemento());\necho \"恢复后的状态为：\" . $origi->getValue() . PHP_EOL;\n/**\n * output:\n * 初始化状态为：egg\n * 修改后的状态为：niu\n * 恢复后的状态为：egg\n * \n */\n\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/备忘录模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vk00a6oshga68050x1","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下备忘录模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Original</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$value</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$value</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getValue</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;value;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setValue</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$value</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMemento</span>(<span class=\"params\"></span>): <span class=\"title\">Memento</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Memento</span>(<span class=\"variable language_\">$this</span>-&gt;value);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">restoreMemento</span>(<span class=\"params\">Memento <span class=\"variable\">$memento</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$memento</span>-&gt;<span class=\"title function_ invoke__\">getValue</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Memento</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$value</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$value</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getValue</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;value;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setValue</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$value</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Storage</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Memento <span class=\"variable\">$memento</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Memento <span class=\"variable\">$memento</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;memento = <span class=\"variable\">$memento</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMemento</span>(<span class=\"params\"></span>): <span class=\"title\">Memento</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;memento;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setMemento</span>(<span class=\"params\">Memento <span class=\"variable\">$memento</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;memento = <span class=\"variable\">$memento</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$origi</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Original</span>(<span class=\"string\">\"egg\"</span>);</span><br><span class=\"line\"><span class=\"variable\">$storage</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Storage</span>(<span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">createMemento</span>());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"初始化状态为：\"</span> . <span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">getValue</span>() . PHP_EOL;</span><br><span class=\"line\"><span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">setValue</span>(<span class=\"string\">\"niu\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"修改后的状态为：\"</span> . <span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">getValue</span>() . PHP_EOL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">restoreMemento</span>(<span class=\"variable\">$storage</span>-&gt;<span class=\"title function_ invoke__\">getMemento</span>());</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"恢复后的状态为：\"</span> . <span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">getValue</span>() . PHP_EOL;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * 初始化状态为：egg</span></span><br><span class=\"line\"><span class=\"comment\"> * 修改后的状态为：niu</span></span><br><span class=\"line\"><span class=\"comment\"> * 恢复后的状态为：egg</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下备忘录模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Original</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$value</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$value</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getValue</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setValue</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$value</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createMemento</span>(<span class=\"params\"></span>): <span class=\"title\">Memento</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Memento</span>(<span class=\"variable language_\">$this</span>-&gt;value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">restoreMemento</span>(<span class=\"params\">Memento <span class=\"variable\">$memento</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$memento</span>-&gt;<span class=\"title function_ invoke__\">getValue</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Memento</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$value</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$value</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getValue</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setValue</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$value</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Storage</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Memento <span class=\"variable\">$memento</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Memento <span class=\"variable\">$memento</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;memento = <span class=\"variable\">$memento</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMemento</span>(<span class=\"params\"></span>): <span class=\"title\">Memento</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;memento;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setMemento</span>(<span class=\"params\">Memento <span class=\"variable\">$memento</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;memento = <span class=\"variable\">$memento</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$origi</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Original</span>(<span class=\"string\">&quot;egg&quot;</span>);</span><br><span class=\"line\"><span class=\"variable\">$storage</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Storage</span>(<span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">createMemento</span>());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;初始化状态为：&quot;</span> . <span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">getValue</span>() . PHP_EOL;</span><br><span class=\"line\"><span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">setValue</span>(<span class=\"string\">&quot;niu&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;修改后的状态为：&quot;</span> . <span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">getValue</span>() . PHP_EOL;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">restoreMemento</span>(<span class=\"variable\">$storage</span>-&gt;<span class=\"title function_ invoke__\">getMemento</span>());</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;恢复后的状态为：&quot;</span> . <span class=\"variable\">$origi</span>-&gt;<span class=\"title function_ invoke__\">getValue</span>() . PHP_EOL;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * 初始化状态为：egg</span></span><br><span class=\"line\"><span class=\"comment\"> * 修改后的状态为：niu</span></span><br><span class=\"line\"><span class=\"comment\"> * 恢复后的状态为：egg</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——外观模式","abbrlink":"facade-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n  外观模式是为了解决类与类之家的依赖关系的，像spring一样，可以将类和类之间的关系配置到配置文件中，而外观模式就是将他们的关系放在一个Facade类中，降低了类类之间的耦合度，该模式中没有涉及到接口，看下类图：（我们以一个计算机的启动过程为例）\n  \n### 示例\n下面看下外观模式的代码实现\n\n```php\nclass CPU{\n    public function startup(){\n        echo \"cpu startup!\" . PHP_EOL;\n    }\n\n    public function shutdown(){\n        echo \"cpu shutdown!\" . PHP_EOL;\n    }\n}\n\nclass Memory{\n    public function startup(){\n        echo \"memory startup!\" . PHP_EOL;\n    }\n\n    public function shutdown(){\n        echo \"memory shutdown!\" . PHP_EOL;\n    }\n}\n\nclass Disk{\n    public function startup(){\n        echo \"disk startup!\" . PHP_EOL;\n    }\n\n    public function shutdown(){\n        echo \"disk shutdown!\" . PHP_EOL;\n    }\n}\n\nclass Computer{\n    private CPU $cpu;\n    private Memory $memory;\n    private Disk $disk;\n\n    public function __construct(){\n        $this->cpu = new CPU();\n        $this->memory = new Memory();\n        $this->disk = new Disk();\n    }\n\n    public function startup(){\n        echo \"start the computer!\" . PHP_EOL;\n        $this->cpu->startup();\n        $this->memory->startup();\n        $this->disk->startup();\n        echo \"start computer finished!\" . PHP_EOL;\n    }\n\n    public function shutdown(){\n        echo \"begin to close th computer!\" . PHP_EOL;\n        $this->cpu->shutdown();\n        $this->memory->shutdown();\n        $this->disk->shutdown();\n        echo \"computer closed!\" . PHP_EOL;\n    }\n}\n\n\n//调用\n$computer = new Computer();\n$computer->startup();\n$computer->shutdown();\n\n/**\n * output:\n *\nstart the computer!\ncpu startup!\nmemory startup!\ndisk startup!\nstart computer finished!\nbegin to close th computer!\ncpu shutdown!\nmemory shutdown!\ndisk shutdown!\ncomputer closed!\n\n */\n\n```\n\n### 总结\n  如果我们没有Computer类，那么，CPU、Memory、Disk他们之间将会相互持有实例，产生关系，这样会造成严重的依赖，修改一个类，可能会带来其他类的修改，这不是我们想要看到的，有了Computer类，他们之间的关系被放在了Computer类里，这样就起到了解耦的作用，这，就是外观模式！","source":"_posts/系统设计及优化/设计模式/外观模式.md","raw":"---\ntitle: 设计模式——外观模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'facade-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n  外观模式是为了解决类与类之家的依赖关系的，像spring一样，可以将类和类之间的关系配置到配置文件中，而外观模式就是将他们的关系放在一个Facade类中，降低了类类之间的耦合度，该模式中没有涉及到接口，看下类图：（我们以一个计算机的启动过程为例）\n  \n### 示例\n下面看下外观模式的代码实现\n\n```php\nclass CPU{\n    public function startup(){\n        echo \"cpu startup!\" . PHP_EOL;\n    }\n\n    public function shutdown(){\n        echo \"cpu shutdown!\" . PHP_EOL;\n    }\n}\n\nclass Memory{\n    public function startup(){\n        echo \"memory startup!\" . PHP_EOL;\n    }\n\n    public function shutdown(){\n        echo \"memory shutdown!\" . PHP_EOL;\n    }\n}\n\nclass Disk{\n    public function startup(){\n        echo \"disk startup!\" . PHP_EOL;\n    }\n\n    public function shutdown(){\n        echo \"disk shutdown!\" . PHP_EOL;\n    }\n}\n\nclass Computer{\n    private CPU $cpu;\n    private Memory $memory;\n    private Disk $disk;\n\n    public function __construct(){\n        $this->cpu = new CPU();\n        $this->memory = new Memory();\n        $this->disk = new Disk();\n    }\n\n    public function startup(){\n        echo \"start the computer!\" . PHP_EOL;\n        $this->cpu->startup();\n        $this->memory->startup();\n        $this->disk->startup();\n        echo \"start computer finished!\" . PHP_EOL;\n    }\n\n    public function shutdown(){\n        echo \"begin to close th computer!\" . PHP_EOL;\n        $this->cpu->shutdown();\n        $this->memory->shutdown();\n        $this->disk->shutdown();\n        echo \"computer closed!\" . PHP_EOL;\n    }\n}\n\n\n//调用\n$computer = new Computer();\n$computer->startup();\n$computer->shutdown();\n\n/**\n * output:\n *\nstart the computer!\ncpu startup!\nmemory startup!\ndisk startup!\nstart computer finished!\nbegin to close th computer!\ncpu shutdown!\nmemory shutdown!\ndisk shutdown!\ncomputer closed!\n\n */\n\n```\n\n### 总结\n  如果我们没有Computer类，那么，CPU、Memory、Disk他们之间将会相互持有实例，产生关系，这样会造成严重的依赖，修改一个类，可能会带来其他类的修改，这不是我们想要看到的，有了Computer类，他们之间的关系被放在了Computer类里，这样就起到了解耦的作用，这，就是外观模式！","slug":"系统设计及优化/设计模式/外观模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vk00a8oshg65u3dbpj","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  外观模式是为了解决类与类之家的依赖关系的，像spring一样，可以将类和类之间的关系配置到配置文件中，而外观模式就是将他们的关系放在一个Facade类中，降低了类类之间的耦合度，该模式中没有涉及到接口，看下类图：（我们以一个计算机的启动过程为例）</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下外观模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CPU</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">startup</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"cpu startup!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shutdown</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"cpu shutdown!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Memory</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">startup</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"memory startup!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shutdown</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"memory shutdown!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Disk</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">startup</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"disk startup!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shutdown</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"disk shutdown!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Computer</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> CPU <span class=\"variable\">$cpu</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Memory <span class=\"variable\">$memory</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Disk <span class=\"variable\">$disk</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;cpu = <span class=\"keyword\">new</span> <span class=\"title function_ invoke__\">CPU</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;memory = <span class=\"keyword\">new</span> <span class=\"title class_\">Memory</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;disk = <span class=\"keyword\">new</span> <span class=\"title class_\">Disk</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">startup</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"start the computer!\"</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;cpu-&gt;<span class=\"title function_ invoke__\">startup</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;memory-&gt;<span class=\"title function_ invoke__\">startup</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;disk-&gt;<span class=\"title function_ invoke__\">startup</span>();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"start computer finished!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shutdown</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"begin to close th computer!\"</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;cpu-&gt;<span class=\"title function_ invoke__\">shutdown</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;memory-&gt;<span class=\"title function_ invoke__\">shutdown</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;disk-&gt;<span class=\"title function_ invoke__\">shutdown</span>();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"computer closed!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//调用</span></span><br><span class=\"line\"><span class=\"variable\">$computer</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Computer</span>();</span><br><span class=\"line\"><span class=\"variable\">$computer</span>-&gt;<span class=\"title function_ invoke__\">startup</span>();</span><br><span class=\"line\"><span class=\"variable\">$computer</span>-&gt;<span class=\"title function_ invoke__\">shutdown</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\">start the computer!</span></span><br><span class=\"line\"><span class=\"comment\">cpu startup!</span></span><br><span class=\"line\"><span class=\"comment\">memory startup!</span></span><br><span class=\"line\"><span class=\"comment\">disk startup!</span></span><br><span class=\"line\"><span class=\"comment\">start computer finished!</span></span><br><span class=\"line\"><span class=\"comment\">begin to close th computer!</span></span><br><span class=\"line\"><span class=\"comment\">cpu shutdown!</span></span><br><span class=\"line\"><span class=\"comment\">memory shutdown!</span></span><br><span class=\"line\"><span class=\"comment\">disk shutdown!</span></span><br><span class=\"line\"><span class=\"comment\">computer closed!</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>  如果我们没有Computer类，那么，CPU、Memory、Disk他们之间将会相互持有实例，产生关系，这样会造成严重的依赖，修改一个类，可能会带来其他类的修改，这不是我们想要看到的，有了Computer类，他们之间的关系被放在了Computer类里，这样就起到了解耦的作用，这，就是外观模式！</p>\n","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  外观模式是为了解决类与类之家的依赖关系的，像spring一样，可以将类和类之间的关系配置到配置文件中，而外观模式就是将他们的关系放在一个Facade类中，降低了类类之间的耦合度，该模式中没有涉及到接口，看下类图：（我们以一个计算机的启动过程为例）</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下外观模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CPU</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">startup</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;cpu startup!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shutdown</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;cpu shutdown!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Memory</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">startup</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;memory startup!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shutdown</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;memory shutdown!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Disk</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">startup</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;disk startup!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shutdown</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;disk shutdown!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Computer</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> CPU <span class=\"variable\">$cpu</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Memory <span class=\"variable\">$memory</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Disk <span class=\"variable\">$disk</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;cpu = <span class=\"keyword\">new</span> <span class=\"title function_ invoke__\">CPU</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;memory = <span class=\"keyword\">new</span> <span class=\"title class_\">Memory</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;disk = <span class=\"keyword\">new</span> <span class=\"title class_\">Disk</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">startup</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;start the computer!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;cpu-&gt;<span class=\"title function_ invoke__\">startup</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;memory-&gt;<span class=\"title function_ invoke__\">startup</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;disk-&gt;<span class=\"title function_ invoke__\">startup</span>();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;start computer finished!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">shutdown</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;begin to close th computer!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;cpu-&gt;<span class=\"title function_ invoke__\">shutdown</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;memory-&gt;<span class=\"title function_ invoke__\">shutdown</span>();</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;disk-&gt;<span class=\"title function_ invoke__\">shutdown</span>();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;computer closed!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//调用</span></span><br><span class=\"line\"><span class=\"variable\">$computer</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Computer</span>();</span><br><span class=\"line\"><span class=\"variable\">$computer</span>-&gt;<span class=\"title function_ invoke__\">startup</span>();</span><br><span class=\"line\"><span class=\"variable\">$computer</span>-&gt;<span class=\"title function_ invoke__\">shutdown</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\">start the computer!</span></span><br><span class=\"line\"><span class=\"comment\">cpu startup!</span></span><br><span class=\"line\"><span class=\"comment\">memory startup!</span></span><br><span class=\"line\"><span class=\"comment\">disk startup!</span></span><br><span class=\"line\"><span class=\"comment\">start computer finished!</span></span><br><span class=\"line\"><span class=\"comment\">begin to close th computer!</span></span><br><span class=\"line\"><span class=\"comment\">cpu shutdown!</span></span><br><span class=\"line\"><span class=\"comment\">memory shutdown!</span></span><br><span class=\"line\"><span class=\"comment\">disk shutdown!</span></span><br><span class=\"line\"><span class=\"comment\">computer closed!</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>  如果我们没有Computer类，那么，CPU、Memory、Disk他们之间将会相互持有实例，产生关系，这样会造成严重的依赖，修改一个类，可能会带来其他类的修改，这不是我们想要看到的，有了Computer类，他们之间的关系被放在了Computer类里，这样就起到了解耦的作用，这，就是外观模式！</p>\n"},{"title":"设计模式——工厂方法模式","abbrlink":"factory-method-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n  创建一个工厂接口和创建多个工厂实现类，这样一旦需要增加新的功能，直接增加新的工厂类就可以了，不需要修改之前的代码。\n  \n### 示例\n下面看下工厂方法模式的代码实现\n\n```php\n// 创建公共接口\ninterface Sender{\n    public function send();\n}\n\n// 创建两个实现类\nclass MailSender implements Sender{\n    public function send(){\n        print \"mail send\";\n    }\n}\n\nclass SmsSender implements Sender{\n    public function send(){\n        print \"sms send\";\n    }\n}\n\n// 工厂类接口\ninterface Provider{\n    public function produce(): Sender;\n}\n\n// 实现工厂类\nclass SendMailFactory implements Provider{\n    public function produce(): Sender{\n        return new MailSender();\n    }\n}\n\nclass SendSmsFactory implements Provider{\n    public function produce(): Sender{\n        return new SmsSender();\n    }\n}\n\n// test\n$sender = (new SendMailFactory())->produce();\n$sender->send();\n// output: mail send\n\n```\n\n### 总结\n  优点：扩展性好。如果需要添加个企业微信推送，只需做一个实现类，实现Sender接口，同时做一个工厂类，实现Provider接口，就OK了。","source":"_posts/系统设计及优化/设计模式/工厂方法模式.md","raw":"---\ntitle: 设计模式——工厂方法模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'factory-method-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n  创建一个工厂接口和创建多个工厂实现类，这样一旦需要增加新的功能，直接增加新的工厂类就可以了，不需要修改之前的代码。\n  \n### 示例\n下面看下工厂方法模式的代码实现\n\n```php\n// 创建公共接口\ninterface Sender{\n    public function send();\n}\n\n// 创建两个实现类\nclass MailSender implements Sender{\n    public function send(){\n        print \"mail send\";\n    }\n}\n\nclass SmsSender implements Sender{\n    public function send(){\n        print \"sms send\";\n    }\n}\n\n// 工厂类接口\ninterface Provider{\n    public function produce(): Sender;\n}\n\n// 实现工厂类\nclass SendMailFactory implements Provider{\n    public function produce(): Sender{\n        return new MailSender();\n    }\n}\n\nclass SendSmsFactory implements Provider{\n    public function produce(): Sender{\n        return new SmsSender();\n    }\n}\n\n// test\n$sender = (new SendMailFactory())->produce();\n$sender->send();\n// output: mail send\n\n```\n\n### 总结\n  优点：扩展性好。如果需要添加个企业微信推送，只需做一个实现类，实现Sender接口，同时做一个工厂类，实现Provider接口，就OK了。","slug":"系统设计及优化/设计模式/工厂方法模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vl00adoshgdwcs76vd","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  创建一个工厂接口和创建多个工厂实现类，这样一旦需要增加新的功能，直接增加新的工厂类就可以了，不需要修改之前的代码。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下工厂方法模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建公共接口</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sender</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建两个实现类</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MailSender</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sender</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">\"mail send\"</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SmsSender</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sender</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">\"sms send\"</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 工厂类接口</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Provider</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">produce</span>(<span class=\"params\"></span>): <span class=\"title\">Sender</span></span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 实现工厂类</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SendMailFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">Provider</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">produce</span>(<span class=\"params\"></span>): <span class=\"title\">Sender</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MailSender</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SendSmsFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">Provider</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">produce</span>(<span class=\"params\"></span>): <span class=\"title\">Sender</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SmsSender</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// test</span></span><br><span class=\"line\"><span class=\"variable\">$sender</span> = (<span class=\"keyword\">new</span> <span class=\"title class_\">SendMailFactory</span>())-&gt;<span class=\"title function_ invoke__\">produce</span>();</span><br><span class=\"line\"><span class=\"variable\">$sender</span>-&gt;<span class=\"title function_ invoke__\">send</span>();</span><br><span class=\"line\"><span class=\"comment\">// output: mail send</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>  优点：扩展性好。如果需要添加个企业微信推送，只需做一个实现类，实现Sender接口，同时做一个工厂类，实现Provider接口，就OK了。</p>\n","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  创建一个工厂接口和创建多个工厂实现类，这样一旦需要增加新的功能，直接增加新的工厂类就可以了，不需要修改之前的代码。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下工厂方法模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建公共接口</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sender</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建两个实现类</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MailSender</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sender</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">&quot;mail send&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SmsSender</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sender</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">&quot;sms send&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 工厂类接口</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Provider</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">produce</span>(<span class=\"params\"></span>): <span class=\"title\">Sender</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 实现工厂类</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SendMailFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">Provider</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">produce</span>(<span class=\"params\"></span>): <span class=\"title\">Sender</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MailSender</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SendSmsFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">Provider</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">produce</span>(<span class=\"params\"></span>): <span class=\"title\">Sender</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SmsSender</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// test</span></span><br><span class=\"line\"><span class=\"variable\">$sender</span> = (<span class=\"keyword\">new</span> <span class=\"title class_\">SendMailFactory</span>())-&gt;<span class=\"title function_ invoke__\">produce</span>();</span><br><span class=\"line\"><span class=\"variable\">$sender</span>-&gt;<span class=\"title function_ invoke__\">send</span>();</span><br><span class=\"line\"><span class=\"comment\">// output: mail send</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>  优点：扩展性好。如果需要添加个企业微信推送，只需做一个实现类，实现Sender接口，同时做一个工厂类，实现Provider接口，就OK了。</p>\n"},{"title":"设计模式——建造者模式","abbrlink":"builder-pattern","date":"2022-06-06T08:31:39.000Z","updated":"2022-06-06T08:31:39.000Z","_content":"\n\n### 说明\n将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。首先看下关系图：\n![](/images/builder-pattern-1.jpg)\n\n### 示例\n下面讲解下设计模式的代码实现\n1. 创建产品类\n```php\n    class Product{\n        private $parts = [];\n        public function add(string $part): void{\n            $this->parts[] = $part;\n        }\n        public function show():void{\n            print_r($this->parts);\n        }\n    }\n```\n2. 创建建造者接口\n```php\n    interface Builder{\n        public function buildPartA(): void;\n        public function buildPartB(): void;\n        public function getResult(): Product;\n    }\n```\n3. 创建多个建造者实现类\n```php\n    class ConcreteBuilder1 implements Builder{\n        private $product;\n        public function __construct(){\n            $this->product = new Product();\n        }\n    \n        public function buildPartA(): void{\n            $this->product->add('部件A');\n        }\n        public function buildPartB(): void{\n            $this->product->add('部件B');\n        }\n        public function getResult(): Product{\n            return $this->product;\n        }\n    }\n    \n    class ConcreteBuilder2 implements Builder{\n        private $product;\n        public function __construct(){\n            $this->product = new Product();\n        }\n    \n        public function buildPartA(): void{\n            $this->product->add('部件X');\n        }\n        public function buildPartB(): void{\n            $this->product->add('部件Y');\n        }\n        public function getResult(): Product{\n            return $this->product;\n        }\n    }\n```\n    \n4. 创建构造器\n```php\n    class Director{\n        public function construct(Builder $builder){\n            $builder->buildPartA();\n            $builder->buildPartB();\n        }\n    }\n```\n\n- 我们来测试下：\n```php\n    class FactoryTest{\n        public static function index(){\n            $director = new Director();\n            $builder1 = new ConcreteBuilder1();\n            $builder2 = new ConcreteBuilder2();\n            \n            $director->construct($builder1);\n            $product1 = $builder1->getResult();\n            $product1->show();\n            \n            $director->construct($builder2);\n            $product2 = $builder2->getResult();\n            $product2->show();\n        }\n    }\n```\n\n- 输出结果为：\n```\nArray ( [0] => 部件A [1] => 部件B )\nArray ( [0] => 部件X [1] => 部件Y )\n```\n\n### 总结\n它与工厂模式的区别就是：工厂模式关注的是创建单个产品，而建造者模式则关注创建复合对象，多个部分。","source":"_posts/系统设计及优化/设计模式/建造者模式.md","raw":"---\ntitle: 设计模式——建造者模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'builder-pattern'\ndate: 2022-06-06 16:31:39\nupdated: 2022-06-06 16:31:39\n---\n\n\n### 说明\n将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。首先看下关系图：\n![](/images/builder-pattern-1.jpg)\n\n### 示例\n下面讲解下设计模式的代码实现\n1. 创建产品类\n```php\n    class Product{\n        private $parts = [];\n        public function add(string $part): void{\n            $this->parts[] = $part;\n        }\n        public function show():void{\n            print_r($this->parts);\n        }\n    }\n```\n2. 创建建造者接口\n```php\n    interface Builder{\n        public function buildPartA(): void;\n        public function buildPartB(): void;\n        public function getResult(): Product;\n    }\n```\n3. 创建多个建造者实现类\n```php\n    class ConcreteBuilder1 implements Builder{\n        private $product;\n        public function __construct(){\n            $this->product = new Product();\n        }\n    \n        public function buildPartA(): void{\n            $this->product->add('部件A');\n        }\n        public function buildPartB(): void{\n            $this->product->add('部件B');\n        }\n        public function getResult(): Product{\n            return $this->product;\n        }\n    }\n    \n    class ConcreteBuilder2 implements Builder{\n        private $product;\n        public function __construct(){\n            $this->product = new Product();\n        }\n    \n        public function buildPartA(): void{\n            $this->product->add('部件X');\n        }\n        public function buildPartB(): void{\n            $this->product->add('部件Y');\n        }\n        public function getResult(): Product{\n            return $this->product;\n        }\n    }\n```\n    \n4. 创建构造器\n```php\n    class Director{\n        public function construct(Builder $builder){\n            $builder->buildPartA();\n            $builder->buildPartB();\n        }\n    }\n```\n\n- 我们来测试下：\n```php\n    class FactoryTest{\n        public static function index(){\n            $director = new Director();\n            $builder1 = new ConcreteBuilder1();\n            $builder2 = new ConcreteBuilder2();\n            \n            $director->construct($builder1);\n            $product1 = $builder1->getResult();\n            $product1->show();\n            \n            $director->construct($builder2);\n            $product2 = $builder2->getResult();\n            $product2->show();\n        }\n    }\n```\n\n- 输出结果为：\n```\nArray ( [0] => 部件A [1] => 部件B )\nArray ( [0] => 部件X [1] => 部件Y )\n```\n\n### 总结\n它与工厂模式的区别就是：工厂模式关注的是创建单个产品，而建造者模式则关注创建复合对象，多个部分。","slug":"系统设计及优化/设计模式/建造者模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vm00aeoshgggzfgip4","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。首先看下关系图：<br><img src=\"/images/builder-pattern-1.jpg\" alt=\"\"></p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面讲解下设计模式的代码实现</p>\n<ol>\n<li>创建产品类<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$parts</span> = [];</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$part</span></span>): <span class=\"title\">void</span></span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;parts[] = <span class=\"variable\">$part</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\"></span>):<span class=\"title\">void</span></span>{</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$this</span>-&gt;parts);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure></li>\n<li>创建建造者接口<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Builder</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>): <span class=\"title\">Product</span></span>;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>创建多个建造者实现类</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteBuilder1</span> <span class=\"keyword\">implements</span> <span class=\"title\">Builder</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$product</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product = <span class=\"keyword\">new</span> <span class=\"title class_\">Product</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"string\">'部件A'</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"string\">'部件B'</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>): <span class=\"title\">Product</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;product;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteBuilder2</span> <span class=\"keyword\">implements</span> <span class=\"title\">Builder</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$product</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product = <span class=\"keyword\">new</span> <span class=\"title class_\">Product</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"string\">'部件X'</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"string\">'部件Y'</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>): <span class=\"title\">Product</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;product;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>创建构造器</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Director</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">construct</span>(<span class=\"params\">Builder <span class=\"variable\">$builder</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$builder</span>-&gt;<span class=\"title function_ invoke__\">buildPartA</span>();</span><br><span class=\"line\">        <span class=\"variable\">$builder</span>-&gt;<span class=\"title function_ invoke__\">buildPartB</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ol>\n<ul>\n<li><p>我们来测试下：</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FactoryTest</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">index</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$director</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Director</span>();</span><br><span class=\"line\">        <span class=\"variable\">$builder1</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ConcreteBuilder1</span>();</span><br><span class=\"line\">        <span class=\"variable\">$builder2</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ConcreteBuilder2</span>();</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"variable\">$director</span>-&gt;<span class=\"title function_ invoke__\">construct</span>(<span class=\"variable\">$builder1</span>);</span><br><span class=\"line\">        <span class=\"variable\">$product1</span> = <span class=\"variable\">$builder1</span>-&gt;<span class=\"title function_ invoke__\">getResult</span>();</span><br><span class=\"line\">        <span class=\"variable\">$product1</span>-&gt;<span class=\"title function_ invoke__\">show</span>();</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"variable\">$director</span>-&gt;<span class=\"title function_ invoke__\">construct</span>(<span class=\"variable\">$builder2</span>);</span><br><span class=\"line\">        <span class=\"variable\">$product2</span> = <span class=\"variable\">$builder2</span>-&gt;<span class=\"title function_ invoke__\">getResult</span>();</span><br><span class=\"line\">        <span class=\"variable\">$product2</span>-&gt;<span class=\"title function_ invoke__\">show</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>输出结果为：</p>\n<figure class=\"highlight livescript\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Array</span> ( [<span class=\"number\">0</span>] =&gt; 部件A [<span class=\"number\">1</span>] =&gt; 部件B )</span><br><span class=\"line\"><span class=\"built_in\">Array</span> ( [<span class=\"number\">0</span>] =&gt; 部件X [<span class=\"number\">1</span>] =&gt; 部件Y )</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>它与工厂模式的区别就是：工厂模式关注的是创建单个产品，而建造者模式则关注创建复合对象，多个部分。</p>\n","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。首先看下关系图：<br><img src=\"/images/builder-pattern-1.jpg\" alt></p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面讲解下设计模式的代码实现</p>\n<ol>\n<li>创建产品类<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Product</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$parts</span> = [];</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$part</span></span>): <span class=\"title\">void</span></span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;parts[] = <span class=\"variable\">$part</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\"></span>):<span class=\"title\">void</span></span>&#123;</span><br><span class=\"line\">        <span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$this</span>-&gt;parts);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>创建建造者接口<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Builder</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>): <span class=\"title\">Product</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li><p>创建多个建造者实现类</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteBuilder1</span> <span class=\"keyword\">implements</span> <span class=\"title\">Builder</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$product</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product = <span class=\"keyword\">new</span> <span class=\"title class_\">Product</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"string\">&#x27;部件A&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"string\">&#x27;部件B&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>): <span class=\"title\">Product</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;product;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConcreteBuilder2</span> <span class=\"keyword\">implements</span> <span class=\"title\">Builder</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$product</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product = <span class=\"keyword\">new</span> <span class=\"title class_\">Product</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartA</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"string\">&#x27;部件X&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildPartB</span>(<span class=\"params\"></span>): <span class=\"title\">void</span></span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;product-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"string\">&#x27;部件Y&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getResult</span>(<span class=\"params\"></span>): <span class=\"title\">Product</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;product;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>创建构造器</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Director</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">construct</span>(<span class=\"params\">Builder <span class=\"variable\">$builder</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$builder</span>-&gt;<span class=\"title function_ invoke__\">buildPartA</span>();</span><br><span class=\"line\">        <span class=\"variable\">$builder</span>-&gt;<span class=\"title function_ invoke__\">buildPartB</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<ul>\n<li><p>我们来测试下：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FactoryTest</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">index</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$director</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Director</span>();</span><br><span class=\"line\">        <span class=\"variable\">$builder1</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ConcreteBuilder1</span>();</span><br><span class=\"line\">        <span class=\"variable\">$builder2</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">ConcreteBuilder2</span>();</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"variable\">$director</span>-&gt;<span class=\"title function_ invoke__\">construct</span>(<span class=\"variable\">$builder1</span>);</span><br><span class=\"line\">        <span class=\"variable\">$product1</span> = <span class=\"variable\">$builder1</span>-&gt;<span class=\"title function_ invoke__\">getResult</span>();</span><br><span class=\"line\">        <span class=\"variable\">$product1</span>-&gt;<span class=\"title function_ invoke__\">show</span>();</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"variable\">$director</span>-&gt;<span class=\"title function_ invoke__\">construct</span>(<span class=\"variable\">$builder2</span>);</span><br><span class=\"line\">        <span class=\"variable\">$product2</span> = <span class=\"variable\">$builder2</span>-&gt;<span class=\"title function_ invoke__\">getResult</span>();</span><br><span class=\"line\">        <span class=\"variable\">$product2</span>-&gt;<span class=\"title function_ invoke__\">show</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>输出结果为：</p>\n<figure class=\"highlight livescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Array</span> ( [<span class=\"number\">0</span>] =&gt; 部件A [<span class=\"number\">1</span>] =&gt; 部件B )</span><br><span class=\"line\"><span class=\"built_in\">Array</span> ( [<span class=\"number\">0</span>] =&gt; 部件X [<span class=\"number\">1</span>] =&gt; 部件Y )</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>它与工厂模式的区别就是：工厂模式关注的是创建单个产品，而建造者模式则关注创建复合对象，多个部分。</p>\n"},{"title":"设计模式——桥接模式","abbrlink":"bridge-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n  桥接模式就是把事物和其具体实现分开，使他们可以各自独立的变化。桥接的用意是：将抽象化与实现化解耦，使得二者可以独立变化，像我们常用的JDBC桥DriverManager一样，JDBC进行连接数据库的时候，在各个数据库之间进行切换，基本不需要动太多的代码，甚至丝毫不用动，原因就是JDBC提供统一接口，每个数据库提供各自的实现，用一个叫做数据库驱动的程序来桥接就行了。\n  \n### 示例\n下面看下桥接模式的代码实现\n\n```php\n// 定义接口\ninterface Sourceable{\n    public function method();\n}\n\n// 定义两个实现类\nclass SourceSub1 implements Sourceable{\n    public function method(){\n        echo \"this is first sub!\" . PHP_EOL;\n    }\n}\n\nclass SourceSub2 implements Sourceable{\n    public function method(){\n        echo \"this is the second sub!\" . PHP_EOL;\n    }\n}\n\n// 定义一个桥，持有Sourceable的一个实例\nabstract class Bridge{\n    private Sourceable $source;\n\n    public function method(){\n        $this->source->method();\n    }\n\n    public function getMSource(): Sourceable{\n        return $this->source;\n    }\n\n    public function setSource(Sourceable $source){\n        $this->source = $source;\n    }\n}\n\nclass MyBridge extends Bridge{\n    public function method(){\n        $this->getMSource()->method();\n    }\n}\n\n// 调用\n$bridge = new MyBridge();\n\n$source1 = new SourceSub1();\n$bridge->setSource($source1);\n$bridge->method();\n\n$source2 = new SourceSub2();\n$bridge->setSource($source2);\n$bridge->method();\n// 这样，就通过对Bridge类的调用，实现了对接口Sourceable的实现类SourceSub1和SourceSub2的调用。\n\n/**\n * output:\nthis is first sub!\nthis is the second sub!\n\n */\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/桥接模式.md","raw":"---\ntitle: 设计模式——桥接模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'bridge-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n  桥接模式就是把事物和其具体实现分开，使他们可以各自独立的变化。桥接的用意是：将抽象化与实现化解耦，使得二者可以独立变化，像我们常用的JDBC桥DriverManager一样，JDBC进行连接数据库的时候，在各个数据库之间进行切换，基本不需要动太多的代码，甚至丝毫不用动，原因就是JDBC提供统一接口，每个数据库提供各自的实现，用一个叫做数据库驱动的程序来桥接就行了。\n  \n### 示例\n下面看下桥接模式的代码实现\n\n```php\n// 定义接口\ninterface Sourceable{\n    public function method();\n}\n\n// 定义两个实现类\nclass SourceSub1 implements Sourceable{\n    public function method(){\n        echo \"this is first sub!\" . PHP_EOL;\n    }\n}\n\nclass SourceSub2 implements Sourceable{\n    public function method(){\n        echo \"this is the second sub!\" . PHP_EOL;\n    }\n}\n\n// 定义一个桥，持有Sourceable的一个实例\nabstract class Bridge{\n    private Sourceable $source;\n\n    public function method(){\n        $this->source->method();\n    }\n\n    public function getMSource(): Sourceable{\n        return $this->source;\n    }\n\n    public function setSource(Sourceable $source){\n        $this->source = $source;\n    }\n}\n\nclass MyBridge extends Bridge{\n    public function method(){\n        $this->getMSource()->method();\n    }\n}\n\n// 调用\n$bridge = new MyBridge();\n\n$source1 = new SourceSub1();\n$bridge->setSource($source1);\n$bridge->method();\n\n$source2 = new SourceSub2();\n$bridge->setSource($source2);\n$bridge->method();\n// 这样，就通过对Bridge类的调用，实现了对接口Sourceable的实现类SourceSub1和SourceSub2的调用。\n\n/**\n * output:\nthis is first sub!\nthis is the second sub!\n\n */\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/桥接模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vn00aioshgfzs00rdr","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  桥接模式就是把事物和其具体实现分开，使他们可以各自独立的变化。桥接的用意是：将抽象化与实现化解耦，使得二者可以独立变化，像我们常用的JDBC桥DriverManager一样，JDBC进行连接数据库的时候，在各个数据库之间进行切换，基本不需要动太多的代码，甚至丝毫不用动，原因就是JDBC提供统一接口，每个数据库提供各自的实现，用一个叫做数据库驱动的程序来桥接就行了。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下桥接模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 定义接口</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定义两个实现类</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SourceSub1</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"this is first sub!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SourceSub2</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"this is the second sub!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定义一个桥，持有Sourceable的一个实例</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bridge</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Sourceable <span class=\"variable\">$source</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMSource</span>(<span class=\"params\"></span>): <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;source;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSource</span>(<span class=\"params\">Sourceable <span class=\"variable\">$source</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source = <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBridge</span> <span class=\"keyword\">extends</span> <span class=\"title\">Bridge</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">getMSource</span>()-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$bridge</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyBridge</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$source1</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">SourceSub1</span>();</span><br><span class=\"line\"><span class=\"variable\">$bridge</span>-&gt;<span class=\"title function_ invoke__\">setSource</span>(<span class=\"variable\">$source1</span>);</span><br><span class=\"line\"><span class=\"variable\">$bridge</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$source2</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">SourceSub2</span>();</span><br><span class=\"line\"><span class=\"variable\">$bridge</span>-&gt;<span class=\"title function_ invoke__\">setSource</span>(<span class=\"variable\">$source2</span>);</span><br><span class=\"line\"><span class=\"variable\">$bridge</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"><span class=\"comment\">// 这样，就通过对Bridge类的调用，实现了对接口Sourceable的实现类SourceSub1和SourceSub2的调用。</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\">this is first sub!</span></span><br><span class=\"line\"><span class=\"comment\">this is the second sub!</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  桥接模式就是把事物和其具体实现分开，使他们可以各自独立的变化。桥接的用意是：将抽象化与实现化解耦，使得二者可以独立变化，像我们常用的JDBC桥DriverManager一样，JDBC进行连接数据库的时候，在各个数据库之间进行切换，基本不需要动太多的代码，甚至丝毫不用动，原因就是JDBC提供统一接口，每个数据库提供各自的实现，用一个叫做数据库驱动的程序来桥接就行了。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下桥接模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 定义接口</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定义两个实现类</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SourceSub1</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;this is first sub!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SourceSub2</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;this is the second sub!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定义一个桥，持有Sourceable的一个实例</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bridge</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Sourceable <span class=\"variable\">$source</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMSource</span>(<span class=\"params\"></span>): <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;source;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSource</span>(<span class=\"params\">Sourceable <span class=\"variable\">$source</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source = <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBridge</span> <span class=\"keyword\">extends</span> <span class=\"title\">Bridge</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">getMSource</span>()-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$bridge</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyBridge</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$source1</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">SourceSub1</span>();</span><br><span class=\"line\"><span class=\"variable\">$bridge</span>-&gt;<span class=\"title function_ invoke__\">setSource</span>(<span class=\"variable\">$source1</span>);</span><br><span class=\"line\"><span class=\"variable\">$bridge</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$source2</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">SourceSub2</span>();</span><br><span class=\"line\"><span class=\"variable\">$bridge</span>-&gt;<span class=\"title function_ invoke__\">setSource</span>(<span class=\"variable\">$source2</span>);</span><br><span class=\"line\"><span class=\"variable\">$bridge</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"><span class=\"comment\">// 这样，就通过对Bridge类的调用，实现了对接口Sourceable的实现类SourceSub1和SourceSub2的调用。</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\">this is first sub!</span></span><br><span class=\"line\"><span class=\"comment\">this is the second sub!</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——模板方法模式","abbrlink":"template-method-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n\n### 示例\n下面看下模板方法模式的代码实现\n\n```php\nabstract class AbstractCalculator{\n    public final function calculate(string $exp,string $opt){\n        $arr = $this->split($exp,$opt);\n        return $this->cal($arr[0],$arr[1]);\n    }\n\n    abstract public function cal(int $num1, int $num2): int;\n\n    public function split(string $exp, string $opt): array{\n        $arr = explode($opt,$exp);\n        return [intval($arr[0]),intval($arr[1])];\n    }\n}\n\nclass Plus extends AbstractCalculator{\n    public function cal(int $num1, int $num2): int{\n        return $num1 + $num2;\n    }\n}\n\n\n// 调用\n$exp = '2+8';\n$cal = new Plus();\n$result = $cal->calculate($exp, '+');\necho $result;\n// output:  10\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/模板方法模式.md","raw":"---\ntitle: 设计模式——模板方法模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'template-method-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n\n### 示例\n下面看下模板方法模式的代码实现\n\n```php\nabstract class AbstractCalculator{\n    public final function calculate(string $exp,string $opt){\n        $arr = $this->split($exp,$opt);\n        return $this->cal($arr[0],$arr[1]);\n    }\n\n    abstract public function cal(int $num1, int $num2): int;\n\n    public function split(string $exp, string $opt): array{\n        $arr = explode($opt,$exp);\n        return [intval($arr[0]),intval($arr[1])];\n    }\n}\n\nclass Plus extends AbstractCalculator{\n    public function cal(int $num1, int $num2): int{\n        return $num1 + $num2;\n    }\n}\n\n\n// 调用\n$exp = '2+8';\n$cal = new Plus();\n$result = $cal->calculate($exp, '+');\necho $result;\n// output:  10\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/模板方法模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vn00akoshg81a3frwv","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下模板方法模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractCalculator</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculate</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span>,<span class=\"keyword\">string</span> <span class=\"variable\">$opt</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">split</span>(<span class=\"variable\">$exp</span>,<span class=\"variable\">$opt</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">cal</span>(<span class=\"variable\">$arr</span>[<span class=\"number\">0</span>],<span class=\"variable\">$arr</span>[<span class=\"number\">1</span>]);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cal</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$num1</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$num2</span></span>): <span class=\"title\">int</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">split</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span>, <span class=\"keyword\">string</span> <span class=\"variable\">$opt</span></span>): <span class=\"title\">array</span></span>{</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"title function_ invoke__\">explode</span>(<span class=\"variable\">$opt</span>,<span class=\"variable\">$exp</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [<span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$arr</span>[<span class=\"number\">0</span>]),<span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$arr</span>[<span class=\"number\">1</span>])];</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Plus</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractCalculator</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cal</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$num1</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$num2</span></span>): <span class=\"title\">int</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$num1</span> + <span class=\"variable\">$num2</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$exp</span> = <span class=\"string\">'2+8'</span>;</span><br><span class=\"line\"><span class=\"variable\">$cal</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Plus</span>();</span><br><span class=\"line\"><span class=\"variable\">$result</span> = <span class=\"variable\">$cal</span>-&gt;<span class=\"title function_ invoke__\">calculate</span>(<span class=\"variable\">$exp</span>, <span class=\"string\">'+'</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$result</span>;</span><br><span class=\"line\"><span class=\"comment\">// output:  10</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下模板方法模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractCalculator</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculate</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span>,<span class=\"keyword\">string</span> <span class=\"variable\">$opt</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">split</span>(<span class=\"variable\">$exp</span>,<span class=\"variable\">$opt</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">cal</span>(<span class=\"variable\">$arr</span>[<span class=\"number\">0</span>],<span class=\"variable\">$arr</span>[<span class=\"number\">1</span>]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">abstract</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cal</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$num1</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$num2</span></span>): <span class=\"title\">int</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">split</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span>, <span class=\"keyword\">string</span> <span class=\"variable\">$opt</span></span>): <span class=\"title\">array</span></span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"title function_ invoke__\">explode</span>(<span class=\"variable\">$opt</span>,<span class=\"variable\">$exp</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [<span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$arr</span>[<span class=\"number\">0</span>]),<span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$arr</span>[<span class=\"number\">1</span>])];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Plus</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractCalculator</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cal</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$num1</span>, <span class=\"keyword\">int</span> <span class=\"variable\">$num2</span></span>): <span class=\"title\">int</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$num1</span> + <span class=\"variable\">$num2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$exp</span> = <span class=\"string\">&#x27;2+8&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$cal</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Plus</span>();</span><br><span class=\"line\"><span class=\"variable\">$result</span> = <span class=\"variable\">$cal</span>-&gt;<span class=\"title function_ invoke__\">calculate</span>(<span class=\"variable\">$exp</span>, <span class=\"string\">&#x27;+&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$result</span>;</span><br><span class=\"line\"><span class=\"comment\">// output:  10</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——状态模式","abbrlink":"state-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n\n### 示例\n下面看下状态模式的代码实现\n\n```php\nclass State{\n    private string $value;\n\n    public function getValue(): string{\n        return $this->value;\n    }\n\n    public function setValue(string $value){\n        $this->value = $value;\n    }\n\n    public function method1(){\n        echo \"execute the first opt!\" . PHP_EOL;\n    }\n\n    public function method2(){\n        echo \"execute the second opt!\" . PHP_EOL;\n    }\n}\n\nclass Context{\n    private State $state;\n\n    public function __construct(State $state){\n        $this->state = $state;\n    }\n\n    public function getState(): State{\n        return $this->state;\n    }\n\n    public function setState(State $state){\n        $this->state = $state;\n    }\n\n    public function method(){\n        if ($this->state->getValue() == 'state1'){\n            $this->state->method1();;\n        }else if($this->state->getValue() == 'state2'){\n            $this->state->method2();\n        }\n    }\n}\n\n\n// 调用\n$state = new State();\n$context = new Context($state);\n\n$state->setValue('state1');\n$context->method();\n\n$state->setValue('state2');\n$context->method();\n/**\n * output:\n * execute the first opt!\n * execute the second opt!\n * \n */\n\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/状态模式.md","raw":"---\ntitle: 设计模式——状态模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'state-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n\n### 示例\n下面看下状态模式的代码实现\n\n```php\nclass State{\n    private string $value;\n\n    public function getValue(): string{\n        return $this->value;\n    }\n\n    public function setValue(string $value){\n        $this->value = $value;\n    }\n\n    public function method1(){\n        echo \"execute the first opt!\" . PHP_EOL;\n    }\n\n    public function method2(){\n        echo \"execute the second opt!\" . PHP_EOL;\n    }\n}\n\nclass Context{\n    private State $state;\n\n    public function __construct(State $state){\n        $this->state = $state;\n    }\n\n    public function getState(): State{\n        return $this->state;\n    }\n\n    public function setState(State $state){\n        $this->state = $state;\n    }\n\n    public function method(){\n        if ($this->state->getValue() == 'state1'){\n            $this->state->method1();;\n        }else if($this->state->getValue() == 'state2'){\n            $this->state->method2();\n        }\n    }\n}\n\n\n// 调用\n$state = new State();\n$context = new Context($state);\n\n$state->setValue('state1');\n$context->method();\n\n$state->setValue('state2');\n$context->method();\n/**\n * output:\n * execute the first opt!\n * execute the second opt!\n * \n */\n\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/状态模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vo00aooshg9aaxa1y7","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下状态模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">State</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$value</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getValue</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;value;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setValue</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$value</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"execute the first opt!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"execute the second opt!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> State <span class=\"variable\">$state</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">State <span class=\"variable\">$state</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;state = <span class=\"variable\">$state</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>): <span class=\"title\">State</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;state;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setState</span>(<span class=\"params\">State <span class=\"variable\">$state</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;state = <span class=\"variable\">$state</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;state-&gt;<span class=\"title function_ invoke__\">getValue</span>() == <span class=\"string\">'state1'</span>){</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;state-&gt;<span class=\"title function_ invoke__\">method1</span>();;</span><br><span class=\"line\">        }<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"variable language_\">$this</span>-&gt;state-&gt;<span class=\"title function_ invoke__\">getValue</span>() == <span class=\"string\">'state2'</span>){</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;state-&gt;<span class=\"title function_ invoke__\">method2</span>();</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$state</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">State</span>();</span><br><span class=\"line\"><span class=\"variable\">$context</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Context</span>(<span class=\"variable\">$state</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$state</span>-&gt;<span class=\"title function_ invoke__\">setValue</span>(<span class=\"string\">'state1'</span>);</span><br><span class=\"line\"><span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$state</span>-&gt;<span class=\"title function_ invoke__\">setValue</span>(<span class=\"string\">'state2'</span>);</span><br><span class=\"line\"><span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * execute the first opt!</span></span><br><span class=\"line\"><span class=\"comment\"> * execute the second opt!</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下状态模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">State</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$value</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getValue</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setValue</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$value</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;value = <span class=\"variable\">$value</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;execute the first opt!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;execute the second opt!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> State <span class=\"variable\">$state</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">State <span class=\"variable\">$state</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;state = <span class=\"variable\">$state</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getState</span>(<span class=\"params\"></span>): <span class=\"title\">State</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;state;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setState</span>(<span class=\"params\">State <span class=\"variable\">$state</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;state = <span class=\"variable\">$state</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;state-&gt;<span class=\"title function_ invoke__\">getValue</span>() == <span class=\"string\">&#x27;state1&#x27;</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;state-&gt;<span class=\"title function_ invoke__\">method1</span>();;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"variable language_\">$this</span>-&gt;state-&gt;<span class=\"title function_ invoke__\">getValue</span>() == <span class=\"string\">&#x27;state2&#x27;</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;state-&gt;<span class=\"title function_ invoke__\">method2</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$state</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">State</span>();</span><br><span class=\"line\"><span class=\"variable\">$context</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Context</span>(<span class=\"variable\">$state</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$state</span>-&gt;<span class=\"title function_ invoke__\">setValue</span>(<span class=\"string\">&#x27;state1&#x27;</span>);</span><br><span class=\"line\"><span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$state</span>-&gt;<span class=\"title function_ invoke__\">setValue</span>(<span class=\"string\">&#x27;state2&#x27;</span>);</span><br><span class=\"line\"><span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * execute the first opt!</span></span><br><span class=\"line\"><span class=\"comment\"> * execute the second opt!</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——策略模式","abbrlink":"strategy-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n\n### 示例\n下面看下策略模式的代码实现\n\n```php\ninterface ICalculator{\n    public function calculate(string $exp);\n}\n\nabstract class AbstractCalculator{\n    public function split(string $exp,string $opt): array{\n        $arr = explode($opt,$exp);\n        return [intval($arr[0]),intval($arr[1])];\n    }\n}\n\nclass Plus extends AbstractCalculator implements ICalculator{\n    public function calculate(string $exp){\n        $arr = $this->split($exp,'+');\n        return $arr[0] + $arr[1];\n    }\n}\n\nclass Minus extends AbstractCalculator implements ICalculator{\n    public function calculate(string $exp){\n        $arr = $this->split($exp, '-');\n        return $arr[0] - $arr[1];\n    }\n}\n\nclass Multiply extends AbstractCalculator implements ICalculator{\n    public function calculate(string $exp){\n        $arr = $this->split($exp, '*');\n        return $arr[0] * $arr[1];\n    }\n}\n\n\n// 调用\n$exp = '2+8';\n$cal = new Plus();\n$result = $cal->calculate($exp);\necho $result; \n// output:  10\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/策略模式.md","raw":"---\ntitle: 设计模式——策略模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'strategy-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n\n### 示例\n下面看下策略模式的代码实现\n\n```php\ninterface ICalculator{\n    public function calculate(string $exp);\n}\n\nabstract class AbstractCalculator{\n    public function split(string $exp,string $opt): array{\n        $arr = explode($opt,$exp);\n        return [intval($arr[0]),intval($arr[1])];\n    }\n}\n\nclass Plus extends AbstractCalculator implements ICalculator{\n    public function calculate(string $exp){\n        $arr = $this->split($exp,'+');\n        return $arr[0] + $arr[1];\n    }\n}\n\nclass Minus extends AbstractCalculator implements ICalculator{\n    public function calculate(string $exp){\n        $arr = $this->split($exp, '-');\n        return $arr[0] - $arr[1];\n    }\n}\n\nclass Multiply extends AbstractCalculator implements ICalculator{\n    public function calculate(string $exp){\n        $arr = $this->split($exp, '*');\n        return $arr[0] * $arr[1];\n    }\n}\n\n\n// 调用\n$exp = '2+8';\n$cal = new Plus();\n$result = $cal->calculate($exp);\necho $result; \n// output:  10\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/策略模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vp00aqoshg893l3ikq","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下策略模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ICalculator</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculate</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractCalculator</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">split</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span>,<span class=\"keyword\">string</span> <span class=\"variable\">$opt</span></span>): <span class=\"title\">array</span></span>{</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"title function_ invoke__\">explode</span>(<span class=\"variable\">$opt</span>,<span class=\"variable\">$exp</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [<span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$arr</span>[<span class=\"number\">0</span>]),<span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$arr</span>[<span class=\"number\">1</span>])];</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Plus</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractCalculator</span> <span class=\"keyword\">implements</span> <span class=\"title\">ICalculator</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculate</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">split</span>(<span class=\"variable\">$exp</span>,<span class=\"string\">'+'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>[<span class=\"number\">0</span>] + <span class=\"variable\">$arr</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Minus</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractCalculator</span> <span class=\"keyword\">implements</span> <span class=\"title\">ICalculator</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculate</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">split</span>(<span class=\"variable\">$exp</span>, <span class=\"string\">'-'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>[<span class=\"number\">0</span>] - <span class=\"variable\">$arr</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Multiply</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractCalculator</span> <span class=\"keyword\">implements</span> <span class=\"title\">ICalculator</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculate</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">split</span>(<span class=\"variable\">$exp</span>, <span class=\"string\">'*'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>[<span class=\"number\">0</span>] * <span class=\"variable\">$arr</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$exp</span> = <span class=\"string\">'2+8'</span>;</span><br><span class=\"line\"><span class=\"variable\">$cal</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Plus</span>();</span><br><span class=\"line\"><span class=\"variable\">$result</span> = <span class=\"variable\">$cal</span>-&gt;<span class=\"title function_ invoke__\">calculate</span>(<span class=\"variable\">$exp</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$result</span>; </span><br><span class=\"line\"><span class=\"comment\">// output:  10</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下策略模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ICalculator</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculate</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractCalculator</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">split</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span>,<span class=\"keyword\">string</span> <span class=\"variable\">$opt</span></span>): <span class=\"title\">array</span></span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"title function_ invoke__\">explode</span>(<span class=\"variable\">$opt</span>,<span class=\"variable\">$exp</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [<span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$arr</span>[<span class=\"number\">0</span>]),<span class=\"title function_ invoke__\">intval</span>(<span class=\"variable\">$arr</span>[<span class=\"number\">1</span>])];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Plus</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractCalculator</span> <span class=\"keyword\">implements</span> <span class=\"title\">ICalculator</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculate</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">split</span>(<span class=\"variable\">$exp</span>,<span class=\"string\">&#x27;+&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>[<span class=\"number\">0</span>] + <span class=\"variable\">$arr</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Minus</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractCalculator</span> <span class=\"keyword\">implements</span> <span class=\"title\">ICalculator</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculate</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">split</span>(<span class=\"variable\">$exp</span>, <span class=\"string\">&#x27;-&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>[<span class=\"number\">0</span>] - <span class=\"variable\">$arr</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Multiply</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractCalculator</span> <span class=\"keyword\">implements</span> <span class=\"title\">ICalculator</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">calculate</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$exp</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$arr</span> = <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">split</span>(<span class=\"variable\">$exp</span>, <span class=\"string\">&#x27;*&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$arr</span>[<span class=\"number\">0</span>] * <span class=\"variable\">$arr</span>[<span class=\"number\">1</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$exp</span> = <span class=\"string\">&#x27;2+8&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable\">$cal</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Plus</span>();</span><br><span class=\"line\"><span class=\"variable\">$result</span> = <span class=\"variable\">$cal</span>-&gt;<span class=\"title function_ invoke__\">calculate</span>(<span class=\"variable\">$exp</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$result</span>; </span><br><span class=\"line\"><span class=\"comment\">// output:  10</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——简单工厂方法模式","abbrlink":"simple-factory-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n凡是出现了大量的产品需要创建，并且具有共同的接口时，可以通过工厂方法模式进行创建。\n就是建立一个工厂类，对实现了同一接口的一些类进行实例的创建。首先看下关系图：\n![](/images/simple-factory-pattern-1.jpg)\n\n### 示例\n下面讲解下静态工厂方法模式的代码实现\n1. 创建公共接口\n```php\n    interface Sender{\n        public function send();\n    }\n```\n2. 创建实现类\n```php\n    class MailSender implements Sender{\n        public function send(){\n            print \"mail send\";\n        }\n    }\n    \n    class SmsSender implements Sender{\n        public function send(){\n            print \"sms send\";\n        }\n    }\n```\n3. 创建工厂类\n```php\n    class SendFactory{\n        public static function produceMail(): Sender{\n            return new MailSender();\n        }\n    \n        public static function produceSms(): Sender{\n            return new SmsSender();\n        }\n    }\n```\n\n- 我们来测试下：\n```php\n    class FactoryTest{\n        public static function index(){\n            $sender = SendFactory::produceSms();\n            $sender->send();\n        }\n    }\n```\n\n- 输出结果为：\n```\nsms send\n```\n\n### 总结\n缺陷：类的创建依赖工厂类，也就是说，如果想要拓展程序，必须对工厂类进行修改，这违背了闭包原则。","source":"_posts/系统设计及优化/设计模式/简单工厂方法模式.md","raw":"---\ntitle: 设计模式——简单工厂方法模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'simple-factory-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n凡是出现了大量的产品需要创建，并且具有共同的接口时，可以通过工厂方法模式进行创建。\n就是建立一个工厂类，对实现了同一接口的一些类进行实例的创建。首先看下关系图：\n![](/images/simple-factory-pattern-1.jpg)\n\n### 示例\n下面讲解下静态工厂方法模式的代码实现\n1. 创建公共接口\n```php\n    interface Sender{\n        public function send();\n    }\n```\n2. 创建实现类\n```php\n    class MailSender implements Sender{\n        public function send(){\n            print \"mail send\";\n        }\n    }\n    \n    class SmsSender implements Sender{\n        public function send(){\n            print \"sms send\";\n        }\n    }\n```\n3. 创建工厂类\n```php\n    class SendFactory{\n        public static function produceMail(): Sender{\n            return new MailSender();\n        }\n    \n        public static function produceSms(): Sender{\n            return new SmsSender();\n        }\n    }\n```\n\n- 我们来测试下：\n```php\n    class FactoryTest{\n        public static function index(){\n            $sender = SendFactory::produceSms();\n            $sender->send();\n        }\n    }\n```\n\n- 输出结果为：\n```\nsms send\n```\n\n### 总结\n缺陷：类的创建依赖工厂类，也就是说，如果想要拓展程序，必须对工厂类进行修改，这违背了闭包原则。","slug":"系统设计及优化/设计模式/简单工厂方法模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vp00auoshg8itbhvz6","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>凡是出现了大量的产品需要创建，并且具有共同的接口时，可以通过工厂方法模式进行创建。<br>就是建立一个工厂类，对实现了同一接口的一些类进行实例的创建。首先看下关系图：<br><img src=\"/images/simple-factory-pattern-1.jpg\" alt=\"\"></p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面讲解下静态工厂方法模式的代码实现</p>\n<ol>\n<li>创建公共接口<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sender</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure></li>\n<li>创建实现类<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MailSender</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sender</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">\"mail send\"</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SmsSender</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sender</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">\"sms send\"</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure></li>\n<li>创建工厂类<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SendFactory</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">produceMail</span>(<span class=\"params\"></span>): <span class=\"title\">Sender</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MailSender</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">produceSms</span>(<span class=\"params\"></span>): <span class=\"title\">Sender</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SmsSender</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ol>\n<ul>\n<li><p>我们来测试下：</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FactoryTest</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">index</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$sender</span> = <span class=\"title class_\">SendFactory</span>::<span class=\"title function_ invoke__\">produceSms</span>();</span><br><span class=\"line\">        <span class=\"variable\">$sender</span>-&gt;<span class=\"title function_ invoke__\">send</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>输出结果为：</p>\n<figure class=\"highlight autoit\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sms <span class=\"built_in\">send</span></span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>缺陷：类的创建依赖工厂类，也就是说，如果想要拓展程序，必须对工厂类进行修改，这违背了闭包原则。</p>\n","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>凡是出现了大量的产品需要创建，并且具有共同的接口时，可以通过工厂方法模式进行创建。<br>就是建立一个工厂类，对实现了同一接口的一些类进行实例的创建。首先看下关系图：<br><img src=\"/images/simple-factory-pattern-1.jpg\" alt></p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面讲解下静态工厂方法模式的代码实现</p>\n<ol>\n<li>创建公共接口<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sender</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>创建实现类<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MailSender</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sender</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">&quot;mail send&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SmsSender</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sender</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">send</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">print</span> <span class=\"string\">&quot;sms send&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n<li>创建工厂类<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SendFactory</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">produceMail</span>(<span class=\"params\"></span>): <span class=\"title\">Sender</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MailSender</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">produceSms</span>(<span class=\"params\"></span>): <span class=\"title\">Sender</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SmsSender</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<ul>\n<li><p>我们来测试下：</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FactoryTest</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"built_in\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">index</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$sender</span> = <span class=\"title class_\">SendFactory</span>::<span class=\"title function_ invoke__\">produceSms</span>();</span><br><span class=\"line\">        <span class=\"variable\">$sender</span>-&gt;<span class=\"title function_ invoke__\">send</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>输出结果为：</p>\n<figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sms <span class=\"built_in\">send</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>缺陷：类的创建依赖工厂类，也就是说，如果想要拓展程序，必须对工厂类进行修改，这违背了闭包原则。</p>\n"},{"title":"设计模式——组合模式","abbrlink":"composite-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n  又叫部分-整体模式,在处理类似树形结构的问题时比较方便。\n  \n### 示例\n下面看下组合模式的代码实现\n\n```php\nclass TreeNode{\n    private string $name;\n    private TreeNode $parent;\n    private ?TreeNode $children=null;\n\n    public function __construct(string $name){\n        $this->name = $name;\n    }\n    public function getName(): string{\n        return $this->name;\n    }\n    public function setName(string $name){\n        $this->name = $name;\n    }\n\n    public function getParent(): TreeNode{\n        return $this->parent;\n    }\n\n    public function setParent(TreeNode $parent){\n        $this->parent = $parent;\n    }\n\n    //添加子节点\n    public function add(TreeNode $node){\n        $this->children = $node;\n    }\n    //删除子节点\n    public function remove(TreeNode $node){\n        //unset($this->children->{$node});\n        $this->children->remove($node);\n    }\n    //取得子节点\n    public function getChildren(): ?TreeNode{\n        return $this->children;\n    }\n}\n\n// test\n$root = new TreeNode('A');\n$nodeB = new TreeNode('B');\n$nodeC = new TreeNode('C');\n\n\n$nodeB->add($nodeC);\n$root->add($nodeB);\nprint_r($root);\necho \"build the tree finished!\";\n\n/**\n * output:\n *\nTreeNode Object\n(\n[name:TreeNode:private] => A\n[children:TreeNode:private] => TreeNode Object\n(\n[name:TreeNode:private] => B\n[children:TreeNode:private] => TreeNode Object\n(\n[name:TreeNode:private] => C\n[children:TreeNode:private] =>\n)\n\n)\n\n)\nbuild the tree finished!\n */\n\n```\n\n### 总结\n  使用场景：将多个对象组合在一起进行操作，常用于表示树形结构中，例如二叉树，数等。","source":"_posts/系统设计及优化/设计模式/组合模式.md","raw":"---\ntitle: 设计模式——组合模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'composite-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n  又叫部分-整体模式,在处理类似树形结构的问题时比较方便。\n  \n### 示例\n下面看下组合模式的代码实现\n\n```php\nclass TreeNode{\n    private string $name;\n    private TreeNode $parent;\n    private ?TreeNode $children=null;\n\n    public function __construct(string $name){\n        $this->name = $name;\n    }\n    public function getName(): string{\n        return $this->name;\n    }\n    public function setName(string $name){\n        $this->name = $name;\n    }\n\n    public function getParent(): TreeNode{\n        return $this->parent;\n    }\n\n    public function setParent(TreeNode $parent){\n        $this->parent = $parent;\n    }\n\n    //添加子节点\n    public function add(TreeNode $node){\n        $this->children = $node;\n    }\n    //删除子节点\n    public function remove(TreeNode $node){\n        //unset($this->children->{$node});\n        $this->children->remove($node);\n    }\n    //取得子节点\n    public function getChildren(): ?TreeNode{\n        return $this->children;\n    }\n}\n\n// test\n$root = new TreeNode('A');\n$nodeB = new TreeNode('B');\n$nodeC = new TreeNode('C');\n\n\n$nodeB->add($nodeC);\n$root->add($nodeB);\nprint_r($root);\necho \"build the tree finished!\";\n\n/**\n * output:\n *\nTreeNode Object\n(\n[name:TreeNode:private] => A\n[children:TreeNode:private] => TreeNode Object\n(\n[name:TreeNode:private] => B\n[children:TreeNode:private] => TreeNode Object\n(\n[name:TreeNode:private] => C\n[children:TreeNode:private] =>\n)\n\n)\n\n)\nbuild the tree finished!\n */\n\n```\n\n### 总结\n  使用场景：将多个对象组合在一起进行操作，常用于表示树形结构中，例如二叉树，数等。","slug":"系统设计及优化/设计模式/组合模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vq00awoshg2t071pnw","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  又叫部分-整体模式,在处理类似树形结构的问题时比较方便。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下组合模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TreeNode</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$name</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> TreeNode <span class=\"variable\">$parent</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ?TreeNode <span class=\"variable\">$children</span>=<span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$name</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;name = <span class=\"variable\">$name</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;name;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setName</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$name</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;name = <span class=\"variable\">$name</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getParent</span>(<span class=\"params\"></span>): <span class=\"title\">TreeNode</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;<span class=\"built_in\">parent</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setParent</span>(<span class=\"params\">TreeNode <span class=\"variable\">$parent</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;<span class=\"built_in\">parent</span> = <span class=\"variable\">$parent</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//添加子节点</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">TreeNode <span class=\"variable\">$node</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;children = <span class=\"variable\">$node</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"comment\">//删除子节点</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">remove</span>(<span class=\"params\">TreeNode <span class=\"variable\">$node</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"comment\">//unset($this-&gt;children-&gt;{$node});</span></span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;children-&gt;<span class=\"title function_ invoke__\">remove</span>(<span class=\"variable\">$node</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"comment\">//取得子节点</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getChildren</span>(<span class=\"params\"></span>): ?<span class=\"title\">TreeNode</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;children;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// test</span></span><br><span class=\"line\"><span class=\"variable\">$root</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">TreeNode</span>(<span class=\"string\">'A'</span>);</span><br><span class=\"line\"><span class=\"variable\">$nodeB</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">TreeNode</span>(<span class=\"string\">'B'</span>);</span><br><span class=\"line\"><span class=\"variable\">$nodeC</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">TreeNode</span>(<span class=\"string\">'C'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$nodeB</span>-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"variable\">$nodeC</span>);</span><br><span class=\"line\"><span class=\"variable\">$root</span>-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"variable\">$nodeB</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$root</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">\"build the tree finished!\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\">TreeNode Object</span></span><br><span class=\"line\"><span class=\"comment\">(</span></span><br><span class=\"line\"><span class=\"comment\">[name:TreeNode:private] =&gt; A</span></span><br><span class=\"line\"><span class=\"comment\">[children:TreeNode:private] =&gt; TreeNode Object</span></span><br><span class=\"line\"><span class=\"comment\">(</span></span><br><span class=\"line\"><span class=\"comment\">[name:TreeNode:private] =&gt; B</span></span><br><span class=\"line\"><span class=\"comment\">[children:TreeNode:private] =&gt; TreeNode Object</span></span><br><span class=\"line\"><span class=\"comment\">(</span></span><br><span class=\"line\"><span class=\"comment\">[name:TreeNode:private] =&gt; C</span></span><br><span class=\"line\"><span class=\"comment\">[children:TreeNode:private] =&gt;</span></span><br><span class=\"line\"><span class=\"comment\">)</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">)</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">)</span></span><br><span class=\"line\"><span class=\"comment\">build the tree finished!</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>  使用场景：将多个对象组合在一起进行操作，常用于表示树形结构中，例如二叉树，数等。</p>\n","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  又叫部分-整体模式,在处理类似树形结构的问题时比较方便。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下组合模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TreeNode</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$name</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> TreeNode <span class=\"variable\">$parent</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ?TreeNode <span class=\"variable\">$children</span>=<span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$name</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;name = <span class=\"variable\">$name</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setName</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$name</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;name = <span class=\"variable\">$name</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getParent</span>(<span class=\"params\"></span>): <span class=\"title\">TreeNode</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;<span class=\"built_in\">parent</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setParent</span>(<span class=\"params\">TreeNode <span class=\"variable\">$parent</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;<span class=\"built_in\">parent</span> = <span class=\"variable\">$parent</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//添加子节点</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">TreeNode <span class=\"variable\">$node</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;children = <span class=\"variable\">$node</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//删除子节点</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">remove</span>(<span class=\"params\">TreeNode <span class=\"variable\">$node</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//unset($this-&gt;children-&gt;&#123;$node&#125;);</span></span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;children-&gt;<span class=\"title function_ invoke__\">remove</span>(<span class=\"variable\">$node</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//取得子节点</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getChildren</span>(<span class=\"params\"></span>): ?<span class=\"title\">TreeNode</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;children;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// test</span></span><br><span class=\"line\"><span class=\"variable\">$root</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">TreeNode</span>(<span class=\"string\">&#x27;A&#x27;</span>);</span><br><span class=\"line\"><span class=\"variable\">$nodeB</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">TreeNode</span>(<span class=\"string\">&#x27;B&#x27;</span>);</span><br><span class=\"line\"><span class=\"variable\">$nodeC</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">TreeNode</span>(<span class=\"string\">&#x27;C&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$nodeB</span>-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"variable\">$nodeC</span>);</span><br><span class=\"line\"><span class=\"variable\">$root</span>-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"variable\">$nodeB</span>);</span><br><span class=\"line\"><span class=\"title function_ invoke__\">print_r</span>(<span class=\"variable\">$root</span>);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"string\">&quot;build the tree finished!&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\">TreeNode Object</span></span><br><span class=\"line\"><span class=\"comment\">(</span></span><br><span class=\"line\"><span class=\"comment\">[name:TreeNode:private] =&gt; A</span></span><br><span class=\"line\"><span class=\"comment\">[children:TreeNode:private] =&gt; TreeNode Object</span></span><br><span class=\"line\"><span class=\"comment\">(</span></span><br><span class=\"line\"><span class=\"comment\">[name:TreeNode:private] =&gt; B</span></span><br><span class=\"line\"><span class=\"comment\">[children:TreeNode:private] =&gt; TreeNode Object</span></span><br><span class=\"line\"><span class=\"comment\">(</span></span><br><span class=\"line\"><span class=\"comment\">[name:TreeNode:private] =&gt; C</span></span><br><span class=\"line\"><span class=\"comment\">[children:TreeNode:private] =&gt;</span></span><br><span class=\"line\"><span class=\"comment\">)</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">)</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">)</span></span><br><span class=\"line\"><span class=\"comment\">build the tree finished!</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>  使用场景：将多个对象组合在一起进行操作，常用于表示树形结构中，例如二叉树，数等。</p>\n"},{"title":"设计模式——装饰模式","abbrlink":"decorator-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n  装饰模式就是给一个对象增加一些新的功能，而且是动态的，要求装饰对象和被装饰对象实现同一个接口，装饰对象持有被装饰对象的实例。\n  \n### 示例\n下面看下装饰模式的代码实现\n\n```php\n//Source类是被装饰类，Decorator类是一个装饰类，可以为Source类动态的添加一些功能\ninterface Sourceable{\n    public function method();\n}\n\nclass Source implements Sourceable{\n    public function method(){\n        echo \"the original method!\" . PHP_EOL;\n    }\n}\n\nclass Decorator implements Sourceable{\n    private Sourceable $source;\n    public function __construct(Sourceable $source){\n        $this->source = $source;\n    }\n    public function method(){\n        echo \"before decorator\" . PHP_EOL;\n        $this->source->method();\n        echo \"after decorator\" . PHP_EOL;\n    }\n}\n\n//调用\n$source = new Source();\n$obj = new Decorator($source);\n$obj->method();\n/**\n * output:\n *\nbefore decorator\nthe original method!\nafter decorator\n */\n\n```\n\n### 总结\n  装饰器模式的应用场景：\n    1、需要扩展一个类的功能。\n    2、动态的为一个对象增加功能，而且还能动态撤销。（继承不能做到这一点，继承的功能是静态的，不能动态增删。）\n  缺点：产生过多相似的对象，不易排错！","source":"_posts/系统设计及优化/设计模式/装饰模式.md","raw":"---\ntitle: 设计模式——装饰模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'decorator-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n  装饰模式就是给一个对象增加一些新的功能，而且是动态的，要求装饰对象和被装饰对象实现同一个接口，装饰对象持有被装饰对象的实例。\n  \n### 示例\n下面看下装饰模式的代码实现\n\n```php\n//Source类是被装饰类，Decorator类是一个装饰类，可以为Source类动态的添加一些功能\ninterface Sourceable{\n    public function method();\n}\n\nclass Source implements Sourceable{\n    public function method(){\n        echo \"the original method!\" . PHP_EOL;\n    }\n}\n\nclass Decorator implements Sourceable{\n    private Sourceable $source;\n    public function __construct(Sourceable $source){\n        $this->source = $source;\n    }\n    public function method(){\n        echo \"before decorator\" . PHP_EOL;\n        $this->source->method();\n        echo \"after decorator\" . PHP_EOL;\n    }\n}\n\n//调用\n$source = new Source();\n$obj = new Decorator($source);\n$obj->method();\n/**\n * output:\n *\nbefore decorator\nthe original method!\nafter decorator\n */\n\n```\n\n### 总结\n  装饰器模式的应用场景：\n    1、需要扩展一个类的功能。\n    2、动态的为一个对象增加功能，而且还能动态撤销。（继承不能做到这一点，继承的功能是静态的，不能动态增删。）\n  缺点：产生过多相似的对象，不易排错！","slug":"系统设计及优化/设计模式/装饰模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vr00b0oshggpf2fam2","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  装饰模式就是给一个对象增加一些新的功能，而且是动态的，要求装饰对象和被装饰对象实现同一个接口，装饰对象持有被装饰对象的实例。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下装饰模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Source类是被装饰类，Decorator类是一个装饰类，可以为Source类动态的添加一些功能</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Source</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"the original method!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Decorator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Sourceable <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Sourceable <span class=\"variable\">$source</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source = <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"before decorator\"</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"after decorator\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//调用</span></span><br><span class=\"line\"><span class=\"variable\">$source</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Source</span>();</span><br><span class=\"line\"><span class=\"variable\">$obj</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Decorator</span>(<span class=\"variable\">$source</span>);</span><br><span class=\"line\"><span class=\"variable\">$obj</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\">before decorator</span></span><br><span class=\"line\"><span class=\"comment\">the original method!</span></span><br><span class=\"line\"><span class=\"comment\">after decorator</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>  装饰器模式的应用场景：<br>    1、需要扩展一个类的功能。<br>    2、动态的为一个对象增加功能，而且还能动态撤销。（继承不能做到这一点，继承的功能是静态的，不能动态增删。）<br>  缺点：产生过多相似的对象，不易排错！</p>\n","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  装饰模式就是给一个对象增加一些新的功能，而且是动态的，要求装饰对象和被装饰对象实现同一个接口，装饰对象持有被装饰对象的实例。</p>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下装饰模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//Source类是被装饰类，Decorator类是一个装饰类，可以为Source类动态的添加一些功能</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Source</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;the original method!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Decorator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Sourceable <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Sourceable <span class=\"variable\">$source</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source = <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;before decorator&quot;</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;after decorator&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//调用</span></span><br><span class=\"line\"><span class=\"variable\">$source</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Source</span>();</span><br><span class=\"line\"><span class=\"variable\">$obj</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Decorator</span>(<span class=\"variable\">$source</span>);</span><br><span class=\"line\"><span class=\"variable\">$obj</span>-&gt;<span class=\"title function_ invoke__\">method</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\">before decorator</span></span><br><span class=\"line\"><span class=\"comment\">the original method!</span></span><br><span class=\"line\"><span class=\"comment\">after decorator</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>  装饰器模式的应用场景：<br>    1、需要扩展一个类的功能。<br>    2、动态的为一个对象增加功能，而且还能动态撤销。（继承不能做到这一点，继承的功能是静态的，不能动态增删。）<br>  缺点：产生过多相似的对象，不易排错！</p>\n"},{"title":"设计模式——观察者模式","abbrlink":"observer-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n\n### 示例\n下面看下观察者模式的代码实现\n\n```php\ninterface Observer{\n    public function update();\n}\n\nclass Observer1 implements Observer{\n    public function update(){\n        echo \"observer1 has received!\" . PHP_EOL;\n    }\n}\n\nclass Observer2 implements Observer{\n    public function update(){\n        echo \"observer2 has received!\" . PHP_EOL;\n    }\n}\n\ninterface Subject{\n    public function add(Observer $observer);\n    public function del(Observer $observer);\n    public function notifyObservers();\n    public function operation();\n}\n\nabstract class AbstractSubject implements Subject{\n    private $vector = [];\n    public function add(Observer $observer){\n        $this->vector[] = $observer;\n    }\n    public function del(Observer $observer){\n        $index = array_search($observer,$this->vector);\n        unset($this->vector[$index]);\n    }\n    public function notifyObservers(){\n        foreach ($this->vector as $value){\n            $value->update();\n        }\n    }\n}\n\nclass MySubject extends AbstractSubject{\n    public function operation(){\n        echo \"update self!\" . PHP_EOL;\n        $this->notifyObservers();\n    }\n}\n\n\n// 调用\n$sub = new MySubject();\n$sub->add(new Observer1());\n$sub->add(new Observer2());\n$sub->operation();\n/**\n * output:\n * update self!\n * observer1 has received!\n * observer2 has received!\n */\n\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/观察者模式.md","raw":"---\ntitle: 设计模式——观察者模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'observer-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n\n### 示例\n下面看下观察者模式的代码实现\n\n```php\ninterface Observer{\n    public function update();\n}\n\nclass Observer1 implements Observer{\n    public function update(){\n        echo \"observer1 has received!\" . PHP_EOL;\n    }\n}\n\nclass Observer2 implements Observer{\n    public function update(){\n        echo \"observer2 has received!\" . PHP_EOL;\n    }\n}\n\ninterface Subject{\n    public function add(Observer $observer);\n    public function del(Observer $observer);\n    public function notifyObservers();\n    public function operation();\n}\n\nabstract class AbstractSubject implements Subject{\n    private $vector = [];\n    public function add(Observer $observer){\n        $this->vector[] = $observer;\n    }\n    public function del(Observer $observer){\n        $index = array_search($observer,$this->vector);\n        unset($this->vector[$index]);\n    }\n    public function notifyObservers(){\n        foreach ($this->vector as $value){\n            $value->update();\n        }\n    }\n}\n\nclass MySubject extends AbstractSubject{\n    public function operation(){\n        echo \"update self!\" . PHP_EOL;\n        $this->notifyObservers();\n    }\n}\n\n\n// 调用\n$sub = new MySubject();\n$sub->add(new Observer1());\n$sub->add(new Observer2());\n$sub->operation();\n/**\n * output:\n * update self!\n * observer1 has received!\n * observer2 has received!\n */\n\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/观察者模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vr00b2oshg3qmu2s3y","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下观察者模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observer</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observer1</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observer</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"observer1 has received!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observer2</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observer</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"observer2 has received!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subject</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">Observer <span class=\"variable\">$observer</span></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">del</span>(<span class=\"params\">Observer <span class=\"variable\">$observer</span></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notifyObservers</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractSubject</span> <span class=\"keyword\">implements</span> <span class=\"title\">Subject</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$vector</span> = [];</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">Observer <span class=\"variable\">$observer</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;vector[] = <span class=\"variable\">$observer</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">del</span>(<span class=\"params\">Observer <span class=\"variable\">$observer</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$index</span> = <span class=\"title function_ invoke__\">array_search</span>(<span class=\"variable\">$observer</span>,<span class=\"variable\">$this</span>-&gt;vector);</span><br><span class=\"line\">        <span class=\"keyword\">unset</span>(<span class=\"variable language_\">$this</span>-&gt;vector[<span class=\"variable\">$index</span>]);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notifyObservers</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"variable language_\">$this</span>-&gt;vector <span class=\"keyword\">as</span> <span class=\"variable\">$value</span>){</span><br><span class=\"line\">            <span class=\"variable\">$value</span>-&gt;<span class=\"title function_ invoke__\">update</span>();</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySubject</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractSubject</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"update self!\"</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">notifyObservers</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$sub</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MySubject</span>();</span><br><span class=\"line\"><span class=\"variable\">$sub</span>-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Observer1</span>());</span><br><span class=\"line\"><span class=\"variable\">$sub</span>-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Observer2</span>());</span><br><span class=\"line\"><span class=\"variable\">$sub</span>-&gt;<span class=\"title function_ invoke__\">operation</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * update self!</span></span><br><span class=\"line\"><span class=\"comment\"> * observer1 has received!</span></span><br><span class=\"line\"><span class=\"comment\"> * observer2 has received!</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下观察者模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Observer</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observer1</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observer</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;observer1 has received!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observer2</span> <span class=\"keyword\">implements</span> <span class=\"title\">Observer</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">update</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;observer2 has received!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subject</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">Observer <span class=\"variable\">$observer</span></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">del</span>(<span class=\"params\">Observer <span class=\"variable\">$observer</span></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notifyObservers</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractSubject</span> <span class=\"keyword\">implements</span> <span class=\"title\">Subject</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"variable\">$vector</span> = [];</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">Observer <span class=\"variable\">$observer</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;vector[] = <span class=\"variable\">$observer</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">del</span>(<span class=\"params\">Observer <span class=\"variable\">$observer</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$index</span> = <span class=\"title function_ invoke__\">array_search</span>(<span class=\"variable\">$observer</span>,<span class=\"variable\">$this</span>-&gt;vector);</span><br><span class=\"line\">        <span class=\"keyword\">unset</span>(<span class=\"variable language_\">$this</span>-&gt;vector[<span class=\"variable\">$index</span>]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notifyObservers</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">foreach</span> (<span class=\"variable language_\">$this</span>-&gt;vector <span class=\"keyword\">as</span> <span class=\"variable\">$value</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable\">$value</span>-&gt;<span class=\"title function_ invoke__\">update</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySubject</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractSubject</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;update self!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">notifyObservers</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$sub</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MySubject</span>();</span><br><span class=\"line\"><span class=\"variable\">$sub</span>-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Observer1</span>());</span><br><span class=\"line\"><span class=\"variable\">$sub</span>-&gt;<span class=\"title function_ invoke__\">add</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Observer2</span>());</span><br><span class=\"line\"><span class=\"variable\">$sub</span>-&gt;<span class=\"title function_ invoke__\">operation</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * update self!</span></span><br><span class=\"line\"><span class=\"comment\"> * observer1 has received!</span></span><br><span class=\"line\"><span class=\"comment\"> * observer2 has received!</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——解释器模式","abbrlink":"interpreter-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n\n### 示例\n下面看下解释器模式的代码实现\n\n```php\ninterface Expression{\n    public function interpret(Context $context): int;\n}\n\nclass Plus implements Expression{\n    public function interpret(Context $context): int{\n        return $context->getNum1() + $context->getNum2();\n    }\n}\n\nclass Minus implements Expression{\n    public function interpret(Context $context): int{\n        return $context->getNum1() - $context->getNum2();\n    }\n}\n\nclass Context{\n    private int $num1,$num2;\n\n    public function __construct(int $num1,int $num2){\n        $this->num1 = $num1;\n        $this->num2 = $num2;\n    }\n\n    public function getNum1(): int{\n        return $this->num1;\n    }\n\n    public function setNum1(int $num1){\n        $this->num1 = $num1;\n    }\n\n    public function getNum2(): int{\n        return $this->num2;\n    }\n\n    public function setNum2(int $num2){\n        $this->num2 = $num2;\n    }\n}\n\n\n// 调用\n$result = (new Minus())->interpret(new Context((new Plus())->interpret(new Context(9,2)),8));\necho $result;\n// output: 3\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/解释器模式.md","raw":"---\ntitle: 设计模式——解释器模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'interpreter-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n\n### 示例\n下面看下解释器模式的代码实现\n\n```php\ninterface Expression{\n    public function interpret(Context $context): int;\n}\n\nclass Plus implements Expression{\n    public function interpret(Context $context): int{\n        return $context->getNum1() + $context->getNum2();\n    }\n}\n\nclass Minus implements Expression{\n    public function interpret(Context $context): int{\n        return $context->getNum1() - $context->getNum2();\n    }\n}\n\nclass Context{\n    private int $num1,$num2;\n\n    public function __construct(int $num1,int $num2){\n        $this->num1 = $num1;\n        $this->num2 = $num2;\n    }\n\n    public function getNum1(): int{\n        return $this->num1;\n    }\n\n    public function setNum1(int $num1){\n        $this->num1 = $num1;\n    }\n\n    public function getNum2(): int{\n        return $this->num2;\n    }\n\n    public function setNum2(int $num2){\n        $this->num2 = $num2;\n    }\n}\n\n\n// 调用\n$result = (new Minus())->interpret(new Context((new Plus())->interpret(new Context(9,2)),8));\necho $result;\n// output: 3\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/解释器模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vs00b6oshghi0q36vw","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下解释器模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Expression</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context <span class=\"variable\">$context</span></span>): <span class=\"title\">int</span></span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Plus</span> <span class=\"keyword\">implements</span> <span class=\"title\">Expression</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context <span class=\"variable\">$context</span></span>): <span class=\"title\">int</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">getNum1</span>() + <span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">getNum2</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Minus</span> <span class=\"keyword\">implements</span> <span class=\"title\">Expression</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context <span class=\"variable\">$context</span></span>): <span class=\"title\">int</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">getNum1</span>() - <span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">getNum2</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"variable\">$num1</span>,<span class=\"variable\">$num2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$num1</span>,<span class=\"keyword\">int</span> <span class=\"variable\">$num2</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;num1 = <span class=\"variable\">$num1</span>;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;num2 = <span class=\"variable\">$num2</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getNum1</span>(<span class=\"params\"></span>): <span class=\"title\">int</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;num1;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setNum1</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$num1</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;num1 = <span class=\"variable\">$num1</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getNum2</span>(<span class=\"params\"></span>): <span class=\"title\">int</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;num2;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setNum2</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$num2</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;num2 = <span class=\"variable\">$num2</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$result</span> = (<span class=\"keyword\">new</span> <span class=\"title class_\">Minus</span>())-&gt;<span class=\"title function_ invoke__\">interpret</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Context</span>((<span class=\"keyword\">new</span> <span class=\"title class_\">Plus</span>())-&gt;<span class=\"title function_ invoke__\">interpret</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Context</span>(<span class=\"number\">9</span>,<span class=\"number\">2</span>)),<span class=\"number\">8</span>));</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$result</span>;</span><br><span class=\"line\"><span class=\"comment\">// output: 3</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下解释器模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Expression</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context <span class=\"variable\">$context</span></span>): <span class=\"title\">int</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Plus</span> <span class=\"keyword\">implements</span> <span class=\"title\">Expression</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context <span class=\"variable\">$context</span></span>): <span class=\"title\">int</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">getNum1</span>() + <span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">getNum2</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Minus</span> <span class=\"keyword\">implements</span> <span class=\"title\">Expression</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interpret</span>(<span class=\"params\">Context <span class=\"variable\">$context</span></span>): <span class=\"title\">int</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">getNum1</span>() - <span class=\"variable\">$context</span>-&gt;<span class=\"title function_ invoke__\">getNum2</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"variable\">$num1</span>,<span class=\"variable\">$num2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$num1</span>,<span class=\"keyword\">int</span> <span class=\"variable\">$num2</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;num1 = <span class=\"variable\">$num1</span>;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;num2 = <span class=\"variable\">$num2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getNum1</span>(<span class=\"params\"></span>): <span class=\"title\">int</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;num1;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setNum1</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$num1</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;num1 = <span class=\"variable\">$num1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getNum2</span>(<span class=\"params\"></span>): <span class=\"title\">int</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;num2;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setNum2</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$num2</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;num2 = <span class=\"variable\">$num2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$result</span> = (<span class=\"keyword\">new</span> <span class=\"title class_\">Minus</span>())-&gt;<span class=\"title function_ invoke__\">interpret</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Context</span>((<span class=\"keyword\">new</span> <span class=\"title class_\">Plus</span>())-&gt;<span class=\"title function_ invoke__\">interpret</span>(<span class=\"keyword\">new</span> <span class=\"title class_\">Context</span>(<span class=\"number\">9</span>,<span class=\"number\">2</span>)),<span class=\"number\">8</span>));</span><br><span class=\"line\"><span class=\"keyword\">echo</span> <span class=\"variable\">$result</span>;</span><br><span class=\"line\"><span class=\"comment\">// output: 3</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——访问者模式","abbrlink":"visitor-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n\n### 示例\n下面看下访问者模式的代码实现\n\n```php\ninterface Visitor{\n    public function visit(Subject $sub);\n}\n\nclass MyVisitor implements Visitor{\n    public function visit(Subject $sub){\n        echo \"visit the subject：\" . $sub->getSubject();\n    }\n}\n\ninterface Subject{\n    public function accept(Visitor $visitor);\n    public function getSubject(): string;\n}\n\nclass MySubject implements Subject{\n    public function accept(Visitor $visitor){\n        $visitor->visit($this);\n    }\n    public function getSubject(): string{\n        return \"love\";\n    }\n}\n\n\n// 调用\n$visitor = new MyVisitor();\n$sub = new MySubject();\n$sub->accept($visitor);\n// output:  visit the subject：love\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/访问者模式.md","raw":"---\ntitle: 设计模式——访问者模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'visitor-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n\n### 示例\n下面看下访问者模式的代码实现\n\n```php\ninterface Visitor{\n    public function visit(Subject $sub);\n}\n\nclass MyVisitor implements Visitor{\n    public function visit(Subject $sub){\n        echo \"visit the subject：\" . $sub->getSubject();\n    }\n}\n\ninterface Subject{\n    public function accept(Visitor $visitor);\n    public function getSubject(): string;\n}\n\nclass MySubject implements Subject{\n    public function accept(Visitor $visitor){\n        $visitor->visit($this);\n    }\n    public function getSubject(): string{\n        return \"love\";\n    }\n}\n\n\n// 调用\n$visitor = new MyVisitor();\n$sub = new MySubject();\n$sub->accept($visitor);\n// output:  visit the subject：love\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/访问者模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vt00b8oshg5tt80ye6","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下访问者模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Visitor</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visit</span>(<span class=\"params\">Subject <span class=\"variable\">$sub</span></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyVisitor</span> <span class=\"keyword\">implements</span> <span class=\"title\">Visitor</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visit</span>(<span class=\"params\">Subject <span class=\"variable\">$sub</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"visit the subject：\"</span> . <span class=\"variable\">$sub</span>-&gt;<span class=\"title function_ invoke__\">getSubject</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subject</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor <span class=\"variable\">$visitor</span></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSubject</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySubject</span> <span class=\"keyword\">implements</span> <span class=\"title\">Subject</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor <span class=\"variable\">$visitor</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable\">$visitor</span>-&gt;<span class=\"title function_ invoke__\">visit</span>(<span class=\"variable\">$this</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSubject</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"love\"</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$visitor</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyVisitor</span>();</span><br><span class=\"line\"><span class=\"variable\">$sub</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MySubject</span>();</span><br><span class=\"line\"><span class=\"variable\">$sub</span>-&gt;<span class=\"title function_ invoke__\">accept</span>(<span class=\"variable\">$visitor</span>);</span><br><span class=\"line\"><span class=\"comment\">// output:  visit the subject：love</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下访问者模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Visitor</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visit</span>(<span class=\"params\">Subject <span class=\"variable\">$sub</span></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyVisitor</span> <span class=\"keyword\">implements</span> <span class=\"title\">Visitor</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">visit</span>(<span class=\"params\">Subject <span class=\"variable\">$sub</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;visit the subject：&quot;</span> . <span class=\"variable\">$sub</span>-&gt;<span class=\"title function_ invoke__\">getSubject</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Subject</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor <span class=\"variable\">$visitor</span></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSubject</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySubject</span> <span class=\"keyword\">implements</span> <span class=\"title\">Subject</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">accept</span>(<span class=\"params\">Visitor <span class=\"variable\">$visitor</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable\">$visitor</span>-&gt;<span class=\"title function_ invoke__\">visit</span>(<span class=\"variable\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSubject</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;love&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$visitor</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyVisitor</span>();</span><br><span class=\"line\"><span class=\"variable\">$sub</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MySubject</span>();</span><br><span class=\"line\"><span class=\"variable\">$sub</span>-&gt;<span class=\"title function_ invoke__\">accept</span>(<span class=\"variable\">$visitor</span>);</span><br><span class=\"line\"><span class=\"comment\">// output:  visit the subject：love</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——责任链模式","abbrlink":"chain-of-responsibility-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n\n### 示例\n下面看下责任链模式的代码实现\n\n```php\ninterface Handler{\n    public function operation();\n}\n\nabstract class AbstractHandler{\n    private ?Handler $handler=null;\n\n    public function getHandler(): ?Handler{\n        return $this->handler;\n    }\n\n    public function setHandler(Handler $handler){\n        $this->handler = $handler;\n    }\n}\n\nclass MyHandler extends AbstractHandler implements Handler{\n    private string $name;\n\n    public function __construct(string $name){\n        $this->name = $name;\n    }\n\n    public function operation(){\n        echo $this->name . ' deal!' . PHP_EOL;\n        if (($handler=$this->getHandler()) != null){\n            $handler->operation();\n        }\n    }\n}\n\n\n// 调用\n$h1 = new MyHandler(\"h1\");\n$h2 = new MyHandler(\"h2\");\n$h3 = new MyHandler(\"h3\");\n\n$h1->setHandler($h2);\n$h2->setHandler($h3);\n\n$h1->operation();\n/**\n * output:\n * h1 deal! h2 deal! h3 deal!\n * \n */\n\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/责任链模式.md","raw":"---\ntitle: 设计模式——责任链模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'chain-of-responsibility-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n\n### 示例\n下面看下责任链模式的代码实现\n\n```php\ninterface Handler{\n    public function operation();\n}\n\nabstract class AbstractHandler{\n    private ?Handler $handler=null;\n\n    public function getHandler(): ?Handler{\n        return $this->handler;\n    }\n\n    public function setHandler(Handler $handler){\n        $this->handler = $handler;\n    }\n}\n\nclass MyHandler extends AbstractHandler implements Handler{\n    private string $name;\n\n    public function __construct(string $name){\n        $this->name = $name;\n    }\n\n    public function operation(){\n        echo $this->name . ' deal!' . PHP_EOL;\n        if (($handler=$this->getHandler()) != null){\n            $handler->operation();\n        }\n    }\n}\n\n\n// 调用\n$h1 = new MyHandler(\"h1\");\n$h2 = new MyHandler(\"h2\");\n$h3 = new MyHandler(\"h3\");\n\n$h1->setHandler($h2);\n$h2->setHandler($h3);\n\n$h1->operation();\n/**\n * output:\n * h1 deal! h2 deal! h3 deal!\n * \n */\n\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/责任链模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vt00bboshgfahmag2m","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下责任链模式的代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Handler</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractHandler</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ?Handler <span class=\"variable\">$handler</span>=<span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHandler</span>(<span class=\"params\"></span>): ?<span class=\"title\">Handler</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;handler;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setHandler</span>(<span class=\"params\">Handler <span class=\"variable\">$handler</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;handler = <span class=\"variable\">$handler</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractHandler</span> <span class=\"keyword\">implements</span> <span class=\"title\">Handler</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$name</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$name</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;name = <span class=\"variable\">$name</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"variable language_\">$this</span>-&gt;name . <span class=\"string\">' deal!'</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((<span class=\"variable\">$handler</span>=<span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">getHandler</span>()) != <span class=\"literal\">null</span>){</span><br><span class=\"line\">            <span class=\"variable\">$handler</span>-&gt;<span class=\"title function_ invoke__\">operation</span>();</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$h1</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyHandler</span>(<span class=\"string\">\"h1\"</span>);</span><br><span class=\"line\"><span class=\"variable\">$h2</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyHandler</span>(<span class=\"string\">\"h2\"</span>);</span><br><span class=\"line\"><span class=\"variable\">$h3</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyHandler</span>(<span class=\"string\">\"h3\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$h1</span>-&gt;<span class=\"title function_ invoke__\">setHandler</span>(<span class=\"variable\">$h2</span>);</span><br><span class=\"line\"><span class=\"variable\">$h2</span>-&gt;<span class=\"title function_ invoke__\">setHandler</span>(<span class=\"variable\">$h3</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$h1</span>-&gt;<span class=\"title function_ invoke__\">operation</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * h1 deal! h2 deal! h3 deal!</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下责任链模式的代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Handler</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractHandler</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ?Handler <span class=\"variable\">$handler</span>=<span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getHandler</span>(<span class=\"params\"></span>): ?<span class=\"title\">Handler</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;handler;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setHandler</span>(<span class=\"params\">Handler <span class=\"variable\">$handler</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;handler = <span class=\"variable\">$handler</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">AbstractHandler</span> <span class=\"keyword\">implements</span> <span class=\"title\">Handler</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> <span class=\"variable\">$name</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\"><span class=\"keyword\">string</span> <span class=\"variable\">$name</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;name = <span class=\"variable\">$name</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">operation</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"variable language_\">$this</span>-&gt;name . <span class=\"string\">&#x27; deal!&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((<span class=\"variable\">$handler</span>=<span class=\"variable language_\">$this</span>-&gt;<span class=\"title function_ invoke__\">getHandler</span>()) != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable\">$handler</span>-&gt;<span class=\"title function_ invoke__\">operation</span>();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$h1</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyHandler</span>(<span class=\"string\">&quot;h1&quot;</span>);</span><br><span class=\"line\"><span class=\"variable\">$h2</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyHandler</span>(<span class=\"string\">&quot;h2&quot;</span>);</span><br><span class=\"line\"><span class=\"variable\">$h3</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyHandler</span>(<span class=\"string\">&quot;h3&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$h1</span>-&gt;<span class=\"title function_ invoke__\">setHandler</span>(<span class=\"variable\">$h2</span>);</span><br><span class=\"line\"><span class=\"variable\">$h2</span>-&gt;<span class=\"title function_ invoke__\">setHandler</span>(<span class=\"variable\">$h3</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$h1</span>-&gt;<span class=\"title function_ invoke__\">operation</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * h1 deal! h2 deal! h3 deal!</span></span><br><span class=\"line\"><span class=\"comment\"> * </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"软件的设计模式","abbrlink":"design-patterns","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 设计模式的六大原则\n- 总原则：开闭原则（Open Close Principle）\n开闭原则就是说对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，而是要扩展原有代码，实现一个热插拔的效果。所以一句话概括就是：为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类等，后面的具体设计中我们会提到这点。\n\n- 1、单一职责原则\n不要存在多于一个导致类变更的原因，也就是说每个类应该实现单一的职责，如若不然，就应该把类拆分。\n\n- 2、里氏替换原则（Liskov Substitution Principle）\n里氏代换原则(Liskov Substitution Principle LSP)面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。 LSP是继承复用的基石，只有当衍生类可以替换掉基类，软件单位的功能不受到影响时，基类才能真正被复用，而衍生类也能够在基类的基础上增加新的行为。里氏代换原则是对“开-闭”原则的补充。实现“开-闭”原则的关键步骤就是抽象化。而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。\n历史替换原则中，子类对父类的方法尽量不要重写和重载。因为父类代表了定义好的结构，通过这个规范的接口与外界交互，子类不应该随便破坏它。\n\n- 3、依赖倒转原则（Dependence Inversion Principle）\n这个是开闭原则的基础，具体内容：面向接口编程，依赖于抽象而不依赖于具体。写代码时用到具体类时，不与具体类交互，而与具体类的上层接口交互。\n\n- 4、接口隔离原则（Interface Segregation Principle）\n这个原则的意思是：每个接口中不存在子类用不到却必须实现的方法，如果不然，就要将接口拆分。使用多个隔离的接口，比使用单个接口（多个接口方法集合到一个的接口）要好。\n\n- 5、迪米特法则（最少知道原则）（Demeter Principle）\n就是说：一个类对自己依赖的类知道的越少越好。也就是说无论被依赖的类多么复杂，都应该将逻辑封装在方法的内部，通过public方法提供给外部。这样当被依赖的类变化时，才能最小的影响该类。\n\n最少知道原则的另一个表达方式是：只与直接的朋友通信。类之间只要有耦合关系，就叫朋友关系。耦合分为依赖、关联、聚合、组合等。我们称出现为成员变量、方法参数、方法返回值中的类为直接朋友。局部变量、临时变量则不是直接的朋友。我们要求陌生的类不要作为局部变量出现在类中。\n\n- 6、合成复用原则（Composite Reuse Principle）\n原则是尽量首先使用合成/聚合的方式，而不是使用继承。\n  \n### 设计模式的分类\n总体来说设计模式分为三大类：\n- 创建型模式，共五种：<a href=\"simple-factory-pattern.html\" target=\"_blank\">工厂方法模式</a>、抽象工厂模式、<a href=\"singleton-pattern.html\" target=\"_blank\">单例模式</a>、<a href=\"builder-pattern.html\" target=\"_blank\">建造者模式</a>、<a href=\"prototype-pattern.html\" target=\"_blank\">原型模式</a>。\n- 结构型模式，共七种：<a href=\"adapter-pattern.html\" target=\"_blank\">适配器模式</a>、<a href=\"decorator-pattern.html\" target=\"_blank\">装饰器模式</a>、<a href=\"proxy-pattern.html\" target=\"_blank\">代理模式</a>、<a href=\"facade-pattern.html\" target=\"_blank\">外观模式</a>、<a href=\"bridge-pattern.html\" target=\"_blank\">桥接模式</a>、<a href=\"composite-pattern.html\" target=\"_blank\">组合模式</a>、<a href=\"flyweight-pattern.html\" target=\"_blank\">享元模式</a>。\n- 行为型模式，共十一种：<a href=\"strategy-pattern.html\" target=\"_blank\">策略模式</a>、<a href=\"template-method-pattern.html\" target=\"_blank\">模板方法模式</a>、<a href=\"observer-pattern.html\" target=\"_blank\">观察者模式</a>、<a href=\"iterator-pattern.html\" target=\"_blank\">迭代子模式</a>、<a href=\"chain-of-responsibility-pattern.html\" target=\"_blank\">责任链模式</a>、<a href=\"command-pattern.html\" target=\"_blank\">命令模式</a>、<a href=\"memento-pattern.html\" target=\"_blank\">备忘录模式</a>、<a href=\"state-pattern.html\" target=\"_blank\">状态模式</a>、<a href=\"visitor-pattern.html\" target=\"_blank\">访问者模式</a>、<a href=\"mediator-pattern.html\" target=\"_blank\">中介者模式</a>、<a href=\"interpreter-pattern.html\" target=\"_blank\">解释器模式</a>。\n- 其实还有两类：并发型模式和线程池模式。","source":"_posts/系统设计及优化/设计模式/软件的设计模式.md","raw":"---\ntitle: 软件的设计模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'design-patterns'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 设计模式的六大原则\n- 总原则：开闭原则（Open Close Principle）\n开闭原则就是说对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，而是要扩展原有代码，实现一个热插拔的效果。所以一句话概括就是：为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类等，后面的具体设计中我们会提到这点。\n\n- 1、单一职责原则\n不要存在多于一个导致类变更的原因，也就是说每个类应该实现单一的职责，如若不然，就应该把类拆分。\n\n- 2、里氏替换原则（Liskov Substitution Principle）\n里氏代换原则(Liskov Substitution Principle LSP)面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。 LSP是继承复用的基石，只有当衍生类可以替换掉基类，软件单位的功能不受到影响时，基类才能真正被复用，而衍生类也能够在基类的基础上增加新的行为。里氏代换原则是对“开-闭”原则的补充。实现“开-闭”原则的关键步骤就是抽象化。而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。\n历史替换原则中，子类对父类的方法尽量不要重写和重载。因为父类代表了定义好的结构，通过这个规范的接口与外界交互，子类不应该随便破坏它。\n\n- 3、依赖倒转原则（Dependence Inversion Principle）\n这个是开闭原则的基础，具体内容：面向接口编程，依赖于抽象而不依赖于具体。写代码时用到具体类时，不与具体类交互，而与具体类的上层接口交互。\n\n- 4、接口隔离原则（Interface Segregation Principle）\n这个原则的意思是：每个接口中不存在子类用不到却必须实现的方法，如果不然，就要将接口拆分。使用多个隔离的接口，比使用单个接口（多个接口方法集合到一个的接口）要好。\n\n- 5、迪米特法则（最少知道原则）（Demeter Principle）\n就是说：一个类对自己依赖的类知道的越少越好。也就是说无论被依赖的类多么复杂，都应该将逻辑封装在方法的内部，通过public方法提供给外部。这样当被依赖的类变化时，才能最小的影响该类。\n\n最少知道原则的另一个表达方式是：只与直接的朋友通信。类之间只要有耦合关系，就叫朋友关系。耦合分为依赖、关联、聚合、组合等。我们称出现为成员变量、方法参数、方法返回值中的类为直接朋友。局部变量、临时变量则不是直接的朋友。我们要求陌生的类不要作为局部变量出现在类中。\n\n- 6、合成复用原则（Composite Reuse Principle）\n原则是尽量首先使用合成/聚合的方式，而不是使用继承。\n  \n### 设计模式的分类\n总体来说设计模式分为三大类：\n- 创建型模式，共五种：<a href=\"simple-factory-pattern.html\" target=\"_blank\">工厂方法模式</a>、抽象工厂模式、<a href=\"singleton-pattern.html\" target=\"_blank\">单例模式</a>、<a href=\"builder-pattern.html\" target=\"_blank\">建造者模式</a>、<a href=\"prototype-pattern.html\" target=\"_blank\">原型模式</a>。\n- 结构型模式，共七种：<a href=\"adapter-pattern.html\" target=\"_blank\">适配器模式</a>、<a href=\"decorator-pattern.html\" target=\"_blank\">装饰器模式</a>、<a href=\"proxy-pattern.html\" target=\"_blank\">代理模式</a>、<a href=\"facade-pattern.html\" target=\"_blank\">外观模式</a>、<a href=\"bridge-pattern.html\" target=\"_blank\">桥接模式</a>、<a href=\"composite-pattern.html\" target=\"_blank\">组合模式</a>、<a href=\"flyweight-pattern.html\" target=\"_blank\">享元模式</a>。\n- 行为型模式，共十一种：<a href=\"strategy-pattern.html\" target=\"_blank\">策略模式</a>、<a href=\"template-method-pattern.html\" target=\"_blank\">模板方法模式</a>、<a href=\"observer-pattern.html\" target=\"_blank\">观察者模式</a>、<a href=\"iterator-pattern.html\" target=\"_blank\">迭代子模式</a>、<a href=\"chain-of-responsibility-pattern.html\" target=\"_blank\">责任链模式</a>、<a href=\"command-pattern.html\" target=\"_blank\">命令模式</a>、<a href=\"memento-pattern.html\" target=\"_blank\">备忘录模式</a>、<a href=\"state-pattern.html\" target=\"_blank\">状态模式</a>、<a href=\"visitor-pattern.html\" target=\"_blank\">访问者模式</a>、<a href=\"mediator-pattern.html\" target=\"_blank\">中介者模式</a>、<a href=\"interpreter-pattern.html\" target=\"_blank\">解释器模式</a>。\n- 其实还有两类：并发型模式和线程池模式。","slug":"系统设计及优化/设计模式/软件的设计模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vu00beoshg4ewsgk6t","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"设计模式的六大原则\"><a href=\"#设计模式的六大原则\" class=\"headerlink\" title=\"设计模式的六大原则\"></a>设计模式的六大原则</h3><ul>\n<li><p>总原则：开闭原则（Open Close Principle）<br>开闭原则就是说对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，而是要扩展原有代码，实现一个热插拔的效果。所以一句话概括就是：为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类等，后面的具体设计中我们会提到这点。</p>\n</li>\n<li><p>1、单一职责原则<br>不要存在多于一个导致类变更的原因，也就是说每个类应该实现单一的职责，如若不然，就应该把类拆分。</p>\n</li>\n<li><p>2、里氏替换原则（Liskov Substitution Principle）<br>里氏代换原则(Liskov Substitution Principle LSP)面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。 LSP是继承复用的基石，只有当衍生类可以替换掉基类，软件单位的功能不受到影响时，基类才能真正被复用，而衍生类也能够在基类的基础上增加新的行为。里氏代换原则是对“开-闭”原则的补充。实现“开-闭”原则的关键步骤就是抽象化。而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。<br>历史替换原则中，子类对父类的方法尽量不要重写和重载。因为父类代表了定义好的结构，通过这个规范的接口与外界交互，子类不应该随便破坏它。</p>\n</li>\n<li><p>3、依赖倒转原则（Dependence Inversion Principle）<br>这个是开闭原则的基础，具体内容：面向接口编程，依赖于抽象而不依赖于具体。写代码时用到具体类时，不与具体类交互，而与具体类的上层接口交互。</p>\n</li>\n<li><p>4、接口隔离原则（Interface Segregation Principle）<br>这个原则的意思是：每个接口中不存在子类用不到却必须实现的方法，如果不然，就要将接口拆分。使用多个隔离的接口，比使用单个接口（多个接口方法集合到一个的接口）要好。</p>\n</li>\n<li><p>5、迪米特法则（最少知道原则）（Demeter Principle）<br>就是说：一个类对自己依赖的类知道的越少越好。也就是说无论被依赖的类多么复杂，都应该将逻辑封装在方法的内部，通过public方法提供给外部。这样当被依赖的类变化时，才能最小的影响该类。</p>\n</li>\n</ul>\n<p>最少知道原则的另一个表达方式是：只与直接的朋友通信。类之间只要有耦合关系，就叫朋友关系。耦合分为依赖、关联、聚合、组合等。我们称出现为成员变量、方法参数、方法返回值中的类为直接朋友。局部变量、临时变量则不是直接的朋友。我们要求陌生的类不要作为局部变量出现在类中。</p>\n<ul>\n<li>6、合成复用原则（Composite Reuse Principle）<br>原则是尽量首先使用合成/聚合的方式，而不是使用继承。</li>\n</ul>\n<h3 id=\"设计模式的分类\"><a href=\"#设计模式的分类\" class=\"headerlink\" title=\"设计模式的分类\"></a>设计模式的分类</h3><p>总体来说设计模式分为三大类：</p>\n<ul>\n<li>创建型模式，共五种：<a href=\"simple-factory-pattern.html\" target=\"_blank\">工厂方法模式</a>、抽象工厂模式、<a href=\"singleton-pattern.html\" target=\"_blank\">单例模式</a>、<a href=\"builder-pattern.html\" target=\"_blank\">建造者模式</a>、<a href=\"prototype-pattern.html\" target=\"_blank\">原型模式</a>。</li>\n<li>结构型模式，共七种：<a href=\"adapter-pattern.html\" target=\"_blank\">适配器模式</a>、<a href=\"decorator-pattern.html\" target=\"_blank\">装饰器模式</a>、<a href=\"proxy-pattern.html\" target=\"_blank\">代理模式</a>、<a href=\"facade-pattern.html\" target=\"_blank\">外观模式</a>、<a href=\"bridge-pattern.html\" target=\"_blank\">桥接模式</a>、<a href=\"composite-pattern.html\" target=\"_blank\">组合模式</a>、<a href=\"flyweight-pattern.html\" target=\"_blank\">享元模式</a>。</li>\n<li>行为型模式，共十一种：<a href=\"strategy-pattern.html\" target=\"_blank\">策略模式</a>、<a href=\"template-method-pattern.html\" target=\"_blank\">模板方法模式</a>、<a href=\"observer-pattern.html\" target=\"_blank\">观察者模式</a>、<a href=\"iterator-pattern.html\" target=\"_blank\">迭代子模式</a>、<a href=\"chain-of-responsibility-pattern.html\" target=\"_blank\">责任链模式</a>、<a href=\"command-pattern.html\" target=\"_blank\">命令模式</a>、<a href=\"memento-pattern.html\" target=\"_blank\">备忘录模式</a>、<a href=\"state-pattern.html\" target=\"_blank\">状态模式</a>、<a href=\"visitor-pattern.html\" target=\"_blank\">访问者模式</a>、<a href=\"mediator-pattern.html\" target=\"_blank\">中介者模式</a>、<a href=\"interpreter-pattern.html\" target=\"_blank\">解释器模式</a>。</li>\n<li>其实还有两类：并发型模式和线程池模式。</li>\n</ul>\n","excerpt":"","more":"<h3 id=\"设计模式的六大原则\"><a href=\"#设计模式的六大原则\" class=\"headerlink\" title=\"设计模式的六大原则\"></a>设计模式的六大原则</h3><ul>\n<li><p>总原则：开闭原则（Open Close Principle）<br>开闭原则就是说对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，而是要扩展原有代码，实现一个热插拔的效果。所以一句话概括就是：为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类等，后面的具体设计中我们会提到这点。</p>\n</li>\n<li><p>1、单一职责原则<br>不要存在多于一个导致类变更的原因，也就是说每个类应该实现单一的职责，如若不然，就应该把类拆分。</p>\n</li>\n<li><p>2、里氏替换原则（Liskov Substitution Principle）<br>里氏代换原则(Liskov Substitution Principle LSP)面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。 LSP是继承复用的基石，只有当衍生类可以替换掉基类，软件单位的功能不受到影响时，基类才能真正被复用，而衍生类也能够在基类的基础上增加新的行为。里氏代换原则是对“开-闭”原则的补充。实现“开-闭”原则的关键步骤就是抽象化。而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。<br>历史替换原则中，子类对父类的方法尽量不要重写和重载。因为父类代表了定义好的结构，通过这个规范的接口与外界交互，子类不应该随便破坏它。</p>\n</li>\n<li><p>3、依赖倒转原则（Dependence Inversion Principle）<br>这个是开闭原则的基础，具体内容：面向接口编程，依赖于抽象而不依赖于具体。写代码时用到具体类时，不与具体类交互，而与具体类的上层接口交互。</p>\n</li>\n<li><p>4、接口隔离原则（Interface Segregation Principle）<br>这个原则的意思是：每个接口中不存在子类用不到却必须实现的方法，如果不然，就要将接口拆分。使用多个隔离的接口，比使用单个接口（多个接口方法集合到一个的接口）要好。</p>\n</li>\n<li><p>5、迪米特法则（最少知道原则）（Demeter Principle）<br>就是说：一个类对自己依赖的类知道的越少越好。也就是说无论被依赖的类多么复杂，都应该将逻辑封装在方法的内部，通过public方法提供给外部。这样当被依赖的类变化时，才能最小的影响该类。</p>\n</li>\n</ul>\n<p>最少知道原则的另一个表达方式是：只与直接的朋友通信。类之间只要有耦合关系，就叫朋友关系。耦合分为依赖、关联、聚合、组合等。我们称出现为成员变量、方法参数、方法返回值中的类为直接朋友。局部变量、临时变量则不是直接的朋友。我们要求陌生的类不要作为局部变量出现在类中。</p>\n<ul>\n<li>6、合成复用原则（Composite Reuse Principle）<br>原则是尽量首先使用合成/聚合的方式，而不是使用继承。</li>\n</ul>\n<h3 id=\"设计模式的分类\"><a href=\"#设计模式的分类\" class=\"headerlink\" title=\"设计模式的分类\"></a>设计模式的分类</h3><p>总体来说设计模式分为三大类：</p>\n<ul>\n<li>创建型模式，共五种：<a href=\"simple-factory-pattern.html\" target=\"_blank\">工厂方法模式</a>、抽象工厂模式、<a href=\"singleton-pattern.html\" target=\"_blank\">单例模式</a>、<a href=\"builder-pattern.html\" target=\"_blank\">建造者模式</a>、<a href=\"prototype-pattern.html\" target=\"_blank\">原型模式</a>。</li>\n<li>结构型模式，共七种：<a href=\"adapter-pattern.html\" target=\"_blank\">适配器模式</a>、<a href=\"decorator-pattern.html\" target=\"_blank\">装饰器模式</a>、<a href=\"proxy-pattern.html\" target=\"_blank\">代理模式</a>、<a href=\"facade-pattern.html\" target=\"_blank\">外观模式</a>、<a href=\"bridge-pattern.html\" target=\"_blank\">桥接模式</a>、<a href=\"composite-pattern.html\" target=\"_blank\">组合模式</a>、<a href=\"flyweight-pattern.html\" target=\"_blank\">享元模式</a>。</li>\n<li>行为型模式，共十一种：<a href=\"strategy-pattern.html\" target=\"_blank\">策略模式</a>、<a href=\"template-method-pattern.html\" target=\"_blank\">模板方法模式</a>、<a href=\"observer-pattern.html\" target=\"_blank\">观察者模式</a>、<a href=\"iterator-pattern.html\" target=\"_blank\">迭代子模式</a>、<a href=\"chain-of-responsibility-pattern.html\" target=\"_blank\">责任链模式</a>、<a href=\"command-pattern.html\" target=\"_blank\">命令模式</a>、<a href=\"memento-pattern.html\" target=\"_blank\">备忘录模式</a>、<a href=\"state-pattern.html\" target=\"_blank\">状态模式</a>、<a href=\"visitor-pattern.html\" target=\"_blank\">访问者模式</a>、<a href=\"mediator-pattern.html\" target=\"_blank\">中介者模式</a>、<a href=\"interpreter-pattern.html\" target=\"_blank\">解释器模式</a>。</li>\n<li>其实还有两类：并发型模式和线程池模式。</li>\n</ul>\n"},{"title":"设计模式——迭代器模式","abbrlink":"iterator-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n\n### 示例\n下面看下代码实现\n\n```php\ninterface Collection{\n    public function iterator();\n    public function get(int $i);\n    public function size(): int;\n}\n\ninterface Iterator{\n    public function previous();\n    public function next();\n    public function hasNext(): bool;\n    public function first();\n}\n\nclass MyCollection implements Collection{\n    public string $str = 'ABCDE';\n    public function iterator(): MyIterator{\n        return new MyIterator($this);\n    }\n    public function get(int $i): string{\n        return $this->str[$i];\n    }\n    public function size(): int{\n        return strlen($this->str);\n    }\n}\n\nclass MyIterator implements Iterator{\n    private Collection $collection;\n    private int $pos = -1;\n    public function __construct(Collection $collection){\n        $this->collection = $collection;\n    }\n\n    public function previous(){\n        if ($this->pos > 0){\n            $this->pos--;\n        }\n        return $this->collection->get($this->pos);\n    }\n\n    public function next(){\n        if ($this->pos < $this->collection->size() - 1){\n            $this->pos++;\n        }\n        return $this->collection->get($this->pos);\n    }\n\n    public function hasNext(): bool{\n        return $this->pos < $this->collection->size() - 1;\n    }\n\n    public function first(){\n        $this->pos = 0;\n        return $this->collection->get($this->pos);\n    }\n}\n\n\n// 调用\n$collection = new MyCollection();\n$it = $collection->iterator();\nwhile ($it->hasNext()){\n    echo $it->next().'&nbsp;&nbsp;';\n}\n// output: A  B  C  D  E\n\n```\n\n### 总结\n","source":"_posts/系统设计及优化/设计模式/迭代器模式.md","raw":"---\ntitle: 设计模式——迭代器模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'iterator-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n\n### 示例\n下面看下代码实现\n\n```php\ninterface Collection{\n    public function iterator();\n    public function get(int $i);\n    public function size(): int;\n}\n\ninterface Iterator{\n    public function previous();\n    public function next();\n    public function hasNext(): bool;\n    public function first();\n}\n\nclass MyCollection implements Collection{\n    public string $str = 'ABCDE';\n    public function iterator(): MyIterator{\n        return new MyIterator($this);\n    }\n    public function get(int $i): string{\n        return $this->str[$i];\n    }\n    public function size(): int{\n        return strlen($this->str);\n    }\n}\n\nclass MyIterator implements Iterator{\n    private Collection $collection;\n    private int $pos = -1;\n    public function __construct(Collection $collection){\n        $this->collection = $collection;\n    }\n\n    public function previous(){\n        if ($this->pos > 0){\n            $this->pos--;\n        }\n        return $this->collection->get($this->pos);\n    }\n\n    public function next(){\n        if ($this->pos < $this->collection->size() - 1){\n            $this->pos++;\n        }\n        return $this->collection->get($this->pos);\n    }\n\n    public function hasNext(): bool{\n        return $this->pos < $this->collection->size() - 1;\n    }\n\n    public function first(){\n        $this->pos = 0;\n        return $this->collection->get($this->pos);\n    }\n}\n\n\n// 调用\n$collection = new MyCollection();\n$it = $collection->iterator();\nwhile ($it->hasNext()){\n    echo $it->next().'&nbsp;&nbsp;';\n}\n// output: A  B  C  D  E\n\n```\n\n### 总结\n","slug":"系统设计及优化/设计模式/迭代器模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vv00bhoshg1hqd65cl","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下代码实现</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Collection</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">iterator</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$i</span></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">size</span>(<span class=\"params\"></span>): <span class=\"title\">int</span></span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Iterator</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">previous</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">next</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hasNext</span>(<span class=\"params\"></span>): <span class=\"title\">bool</span></span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">first</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyCollection</span> <span class=\"keyword\">implements</span> <span class=\"title\">Collection</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">string</span> <span class=\"variable\">$str</span> = <span class=\"string\">'ABCDE'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">iterator</span>(<span class=\"params\"></span>): <span class=\"title\">MyIterator</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyIterator</span>(<span class=\"variable language_\">$this</span>);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$i</span></span>): <span class=\"title\">string</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;str[<span class=\"variable\">$i</span>];</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">size</span>(<span class=\"params\"></span>): <span class=\"title\">int</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$this</span>-&gt;str);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyIterator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Iterator</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Collection <span class=\"variable\">$collection</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"variable\">$pos</span> = -<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Collection <span class=\"variable\">$collection</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;collection = <span class=\"variable\">$collection</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">previous</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;pos &gt; <span class=\"number\">0</span>){</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;pos--;</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;collection-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"variable\">$this</span>-&gt;pos);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">next</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;pos &lt; <span class=\"variable language_\">$this</span>-&gt;collection-&gt;<span class=\"title function_ invoke__\">size</span>() - <span class=\"number\">1</span>){</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;pos++;</span><br><span class=\"line\">        }</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;collection-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"variable\">$this</span>-&gt;pos);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hasNext</span>(<span class=\"params\"></span>): <span class=\"title\">bool</span></span>{</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;pos &lt; <span class=\"variable language_\">$this</span>-&gt;collection-&gt;<span class=\"title function_ invoke__\">size</span>() - <span class=\"number\">1</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">first</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;pos = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;collection-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"variable\">$this</span>-&gt;pos);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$collection</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyCollection</span>();</span><br><span class=\"line\"><span class=\"variable\">$it</span> = <span class=\"variable\">$collection</span>-&gt;<span class=\"title function_ invoke__\">iterator</span>();</span><br><span class=\"line\"><span class=\"keyword\">while</span> (<span class=\"variable\">$it</span>-&gt;<span class=\"title function_ invoke__\">hasNext</span>()){</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"variable\">$it</span>-&gt;<span class=\"title function_ invoke__\">next</span>().<span class=\"string\">'&amp;nbsp;&amp;nbsp;'</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"comment\">// output: A  B  C  D  E</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><p>下面看下代码实现</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Collection</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">iterator</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$i</span></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">size</span>(<span class=\"params\"></span>): <span class=\"title\">int</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Iterator</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">previous</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">next</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hasNext</span>(<span class=\"params\"></span>): <span class=\"title\">bool</span></span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">first</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyCollection</span> <span class=\"keyword\">implements</span> <span class=\"title\">Collection</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">string</span> <span class=\"variable\">$str</span> = <span class=\"string\">&#x27;ABCDE&#x27;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">iterator</span>(<span class=\"params\"></span>): <span class=\"title\">MyIterator</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">MyIterator</span>(<span class=\"variable language_\">$this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get</span>(<span class=\"params\"><span class=\"keyword\">int</span> <span class=\"variable\">$i</span></span>): <span class=\"title\">string</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;str[<span class=\"variable\">$i</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">size</span>(<span class=\"params\"></span>): <span class=\"title\">int</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title function_ invoke__\">strlen</span>(<span class=\"variable\">$this</span>-&gt;str);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyIterator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Iterator</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Collection <span class=\"variable\">$collection</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> <span class=\"variable\">$pos</span> = -<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Collection <span class=\"variable\">$collection</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;collection = <span class=\"variable\">$collection</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">previous</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;pos &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;pos--;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;collection-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"variable\">$this</span>-&gt;pos);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">next</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"variable language_\">$this</span>-&gt;pos &lt; <span class=\"variable language_\">$this</span>-&gt;collection-&gt;<span class=\"title function_ invoke__\">size</span>() - <span class=\"number\">1</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">$this</span>-&gt;pos++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;collection-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"variable\">$this</span>-&gt;pos);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hasNext</span>(<span class=\"params\"></span>): <span class=\"title\">bool</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;pos &lt; <span class=\"variable language_\">$this</span>-&gt;collection-&gt;<span class=\"title function_ invoke__\">size</span>() - <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">first</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;pos = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">$this</span>-&gt;collection-&gt;<span class=\"title function_ invoke__\">get</span>(<span class=\"variable\">$this</span>-&gt;pos);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$collection</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">MyCollection</span>();</span><br><span class=\"line\"><span class=\"variable\">$it</span> = <span class=\"variable\">$collection</span>-&gt;<span class=\"title function_ invoke__\">iterator</span>();</span><br><span class=\"line\"><span class=\"keyword\">while</span> (<span class=\"variable\">$it</span>-&gt;<span class=\"title function_ invoke__\">hasNext</span>())&#123;</span><br><span class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"variable\">$it</span>-&gt;<span class=\"title function_ invoke__\">next</span>().<span class=\"string\">&#x27;&amp;nbsp;&amp;nbsp;&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// output: A  B  C  D  E</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3>"},{"title":"设计模式——适配器模式","abbrlink":"adapter-pattern","date":"2022-05-19T13:53:34.000Z","updated":"2022-05-19T13:53:34.000Z","_content":"\n\n### 说明\n  适配器模式将某个类的接口转换成客户端期望的另一个接口表示，目的是消除由于接口不匹配所造成的类的兼容性问题。主要分为三类：类的适配器模式、对象的适配器模式、接口的适配器模式。\n\n### 分类\n#### 类的适配器模式\n  核心思想就是：有一个Source类，拥有一个方法，待适配，目标接口是Targetable，通过Adapter类，将Source的功能扩展到Targetable里\n\n示例\n```php\nclass Source{\n    public function method1(){\n        echo 'this is original method!' . PHP_EOL;\n    }\n}\n\ninterface Targetable{\n    public function method1();\n    public function method2();\n}\n\n//Adapter类继承Source类，实现Targetable接口，这样Targetable接口的实现类就具有了Source类的功能。\nclass Adapter extends Source implements Targetable {\n    public function method2(){\n        echo 'this is the targetable method!' . PHP_EOL;\n    }\n}\n\n// 调用\n$target = new Adapter();\n$target->method1();\n$target->method2();\n/**\n * output:\n * this is original method!\n * this is the targetable method!\n */\n\n```\n\n#### 对象的适配器模式\n  与类的适配器模式大体相同，只是适配的方法不同。\n  \n示例\n```php\nclass Source{\n    public function method1(){\n        echo 'this is original method!' . PHP_EOL;\n    }\n}\n\ninterface Targetable{\n    public function method1();\n    public function method2();\n}\n\n//Adapter类不继承Source类，而是持有Source类的实例，以达到解决兼容性的问题。\nclass Wrapper implements Targetable {\n    private Source $source;\n    public function __construct(Source $source){\n        $this->source = $source;\n    }\n    public function method2(){\n        echo 'this is the targetable method!' . PHP_EOL;\n    }\n    public function method1(){\n        $this->source->method1();\n    }\n}\n\n// 调用\n$source = new Source();\n$target = new Wrapper($source);\n$target->method1();\n$target->method2();\n/**\n * output:\n * this is original method!\n * this is the targetable method!\n */\n```\n\n#### 接口的适配器模式\n  接口的适配器是这样的：有时我们写的一个接口中有多个抽象方法，当我们写该接口的实现类时，必须实现该接口的所有方法，这明显有时比较浪费，因为并不是所有的方法都是我们需要的，有时只需要某一些，此处为了解决这个问题，我们引入了接口的适配器模式，借助于一个抽象类，该抽象类实现了该接口，实现了所有的方法，而我们不和原始的接口打交道，只和该抽象类取得联系，所以我们写一个类，继承该抽象类，重写我们需要的方法就行。\n  \n示例\n```php\ninterface Sourceable{\n    public function method1();\n    public function method2();\n}\n\nabstract class Wrapper implements Sourceable{\n    public function method1(){}\n    public function method2(){}\n}\n\nclass SourceSub1 extends Wrapper{\n    public function method1(){\n        echo \"the sourceable interface's first Sub1!\" . PHP_EOL;\n    }\n}\n\nclass SourceSub2 extends Wrapper{\n    public function method2(){\n        echo \"ths sourceable interface's second Sub2!\" . PHP_EOL;\n    }\n}\n\n//调用\n$source1 = new SourceSub1();\n$source2 = new SourceSub2();\n$source1->method1();\n$source1->method2();\n$source2->method1();\n$source2->method2();\n/**\n * output:\n * the sourceable interface's first Sub1!\n * ths sourceable interface's second Sub2!\n */\n```\n\n### 应用场景\n  类的适配器模式：当希望将一个类转换成满足另一个新接口的类时，可以使用类的适配器模式，创建一个新类，继承原有的类，实现新的接口即可。\n  对象的适配器模式：当希望将一个对象转换成满足另一个新接口的对象时，可以创建一个Wrapper类，持有原类的一个实例，在Wrapper类的方法中，调用实例的方法就行。\n  接口的适配器模式：当不希望实现一个接口中所有的方法时，可以创建一个抽象类Wrapper，实现所有方法，我们写别的类的时候，继承抽象类即可。","source":"_posts/系统设计及优化/设计模式/适配器模式.md","raw":"---\ntitle: 设计模式——适配器模式\ntags: [设计模式]\ncategories: [设计模式]\nabbrlink: 'adapter-pattern'\ndate: 2022-05-19 21:53:34\nupdated: 2022-05-19 21:53:34\n---\n\n\n### 说明\n  适配器模式将某个类的接口转换成客户端期望的另一个接口表示，目的是消除由于接口不匹配所造成的类的兼容性问题。主要分为三类：类的适配器模式、对象的适配器模式、接口的适配器模式。\n\n### 分类\n#### 类的适配器模式\n  核心思想就是：有一个Source类，拥有一个方法，待适配，目标接口是Targetable，通过Adapter类，将Source的功能扩展到Targetable里\n\n示例\n```php\nclass Source{\n    public function method1(){\n        echo 'this is original method!' . PHP_EOL;\n    }\n}\n\ninterface Targetable{\n    public function method1();\n    public function method2();\n}\n\n//Adapter类继承Source类，实现Targetable接口，这样Targetable接口的实现类就具有了Source类的功能。\nclass Adapter extends Source implements Targetable {\n    public function method2(){\n        echo 'this is the targetable method!' . PHP_EOL;\n    }\n}\n\n// 调用\n$target = new Adapter();\n$target->method1();\n$target->method2();\n/**\n * output:\n * this is original method!\n * this is the targetable method!\n */\n\n```\n\n#### 对象的适配器模式\n  与类的适配器模式大体相同，只是适配的方法不同。\n  \n示例\n```php\nclass Source{\n    public function method1(){\n        echo 'this is original method!' . PHP_EOL;\n    }\n}\n\ninterface Targetable{\n    public function method1();\n    public function method2();\n}\n\n//Adapter类不继承Source类，而是持有Source类的实例，以达到解决兼容性的问题。\nclass Wrapper implements Targetable {\n    private Source $source;\n    public function __construct(Source $source){\n        $this->source = $source;\n    }\n    public function method2(){\n        echo 'this is the targetable method!' . PHP_EOL;\n    }\n    public function method1(){\n        $this->source->method1();\n    }\n}\n\n// 调用\n$source = new Source();\n$target = new Wrapper($source);\n$target->method1();\n$target->method2();\n/**\n * output:\n * this is original method!\n * this is the targetable method!\n */\n```\n\n#### 接口的适配器模式\n  接口的适配器是这样的：有时我们写的一个接口中有多个抽象方法，当我们写该接口的实现类时，必须实现该接口的所有方法，这明显有时比较浪费，因为并不是所有的方法都是我们需要的，有时只需要某一些，此处为了解决这个问题，我们引入了接口的适配器模式，借助于一个抽象类，该抽象类实现了该接口，实现了所有的方法，而我们不和原始的接口打交道，只和该抽象类取得联系，所以我们写一个类，继承该抽象类，重写我们需要的方法就行。\n  \n示例\n```php\ninterface Sourceable{\n    public function method1();\n    public function method2();\n}\n\nabstract class Wrapper implements Sourceable{\n    public function method1(){}\n    public function method2(){}\n}\n\nclass SourceSub1 extends Wrapper{\n    public function method1(){\n        echo \"the sourceable interface's first Sub1!\" . PHP_EOL;\n    }\n}\n\nclass SourceSub2 extends Wrapper{\n    public function method2(){\n        echo \"ths sourceable interface's second Sub2!\" . PHP_EOL;\n    }\n}\n\n//调用\n$source1 = new SourceSub1();\n$source2 = new SourceSub2();\n$source1->method1();\n$source1->method2();\n$source2->method1();\n$source2->method2();\n/**\n * output:\n * the sourceable interface's first Sub1!\n * ths sourceable interface's second Sub2!\n */\n```\n\n### 应用场景\n  类的适配器模式：当希望将一个类转换成满足另一个新接口的类时，可以使用类的适配器模式，创建一个新类，继承原有的类，实现新的接口即可。\n  对象的适配器模式：当希望将一个对象转换成满足另一个新接口的对象时，可以创建一个Wrapper类，持有原类的一个实例，在Wrapper类的方法中，调用实例的方法就行。\n  接口的适配器模式：当不希望实现一个接口中所有的方法时，可以创建一个抽象类Wrapper，实现所有方法，我们写别的类的时候，继承抽象类即可。","slug":"系统设计及优化/设计模式/适配器模式","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vv00bjoshgc1q726bl","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  适配器模式将某个类的接口转换成客户端期望的另一个接口表示，目的是消除由于接口不匹配所造成的类的兼容性问题。主要分为三类：类的适配器模式、对象的适配器模式、接口的适配器模式。</p>\n<h3 id=\"分类\"><a href=\"#分类\" class=\"headerlink\" title=\"分类\"></a>分类</h3><h4 id=\"类的适配器模式\"><a href=\"#类的适配器模式\" class=\"headerlink\" title=\"类的适配器模式\"></a>类的适配器模式</h4><p>  核心思想就是：有一个Source类，拥有一个方法，待适配，目标接口是Targetable，通过Adapter类，将Source的功能扩展到Targetable里</p>\n<p>示例<br></p><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Source</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'this is original method!'</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Targetable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Adapter类继承Source类，实现Targetable接口，这样Targetable接口的实现类就具有了Source类的功能。</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Adapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">Source</span> <span class=\"keyword\">implements</span> <span class=\"title\">Targetable</span> </span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'this is the targetable method!'</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$target</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Adapter</span>();</span><br><span class=\"line\"><span class=\"variable\">$target</span>-&gt;<span class=\"title function_ invoke__\">method1</span>();</span><br><span class=\"line\"><span class=\"variable\">$target</span>-&gt;<span class=\"title function_ invoke__\">method2</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * this is original method!</span></span><br><span class=\"line\"><span class=\"comment\"> * this is the targetable method!</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure><p></p>\n<h4 id=\"对象的适配器模式\"><a href=\"#对象的适配器模式\" class=\"headerlink\" title=\"对象的适配器模式\"></a>对象的适配器模式</h4><p>  与类的适配器模式大体相同，只是适配的方法不同。</p>\n<p>示例<br></p><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Source</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'this is original method!'</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Targetable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Adapter类不继承Source类，而是持有Source类的实例，以达到解决兼容性的问题。</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Wrapper</span> <span class=\"keyword\">implements</span> <span class=\"title\">Targetable</span> </span>{</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Source <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Source <span class=\"variable\">$source</span></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source = <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">'this is the targetable method!'</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source-&gt;<span class=\"title function_ invoke__\">method1</span>();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$source</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Source</span>();</span><br><span class=\"line\"><span class=\"variable\">$target</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Wrapper</span>(<span class=\"variable\">$source</span>);</span><br><span class=\"line\"><span class=\"variable\">$target</span>-&gt;<span class=\"title function_ invoke__\">method1</span>();</span><br><span class=\"line\"><span class=\"variable\">$target</span>-&gt;<span class=\"title function_ invoke__\">method2</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * this is original method!</span></span><br><span class=\"line\"><span class=\"comment\"> * this is the targetable method!</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></tbody></table></figure><p></p>\n<h4 id=\"接口的适配器模式\"><a href=\"#接口的适配器模式\" class=\"headerlink\" title=\"接口的适配器模式\"></a>接口的适配器模式</h4><p>  接口的适配器是这样的：有时我们写的一个接口中有多个抽象方法，当我们写该接口的实现类时，必须实现该接口的所有方法，这明显有时比较浪费，因为并不是所有的方法都是我们需要的，有时只需要某一些，此处为了解决这个问题，我们引入了接口的适配器模式，借助于一个抽象类，该抽象类实现了该接口，实现了所有的方法，而我们不和原始的接口打交道，只和该抽象类取得联系，所以我们写一个类，继承该抽象类，重写我们需要的方法就行。</p>\n<p>示例<br></p><figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Wrapper</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>{}</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>{}</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SourceSub1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Wrapper</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"the sourceable interface's first Sub1!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SourceSub2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Wrapper</span></span>{</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>{</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"ths sourceable interface's second Sub2!\"</span> . PHP_EOL;</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//调用</span></span><br><span class=\"line\"><span class=\"variable\">$source1</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">SourceSub1</span>();</span><br><span class=\"line\"><span class=\"variable\">$source2</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">SourceSub2</span>();</span><br><span class=\"line\"><span class=\"variable\">$source1</span>-&gt;<span class=\"title function_ invoke__\">method1</span>();</span><br><span class=\"line\"><span class=\"variable\">$source1</span>-&gt;<span class=\"title function_ invoke__\">method2</span>();</span><br><span class=\"line\"><span class=\"variable\">$source2</span>-&gt;<span class=\"title function_ invoke__\">method1</span>();</span><br><span class=\"line\"><span class=\"variable\">$source2</span>-&gt;<span class=\"title function_ invoke__\">method2</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * the sourceable interface's first Sub1!</span></span><br><span class=\"line\"><span class=\"comment\"> * ths sourceable interface's second Sub2!</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></tbody></table></figure><p></p>\n<h3 id=\"应用场景\"><a href=\"#应用场景\" class=\"headerlink\" title=\"应用场景\"></a>应用场景</h3><p>  类的适配器模式：当希望将一个类转换成满足另一个新接口的类时，可以使用类的适配器模式，创建一个新类，继承原有的类，实现新的接口即可。<br>  对象的适配器模式：当希望将一个对象转换成满足另一个新接口的对象时，可以创建一个Wrapper类，持有原类的一个实例，在Wrapper类的方法中，调用实例的方法就行。<br>  接口的适配器模式：当不希望实现一个接口中所有的方法时，可以创建一个抽象类Wrapper，实现所有方法，我们写别的类的时候，继承抽象类即可。</p>\n","excerpt":"","more":"<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>  适配器模式将某个类的接口转换成客户端期望的另一个接口表示，目的是消除由于接口不匹配所造成的类的兼容性问题。主要分为三类：类的适配器模式、对象的适配器模式、接口的适配器模式。</p>\n<h3 id=\"分类\"><a href=\"#分类\" class=\"headerlink\" title=\"分类\"></a>分类</h3><h4 id=\"类的适配器模式\"><a href=\"#类的适配器模式\" class=\"headerlink\" title=\"类的适配器模式\"></a>类的适配器模式</h4><p>  核心思想就是：有一个Source类，拥有一个方法，待适配，目标接口是Targetable，通过Adapter类，将Source的功能扩展到Targetable里</p>\n<p>示例<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Source</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;this is original method!&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Targetable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Adapter类继承Source类，实现Targetable接口，这样Targetable接口的实现类就具有了Source类的功能。</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Adapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">Source</span> <span class=\"keyword\">implements</span> <span class=\"title\">Targetable</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;this is the targetable method!&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$target</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Adapter</span>();</span><br><span class=\"line\"><span class=\"variable\">$target</span>-&gt;<span class=\"title function_ invoke__\">method1</span>();</span><br><span class=\"line\"><span class=\"variable\">$target</span>-&gt;<span class=\"title function_ invoke__\">method2</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * this is original method!</span></span><br><span class=\"line\"><span class=\"comment\"> * this is the targetable method!</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"对象的适配器模式\"><a href=\"#对象的适配器模式\" class=\"headerlink\" title=\"对象的适配器模式\"></a>对象的适配器模式</h4><p>  与类的适配器模式大体相同，只是适配的方法不同。</p>\n<p>示例<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Source</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;this is original method!&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Targetable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Adapter类不继承Source类，而是持有Source类的实例，以达到解决兼容性的问题。</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Wrapper</span> <span class=\"keyword\">implements</span> <span class=\"title\">Targetable</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Source <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span>(<span class=\"params\">Source <span class=\"variable\">$source</span></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source = <span class=\"variable\">$source</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&#x27;this is the targetable method!&#x27;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"variable language_\">$this</span>-&gt;source-&gt;<span class=\"title function_ invoke__\">method1</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"variable\">$source</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Source</span>();</span><br><span class=\"line\"><span class=\"variable\">$target</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Wrapper</span>(<span class=\"variable\">$source</span>);</span><br><span class=\"line\"><span class=\"variable\">$target</span>-&gt;<span class=\"title function_ invoke__\">method1</span>();</span><br><span class=\"line\"><span class=\"variable\">$target</span>-&gt;<span class=\"title function_ invoke__\">method2</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * this is original method!</span></span><br><span class=\"line\"><span class=\"comment\"> * this is the targetable method!</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"接口的适配器模式\"><a href=\"#接口的适配器模式\" class=\"headerlink\" title=\"接口的适配器模式\"></a>接口的适配器模式</h4><p>  接口的适配器是这样的：有时我们写的一个接口中有多个抽象方法，当我们写该接口的实现类时，必须实现该接口的所有方法，这明显有时比较浪费，因为并不是所有的方法都是我们需要的，有时只需要某一些，此处为了解决这个问题，我们引入了接口的适配器模式，借助于一个抽象类，该抽象类实现了该接口，实现了所有的方法，而我们不和原始的接口打交道，只和该抽象类取得联系，所以我们写一个类，继承该抽象类，重写我们需要的方法就行。</p>\n<p>示例<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Wrapper</span> <span class=\"keyword\">implements</span> <span class=\"title\">Sourceable</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SourceSub1</span> <span class=\"keyword\">extends</span> <span class=\"title\">Wrapper</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method1</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;the sourceable interface&#x27;s first Sub1!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SourceSub2</span> <span class=\"keyword\">extends</span> <span class=\"title\">Wrapper</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">method2</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">&quot;ths sourceable interface&#x27;s second Sub2!&quot;</span> . PHP_EOL;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//调用</span></span><br><span class=\"line\"><span class=\"variable\">$source1</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">SourceSub1</span>();</span><br><span class=\"line\"><span class=\"variable\">$source2</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">SourceSub2</span>();</span><br><span class=\"line\"><span class=\"variable\">$source1</span>-&gt;<span class=\"title function_ invoke__\">method1</span>();</span><br><span class=\"line\"><span class=\"variable\">$source1</span>-&gt;<span class=\"title function_ invoke__\">method2</span>();</span><br><span class=\"line\"><span class=\"variable\">$source2</span>-&gt;<span class=\"title function_ invoke__\">method1</span>();</span><br><span class=\"line\"><span class=\"variable\">$source2</span>-&gt;<span class=\"title function_ invoke__\">method2</span>();</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output:</span></span><br><span class=\"line\"><span class=\"comment\"> * the sourceable interface&#x27;s first Sub1!</span></span><br><span class=\"line\"><span class=\"comment\"> * ths sourceable interface&#x27;s second Sub2!</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"应用场景\"><a href=\"#应用场景\" class=\"headerlink\" title=\"应用场景\"></a>应用场景</h3><p>  类的适配器模式：当希望将一个类转换成满足另一个新接口的类时，可以使用类的适配器模式，创建一个新类，继承原有的类，实现新的接口即可。<br>  对象的适配器模式：当希望将一个对象转换成满足另一个新接口的对象时，可以创建一个Wrapper类，持有原类的一个实例，在Wrapper类的方法中，调用实例的方法就行。<br>  接口的适配器模式：当不希望实现一个接口中所有的方法时，可以创建一个抽象类Wrapper，实现所有方法，我们写别的类的时候，继承抽象类即可。</p>\n"},{"title":"Nginx 日志","abbrlink":"nginx-logs","date":"2024-02-15T01:40:25.000Z","updated":"2024-02-15T01:40:25.000Z","_content":"\n### 什么是Nginx 日志？\nNginx 日志是 Nginx 服务器运行过程中产生的记录文件，它详细记录了服务器的各项活动，包括客户端请求、服务器响应、错误信息等。通过分析日志，我们可以了解服务器的运行状态、性能瓶颈、安全问题等，从而进行优化和维护。\n\n### Nginx 日志的类型\n - 访问日志 (access log)： 记录客户端对服务器的访问信息，包括 IP 地址、请求时间、请求方法、请求 URL、状态码、响应字节数、用户代理等。\n - 错误日志 (error log)： 记录服务器运行过程中发生的错误信息，包括配置错误、脚本错误、连接错误等。\n\n### Nginx 日志的配置\nNginx 日志的配置主要在配置文件中进行，通常位于 /etc/nginx/nginx.conf 或类似路径下。\n```\n# access_log logs/access.log main;\n# error_log logs/error.log;\n```\naccess_log: 配置访问日志的路径和格式。\nerror_log: 配置错误日志的路径和日志级别。\n\n日志格式：\nNginx 支持自定义日志格式，使用 log_format 指令来定义。\n```\nlog_format main '$remote_addr - $remote_user [$time_local] \"$request\" '\n              '$status $body_bytes_sent \"$http_referer\" '\n              '\"$http_user_agent\"';\n```\n$remote_addr: 客户端 IP 地址   \n$remote_user: 客户端用户名\n$time_local: 本地时间\n$request: 请求行，包含方法、URI 和协议\n$status: 状态码\n$body_bytes_sent: 发送的字节数\n$http_referer: 请求来源页\n$http_user_agent: 客户端浏览器信息\n\n### Nginx 日志的用途\n - 流量分析： 统计网站访问量、热门页面、访问来源等，为网站优化提供数据支持。\n - 错误排查： 查找服务器错误的原因，定位问题，解决故障。\n - 安全监控： 检测恶意攻击、入侵行为，保障服务器安全。\n - 性能分析： 分析请求处理时间、慢请求等，优化服务器性能。\n\n### Nginx 日志的分析\n - 手动分析： 使用 cat, grep, awk 等命令对日志进行分析。\n - 日志分析工具： 使用专门的日志分析工具，如 logstash, elasticsearch, kibana 等，对日志进行可视化分析和搜索。\n\n###常见分析场景：\n - 统计网站访问量： 使用 awk 或 grep 命令统计访问日志中 IP 地址的数量。\n - 查找错误日志： 使用 grep 命令搜索错误日志中的关键字。\n - 分析访问来源： 使用 awk 命令提取访问日志中的 $http_referer 字段，统计访问来源。\n - 分析用户行为： 使用日志分析工具，对用户行为进行可视化分析，了解用户访问路径、停留时间等。","source":"_posts/运维/Nginx/Nginx 日志.md","raw":"---\ntitle: Nginx 日志\ntags: [Nginx,日志]\ncategories: [运维]\nabbrlink: 'nginx-logs'\ndate: 2024-02-15 09:40:25\nupdated: 2024-02-15 09:40:25\n---\n\n### 什么是Nginx 日志？\nNginx 日志是 Nginx 服务器运行过程中产生的记录文件，它详细记录了服务器的各项活动，包括客户端请求、服务器响应、错误信息等。通过分析日志，我们可以了解服务器的运行状态、性能瓶颈、安全问题等，从而进行优化和维护。\n\n### Nginx 日志的类型\n - 访问日志 (access log)： 记录客户端对服务器的访问信息，包括 IP 地址、请求时间、请求方法、请求 URL、状态码、响应字节数、用户代理等。\n - 错误日志 (error log)： 记录服务器运行过程中发生的错误信息，包括配置错误、脚本错误、连接错误等。\n\n### Nginx 日志的配置\nNginx 日志的配置主要在配置文件中进行，通常位于 /etc/nginx/nginx.conf 或类似路径下。\n```\n# access_log logs/access.log main;\n# error_log logs/error.log;\n```\naccess_log: 配置访问日志的路径和格式。\nerror_log: 配置错误日志的路径和日志级别。\n\n日志格式：\nNginx 支持自定义日志格式，使用 log_format 指令来定义。\n```\nlog_format main '$remote_addr - $remote_user [$time_local] \"$request\" '\n              '$status $body_bytes_sent \"$http_referer\" '\n              '\"$http_user_agent\"';\n```\n$remote_addr: 客户端 IP 地址   \n$remote_user: 客户端用户名\n$time_local: 本地时间\n$request: 请求行，包含方法、URI 和协议\n$status: 状态码\n$body_bytes_sent: 发送的字节数\n$http_referer: 请求来源页\n$http_user_agent: 客户端浏览器信息\n\n### Nginx 日志的用途\n - 流量分析： 统计网站访问量、热门页面、访问来源等，为网站优化提供数据支持。\n - 错误排查： 查找服务器错误的原因，定位问题，解决故障。\n - 安全监控： 检测恶意攻击、入侵行为，保障服务器安全。\n - 性能分析： 分析请求处理时间、慢请求等，优化服务器性能。\n\n### Nginx 日志的分析\n - 手动分析： 使用 cat, grep, awk 等命令对日志进行分析。\n - 日志分析工具： 使用专门的日志分析工具，如 logstash, elasticsearch, kibana 等，对日志进行可视化分析和搜索。\n\n###常见分析场景：\n - 统计网站访问量： 使用 awk 或 grep 命令统计访问日志中 IP 地址的数量。\n - 查找错误日志： 使用 grep 命令搜索错误日志中的关键字。\n - 分析访问来源： 使用 awk 命令提取访问日志中的 $http_referer 字段，统计访问来源。\n - 分析用户行为： 使用日志分析工具，对用户行为进行可视化分析，了解用户访问路径、停留时间等。","slug":"运维/Nginx/Nginx 日志","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vw00bnoshghkop3ala","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"什么是Nginx-日志？\"><a href=\"#什么是Nginx-日志？\" class=\"headerlink\" title=\"什么是Nginx 日志？\"></a>什么是Nginx 日志？</h3><p>Nginx 日志是 Nginx 服务器运行过程中产生的记录文件，它详细记录了服务器的各项活动，包括客户端请求、服务器响应、错误信息等。通过分析日志，我们可以了解服务器的运行状态、性能瓶颈、安全问题等，从而进行优化和维护。</p>\n<h3 id=\"Nginx-日志的类型\"><a href=\"#Nginx-日志的类型\" class=\"headerlink\" title=\"Nginx 日志的类型\"></a>Nginx 日志的类型</h3><ul>\n<li>访问日志 (access log)： 记录客户端对服务器的访问信息，包括 IP 地址、请求时间、请求方法、请求 URL、状态码、响应字节数、用户代理等。</li>\n<li>错误日志 (error log)： 记录服务器运行过程中发生的错误信息，包括配置错误、脚本错误、连接错误等。</li>\n</ul>\n<h3 id=\"Nginx-日志的配置\"><a href=\"#Nginx-日志的配置\" class=\"headerlink\" title=\"Nginx 日志的配置\"></a>Nginx 日志的配置</h3><p>Nginx 日志的配置主要在配置文件中进行，通常位于 /etc/nginx/nginx.conf 或类似路径下。<br></p><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">access_log logs/access.log main;</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">error_log logs/error.log;</span></span><br></pre></td></tr></tbody></table></figure><br>access_log: 配置访问日志的路径和格式。<br>error_log: 配置错误日志的路径和日志级别。<p></p>\n<p>日志格式：<br>Nginx 支持自定义日志格式，使用 log_format 指令来定义。<br></p><figure class=\"highlight nginx\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">log_format</span> main <span class=\"string\">'<span class=\"variable\">$remote_addr</span> - <span class=\"variable\">$remote_user</span> [<span class=\"variable\">$time_local</span>] \"<span class=\"variable\">$request</span>\" '</span></span><br><span class=\"line\">              <span class=\"string\">'<span class=\"variable\">$status</span> <span class=\"variable\">$body_bytes_sent</span> \"<span class=\"variable\">$http_referer</span>\" '</span></span><br><span class=\"line\">              <span class=\"string\">'\"<span class=\"variable\">$http_user_agent</span>\"'</span>;</span><br></pre></td></tr></tbody></table></figure><br>$remote_addr: 客户端 IP 地址<br>$remote_user: 客户端用户名<br>$time_local: 本地时间<br>$request: 请求行，包含方法、URI 和协议<br>$status: 状态码<br>$body_bytes_sent: 发送的字节数<br>$http_referer: 请求来源页<br>$http_user_agent: 客户端浏览器信息<p></p>\n<h3 id=\"Nginx-日志的用途\"><a href=\"#Nginx-日志的用途\" class=\"headerlink\" title=\"Nginx 日志的用途\"></a>Nginx 日志的用途</h3><ul>\n<li>流量分析： 统计网站访问量、热门页面、访问来源等，为网站优化提供数据支持。</li>\n<li>错误排查： 查找服务器错误的原因，定位问题，解决故障。</li>\n<li>安全监控： 检测恶意攻击、入侵行为，保障服务器安全。</li>\n<li>性能分析： 分析请求处理时间、慢请求等，优化服务器性能。</li>\n</ul>\n<h3 id=\"Nginx-日志的分析\"><a href=\"#Nginx-日志的分析\" class=\"headerlink\" title=\"Nginx 日志的分析\"></a>Nginx 日志的分析</h3><ul>\n<li>手动分析： 使用 cat, grep, awk 等命令对日志进行分析。</li>\n<li>日志分析工具： 使用专门的日志分析工具，如 logstash, elasticsearch, kibana 等，对日志进行可视化分析和搜索。</li>\n</ul>\n<h3 id=\"常见分析场景：\"><a href=\"#常见分析场景：\" class=\"headerlink\" title=\"常见分析场景：\"></a>常见分析场景：</h3><ul>\n<li>统计网站访问量： 使用 awk 或 grep 命令统计访问日志中 IP 地址的数量。</li>\n<li>查找错误日志： 使用 grep 命令搜索错误日志中的关键字。</li>\n<li>分析访问来源： 使用 awk 命令提取访问日志中的 $http_referer 字段，统计访问来源。</li>\n<li>分析用户行为： 使用日志分析工具，对用户行为进行可视化分析，了解用户访问路径、停留时间等。</li>\n</ul>\n","excerpt":"","more":"<h3 id=\"什么是Nginx-日志？\"><a href=\"#什么是Nginx-日志？\" class=\"headerlink\" title=\"什么是Nginx 日志？\"></a>什么是Nginx 日志？</h3><p>Nginx 日志是 Nginx 服务器运行过程中产生的记录文件，它详细记录了服务器的各项活动，包括客户端请求、服务器响应、错误信息等。通过分析日志，我们可以了解服务器的运行状态、性能瓶颈、安全问题等，从而进行优化和维护。</p>\n<h3 id=\"Nginx-日志的类型\"><a href=\"#Nginx-日志的类型\" class=\"headerlink\" title=\"Nginx 日志的类型\"></a>Nginx 日志的类型</h3><ul>\n<li>访问日志 (access log)： 记录客户端对服务器的访问信息，包括 IP 地址、请求时间、请求方法、请求 URL、状态码、响应字节数、用户代理等。</li>\n<li>错误日志 (error log)： 记录服务器运行过程中发生的错误信息，包括配置错误、脚本错误、连接错误等。</li>\n</ul>\n<h3 id=\"Nginx-日志的配置\"><a href=\"#Nginx-日志的配置\" class=\"headerlink\" title=\"Nginx 日志的配置\"></a>Nginx 日志的配置</h3><p>Nginx 日志的配置主要在配置文件中进行，通常位于 /etc/nginx/nginx.conf 或类似路径下。<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">access_log logs/access.log main;</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">error_log logs/error.log;</span></span><br></pre></td></tr></table></figure><br>access_log: 配置访问日志的路径和格式。<br>error_log: 配置错误日志的路径和日志级别。</p>\n<p>日志格式：<br>Nginx 支持自定义日志格式，使用 log_format 指令来定义。<br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">log_format</span> main <span class=\"string\">&#x27;<span class=\"variable\">$remote_addr</span> - <span class=\"variable\">$remote_user</span> [<span class=\"variable\">$time_local</span>] &quot;<span class=\"variable\">$request</span>&quot; &#x27;</span></span><br><span class=\"line\">              <span class=\"string\">&#x27;<span class=\"variable\">$status</span> <span class=\"variable\">$body_bytes_sent</span> &quot;<span class=\"variable\">$http_referer</span>&quot; &#x27;</span></span><br><span class=\"line\">              <span class=\"string\">&#x27;&quot;<span class=\"variable\">$http_user_agent</span>&quot;&#x27;</span>;</span><br></pre></td></tr></table></figure><br>$remote_addr: 客户端 IP 地址<br>$remote_user: 客户端用户名<br>$time_local: 本地时间<br>$request: 请求行，包含方法、URI 和协议<br>$status: 状态码<br>$body_bytes_sent: 发送的字节数<br>$http_referer: 请求来源页<br>$http_user_agent: 客户端浏览器信息</p>\n<h3 id=\"Nginx-日志的用途\"><a href=\"#Nginx-日志的用途\" class=\"headerlink\" title=\"Nginx 日志的用途\"></a>Nginx 日志的用途</h3><ul>\n<li>流量分析： 统计网站访问量、热门页面、访问来源等，为网站优化提供数据支持。</li>\n<li>错误排查： 查找服务器错误的原因，定位问题，解决故障。</li>\n<li>安全监控： 检测恶意攻击、入侵行为，保障服务器安全。</li>\n<li>性能分析： 分析请求处理时间、慢请求等，优化服务器性能。</li>\n</ul>\n<h3 id=\"Nginx-日志的分析\"><a href=\"#Nginx-日志的分析\" class=\"headerlink\" title=\"Nginx 日志的分析\"></a>Nginx 日志的分析</h3><ul>\n<li>手动分析： 使用 cat, grep, awk 等命令对日志进行分析。</li>\n<li>日志分析工具： 使用专门的日志分析工具，如 logstash, elasticsearch, kibana 等，对日志进行可视化分析和搜索。</li>\n</ul>\n<h3 id=\"常见分析场景：\"><a href=\"#常见分析场景：\" class=\"headerlink\" title=\"常见分析场景：\"></a>常见分析场景：</h3><ul>\n<li>统计网站访问量： 使用 awk 或 grep 命令统计访问日志中 IP 地址的数量。</li>\n<li>查找错误日志： 使用 grep 命令搜索错误日志中的关键字。</li>\n<li>分析访问来源： 使用 awk 命令提取访问日志中的 $http_referer 字段，统计访问来源。</li>\n<li>分析用户行为： 使用日志分析工具，对用户行为进行可视化分析，了解用户访问路径、停留时间等。</li>\n</ul>\n"},{"title":"Linux Cron定时任务","abbr link":"linux-cron","abbrlink":"9c77","date":"2024-05-22T03:44:00.000Z","updated":"2024-05-22T03:44:00.000Z","_content":"\n\n## 简介\n\nCron 是一个用来执行定时任务的工具，可以在指定的时间自动执行重复性任务。\n\n它的核心是 cron 守护进程，名为 crond。它在后台每分钟运行一次，检查是否有需要在指定时间执行的计划任务。\n\n下面命令可以查看 cron 守护进程，是否正常运行。\n\n```shell\n$ sudo systemctl status cron\n```\n\n## crontab\n\ncrond 检查的定时任务，保存在 crontab 文件。该文件的每一行代表一个单独的作业，包含何时运行该任务，以及所要执行的命令。\n\ncrontab 分成两个级别：用户个人的crontab，系统的 crontab。前者由用户本人编辑，后者只能由根用户编辑。\n\n系统的 crontab 存放在`/etc/crontab`，以及一系列特殊目录之中：`/etc/cron.daily`、`/etc/cron.hourly`、`/etc/cron.weekly`和`/etc/cron.monthly`。\n\n## cron 任务的语法\n\ncrontab 文件的每一行，代表一个 cron 任务。它由多个字段组成，字段之间使用空格或制表符分隔。\n\ncron 任务的基本语法如下。\n\n```bash\nminute hour day_of_month month day_of_week command_to_execute\n```\n\n各个字段的含义如下。\n\n- minute（0-59）：指定命令运行的分钟，可以是0到59之间的值，0表示将在一小时开始时运行命令。\n- hour（0-23）：指定命令运行的小时，以24小时格式指定，例如将其设置为14将在下午2点运行该命令。\n- day_of_month（1-31）：指定命令运行的日期。它可以是1到31之间的任意值，具体取决于该月的天数。例如，设置为1将在每个月的第一天运行命令。\n- month（1-12）：指定命令将在哪个月份执行。它可以是 1（一月）到 12（十二月）之间的值。例如，设置为12将在12月执行该命令。\n- day_of_week（0-6）：指定命令应在一周中的哪一天运行。它可以是0（星期日）到6（星期六）之间的值。例如，设置为5将在每个星期五运行该命令。\n- command_to_execute：指定 cron 任务应执行的操作。\n\ncrontab 还允许使用通配符。\n\n- 星号 (*)：代表“每个”时间单位。例如，小时字段中的“*”表示“每小时”。\n- 逗号 (,)：用于在同一字段指定多个值。例如，day_of_week 字段中的“1,3,5”表示“周一、周三和周五运行”。注意，逗号前后不能由空格。\n- 连字符 (-)：指定值的范围。例如，小时字段中的“9-17”表示“上午9点到下午5点之间的每小时”。\n- 斜杠 (/)：指定增量。例如，分钟字段中的“*/10”表示“每10分钟”。\n\ncrontab 还提供一些快捷字符串。\n\n- @reboot\t在启动时运行一次指定的命令 。\n- @year，@annually 两者都在每年 1 月 1 日中午 12:00运行指定的任务 。相当于指定“0 0 1 1 *”\n- @monthly 每月1 日中午 12:00运行该作业 一次。相当于“0 0 1 * *”\n- @weekly 在每周周日中午 12:00运行该作业 一次。相当于“0 0 * * 0”\n- @daily，@midnight：两者都在每天中午 12:00运行 cronjob  。这相当于在 crontab 文件中指定“0 0 * * *”。\n- @hourly：每小时整点运行该作业 。相当于“0 * * * *”\n\ncrontab 文件中，以“#”符号开头的行表示注释。\n\n以下是一些示例。\n\n- `* * * * *`\t每分钟运行一次 cron 作业。\n- `0 * * * *`\t每小时运行一次 cron 作业。\n- `0 0 * * *`\t每天午夜运行 cron 作业。\n- `0 2 * * *`\t每天凌晨 2 点运行 cron 作业。\n- `0 0 15 * *`\t每个月 15 日午夜运行一次 cron 作业。\n- `0 0 0 12 *`\t周六午夜运行 cron 作业。\n- `0 0 * * 6`\t从周一到周五每天下午 3 点运行 cron 作业。\n- `0 15 * * 1-5`\t从周一到周五每天下午 3 点运行 cron 作业。\n- `*/5 * * * *`\t每 5 分钟运行一次 cron 作业。\n- `0 8-16 * * *` 每天、每小时、从上午 8 点到下午 4 点准时执行 cron 作业。\n- `0 4 * * 2,4`\t在周二和周四凌晨 4 点运行 cron 作业。\n- `@reboot`\t系统启动时运行 cron 作业。\n\n### 环境变量\n\ncron 任务在非交互式、非登录 Shell 环境中运行，这意味着它们可能无法访问与手动运行命令时相同的环境变量。\n\n这就是说，cron 任务不会自动继承用户或系统的环境变量或路径。这可能会导致 cron 作业失败，无法找到可执行文件或脚本。解决方法是在 crontab 文件中显式设置 PATH 环境变量。\n\n```bash\nPATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin\n```\n\n不过，为了便于调试，建议始终在 cron 任务中使用绝对路径。\n\n除了`PATH`环境变量，还可以设置`SHELL`环境变量，指定 cron 使用的 Shell。\n\n```bash\nSHELL=/bin/sh\n```\n\n上面示例设定执行 cron 任务时，使用 Bash。\n\n## cron 任务管理\n\n### 个人任务\n\n创建或编辑用户的 crontab 文件，使用下面的命令。\n\n```bash\ncrontab -e\n```\n\n上面的命令会打开系统默认文本编辑器，对用户的 crontab 文件进行编辑。\n\n添加 cron 任务，只需在 crontab 文件中添加一个新行即可。例如，备份脚本 backup.sh 每天凌晨 3:00 运行，就是添加下面的内容。\n\n```bash\n0 3 * * * /home/linuxiac/backup.sh\n```\n\n编辑完成后，保存并退出编辑器。Cron 服务会自动检查 crontab 文件，因此无需在更改后重新启动 Cron 进程。\n\n`crontab -e`还会在保存和退出文件时，自动检查语法，防止意外输入无效的 cron 任务。\n\n下面命令可以列出当前用户的所有 cron 任务。\n\n```bash\n$ crontab -l\n```\n\n如果拥有根用户权限，可以查看其他用户的 cron 任务。\n\n```bash\n$ sudo crontab -u [用户名] -l\n```\n\n上面示例中，`[用户名]`是需要替换的部分。\n\n编辑其他用户的 cron 任务，可以使用命令行参数`-e`。\n\n```bash\n$ sudo crontab -u [用户名] -e\n```\n\n删除某个 cron 任务时，只要删除那一行即可。如果想要删除所有的 cron 任务，只要删除 crontab 文件即可，也可以使用命令行参数`-r`。\n\n```bash\n$ crontab -r\n```\n\n上面的命令会删除当前用户的 crontab 文件（即删除所有 cron 任务），而且不会出现任何确认提示，因此请小心使用。\n\n如果希望删除前出现确认提示，则可以使用命令行参数`-i`。\n\n```bash\n$ crontab -i -r\n```\n\n### 系统任务\n\n创建系统级别的 cron 任务，需要直接编辑`/etc/crontab`文件。\n\n```bash\n0  2  *  *  * root /usr/bin/find /var/log/myservice -type f -name '*.log' -delete\n```\n\n上面示例设定在每天凌晨2:00，从`/var/log/myservice`目录删除所有带有扩展名为`.log`的文件。\n\n它的格式与用户级别的 cron 文件有一个区别，就是在最初表示时间的五个字段后面，多了一个字段，表示执行任务的用户帐户，本例为`root`。\n\n直接编辑`/etc/crontab`文件有两个缺点。（1）它不提供语法检查，增加了出错的风险。（2）它会影响整个系统，使用时需要非常谨慎。\n\n列出所有的系统级别 cron 任务，需要查看以下所有文件和目录。\n\n- /etc/crontab 文件\n- /etc/cron.d/ 目录\n- /etc/cron.daily/ 目录\n- /etc/cron.hourly/ 目录\n- /etc/cron.weekly/ 目录\n- /etc/cron.monthly/ 目录\n\n## 参考链接\n\n- [How to Use Cron on Linux: Tips, Tricks, and Examples](https://linuxiac.com/how-to-use-cron-and-crontab-on-linux/)\n\n","source":"_posts/运维/Linux/Linux Cron定时任务.md","raw":"---\ntitle: Linux Cron定时任务\ntags:\n  - Linux\n  - Cron\ncategories:\n  - Cron\nabbr link: linux-cron\nabbrlink: 9c77\ndate: 2024-05-22 11:44:00\nupdated: 2024-05-22 11:44:00\n---\n\n\n## 简介\n\nCron 是一个用来执行定时任务的工具，可以在指定的时间自动执行重复性任务。\n\n它的核心是 cron 守护进程，名为 crond。它在后台每分钟运行一次，检查是否有需要在指定时间执行的计划任务。\n\n下面命令可以查看 cron 守护进程，是否正常运行。\n\n```shell\n$ sudo systemctl status cron\n```\n\n## crontab\n\ncrond 检查的定时任务，保存在 crontab 文件。该文件的每一行代表一个单独的作业，包含何时运行该任务，以及所要执行的命令。\n\ncrontab 分成两个级别：用户个人的crontab，系统的 crontab。前者由用户本人编辑，后者只能由根用户编辑。\n\n系统的 crontab 存放在`/etc/crontab`，以及一系列特殊目录之中：`/etc/cron.daily`、`/etc/cron.hourly`、`/etc/cron.weekly`和`/etc/cron.monthly`。\n\n## cron 任务的语法\n\ncrontab 文件的每一行，代表一个 cron 任务。它由多个字段组成，字段之间使用空格或制表符分隔。\n\ncron 任务的基本语法如下。\n\n```bash\nminute hour day_of_month month day_of_week command_to_execute\n```\n\n各个字段的含义如下。\n\n- minute（0-59）：指定命令运行的分钟，可以是0到59之间的值，0表示将在一小时开始时运行命令。\n- hour（0-23）：指定命令运行的小时，以24小时格式指定，例如将其设置为14将在下午2点运行该命令。\n- day_of_month（1-31）：指定命令运行的日期。它可以是1到31之间的任意值，具体取决于该月的天数。例如，设置为1将在每个月的第一天运行命令。\n- month（1-12）：指定命令将在哪个月份执行。它可以是 1（一月）到 12（十二月）之间的值。例如，设置为12将在12月执行该命令。\n- day_of_week（0-6）：指定命令应在一周中的哪一天运行。它可以是0（星期日）到6（星期六）之间的值。例如，设置为5将在每个星期五运行该命令。\n- command_to_execute：指定 cron 任务应执行的操作。\n\ncrontab 还允许使用通配符。\n\n- 星号 (*)：代表“每个”时间单位。例如，小时字段中的“*”表示“每小时”。\n- 逗号 (,)：用于在同一字段指定多个值。例如，day_of_week 字段中的“1,3,5”表示“周一、周三和周五运行”。注意，逗号前后不能由空格。\n- 连字符 (-)：指定值的范围。例如，小时字段中的“9-17”表示“上午9点到下午5点之间的每小时”。\n- 斜杠 (/)：指定增量。例如，分钟字段中的“*/10”表示“每10分钟”。\n\ncrontab 还提供一些快捷字符串。\n\n- @reboot\t在启动时运行一次指定的命令 。\n- @year，@annually 两者都在每年 1 月 1 日中午 12:00运行指定的任务 。相当于指定“0 0 1 1 *”\n- @monthly 每月1 日中午 12:00运行该作业 一次。相当于“0 0 1 * *”\n- @weekly 在每周周日中午 12:00运行该作业 一次。相当于“0 0 * * 0”\n- @daily，@midnight：两者都在每天中午 12:00运行 cronjob  。这相当于在 crontab 文件中指定“0 0 * * *”。\n- @hourly：每小时整点运行该作业 。相当于“0 * * * *”\n\ncrontab 文件中，以“#”符号开头的行表示注释。\n\n以下是一些示例。\n\n- `* * * * *`\t每分钟运行一次 cron 作业。\n- `0 * * * *`\t每小时运行一次 cron 作业。\n- `0 0 * * *`\t每天午夜运行 cron 作业。\n- `0 2 * * *`\t每天凌晨 2 点运行 cron 作业。\n- `0 0 15 * *`\t每个月 15 日午夜运行一次 cron 作业。\n- `0 0 0 12 *`\t周六午夜运行 cron 作业。\n- `0 0 * * 6`\t从周一到周五每天下午 3 点运行 cron 作业。\n- `0 15 * * 1-5`\t从周一到周五每天下午 3 点运行 cron 作业。\n- `*/5 * * * *`\t每 5 分钟运行一次 cron 作业。\n- `0 8-16 * * *` 每天、每小时、从上午 8 点到下午 4 点准时执行 cron 作业。\n- `0 4 * * 2,4`\t在周二和周四凌晨 4 点运行 cron 作业。\n- `@reboot`\t系统启动时运行 cron 作业。\n\n### 环境变量\n\ncron 任务在非交互式、非登录 Shell 环境中运行，这意味着它们可能无法访问与手动运行命令时相同的环境变量。\n\n这就是说，cron 任务不会自动继承用户或系统的环境变量或路径。这可能会导致 cron 作业失败，无法找到可执行文件或脚本。解决方法是在 crontab 文件中显式设置 PATH 环境变量。\n\n```bash\nPATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin\n```\n\n不过，为了便于调试，建议始终在 cron 任务中使用绝对路径。\n\n除了`PATH`环境变量，还可以设置`SHELL`环境变量，指定 cron 使用的 Shell。\n\n```bash\nSHELL=/bin/sh\n```\n\n上面示例设定执行 cron 任务时，使用 Bash。\n\n## cron 任务管理\n\n### 个人任务\n\n创建或编辑用户的 crontab 文件，使用下面的命令。\n\n```bash\ncrontab -e\n```\n\n上面的命令会打开系统默认文本编辑器，对用户的 crontab 文件进行编辑。\n\n添加 cron 任务，只需在 crontab 文件中添加一个新行即可。例如，备份脚本 backup.sh 每天凌晨 3:00 运行，就是添加下面的内容。\n\n```bash\n0 3 * * * /home/linuxiac/backup.sh\n```\n\n编辑完成后，保存并退出编辑器。Cron 服务会自动检查 crontab 文件，因此无需在更改后重新启动 Cron 进程。\n\n`crontab -e`还会在保存和退出文件时，自动检查语法，防止意外输入无效的 cron 任务。\n\n下面命令可以列出当前用户的所有 cron 任务。\n\n```bash\n$ crontab -l\n```\n\n如果拥有根用户权限，可以查看其他用户的 cron 任务。\n\n```bash\n$ sudo crontab -u [用户名] -l\n```\n\n上面示例中，`[用户名]`是需要替换的部分。\n\n编辑其他用户的 cron 任务，可以使用命令行参数`-e`。\n\n```bash\n$ sudo crontab -u [用户名] -e\n```\n\n删除某个 cron 任务时，只要删除那一行即可。如果想要删除所有的 cron 任务，只要删除 crontab 文件即可，也可以使用命令行参数`-r`。\n\n```bash\n$ crontab -r\n```\n\n上面的命令会删除当前用户的 crontab 文件（即删除所有 cron 任务），而且不会出现任何确认提示，因此请小心使用。\n\n如果希望删除前出现确认提示，则可以使用命令行参数`-i`。\n\n```bash\n$ crontab -i -r\n```\n\n### 系统任务\n\n创建系统级别的 cron 任务，需要直接编辑`/etc/crontab`文件。\n\n```bash\n0  2  *  *  * root /usr/bin/find /var/log/myservice -type f -name '*.log' -delete\n```\n\n上面示例设定在每天凌晨2:00，从`/var/log/myservice`目录删除所有带有扩展名为`.log`的文件。\n\n它的格式与用户级别的 cron 文件有一个区别，就是在最初表示时间的五个字段后面，多了一个字段，表示执行任务的用户帐户，本例为`root`。\n\n直接编辑`/etc/crontab`文件有两个缺点。（1）它不提供语法检查，增加了出错的风险。（2）它会影响整个系统，使用时需要非常谨慎。\n\n列出所有的系统级别 cron 任务，需要查看以下所有文件和目录。\n\n- /etc/crontab 文件\n- /etc/cron.d/ 目录\n- /etc/cron.daily/ 目录\n- /etc/cron.hourly/ 目录\n- /etc/cron.weekly/ 目录\n- /etc/cron.monthly/ 目录\n\n## 参考链接\n\n- [How to Use Cron on Linux: Tips, Tricks, and Examples](https://linuxiac.com/how-to-use-cron-and-crontab-on-linux/)\n\n","slug":"运维/Linux/Linux Cron定时任务","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vx00bposhgdvryf55p","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>Cron 是一个用来执行定时任务的工具，可以在指定的时间自动执行重复性任务。</p>\n<p>它的核心是 cron 守护进程，名为 crond。它在后台每分钟运行一次，检查是否有需要在指定时间执行的计划任务。</p>\n<p>下面命令可以查看 cron 守护进程，是否正常运行。</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">sudo systemctl status cron</span></span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"crontab\"><a href=\"#crontab\" class=\"headerlink\" title=\"crontab\"></a>crontab</h2><p>crond 检查的定时任务，保存在 crontab 文件。该文件的每一行代表一个单独的作业，包含何时运行该任务，以及所要执行的命令。</p>\n<p>crontab 分成两个级别：用户个人的crontab，系统的 crontab。前者由用户本人编辑，后者只能由根用户编辑。</p>\n<p>系统的 crontab 存放在<code>/etc/crontab</code>，以及一系列特殊目录之中：<code>/etc/cron.daily</code>、<code>/etc/cron.hourly</code>、<code>/etc/cron.weekly</code>和<code>/etc/cron.monthly</code>。</p>\n<h2 id=\"cron-任务的语法\"><a href=\"#cron-任务的语法\" class=\"headerlink\" title=\"cron 任务的语法\"></a>cron 任务的语法</h2><p>crontab 文件的每一行，代表一个 cron 任务。它由多个字段组成，字段之间使用空格或制表符分隔。</p>\n<p>cron 任务的基本语法如下。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minute hour day_of_month month day_of_week command_to_execute</span><br></pre></td></tr></tbody></table></figure>\n<p>各个字段的含义如下。</p>\n<ul>\n<li>minute（0-59）：指定命令运行的分钟，可以是0到59之间的值，0表示将在一小时开始时运行命令。</li>\n<li>hour（0-23）：指定命令运行的小时，以24小时格式指定，例如将其设置为14将在下午2点运行该命令。</li>\n<li>day_of_month（1-31）：指定命令运行的日期。它可以是1到31之间的任意值，具体取决于该月的天数。例如，设置为1将在每个月的第一天运行命令。</li>\n<li>month（1-12）：指定命令将在哪个月份执行。它可以是 1（一月）到 12（十二月）之间的值。例如，设置为12将在12月执行该命令。</li>\n<li>day_of_week（0-6）：指定命令应在一周中的哪一天运行。它可以是0（星期日）到6（星期六）之间的值。例如，设置为5将在每个星期五运行该命令。</li>\n<li>command_to_execute：指定 cron 任务应执行的操作。</li>\n</ul>\n<p>crontab 还允许使用通配符。</p>\n<ul>\n<li>星号 (<em>)：代表“每个”时间单位。例如，小时字段中的“</em>”表示“每小时”。</li>\n<li>逗号 (,)：用于在同一字段指定多个值。例如，day_of_week 字段中的“1,3,5”表示“周一、周三和周五运行”。注意，逗号前后不能由空格。</li>\n<li>连字符 (-)：指定值的范围。例如，小时字段中的“9-17”表示“上午9点到下午5点之间的每小时”。</li>\n<li>斜杠 (/)：指定增量。例如，分钟字段中的“*/10”表示“每10分钟”。</li>\n</ul>\n<p>crontab 还提供一些快捷字符串。</p>\n<ul>\n<li>@reboot    在启动时运行一次指定的命令 。</li>\n<li>@year，@annually 两者都在每年 1 月 1 日中午 12:00运行指定的任务 。相当于指定“0 0 1 1 *”</li>\n<li>@monthly 每月1 日中午 12:00运行该作业 一次。相当于“0 0 1 <em> </em>”</li>\n<li>@weekly 在每周周日中午 12:00运行该作业 一次。相当于“0 0 <em> </em> 0”</li>\n<li>@daily，@midnight：两者都在每天中午 12:00运行 cronjob  。这相当于在 crontab 文件中指定“0 0 <em> </em> *”。</li>\n<li>@hourly：每小时整点运行该作业 。相当于“0 <em> </em> <em> </em>”</li>\n</ul>\n<p>crontab 文件中，以“#”符号开头的行表示注释。</p>\n<p>以下是一些示例。</p>\n<ul>\n<li><code>* * * * *</code>    每分钟运行一次 cron 作业。</li>\n<li><code>0 * * * *</code>    每小时运行一次 cron 作业。</li>\n<li><code>0 0 * * *</code>    每天午夜运行 cron 作业。</li>\n<li><code>0 2 * * *</code>    每天凌晨 2 点运行 cron 作业。</li>\n<li><code>0 0 15 * *</code>    每个月 15 日午夜运行一次 cron 作业。</li>\n<li><code>0 0 0 12 *</code>    周六午夜运行 cron 作业。</li>\n<li><code>0 0 * * 6</code>    从周一到周五每天下午 3 点运行 cron 作业。</li>\n<li><code>0 15 * * 1-5</code>    从周一到周五每天下午 3 点运行 cron 作业。</li>\n<li><code>*/5 * * * *</code>    每 5 分钟运行一次 cron 作业。</li>\n<li><code>0 8-16 * * *</code> 每天、每小时、从上午 8 点到下午 4 点准时执行 cron 作业。</li>\n<li><code>0 4 * * 2,4</code>    在周二和周四凌晨 4 点运行 cron 作业。</li>\n<li><code>@reboot</code>    系统启动时运行 cron 作业。</li>\n</ul>\n<h3 id=\"环境变量\"><a href=\"#环境变量\" class=\"headerlink\" title=\"环境变量\"></a>环境变量</h3><p>cron 任务在非交互式、非登录 Shell 环境中运行，这意味着它们可能无法访问与手动运行命令时相同的环境变量。</p>\n<p>这就是说，cron 任务不会自动继承用户或系统的环境变量或路径。这可能会导致 cron 作业失败，无法找到可执行文件或脚本。解决方法是在 crontab 文件中显式设置 PATH 环境变量。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin</span><br></pre></td></tr></tbody></table></figure>\n<p>不过，为了便于调试，建议始终在 cron 任务中使用绝对路径。</p>\n<p>除了<code>PATH</code>环境变量，还可以设置<code>SHELL</code>环境变量，指定 cron 使用的 Shell。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHELL=/bin/sh</span><br></pre></td></tr></tbody></table></figure>\n<p>上面示例设定执行 cron 任务时，使用 Bash。</p>\n<h2 id=\"cron-任务管理\"><a href=\"#cron-任务管理\" class=\"headerlink\" title=\"cron 任务管理\"></a>cron 任务管理</h2><h3 id=\"个人任务\"><a href=\"#个人任务\" class=\"headerlink\" title=\"个人任务\"></a>个人任务</h3><p>创建或编辑用户的 crontab 文件，使用下面的命令。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -e</span><br></pre></td></tr></tbody></table></figure>\n<p>上面的命令会打开系统默认文本编辑器，对用户的 crontab 文件进行编辑。</p>\n<p>添加 cron 任务，只需在 crontab 文件中添加一个新行即可。例如，备份脚本 backup.sh 每天凌晨 3:00 运行，就是添加下面的内容。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0 3 * * * /home/linuxiac/backup.sh</span><br></pre></td></tr></tbody></table></figure>\n<p>编辑完成后，保存并退出编辑器。Cron 服务会自动检查 crontab 文件，因此无需在更改后重新启动 Cron 进程。</p>\n<p><code>crontab -e</code>还会在保存和退出文件时，自动检查语法，防止意外输入无效的 cron 任务。</p>\n<p>下面命令可以列出当前用户的所有 cron 任务。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ crontab -l</span><br></pre></td></tr></tbody></table></figure>\n<p>如果拥有根用户权限，可以查看其他用户的 cron 任务。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo crontab -u [用户名] -l</span><br></pre></td></tr></tbody></table></figure>\n<p>上面示例中，<code>[用户名]</code>是需要替换的部分。</p>\n<p>编辑其他用户的 cron 任务，可以使用命令行参数<code>-e</code>。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo crontab -u [用户名] -e</span><br></pre></td></tr></tbody></table></figure>\n<p>删除某个 cron 任务时，只要删除那一行即可。如果想要删除所有的 cron 任务，只要删除 crontab 文件即可，也可以使用命令行参数<code>-r</code>。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ crontab -r</span><br></pre></td></tr></tbody></table></figure>\n<p>上面的命令会删除当前用户的 crontab 文件（即删除所有 cron 任务），而且不会出现任何确认提示，因此请小心使用。</p>\n<p>如果希望删除前出现确认提示，则可以使用命令行参数<code>-i</code>。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ crontab -i -r</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"系统任务\"><a href=\"#系统任务\" class=\"headerlink\" title=\"系统任务\"></a>系统任务</h3><p>创建系统级别的 cron 任务，需要直接编辑<code>/etc/crontab</code>文件。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0  2  *  *  * root /usr/bin/find /var/log/myservice -<span class=\"built_in\">type</span> f -name <span class=\"string\">'*.log'</span> -delete</span><br></pre></td></tr></tbody></table></figure>\n<p>上面示例设定在每天凌晨2:00，从<code>/var/log/myservice</code>目录删除所有带有扩展名为<code>.log</code>的文件。</p>\n<p>它的格式与用户级别的 cron 文件有一个区别，就是在最初表示时间的五个字段后面，多了一个字段，表示执行任务的用户帐户，本例为<code>root</code>。</p>\n<p>直接编辑<code>/etc/crontab</code>文件有两个缺点。（1）它不提供语法检查，增加了出错的风险。（2）它会影响整个系统，使用时需要非常谨慎。</p>\n<p>列出所有的系统级别 cron 任务，需要查看以下所有文件和目录。</p>\n<ul>\n<li>/etc/crontab 文件</li>\n<li>/etc/cron.d/ 目录</li>\n<li>/etc/cron.daily/ 目录</li>\n<li>/etc/cron.hourly/ 目录</li>\n<li>/etc/cron.weekly/ 目录</li>\n<li>/etc/cron.monthly/ 目录</li>\n</ul>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><ul>\n<li><a href=\"https://linuxiac.com/how-to-use-cron-and-crontab-on-linux/\">How to Use Cron on Linux: Tips, Tricks, and Examples</a></li>\n</ul>\n","excerpt":"","more":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>Cron 是一个用来执行定时任务的工具，可以在指定的时间自动执行重复性任务。</p>\n<p>它的核心是 cron 守护进程，名为 crond。它在后台每分钟运行一次，检查是否有需要在指定时间执行的计划任务。</p>\n<p>下面命令可以查看 cron 守护进程，是否正常运行。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">sudo systemctl status cron</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"crontab\"><a href=\"#crontab\" class=\"headerlink\" title=\"crontab\"></a>crontab</h2><p>crond 检查的定时任务，保存在 crontab 文件。该文件的每一行代表一个单独的作业，包含何时运行该任务，以及所要执行的命令。</p>\n<p>crontab 分成两个级别：用户个人的crontab，系统的 crontab。前者由用户本人编辑，后者只能由根用户编辑。</p>\n<p>系统的 crontab 存放在<code>/etc/crontab</code>，以及一系列特殊目录之中：<code>/etc/cron.daily</code>、<code>/etc/cron.hourly</code>、<code>/etc/cron.weekly</code>和<code>/etc/cron.monthly</code>。</p>\n<h2 id=\"cron-任务的语法\"><a href=\"#cron-任务的语法\" class=\"headerlink\" title=\"cron 任务的语法\"></a>cron 任务的语法</h2><p>crontab 文件的每一行，代表一个 cron 任务。它由多个字段组成，字段之间使用空格或制表符分隔。</p>\n<p>cron 任务的基本语法如下。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">minute hour day_of_month month day_of_week command_to_execute</span><br></pre></td></tr></table></figure>\n<p>各个字段的含义如下。</p>\n<ul>\n<li>minute（0-59）：指定命令运行的分钟，可以是0到59之间的值，0表示将在一小时开始时运行命令。</li>\n<li>hour（0-23）：指定命令运行的小时，以24小时格式指定，例如将其设置为14将在下午2点运行该命令。</li>\n<li>day_of_month（1-31）：指定命令运行的日期。它可以是1到31之间的任意值，具体取决于该月的天数。例如，设置为1将在每个月的第一天运行命令。</li>\n<li>month（1-12）：指定命令将在哪个月份执行。它可以是 1（一月）到 12（十二月）之间的值。例如，设置为12将在12月执行该命令。</li>\n<li>day_of_week（0-6）：指定命令应在一周中的哪一天运行。它可以是0（星期日）到6（星期六）之间的值。例如，设置为5将在每个星期五运行该命令。</li>\n<li>command_to_execute：指定 cron 任务应执行的操作。</li>\n</ul>\n<p>crontab 还允许使用通配符。</p>\n<ul>\n<li>星号 (<em>)：代表“每个”时间单位。例如，小时字段中的“</em>”表示“每小时”。</li>\n<li>逗号 (,)：用于在同一字段指定多个值。例如，day_of_week 字段中的“1,3,5”表示“周一、周三和周五运行”。注意，逗号前后不能由空格。</li>\n<li>连字符 (-)：指定值的范围。例如，小时字段中的“9-17”表示“上午9点到下午5点之间的每小时”。</li>\n<li>斜杠 (/)：指定增量。例如，分钟字段中的“*/10”表示“每10分钟”。</li>\n</ul>\n<p>crontab 还提供一些快捷字符串。</p>\n<ul>\n<li>@reboot    在启动时运行一次指定的命令 。</li>\n<li>@year，@annually 两者都在每年 1 月 1 日中午 12:00运行指定的任务 。相当于指定“0 0 1 1 *”</li>\n<li>@monthly 每月1 日中午 12:00运行该作业 一次。相当于“0 0 1 <em> </em>”</li>\n<li>@weekly 在每周周日中午 12:00运行该作业 一次。相当于“0 0 <em> </em> 0”</li>\n<li>@daily，@midnight：两者都在每天中午 12:00运行 cronjob  。这相当于在 crontab 文件中指定“0 0 <em> </em> *”。</li>\n<li>@hourly：每小时整点运行该作业 。相当于“0 <em> </em> <em> </em>”</li>\n</ul>\n<p>crontab 文件中，以“#”符号开头的行表示注释。</p>\n<p>以下是一些示例。</p>\n<ul>\n<li><code>* * * * *</code>    每分钟运行一次 cron 作业。</li>\n<li><code>0 * * * *</code>    每小时运行一次 cron 作业。</li>\n<li><code>0 0 * * *</code>    每天午夜运行 cron 作业。</li>\n<li><code>0 2 * * *</code>    每天凌晨 2 点运行 cron 作业。</li>\n<li><code>0 0 15 * *</code>    每个月 15 日午夜运行一次 cron 作业。</li>\n<li><code>0 0 0 12 *</code>    周六午夜运行 cron 作业。</li>\n<li><code>0 0 * * 6</code>    从周一到周五每天下午 3 点运行 cron 作业。</li>\n<li><code>0 15 * * 1-5</code>    从周一到周五每天下午 3 点运行 cron 作业。</li>\n<li><code>*/5 * * * *</code>    每 5 分钟运行一次 cron 作业。</li>\n<li><code>0 8-16 * * *</code> 每天、每小时、从上午 8 点到下午 4 点准时执行 cron 作业。</li>\n<li><code>0 4 * * 2,4</code>    在周二和周四凌晨 4 点运行 cron 作业。</li>\n<li><code>@reboot</code>    系统启动时运行 cron 作业。</li>\n</ul>\n<h3 id=\"环境变量\"><a href=\"#环境变量\" class=\"headerlink\" title=\"环境变量\"></a>环境变量</h3><p>cron 任务在非交互式、非登录 Shell 环境中运行，这意味着它们可能无法访问与手动运行命令时相同的环境变量。</p>\n<p>这就是说，cron 任务不会自动继承用户或系统的环境变量或路径。这可能会导致 cron 作业失败，无法找到可执行文件或脚本。解决方法是在 crontab 文件中显式设置 PATH 环境变量。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin</span><br></pre></td></tr></table></figure>\n<p>不过，为了便于调试，建议始终在 cron 任务中使用绝对路径。</p>\n<p>除了<code>PATH</code>环境变量，还可以设置<code>SHELL</code>环境变量，指定 cron 使用的 Shell。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHELL=/bin/sh</span><br></pre></td></tr></table></figure>\n<p>上面示例设定执行 cron 任务时，使用 Bash。</p>\n<h2 id=\"cron-任务管理\"><a href=\"#cron-任务管理\" class=\"headerlink\" title=\"cron 任务管理\"></a>cron 任务管理</h2><h3 id=\"个人任务\"><a href=\"#个人任务\" class=\"headerlink\" title=\"个人任务\"></a>个人任务</h3><p>创建或编辑用户的 crontab 文件，使用下面的命令。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -e</span><br></pre></td></tr></table></figure>\n<p>上面的命令会打开系统默认文本编辑器，对用户的 crontab 文件进行编辑。</p>\n<p>添加 cron 任务，只需在 crontab 文件中添加一个新行即可。例如，备份脚本 backup.sh 每天凌晨 3:00 运行，就是添加下面的内容。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0 3 * * * /home/linuxiac/backup.sh</span><br></pre></td></tr></table></figure>\n<p>编辑完成后，保存并退出编辑器。Cron 服务会自动检查 crontab 文件，因此无需在更改后重新启动 Cron 进程。</p>\n<p><code>crontab -e</code>还会在保存和退出文件时，自动检查语法，防止意外输入无效的 cron 任务。</p>\n<p>下面命令可以列出当前用户的所有 cron 任务。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ crontab -l</span><br></pre></td></tr></table></figure>\n<p>如果拥有根用户权限，可以查看其他用户的 cron 任务。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo crontab -u [用户名] -l</span><br></pre></td></tr></table></figure>\n<p>上面示例中，<code>[用户名]</code>是需要替换的部分。</p>\n<p>编辑其他用户的 cron 任务，可以使用命令行参数<code>-e</code>。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo crontab -u [用户名] -e</span><br></pre></td></tr></table></figure>\n<p>删除某个 cron 任务时，只要删除那一行即可。如果想要删除所有的 cron 任务，只要删除 crontab 文件即可，也可以使用命令行参数<code>-r</code>。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ crontab -r</span><br></pre></td></tr></table></figure>\n<p>上面的命令会删除当前用户的 crontab 文件（即删除所有 cron 任务），而且不会出现任何确认提示，因此请小心使用。</p>\n<p>如果希望删除前出现确认提示，则可以使用命令行参数<code>-i</code>。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ crontab -i -r</span><br></pre></td></tr></table></figure>\n<h3 id=\"系统任务\"><a href=\"#系统任务\" class=\"headerlink\" title=\"系统任务\"></a>系统任务</h3><p>创建系统级别的 cron 任务，需要直接编辑<code>/etc/crontab</code>文件。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0  2  *  *  * root /usr/bin/find /var/log/myservice -<span class=\"built_in\">type</span> f -name <span class=\"string\">&#x27;*.log&#x27;</span> -delete</span><br></pre></td></tr></table></figure>\n<p>上面示例设定在每天凌晨2:00，从<code>/var/log/myservice</code>目录删除所有带有扩展名为<code>.log</code>的文件。</p>\n<p>它的格式与用户级别的 cron 文件有一个区别，就是在最初表示时间的五个字段后面，多了一个字段，表示执行任务的用户帐户，本例为<code>root</code>。</p>\n<p>直接编辑<code>/etc/crontab</code>文件有两个缺点。（1）它不提供语法检查，增加了出错的风险。（2）它会影响整个系统，使用时需要非常谨慎。</p>\n<p>列出所有的系统级别 cron 任务，需要查看以下所有文件和目录。</p>\n<ul>\n<li>/etc/crontab 文件</li>\n<li>/etc/cron.d/ 目录</li>\n<li>/etc/cron.daily/ 目录</li>\n<li>/etc/cron.hourly/ 目录</li>\n<li>/etc/cron.weekly/ 目录</li>\n<li>/etc/cron.monthly/ 目录</li>\n</ul>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><ul>\n<li><a href=\"https://linuxiac.com/how-to-use-cron-and-crontab-on-linux/\">How to Use Cron on Linux: Tips, Tricks, and Examples</a></li>\n</ul>\n"},{"title":"Linux tee 命令详解","abbrlink":"linux-tee","date":"2023-10-06T05:52:43.000Z","updated":"2023-10-06T05:52:43.000Z","_content":"\n### tee 命令是什么？\ntee 命令是一个非常有用的 Linux 命令行工具，它可以将标准输入的数据同时输出到标准输出（通常是终端）和一个或多个文件中。换句话说，tee 命令可以将数据“分流”，一边显示在屏幕上，一边保存到文件中。\n\n### 基本语法\n```bash\ntee [选项] [文件...]\n```\n\n### 常用选项\n* **-a** 或 **--append**：将数据追加到文件末尾，而不是覆盖原有内容。\n* **-i** 或 **--ignore-interrupts**：忽略中断信号，即使收到中断信号，也会继续运行。\n* **-p** 或 **--pipeline**：优化管道性能，减少缓冲。\n\n### 示例\n* **将命令输出同时显示在终端并保存到文件：**\n  ```bash\n  ls -l | tee file.txt\n  ```\n  这会列出当前目录下的文件，同时将结果保存到 `file.txt` 文件中。\n* **将多条命令的输出合并到一个文件中：**\n  ```bash\n  cat file1.txt file2.txt | tee combined.txt\n  ```\n  这会将 `file1.txt` 和 `file2.txt` 的内容合并，并输出到 `combined.txt` 文件中。\n* **将命令输出追加到已有文件中：**\n  ```bash\n  date >> log.txt | tee -a log.txt\n  ```\n  这会将当前日期和时间追加到 `log.txt` 文件的末尾，同时显示在终端。\n* **过滤输出并保存：**\n  ```bash\n  grep error log.txt | tee errors.txt\n  ```\n  这会从 `log.txt` 文件中提取包含 \"error\" 的行，并将结果显示在终端并保存到 `errors.txt` 文件中。\n\n### 使用场景\n* **日志记录：** 将程序输出实时记录到文件中，方便查看和分析。\n* **数据备份：** 将重要数据同时保存到多个地方，以防数据丢失。\n* **调试：** 将程序输出保存到文件中，以便仔细检查。\n* **管道操作：** 将一个命令的输出作为另一个命令的输入，同时保存中间结果。\n\n### 总结\ntee 命令在 Linux 系统中非常常见，它可以帮助我们更好地管理和处理数据流。通过灵活运用 tee 命令，我们可以实现很多有用的功能。","source":"_posts/运维/Linux/Linux tee 命令详解.md","raw":"---\ntitle: Linux tee 命令详解\ntags: [Linux,tee]\ncategories: [运维]\nabbrlink: 'linux-tee'\ndate: 2023-10-06 13:52:43\nupdated: 2023-10-06 13:52:43\n---\n\n### tee 命令是什么？\ntee 命令是一个非常有用的 Linux 命令行工具，它可以将标准输入的数据同时输出到标准输出（通常是终端）和一个或多个文件中。换句话说，tee 命令可以将数据“分流”，一边显示在屏幕上，一边保存到文件中。\n\n### 基本语法\n```bash\ntee [选项] [文件...]\n```\n\n### 常用选项\n* **-a** 或 **--append**：将数据追加到文件末尾，而不是覆盖原有内容。\n* **-i** 或 **--ignore-interrupts**：忽略中断信号，即使收到中断信号，也会继续运行。\n* **-p** 或 **--pipeline**：优化管道性能，减少缓冲。\n\n### 示例\n* **将命令输出同时显示在终端并保存到文件：**\n  ```bash\n  ls -l | tee file.txt\n  ```\n  这会列出当前目录下的文件，同时将结果保存到 `file.txt` 文件中。\n* **将多条命令的输出合并到一个文件中：**\n  ```bash\n  cat file1.txt file2.txt | tee combined.txt\n  ```\n  这会将 `file1.txt` 和 `file2.txt` 的内容合并，并输出到 `combined.txt` 文件中。\n* **将命令输出追加到已有文件中：**\n  ```bash\n  date >> log.txt | tee -a log.txt\n  ```\n  这会将当前日期和时间追加到 `log.txt` 文件的末尾，同时显示在终端。\n* **过滤输出并保存：**\n  ```bash\n  grep error log.txt | tee errors.txt\n  ```\n  这会从 `log.txt` 文件中提取包含 \"error\" 的行，并将结果显示在终端并保存到 `errors.txt` 文件中。\n\n### 使用场景\n* **日志记录：** 将程序输出实时记录到文件中，方便查看和分析。\n* **数据备份：** 将重要数据同时保存到多个地方，以防数据丢失。\n* **调试：** 将程序输出保存到文件中，以便仔细检查。\n* **管道操作：** 将一个命令的输出作为另一个命令的输入，同时保存中间结果。\n\n### 总结\ntee 命令在 Linux 系统中非常常见，它可以帮助我们更好地管理和处理数据流。通过灵活运用 tee 命令，我们可以实现很多有用的功能。","slug":"运维/Linux/Linux tee 命令详解","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vx00btoshg4ibw6zmv","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"tee-命令是什么？\"><a href=\"#tee-命令是什么？\" class=\"headerlink\" title=\"tee 命令是什么？\"></a>tee 命令是什么？</h3><p>tee 命令是一个非常有用的 Linux 命令行工具，它可以将标准输入的数据同时输出到标准输出（通常是终端）和一个或多个文件中。换句话说，tee 命令可以将数据“分流”，一边显示在屏幕上，一边保存到文件中。</p>\n<h3 id=\"基本语法\"><a href=\"#基本语法\" class=\"headerlink\" title=\"基本语法\"></a>基本语法</h3><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">tee</span> [选项] [文件...]</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"常用选项\"><a href=\"#常用选项\" class=\"headerlink\" title=\"常用选项\"></a>常用选项</h3><ul>\n<li><strong>-a</strong> 或 <strong>—append</strong>：将数据追加到文件末尾，而不是覆盖原有内容。</li>\n<li><strong>-i</strong> 或 <strong>—ignore-interrupts</strong>：忽略中断信号，即使收到中断信号，也会继续运行。</li>\n<li><strong>-p</strong> 或 <strong>—pipeline</strong>：优化管道性能，减少缓冲。</li>\n</ul>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><ul>\n<li><strong>将命令输出同时显示在终端并保存到文件：</strong><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">ls</span> -l | <span class=\"built_in\">tee</span> file.txt</span><br></pre></td></tr></tbody></table></figure>\n这会列出当前目录下的文件，同时将结果保存到 <code>file.txt</code> 文件中。</li>\n<li><strong>将多条命令的输出合并到一个文件中：</strong><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cat</span> file1.txt file2.txt | <span class=\"built_in\">tee</span> combined.txt</span><br></pre></td></tr></tbody></table></figure>\n这会将 <code>file1.txt</code> 和 <code>file2.txt</code> 的内容合并，并输出到 <code>combined.txt</code> 文件中。</li>\n<li><strong>将命令输出追加到已有文件中：</strong><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">date</span> &gt;&gt; log.txt | <span class=\"built_in\">tee</span> -a log.txt</span><br></pre></td></tr></tbody></table></figure>\n这会将当前日期和时间追加到 <code>log.txt</code> 文件的末尾，同时显示在终端。</li>\n<li><strong>过滤输出并保存：</strong><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep error log.txt | <span class=\"built_in\">tee</span> errors.txt</span><br></pre></td></tr></tbody></table></figure>\n这会从 <code>log.txt</code> 文件中提取包含 “error” 的行，并将结果显示在终端并保存到 <code>errors.txt</code> 文件中。</li>\n</ul>\n<h3 id=\"使用场景\"><a href=\"#使用场景\" class=\"headerlink\" title=\"使用场景\"></a>使用场景</h3><ul>\n<li><strong>日志记录：</strong> 将程序输出实时记录到文件中，方便查看和分析。</li>\n<li><strong>数据备份：</strong> 将重要数据同时保存到多个地方，以防数据丢失。</li>\n<li><strong>调试：</strong> 将程序输出保存到文件中，以便仔细检查。</li>\n<li><strong>管道操作：</strong> 将一个命令的输出作为另一个命令的输入，同时保存中间结果。</li>\n</ul>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>tee 命令在 Linux 系统中非常常见，它可以帮助我们更好地管理和处理数据流。通过灵活运用 tee 命令，我们可以实现很多有用的功能。</p>\n","excerpt":"","more":"<h3 id=\"tee-命令是什么？\"><a href=\"#tee-命令是什么？\" class=\"headerlink\" title=\"tee 命令是什么？\"></a>tee 命令是什么？</h3><p>tee 命令是一个非常有用的 Linux 命令行工具，它可以将标准输入的数据同时输出到标准输出（通常是终端）和一个或多个文件中。换句话说，tee 命令可以将数据“分流”，一边显示在屏幕上，一边保存到文件中。</p>\n<h3 id=\"基本语法\"><a href=\"#基本语法\" class=\"headerlink\" title=\"基本语法\"></a>基本语法</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">tee</span> [选项] [文件...]</span><br></pre></td></tr></table></figure>\n<h3 id=\"常用选项\"><a href=\"#常用选项\" class=\"headerlink\" title=\"常用选项\"></a>常用选项</h3><ul>\n<li><strong>-a</strong> 或 <strong>—append</strong>：将数据追加到文件末尾，而不是覆盖原有内容。</li>\n<li><strong>-i</strong> 或 <strong>—ignore-interrupts</strong>：忽略中断信号，即使收到中断信号，也会继续运行。</li>\n<li><strong>-p</strong> 或 <strong>—pipeline</strong>：优化管道性能，减少缓冲。</li>\n</ul>\n<h3 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h3><ul>\n<li><strong>将命令输出同时显示在终端并保存到文件：</strong><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">ls</span> -l | <span class=\"built_in\">tee</span> file.txt</span><br></pre></td></tr></table></figure>\n这会列出当前目录下的文件，同时将结果保存到 <code>file.txt</code> 文件中。</li>\n<li><strong>将多条命令的输出合并到一个文件中：</strong><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cat</span> file1.txt file2.txt | <span class=\"built_in\">tee</span> combined.txt</span><br></pre></td></tr></table></figure>\n这会将 <code>file1.txt</code> 和 <code>file2.txt</code> 的内容合并，并输出到 <code>combined.txt</code> 文件中。</li>\n<li><strong>将命令输出追加到已有文件中：</strong><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">date</span> &gt;&gt; log.txt | <span class=\"built_in\">tee</span> -a log.txt</span><br></pre></td></tr></table></figure>\n这会将当前日期和时间追加到 <code>log.txt</code> 文件的末尾，同时显示在终端。</li>\n<li><strong>过滤输出并保存：</strong><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep error log.txt | <span class=\"built_in\">tee</span> errors.txt</span><br></pre></td></tr></table></figure>\n这会从 <code>log.txt</code> 文件中提取包含 “error” 的行，并将结果显示在终端并保存到 <code>errors.txt</code> 文件中。</li>\n</ul>\n<h3 id=\"使用场景\"><a href=\"#使用场景\" class=\"headerlink\" title=\"使用场景\"></a>使用场景</h3><ul>\n<li><strong>日志记录：</strong> 将程序输出实时记录到文件中，方便查看和分析。</li>\n<li><strong>数据备份：</strong> 将重要数据同时保存到多个地方，以防数据丢失。</li>\n<li><strong>调试：</strong> 将程序输出保存到文件中，以便仔细检查。</li>\n<li><strong>管道操作：</strong> 将一个命令的输出作为另一个命令的输入，同时保存中间结果。</li>\n</ul>\n<h3 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h3><p>tee 命令在 Linux 系统中非常常见，它可以帮助我们更好地管理和处理数据流。通过灵活运用 tee 命令，我们可以实现很多有用的功能。</p>\n"},{"title":"Linux 安装php5(php7)","abbrlink":"install-php-on-linux","date":"2019-10-14T15:58:32.000Z","updated":"2019-10-14T15:58:32.000Z","_content":"\n### 1. 先安装依赖包\n```shell\n$   yum install gcc bison bison-devel zlib-devel libmcrypt-devel mcrypt mhash-devel openssl-devel libxml2-devel libcurl-devel bzip2-devel readline-devel libedit-devel\n```\n\n### 2. 下载php-5.3.0\n```shell\nwget http://cn2.php.net/get/php-5.3.0.tar.gz/from/this/mirror -o php-5.3.0\n\n# 解压 \n$ tar -zxvf php-5.3.0.tar.gz\n$ cd php-5.3.0\n\nyum install libxml2\n\nyum install libxml2-devel -y\n\nyum install curl curl-devel\nyum install -y epel-release\nyum install -y libmcrypt-devel\n```\n\n```shell\nphp5 配置 \n\n ./configure \\\n--prefix=/usr/local/php5 \\\n--with-config-file-path=/usr/local/php5/etc \\\n--enable-inline-optimization \\\n--disable-debug \\\n--disable-rpath \\\n--enable-shared \\\n--enable-opcache \\\n--enable-fpm \\\n--with-fpm-user=www \\\n--with-fpm-group=www \\\n--with-mysql=mysqlnd \\\n--with-mysqli=mysqlnd \\\n--with-pdo-mysql=mysqlnd \\\n--with-gettext \\\n--with-gd \\\n--enable-mbstring \\\n--with-iconv \\\n--with-mcrypt \\\n--with-mhash \\\n--with-openssl \\\n--enable-bcmath \\\n--enable-soap \\\n--with-libxml-dir \\\n--enable-pcntl \\\n--enable-shmop \\\n--enable-sysvmsg \\\n--enable-sysvsem \\\n--enable-sysvshm \\\n--enable-sockets \\\n--with-curl \\\n--with-zlib \\\n--enable-zip \\\n--with-bz2 \\\n--with-readline \\\n--with-xsl \\\n--without-sqlite3 \\\n--without-pdo-sqlite \\\n--with-pear\n```\n\n```shell\nphp7 配置\n\n ./configure \\\n--prefix=/usr/local/php7 \\\n--with-config-file-path=/usr/local/php7/etc \\\n--enable-inline-optimization \\\n--disable-debug \\\n--disable-rpath \\\n--enable-shared \\\n--enable-opcache \\\n--enable-fpm \\\n--with-fpm-user=www \\\n--with-fpm-group=www \\\n--with-mysql=mysqlnd \\\n--with-mysqli=mysqlnd \\\n--with-pdo-mysql=mysqlnd \\\n--with-gettext \\\n--enable-mbstring \\\n--with-iconv \\\n--with-mcrypt \\\n--with-mhash \\\n--with-openssl \\\n--enable-bcmath \\\n--enable-soap \\\n--with-libxml-dir \\\n--enable-pcntl \\\n--enable-shmop \\\n--enable-sysvmsg \\\n--enable-sysvsem \\\n--enable-sysvshm \\\n--enable-sockets \\\n--with-curl \\\n--with-zlib \\\n--enable-zip \\\n--with-bz2 \\\n--with-readline \\\n--without-sqlite3 \\\n--without-pdo-sqlite \\\n--with-pear\n```\n\n### 3. 编译安装 \n```shell\n$ make && make install\n```\n\n### 4. 复制 php 配置文件\n```shell\n[root@VM_0_2_centos php-5.6.30]# cp php.ini-production /usr/local/php7/etc/php.ini\n已经安装完成，查看版本号\n\n[root@VM_0_2_centos php-5.6.30]# /usr/local/php7/bin/php -v\n返回\n\nPHP 5.6.30 (cli) (built: Aug 29 2018 09:09:28) \nCopyright (c) 1997-2016 The PHP Group\nZend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies\n```\n\n### 5. 配置 php-fpm\n```shell\n[root@VM_0_2_centos php-5.6.30]# cp /usr/local/php7/etc/php-fpm.conf.default /usr/local/php7/etc/php-fpm.conf\n[root@VM_0_2_centos php-5.6.30]# vim /usr/local/php7/etc/php-fpm.conf\n查找 user 将\n\nuser = nobody\ngroup = nobody\n改成\n\nuser = www\ngroup = www\n查找 listen 将\n\nlisten = 127.0.0.1:9000\n改成\n\nlisten = 127.0.0.1:9001\n\n配置 php-fpm 服务\n\n[root@VM_0_2_centos php-5.6.30]# cp sapi/fpm/php-fpm.service /usr/lib/systemd/system/php7-fpm.service\n[root@VM_0_2_centos php-5.6.30]# vim /usr/lib/systemd/system/php7-fpm.service \n将：\n\nPIDFile=${prefix}/var/run/php-fpm.pid\nExecStart=${exec_prefix}/sbin/php-fpm --nodaemonize --fpm-config ${prefix}/etc/php-fpm.conf\n改成\n\nPIDFile=/usr/local/php7/var/run/php-fpm.pid\nExecStart=/usr/local/php7/sbin/php-fpm --nodaemonize --fpm-config /usr/local/php7/etc/php-fpm.conf\n```\n\n### 6. 重新载入 systemd\n```shell\n[root@VM_0_2_centos php-5.6.30]# systemctl daemon-reload\n可以设置开机启动：\n\n[root@VM_0_2_centos php-5.6.30]# systemctl enable php7-fpm\n返回结果\n\nCreated symlink from /etc/systemd/system/multi-user.target.wants/php7-fpm.service to /usr/lib/systemd/system/php7-fpm.service.\n启动：\n\n[root@VM_0_2_centos php-5.6.30]# systemctl start php7-fpm\n关闭：\n\n[root@VM_0_2_centos php-5.6.30]# systemctl stop php7-fpm\n查看状态：\n\n[root@VM_0_2_centos php-5.6.30]# systemctl status php7-fpm\n返回\n\n● php5-fpm.service - The PHP FastCGI Process Manager\n   Loaded: loaded (/usr/lib/systemd/system/php5-fpm.service; disabled; vendor preset: disabled)\n   Active: active (running) since Wed 2018-08-29 09:36:39 CST; 47s ago\n Main PID: 14996 (php-fpm)\n   CGroup: /system.slice/php5-fpm.service\n           ├─14996 php-fpm: master process (/usr/local/php5/etc/php-fpm.conf)\n           ├─14997 php-fpm: pool www\n           └─14998 php-fpm: pool www\n```\n\n\n参考地址：https://blog.csdn.net/weixin_42579642/article/details/85290670","source":"_posts/运维/Linux/Linux 安装php5(php7).md","raw":"---\ntitle: Linux 安装php5(php7)\ntags: [PHP]\ncategories: Linux\nabbrlink: 'install-php-on-linux'\ndate: 2019-10-14 23:58:32\nupdated: 2019-10-14 23:58:32\n---\n\n### 1. 先安装依赖包\n```shell\n$   yum install gcc bison bison-devel zlib-devel libmcrypt-devel mcrypt mhash-devel openssl-devel libxml2-devel libcurl-devel bzip2-devel readline-devel libedit-devel\n```\n\n### 2. 下载php-5.3.0\n```shell\nwget http://cn2.php.net/get/php-5.3.0.tar.gz/from/this/mirror -o php-5.3.0\n\n# 解压 \n$ tar -zxvf php-5.3.0.tar.gz\n$ cd php-5.3.0\n\nyum install libxml2\n\nyum install libxml2-devel -y\n\nyum install curl curl-devel\nyum install -y epel-release\nyum install -y libmcrypt-devel\n```\n\n```shell\nphp5 配置 \n\n ./configure \\\n--prefix=/usr/local/php5 \\\n--with-config-file-path=/usr/local/php5/etc \\\n--enable-inline-optimization \\\n--disable-debug \\\n--disable-rpath \\\n--enable-shared \\\n--enable-opcache \\\n--enable-fpm \\\n--with-fpm-user=www \\\n--with-fpm-group=www \\\n--with-mysql=mysqlnd \\\n--with-mysqli=mysqlnd \\\n--with-pdo-mysql=mysqlnd \\\n--with-gettext \\\n--with-gd \\\n--enable-mbstring \\\n--with-iconv \\\n--with-mcrypt \\\n--with-mhash \\\n--with-openssl \\\n--enable-bcmath \\\n--enable-soap \\\n--with-libxml-dir \\\n--enable-pcntl \\\n--enable-shmop \\\n--enable-sysvmsg \\\n--enable-sysvsem \\\n--enable-sysvshm \\\n--enable-sockets \\\n--with-curl \\\n--with-zlib \\\n--enable-zip \\\n--with-bz2 \\\n--with-readline \\\n--with-xsl \\\n--without-sqlite3 \\\n--without-pdo-sqlite \\\n--with-pear\n```\n\n```shell\nphp7 配置\n\n ./configure \\\n--prefix=/usr/local/php7 \\\n--with-config-file-path=/usr/local/php7/etc \\\n--enable-inline-optimization \\\n--disable-debug \\\n--disable-rpath \\\n--enable-shared \\\n--enable-opcache \\\n--enable-fpm \\\n--with-fpm-user=www \\\n--with-fpm-group=www \\\n--with-mysql=mysqlnd \\\n--with-mysqli=mysqlnd \\\n--with-pdo-mysql=mysqlnd \\\n--with-gettext \\\n--enable-mbstring \\\n--with-iconv \\\n--with-mcrypt \\\n--with-mhash \\\n--with-openssl \\\n--enable-bcmath \\\n--enable-soap \\\n--with-libxml-dir \\\n--enable-pcntl \\\n--enable-shmop \\\n--enable-sysvmsg \\\n--enable-sysvsem \\\n--enable-sysvshm \\\n--enable-sockets \\\n--with-curl \\\n--with-zlib \\\n--enable-zip \\\n--with-bz2 \\\n--with-readline \\\n--without-sqlite3 \\\n--without-pdo-sqlite \\\n--with-pear\n```\n\n### 3. 编译安装 \n```shell\n$ make && make install\n```\n\n### 4. 复制 php 配置文件\n```shell\n[root@VM_0_2_centos php-5.6.30]# cp php.ini-production /usr/local/php7/etc/php.ini\n已经安装完成，查看版本号\n\n[root@VM_0_2_centos php-5.6.30]# /usr/local/php7/bin/php -v\n返回\n\nPHP 5.6.30 (cli) (built: Aug 29 2018 09:09:28) \nCopyright (c) 1997-2016 The PHP Group\nZend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies\n```\n\n### 5. 配置 php-fpm\n```shell\n[root@VM_0_2_centos php-5.6.30]# cp /usr/local/php7/etc/php-fpm.conf.default /usr/local/php7/etc/php-fpm.conf\n[root@VM_0_2_centos php-5.6.30]# vim /usr/local/php7/etc/php-fpm.conf\n查找 user 将\n\nuser = nobody\ngroup = nobody\n改成\n\nuser = www\ngroup = www\n查找 listen 将\n\nlisten = 127.0.0.1:9000\n改成\n\nlisten = 127.0.0.1:9001\n\n配置 php-fpm 服务\n\n[root@VM_0_2_centos php-5.6.30]# cp sapi/fpm/php-fpm.service /usr/lib/systemd/system/php7-fpm.service\n[root@VM_0_2_centos php-5.6.30]# vim /usr/lib/systemd/system/php7-fpm.service \n将：\n\nPIDFile=${prefix}/var/run/php-fpm.pid\nExecStart=${exec_prefix}/sbin/php-fpm --nodaemonize --fpm-config ${prefix}/etc/php-fpm.conf\n改成\n\nPIDFile=/usr/local/php7/var/run/php-fpm.pid\nExecStart=/usr/local/php7/sbin/php-fpm --nodaemonize --fpm-config /usr/local/php7/etc/php-fpm.conf\n```\n\n### 6. 重新载入 systemd\n```shell\n[root@VM_0_2_centos php-5.6.30]# systemctl daemon-reload\n可以设置开机启动：\n\n[root@VM_0_2_centos php-5.6.30]# systemctl enable php7-fpm\n返回结果\n\nCreated symlink from /etc/systemd/system/multi-user.target.wants/php7-fpm.service to /usr/lib/systemd/system/php7-fpm.service.\n启动：\n\n[root@VM_0_2_centos php-5.6.30]# systemctl start php7-fpm\n关闭：\n\n[root@VM_0_2_centos php-5.6.30]# systemctl stop php7-fpm\n查看状态：\n\n[root@VM_0_2_centos php-5.6.30]# systemctl status php7-fpm\n返回\n\n● php5-fpm.service - The PHP FastCGI Process Manager\n   Loaded: loaded (/usr/lib/systemd/system/php5-fpm.service; disabled; vendor preset: disabled)\n   Active: active (running) since Wed 2018-08-29 09:36:39 CST; 47s ago\n Main PID: 14996 (php-fpm)\n   CGroup: /system.slice/php5-fpm.service\n           ├─14996 php-fpm: master process (/usr/local/php5/etc/php-fpm.conf)\n           ├─14997 php-fpm: pool www\n           └─14998 php-fpm: pool www\n```\n\n\n参考地址：https://blog.csdn.net/weixin_42579642/article/details/85290670","slug":"运维/Linux/Linux 安装php5(php7)","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vy00bvoshg0xui8zy6","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-先安装依赖包\"><a href=\"#1-先安装依赖包\" class=\"headerlink\" title=\"1. 先安装依赖包\"></a>1. 先安装依赖包</h3><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">  yum install gcc bison bison-devel zlib-devel libmcrypt-devel mcrypt mhash-devel openssl-devel libxml2-devel libcurl-devel bzip2-devel readline-devel libedit-devel</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"2-下载php-5-3-0\"><a href=\"#2-下载php-5-3-0\" class=\"headerlink\" title=\"2. 下载php-5.3.0\"></a>2. 下载php-5.3.0</h3><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://cn2.php.net/get/php-5.3.0.tar.gz/from/this/mirror -o php-5.3.0</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解压</span> </span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">tar -zxvf php-5.3.0.tar.gz</span></span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\"><span class=\"built_in\">cd</span> php-5.3.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">yum install libxml2</span><br><span class=\"line\"></span><br><span class=\"line\">yum install libxml2-devel -y</span><br><span class=\"line\"></span><br><span class=\"line\">yum install curl curl-devel</span><br><span class=\"line\">yum install -y epel-release</span><br><span class=\"line\">yum install -y libmcrypt-devel</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php5 配置 </span><br><span class=\"line\"></span><br><span class=\"line\"> ./configure \\</span><br><span class=\"line\">--prefix=/usr/local/php5 \\</span><br><span class=\"line\">--with-config-file-path=/usr/local/php5/etc \\</span><br><span class=\"line\">--enable-inline-optimization \\</span><br><span class=\"line\">--disable-debug \\</span><br><span class=\"line\">--disable-rpath \\</span><br><span class=\"line\">--enable-shared \\</span><br><span class=\"line\">--enable-opcache \\</span><br><span class=\"line\">--enable-fpm \\</span><br><span class=\"line\">--with-fpm-user=www \\</span><br><span class=\"line\">--with-fpm-group=www \\</span><br><span class=\"line\">--with-mysql=mysqlnd \\</span><br><span class=\"line\">--with-mysqli=mysqlnd \\</span><br><span class=\"line\">--with-pdo-mysql=mysqlnd \\</span><br><span class=\"line\">--with-gettext \\</span><br><span class=\"line\">--with-gd \\</span><br><span class=\"line\">--enable-mbstring \\</span><br><span class=\"line\">--with-iconv \\</span><br><span class=\"line\">--with-mcrypt \\</span><br><span class=\"line\">--with-mhash \\</span><br><span class=\"line\">--with-openssl \\</span><br><span class=\"line\">--enable-bcmath \\</span><br><span class=\"line\">--enable-soap \\</span><br><span class=\"line\">--with-libxml-dir \\</span><br><span class=\"line\">--enable-pcntl \\</span><br><span class=\"line\">--enable-shmop \\</span><br><span class=\"line\">--enable-sysvmsg \\</span><br><span class=\"line\">--enable-sysvsem \\</span><br><span class=\"line\">--enable-sysvshm \\</span><br><span class=\"line\">--enable-sockets \\</span><br><span class=\"line\">--with-curl \\</span><br><span class=\"line\">--with-zlib \\</span><br><span class=\"line\">--enable-zip \\</span><br><span class=\"line\">--with-bz2 \\</span><br><span class=\"line\">--with-readline \\</span><br><span class=\"line\">--with-xsl \\</span><br><span class=\"line\">--without-sqlite3 \\</span><br><span class=\"line\">--without-pdo-sqlite \\</span><br><span class=\"line\">--with-pear</span><br></pre></td></tr></tbody></table></figure>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php7 配置</span><br><span class=\"line\"></span><br><span class=\"line\"> ./configure \\</span><br><span class=\"line\">--prefix=/usr/local/php7 \\</span><br><span class=\"line\">--with-config-file-path=/usr/local/php7/etc \\</span><br><span class=\"line\">--enable-inline-optimization \\</span><br><span class=\"line\">--disable-debug \\</span><br><span class=\"line\">--disable-rpath \\</span><br><span class=\"line\">--enable-shared \\</span><br><span class=\"line\">--enable-opcache \\</span><br><span class=\"line\">--enable-fpm \\</span><br><span class=\"line\">--with-fpm-user=www \\</span><br><span class=\"line\">--with-fpm-group=www \\</span><br><span class=\"line\">--with-mysql=mysqlnd \\</span><br><span class=\"line\">--with-mysqli=mysqlnd \\</span><br><span class=\"line\">--with-pdo-mysql=mysqlnd \\</span><br><span class=\"line\">--with-gettext \\</span><br><span class=\"line\">--enable-mbstring \\</span><br><span class=\"line\">--with-iconv \\</span><br><span class=\"line\">--with-mcrypt \\</span><br><span class=\"line\">--with-mhash \\</span><br><span class=\"line\">--with-openssl \\</span><br><span class=\"line\">--enable-bcmath \\</span><br><span class=\"line\">--enable-soap \\</span><br><span class=\"line\">--with-libxml-dir \\</span><br><span class=\"line\">--enable-pcntl \\</span><br><span class=\"line\">--enable-shmop \\</span><br><span class=\"line\">--enable-sysvmsg \\</span><br><span class=\"line\">--enable-sysvsem \\</span><br><span class=\"line\">--enable-sysvshm \\</span><br><span class=\"line\">--enable-sockets \\</span><br><span class=\"line\">--with-curl \\</span><br><span class=\"line\">--with-zlib \\</span><br><span class=\"line\">--enable-zip \\</span><br><span class=\"line\">--with-bz2 \\</span><br><span class=\"line\">--with-readline \\</span><br><span class=\"line\">--without-sqlite3 \\</span><br><span class=\"line\">--without-pdo-sqlite \\</span><br><span class=\"line\">--with-pear</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"3-编译安装\"><a href=\"#3-编译安装\" class=\"headerlink\" title=\"3. 编译安装\"></a>3. 编译安装</h3><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">make &amp;&amp; make install</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"4-复制-php-配置文件\"><a href=\"#4-复制-php-配置文件\" class=\"headerlink\" title=\"4. 复制 php 配置文件\"></a>4. 复制 php 配置文件</h3><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# cp php.ini-production /usr/local/php7/etc/php.ini</span><br><span class=\"line\">已经安装完成，查看版本号</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# /usr/local/php7/bin/php -v</span><br><span class=\"line\">返回</span><br><span class=\"line\"></span><br><span class=\"line\">PHP 5.6.30 (cli) (built: Aug 29 2018 09:09:28) </span><br><span class=\"line\">Copyright (c) 1997-2016 The PHP Group</span><br><span class=\"line\">Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"5-配置-php-fpm\"><a href=\"#5-配置-php-fpm\" class=\"headerlink\" title=\"5. 配置 php-fpm\"></a>5. 配置 php-fpm</h3><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# cp /usr/local/php7/etc/php-fpm.conf.default /usr/local/php7/etc/php-fpm.conf</span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# vim /usr/local/php7/etc/php-fpm.conf</span><br><span class=\"line\">查找 user 将</span><br><span class=\"line\"></span><br><span class=\"line\">user = nobody</span><br><span class=\"line\">group = nobody</span><br><span class=\"line\">改成</span><br><span class=\"line\"></span><br><span class=\"line\">user = www</span><br><span class=\"line\">group = www</span><br><span class=\"line\">查找 listen 将</span><br><span class=\"line\"></span><br><span class=\"line\">listen = 127.0.0.1:9000</span><br><span class=\"line\">改成</span><br><span class=\"line\"></span><br><span class=\"line\">listen = 127.0.0.1:9001</span><br><span class=\"line\"></span><br><span class=\"line\">配置 php-fpm 服务</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# cp sapi/fpm/php-fpm.service /usr/lib/systemd/system/php7-fpm.service</span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# vim /usr/lib/systemd/system/php7-fpm.service </span><br><span class=\"line\">将：</span><br><span class=\"line\"></span><br><span class=\"line\">PIDFile=${prefix}/var/run/php-fpm.pid</span><br><span class=\"line\">ExecStart=${exec_prefix}/sbin/php-fpm --nodaemonize --fpm-config ${prefix}/etc/php-fpm.conf</span><br><span class=\"line\">改成</span><br><span class=\"line\"></span><br><span class=\"line\">PIDFile=/usr/local/php7/var/run/php-fpm.pid</span><br><span class=\"line\">ExecStart=/usr/local/php7/sbin/php-fpm --nodaemonize --fpm-config /usr/local/php7/etc/php-fpm.conf</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"6-重新载入-systemd\"><a href=\"#6-重新载入-systemd\" class=\"headerlink\" title=\"6. 重新载入 systemd\"></a>6. 重新载入 systemd</h3><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# systemctl daemon-reload</span><br><span class=\"line\">可以设置开机启动：</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# systemctl enable php7-fpm</span><br><span class=\"line\">返回结果</span><br><span class=\"line\"></span><br><span class=\"line\">Created symlink from /etc/systemd/system/multi-user.target.wants/php7-fpm.service to /usr/lib/systemd/system/php7-fpm.service.</span><br><span class=\"line\">启动：</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# systemctl start php7-fpm</span><br><span class=\"line\">关闭：</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# systemctl stop php7-fpm</span><br><span class=\"line\">查看状态：</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# systemctl status php7-fpm</span><br><span class=\"line\">返回</span><br><span class=\"line\"></span><br><span class=\"line\">● php5-fpm.service - The PHP FastCGI Process Manager</span><br><span class=\"line\">   Loaded: loaded (/usr/lib/systemd/system/php5-fpm.service; disabled; vendor preset: disabled)</span><br><span class=\"line\">   Active: active (running) since Wed 2018-08-29 09:36:39 CST; 47s ago</span><br><span class=\"line\"> Main PID: 14996 (php-fpm)</span><br><span class=\"line\">   CGroup: /system.slice/php5-fpm.service</span><br><span class=\"line\">           ├─14996 php-fpm: master process (/usr/local/php5/etc/php-fpm.conf)</span><br><span class=\"line\">           ├─14997 php-fpm: pool www</span><br><span class=\"line\">           └─14998 php-fpm: pool www</span><br></pre></td></tr></tbody></table></figure>\n<p>参考地址：<a href=\"https://blog.csdn.net/weixin_42579642/article/details/85290670\">https://blog.csdn.net/weixin_42579642/article/details/85290670</a></p>\n","excerpt":"","more":"<h3 id=\"1-先安装依赖包\"><a href=\"#1-先安装依赖包\" class=\"headerlink\" title=\"1. 先安装依赖包\"></a>1. 先安装依赖包</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">  yum install gcc bison bison-devel zlib-devel libmcrypt-devel mcrypt mhash-devel openssl-devel libxml2-devel libcurl-devel bzip2-devel readline-devel libedit-devel</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"2-下载php-5-3-0\"><a href=\"#2-下载php-5-3-0\" class=\"headerlink\" title=\"2. 下载php-5.3.0\"></a>2. 下载php-5.3.0</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://cn2.php.net/get/php-5.3.0.tar.gz/from/this/mirror -o php-5.3.0</span><br><span class=\"line\"><span class=\"meta prompt_\"></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">解压</span> </span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">tar -zxvf php-5.3.0.tar.gz</span></span><br><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\"><span class=\"built_in\">cd</span> php-5.3.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">yum install libxml2</span><br><span class=\"line\"></span><br><span class=\"line\">yum install libxml2-devel -y</span><br><span class=\"line\"></span><br><span class=\"line\">yum install curl curl-devel</span><br><span class=\"line\">yum install -y epel-release</span><br><span class=\"line\">yum install -y libmcrypt-devel</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php5 配置 </span><br><span class=\"line\"></span><br><span class=\"line\"> ./configure \\</span><br><span class=\"line\">--prefix=/usr/local/php5 \\</span><br><span class=\"line\">--with-config-file-path=/usr/local/php5/etc \\</span><br><span class=\"line\">--enable-inline-optimization \\</span><br><span class=\"line\">--disable-debug \\</span><br><span class=\"line\">--disable-rpath \\</span><br><span class=\"line\">--enable-shared \\</span><br><span class=\"line\">--enable-opcache \\</span><br><span class=\"line\">--enable-fpm \\</span><br><span class=\"line\">--with-fpm-user=www \\</span><br><span class=\"line\">--with-fpm-group=www \\</span><br><span class=\"line\">--with-mysql=mysqlnd \\</span><br><span class=\"line\">--with-mysqli=mysqlnd \\</span><br><span class=\"line\">--with-pdo-mysql=mysqlnd \\</span><br><span class=\"line\">--with-gettext \\</span><br><span class=\"line\">--with-gd \\</span><br><span class=\"line\">--enable-mbstring \\</span><br><span class=\"line\">--with-iconv \\</span><br><span class=\"line\">--with-mcrypt \\</span><br><span class=\"line\">--with-mhash \\</span><br><span class=\"line\">--with-openssl \\</span><br><span class=\"line\">--enable-bcmath \\</span><br><span class=\"line\">--enable-soap \\</span><br><span class=\"line\">--with-libxml-dir \\</span><br><span class=\"line\">--enable-pcntl \\</span><br><span class=\"line\">--enable-shmop \\</span><br><span class=\"line\">--enable-sysvmsg \\</span><br><span class=\"line\">--enable-sysvsem \\</span><br><span class=\"line\">--enable-sysvshm \\</span><br><span class=\"line\">--enable-sockets \\</span><br><span class=\"line\">--with-curl \\</span><br><span class=\"line\">--with-zlib \\</span><br><span class=\"line\">--enable-zip \\</span><br><span class=\"line\">--with-bz2 \\</span><br><span class=\"line\">--with-readline \\</span><br><span class=\"line\">--with-xsl \\</span><br><span class=\"line\">--without-sqlite3 \\</span><br><span class=\"line\">--without-pdo-sqlite \\</span><br><span class=\"line\">--with-pear</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php7 配置</span><br><span class=\"line\"></span><br><span class=\"line\"> ./configure \\</span><br><span class=\"line\">--prefix=/usr/local/php7 \\</span><br><span class=\"line\">--with-config-file-path=/usr/local/php7/etc \\</span><br><span class=\"line\">--enable-inline-optimization \\</span><br><span class=\"line\">--disable-debug \\</span><br><span class=\"line\">--disable-rpath \\</span><br><span class=\"line\">--enable-shared \\</span><br><span class=\"line\">--enable-opcache \\</span><br><span class=\"line\">--enable-fpm \\</span><br><span class=\"line\">--with-fpm-user=www \\</span><br><span class=\"line\">--with-fpm-group=www \\</span><br><span class=\"line\">--with-mysql=mysqlnd \\</span><br><span class=\"line\">--with-mysqli=mysqlnd \\</span><br><span class=\"line\">--with-pdo-mysql=mysqlnd \\</span><br><span class=\"line\">--with-gettext \\</span><br><span class=\"line\">--enable-mbstring \\</span><br><span class=\"line\">--with-iconv \\</span><br><span class=\"line\">--with-mcrypt \\</span><br><span class=\"line\">--with-mhash \\</span><br><span class=\"line\">--with-openssl \\</span><br><span class=\"line\">--enable-bcmath \\</span><br><span class=\"line\">--enable-soap \\</span><br><span class=\"line\">--with-libxml-dir \\</span><br><span class=\"line\">--enable-pcntl \\</span><br><span class=\"line\">--enable-shmop \\</span><br><span class=\"line\">--enable-sysvmsg \\</span><br><span class=\"line\">--enable-sysvsem \\</span><br><span class=\"line\">--enable-sysvshm \\</span><br><span class=\"line\">--enable-sockets \\</span><br><span class=\"line\">--with-curl \\</span><br><span class=\"line\">--with-zlib \\</span><br><span class=\"line\">--enable-zip \\</span><br><span class=\"line\">--with-bz2 \\</span><br><span class=\"line\">--with-readline \\</span><br><span class=\"line\">--without-sqlite3 \\</span><br><span class=\"line\">--without-pdo-sqlite \\</span><br><span class=\"line\">--with-pear</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-编译安装\"><a href=\"#3-编译安装\" class=\"headerlink\" title=\"3. 编译安装\"></a>3. 编译安装</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">$ </span><span class=\"language-bash\">make &amp;&amp; make install</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"4-复制-php-配置文件\"><a href=\"#4-复制-php-配置文件\" class=\"headerlink\" title=\"4. 复制 php 配置文件\"></a>4. 复制 php 配置文件</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# cp php.ini-production /usr/local/php7/etc/php.ini</span><br><span class=\"line\">已经安装完成，查看版本号</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# /usr/local/php7/bin/php -v</span><br><span class=\"line\">返回</span><br><span class=\"line\"></span><br><span class=\"line\">PHP 5.6.30 (cli) (built: Aug 29 2018 09:09:28) </span><br><span class=\"line\">Copyright (c) 1997-2016 The PHP Group</span><br><span class=\"line\">Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-配置-php-fpm\"><a href=\"#5-配置-php-fpm\" class=\"headerlink\" title=\"5. 配置 php-fpm\"></a>5. 配置 php-fpm</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# cp /usr/local/php7/etc/php-fpm.conf.default /usr/local/php7/etc/php-fpm.conf</span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# vim /usr/local/php7/etc/php-fpm.conf</span><br><span class=\"line\">查找 user 将</span><br><span class=\"line\"></span><br><span class=\"line\">user = nobody</span><br><span class=\"line\">group = nobody</span><br><span class=\"line\">改成</span><br><span class=\"line\"></span><br><span class=\"line\">user = www</span><br><span class=\"line\">group = www</span><br><span class=\"line\">查找 listen 将</span><br><span class=\"line\"></span><br><span class=\"line\">listen = 127.0.0.1:9000</span><br><span class=\"line\">改成</span><br><span class=\"line\"></span><br><span class=\"line\">listen = 127.0.0.1:9001</span><br><span class=\"line\"></span><br><span class=\"line\">配置 php-fpm 服务</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# cp sapi/fpm/php-fpm.service /usr/lib/systemd/system/php7-fpm.service</span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# vim /usr/lib/systemd/system/php7-fpm.service </span><br><span class=\"line\">将：</span><br><span class=\"line\"></span><br><span class=\"line\">PIDFile=$&#123;prefix&#125;/var/run/php-fpm.pid</span><br><span class=\"line\">ExecStart=$&#123;exec_prefix&#125;/sbin/php-fpm --nodaemonize --fpm-config $&#123;prefix&#125;/etc/php-fpm.conf</span><br><span class=\"line\">改成</span><br><span class=\"line\"></span><br><span class=\"line\">PIDFile=/usr/local/php7/var/run/php-fpm.pid</span><br><span class=\"line\">ExecStart=/usr/local/php7/sbin/php-fpm --nodaemonize --fpm-config /usr/local/php7/etc/php-fpm.conf</span><br></pre></td></tr></table></figure>\n<h3 id=\"6-重新载入-systemd\"><a href=\"#6-重新载入-systemd\" class=\"headerlink\" title=\"6. 重新载入 systemd\"></a>6. 重新载入 systemd</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# systemctl daemon-reload</span><br><span class=\"line\">可以设置开机启动：</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# systemctl enable php7-fpm</span><br><span class=\"line\">返回结果</span><br><span class=\"line\"></span><br><span class=\"line\">Created symlink from /etc/systemd/system/multi-user.target.wants/php7-fpm.service to /usr/lib/systemd/system/php7-fpm.service.</span><br><span class=\"line\">启动：</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# systemctl start php7-fpm</span><br><span class=\"line\">关闭：</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# systemctl stop php7-fpm</span><br><span class=\"line\">查看状态：</span><br><span class=\"line\"></span><br><span class=\"line\">[root@VM_0_2_centos php-5.6.30]# systemctl status php7-fpm</span><br><span class=\"line\">返回</span><br><span class=\"line\"></span><br><span class=\"line\">● php5-fpm.service - The PHP FastCGI Process Manager</span><br><span class=\"line\">   Loaded: loaded (/usr/lib/systemd/system/php5-fpm.service; disabled; vendor preset: disabled)</span><br><span class=\"line\">   Active: active (running) since Wed 2018-08-29 09:36:39 CST; 47s ago</span><br><span class=\"line\"> Main PID: 14996 (php-fpm)</span><br><span class=\"line\">   CGroup: /system.slice/php5-fpm.service</span><br><span class=\"line\">           ├─14996 php-fpm: master process (/usr/local/php5/etc/php-fpm.conf)</span><br><span class=\"line\">           ├─14997 php-fpm: pool www</span><br><span class=\"line\">           └─14998 php-fpm: pool www</span><br></pre></td></tr></table></figure>\n<p>参考地址：<a href=\"https://blog.csdn.net/weixin_42579642/article/details/85290670\">https://blog.csdn.net/weixin_42579642/article/details/85290670</a></p>\n"},{"title":"Linux下curl命令","abbrlink":"linux-curl","date":"2022-07-04T02:42:39.000Z","updated":"2022-07-04T02:42:39.000Z","_content":"\n\n### 格式\n\n```\ncurl https://www.baidu.com\n```\n上面命令向www.baidu.com发出 GET 请求，服务器返回的内容会在命令行输出。\n\n### 常用参数\n    \n#### -d：使用-d参数向服务器发送POST请求的数据体\n```\ncurl -d 'login=admin＆password=123' -X POST https://www.aa.com/admin/\n```\n上方的命令向服务器发送（POST）了login=admin＆password=123。但是使用-d参数以后，HTTP 请求会自动加上标头Content-Type : application/x-www-form-urlencoded。并且会自动将请求转为 POST 方法，因此可以省略-X POST。\n    \n```\ncurl -d '{\"login\": \"admin\", \"pass\": \"123\"}' -X 'Content-Type: application/json' https://www.aa.com/admin\n```\n上方的命令添加了HTTP请求标头：Content-Type:application/json并使用-d参数向服务器发送（POST）了json数据。\n\n#### -H：设置 HTTP头信息\n```\ncurl -H 'Token: xxxx' https://www.aa.com/\n```\n使用-H参数设置Token为xxxx向服务器发送了GET请求。\n    \n#### -X：可以指定HTTP请求方法\n```\ncurl -X POST https://www.aa.com/\n```\n上方的命令向服务器发送了POST请求。\n\n### 参考\nhttps://www.typeboom.com/archives/107/","source":"_posts/运维/Linux/Linux下curl命令.md","raw":"---\ntitle: Linux下curl命令\ntags: [curl]\ncategories: Linux\nabbrlink: 'linux-curl'\ndate: 2022-07-04 10:42:39\nupdated: 2022-07-04 10:42:39\n---\n\n\n### 格式\n\n```\ncurl https://www.baidu.com\n```\n上面命令向www.baidu.com发出 GET 请求，服务器返回的内容会在命令行输出。\n\n### 常用参数\n    \n#### -d：使用-d参数向服务器发送POST请求的数据体\n```\ncurl -d 'login=admin＆password=123' -X POST https://www.aa.com/admin/\n```\n上方的命令向服务器发送（POST）了login=admin＆password=123。但是使用-d参数以后，HTTP 请求会自动加上标头Content-Type : application/x-www-form-urlencoded。并且会自动将请求转为 POST 方法，因此可以省略-X POST。\n    \n```\ncurl -d '{\"login\": \"admin\", \"pass\": \"123\"}' -X 'Content-Type: application/json' https://www.aa.com/admin\n```\n上方的命令添加了HTTP请求标头：Content-Type:application/json并使用-d参数向服务器发送（POST）了json数据。\n\n#### -H：设置 HTTP头信息\n```\ncurl -H 'Token: xxxx' https://www.aa.com/\n```\n使用-H参数设置Token为xxxx向服务器发送了GET请求。\n    \n#### -X：可以指定HTTP请求方法\n```\ncurl -X POST https://www.aa.com/\n```\n上方的命令向服务器发送了POST请求。\n\n### 参考\nhttps://www.typeboom.com/archives/107/","slug":"运维/Linux/Linux下curl命令","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vz00bzoshg3lad68yx","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"格式\"><a href=\"#格式\" class=\"headerlink\" title=\"格式\"></a>格式</h3><figure class=\"highlight 1c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl https:<span class=\"comment\">//www.baidu.com</span></span><br></pre></td></tr></tbody></table></figure>\n<p>上面命令向www.baidu.com发出 GET 请求，服务器返回的内容会在命令行输出。</p>\n<h3 id=\"常用参数\"><a href=\"#常用参数\" class=\"headerlink\" title=\"常用参数\"></a>常用参数</h3><h4 id=\"d：使用-d参数向服务器发送POST请求的数据体\"><a href=\"#d：使用-d参数向服务器发送POST请求的数据体\" class=\"headerlink\" title=\"-d：使用-d参数向服务器发送POST请求的数据体\"></a>-d：使用-d参数向服务器发送POST请求的数据体</h4><figure class=\"highlight awk\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -d <span class=\"string\">'login=admin＆password=123'</span> -X POST https:<span class=\"regexp\">//</span>www.aa.com<span class=\"regexp\">/admin/</span></span><br></pre></td></tr></tbody></table></figure>\n<p>上方的命令向服务器发送（POST）了login=admin＆password=123。但是使用-d参数以后，HTTP 请求会自动加上标头Content-Type : application/x-www-form-urlencoded。并且会自动将请求转为 POST 方法，因此可以省略-X POST。</p>\n<figure class=\"highlight scilab\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -d <span class=\"string\">'{\"</span>login<span class=\"string\">\": \"</span>admin<span class=\"string\">\", \"</span>pass<span class=\"string\">\": \"</span><span class=\"number\">123</span><span class=\"string\">\"}'</span> -X <span class=\"string\">'Content-Type: application/json'</span> https:<span class=\"comment\">//www.aa.com/admin</span></span><br></pre></td></tr></tbody></table></figure>\n<p>上方的命令添加了HTTP请求标头：Content-Type:application/json并使用-d参数向服务器发送（POST）了json数据。</p>\n<h4 id=\"H：设置-HTTP头信息\"><a href=\"#H：设置-HTTP头信息\" class=\"headerlink\" title=\"-H：设置 HTTP头信息\"></a>-H：设置 HTTP头信息</h4><figure class=\"highlight 1c\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -H 'Token: xxxx' https:<span class=\"comment\">//www.aa.com/</span></span><br></pre></td></tr></tbody></table></figure>\n<p>使用-H参数设置Token为xxxx向服务器发送了GET请求。</p>\n<h4 id=\"X：可以指定HTTP请求方法\"><a href=\"#X：可以指定HTTP请求方法\" class=\"headerlink\" title=\"-X：可以指定HTTP请求方法\"></a>-X：可以指定HTTP请求方法</h4><figure class=\"highlight stata\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -X <span class=\"keyword\">POST</span> https:<span class=\"comment\">//www.aa.com/</span></span><br></pre></td></tr></tbody></table></figure>\n<p>上方的命令向服务器发送了POST请求。</p>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><p><a href=\"https://www.typeboom.com/archives/107/\">https://www.typeboom.com/archives/107/</a></p>\n","excerpt":"","more":"<h3 id=\"格式\"><a href=\"#格式\" class=\"headerlink\" title=\"格式\"></a>格式</h3><figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl https:<span class=\"comment\">//www.baidu.com</span></span><br></pre></td></tr></table></figure>\n<p>上面命令向www.baidu.com发出 GET 请求，服务器返回的内容会在命令行输出。</p>\n<h3 id=\"常用参数\"><a href=\"#常用参数\" class=\"headerlink\" title=\"常用参数\"></a>常用参数</h3><h4 id=\"d：使用-d参数向服务器发送POST请求的数据体\"><a href=\"#d：使用-d参数向服务器发送POST请求的数据体\" class=\"headerlink\" title=\"-d：使用-d参数向服务器发送POST请求的数据体\"></a>-d：使用-d参数向服务器发送POST请求的数据体</h4><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -d <span class=\"string\">&#x27;login=admin＆password=123&#x27;</span> -X POST https:<span class=\"regexp\">//</span>www.aa.com<span class=\"regexp\">/admin/</span></span><br></pre></td></tr></table></figure>\n<p>上方的命令向服务器发送（POST）了login=admin＆password=123。但是使用-d参数以后，HTTP 请求会自动加上标头Content-Type : application/x-www-form-urlencoded。并且会自动将请求转为 POST 方法，因此可以省略-X POST。</p>\n<figure class=\"highlight scilab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -d <span class=\"string\">&#x27;&#123;&quot;</span>login<span class=\"string\">&quot;: &quot;</span>admin<span class=\"string\">&quot;, &quot;</span>pass<span class=\"string\">&quot;: &quot;</span><span class=\"number\">123</span><span class=\"string\">&quot;&#125;&#x27;</span> -X <span class=\"string\">&#x27;Content-Type: application/json&#x27;</span> https:<span class=\"comment\">//www.aa.com/admin</span></span><br></pre></td></tr></table></figure>\n<p>上方的命令添加了HTTP请求标头：Content-Type:application/json并使用-d参数向服务器发送（POST）了json数据。</p>\n<h4 id=\"H：设置-HTTP头信息\"><a href=\"#H：设置-HTTP头信息\" class=\"headerlink\" title=\"-H：设置 HTTP头信息\"></a>-H：设置 HTTP头信息</h4><figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -H &#x27;Token: xxxx&#x27; https:<span class=\"comment\">//www.aa.com/</span></span><br></pre></td></tr></table></figure>\n<p>使用-H参数设置Token为xxxx向服务器发送了GET请求。</p>\n<h4 id=\"X：可以指定HTTP请求方法\"><a href=\"#X：可以指定HTTP请求方法\" class=\"headerlink\" title=\"-X：可以指定HTTP请求方法\"></a>-X：可以指定HTTP请求方法</h4><figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -X <span class=\"keyword\">POST</span> https:<span class=\"comment\">//www.aa.com/</span></span><br></pre></td></tr></table></figure>\n<p>上方的命令向服务器发送了POST请求。</p>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><p><a href=\"https://www.typeboom.com/archives/107/\">https://www.typeboom.com/archives/107/</a></p>\n"},{"title":"Linux下如何实现与Internet时间同步","abbr link":"linux-ntpdate","updated":"2024-10-15T08:36:39.200Z","abbrlink":"38c1","date":"2024-07-04T02:48:00.000Z","_content":"\n\n### 简介\n\n在项目中，有时候需要修改服务器时间来模拟某些场景，或者校准服务器时间；那么如何在Linux系统下实现与Internet时间同步呢。\n\n### 一、安装ntp\n```bash\n[root@pb ~]# yum install -y ntpdate\n```\n\n### 二、同步时间\n\n```bash\n// 方式一、使用域名连接，要经过DNS解析，速度慢。\n[root@pb ~]# ntpdate pool.ntp.org\n// 方式二、使用IP连接，超级快。\n[root@pb ~]# ntpdate 120.24.81.91\n```\nhttp://www.pool.ntp.org是NTP的官方网站,在这上面我们可以找到离我们国家的NTP Server cn.pool.ntp.org.它有3个服务器地址：\n服务器一： 1.cn.pool.ntp.org\n服务器二： 2.asia.pool.ntp.org\n服务器三： 3.asia.pool.ntp.org\n（直接用域名有时有问题，可以先Ping出他们的IP，然后用IP地址同步）\n\n 出现以下信息说明成功\n```bash\nFeb 21:23:06 ntpdate[62910]: step time server 182.92.12.11 offset -40.589470 sec\n```\n\n### 三、将系统时间写入到系统硬件当中，避免重启服务器时间覆盖\n\n// 显示hardwareclock系统硬件时间\n```\n[root@pb ~]# hwclock\n```\n// 将系统时间写入到系统硬件当中\n```\n[root@pb ~]# hwclock -w\n```\n\n### 四、设定计划任务同步网络时间\n\n#### 方式1：写在/etc/crontab里\n代码:\n```\n11 * * * root ntpdate 210.72.145.44\n```\n每天11点与中国国家授时中心同步时间\n每天11点与中国国家授时中心同步时间\n当然前提是\n```\napt-get install ntpdate\n```\n代码也可是\n```\n11 * * * root ntpdate us.pool.ntp.org\n```\n\n#### 方式2：使用命令crontab -e\n```\ncrontab -e\n10 5 * * * root ntpdate us.pool.ntp.org;hwclock -w\n```\n这样每天5:10自动进行网络校时，并同时更新BIOS的时间\n","source":"_posts/运维/Linux/Linux下如何实现与Internet时间同步.md","raw":"---\ntitle: Linux下如何实现与Internet时间同步\ntags:\n  - Linux\n  - ntpdate\ncategories:\n  - ntpdate\nabbr link: linux-ntpdate\nupdated: '024-07-04 10:48:00'\nabbrlink: 38c1\ndate: 2024-07-04 10:48:00\n---\n\n\n### 简介\n\n在项目中，有时候需要修改服务器时间来模拟某些场景，或者校准服务器时间；那么如何在Linux系统下实现与Internet时间同步呢。\n\n### 一、安装ntp\n```bash\n[root@pb ~]# yum install -y ntpdate\n```\n\n### 二、同步时间\n\n```bash\n// 方式一、使用域名连接，要经过DNS解析，速度慢。\n[root@pb ~]# ntpdate pool.ntp.org\n// 方式二、使用IP连接，超级快。\n[root@pb ~]# ntpdate 120.24.81.91\n```\nhttp://www.pool.ntp.org是NTP的官方网站,在这上面我们可以找到离我们国家的NTP Server cn.pool.ntp.org.它有3个服务器地址：\n服务器一： 1.cn.pool.ntp.org\n服务器二： 2.asia.pool.ntp.org\n服务器三： 3.asia.pool.ntp.org\n（直接用域名有时有问题，可以先Ping出他们的IP，然后用IP地址同步）\n\n 出现以下信息说明成功\n```bash\nFeb 21:23:06 ntpdate[62910]: step time server 182.92.12.11 offset -40.589470 sec\n```\n\n### 三、将系统时间写入到系统硬件当中，避免重启服务器时间覆盖\n\n// 显示hardwareclock系统硬件时间\n```\n[root@pb ~]# hwclock\n```\n// 将系统时间写入到系统硬件当中\n```\n[root@pb ~]# hwclock -w\n```\n\n### 四、设定计划任务同步网络时间\n\n#### 方式1：写在/etc/crontab里\n代码:\n```\n11 * * * root ntpdate 210.72.145.44\n```\n每天11点与中国国家授时中心同步时间\n每天11点与中国国家授时中心同步时间\n当然前提是\n```\napt-get install ntpdate\n```\n代码也可是\n```\n11 * * * root ntpdate us.pool.ntp.org\n```\n\n#### 方式2：使用命令crontab -e\n```\ncrontab -e\n10 5 * * * root ntpdate us.pool.ntp.org;hwclock -w\n```\n这样每天5:10自动进行网络校时，并同时更新BIOS的时间\n","slug":"运维/Linux/Linux下如何实现与Internet时间同步","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2vz00c1oshg17lyh1ae","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h3><p>在项目中，有时候需要修改服务器时间来模拟某些场景，或者校准服务器时间；那么如何在Linux系统下实现与Internet时间同步呢。</p>\n<h3 id=\"一、安装ntp\"><a href=\"#一、安装ntp\" class=\"headerlink\" title=\"一、安装ntp\"></a>一、安装ntp</h3><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@pb ~]<span class=\"comment\"># yum install -y ntpdate</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"二、同步时间\"><a href=\"#二、同步时间\" class=\"headerlink\" title=\"二、同步时间\"></a>二、同步时间</h3><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 方式一、使用域名连接，要经过DNS解析，速度慢。</span><br><span class=\"line\">[root@pb ~]<span class=\"comment\"># ntpdate pool.ntp.org</span></span><br><span class=\"line\">// 方式二、使用IP连接，超级快。</span><br><span class=\"line\">[root@pb ~]<span class=\"comment\"># ntpdate 120.24.81.91</span></span><br></pre></td></tr></tbody></table></figure>\n<p><a href=\"http://www.pool.ntp.org是NTP的官方网站,在这上面我们可以找到离我们国家的NTP\">http://www.pool.ntp.org是NTP的官方网站,在这上面我们可以找到离我们国家的NTP</a> Server cn.pool.ntp.org.它有3个服务器地址：<br>服务器一： 1.cn.pool.ntp.org<br>服务器二： 2.asia.pool.ntp.org<br>服务器三： 3.asia.pool.ntp.org<br>（直接用域名有时有问题，可以先Ping出他们的IP，然后用IP地址同步）</p>\n<p> 出现以下信息说明成功<br></p><figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Feb 21:23:06 ntpdate[62910]: step time server 182.92.12.11 offset -40.589470 sec</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h3 id=\"三、将系统时间写入到系统硬件当中，避免重启服务器时间覆盖\"><a href=\"#三、将系统时间写入到系统硬件当中，避免重启服务器时间覆盖\" class=\"headerlink\" title=\"三、将系统时间写入到系统硬件当中，避免重启服务器时间覆盖\"></a>三、将系统时间写入到系统硬件当中，避免重启服务器时间覆盖</h3><p>// 显示hardwareclock系统硬件时间<br></p><figure class=\"highlight autoit\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"symbol\">@pb</span> ~]<span class=\"meta\"># hwclock</span></span><br></pre></td></tr></tbody></table></figure><br>// 将系统时间写入到系统硬件当中<br><figure class=\"highlight autoit\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"symbol\">@pb</span> ~]<span class=\"meta\"># hwclock -w</span></span><br></pre></td></tr></tbody></table></figure><p></p>\n<h3 id=\"四、设定计划任务同步网络时间\"><a href=\"#四、设定计划任务同步网络时间\" class=\"headerlink\" title=\"四、设定计划任务同步网络时间\"></a>四、设定计划任务同步网络时间</h3><h4 id=\"方式1：写在-etc-crontab里\"><a href=\"#方式1：写在-etc-crontab里\" class=\"headerlink\" title=\"方式1：写在/etc/crontab里\"></a>方式1：写在/etc/crontab里</h4><p>代码:<br></p><figure class=\"highlight basic\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">11 </span>* * * root ntpdate <span class=\"number\">210.72</span>.<span class=\"number\">145.44</span></span><br></pre></td></tr></tbody></table></figure><br>每天11点与中国国家授时中心同步时间<br>每天11点与中国国家授时中心同步时间<br>当然前提是<br><figure class=\"highlight routeros\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-<span class=\"built_in\">get</span> install ntpdate</span><br></pre></td></tr></tbody></table></figure><br>代码也可是<br><figure class=\"highlight basic\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">11 </span>* * * root ntpdate us.pool.ntp.org</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h4 id=\"方式2：使用命令crontab-e\"><a href=\"#方式2：使用命令crontab-e\" class=\"headerlink\" title=\"方式2：使用命令crontab -e\"></a>方式2：使用命令crontab -e</h4><figure class=\"highlight nginx\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">crontab</span> -e</span><br><span class=\"line\"><span class=\"number\">10</span> <span class=\"number\">5</span> * * * root ntpdate us.pool.ntp.org;<span class=\"attribute\">hwclock</span> -w</span><br></pre></td></tr></tbody></table></figure>\n<p>这样每天5:10自动进行网络校时，并同时更新BIOS的时间</p>\n","excerpt":"","more":"<h3 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h3><p>在项目中，有时候需要修改服务器时间来模拟某些场景，或者校准服务器时间；那么如何在Linux系统下实现与Internet时间同步呢。</p>\n<h3 id=\"一、安装ntp\"><a href=\"#一、安装ntp\" class=\"headerlink\" title=\"一、安装ntp\"></a>一、安装ntp</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@pb ~]<span class=\"comment\"># yum install -y ntpdate</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"二、同步时间\"><a href=\"#二、同步时间\" class=\"headerlink\" title=\"二、同步时间\"></a>二、同步时间</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 方式一、使用域名连接，要经过DNS解析，速度慢。</span><br><span class=\"line\">[root@pb ~]<span class=\"comment\"># ntpdate pool.ntp.org</span></span><br><span class=\"line\">// 方式二、使用IP连接，超级快。</span><br><span class=\"line\">[root@pb ~]<span class=\"comment\"># ntpdate 120.24.81.91</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"http://www.pool.ntp.org是NTP的官方网站,在这上面我们可以找到离我们国家的NTP\">http://www.pool.ntp.org是NTP的官方网站,在这上面我们可以找到离我们国家的NTP</a> Server cn.pool.ntp.org.它有3个服务器地址：<br>服务器一： 1.cn.pool.ntp.org<br>服务器二： 2.asia.pool.ntp.org<br>服务器三： 3.asia.pool.ntp.org<br>（直接用域名有时有问题，可以先Ping出他们的IP，然后用IP地址同步）</p>\n<p> 出现以下信息说明成功<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Feb 21:23:06 ntpdate[62910]: step time server 182.92.12.11 offset -40.589470 sec</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"三、将系统时间写入到系统硬件当中，避免重启服务器时间覆盖\"><a href=\"#三、将系统时间写入到系统硬件当中，避免重启服务器时间覆盖\" class=\"headerlink\" title=\"三、将系统时间写入到系统硬件当中，避免重启服务器时间覆盖\"></a>三、将系统时间写入到系统硬件当中，避免重启服务器时间覆盖</h3><p>// 显示hardwareclock系统硬件时间<br><figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"symbol\">@pb</span> ~]<span class=\"meta\"># hwclock</span></span><br></pre></td></tr></table></figure><br>// 将系统时间写入到系统硬件当中<br><figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"symbol\">@pb</span> ~]<span class=\"meta\"># hwclock -w</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"四、设定计划任务同步网络时间\"><a href=\"#四、设定计划任务同步网络时间\" class=\"headerlink\" title=\"四、设定计划任务同步网络时间\"></a>四、设定计划任务同步网络时间</h3><h4 id=\"方式1：写在-etc-crontab里\"><a href=\"#方式1：写在-etc-crontab里\" class=\"headerlink\" title=\"方式1：写在/etc/crontab里\"></a>方式1：写在/etc/crontab里</h4><p>代码:<br><figure class=\"highlight basic\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">11 </span>* * * root ntpdate <span class=\"number\">210.72</span>.<span class=\"number\">145.44</span></span><br></pre></td></tr></table></figure><br>每天11点与中国国家授时中心同步时间<br>每天11点与中国国家授时中心同步时间<br>当然前提是<br><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-<span class=\"built_in\">get</span> install ntpdate</span><br></pre></td></tr></table></figure><br>代码也可是<br><figure class=\"highlight basic\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">11 </span>* * * root ntpdate us.pool.ntp.org</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"方式2：使用命令crontab-e\"><a href=\"#方式2：使用命令crontab-e\" class=\"headerlink\" title=\"方式2：使用命令crontab -e\"></a>方式2：使用命令crontab -e</h4><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">crontab</span> -e</span><br><span class=\"line\"><span class=\"number\">10</span> <span class=\"number\">5</span> * * * root ntpdate us.pool.ntp.org;<span class=\"attribute\">hwclock</span> -w</span><br></pre></td></tr></table></figure>\n<p>这样每天5:10自动进行网络校时，并同时更新BIOS的时间</p>\n"},{"title":"Linux下安装Cacti","abbrlink":"install-cacti-on-linux","date":"2019-09-23T10:28:06.000Z","updated":"2019-09-23T10:28:06.000Z","_content":"\n### 1、安装rrdtool\n`yum install rrdtool rrdtool-perl -y `\n\n### 2、安装配置net-snmp\n- (1)、安装net-snmp\n`yum install net-snmp net-snmp-libs net-snmp-utils`\n\n可能报错：\n\n```\n...\n2:postfix-2.10.1-6.el7.x86_64 has missing requires of libmysqlclient.so.18()(64bit)\n2:postfix-2.10.1-6.el7.x86_64 has missing requires of libmysqlclient.so.18(libmysqlclient_18)(64bit)\n```\n\n解决:缺少Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rpm这个包\n\n```shell\n# wget http://www.percona.com/redir/downloads/Percona-XtraDB-Cluster/5.5.37-25.10/RPM/rhel6/x86_64/Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rpm\n# rpm -ivh Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rp\n```\n\n- (2)、配置net-snmp\n`vim /etc/snmp/snmpd.conf `\n\n```\n41行 1将default 改为监控服务器ip;2 将public 改成复杂些的识别的字符串  \ncom2sec notConfigUser  127.0.0.1      public  \n  \n62行 1将systemview 改为all,供所有snmp 访问权限  \naccess  notConfigGroup \"\"      any       noauth    exact  all none none  \n  \n85行 将#注释符号去掉  \nview all    included  .1                               80  \n```\n\n- (3)、启动net-snmp\n`service snmpd start `\n可能提示：Redirecting to /bin/systemctl start snmpd.service\n解决方法：`/bin/systemctl start snmpd`\n\n- (4)、测试net-snmp\nsnmpd 使用 tcp/udp 161 端口,验证snmpd 服务\n`lsof -i :161`\n![](/images/install_cacti_on_linux_1.png)\n使用snmpwalk 命令验证\n```\nsnmpwalk -v 2c -c public 127.0.0.1 \n-v是指版本,-c 是指密钥，获取到系统信息则正常！\n如果cacti搭建好后很久还是没出图，用这个命令试试看能否获取到数据。\n正常情况下，执行完这个命令后会有很多数据出现！\n```\n\n### 3、安装cacti\n\n- (1)、安装net-snmp\n```shell\ncd /tmp \nwget http://www.cacti.net/downloads/cacti-0.8.8a.tar.gz \ntar xzf cacti-0.8.8a.tar.gz \nmv cacti-0.8.8a /var/www/cacti \ncd /var/www/cacti\n```\n- (2)、创建数据库\n`mysqladmin --user=root -p create cacti `\n\n- (3)、导入数据库\n`mysql -uroot -p cacti < cacti.sql `\n可能报错：ERROR 1067 (42000) at line 1847: Invalid default value for 'status_fail_date'\n原因：status_fail_date的datetime默认类型是不允许的\n解决方法：\n```\nvim /etc/my.cnf\n添加如下内容：\nsql-mode=\"ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\"\n重启mysql服务：systemctl restart mysqld\n```\n\n- (4)、创建数据库用户\n```\nshell> mysql -uroot -p mysql \nmysql> GRANT ALL ON cacti.* TO cactiuser@localhost IDENTIFIED BY 'Cacti@pwd001231'; \nmysql> flush privileges; \n```\n\n- (5)、配置include/config.php\n```\n$database_type = \"mysql\"; \n$database_default = \"cacti\"; \n$database_hostname = \"localhost\"; \n$database_username = \"cactiuser\"; \n$database_password = \"Cacti@pwd001231\"; \n```\n\n打开注释掉的：`$url_path = \"/cacti/\"; `\n\n\n- (6)、配置include/global.php\n``` php\n/* Default database settings*/ \n$database_type = \"mysql\"; \n$database_default = \"cacti\"; \n$database_hostname = \"localhost\"; \n$database_username = \"cactiuser\"; \n$database_password = \"Cacti@pwd001231\"; \n$database_port = \"3306\"; \n$database_ssl = false; \n```\n\n- (7)、设置目录权限\n```\nuseradd cactiuser \nchown -R cactiuser rra/ log/ \n```\n\n- (8)、配置计划任务\n```\n#crontab -e \n*/5 * * * * /usr/bin/php /var/www/html/cacti/poller.php > /dev/null 2>&1 //让系统每5分钟收集\nservice crond restart \n```\n\n- (9)、完成cacti的安装\n注意关闭防火墙或者允许80端口，关闭selinux\n1) 在浏览器中输入：http://监控服务器IP/cacti/\n默认用户名：admin 密码：admin\n2）设置cacti用到的命令路径\n3) 更改密码 \n登陆成功户 next>>   next>> \n![](/images/install_cacti_on_linux_2.png)\n![](/images/install_cacti_on_linux_3.png)\n\n参考地址：https://www.cnblogs.com/liuyansheng/p/6118535.html","source":"_posts/运维/Linux/Linux下安装Cacti.md","raw":"---\ntitle: Linux下安装Cacti\ntags: [Cacti]\ncategories: Linux\nabbrlink: 'install-cacti-on-linux'\ndate: 2019-09-23 18:28:06\nupdated: 2019-09-23 18:28:06\n---\n\n### 1、安装rrdtool\n`yum install rrdtool rrdtool-perl -y `\n\n### 2、安装配置net-snmp\n- (1)、安装net-snmp\n`yum install net-snmp net-snmp-libs net-snmp-utils`\n\n可能报错：\n\n```\n...\n2:postfix-2.10.1-6.el7.x86_64 has missing requires of libmysqlclient.so.18()(64bit)\n2:postfix-2.10.1-6.el7.x86_64 has missing requires of libmysqlclient.so.18(libmysqlclient_18)(64bit)\n```\n\n解决:缺少Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rpm这个包\n\n```shell\n# wget http://www.percona.com/redir/downloads/Percona-XtraDB-Cluster/5.5.37-25.10/RPM/rhel6/x86_64/Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rpm\n# rpm -ivh Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rp\n```\n\n- (2)、配置net-snmp\n`vim /etc/snmp/snmpd.conf `\n\n```\n41行 1将default 改为监控服务器ip;2 将public 改成复杂些的识别的字符串  \ncom2sec notConfigUser  127.0.0.1      public  \n  \n62行 1将systemview 改为all,供所有snmp 访问权限  \naccess  notConfigGroup \"\"      any       noauth    exact  all none none  \n  \n85行 将#注释符号去掉  \nview all    included  .1                               80  \n```\n\n- (3)、启动net-snmp\n`service snmpd start `\n可能提示：Redirecting to /bin/systemctl start snmpd.service\n解决方法：`/bin/systemctl start snmpd`\n\n- (4)、测试net-snmp\nsnmpd 使用 tcp/udp 161 端口,验证snmpd 服务\n`lsof -i :161`\n![](/images/install_cacti_on_linux_1.png)\n使用snmpwalk 命令验证\n```\nsnmpwalk -v 2c -c public 127.0.0.1 \n-v是指版本,-c 是指密钥，获取到系统信息则正常！\n如果cacti搭建好后很久还是没出图，用这个命令试试看能否获取到数据。\n正常情况下，执行完这个命令后会有很多数据出现！\n```\n\n### 3、安装cacti\n\n- (1)、安装net-snmp\n```shell\ncd /tmp \nwget http://www.cacti.net/downloads/cacti-0.8.8a.tar.gz \ntar xzf cacti-0.8.8a.tar.gz \nmv cacti-0.8.8a /var/www/cacti \ncd /var/www/cacti\n```\n- (2)、创建数据库\n`mysqladmin --user=root -p create cacti `\n\n- (3)、导入数据库\n`mysql -uroot -p cacti < cacti.sql `\n可能报错：ERROR 1067 (42000) at line 1847: Invalid default value for 'status_fail_date'\n原因：status_fail_date的datetime默认类型是不允许的\n解决方法：\n```\nvim /etc/my.cnf\n添加如下内容：\nsql-mode=\"ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\"\n重启mysql服务：systemctl restart mysqld\n```\n\n- (4)、创建数据库用户\n```\nshell> mysql -uroot -p mysql \nmysql> GRANT ALL ON cacti.* TO cactiuser@localhost IDENTIFIED BY 'Cacti@pwd001231'; \nmysql> flush privileges; \n```\n\n- (5)、配置include/config.php\n```\n$database_type = \"mysql\"; \n$database_default = \"cacti\"; \n$database_hostname = \"localhost\"; \n$database_username = \"cactiuser\"; \n$database_password = \"Cacti@pwd001231\"; \n```\n\n打开注释掉的：`$url_path = \"/cacti/\"; `\n\n\n- (6)、配置include/global.php\n``` php\n/* Default database settings*/ \n$database_type = \"mysql\"; \n$database_default = \"cacti\"; \n$database_hostname = \"localhost\"; \n$database_username = \"cactiuser\"; \n$database_password = \"Cacti@pwd001231\"; \n$database_port = \"3306\"; \n$database_ssl = false; \n```\n\n- (7)、设置目录权限\n```\nuseradd cactiuser \nchown -R cactiuser rra/ log/ \n```\n\n- (8)、配置计划任务\n```\n#crontab -e \n*/5 * * * * /usr/bin/php /var/www/html/cacti/poller.php > /dev/null 2>&1 //让系统每5分钟收集\nservice crond restart \n```\n\n- (9)、完成cacti的安装\n注意关闭防火墙或者允许80端口，关闭selinux\n1) 在浏览器中输入：http://监控服务器IP/cacti/\n默认用户名：admin 密码：admin\n2）设置cacti用到的命令路径\n3) 更改密码 \n登陆成功户 next>>   next>> \n![](/images/install_cacti_on_linux_2.png)\n![](/images/install_cacti_on_linux_3.png)\n\n参考地址：https://www.cnblogs.com/liuyansheng/p/6118535.html","slug":"运维/Linux/Linux下安装Cacti","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2w000c6oshghoqob7n9","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1、安装rrdtool\"><a href=\"#1、安装rrdtool\" class=\"headerlink\" title=\"1、安装rrdtool\"></a>1、安装rrdtool</h3><p><code>yum install rrdtool rrdtool-perl -y</code></p>\n<h3 id=\"2、安装配置net-snmp\"><a href=\"#2、安装配置net-snmp\" class=\"headerlink\" title=\"2、安装配置net-snmp\"></a>2、安装配置net-snmp</h3><ul>\n<li>(1)、安装net-snmp<br><code>yum install net-snmp net-snmp-libs net-snmp-utils</code></li>\n</ul>\n<p>可能报错：</p>\n<figure class=\"highlight stylus\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"number\">2</span>:postfix-<span class=\"number\">2.10</span>.<span class=\"number\">1</span>-<span class=\"number\">6</span><span class=\"selector-class\">.el7</span><span class=\"selector-class\">.x86_64</span> has missing requires of libmysqlclient<span class=\"selector-class\">.so</span>.<span class=\"number\">18</span>()(<span class=\"number\">64</span>bit)</span><br><span class=\"line\"><span class=\"number\">2</span>:postfix-<span class=\"number\">2.10</span>.<span class=\"number\">1</span>-<span class=\"number\">6</span><span class=\"selector-class\">.el7</span><span class=\"selector-class\">.x86_64</span> has missing requires of libmysqlclient<span class=\"selector-class\">.so</span>.<span class=\"number\">18</span>(libmysqlclient_18)(<span class=\"number\">64</span>bit)</span><br></pre></td></tr></tbody></table></figure>\n<p>解决:缺少Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rpm这个包</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">wget http://www.percona.com/redir/downloads/Percona-XtraDB-Cluster/5.5.37-25.10/RPM/rhel6/x86_64/Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rpm</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">rpm -ivh Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rp</span></span><br></pre></td></tr></tbody></table></figure>\n<ul>\n<li>(2)、配置net-snmp<br><code>vim /etc/snmp/snmpd.conf</code></li>\n</ul>\n<figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">41</span>行 <span class=\"number\">1</span>将<span class=\"keyword\">default</span> 改为监控服务器ip;<span class=\"number\">2</span> 将<span class=\"built_in\">public</span> 改成复杂些的识别的字符串  </span><br><span class=\"line\">com2sec notConfigUser  <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>      <span class=\"built_in\">public</span>  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"number\">62</span>行 <span class=\"number\">1</span>将systemview 改为<span class=\"keyword\">all</span>,供所有snmp 访问权限  </span><br><span class=\"line\"><span class=\"keyword\">access</span>  notConfigGroup \"\"      <span class=\"keyword\">any</span>       noauth    exact  <span class=\"keyword\">all</span> <span class=\"keyword\">none</span> <span class=\"keyword\">none</span>  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"number\">85</span>行 将#注释符号去掉  </span><br><span class=\"line\"><span class=\"keyword\">view</span> <span class=\"keyword\">all</span>    included  <span class=\"number\">.1</span>                               <span class=\"number\">80</span>  </span><br></pre></td></tr></tbody></table></figure>\n<ul>\n<li><p>(3)、启动net-snmp<br><code>service snmpd start</code><br>可能提示：Redirecting to /bin/systemctl start snmpd.service<br>解决方法：<code>/bin/systemctl start snmpd</code></p>\n</li>\n<li><p>(4)、测试net-snmp<br>snmpd 使用 tcp/udp 161 端口,验证snmpd 服务<br><code>lsof -i :161</code><br><img src=\"/images/install_cacti_on_linux_1.png\" alt=\"\"><br>使用snmpwalk 命令验证</p>\n<figure class=\"highlight llvm\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">snmpwalk -v <span class=\"number\">2</span><span class=\"keyword\">c</span> -<span class=\"keyword\">c</span> public <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span> </span><br><span class=\"line\">-v是指版本<span class=\"punctuation\">,</span>-<span class=\"keyword\">c</span> 是指密钥，获取到系统信息则正常！</span><br><span class=\"line\">如果cacti搭建好后很久还是没出图，用这个命令试试看能否获取到数据。</span><br><span class=\"line\">正常情况下，执行完这个命令后会有很多数据出现！</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<h3 id=\"3、安装cacti\"><a href=\"#3、安装cacti\" class=\"headerlink\" title=\"3、安装cacti\"></a>3、安装cacti</h3><ul>\n<li>(1)、安装net-snmp<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /tmp </span><br><span class=\"line\">wget http://www.cacti.net/downloads/cacti-0.8.8a.tar.gz </span><br><span class=\"line\">tar xzf cacti-0.8.8a.tar.gz </span><br><span class=\"line\">mv cacti-0.8.8a /var/www/cacti </span><br><span class=\"line\">cd /var/www/cacti</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>(2)、创建数据库<br><code>mysqladmin --user=root -p create cacti</code></p>\n</li>\n<li><p>(3)、导入数据库<br><code>mysql -uroot -p cacti &lt; cacti.sql</code><br>可能报错：ERROR 1067 (42000) at line 1847: Invalid default value for ‘status_fail_date’<br>原因：status_fail_date的datetime默认类型是不允许的<br>解决方法：</p>\n<figure class=\"highlight vim\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">vim</span> /etc/my.<span class=\"keyword\">cnf</span></span><br><span class=\"line\">添加如下内容：</span><br><span class=\"line\">sql-<span class=\"keyword\">mode</span>=<span class=\"string\">\"ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\"</span></span><br><span class=\"line\">重启mysql服务：systemctl restart mysqld</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>(4)、创建数据库用户</p>\n<figure class=\"highlight pgsql\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shell&gt; mysql -uroot -p mysql </span><br><span class=\"line\">mysql&gt; <span class=\"keyword\">GRANT</span> <span class=\"keyword\">ALL</span> <span class=\"keyword\">ON</span> cacti.* <span class=\"keyword\">TO</span> cactiuser@localhost IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">'Cacti@pwd001231'</span>; </span><br><span class=\"line\">mysql&gt; flush <span class=\"keyword\">privileges</span>; </span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>(5)、配置include/config.php</p>\n<figure class=\"highlight perl\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$database_type = <span class=\"string\">\"mysql\"</span>; </span><br><span class=\"line\">$database_default = <span class=\"string\">\"cacti\"</span>; </span><br><span class=\"line\">$database_hostname = <span class=\"string\">\"localhost\"</span>; </span><br><span class=\"line\">$database_username = <span class=\"string\">\"cactiuser\"</span>; </span><br><span class=\"line\">$database_password = <span class=\"string\">\"Cacti@pwd001231\"</span>; </span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<p>打开注释掉的：<code>$url_path = \"/cacti/\";</code></p>\n<ul>\n<li><p>(6)、配置include/global.php</p>\n<figure class=\"highlight php\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Default database settings*/</span> </span><br><span class=\"line\"><span class=\"variable\">$database_type</span> = <span class=\"string\">\"mysql\"</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_default</span> = <span class=\"string\">\"cacti\"</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_hostname</span> = <span class=\"string\">\"localhost\"</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_username</span> = <span class=\"string\">\"cactiuser\"</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_password</span> = <span class=\"string\">\"Cacti@pwd001231\"</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_port</span> = <span class=\"string\">\"3306\"</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_ssl</span> = <span class=\"literal\">false</span>; </span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>(7)、设置目录权限</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useradd cactiuser </span><br><span class=\"line\"><span class=\"built_in\">chown</span> -R cactiuser rra/ <span class=\"built_in\">log</span>/ </span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>(8)、配置计划任务</p>\n<figure class=\"highlight awk\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#crontab -e </span></span><br><span class=\"line\">*<span class=\"regexp\">/5 * * * * /u</span>sr<span class=\"regexp\">/bin/</span>php <span class=\"regexp\">/var/</span>www<span class=\"regexp\">/html/</span>cacti<span class=\"regexp\">/poller.php &gt; /</span>dev<span class=\"regexp\">/null 2&gt;&amp;1 /</span>/让系统每<span class=\"number\">5</span>分钟收集</span><br><span class=\"line\">service crond restart </span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>(9)、完成cacti的安装<br>注意关闭防火墙或者允许80端口，关闭selinux<br>1) 在浏览器中输入：<a href=\"http://监控服务器IP/cacti/\">http://监控服务器IP/cacti/</a><br>默认用户名：admin 密码：admin<br>2）设置cacti用到的命令路径<br>3) 更改密码<br>登陆成功户 next&gt;&gt;   next&gt;&gt;<br><img src=\"/images/install_cacti_on_linux_2.png\" alt=\"\"><br><img src=\"/images/install_cacti_on_linux_3.png\" alt=\"\"></p>\n</li>\n</ul>\n<p>参考地址：<a href=\"https://www.cnblogs.com/liuyansheng/p/6118535.html\">https://www.cnblogs.com/liuyansheng/p/6118535.html</a></p>\n","excerpt":"","more":"<h3 id=\"1、安装rrdtool\"><a href=\"#1、安装rrdtool\" class=\"headerlink\" title=\"1、安装rrdtool\"></a>1、安装rrdtool</h3><p><code>yum install rrdtool rrdtool-perl -y</code></p>\n<h3 id=\"2、安装配置net-snmp\"><a href=\"#2、安装配置net-snmp\" class=\"headerlink\" title=\"2、安装配置net-snmp\"></a>2、安装配置net-snmp</h3><ul>\n<li>(1)、安装net-snmp<br><code>yum install net-snmp net-snmp-libs net-snmp-utils</code></li>\n</ul>\n<p>可能报错：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"number\">2</span>:postfix-<span class=\"number\">2.10</span>.<span class=\"number\">1</span>-<span class=\"number\">6</span><span class=\"selector-class\">.el7</span><span class=\"selector-class\">.x86_64</span> has missing requires of libmysqlclient<span class=\"selector-class\">.so</span>.<span class=\"number\">18</span>()(<span class=\"number\">64</span>bit)</span><br><span class=\"line\"><span class=\"number\">2</span>:postfix-<span class=\"number\">2.10</span>.<span class=\"number\">1</span>-<span class=\"number\">6</span><span class=\"selector-class\">.el7</span><span class=\"selector-class\">.x86_64</span> has missing requires of libmysqlclient<span class=\"selector-class\">.so</span>.<span class=\"number\">18</span>(libmysqlclient_18)(<span class=\"number\">64</span>bit)</span><br></pre></td></tr></table></figure>\n<p>解决:缺少Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rpm这个包</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">wget http://www.percona.com/redir/downloads/Percona-XtraDB-Cluster/5.5.37-25.10/RPM/rhel6/x86_64/Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rpm</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">rpm -ivh Percona-XtraDB-Cluster-shared-55-5.5.37-25.10.756.el6.x86_64.rp</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>(2)、配置net-snmp<br><code>vim /etc/snmp/snmpd.conf</code></li>\n</ul>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">41</span>行 <span class=\"number\">1</span>将<span class=\"keyword\">default</span> 改为监控服务器ip;<span class=\"number\">2</span> 将<span class=\"built_in\">public</span> 改成复杂些的识别的字符串  </span><br><span class=\"line\">com2sec notConfigUser  <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>      <span class=\"built_in\">public</span>  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"number\">62</span>行 <span class=\"number\">1</span>将systemview 改为<span class=\"keyword\">all</span>,供所有snmp 访问权限  </span><br><span class=\"line\"><span class=\"keyword\">access</span>  notConfigGroup &quot;&quot;      <span class=\"keyword\">any</span>       noauth    exact  <span class=\"keyword\">all</span> <span class=\"keyword\">none</span> <span class=\"keyword\">none</span>  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"number\">85</span>行 将#注释符号去掉  </span><br><span class=\"line\"><span class=\"keyword\">view</span> <span class=\"keyword\">all</span>    included  <span class=\"number\">.1</span>                               <span class=\"number\">80</span>  </span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>(3)、启动net-snmp<br><code>service snmpd start</code><br>可能提示：Redirecting to /bin/systemctl start snmpd.service<br>解决方法：<code>/bin/systemctl start snmpd</code></p>\n</li>\n<li><p>(4)、测试net-snmp<br>snmpd 使用 tcp/udp 161 端口,验证snmpd 服务<br><code>lsof -i :161</code><br><img src=\"/images/install_cacti_on_linux_1.png\" alt><br>使用snmpwalk 命令验证</p>\n<figure class=\"highlight llvm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">snmpwalk -v <span class=\"number\">2</span><span class=\"keyword\">c</span> -<span class=\"keyword\">c</span> public <span class=\"number\">127.0</span>.<span class=\"number\">0.1</span> </span><br><span class=\"line\">-v是指版本<span class=\"punctuation\">,</span>-<span class=\"keyword\">c</span> 是指密钥，获取到系统信息则正常！</span><br><span class=\"line\">如果cacti搭建好后很久还是没出图，用这个命令试试看能否获取到数据。</span><br><span class=\"line\">正常情况下，执行完这个命令后会有很多数据出现！</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"3、安装cacti\"><a href=\"#3、安装cacti\" class=\"headerlink\" title=\"3、安装cacti\"></a>3、安装cacti</h3><ul>\n<li>(1)、安装net-snmp<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /tmp </span><br><span class=\"line\">wget http://www.cacti.net/downloads/cacti-0.8.8a.tar.gz </span><br><span class=\"line\">tar xzf cacti-0.8.8a.tar.gz </span><br><span class=\"line\">mv cacti-0.8.8a /var/www/cacti </span><br><span class=\"line\">cd /var/www/cacti</span><br></pre></td></tr></table></figure></li>\n<li><p>(2)、创建数据库<br><code>mysqladmin --user=root -p create cacti</code></p>\n</li>\n<li><p>(3)、导入数据库<br><code>mysql -uroot -p cacti &lt; cacti.sql</code><br>可能报错：ERROR 1067 (42000) at line 1847: Invalid default value for ‘status_fail_date’<br>原因：status_fail_date的datetime默认类型是不允许的<br>解决方法：</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">vim</span> /etc/my.<span class=\"keyword\">cnf</span></span><br><span class=\"line\">添加如下内容：</span><br><span class=\"line\">sql-<span class=\"keyword\">mode</span>=<span class=\"string\">&quot;ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&quot;</span></span><br><span class=\"line\">重启mysql服务：systemctl restart mysqld</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>(4)、创建数据库用户</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">shell&gt; mysql -uroot -p mysql </span><br><span class=\"line\">mysql&gt; <span class=\"keyword\">GRANT</span> <span class=\"keyword\">ALL</span> <span class=\"keyword\">ON</span> cacti.* <span class=\"keyword\">TO</span> cactiuser@localhost IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;Cacti@pwd001231&#x27;</span>; </span><br><span class=\"line\">mysql&gt; flush <span class=\"keyword\">privileges</span>; </span><br></pre></td></tr></table></figure>\n</li>\n<li><p>(5)、配置include/config.php</p>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$database_type = <span class=\"string\">&quot;mysql&quot;</span>; </span><br><span class=\"line\">$database_default = <span class=\"string\">&quot;cacti&quot;</span>; </span><br><span class=\"line\">$database_hostname = <span class=\"string\">&quot;localhost&quot;</span>; </span><br><span class=\"line\">$database_username = <span class=\"string\">&quot;cactiuser&quot;</span>; </span><br><span class=\"line\">$database_password = <span class=\"string\">&quot;Cacti@pwd001231&quot;</span>; </span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>打开注释掉的：<code>$url_path = &quot;/cacti/&quot;;</code></p>\n<ul>\n<li><p>(6)、配置include/global.php</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Default database settings*/</span> </span><br><span class=\"line\"><span class=\"variable\">$database_type</span> = <span class=\"string\">&quot;mysql&quot;</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_default</span> = <span class=\"string\">&quot;cacti&quot;</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_hostname</span> = <span class=\"string\">&quot;localhost&quot;</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_username</span> = <span class=\"string\">&quot;cactiuser&quot;</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_password</span> = <span class=\"string\">&quot;Cacti@pwd001231&quot;</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_port</span> = <span class=\"string\">&quot;3306&quot;</span>; </span><br><span class=\"line\"><span class=\"variable\">$database_ssl</span> = <span class=\"literal\">false</span>; </span><br></pre></td></tr></table></figure>\n</li>\n<li><p>(7)、设置目录权限</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useradd cactiuser </span><br><span class=\"line\"><span class=\"built_in\">chown</span> -R cactiuser rra/ <span class=\"built_in\">log</span>/ </span><br></pre></td></tr></table></figure>\n</li>\n<li><p>(8)、配置计划任务</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#crontab -e </span></span><br><span class=\"line\">*<span class=\"regexp\">/5 * * * * /u</span>sr<span class=\"regexp\">/bin/</span>php <span class=\"regexp\">/var/</span>www<span class=\"regexp\">/html/</span>cacti<span class=\"regexp\">/poller.php &gt; /</span>dev<span class=\"regexp\">/null 2&gt;&amp;1 /</span>/让系统每<span class=\"number\">5</span>分钟收集</span><br><span class=\"line\">service crond restart </span><br></pre></td></tr></table></figure>\n</li>\n<li><p>(9)、完成cacti的安装<br>注意关闭防火墙或者允许80端口，关闭selinux<br>1) 在浏览器中输入：<a href=\"http://监控服务器IP/cacti/\">http://监控服务器IP/cacti/</a><br>默认用户名：admin 密码：admin<br>2）设置cacti用到的命令路径<br>3) 更改密码<br>登陆成功户 next&gt;&gt;   next&gt;&gt;<br><img src=\"/images/install_cacti_on_linux_2.png\" alt><br><img src=\"/images/install_cacti_on_linux_3.png\" alt></p>\n</li>\n</ul>\n<p>参考地址：<a href=\"https://www.cnblogs.com/liuyansheng/p/6118535.html\">https://www.cnblogs.com/liuyansheng/p/6118535.html</a></p>\n"},{"title":"Linux下网络相关的命令","abbrlink":"network-command-on-linux","date":"2021-01-07T01:20:00.000Z","updated":"2021-01-07T01:20:00.000Z","_content":"## 1、检测IP/域名是否连通：\n```shell\nping -c 4 192.168.10.8  #指定ping的次数  -c times\nping -q -c 4 www.baidu.com  #只显示结果  -q\n```\n\n## 2、测试端口的连通性：\n```shell\ntelnet ip port  #如果未安装telnet，需执行yum install telnet进行安装\n```","source":"_posts/运维/Linux/Linux下网络相关的命令.md","raw":"---\ntitle: Linux下网络相关的命令\ntags: [网络]\ncategories: Linux\nabbrlink: 'network-command-on-linux'\ndate: 2021-01-07 09:20:00\nupdated: 2021-01-07 09:20:00\n---\n## 1、检测IP/域名是否连通：\n```shell\nping -c 4 192.168.10.8  #指定ping的次数  -c times\nping -q -c 4 www.baidu.com  #只显示结果  -q\n```\n\n## 2、测试端口的连通性：\n```shell\ntelnet ip port  #如果未安装telnet，需执行yum install telnet进行安装\n```","slug":"运维/Linux/Linux下网络相关的命令","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2w000c7oshg319l042o","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h2 id=\"1、检测IP-域名是否连通：\"><a href=\"#1、检测IP-域名是否连通：\" class=\"headerlink\" title=\"1、检测IP/域名是否连通：\"></a>1、检测IP/域名是否连通：</h2><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping -c 4 192.168.10.8  #指定ping的次数  -c times</span><br><span class=\"line\">ping -q -c 4 www.baidu.com  #只显示结果  -q</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"2、测试端口的连通性：\"><a href=\"#2、测试端口的连通性：\" class=\"headerlink\" title=\"2、测试端口的连通性：\"></a>2、测试端口的连通性：</h2><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">telnet ip port  #如果未安装telnet，需执行yum install telnet进行安装</span><br></pre></td></tr></tbody></table></figure>","excerpt":"","more":"<h2 id=\"1、检测IP-域名是否连通：\"><a href=\"#1、检测IP-域名是否连通：\" class=\"headerlink\" title=\"1、检测IP/域名是否连通：\"></a>1、检测IP/域名是否连通：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping -c 4 192.168.10.8  #指定ping的次数  -c times</span><br><span class=\"line\">ping -q -c 4 www.baidu.com  #只显示结果  -q</span><br></pre></td></tr></table></figure>\n<h2 id=\"2、测试端口的连通性：\"><a href=\"#2、测试端口的连通性：\" class=\"headerlink\" title=\"2、测试端口的连通性：\"></a>2、测试端口的连通性：</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">telnet ip port  #如果未安装telnet，需执行yum install telnet进行安装</span><br></pre></td></tr></table></figure>"},{"title":"Linux下安装nodejs","abbrlink":"linux-install-nodejs","date":"2019-10-11T12:04:51.000Z","updated":"2019-10-11T12:04:51.000Z","_content":"\n### 1. 下载nodejs\n```\nwget https://nodejs.org/dist/v8.11.4/node-v8.11.4-linux-x64.tar.xz\n```\n\n### 2. 解压nodejs\n```\ntar xvf node-v8.11.4-linux-x64.tar.xz #解压\nmv node-v8.11.4-linux-x64 node-v8.11.4 #改短名\n```\n\n### 3. 查看版本\n```\ncd /node-v8.11.4/bin && ls #进入目录并列出\n./node -v #查看node版本\nnode -v #无法获取，未配置\n```\n\n![](/images/linux_install_nodejs_1.png)\n\n### 4. 配置\n```\nln -s /node-v8.11.4/bin/node /usr/bin/node\nln -s /node-v8.11.4/bin/npm /usr/bin/npm\n```\n\n![](/images/linux_install_nodejs_2.png)\n\n### 5. 清理安装包\n```\nrm -rf node-v8.11.4-linux-x64.tar.xz\n```\n\n### 参考\nhttps://www.jianshu.com/p/8cdbe4f4b533\n","source":"_posts/运维/Linux/Linux下安装nodejs.md","raw":"---\ntitle: Linux下安装nodejs\ntags: [nodejs]\ncategories: Linux\nabbrlink: 'linux-install-nodejs'\ndate: 2019-10-11 20:04:51\nupdated: 2019-10-11 20:04:51\n---\n\n### 1. 下载nodejs\n```\nwget https://nodejs.org/dist/v8.11.4/node-v8.11.4-linux-x64.tar.xz\n```\n\n### 2. 解压nodejs\n```\ntar xvf node-v8.11.4-linux-x64.tar.xz #解压\nmv node-v8.11.4-linux-x64 node-v8.11.4 #改短名\n```\n\n### 3. 查看版本\n```\ncd /node-v8.11.4/bin && ls #进入目录并列出\n./node -v #查看node版本\nnode -v #无法获取，未配置\n```\n\n![](/images/linux_install_nodejs_1.png)\n\n### 4. 配置\n```\nln -s /node-v8.11.4/bin/node /usr/bin/node\nln -s /node-v8.11.4/bin/npm /usr/bin/npm\n```\n\n![](/images/linux_install_nodejs_2.png)\n\n### 5. 清理安装包\n```\nrm -rf node-v8.11.4-linux-x64.tar.xz\n```\n\n### 参考\nhttps://www.jianshu.com/p/8cdbe4f4b533\n","slug":"运维/Linux/Linux下安装nodejs","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2w100cboshg3gut6cmn","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-下载nodejs\"><a href=\"#1-下载nodejs\" class=\"headerlink\" title=\"1. 下载nodejs\"></a>1. 下载nodejs</h3><figure class=\"highlight apache\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">wget</span>&nbsp;https://nodejs.org/dist/v8.<span class=\"number\">11</span>.<span class=\"number\">4</span>/node-v8.<span class=\"number\">11</span>.<span class=\"number\">4</span>-linux-x64.tar.xz</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"2-解压nodejs\"><a href=\"#2-解压nodejs\" class=\"headerlink\" title=\"2. 解压nodejs\"></a>2. 解压nodejs</h3><figure class=\"highlight crmsh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xvf <span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>-linux-x64.tar.xz <span class=\"comment\">#解压</span></span><br><span class=\"line\">mv <span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>-linux-x64 <span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span> <span class=\"comment\">#改短名</span></span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"3-查看版本\"><a href=\"#3-查看版本\" class=\"headerlink\" title=\"3. 查看版本\"></a>3. 查看版本</h3><figure class=\"highlight crmsh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /<span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>/bin &amp;&amp; ls <span class=\"comment\">#进入目录并列出</span></span><br><span class=\"line\">./<span class=\"keyword\">node</span> <span class=\"title\">-v</span> <span class=\"comment\">#查看node版本</span></span><br><span class=\"line\"><span class=\"keyword\">node</span> <span class=\"title\">-v</span> <span class=\"comment\">#无法获取，未配置</span></span><br></pre></td></tr></tbody></table></figure>\n<p><img src=\"/images/linux_install_nodejs_1.png\" alt=\"\"></p>\n<h3 id=\"4-配置\"><a href=\"#4-配置\" class=\"headerlink\" title=\"4. 配置\"></a>4. 配置</h3><figure class=\"highlight crmsh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /<span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>/bin/<span class=\"keyword\">node</span> <span class=\"title\">/usr</span>/bin/<span class=\"keyword\">node</span></span><br><span class=\"line\"><span class=\"title\">ln</span> -s /<span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>/bin/npm /usr/bin/npm</span><br></pre></td></tr></tbody></table></figure>\n<p><img src=\"/images/linux_install_nodejs_2.png\" alt=\"\"></p>\n<h3 id=\"5-清理安装包\"><a href=\"#5-清理安装包\" class=\"headerlink\" title=\"5. 清理安装包\"></a>5. 清理安装包</h3><figure class=\"highlight crmsh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf <span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>-linux-x64.tar.xz</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><p><a href=\"https://www.jianshu.com/p/8cdbe4f4b533\">https://www.jianshu.com/p/8cdbe4f4b533</a></p>\n","excerpt":"","more":"<h3 id=\"1-下载nodejs\"><a href=\"#1-下载nodejs\" class=\"headerlink\" title=\"1. 下载nodejs\"></a>1. 下载nodejs</h3><figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">wget</span> https://nodejs.org/dist/v8.<span class=\"number\">11</span>.<span class=\"number\">4</span>/node-v8.<span class=\"number\">11</span>.<span class=\"number\">4</span>-linux-x64.tar.xz</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-解压nodejs\"><a href=\"#2-解压nodejs\" class=\"headerlink\" title=\"2. 解压nodejs\"></a>2. 解压nodejs</h3><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xvf <span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>-linux-x64.tar.xz <span class=\"comment\">#解压</span></span><br><span class=\"line\">mv <span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>-linux-x64 <span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span> <span class=\"comment\">#改短名</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"3-查看版本\"><a href=\"#3-查看版本\" class=\"headerlink\" title=\"3. 查看版本\"></a>3. 查看版本</h3><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /<span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>/bin &amp;&amp; ls <span class=\"comment\">#进入目录并列出</span></span><br><span class=\"line\">./<span class=\"keyword\">node</span> <span class=\"title\">-v</span> <span class=\"comment\">#查看node版本</span></span><br><span class=\"line\"><span class=\"keyword\">node</span> <span class=\"title\">-v</span> <span class=\"comment\">#无法获取，未配置</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/linux_install_nodejs_1.png\" alt></p>\n<h3 id=\"4-配置\"><a href=\"#4-配置\" class=\"headerlink\" title=\"4. 配置\"></a>4. 配置</h3><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /<span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>/bin/<span class=\"keyword\">node</span> <span class=\"title\">/usr</span>/bin/<span class=\"keyword\">node</span></span><br><span class=\"line\"><span class=\"title\">ln</span> -s /<span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>/bin/npm /usr/bin/npm</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/linux_install_nodejs_2.png\" alt></p>\n<h3 id=\"5-清理安装包\"><a href=\"#5-清理安装包\" class=\"headerlink\" title=\"5. 清理安装包\"></a>5. 清理安装包</h3><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rm -rf <span class=\"keyword\">node</span><span class=\"title\">-v8</span>.<span class=\"number\">11.4</span>-linux-x64.tar.xz</span><br></pre></td></tr></table></figure>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><p><a href=\"https://www.jianshu.com/p/8cdbe4f4b533\">https://www.jianshu.com/p/8cdbe4f4b533</a></p>\n"},{"title":"Linux中rz的使用","abbrlink":"rz-on-linux","date":"2019-07-02T11:20:00.000Z","updated":"2019-07-02T11:20:00.000Z","_content":"\n我们常常需要在客户端和服务器(windows和linux)之间互传文件，这就可以使用rz(sz)命令。\n\n1. 如果服务器不支持rz命令，需安装：\n    ``` bash\n        sudo yum -y install lrzsz\n    ``` \n\n2. 从客户端上传文件(可多选)到服务器：\n    ``` bash\n        sudo rz\n        sudo rz -be\n    ``` \n\n3. 从服务端发送文件到客户端：\n    ``` bash\n        sudo sz filename\n    ``` \n\n4. 卸载rz：\n    ``` bash\n        yum remove lrzsz\n    ``` ","source":"_posts/运维/Linux/Linux中rz的使用.md","raw":"---\ntitle: Linux中rz的使用\ntags: [rz/sz]\ncategories: Linux\nabbrlink: 'rz-on-linux'\ndate: 2019-07-02 19:20:00\nupdated: 2019-07-02 19:20:00\n---\n\n我们常常需要在客户端和服务器(windows和linux)之间互传文件，这就可以使用rz(sz)命令。\n\n1. 如果服务器不支持rz命令，需安装：\n    ``` bash\n        sudo yum -y install lrzsz\n    ``` \n\n2. 从客户端上传文件(可多选)到服务器：\n    ``` bash\n        sudo rz\n        sudo rz -be\n    ``` \n\n3. 从服务端发送文件到客户端：\n    ``` bash\n        sudo sz filename\n    ``` \n\n4. 卸载rz：\n    ``` bash\n        yum remove lrzsz\n    ``` ","slug":"运维/Linux/Linux中rz的使用","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2w200cdoshgdycmgumj","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>我们常常需要在客户端和服务器(windows和linux)之间互传文件，这就可以使用rz(sz)命令。</p>\n<ol>\n<li><p>如果服务器不支持rz命令，需安装：</p>\n <figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum -y install lrzsz</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>从客户端上传文件(可多选)到服务器：</p>\n <figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo rz</span><br><span class=\"line\">sudo rz -be</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>从服务端发送文件到客户端：</p>\n <figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sz filename</span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>卸载rz：</p>\n <figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum remove lrzsz</span><br></pre></td></tr></tbody></table></figure></li>\n</ol>\n","excerpt":"","more":"<p>我们常常需要在客户端和服务器(windows和linux)之间互传文件，这就可以使用rz(sz)命令。</p>\n<ol>\n<li><p>如果服务器不支持rz命令，需安装：</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum -y install lrzsz</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>从客户端上传文件(可多选)到服务器：</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo rz</span><br><span class=\"line\">sudo rz -be</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>从服务端发送文件到客户端：</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo sz filename</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>卸载rz：</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum remove lrzsz</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"Linux中\">\"和\">>\"的区别","abbrlink":"linux-add-content","date":"2023-03-17T03:31:00.000Z","updated":"2023-03-17T03:31:00.000Z","_content":"在Linux中，`>`符号用于将输出重定向到文件中，并会覆盖文件中原有的内容。\n\n如果要将输出追加到文件中而不是覆盖原有内容，可以使用`>>`符号。\n\n下面是两个符号的用法示例：\n\n - `>`符号：覆盖原有内容。\n```shell\necho \"Hello, World!\" > output.txt\n```\n这将创建一个名为`output.txt`的文件，并将文本`Hello, World!`写入文件。如果该文件已存在，那么原有内容将被覆盖。\n\n - `>>`符号：追加内容。\n```shell\necho \"Hello, Again!\" >> output.txt\n```\n这会将文本`Hello, Again!`追加到`output.txt`文件的末尾，而不会覆盖原有内容。\n\n例如：后台运行指定程序，并将输出保存到指定文件里\n```shell\nnohup php artisan xx xx > nohup.log 2>&1 &\n```","source":"_posts/运维/Linux/Linux中追加内容.md","raw":"---\ntitle: Linux中\">\"和\">>\"的区别\ntags:\n  - Linux\ncategories:\n  - Linux\nabbrlink: 'linux-add-content'\ndate: 2023-03-17 11:31:00\nupdated: 2023-03-17 11:31:00\n---\n在Linux中，`>`符号用于将输出重定向到文件中，并会覆盖文件中原有的内容。\n\n如果要将输出追加到文件中而不是覆盖原有内容，可以使用`>>`符号。\n\n下面是两个符号的用法示例：\n\n - `>`符号：覆盖原有内容。\n```shell\necho \"Hello, World!\" > output.txt\n```\n这将创建一个名为`output.txt`的文件，并将文本`Hello, World!`写入文件。如果该文件已存在，那么原有内容将被覆盖。\n\n - `>>`符号：追加内容。\n```shell\necho \"Hello, Again!\" >> output.txt\n```\n这会将文本`Hello, Again!`追加到`output.txt`文件的末尾，而不会覆盖原有内容。\n\n例如：后台运行指定程序，并将输出保存到指定文件里\n```shell\nnohup php artisan xx xx > nohup.log 2>&1 &\n```","slug":"运维/Linux/Linux中追加内容","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2w300choshgh5xc5fue","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>在Linux中，<code>&gt;</code>符号用于将输出重定向到文件中，并会覆盖文件中原有的内容。</p>\n<p>如果要将输出追加到文件中而不是覆盖原有内容，可以使用<code>&gt;&gt;</code>符号。</p>\n<p>下面是两个符号的用法示例：</p>\n<ul>\n<li><p><code>&gt;</code>符号：覆盖原有内容。</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo \"Hello, World!\" &gt; output.txt</span><br></pre></td></tr></tbody></table></figure>\n<p>这将创建一个名为<code>output.txt</code>的文件，并将文本<code>Hello, World!</code>写入文件。如果该文件已存在，那么原有内容将被覆盖。</p>\n</li>\n<li><p><code>&gt;&gt;</code>符号：追加内容。</p>\n<figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo \"Hello, Again!\" &gt;&gt; output.txt</span><br></pre></td></tr></tbody></table></figure>\n<p>这会将文本<code>Hello, Again!</code>追加到<code>output.txt</code>文件的末尾，而不会覆盖原有内容。</p>\n</li>\n</ul>\n<p>例如：后台运行指定程序，并将输出保存到指定文件里<br></p><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup php artisan xx xx &gt; nohup.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></tbody></table></figure><p></p>\n","excerpt":"","more":"<p>在Linux中，<code>&gt;</code>符号用于将输出重定向到文件中，并会覆盖文件中原有的内容。</p>\n<p>如果要将输出追加到文件中而不是覆盖原有内容，可以使用<code>&gt;&gt;</code>符号。</p>\n<p>下面是两个符号的用法示例：</p>\n<ul>\n<li><p><code>&gt;</code>符号：覆盖原有内容。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &quot;Hello, World!&quot; &gt; output.txt</span><br></pre></td></tr></table></figure>\n<p>这将创建一个名为<code>output.txt</code>的文件，并将文本<code>Hello, World!</code>写入文件。如果该文件已存在，那么原有内容将被覆盖。</p>\n</li>\n<li><p><code>&gt;&gt;</code>符号：追加内容。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &quot;Hello, Again!&quot; &gt;&gt; output.txt</span><br></pre></td></tr></table></figure>\n<p>这会将文本<code>Hello, Again!</code>追加到<code>output.txt</code>文件的末尾，而不会覆盖原有内容。</p>\n</li>\n</ul>\n<p>例如：后台运行指定程序，并将输出保存到指定文件里<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nohup php artisan xx xx &gt; nohup.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"Linux命令行中的快捷键","abbrlink":"linux-short-cut-keys","date":"2024-10-17T05:38:00.000Z","updated":"2024-10-17T05:38:00.000Z","_content":"Linux 命令行中的快捷键非常丰富，可以大大提高程序员的工作效率。下面将详细介绍一些常用的快捷键，并分类说明：\n\n#### 移动光标\n - Ctrl+A: 将光标移动到行首\n - Ctrl+E: 将光标移动到行尾\n - Ctrl+B: 光标向左移动一个字符\n - Ctrl+F: 光标向右移动一个字符\n - Ctrl+L: 清屏\n - Ctrl+K: 删除光标到行尾的内容\n - Ctrl+U: 删除光标到行首的内容\n - Alt+F: 光标向前移动一个单词\n - Alt+B: 光标向后移动一个单词\n\n#### 删除字符\n - Backspace: 删除光标前一个字符\n - Delete: 删除光标后一个字符\n - Ctrl+W: 删除光标前一个单词\n    \n#### 历史命令\n - Ctrl+P: 向上翻找历史命令\n - Ctrl+N: 向下翻找历史命令\n - Ctrl+R: 搜索历史命令（输入部分命令，然后按Ctrl+R，再输入搜索内容）\n\n#### 其他常用快捷键\n - Tab: 自动补全命令或文件名\n - Ctrl+D: 退出当前终端\n - Ctrl+C: 中断当前正在执行的命令\n - Ctrl+Z: 将当前进程挂起至后台\n\n#### 命令行编辑\n - Ctrl+T: 交换光标前两个字符\n - Ctrl+Y: 粘贴之前删除的文本\n - Alt+D: 删除光标后的一个单词，并将其复制到剪贴板\n\n#### 示例\n假设你输入了一条很长的命令，但发现中间有个地方拼错了。我们可以：\n - Ctrl+A 移动到行首\n - Ctrl+E 移动到行尾\n - Ctrl+B 或 Ctrl+F 将光标移动到错误的位置\n - 使用删除键或 Ctrl+W 删除错误的字符\n - 输入正确的字符\n - Ctrl+P 或 Ctrl+N 翻找历史命令，找到之前输入过的类似命令，进行修改\n小技巧\n利用Tab键：Tab键可以自动补全命令、文件名或路径，大大节省输入时间。\n结合Ctrl+R搜索：通过Ctrl+R搜索历史命令，可以快速找到之前执行过的命令。\n\n#### 注意：\n - 快捷键的具体效果可能因终端配置的不同而有所差异，但大多数快捷键都是通用的。\n - 有些快捷键可能被系统或应用程序重新定义。\n - 通过熟练掌握这些快捷键，可以大大提高在Linux命令行下的工作效率。","source":"_posts/运维/Linux/Linux命令行中的快捷键.md","raw":"---\ntitle: Linux命令行中的快捷键\ntags:\n  - Linux\ncategories:\n  - Linux\nabbrlink: linux-short-cut-keys\ndate: 2024-10-17 13:38:00\nupdated: 2024-10-17 13:38:00\n---\nLinux 命令行中的快捷键非常丰富，可以大大提高程序员的工作效率。下面将详细介绍一些常用的快捷键，并分类说明：\n\n#### 移动光标\n - Ctrl+A: 将光标移动到行首\n - Ctrl+E: 将光标移动到行尾\n - Ctrl+B: 光标向左移动一个字符\n - Ctrl+F: 光标向右移动一个字符\n - Ctrl+L: 清屏\n - Ctrl+K: 删除光标到行尾的内容\n - Ctrl+U: 删除光标到行首的内容\n - Alt+F: 光标向前移动一个单词\n - Alt+B: 光标向后移动一个单词\n\n#### 删除字符\n - Backspace: 删除光标前一个字符\n - Delete: 删除光标后一个字符\n - Ctrl+W: 删除光标前一个单词\n    \n#### 历史命令\n - Ctrl+P: 向上翻找历史命令\n - Ctrl+N: 向下翻找历史命令\n - Ctrl+R: 搜索历史命令（输入部分命令，然后按Ctrl+R，再输入搜索内容）\n\n#### 其他常用快捷键\n - Tab: 自动补全命令或文件名\n - Ctrl+D: 退出当前终端\n - Ctrl+C: 中断当前正在执行的命令\n - Ctrl+Z: 将当前进程挂起至后台\n\n#### 命令行编辑\n - Ctrl+T: 交换光标前两个字符\n - Ctrl+Y: 粘贴之前删除的文本\n - Alt+D: 删除光标后的一个单词，并将其复制到剪贴板\n\n#### 示例\n假设你输入了一条很长的命令，但发现中间有个地方拼错了。我们可以：\n - Ctrl+A 移动到行首\n - Ctrl+E 移动到行尾\n - Ctrl+B 或 Ctrl+F 将光标移动到错误的位置\n - 使用删除键或 Ctrl+W 删除错误的字符\n - 输入正确的字符\n - Ctrl+P 或 Ctrl+N 翻找历史命令，找到之前输入过的类似命令，进行修改\n小技巧\n利用Tab键：Tab键可以自动补全命令、文件名或路径，大大节省输入时间。\n结合Ctrl+R搜索：通过Ctrl+R搜索历史命令，可以快速找到之前执行过的命令。\n\n#### 注意：\n - 快捷键的具体效果可能因终端配置的不同而有所差异，但大多数快捷键都是通用的。\n - 有些快捷键可能被系统或应用程序重新定义。\n - 通过熟练掌握这些快捷键，可以大大提高在Linux命令行下的工作效率。","slug":"运维/Linux/Linux命令行中的快捷键","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2w300cjoshggtavfxt4","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>Linux 命令行中的快捷键非常丰富，可以大大提高程序员的工作效率。下面将详细介绍一些常用的快捷键，并分类说明：</p>\n<h4 id=\"移动光标\"><a href=\"#移动光标\" class=\"headerlink\" title=\"移动光标\"></a>移动光标</h4><ul>\n<li>Ctrl+A: 将光标移动到行首</li>\n<li>Ctrl+E: 将光标移动到行尾</li>\n<li>Ctrl+B: 光标向左移动一个字符</li>\n<li>Ctrl+F: 光标向右移动一个字符</li>\n<li>Ctrl+L: 清屏</li>\n<li>Ctrl+K: 删除光标到行尾的内容</li>\n<li>Ctrl+U: 删除光标到行首的内容</li>\n<li>Alt+F: 光标向前移动一个单词</li>\n<li>Alt+B: 光标向后移动一个单词</li>\n</ul>\n<h4 id=\"删除字符\"><a href=\"#删除字符\" class=\"headerlink\" title=\"删除字符\"></a>删除字符</h4><ul>\n<li>Backspace: 删除光标前一个字符</li>\n<li>Delete: 删除光标后一个字符</li>\n<li>Ctrl+W: 删除光标前一个单词</li>\n</ul>\n<h4 id=\"历史命令\"><a href=\"#历史命令\" class=\"headerlink\" title=\"历史命令\"></a>历史命令</h4><ul>\n<li>Ctrl+P: 向上翻找历史命令</li>\n<li>Ctrl+N: 向下翻找历史命令</li>\n<li>Ctrl+R: 搜索历史命令（输入部分命令，然后按Ctrl+R，再输入搜索内容）</li>\n</ul>\n<h4 id=\"其他常用快捷键\"><a href=\"#其他常用快捷键\" class=\"headerlink\" title=\"其他常用快捷键\"></a>其他常用快捷键</h4><ul>\n<li>Tab: 自动补全命令或文件名</li>\n<li>Ctrl+D: 退出当前终端</li>\n<li>Ctrl+C: 中断当前正在执行的命令</li>\n<li>Ctrl+Z: 将当前进程挂起至后台</li>\n</ul>\n<h4 id=\"命令行编辑\"><a href=\"#命令行编辑\" class=\"headerlink\" title=\"命令行编辑\"></a>命令行编辑</h4><ul>\n<li>Ctrl+T: 交换光标前两个字符</li>\n<li>Ctrl+Y: 粘贴之前删除的文本</li>\n<li>Alt+D: 删除光标后的一个单词，并将其复制到剪贴板</li>\n</ul>\n<h4 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h4><p>假设你输入了一条很长的命令，但发现中间有个地方拼错了。我们可以：</p>\n<ul>\n<li>Ctrl+A 移动到行首</li>\n<li>Ctrl+E 移动到行尾</li>\n<li>Ctrl+B 或 Ctrl+F 将光标移动到错误的位置</li>\n<li>使用删除键或 Ctrl+W 删除错误的字符</li>\n<li>输入正确的字符</li>\n<li>Ctrl+P 或 Ctrl+N 翻找历史命令，找到之前输入过的类似命令，进行修改<br>小技巧<br>利用Tab键：Tab键可以自动补全命令、文件名或路径，大大节省输入时间。<br>结合Ctrl+R搜索：通过Ctrl+R搜索历史命令，可以快速找到之前执行过的命令。</li>\n</ul>\n<h4 id=\"注意：\"><a href=\"#注意：\" class=\"headerlink\" title=\"注意：\"></a>注意：</h4><ul>\n<li>快捷键的具体效果可能因终端配置的不同而有所差异，但大多数快捷键都是通用的。</li>\n<li>有些快捷键可能被系统或应用程序重新定义。</li>\n<li>通过熟练掌握这些快捷键，可以大大提高在Linux命令行下的工作效率。</li>\n</ul>\n","excerpt":"","more":"<p>Linux 命令行中的快捷键非常丰富，可以大大提高程序员的工作效率。下面将详细介绍一些常用的快捷键，并分类说明：</p>\n<h4 id=\"移动光标\"><a href=\"#移动光标\" class=\"headerlink\" title=\"移动光标\"></a>移动光标</h4><ul>\n<li>Ctrl+A: 将光标移动到行首</li>\n<li>Ctrl+E: 将光标移动到行尾</li>\n<li>Ctrl+B: 光标向左移动一个字符</li>\n<li>Ctrl+F: 光标向右移动一个字符</li>\n<li>Ctrl+L: 清屏</li>\n<li>Ctrl+K: 删除光标到行尾的内容</li>\n<li>Ctrl+U: 删除光标到行首的内容</li>\n<li>Alt+F: 光标向前移动一个单词</li>\n<li>Alt+B: 光标向后移动一个单词</li>\n</ul>\n<h4 id=\"删除字符\"><a href=\"#删除字符\" class=\"headerlink\" title=\"删除字符\"></a>删除字符</h4><ul>\n<li>Backspace: 删除光标前一个字符</li>\n<li>Delete: 删除光标后一个字符</li>\n<li>Ctrl+W: 删除光标前一个单词</li>\n</ul>\n<h4 id=\"历史命令\"><a href=\"#历史命令\" class=\"headerlink\" title=\"历史命令\"></a>历史命令</h4><ul>\n<li>Ctrl+P: 向上翻找历史命令</li>\n<li>Ctrl+N: 向下翻找历史命令</li>\n<li>Ctrl+R: 搜索历史命令（输入部分命令，然后按Ctrl+R，再输入搜索内容）</li>\n</ul>\n<h4 id=\"其他常用快捷键\"><a href=\"#其他常用快捷键\" class=\"headerlink\" title=\"其他常用快捷键\"></a>其他常用快捷键</h4><ul>\n<li>Tab: 自动补全命令或文件名</li>\n<li>Ctrl+D: 退出当前终端</li>\n<li>Ctrl+C: 中断当前正在执行的命令</li>\n<li>Ctrl+Z: 将当前进程挂起至后台</li>\n</ul>\n<h4 id=\"命令行编辑\"><a href=\"#命令行编辑\" class=\"headerlink\" title=\"命令行编辑\"></a>命令行编辑</h4><ul>\n<li>Ctrl+T: 交换光标前两个字符</li>\n<li>Ctrl+Y: 粘贴之前删除的文本</li>\n<li>Alt+D: 删除光标后的一个单词，并将其复制到剪贴板</li>\n</ul>\n<h4 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h4><p>假设你输入了一条很长的命令，但发现中间有个地方拼错了。我们可以：</p>\n<ul>\n<li>Ctrl+A 移动到行首</li>\n<li>Ctrl+E 移动到行尾</li>\n<li>Ctrl+B 或 Ctrl+F 将光标移动到错误的位置</li>\n<li>使用删除键或 Ctrl+W 删除错误的字符</li>\n<li>输入正确的字符</li>\n<li>Ctrl+P 或 Ctrl+N 翻找历史命令，找到之前输入过的类似命令，进行修改<br>小技巧<br>利用Tab键：Tab键可以自动补全命令、文件名或路径，大大节省输入时间。<br>结合Ctrl+R搜索：通过Ctrl+R搜索历史命令，可以快速找到之前执行过的命令。</li>\n</ul>\n<h4 id=\"注意：\"><a href=\"#注意：\" class=\"headerlink\" title=\"注意：\"></a>注意：</h4><ul>\n<li>快捷键的具体效果可能因终端配置的不同而有所差异，但大多数快捷键都是通用的。</li>\n<li>有些快捷键可能被系统或应用程序重新定义。</li>\n<li>通过熟练掌握这些快捷键，可以大大提高在Linux命令行下的工作效率。</li>\n</ul>\n"},{"title":"Linux如何排查cpu过高的原因","abbrlink":"linux-high-cpu-troubleshoot","date":"2023-10-22T08:29:00.000Z","updated":"2023-10-22T08:29:00.000Z","_content":"要排查 Linux 上 CPU 过高的原因，可以按照以下步骤进行：\n\n1. 使用系统监控工具：使用像 `top`、`htop` 或 `glances` 等系统监控工具来查看当前 CPU 使用情况。这将给我们一个快速的概述，了解哪些进程或服务占用了大量 CPU 资源。\n\n2. 检查排名靠前的进程：在系统监控工具中，查看哪些进程占用了大量的 CPU 资源。注意关注 CPU 使用率高的进程和其对应的 PID（进程 ID）。\n\n3. 查看进程详细信息：使用命令 `ps -p <PID> -f`，将 `<PID>` 替换为排名靠前的进程的 PID，可以查看该进程的详细信息。特别关注 CPU 使用率、内存占用情况以及进程运行时间等。\n\n4. 日志分析：查看系统日志（如 `/var/log/syslog` 或 `/var/log/messages`），寻找与 CPU 占用率高相关联的错误或警告消息。这可能有助于定位问题。\n\n5. 检查进程调度和优先级：使用命令 `ps -eo pid,ppid,cmd,%cpu,%mem,nice,pri,stat`，查看进程的调度和优先级信息。确保没有调度问题导致某些进程占用过多的 CPU 资源。\n\n6. 检查定时任务和后台进程：某些定时任务或后台进程可能会导致 CPU 负载过高。使用命令 `crontab -l` 检查定时任务，使用 `service --status-all` 或 `systemctl list-unit-files --type=service` 查看系统中运行的服务。\n\n7. CPU 分析工具：如果上述方法没有找到问题根源，可以尝试使用 CPU 分析工具进行深入调查。例如，`perf`、`sysstat`、`strace`、`oprofile` 等工具可以提供更详细的性能数据和进程活动追踪。\n\n通过以上步骤，我们应该能够定位到导致 CPU 使用率过高的具体进程、服务或问题。根据问题的不同，采取相应的措施，如优化代码、调整配置、更新软件版本等，以解决 CPU 过高的问题。","source":"_posts/运维/Linux/Linux如何排查cpu过高的原因.md","raw":"---\ntitle: Linux如何排查cpu过高的原因\ntags:\n  - Linux\n  - 运维\n  - cpu\ncategories:\n  - Linux\n  - 运维\nabbrlink: linux-high-cpu-troubleshoot\ndate: 2023-10-22 16:29:00\nupdated: 2023-10-22 16:29:00\n---\n要排查 Linux 上 CPU 过高的原因，可以按照以下步骤进行：\n\n1. 使用系统监控工具：使用像 `top`、`htop` 或 `glances` 等系统监控工具来查看当前 CPU 使用情况。这将给我们一个快速的概述，了解哪些进程或服务占用了大量 CPU 资源。\n\n2. 检查排名靠前的进程：在系统监控工具中，查看哪些进程占用了大量的 CPU 资源。注意关注 CPU 使用率高的进程和其对应的 PID（进程 ID）。\n\n3. 查看进程详细信息：使用命令 `ps -p <PID> -f`，将 `<PID>` 替换为排名靠前的进程的 PID，可以查看该进程的详细信息。特别关注 CPU 使用率、内存占用情况以及进程运行时间等。\n\n4. 日志分析：查看系统日志（如 `/var/log/syslog` 或 `/var/log/messages`），寻找与 CPU 占用率高相关联的错误或警告消息。这可能有助于定位问题。\n\n5. 检查进程调度和优先级：使用命令 `ps -eo pid,ppid,cmd,%cpu,%mem,nice,pri,stat`，查看进程的调度和优先级信息。确保没有调度问题导致某些进程占用过多的 CPU 资源。\n\n6. 检查定时任务和后台进程：某些定时任务或后台进程可能会导致 CPU 负载过高。使用命令 `crontab -l` 检查定时任务，使用 `service --status-all` 或 `systemctl list-unit-files --type=service` 查看系统中运行的服务。\n\n7. CPU 分析工具：如果上述方法没有找到问题根源，可以尝试使用 CPU 分析工具进行深入调查。例如，`perf`、`sysstat`、`strace`、`oprofile` 等工具可以提供更详细的性能数据和进程活动追踪。\n\n通过以上步骤，我们应该能够定位到导致 CPU 使用率过高的具体进程、服务或问题。根据问题的不同，采取相应的措施，如优化代码、调整配置、更新软件版本等，以解决 CPU 过高的问题。","slug":"运维/Linux/Linux如何排查cpu过高的原因","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2w400cooshg4yjgd3f4","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>要排查 Linux 上 CPU 过高的原因，可以按照以下步骤进行：</p>\n<ol>\n<li><p>使用系统监控工具：使用像 <code>top</code>、<code>htop</code> 或 <code>glances</code> 等系统监控工具来查看当前 CPU 使用情况。这将给我们一个快速的概述，了解哪些进程或服务占用了大量 CPU 资源。</p>\n</li>\n<li><p>检查排名靠前的进程：在系统监控工具中，查看哪些进程占用了大量的 CPU 资源。注意关注 CPU 使用率高的进程和其对应的 PID（进程 ID）。</p>\n</li>\n<li><p>查看进程详细信息：使用命令 <code>ps -p &lt;PID&gt; -f</code>，将 <code>&lt;PID&gt;</code> 替换为排名靠前的进程的 PID，可以查看该进程的详细信息。特别关注 CPU 使用率、内存占用情况以及进程运行时间等。</p>\n</li>\n<li><p>日志分析：查看系统日志（如 <code>/var/log/syslog</code> 或 <code>/var/log/messages</code>），寻找与 CPU 占用率高相关联的错误或警告消息。这可能有助于定位问题。</p>\n</li>\n<li><p>检查进程调度和优先级：使用命令 <code>ps -eo pid,ppid,cmd,%cpu,%mem,nice,pri,stat</code>，查看进程的调度和优先级信息。确保没有调度问题导致某些进程占用过多的 CPU 资源。</p>\n</li>\n<li><p>检查定时任务和后台进程：某些定时任务或后台进程可能会导致 CPU 负载过高。使用命令 <code>crontab -l</code> 检查定时任务，使用 <code>service --status-all</code> 或 <code>systemctl list-unit-files --type=service</code> 查看系统中运行的服务。</p>\n</li>\n<li><p>CPU 分析工具：如果上述方法没有找到问题根源，可以尝试使用 CPU 分析工具进行深入调查。例如，<code>perf</code>、<code>sysstat</code>、<code>strace</code>、<code>oprofile</code> 等工具可以提供更详细的性能数据和进程活动追踪。</p>\n</li>\n</ol>\n<p>通过以上步骤，我们应该能够定位到导致 CPU 使用率过高的具体进程、服务或问题。根据问题的不同，采取相应的措施，如优化代码、调整配置、更新软件版本等，以解决 CPU 过高的问题。</p>\n","excerpt":"","more":"<p>要排查 Linux 上 CPU 过高的原因，可以按照以下步骤进行：</p>\n<ol>\n<li><p>使用系统监控工具：使用像 <code>top</code>、<code>htop</code> 或 <code>glances</code> 等系统监控工具来查看当前 CPU 使用情况。这将给我们一个快速的概述，了解哪些进程或服务占用了大量 CPU 资源。</p>\n</li>\n<li><p>检查排名靠前的进程：在系统监控工具中，查看哪些进程占用了大量的 CPU 资源。注意关注 CPU 使用率高的进程和其对应的 PID（进程 ID）。</p>\n</li>\n<li><p>查看进程详细信息：使用命令 <code>ps -p &lt;PID&gt; -f</code>，将 <code>&lt;PID&gt;</code> 替换为排名靠前的进程的 PID，可以查看该进程的详细信息。特别关注 CPU 使用率、内存占用情况以及进程运行时间等。</p>\n</li>\n<li><p>日志分析：查看系统日志（如 <code>/var/log/syslog</code> 或 <code>/var/log/messages</code>），寻找与 CPU 占用率高相关联的错误或警告消息。这可能有助于定位问题。</p>\n</li>\n<li><p>检查进程调度和优先级：使用命令 <code>ps -eo pid,ppid,cmd,%cpu,%mem,nice,pri,stat</code>，查看进程的调度和优先级信息。确保没有调度问题导致某些进程占用过多的 CPU 资源。</p>\n</li>\n<li><p>检查定时任务和后台进程：某些定时任务或后台进程可能会导致 CPU 负载过高。使用命令 <code>crontab -l</code> 检查定时任务，使用 <code>service --status-all</code> 或 <code>systemctl list-unit-files --type=service</code> 查看系统中运行的服务。</p>\n</li>\n<li><p>CPU 分析工具：如果上述方法没有找到问题根源，可以尝试使用 CPU 分析工具进行深入调查。例如，<code>perf</code>、<code>sysstat</code>、<code>strace</code>、<code>oprofile</code> 等工具可以提供更详细的性能数据和进程活动追踪。</p>\n</li>\n</ol>\n<p>通过以上步骤，我们应该能够定位到导致 CPU 使用率过高的具体进程、服务或问题。根据问题的不同，采取相应的措施，如优化代码、调整配置、更新软件版本等，以解决 CPU 过高的问题。</p>\n"},{"title":"Linux常用命令","abbrlink":"linux-common-commands","date":"2018-06-04T03:15:00.000Z","updated":"2022-06-06T11:35:00.000Z","_content":"本人编程多年，一直对Linux操作不熟练，主要原因是命令不熟悉，为方便记忆，现罗列一些常用的命令：\n\n### 操作文件\n - 创建文件夹：` mkdir dir`\n - 删除文件夹：` rm -rf dir`   -r向下递归，-f强制删除\n - 创建文件：` touch a.txt`\n - 删除文件：` rm -f /var/log/a.txt`\n - 追加内容到文件：` echo sssss >> a.txt`\n - 插入内容：`vi text.txt =》按i =》插入内容 =》按Esc =》:wq`\n - 查看文件的行数：`wc -l xx.txt`\n - 查看文件里有多少个word：`wc -l xx.txt`\n - 顺序查看指定文件的内容：`cat xx.php`\n - 倒序查看指定文件的内容：`tac xx.log`\n\n### 系统操作\n - 修改密码\n  1. 选择要修改密码的用户名，以root用户为例\n   `passwd root`\n  2. 输入2次一样的新密码，当提示更新成功即可。\n   ![](/images/linux_command_1.png)\n\n - 查看系统环境\n    ```shell\n    [root@VM_0_7_centos ~]# cat /etc/redhat-release \n    CentOS Linux release 7.6.1810 (Core) \n    [root@VM_0_7_centos ~]# uname -a\n    Linux VM_0_7_centos 3.10.0-957.27.2.el7.x86_64 #1 SMP Mon Jul 29 17:46:05 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\n    ```\n    从上述结果可以看出：系统为CentOS 7.6 内核为3.10.0-957.27.2.el7.x86_64\n    \n### 日志操作\n - 实时查看日志：`tail -f xx.log`\n - 实时查看日志最后100行的内容： `tail -f -n 100 xx.log`\n - 查询最后100行的内容：`tail -n 100 xx.log`\n - 查询100行之后的所有内容：`tail -n +100 xx.log`\n - 查看文件的前10行：`head -n 10 xx.log`\n - 查询除最后100行外的内容：`head -n -100 xx.log`\n - 根据关键字查询日志：`cat -n xx.log |grep \"charge\"`   可以得到关键字日志的行号和内容\n - 根据关键字查询日志并获取最后5行：`grep 'charge' xx.log |tail -n 5`\n - 根据关键字查询日志内容：`grep 'charge' xx.log`   不返回行号，如果为空，则说明日志中无此关键字\n  - 如果日志太多，可分页查看：`cat -n xx.log |grep 'charge' | more`  按空格键进行翻页\n  - 如果日志太大，也可以只把关键字部分保存到文件中，提取下来，命令如下：\n       `cat -n xx.log |grep 'charge' > aa.txt`\n       然后下载下来：`sz aa.txt`\n       最后删除文件：`rm -f aa.txt `\n    \n    \n\n### 其他命令\n - 清空当前界面信息：`clear` 或者 Ctrl+L\n - 显示当前时间：`date`\n - 显示当前路径：`pwd`\n - 查看历史命令：`history`\n - Tab键：自动补齐，按两下是查询相同前缀的目录或文件\n - more的辅助操作：按空格键进行翻页\n - less的辅助操作：按空格键进行翻页   [up]向上滚动一行   [down]或者回车先后滚动一行   Q：退出","source":"_posts/运维/Linux/Linux常用命令.md","raw":"---\ntitle: Linux常用命令\ntags: [Linux]\ncategories: Linux\nabbrlink: 'linux-common-commands'\ndate: 2018-06-04 11:15:00\nupdated: 2022-06-06 19:35:00\n---\n本人编程多年，一直对Linux操作不熟练，主要原因是命令不熟悉，为方便记忆，现罗列一些常用的命令：\n\n### 操作文件\n - 创建文件夹：` mkdir dir`\n - 删除文件夹：` rm -rf dir`   -r向下递归，-f强制删除\n - 创建文件：` touch a.txt`\n - 删除文件：` rm -f /var/log/a.txt`\n - 追加内容到文件：` echo sssss >> a.txt`\n - 插入内容：`vi text.txt =》按i =》插入内容 =》按Esc =》:wq`\n - 查看文件的行数：`wc -l xx.txt`\n - 查看文件里有多少个word：`wc -l xx.txt`\n - 顺序查看指定文件的内容：`cat xx.php`\n - 倒序查看指定文件的内容：`tac xx.log`\n\n### 系统操作\n - 修改密码\n  1. 选择要修改密码的用户名，以root用户为例\n   `passwd root`\n  2. 输入2次一样的新密码，当提示更新成功即可。\n   ![](/images/linux_command_1.png)\n\n - 查看系统环境\n    ```shell\n    [root@VM_0_7_centos ~]# cat /etc/redhat-release \n    CentOS Linux release 7.6.1810 (Core) \n    [root@VM_0_7_centos ~]# uname -a\n    Linux VM_0_7_centos 3.10.0-957.27.2.el7.x86_64 #1 SMP Mon Jul 29 17:46:05 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\n    ```\n    从上述结果可以看出：系统为CentOS 7.6 内核为3.10.0-957.27.2.el7.x86_64\n    \n### 日志操作\n - 实时查看日志：`tail -f xx.log`\n - 实时查看日志最后100行的内容： `tail -f -n 100 xx.log`\n - 查询最后100行的内容：`tail -n 100 xx.log`\n - 查询100行之后的所有内容：`tail -n +100 xx.log`\n - 查看文件的前10行：`head -n 10 xx.log`\n - 查询除最后100行外的内容：`head -n -100 xx.log`\n - 根据关键字查询日志：`cat -n xx.log |grep \"charge\"`   可以得到关键字日志的行号和内容\n - 根据关键字查询日志并获取最后5行：`grep 'charge' xx.log |tail -n 5`\n - 根据关键字查询日志内容：`grep 'charge' xx.log`   不返回行号，如果为空，则说明日志中无此关键字\n  - 如果日志太多，可分页查看：`cat -n xx.log |grep 'charge' | more`  按空格键进行翻页\n  - 如果日志太大，也可以只把关键字部分保存到文件中，提取下来，命令如下：\n       `cat -n xx.log |grep 'charge' > aa.txt`\n       然后下载下来：`sz aa.txt`\n       最后删除文件：`rm -f aa.txt `\n    \n    \n\n### 其他命令\n - 清空当前界面信息：`clear` 或者 Ctrl+L\n - 显示当前时间：`date`\n - 显示当前路径：`pwd`\n - 查看历史命令：`history`\n - Tab键：自动补齐，按两下是查询相同前缀的目录或文件\n - more的辅助操作：按空格键进行翻页\n - less的辅助操作：按空格键进行翻页   [up]向上滚动一行   [down]或者回车先后滚动一行   Q：退出","slug":"运维/Linux/Linux常用命令","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2w400cqoshg2u8z2z67","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>本人编程多年，一直对Linux操作不熟练，主要原因是命令不熟悉，为方便记忆，现罗列一些常用的命令：</p>\n<h3 id=\"操作文件\"><a href=\"#操作文件\" class=\"headerlink\" title=\"操作文件\"></a>操作文件</h3><ul>\n<li>创建文件夹：<code>mkdir dir</code></li>\n<li>删除文件夹：<code>rm -rf dir</code>   -r向下递归，-f强制删除</li>\n<li>创建文件：<code>touch a.txt</code></li>\n<li>删除文件：<code>rm -f /var/log/a.txt</code></li>\n<li>追加内容到文件：<code>echo sssss &gt;&gt; a.txt</code></li>\n<li>插入内容：<code>vi text.txt =》按i =》插入内容 =》按Esc =》:wq</code></li>\n<li>查看文件的行数：<code>wc -l xx.txt</code></li>\n<li>查看文件里有多少个word：<code>wc -l xx.txt</code></li>\n<li>顺序查看指定文件的内容：<code>cat xx.php</code></li>\n<li>倒序查看指定文件的内容：<code>tac xx.log</code></li>\n</ul>\n<h3 id=\"系统操作\"><a href=\"#系统操作\" class=\"headerlink\" title=\"系统操作\"></a>系统操作</h3><ul>\n<li><p>修改密码</p>\n<ol>\n<li>选择要修改密码的用户名，以root用户为例<br><code>passwd root</code></li>\n<li>输入2次一样的新密码，当提示更新成功即可。<br><img src=\"/images/linux_command_1.png\" alt=\"\"></li>\n</ol>\n</li>\n<li><p>查看系统环境</p>\n <figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@VM_0_7_centos ~]# cat /etc/redhat-release </span><br><span class=\"line\">CentOS Linux release 7.6.1810 (Core) </span><br><span class=\"line\">[root@VM_0_7_centos ~]# uname -a</span><br><span class=\"line\">Linux VM_0_7_centos 3.10.0-957.27.2.el7.x86_64 #1 SMP Mon Jul 29 17:46:05 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></tbody></table></figure>\n<p> 从上述结果可以看出：系统为CentOS 7.6 内核为3.10.0-957.27.2.el7.x86_64</p>\n</li>\n</ul>\n<h3 id=\"日志操作\"><a href=\"#日志操作\" class=\"headerlink\" title=\"日志操作\"></a>日志操作</h3><ul>\n<li>实时查看日志：<code>tail -f xx.log</code></li>\n<li>实时查看日志最后100行的内容： <code>tail -f -n 100 xx.log</code></li>\n<li>查询最后100行的内容：<code>tail -n 100 xx.log</code></li>\n<li>查询100行之后的所有内容：<code>tail -n +100 xx.log</code></li>\n<li>查看文件的前10行：<code>head -n 10 xx.log</code></li>\n<li>查询除最后100行外的内容：<code>head -n -100 xx.log</code></li>\n<li>根据关键字查询日志：<code>cat -n xx.log |grep \"charge\"</code>   可以得到关键字日志的行号和内容</li>\n<li>根据关键字查询日志并获取最后5行：<code>grep 'charge' xx.log |tail -n 5</code></li>\n<li>根据关键字查询日志内容：<code>grep 'charge' xx.log</code>   不返回行号，如果为空，则说明日志中无此关键字<ul>\n<li>如果日志太多，可分页查看：<code>cat -n xx.log |grep 'charge' | more</code>  按空格键进行翻页</li>\n<li>如果日志太大，也可以只把关键字部分保存到文件中，提取下来，命令如下：<br>  <code>cat -n xx.log |grep 'charge' &gt; aa.txt</code><br>  然后下载下来：<code>sz aa.txt</code><br>  最后删除文件：<code>rm -f aa.txt</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"其他命令\"><a href=\"#其他命令\" class=\"headerlink\" title=\"其他命令\"></a>其他命令</h3><ul>\n<li>清空当前界面信息：<code>clear</code> 或者 Ctrl+L</li>\n<li>显示当前时间：<code>date</code></li>\n<li>显示当前路径：<code>pwd</code></li>\n<li>查看历史命令：<code>history</code></li>\n<li>Tab键：自动补齐，按两下是查询相同前缀的目录或文件</li>\n<li>more的辅助操作：按空格键进行翻页</li>\n<li>less的辅助操作：按空格键进行翻页   [up]向上滚动一行   [down]或者回车先后滚动一行   Q：退出</li>\n</ul>\n","excerpt":"","more":"<p>本人编程多年，一直对Linux操作不熟练，主要原因是命令不熟悉，为方便记忆，现罗列一些常用的命令：</p>\n<h3 id=\"操作文件\"><a href=\"#操作文件\" class=\"headerlink\" title=\"操作文件\"></a>操作文件</h3><ul>\n<li>创建文件夹：<code>mkdir dir</code></li>\n<li>删除文件夹：<code>rm -rf dir</code>   -r向下递归，-f强制删除</li>\n<li>创建文件：<code>touch a.txt</code></li>\n<li>删除文件：<code>rm -f /var/log/a.txt</code></li>\n<li>追加内容到文件：<code>echo sssss &gt;&gt; a.txt</code></li>\n<li>插入内容：<code>vi text.txt =》按i =》插入内容 =》按Esc =》:wq</code></li>\n<li>查看文件的行数：<code>wc -l xx.txt</code></li>\n<li>查看文件里有多少个word：<code>wc -l xx.txt</code></li>\n<li>顺序查看指定文件的内容：<code>cat xx.php</code></li>\n<li>倒序查看指定文件的内容：<code>tac xx.log</code></li>\n</ul>\n<h3 id=\"系统操作\"><a href=\"#系统操作\" class=\"headerlink\" title=\"系统操作\"></a>系统操作</h3><ul>\n<li><p>修改密码</p>\n<ol>\n<li>选择要修改密码的用户名，以root用户为例<br><code>passwd root</code></li>\n<li>输入2次一样的新密码，当提示更新成功即可。<br><img src=\"/images/linux_command_1.png\" alt></li>\n</ol>\n</li>\n<li><p>查看系统环境</p>\n <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@VM_0_7_centos ~]# cat /etc/redhat-release </span><br><span class=\"line\">CentOS Linux release 7.6.1810 (Core) </span><br><span class=\"line\">[root@VM_0_7_centos ~]# uname -a</span><br><span class=\"line\">Linux VM_0_7_centos 3.10.0-957.27.2.el7.x86_64 #1 SMP Mon Jul 29 17:46:05 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure>\n<p> 从上述结果可以看出：系统为CentOS 7.6 内核为3.10.0-957.27.2.el7.x86_64</p>\n</li>\n</ul>\n<h3 id=\"日志操作\"><a href=\"#日志操作\" class=\"headerlink\" title=\"日志操作\"></a>日志操作</h3><ul>\n<li>实时查看日志：<code>tail -f xx.log</code></li>\n<li>实时查看日志最后100行的内容： <code>tail -f -n 100 xx.log</code></li>\n<li>查询最后100行的内容：<code>tail -n 100 xx.log</code></li>\n<li>查询100行之后的所有内容：<code>tail -n +100 xx.log</code></li>\n<li>查看文件的前10行：<code>head -n 10 xx.log</code></li>\n<li>查询除最后100行外的内容：<code>head -n -100 xx.log</code></li>\n<li>根据关键字查询日志：<code>cat -n xx.log |grep &quot;charge&quot;</code>   可以得到关键字日志的行号和内容</li>\n<li>根据关键字查询日志并获取最后5行：<code>grep &#39;charge&#39; xx.log |tail -n 5</code></li>\n<li>根据关键字查询日志内容：<code>grep &#39;charge&#39; xx.log</code>   不返回行号，如果为空，则说明日志中无此关键字<ul>\n<li>如果日志太多，可分页查看：<code>cat -n xx.log |grep &#39;charge&#39; | more</code>  按空格键进行翻页</li>\n<li>如果日志太大，也可以只把关键字部分保存到文件中，提取下来，命令如下：<br>  <code>cat -n xx.log |grep &#39;charge&#39; &gt; aa.txt</code><br>  然后下载下来：<code>sz aa.txt</code><br>  最后删除文件：<code>rm -f aa.txt</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"其他命令\"><a href=\"#其他命令\" class=\"headerlink\" title=\"其他命令\"></a>其他命令</h3><ul>\n<li>清空当前界面信息：<code>clear</code> 或者 Ctrl+L</li>\n<li>显示当前时间：<code>date</code></li>\n<li>显示当前路径：<code>pwd</code></li>\n<li>查看历史命令：<code>history</code></li>\n<li>Tab键：自动补齐，按两下是查询相同前缀的目录或文件</li>\n<li>more的辅助操作：按空格键进行翻页</li>\n<li>less的辅助操作：按空格键进行翻页   [up]向上滚动一行   [down]或者回车先后滚动一行   Q：退出</li>\n</ul>\n"},{"title":"Linux搜索关键词前后几行","abbrlink":"linux-grep-few-lines","date":"2023-06-21T02:05:00.000Z","updated":"2023-06-21T02:05:00.000Z","_content":"Linux 命令行中的快捷键非常丰富，可以大大提高程序员的工作效率。下面将详细介绍一些常用的快捷键，并分类说明：\n\n在工作中，经常需要在linux中根据关键词搜索日志，并获取前后几行；其实，`grep` 命令可以搭配 `-C` 或 `-A` 或 `-B` 选项来获取匹配结果前后的行。具体如下：\n\n- 使用 `-C` 选项可以获取匹配行上下若干行。例如：\n  ```sh\n  grep -C 2 \"error\" logfile.txt\n  ```\n  该命令会查找 `logfile.txt` 文件中包含 `error` 关键字的行，并输出上下两行。`-C 2` 表示输出匹配行的上下两行。\n\n- 使用 `-A` 选项可以获取匹配行上方若干行和匹配行本身。例如：\n  ```sh\n  grep -A 2 \"error\" logfile.txt\n  ```\n  该命令会查找 `logfile.txt` 文件中包含 `error` 关键字的行，并输出该行及其上面的两行。\n\n- 使用 `-B` 选项可以获取匹配行下方若干行和匹配行本身。例如：\n  ```sh\n  grep -B 2 \"error\" logfile.txt\n  ```\n  该命令会查找 `logfile.txt` 文件中包含 `error` 关键字的行，并输出该行及其下面的两行。\n\n如果想要同时使用 `-A` 和 `-B` 选项，可以使用 `-C` 选项，例如：\n```sh\ngrep -C 2 \"error\" logfile.txt\n```\n这个命令会输出含有 `error` 关键字的行及其上下各两行内容。","source":"_posts/运维/Linux/Linux搜索关键词前后几行.md","raw":"---\ntitle: Linux搜索关键词前后几行\ntags:\n  - Linux\n  - grep\ncategories:\n  - Linux\nabbrlink: 'linux-grep-few-lines'\ndate: 2023-06-21 10:05:00\nupdated: 2023-06-21 10:05:00\n---\nLinux 命令行中的快捷键非常丰富，可以大大提高程序员的工作效率。下面将详细介绍一些常用的快捷键，并分类说明：\n\n在工作中，经常需要在linux中根据关键词搜索日志，并获取前后几行；其实，`grep` 命令可以搭配 `-C` 或 `-A` 或 `-B` 选项来获取匹配结果前后的行。具体如下：\n\n- 使用 `-C` 选项可以获取匹配行上下若干行。例如：\n  ```sh\n  grep -C 2 \"error\" logfile.txt\n  ```\n  该命令会查找 `logfile.txt` 文件中包含 `error` 关键字的行，并输出上下两行。`-C 2` 表示输出匹配行的上下两行。\n\n- 使用 `-A` 选项可以获取匹配行上方若干行和匹配行本身。例如：\n  ```sh\n  grep -A 2 \"error\" logfile.txt\n  ```\n  该命令会查找 `logfile.txt` 文件中包含 `error` 关键字的行，并输出该行及其上面的两行。\n\n- 使用 `-B` 选项可以获取匹配行下方若干行和匹配行本身。例如：\n  ```sh\n  grep -B 2 \"error\" logfile.txt\n  ```\n  该命令会查找 `logfile.txt` 文件中包含 `error` 关键字的行，并输出该行及其下面的两行。\n\n如果想要同时使用 `-A` 和 `-B` 选项，可以使用 `-C` 选项，例如：\n```sh\ngrep -C 2 \"error\" logfile.txt\n```\n这个命令会输出含有 `error` 关键字的行及其上下各两行内容。","slug":"运维/Linux/Linux搜索关键词前后几行","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2w500cvoshga67jeefq","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p>Linux 命令行中的快捷键非常丰富，可以大大提高程序员的工作效率。下面将详细介绍一些常用的快捷键，并分类说明：</p>\n<p>在工作中，经常需要在linux中根据关键词搜索日志，并获取前后几行；其实，<code>grep</code> 命令可以搭配 <code>-C</code> 或 <code>-A</code> 或 <code>-B</code> 选项来获取匹配结果前后的行。具体如下：</p>\n<ul>\n<li><p>使用 <code>-C</code> 选项可以获取匹配行上下若干行。例如：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -C 2 <span class=\"string\">\"error\"</span> logfile.txt</span><br></pre></td></tr></tbody></table></figure>\n<p>该命令会查找 <code>logfile.txt</code> 文件中包含 <code>error</code> 关键字的行，并输出上下两行。<code>-C 2</code> 表示输出匹配行的上下两行。</p>\n</li>\n<li><p>使用 <code>-A</code> 选项可以获取匹配行上方若干行和匹配行本身。例如：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -A 2 <span class=\"string\">\"error\"</span> logfile.txt</span><br></pre></td></tr></tbody></table></figure>\n<p>该命令会查找 <code>logfile.txt</code> 文件中包含 <code>error</code> 关键字的行，并输出该行及其上面的两行。</p>\n</li>\n<li><p>使用 <code>-B</code> 选项可以获取匹配行下方若干行和匹配行本身。例如：</p>\n<figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -B 2 <span class=\"string\">\"error\"</span> logfile.txt</span><br></pre></td></tr></tbody></table></figure>\n<p>该命令会查找 <code>logfile.txt</code> 文件中包含 <code>error</code> 关键字的行，并输出该行及其下面的两行。</p>\n</li>\n</ul>\n<p>如果想要同时使用 <code>-A</code> 和 <code>-B</code> 选项，可以使用 <code>-C</code> 选项，例如：<br></p><figure class=\"highlight sh\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -C 2 <span class=\"string\">\"error\"</span> logfile.txt</span><br></pre></td></tr></tbody></table></figure><br>这个命令会输出含有 <code>error</code> 关键字的行及其上下各两行内容。<p></p>\n","excerpt":"","more":"<p>Linux 命令行中的快捷键非常丰富，可以大大提高程序员的工作效率。下面将详细介绍一些常用的快捷键，并分类说明：</p>\n<p>在工作中，经常需要在linux中根据关键词搜索日志，并获取前后几行；其实，<code>grep</code> 命令可以搭配 <code>-C</code> 或 <code>-A</code> 或 <code>-B</code> 选项来获取匹配结果前后的行。具体如下：</p>\n<ul>\n<li><p>使用 <code>-C</code> 选项可以获取匹配行上下若干行。例如：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -C 2 <span class=\"string\">&quot;error&quot;</span> logfile.txt</span><br></pre></td></tr></table></figure>\n<p>该命令会查找 <code>logfile.txt</code> 文件中包含 <code>error</code> 关键字的行，并输出上下两行。<code>-C 2</code> 表示输出匹配行的上下两行。</p>\n</li>\n<li><p>使用 <code>-A</code> 选项可以获取匹配行上方若干行和匹配行本身。例如：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -A 2 <span class=\"string\">&quot;error&quot;</span> logfile.txt</span><br></pre></td></tr></table></figure>\n<p>该命令会查找 <code>logfile.txt</code> 文件中包含 <code>error</code> 关键字的行，并输出该行及其上面的两行。</p>\n</li>\n<li><p>使用 <code>-B</code> 选项可以获取匹配行下方若干行和匹配行本身。例如：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -B 2 <span class=\"string\">&quot;error&quot;</span> logfile.txt</span><br></pre></td></tr></table></figure>\n<p>该命令会查找 <code>logfile.txt</code> 文件中包含 <code>error</code> 关键字的行，并输出该行及其下面的两行。</p>\n</li>\n</ul>\n<p>如果想要同时使用 <code>-A</code> 和 <code>-B</code> 选项，可以使用 <code>-C</code> 选项，例如：<br><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -C 2 <span class=\"string\">&quot;error&quot;</span> logfile.txt</span><br></pre></td></tr></table></figure><br>这个命令会输出含有 <code>error</code> 关键字的行及其上下各两行内容。</p>\n"},{"title":"SystemD","abbr link":"linux-systemd","abbrlink":"2b4a","date":"2024-05-22T04:16:00.000Z","updated":"2024-05-22T04:16:00.000Z","_content":"\n# SystemD\n\n## 简介\n\nSystemD 是 Linux 的系统管理器，它的主要接口是 systemctl（即用户执行的命令）。\n\n通过 systemctl 接口，可以启动/停止“单元”（unit），最常用的单元是“服务单元”（service），即系统守护程序。其他单元还有套接字单元（network socket）、定时器单元（timer）等等。\n\n服务单元会有一个服务描述文件，里面设置启动该服务需要知道的信息，比如 sshd 的服务描述是“在多用户模式下，等待网络可用后，运行 SSH 服务器。” 修改服务描述文件以后，必须重新启动服务，修改才会生效。\n\n## 服务描述文件\n\n下面是一个服务描述文件的示例。它有很多设置，但是常用的就是那么几个。\n\n```bash\n[Unit]\nDescription=OpenBSD Secure Shell server\nDocumentation=man:sshd(8) man:sshd_config(5)\nAfter=network.target auditd.service\nConditionPathExists=!/etc/ssh/sshd_not_to_be_run\n\n[Service]\nEnvironmentFile=-/etc/default/ssh\nExecStartPre=/usr/sbin/sshd -t\nExecStart=/usr/sbin/sshd -D $SSHD_OPTS\nExecReload=/usr/sbin/sshd -t\nExecReload=/bin/kill -HUP $MAINPID\nKillMode=process\nRestart=on-failure\nRestartPreventExitStatus=255\nType=notify\nRuntimeDirectory=sshd\nRuntimeDirectoryMode=0755\n\n[Install]\nWantedBy=multi-user.target\nAlias=sshd.service\n```\n\n网上有一些[描述文件生成器](https://mysystemd.talos.sh/)，可以使用。\n\n系统的单元描述文件，一般放在目录`/etc/systemd/system`。用户的单元描述文件放在目录`/etc/systemd/user`。命令`systemctl status xxx.service`会显示单元描述文件的位置。\n\n\n\n\n\n","source":"_posts/运维/Linux/SystemD.md","raw":"---\ntitle: SystemD\ntags:\n  - Linux\n  - SystemD\ncategories:\n  - SystemD\nabbr link: linux-systemd\nabbrlink: 2b4a\ndate: 2024-05-22 12:16:00\nupdated: 2024-05-22 12:16:00\n---\n\n# SystemD\n\n## 简介\n\nSystemD 是 Linux 的系统管理器，它的主要接口是 systemctl（即用户执行的命令）。\n\n通过 systemctl 接口，可以启动/停止“单元”（unit），最常用的单元是“服务单元”（service），即系统守护程序。其他单元还有套接字单元（network socket）、定时器单元（timer）等等。\n\n服务单元会有一个服务描述文件，里面设置启动该服务需要知道的信息，比如 sshd 的服务描述是“在多用户模式下，等待网络可用后，运行 SSH 服务器。” 修改服务描述文件以后，必须重新启动服务，修改才会生效。\n\n## 服务描述文件\n\n下面是一个服务描述文件的示例。它有很多设置，但是常用的就是那么几个。\n\n```bash\n[Unit]\nDescription=OpenBSD Secure Shell server\nDocumentation=man:sshd(8) man:sshd_config(5)\nAfter=network.target auditd.service\nConditionPathExists=!/etc/ssh/sshd_not_to_be_run\n\n[Service]\nEnvironmentFile=-/etc/default/ssh\nExecStartPre=/usr/sbin/sshd -t\nExecStart=/usr/sbin/sshd -D $SSHD_OPTS\nExecReload=/usr/sbin/sshd -t\nExecReload=/bin/kill -HUP $MAINPID\nKillMode=process\nRestart=on-failure\nRestartPreventExitStatus=255\nType=notify\nRuntimeDirectory=sshd\nRuntimeDirectoryMode=0755\n\n[Install]\nWantedBy=multi-user.target\nAlias=sshd.service\n```\n\n网上有一些[描述文件生成器](https://mysystemd.talos.sh/)，可以使用。\n\n系统的单元描述文件，一般放在目录`/etc/systemd/system`。用户的单元描述文件放在目录`/etc/systemd/user`。命令`systemctl status xxx.service`会显示单元描述文件的位置。\n\n\n\n\n\n","slug":"运维/Linux/SystemD","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2w600cxoshg7fog4a87","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"SystemD\"><a href=\"#SystemD\" class=\"headerlink\" title=\"SystemD\"></a>SystemD</h1><h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>SystemD 是 Linux 的系统管理器，它的主要接口是 systemctl（即用户执行的命令）。</p>\n<p>通过 systemctl 接口，可以启动/停止“单元”（unit），最常用的单元是“服务单元”（service），即系统守护程序。其他单元还有套接字单元（network socket）、定时器单元（timer）等等。</p>\n<p>服务单元会有一个服务描述文件，里面设置启动该服务需要知道的信息，比如 sshd 的服务描述是“在多用户模式下，等待网络可用后，运行 SSH 服务器。” 修改服务描述文件以后，必须重新启动服务，修改才会生效。</p>\n<h2 id=\"服务描述文件\"><a href=\"#服务描述文件\" class=\"headerlink\" title=\"服务描述文件\"></a>服务描述文件</h2><p>下面是一个服务描述文件的示例。它有很多设置，但是常用的就是那么几个。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=OpenBSD Secure Shell server</span><br><span class=\"line\">Documentation=man:sshd(8) man:sshd_config(5)</span><br><span class=\"line\">After=network.target auditd.service</span><br><span class=\"line\">ConditionPathExists=!/etc/ssh/sshd_not_to_be_run</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">EnvironmentFile=-/etc/default/ssh</span><br><span class=\"line\">ExecStartPre=/usr/sbin/sshd -t</span><br><span class=\"line\">ExecStart=/usr/sbin/sshd -D <span class=\"variable\">$SSHD_OPTS</span></span><br><span class=\"line\">ExecReload=/usr/sbin/sshd -t</span><br><span class=\"line\">ExecReload=/bin/kill -HUP <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\">KillMode=process</span><br><span class=\"line\">Restart=on-failure</span><br><span class=\"line\">RestartPreventExitStatus=255</span><br><span class=\"line\">Type=notify</span><br><span class=\"line\">RuntimeDirectory=sshd</span><br><span class=\"line\">RuntimeDirectoryMode=0755</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\">Alias=sshd.service</span><br></pre></td></tr></tbody></table></figure>\n<p>网上有一些<a href=\"https://mysystemd.talos.sh/\">描述文件生成器</a>，可以使用。</p>\n<p>系统的单元描述文件，一般放在目录<code>/etc/systemd/system</code>。用户的单元描述文件放在目录<code>/etc/systemd/user</code>。命令<code>systemctl status xxx.service</code>会显示单元描述文件的位置。</p>\n","excerpt":"","more":"<h1 id=\"SystemD\"><a href=\"#SystemD\" class=\"headerlink\" title=\"SystemD\"></a>SystemD</h1><h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>SystemD 是 Linux 的系统管理器，它的主要接口是 systemctl（即用户执行的命令）。</p>\n<p>通过 systemctl 接口，可以启动/停止“单元”（unit），最常用的单元是“服务单元”（service），即系统守护程序。其他单元还有套接字单元（network socket）、定时器单元（timer）等等。</p>\n<p>服务单元会有一个服务描述文件，里面设置启动该服务需要知道的信息，比如 sshd 的服务描述是“在多用户模式下，等待网络可用后，运行 SSH 服务器。” 修改服务描述文件以后，必须重新启动服务，修改才会生效。</p>\n<h2 id=\"服务描述文件\"><a href=\"#服务描述文件\" class=\"headerlink\" title=\"服务描述文件\"></a>服务描述文件</h2><p>下面是一个服务描述文件的示例。它有很多设置，但是常用的就是那么几个。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=OpenBSD Secure Shell server</span><br><span class=\"line\">Documentation=man:sshd(8) man:sshd_config(5)</span><br><span class=\"line\">After=network.target auditd.service</span><br><span class=\"line\">ConditionPathExists=!/etc/ssh/sshd_not_to_be_run</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">EnvironmentFile=-/etc/default/ssh</span><br><span class=\"line\">ExecStartPre=/usr/sbin/sshd -t</span><br><span class=\"line\">ExecStart=/usr/sbin/sshd -D <span class=\"variable\">$SSHD_OPTS</span></span><br><span class=\"line\">ExecReload=/usr/sbin/sshd -t</span><br><span class=\"line\">ExecReload=/bin/kill -HUP <span class=\"variable\">$MAINPID</span></span><br><span class=\"line\">KillMode=process</span><br><span class=\"line\">Restart=on-failure</span><br><span class=\"line\">RestartPreventExitStatus=255</span><br><span class=\"line\">Type=notify</span><br><span class=\"line\">RuntimeDirectory=sshd</span><br><span class=\"line\">RuntimeDirectoryMode=0755</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br><span class=\"line\">Alias=sshd.service</span><br></pre></td></tr></table></figure>\n<p>网上有一些<a href=\"https://mysystemd.talos.sh/\">描述文件生成器</a>，可以使用。</p>\n<p>系统的单元描述文件，一般放在目录<code>/etc/systemd/system</code>。用户的单元描述文件放在目录<code>/etc/systemd/user</code>。命令<code>systemctl status xxx.service</code>会显示单元描述文件的位置。</p>\n"},{"title":"centos7安装mysql5.0版本教程","abbrlink":"install-mysql-on-linux","date":"2019-10-11T16:05:36.000Z","updated":"2019-10-11T16:05:36.000Z","_content":"\n### 1. 下载mysql bundle.tar包\n上传  mysql bundle.tar包到服务器\n```shell\n解压  tar -xvf mysql-5.7.27-1.el7.x86_64.rpm-bundle.tar\n```\n\n### 2. 按顺序逐个安装rpm\n```shell\nrpm -qa|grep mariadb\nrpm -e mariadb-libs-5.5.35-3.el7.x86_64 --nodeps\nrpm - ivh mysql-community-common-\nrpm - ivh mysql-community-libs-      \nrpm - ivh mysql-community-client-  \nrpm - ivh mysql-community-server-   \nrpm - ivh mysql-community-devel-\n```\n\n### 3. 启动&配置\n```shell\n# 启动\nsystemctl  start mysqld\n# 关闭\nsystemctl  stop mysqld\n# 开机启动\nsystemctl enable mysqld\nsystemctl daemon-reload\n# 查看运行状态\nsystemctl  status mysqld\n# 看到绿色的running代表已经启动成功，然后mysql在5.6之后的版本都会默认生成一个默认密码，是root用户的。\n# 查看默认设置的密码\ngrep 'temporary password' /var/log/mysqld.log\n```\n\n### 4. 进入mysql\n执行完如下命令之后输入默认密码\n```shell\nmysql -u root -p\n```\n\nMySQL 5调整密码验证规则：\n```shell\nmysql> set global validate_password_policy=0;\nmysql> set global validate_password_length=1;\n```\n\n重新设置密码\n```shell\nALTER USER  user() identified by \"123456\";\n```\n\n授权 root 远程连接\n```shell\nuse mysql;\n```\n\n修改连接权限，执行：\n```shell \nupdate user set host='%' where user ='root';\n```\n\n执行刷新权限：\n```shell \nflush privileges;\n```","source":"_posts/运维/Linux/centos7安装mysql5.0版本教程.md","raw":"---\ntitle: centos7安装mysql5.0版本教程\ntags: [mysql]\ncategories: [Linux]\nabbrlink: 'install-mysql-on-linux'\ndate: 2019-10-12 00:05:36\nupdated: 2019-10-12 00:05:36\n---\n\n### 1. 下载mysql bundle.tar包\n上传  mysql bundle.tar包到服务器\n```shell\n解压  tar -xvf mysql-5.7.27-1.el7.x86_64.rpm-bundle.tar\n```\n\n### 2. 按顺序逐个安装rpm\n```shell\nrpm -qa|grep mariadb\nrpm -e mariadb-libs-5.5.35-3.el7.x86_64 --nodeps\nrpm - ivh mysql-community-common-\nrpm - ivh mysql-community-libs-      \nrpm - ivh mysql-community-client-  \nrpm - ivh mysql-community-server-   \nrpm - ivh mysql-community-devel-\n```\n\n### 3. 启动&配置\n```shell\n# 启动\nsystemctl  start mysqld\n# 关闭\nsystemctl  stop mysqld\n# 开机启动\nsystemctl enable mysqld\nsystemctl daemon-reload\n# 查看运行状态\nsystemctl  status mysqld\n# 看到绿色的running代表已经启动成功，然后mysql在5.6之后的版本都会默认生成一个默认密码，是root用户的。\n# 查看默认设置的密码\ngrep 'temporary password' /var/log/mysqld.log\n```\n\n### 4. 进入mysql\n执行完如下命令之后输入默认密码\n```shell\nmysql -u root -p\n```\n\nMySQL 5调整密码验证规则：\n```shell\nmysql> set global validate_password_policy=0;\nmysql> set global validate_password_length=1;\n```\n\n重新设置密码\n```shell\nALTER USER  user() identified by \"123456\";\n```\n\n授权 root 远程连接\n```shell\nuse mysql;\n```\n\n修改连接权限，执行：\n```shell \nupdate user set host='%' where user ='root';\n```\n\n执行刷新权限：\n```shell \nflush privileges;\n```","slug":"运维/Linux/centos7安装mysql5.0版本教程","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2xd00lgoshg0j2dfnbu","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"1-下载mysql-bundle-tar包\"><a href=\"#1-下载mysql-bundle-tar包\" class=\"headerlink\" title=\"1. 下载mysql bundle.tar包\"></a>1. 下载mysql bundle.tar包</h3><p>上传  mysql bundle.tar包到服务器<br></p><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">解压  tar -xvf mysql-5.7.27-1.el7.x86_64.rpm-bundle.tar</span><br></pre></td></tr></tbody></table></figure><p></p>\n<h3 id=\"2-按顺序逐个安装rpm\"><a href=\"#2-按顺序逐个安装rpm\" class=\"headerlink\" title=\"2. 按顺序逐个安装rpm\"></a>2. 按顺序逐个安装rpm</h3><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa|grep mariadb</span><br><span class=\"line\">rpm -e mariadb-libs-5.5.35-3.el7.x86_64 --nodeps</span><br><span class=\"line\">rpm - ivh mysql-community-common-</span><br><span class=\"line\">rpm - ivh mysql-community-libs-      </span><br><span class=\"line\">rpm - ivh mysql-community-client-  </span><br><span class=\"line\">rpm - ivh mysql-community-server-   </span><br><span class=\"line\">rpm - ivh mysql-community-devel-</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"3-启动-amp-配置\"><a href=\"#3-启动-amp-配置\" class=\"headerlink\" title=\"3. 启动&amp;配置\"></a>3. 启动&amp;配置</h3><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动</span></span><br><span class=\"line\">systemctl  start mysqld</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">关闭</span></span><br><span class=\"line\">systemctl  stop mysqld</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">开机启动</span></span><br><span class=\"line\">systemctl enable mysqld</span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看运行状态</span></span><br><span class=\"line\">systemctl  status mysqld</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">看到绿色的running代表已经启动成功，然后mysql在5.6之后的版本都会默认生成一个默认密码，是root用户的。</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看默认设置的密码</span></span><br><span class=\"line\">grep 'temporary password' /var/log/mysqld.log</span><br></pre></td></tr></tbody></table></figure>\n<h3 id=\"4-进入mysql\"><a href=\"#4-进入mysql\" class=\"headerlink\" title=\"4. 进入mysql\"></a>4. 进入mysql</h3><p>执行完如下命令之后输入默认密码<br></p><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -u root -p</span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>MySQL 5调整密码验证规则：<br></p><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">mysql&gt; </span><span class=\"language-bash\"><span class=\"built_in\">set</span> global validate_password_policy=0;</span></span><br><span class=\"line\"><span class=\"meta prompt_\">mysql&gt; </span><span class=\"language-bash\"><span class=\"built_in\">set</span> global validate_password_length=1;</span></span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>重新设置密码<br></p><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER USER  user() identified by \"123456\";</span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>授权 root 远程连接<br></p><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use mysql;</span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>修改连接权限，执行：<br></p><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update user set host='%' where user ='root';</span><br></pre></td></tr></tbody></table></figure><p></p>\n<p>执行刷新权限：<br></p><figure class=\"highlight shell\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flush privileges;</span><br></pre></td></tr></tbody></table></figure><p></p>\n","excerpt":"","more":"<h3 id=\"1-下载mysql-bundle-tar包\"><a href=\"#1-下载mysql-bundle-tar包\" class=\"headerlink\" title=\"1. 下载mysql bundle.tar包\"></a>1. 下载mysql bundle.tar包</h3><p>上传  mysql bundle.tar包到服务器<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">解压  tar -xvf mysql-5.7.27-1.el7.x86_64.rpm-bundle.tar</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"2-按顺序逐个安装rpm\"><a href=\"#2-按顺序逐个安装rpm\" class=\"headerlink\" title=\"2. 按顺序逐个安装rpm\"></a>2. 按顺序逐个安装rpm</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa|grep mariadb</span><br><span class=\"line\">rpm -e mariadb-libs-5.5.35-3.el7.x86_64 --nodeps</span><br><span class=\"line\">rpm - ivh mysql-community-common-</span><br><span class=\"line\">rpm - ivh mysql-community-libs-      </span><br><span class=\"line\">rpm - ivh mysql-community-client-  </span><br><span class=\"line\">rpm - ivh mysql-community-server-   </span><br><span class=\"line\">rpm - ivh mysql-community-devel-</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-启动-amp-配置\"><a href=\"#3-启动-amp-配置\" class=\"headerlink\" title=\"3. 启动&amp;配置\"></a>3. 启动&amp;配置</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">启动</span></span><br><span class=\"line\">systemctl  start mysqld</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">关闭</span></span><br><span class=\"line\">systemctl  stop mysqld</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">开机启动</span></span><br><span class=\"line\">systemctl enable mysqld</span><br><span class=\"line\">systemctl daemon-reload</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看运行状态</span></span><br><span class=\"line\">systemctl  status mysqld</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">看到绿色的running代表已经启动成功，然后mysql在5.6之后的版本都会默认生成一个默认密码，是root用户的。</span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">查看默认设置的密码</span></span><br><span class=\"line\">grep &#x27;temporary password&#x27; /var/log/mysqld.log</span><br></pre></td></tr></table></figure>\n<h3 id=\"4-进入mysql\"><a href=\"#4-进入mysql\" class=\"headerlink\" title=\"4. 进入mysql\"></a>4. 进入mysql</h3><p>执行完如下命令之后输入默认密码<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -u root -p</span><br></pre></td></tr></table></figure></p>\n<p>MySQL 5调整密码验证规则：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">mysql&gt; </span><span class=\"language-bash\"><span class=\"built_in\">set</span> global validate_password_policy=0;</span></span><br><span class=\"line\"><span class=\"meta prompt_\">mysql&gt; </span><span class=\"language-bash\"><span class=\"built_in\">set</span> global validate_password_length=1;</span></span><br></pre></td></tr></table></figure></p>\n<p>重新设置密码<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER USER  user() identified by &quot;123456&quot;;</span><br></pre></td></tr></table></figure></p>\n<p>授权 root 远程连接<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use mysql;</span><br></pre></td></tr></table></figure></p>\n<p>修改连接权限，执行：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update user set host=&#x27;%&#x27; where user =&#x27;root&#x27;;</span><br></pre></td></tr></table></figure></p>\n<p>执行刷新权限：<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure></p>\n"},{"title":"xargs 命令","abbr link":"linux-xargs","abbrlink":"85ed","date":"2024-05-22T04:16:00.000Z","updated":"2024-05-22T04:16:00.000Z","_content":"\n# xargs 命令\n\n## 简介\n\nxargs 用于将标准输入（stdin），转成其后命令的字符串参数。它通常跟管道命令（`|`）结合使用。\n\n```bash\n$ {{command1}} | xargs {{command2}}\n```\n\n上面是 xargs 的用法。正常情况下，第一个命令`command1`会输出结果到控制台（即标准输出`stdout`），但是管道命令（`|`）会拦截`command1`的标准输出，将其转为后面命令的标准输入（`stdin`），即`xargs`命令会接收到标准输入，它再将其转为`command2`的字符串参数来运行。\n\n举例来说，文本文件`list.txt`的内容是一组文件名。\n\n```bash\na.txt\nb.txt\nc.txt\n```\n\n然后，执行下面的命令，会将这组文件全部删除。\n\n```bash\n# 删除 a.txt b.txt c.txt\n$ cat list.txt | xargs rm\n```\n\n上面示例中，`cat`命令将`list.txt`的内容输出到标准输出，但是被管道命令拦截，转为`xargs`的标准输入，后者再将标准输入转成`rm`命令的字符串参数，即实际执行的是下面的命令。\n\n```bash\n$ rm a.txt b.txt c.txt\n```\n\n通常来说，Linux 命令分成两种，一种接受标准输入（一般是键盘）作为参数，另一种接受命令行的字符串作为参数。这两种参数的性质有很大的不同：标准输入（stdin）是文本流（stream），理论上只要不终止，就是无限的；命令行参数则是一个有固定长度的文本数组。xargs 的 作用就是接受标准输入，将其转成命令行参数。\n\nxargs 有点像 echo 命令的逆操作。echo 命令是将命令行参数转为标准输出。\n\n```bash\n$ echo abc\n```\n\n上面命令中，`abc`是命令行参数，`echo`命令将其转为标准输入。\n\n至于管道命令`|`，则是将前一个命令的标准输出，转成后一个命令的标准输入。但是，大多数命令只接受命令行参数，所以管道命令就需要 跟 xargs 结合使用，这是 Linux 的常见操作。\n\n## xargs 的单独使用\n\nxargs 命令也可以单独使用，这时等同于执行`xargs echo`。\n\n```bash\n$ xargs\n# 等同于\n$ xargs echo\n```\n\n输入`xargs`后按下回车，命令行就会等待标准输入（即用户的键盘输入）。你可以输入任意内容，然后按下 Ctrl+d，表示输入结束，这时`echo`命令就会把前面的输入打印出来。\n\n```bash\n$ xargs\nhello (Ctrl + d)\nhello\n```\n\n上面示例中，执行`xargs`后，从键盘输入`hello`，然后按下 Ctrl+d，就会自动执行`echo hello`。\n\n再看一个例子。\n\n```bash\n$ xargs find -name\n\"*.txt\"\n./foo.txt\n./hello.txt\n```\n\n上面示例中，输入`xargs find -name`以后，命令行会等待用户输入所要搜索的文件。用户输入`\"*.txt\"`，表示搜索当前目录下的所有 TXT 文件，然后按下 Ctrl+d，表示输入结束，这时就相当执行`find -name *.txt`。\n\n## -d 参数与分隔符\n\n默认情况下，`xargs`将换行符和空格作为分隔符，把标准输入分解成一个个命令行参数。\n\n```bash\n$ echo \"one two three\" | xargs mkdir\n```\n\n上面代码中，`mkdir`会新建三个子目录，因为`xargs`将`one two three`分解成三个命令行参数，执行`mkdir one two three`。\n\n`-d`参数可以更改分隔符。\n\n```bash\n$ echo -e \"a\\tb\\tc\" | xargs -d \"\\t\" echo\na b c\n```\n\n上面的命令指定制表符`\\t`作为分隔符，所以`a\\tb\\tc`就转换成了三个命令行参数。`echo`命令的`-e`参数表示解释转义字符。\n\n## -p 参数，-t 参数\n\n使用`xargs`命令以后，由于存在转换参数过程，有时需要确认一下到底执行的是什么命令。\n\n`-p`参数打印出要执行的命令，询问用户是否要执行。\n\n```bash\n$ echo 'one two three' | xargs -p touch\ntouch one two three ?...\n```\n\n上面的命令执行以后，会打印出最终要执行的命令，让用户确认。用户按下回车以后，才会真正执行。\n\n`-t`参数则是打印出最终要执行的命令，然后直接执行，不需要用户确认。\n\n```bash\n$ echo 'one two three' | xargs -t rm\nrm one two three\n```\n\n## -0 参数与 find 命令\n\n由于`xargs`默认将空格作为分隔符，所以不太适合处理文件名，因为文件名可能包含空格。\n\n`find`命令有一个特别的参数`-print0`，指定输出的文件列表以`null`分隔。然后，`xargs`命令的`-0`参数表示用`null`当作分隔符。\n\n```bash\n$ find /path -type f -print0 | xargs -0 rm\n```\n\n上面命令删除`/path`路径下的所有文件。由于分隔符是`null`，所以处理包含空格的文件名，也不会报错。\n\n还有一个原因，使得`xargs`特别适合`find`命令。有些命令（比如`rm`）一旦参数过多会报错“参数列表过长”，而无法执行，改用`xargs`就没有这个问题，因为它对每个参数执行一次命令。\n\n```bash\n$ find . -name \"*.txt\" | xargs grep \"abc\"\n```\n\n上面命令找出所有 TXT 文件以后，对每个文件搜索一次是否包含字符串`abc`。\n\n## -L 参数\n\n如果标准输入包含多行，`-L`参数指定多少行作为一个命令行参数。\n\n```bash\n$ xargs find -name\n\"*.txt\"\n\"*.md\"\nfind: paths must precede expression: `*.md'\n```\n\n上面命令同时将`\"*.txt\"`和`*.md`两行作为命令行参数，传给`find`命令导致报错。\n\n使用`-L`参数，指定每行作为一个命令行参数，就不会报错。\n\n```bash\n$ xargs -L 1 find -name\n\"*.txt\"\n./foo.txt\n./hello.txt\n\"*.md\"\n./README.md\n```\n\n上面命令指定了每一行（`-L 1`）作为命令行参数，分别运行一次命令（`find -name`）。\n\n下面是另一个例子。\n\n```bash\n$ echo -e \"a\\nb\\nc\" | xargs -L 1 echo\na\nb\nc\n```\n\n上面代码指定每行运行一次`echo`命令，所以`echo`命令执行了三次，输出了三行。\n\n## -n 参数\n\n`-L`参数虽然解决了多行的问题，但是有时用户会在同一行输入多项。\n\n```bash\n$ xargs find -name\n\"*.txt\" \"*.md\"\nfind: paths must precede expression: `*.md'\n```\n\n上面的命令将同一行的两项作为命令行参数，导致报错。\n\n`-n`参数指定每次将多少项，作为命令行参数。\n\n```bash\n$ xargs -n 1 find -name\n```\n\n上面命令指定将每一项（`-n 1`）标准输入作为命令行参数，分别执行一次命令（`find -name`）。\n\n下面是另一个例子。\n\n```bash\n$ echo {0..9} | xargs -n 2 echo\n0 1\n2 3\n4 5\n6 7\n8 9\n```\n\n上面命令指定，每两个参数运行一次`echo`命令。所以，10个阿拉伯数字运行了五次`echo`命令，输出了五行。\n\n## -I 参数\n\n如果`xargs`要将命令行参数传给多个命令，可以使用`-I`参数。\n\n`-I`指定每一项命令行参数的替代字符串。\n\n```bash\n$ cat foo.txt\none\ntwo\nthree\n\n$ cat foo.txt | xargs -I file sh -c 'echo file; mkdir file'\none\ntwo\nthree\n\n$ ls\none two three\n```\n\n上面代码中，`foo.txt`是一个三行的文本文件。我们希望对每一项命令行参数，执行两个命令（`echo`和`mkdir`），使用`-I file`表示`file`是命令行参数的替代字符串。执行命令时，具体的参数会替代掉`echo file; mkdir file`里面的两个`file`。\n\n## --max-procs 参数\n\n`xargs`默认只用一个进程执行命令。如果命令要执行多次，必须等上一次执行完，才能执行下一次。\n\n`--max-procs`参数指定同时用多少个进程并行执行命令。`--max-procs 2`表示同时最多使用两个进程，`--max-procs 0`表示不限制进程数。\n\n```bash\n$ docker ps -q | xargs -n 1 --max-procs 0 docker kill\n```\n\n上面命令表示，同时关闭尽可能多的 Docker 容器，这样运行速度会快很多。\n\n## 参考链接\n\n- [xargs is the inverse function of echo](https://dhashe.com/xargs-is-the-inverse-function-of-echo.html)\n- [Linux and Unix xargs command tutorial with examples](https://shapeshed.com/unix-xargs/), George Ornbo\n- [8 Practical Examples of Linux Xargs Command for Beginners](https://www.howtoforge.com/tutorial/linux-xargs-command/), Himanshu Arora","source":"_posts/运维/Linux/xargs 命令.md","raw":"---\ntitle: xargs 命令\ntags:\n  - Linux\n  - xargs\ncategories:\n  - xargs\nabbr link: linux-xargs\nabbrlink: 85ed\ndate: 2024-05-22 12:16:00\nupdated: 2024-05-22 12:16:00\n---\n\n# xargs 命令\n\n## 简介\n\nxargs 用于将标准输入（stdin），转成其后命令的字符串参数。它通常跟管道命令（`|`）结合使用。\n\n```bash\n$ {{command1}} | xargs {{command2}}\n```\n\n上面是 xargs 的用法。正常情况下，第一个命令`command1`会输出结果到控制台（即标准输出`stdout`），但是管道命令（`|`）会拦截`command1`的标准输出，将其转为后面命令的标准输入（`stdin`），即`xargs`命令会接收到标准输入，它再将其转为`command2`的字符串参数来运行。\n\n举例来说，文本文件`list.txt`的内容是一组文件名。\n\n```bash\na.txt\nb.txt\nc.txt\n```\n\n然后，执行下面的命令，会将这组文件全部删除。\n\n```bash\n# 删除 a.txt b.txt c.txt\n$ cat list.txt | xargs rm\n```\n\n上面示例中，`cat`命令将`list.txt`的内容输出到标准输出，但是被管道命令拦截，转为`xargs`的标准输入，后者再将标准输入转成`rm`命令的字符串参数，即实际执行的是下面的命令。\n\n```bash\n$ rm a.txt b.txt c.txt\n```\n\n通常来说，Linux 命令分成两种，一种接受标准输入（一般是键盘）作为参数，另一种接受命令行的字符串作为参数。这两种参数的性质有很大的不同：标准输入（stdin）是文本流（stream），理论上只要不终止，就是无限的；命令行参数则是一个有固定长度的文本数组。xargs 的 作用就是接受标准输入，将其转成命令行参数。\n\nxargs 有点像 echo 命令的逆操作。echo 命令是将命令行参数转为标准输出。\n\n```bash\n$ echo abc\n```\n\n上面命令中，`abc`是命令行参数，`echo`命令将其转为标准输入。\n\n至于管道命令`|`，则是将前一个命令的标准输出，转成后一个命令的标准输入。但是，大多数命令只接受命令行参数，所以管道命令就需要 跟 xargs 结合使用，这是 Linux 的常见操作。\n\n## xargs 的单独使用\n\nxargs 命令也可以单独使用，这时等同于执行`xargs echo`。\n\n```bash\n$ xargs\n# 等同于\n$ xargs echo\n```\n\n输入`xargs`后按下回车，命令行就会等待标准输入（即用户的键盘输入）。你可以输入任意内容，然后按下 Ctrl+d，表示输入结束，这时`echo`命令就会把前面的输入打印出来。\n\n```bash\n$ xargs\nhello (Ctrl + d)\nhello\n```\n\n上面示例中，执行`xargs`后，从键盘输入`hello`，然后按下 Ctrl+d，就会自动执行`echo hello`。\n\n再看一个例子。\n\n```bash\n$ xargs find -name\n\"*.txt\"\n./foo.txt\n./hello.txt\n```\n\n上面示例中，输入`xargs find -name`以后，命令行会等待用户输入所要搜索的文件。用户输入`\"*.txt\"`，表示搜索当前目录下的所有 TXT 文件，然后按下 Ctrl+d，表示输入结束，这时就相当执行`find -name *.txt`。\n\n## -d 参数与分隔符\n\n默认情况下，`xargs`将换行符和空格作为分隔符，把标准输入分解成一个个命令行参数。\n\n```bash\n$ echo \"one two three\" | xargs mkdir\n```\n\n上面代码中，`mkdir`会新建三个子目录，因为`xargs`将`one two three`分解成三个命令行参数，执行`mkdir one two three`。\n\n`-d`参数可以更改分隔符。\n\n```bash\n$ echo -e \"a\\tb\\tc\" | xargs -d \"\\t\" echo\na b c\n```\n\n上面的命令指定制表符`\\t`作为分隔符，所以`a\\tb\\tc`就转换成了三个命令行参数。`echo`命令的`-e`参数表示解释转义字符。\n\n## -p 参数，-t 参数\n\n使用`xargs`命令以后，由于存在转换参数过程，有时需要确认一下到底执行的是什么命令。\n\n`-p`参数打印出要执行的命令，询问用户是否要执行。\n\n```bash\n$ echo 'one two three' | xargs -p touch\ntouch one two three ?...\n```\n\n上面的命令执行以后，会打印出最终要执行的命令，让用户确认。用户按下回车以后，才会真正执行。\n\n`-t`参数则是打印出最终要执行的命令，然后直接执行，不需要用户确认。\n\n```bash\n$ echo 'one two three' | xargs -t rm\nrm one two three\n```\n\n## -0 参数与 find 命令\n\n由于`xargs`默认将空格作为分隔符，所以不太适合处理文件名，因为文件名可能包含空格。\n\n`find`命令有一个特别的参数`-print0`，指定输出的文件列表以`null`分隔。然后，`xargs`命令的`-0`参数表示用`null`当作分隔符。\n\n```bash\n$ find /path -type f -print0 | xargs -0 rm\n```\n\n上面命令删除`/path`路径下的所有文件。由于分隔符是`null`，所以处理包含空格的文件名，也不会报错。\n\n还有一个原因，使得`xargs`特别适合`find`命令。有些命令（比如`rm`）一旦参数过多会报错“参数列表过长”，而无法执行，改用`xargs`就没有这个问题，因为它对每个参数执行一次命令。\n\n```bash\n$ find . -name \"*.txt\" | xargs grep \"abc\"\n```\n\n上面命令找出所有 TXT 文件以后，对每个文件搜索一次是否包含字符串`abc`。\n\n## -L 参数\n\n如果标准输入包含多行，`-L`参数指定多少行作为一个命令行参数。\n\n```bash\n$ xargs find -name\n\"*.txt\"\n\"*.md\"\nfind: paths must precede expression: `*.md'\n```\n\n上面命令同时将`\"*.txt\"`和`*.md`两行作为命令行参数，传给`find`命令导致报错。\n\n使用`-L`参数，指定每行作为一个命令行参数，就不会报错。\n\n```bash\n$ xargs -L 1 find -name\n\"*.txt\"\n./foo.txt\n./hello.txt\n\"*.md\"\n./README.md\n```\n\n上面命令指定了每一行（`-L 1`）作为命令行参数，分别运行一次命令（`find -name`）。\n\n下面是另一个例子。\n\n```bash\n$ echo -e \"a\\nb\\nc\" | xargs -L 1 echo\na\nb\nc\n```\n\n上面代码指定每行运行一次`echo`命令，所以`echo`命令执行了三次，输出了三行。\n\n## -n 参数\n\n`-L`参数虽然解决了多行的问题，但是有时用户会在同一行输入多项。\n\n```bash\n$ xargs find -name\n\"*.txt\" \"*.md\"\nfind: paths must precede expression: `*.md'\n```\n\n上面的命令将同一行的两项作为命令行参数，导致报错。\n\n`-n`参数指定每次将多少项，作为命令行参数。\n\n```bash\n$ xargs -n 1 find -name\n```\n\n上面命令指定将每一项（`-n 1`）标准输入作为命令行参数，分别执行一次命令（`find -name`）。\n\n下面是另一个例子。\n\n```bash\n$ echo {0..9} | xargs -n 2 echo\n0 1\n2 3\n4 5\n6 7\n8 9\n```\n\n上面命令指定，每两个参数运行一次`echo`命令。所以，10个阿拉伯数字运行了五次`echo`命令，输出了五行。\n\n## -I 参数\n\n如果`xargs`要将命令行参数传给多个命令，可以使用`-I`参数。\n\n`-I`指定每一项命令行参数的替代字符串。\n\n```bash\n$ cat foo.txt\none\ntwo\nthree\n\n$ cat foo.txt | xargs -I file sh -c 'echo file; mkdir file'\none\ntwo\nthree\n\n$ ls\none two three\n```\n\n上面代码中，`foo.txt`是一个三行的文本文件。我们希望对每一项命令行参数，执行两个命令（`echo`和`mkdir`），使用`-I file`表示`file`是命令行参数的替代字符串。执行命令时，具体的参数会替代掉`echo file; mkdir file`里面的两个`file`。\n\n## --max-procs 参数\n\n`xargs`默认只用一个进程执行命令。如果命令要执行多次，必须等上一次执行完，才能执行下一次。\n\n`--max-procs`参数指定同时用多少个进程并行执行命令。`--max-procs 2`表示同时最多使用两个进程，`--max-procs 0`表示不限制进程数。\n\n```bash\n$ docker ps -q | xargs -n 1 --max-procs 0 docker kill\n```\n\n上面命令表示，同时关闭尽可能多的 Docker 容器，这样运行速度会快很多。\n\n## 参考链接\n\n- [xargs is the inverse function of echo](https://dhashe.com/xargs-is-the-inverse-function-of-echo.html)\n- [Linux and Unix xargs command tutorial with examples](https://shapeshed.com/unix-xargs/), George Ornbo\n- [8 Practical Examples of Linux Xargs Command for Beginners](https://www.howtoforge.com/tutorial/linux-xargs-command/), Himanshu Arora","slug":"运维/Linux/xargs 命令","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2xe00lhoshg4lwr79zc","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"xargs-命令\"><a href=\"#xargs-命令\" class=\"headerlink\" title=\"xargs 命令\"></a>xargs 命令</h1><h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>xargs 用于将标准输入（stdin），转成其后命令的字符串参数。它通常跟管道命令（<code>|</code>）结合使用。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ {{command1}} | xargs {{command2}}</span><br></pre></td></tr></tbody></table></figure>\n<p>上面是 xargs 的用法。正常情况下，第一个命令<code>command1</code>会输出结果到控制台（即标准输出<code>stdout</code>），但是管道命令（<code>|</code>）会拦截<code>command1</code>的标准输出，将其转为后面命令的标准输入（<code>stdin</code>），即<code>xargs</code>命令会接收到标准输入，它再将其转为<code>command2</code>的字符串参数来运行。</p>\n<p>举例来说，文本文件<code>list.txt</code>的内容是一组文件名。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a.txt</span><br><span class=\"line\">b.txt</span><br><span class=\"line\">c.txt</span><br></pre></td></tr></tbody></table></figure>\n<p>然后，执行下面的命令，会将这组文件全部删除。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 删除 a.txt b.txt c.txt</span></span><br><span class=\"line\">$ <span class=\"built_in\">cat</span> list.txt | xargs <span class=\"built_in\">rm</span></span><br></pre></td></tr></tbody></table></figure>\n<p>上面示例中，<code>cat</code>命令将<code>list.txt</code>的内容输出到标准输出，但是被管道命令拦截，转为<code>xargs</code>的标准输入，后者再将标准输入转成<code>rm</code>命令的字符串参数，即实际执行的是下面的命令。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">rm</span> a.txt b.txt c.txt</span><br></pre></td></tr></tbody></table></figure>\n<p>通常来说，Linux 命令分成两种，一种接受标准输入（一般是键盘）作为参数，另一种接受命令行的字符串作为参数。这两种参数的性质有很大的不同：标准输入（stdin）是文本流（stream），理论上只要不终止，就是无限的；命令行参数则是一个有固定长度的文本数组。xargs 的 作用就是接受标准输入，将其转成命令行参数。</p>\n<p>xargs 有点像 echo 命令的逆操作。echo 命令是将命令行参数转为标准输出。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> abc</span><br></pre></td></tr></tbody></table></figure>\n<p>上面命令中，<code>abc</code>是命令行参数，<code>echo</code>命令将其转为标准输入。</p>\n<p>至于管道命令<code>|</code>，则是将前一个命令的标准输出，转成后一个命令的标准输入。但是，大多数命令只接受命令行参数，所以管道命令就需要 跟 xargs 结合使用，这是 Linux 的常见操作。</p>\n<h2 id=\"xargs-的单独使用\"><a href=\"#xargs-的单独使用\" class=\"headerlink\" title=\"xargs 的单独使用\"></a>xargs 的单独使用</h2><p>xargs 命令也可以单独使用，这时等同于执行<code>xargs echo</code>。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs</span><br><span class=\"line\"><span class=\"comment\"># 等同于</span></span><br><span class=\"line\">$ xargs <span class=\"built_in\">echo</span></span><br></pre></td></tr></tbody></table></figure>\n<p>输入<code>xargs</code>后按下回车，命令行就会等待标准输入（即用户的键盘输入）。你可以输入任意内容，然后按下 Ctrl+d，表示输入结束，这时<code>echo</code>命令就会把前面的输入打印出来。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs</span><br><span class=\"line\">hello (Ctrl + d)</span><br><span class=\"line\">hello</span><br></pre></td></tr></tbody></table></figure>\n<p>上面示例中，执行<code>xargs</code>后，从键盘输入<code>hello</code>，然后按下 Ctrl+d，就会自动执行<code>echo hello</code>。</p>\n<p>再看一个例子。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs find -name</span><br><span class=\"line\"><span class=\"string\">\"*.txt\"</span></span><br><span class=\"line\">./foo.txt</span><br><span class=\"line\">./hello.txt</span><br></pre></td></tr></tbody></table></figure>\n<p>上面示例中，输入<code>xargs find -name</code>以后，命令行会等待用户输入所要搜索的文件。用户输入<code>\"*.txt\"</code>，表示搜索当前目录下的所有 TXT 文件，然后按下 Ctrl+d，表示输入结束，这时就相当执行<code>find -name *.txt</code>。</p>\n<h2 id=\"d-参数与分隔符\"><a href=\"#d-参数与分隔符\" class=\"headerlink\" title=\"-d 参数与分隔符\"></a>-d 参数与分隔符</h2><p>默认情况下，<code>xargs</code>将换行符和空格作为分隔符，把标准输入分解成一个个命令行参数。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">\"one two three\"</span> | xargs <span class=\"built_in\">mkdir</span></span><br></pre></td></tr></tbody></table></figure>\n<p>上面代码中，<code>mkdir</code>会新建三个子目录，因为<code>xargs</code>将<code>one two three</code>分解成三个命令行参数，执行<code>mkdir one two three</code>。</p>\n<p><code>-d</code>参数可以更改分隔符。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> -e <span class=\"string\">\"a\\tb\\tc\"</span> | xargs -d <span class=\"string\">\"\\t\"</span> <span class=\"built_in\">echo</span></span><br><span class=\"line\">a b c</span><br></pre></td></tr></tbody></table></figure>\n<p>上面的命令指定制表符<code>\\t</code>作为分隔符，所以<code>a\\tb\\tc</code>就转换成了三个命令行参数。<code>echo</code>命令的<code>-e</code>参数表示解释转义字符。</p>\n<h2 id=\"p-参数，-t-参数\"><a href=\"#p-参数，-t-参数\" class=\"headerlink\" title=\"-p 参数，-t 参数\"></a>-p 参数，-t 参数</h2><p>使用<code>xargs</code>命令以后，由于存在转换参数过程，有时需要确认一下到底执行的是什么命令。</p>\n<p><code>-p</code>参数打印出要执行的命令，询问用户是否要执行。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">'one two three'</span> | xargs -p <span class=\"built_in\">touch</span></span><br><span class=\"line\"><span class=\"built_in\">touch</span> one two three ?...</span><br></pre></td></tr></tbody></table></figure>\n<p>上面的命令执行以后，会打印出最终要执行的命令，让用户确认。用户按下回车以后，才会真正执行。</p>\n<p><code>-t</code>参数则是打印出最终要执行的命令，然后直接执行，不需要用户确认。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">'one two three'</span> | xargs -t <span class=\"built_in\">rm</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> one two three</span><br></pre></td></tr></tbody></table></figure>\n<h2 id=\"0-参数与-find-命令\"><a href=\"#0-参数与-find-命令\" class=\"headerlink\" title=\"-0 参数与 find 命令\"></a>-0 参数与 find 命令</h2><p>由于<code>xargs</code>默认将空格作为分隔符，所以不太适合处理文件名，因为文件名可能包含空格。</p>\n<p><code>find</code>命令有一个特别的参数<code>-print0</code>，指定输出的文件列表以<code>null</code>分隔。然后，<code>xargs</code>命令的<code>-0</code>参数表示用<code>null</code>当作分隔符。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ find /path -<span class=\"built_in\">type</span> f -print0 | xargs -0 <span class=\"built_in\">rm</span></span><br></pre></td></tr></tbody></table></figure>\n<p>上面命令删除<code>/path</code>路径下的所有文件。由于分隔符是<code>null</code>，所以处理包含空格的文件名，也不会报错。</p>\n<p>还有一个原因，使得<code>xargs</code>特别适合<code>find</code>命令。有些命令（比如<code>rm</code>）一旦参数过多会报错“参数列表过长”，而无法执行，改用<code>xargs</code>就没有这个问题，因为它对每个参数执行一次命令。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ find . -name <span class=\"string\">\"*.txt\"</span> | xargs grep <span class=\"string\">\"abc\"</span></span><br></pre></td></tr></tbody></table></figure>\n<p>上面命令找出所有 TXT 文件以后，对每个文件搜索一次是否包含字符串<code>abc</code>。</p>\n<h2 id=\"L-参数\"><a href=\"#L-参数\" class=\"headerlink\" title=\"-L 参数\"></a>-L 参数</h2><p>如果标准输入包含多行，<code>-L</code>参数指定多少行作为一个命令行参数。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs find -name</span><br><span class=\"line\"><span class=\"string\">\"*.txt\"</span></span><br><span class=\"line\"><span class=\"string\">\"*.md\"</span></span><br><span class=\"line\">find: paths must precede expression: `*.md<span class=\"string\">'</span></span><br></pre></td></tr></tbody></table></figure>\n<p>上面命令同时将<code>\"*.txt\"</code>和<code>*.md</code>两行作为命令行参数，传给<code>find</code>命令导致报错。</p>\n<p>使用<code>-L</code>参数，指定每行作为一个命令行参数，就不会报错。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs -L 1 find -name</span><br><span class=\"line\"><span class=\"string\">\"*.txt\"</span></span><br><span class=\"line\">./foo.txt</span><br><span class=\"line\">./hello.txt</span><br><span class=\"line\"><span class=\"string\">\"*.md\"</span></span><br><span class=\"line\">./README.md</span><br></pre></td></tr></tbody></table></figure>\n<p>上面命令指定了每一行（<code>-L 1</code>）作为命令行参数，分别运行一次命令（<code>find -name</code>）。</p>\n<p>下面是另一个例子。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> -e <span class=\"string\">\"a\\nb\\nc\"</span> | xargs -L 1 <span class=\"built_in\">echo</span></span><br><span class=\"line\">a</span><br><span class=\"line\">b</span><br><span class=\"line\">c</span><br></pre></td></tr></tbody></table></figure>\n<p>上面代码指定每行运行一次<code>echo</code>命令，所以<code>echo</code>命令执行了三次，输出了三行。</p>\n<h2 id=\"n-参数\"><a href=\"#n-参数\" class=\"headerlink\" title=\"-n 参数\"></a>-n 参数</h2><p><code>-L</code>参数虽然解决了多行的问题，但是有时用户会在同一行输入多项。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs find -name</span><br><span class=\"line\"><span class=\"string\">\"*.txt\"</span> <span class=\"string\">\"*.md\"</span></span><br><span class=\"line\">find: paths must precede expression: `*.md<span class=\"string\">'</span></span><br></pre></td></tr></tbody></table></figure>\n<p>上面的命令将同一行的两项作为命令行参数，导致报错。</p>\n<p><code>-n</code>参数指定每次将多少项，作为命令行参数。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs -n 1 find -name</span><br></pre></td></tr></tbody></table></figure>\n<p>上面命令指定将每一项（<code>-n 1</code>）标准输入作为命令行参数，分别执行一次命令（<code>find -name</code>）。</p>\n<p>下面是另一个例子。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> {0..9} | xargs -n 2 <span class=\"built_in\">echo</span></span><br><span class=\"line\">0 1</span><br><span class=\"line\">2 3</span><br><span class=\"line\">4 5</span><br><span class=\"line\">6 7</span><br><span class=\"line\">8 9</span><br></pre></td></tr></tbody></table></figure>\n<p>上面命令指定，每两个参数运行一次<code>echo</code>命令。所以，10个阿拉伯数字运行了五次<code>echo</code>命令，输出了五行。</p>\n<h2 id=\"I-参数\"><a href=\"#I-参数\" class=\"headerlink\" title=\"-I 参数\"></a>-I 参数</h2><p>如果<code>xargs</code>要将命令行参数传给多个命令，可以使用<code>-I</code>参数。</p>\n<p><code>-I</code>指定每一项命令行参数的替代字符串。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">cat</span> foo.txt</span><br><span class=\"line\">one</span><br><span class=\"line\">two</span><br><span class=\"line\">three</span><br><span class=\"line\"></span><br><span class=\"line\">$ <span class=\"built_in\">cat</span> foo.txt | xargs -I file sh -c <span class=\"string\">'echo file; mkdir file'</span></span><br><span class=\"line\">one</span><br><span class=\"line\">two</span><br><span class=\"line\">three</span><br><span class=\"line\"></span><br><span class=\"line\">$ <span class=\"built_in\">ls</span></span><br><span class=\"line\">one two three</span><br></pre></td></tr></tbody></table></figure>\n<p>上面代码中，<code>foo.txt</code>是一个三行的文本文件。我们希望对每一项命令行参数，执行两个命令（<code>echo</code>和<code>mkdir</code>），使用<code>-I file</code>表示<code>file</code>是命令行参数的替代字符串。执行命令时，具体的参数会替代掉<code>echo file; mkdir file</code>里面的两个<code>file</code>。</p>\n<h2 id=\"—max-procs-参数\"><a href=\"#—max-procs-参数\" class=\"headerlink\" title=\"—max-procs 参数\"></a>—max-procs 参数</h2><p><code>xargs</code>默认只用一个进程执行命令。如果命令要执行多次，必须等上一次执行完，才能执行下一次。</p>\n<p><code>--max-procs</code>参数指定同时用多少个进程并行执行命令。<code>--max-procs 2</code>表示同时最多使用两个进程，<code>--max-procs 0</code>表示不限制进程数。</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker ps -q | xargs -n 1 --max-procs 0 docker <span class=\"built_in\">kill</span></span><br></pre></td></tr></tbody></table></figure>\n<p>上面命令表示，同时关闭尽可能多的 Docker 容器，这样运行速度会快很多。</p>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><ul>\n<li><a href=\"https://dhashe.com/xargs-is-the-inverse-function-of-echo.html\">xargs is the inverse function of echo</a></li>\n<li><a href=\"https://shapeshed.com/unix-xargs/\">Linux and Unix xargs command tutorial with examples</a>, George Ornbo</li>\n<li><a href=\"https://www.howtoforge.com/tutorial/linux-xargs-command/\">8 Practical Examples of Linux Xargs Command for Beginners</a>, Himanshu Arora</li>\n</ul>\n","excerpt":"","more":"<h1 id=\"xargs-命令\"><a href=\"#xargs-命令\" class=\"headerlink\" title=\"xargs 命令\"></a>xargs 命令</h1><h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>xargs 用于将标准输入（stdin），转成其后命令的字符串参数。它通常跟管道命令（<code>|</code>）结合使用。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ &#123;&#123;command1&#125;&#125; | xargs &#123;&#123;command2&#125;&#125;</span><br></pre></td></tr></table></figure>\n<p>上面是 xargs 的用法。正常情况下，第一个命令<code>command1</code>会输出结果到控制台（即标准输出<code>stdout</code>），但是管道命令（<code>|</code>）会拦截<code>command1</code>的标准输出，将其转为后面命令的标准输入（<code>stdin</code>），即<code>xargs</code>命令会接收到标准输入，它再将其转为<code>command2</code>的字符串参数来运行。</p>\n<p>举例来说，文本文件<code>list.txt</code>的内容是一组文件名。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a.txt</span><br><span class=\"line\">b.txt</span><br><span class=\"line\">c.txt</span><br></pre></td></tr></table></figure>\n<p>然后，执行下面的命令，会将这组文件全部删除。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 删除 a.txt b.txt c.txt</span></span><br><span class=\"line\">$ <span class=\"built_in\">cat</span> list.txt | xargs <span class=\"built_in\">rm</span></span><br></pre></td></tr></table></figure>\n<p>上面示例中，<code>cat</code>命令将<code>list.txt</code>的内容输出到标准输出，但是被管道命令拦截，转为<code>xargs</code>的标准输入，后者再将标准输入转成<code>rm</code>命令的字符串参数，即实际执行的是下面的命令。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">rm</span> a.txt b.txt c.txt</span><br></pre></td></tr></table></figure>\n<p>通常来说，Linux 命令分成两种，一种接受标准输入（一般是键盘）作为参数，另一种接受命令行的字符串作为参数。这两种参数的性质有很大的不同：标准输入（stdin）是文本流（stream），理论上只要不终止，就是无限的；命令行参数则是一个有固定长度的文本数组。xargs 的 作用就是接受标准输入，将其转成命令行参数。</p>\n<p>xargs 有点像 echo 命令的逆操作。echo 命令是将命令行参数转为标准输出。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> abc</span><br></pre></td></tr></table></figure>\n<p>上面命令中，<code>abc</code>是命令行参数，<code>echo</code>命令将其转为标准输入。</p>\n<p>至于管道命令<code>|</code>，则是将前一个命令的标准输出，转成后一个命令的标准输入。但是，大多数命令只接受命令行参数，所以管道命令就需要 跟 xargs 结合使用，这是 Linux 的常见操作。</p>\n<h2 id=\"xargs-的单独使用\"><a href=\"#xargs-的单独使用\" class=\"headerlink\" title=\"xargs 的单独使用\"></a>xargs 的单独使用</h2><p>xargs 命令也可以单独使用，这时等同于执行<code>xargs echo</code>。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs</span><br><span class=\"line\"><span class=\"comment\"># 等同于</span></span><br><span class=\"line\">$ xargs <span class=\"built_in\">echo</span></span><br></pre></td></tr></table></figure>\n<p>输入<code>xargs</code>后按下回车，命令行就会等待标准输入（即用户的键盘输入）。你可以输入任意内容，然后按下 Ctrl+d，表示输入结束，这时<code>echo</code>命令就会把前面的输入打印出来。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs</span><br><span class=\"line\">hello (Ctrl + d)</span><br><span class=\"line\">hello</span><br></pre></td></tr></table></figure>\n<p>上面示例中，执行<code>xargs</code>后，从键盘输入<code>hello</code>，然后按下 Ctrl+d，就会自动执行<code>echo hello</code>。</p>\n<p>再看一个例子。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs find -name</span><br><span class=\"line\"><span class=\"string\">&quot;*.txt&quot;</span></span><br><span class=\"line\">./foo.txt</span><br><span class=\"line\">./hello.txt</span><br></pre></td></tr></table></figure>\n<p>上面示例中，输入<code>xargs find -name</code>以后，命令行会等待用户输入所要搜索的文件。用户输入<code>&quot;*.txt&quot;</code>，表示搜索当前目录下的所有 TXT 文件，然后按下 Ctrl+d，表示输入结束，这时就相当执行<code>find -name *.txt</code>。</p>\n<h2 id=\"d-参数与分隔符\"><a href=\"#d-参数与分隔符\" class=\"headerlink\" title=\"-d 参数与分隔符\"></a>-d 参数与分隔符</h2><p>默认情况下，<code>xargs</code>将换行符和空格作为分隔符，把标准输入分解成一个个命令行参数。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">&quot;one two three&quot;</span> | xargs <span class=\"built_in\">mkdir</span></span><br></pre></td></tr></table></figure>\n<p>上面代码中，<code>mkdir</code>会新建三个子目录，因为<code>xargs</code>将<code>one two three</code>分解成三个命令行参数，执行<code>mkdir one two three</code>。</p>\n<p><code>-d</code>参数可以更改分隔符。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;a\\tb\\tc&quot;</span> | xargs -d <span class=\"string\">&quot;\\t&quot;</span> <span class=\"built_in\">echo</span></span><br><span class=\"line\">a b c</span><br></pre></td></tr></table></figure>\n<p>上面的命令指定制表符<code>\\t</code>作为分隔符，所以<code>a\\tb\\tc</code>就转换成了三个命令行参数。<code>echo</code>命令的<code>-e</code>参数表示解释转义字符。</p>\n<h2 id=\"p-参数，-t-参数\"><a href=\"#p-参数，-t-参数\" class=\"headerlink\" title=\"-p 参数，-t 参数\"></a>-p 参数，-t 参数</h2><p>使用<code>xargs</code>命令以后，由于存在转换参数过程，有时需要确认一下到底执行的是什么命令。</p>\n<p><code>-p</code>参数打印出要执行的命令，询问用户是否要执行。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;one two three&#x27;</span> | xargs -p <span class=\"built_in\">touch</span></span><br><span class=\"line\"><span class=\"built_in\">touch</span> one two three ?...</span><br></pre></td></tr></table></figure>\n<p>上面的命令执行以后，会打印出最终要执行的命令，让用户确认。用户按下回车以后，才会真正执行。</p>\n<p><code>-t</code>参数则是打印出最终要执行的命令，然后直接执行，不需要用户确认。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;one two three&#x27;</span> | xargs -t <span class=\"built_in\">rm</span></span><br><span class=\"line\"><span class=\"built_in\">rm</span> one two three</span><br></pre></td></tr></table></figure>\n<h2 id=\"0-参数与-find-命令\"><a href=\"#0-参数与-find-命令\" class=\"headerlink\" title=\"-0 参数与 find 命令\"></a>-0 参数与 find 命令</h2><p>由于<code>xargs</code>默认将空格作为分隔符，所以不太适合处理文件名，因为文件名可能包含空格。</p>\n<p><code>find</code>命令有一个特别的参数<code>-print0</code>，指定输出的文件列表以<code>null</code>分隔。然后，<code>xargs</code>命令的<code>-0</code>参数表示用<code>null</code>当作分隔符。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ find /path -<span class=\"built_in\">type</span> f -print0 | xargs -0 <span class=\"built_in\">rm</span></span><br></pre></td></tr></table></figure>\n<p>上面命令删除<code>/path</code>路径下的所有文件。由于分隔符是<code>null</code>，所以处理包含空格的文件名，也不会报错。</p>\n<p>还有一个原因，使得<code>xargs</code>特别适合<code>find</code>命令。有些命令（比如<code>rm</code>）一旦参数过多会报错“参数列表过长”，而无法执行，改用<code>xargs</code>就没有这个问题，因为它对每个参数执行一次命令。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ find . -name <span class=\"string\">&quot;*.txt&quot;</span> | xargs grep <span class=\"string\">&quot;abc&quot;</span></span><br></pre></td></tr></table></figure>\n<p>上面命令找出所有 TXT 文件以后，对每个文件搜索一次是否包含字符串<code>abc</code>。</p>\n<h2 id=\"L-参数\"><a href=\"#L-参数\" class=\"headerlink\" title=\"-L 参数\"></a>-L 参数</h2><p>如果标准输入包含多行，<code>-L</code>参数指定多少行作为一个命令行参数。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs find -name</span><br><span class=\"line\"><span class=\"string\">&quot;*.txt&quot;</span></span><br><span class=\"line\"><span class=\"string\">&quot;*.md&quot;</span></span><br><span class=\"line\">find: paths must precede expression: `*.md<span class=\"string\">&#x27;</span></span><br></pre></td></tr></table></figure>\n<p>上面命令同时将<code>&quot;*.txt&quot;</code>和<code>*.md</code>两行作为命令行参数，传给<code>find</code>命令导致报错。</p>\n<p>使用<code>-L</code>参数，指定每行作为一个命令行参数，就不会报错。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs -L 1 find -name</span><br><span class=\"line\"><span class=\"string\">&quot;*.txt&quot;</span></span><br><span class=\"line\">./foo.txt</span><br><span class=\"line\">./hello.txt</span><br><span class=\"line\"><span class=\"string\">&quot;*.md&quot;</span></span><br><span class=\"line\">./README.md</span><br></pre></td></tr></table></figure>\n<p>上面命令指定了每一行（<code>-L 1</code>）作为命令行参数，分别运行一次命令（<code>find -name</code>）。</p>\n<p>下面是另一个例子。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;a\\nb\\nc&quot;</span> | xargs -L 1 <span class=\"built_in\">echo</span></span><br><span class=\"line\">a</span><br><span class=\"line\">b</span><br><span class=\"line\">c</span><br></pre></td></tr></table></figure>\n<p>上面代码指定每行运行一次<code>echo</code>命令，所以<code>echo</code>命令执行了三次，输出了三行。</p>\n<h2 id=\"n-参数\"><a href=\"#n-参数\" class=\"headerlink\" title=\"-n 参数\"></a>-n 参数</h2><p><code>-L</code>参数虽然解决了多行的问题，但是有时用户会在同一行输入多项。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs find -name</span><br><span class=\"line\"><span class=\"string\">&quot;*.txt&quot;</span> <span class=\"string\">&quot;*.md&quot;</span></span><br><span class=\"line\">find: paths must precede expression: `*.md<span class=\"string\">&#x27;</span></span><br></pre></td></tr></table></figure>\n<p>上面的命令将同一行的两项作为命令行参数，导致报错。</p>\n<p><code>-n</code>参数指定每次将多少项，作为命令行参数。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ xargs -n 1 find -name</span><br></pre></td></tr></table></figure>\n<p>上面命令指定将每一项（<code>-n 1</code>）标准输入作为命令行参数，分别执行一次命令（<code>find -name</code>）。</p>\n<p>下面是另一个例子。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">echo</span> &#123;0..9&#125; | xargs -n 2 <span class=\"built_in\">echo</span></span><br><span class=\"line\">0 1</span><br><span class=\"line\">2 3</span><br><span class=\"line\">4 5</span><br><span class=\"line\">6 7</span><br><span class=\"line\">8 9</span><br></pre></td></tr></table></figure>\n<p>上面命令指定，每两个参数运行一次<code>echo</code>命令。所以，10个阿拉伯数字运行了五次<code>echo</code>命令，输出了五行。</p>\n<h2 id=\"I-参数\"><a href=\"#I-参数\" class=\"headerlink\" title=\"-I 参数\"></a>-I 参数</h2><p>如果<code>xargs</code>要将命令行参数传给多个命令，可以使用<code>-I</code>参数。</p>\n<p><code>-I</code>指定每一项命令行参数的替代字符串。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">cat</span> foo.txt</span><br><span class=\"line\">one</span><br><span class=\"line\">two</span><br><span class=\"line\">three</span><br><span class=\"line\"></span><br><span class=\"line\">$ <span class=\"built_in\">cat</span> foo.txt | xargs -I file sh -c <span class=\"string\">&#x27;echo file; mkdir file&#x27;</span></span><br><span class=\"line\">one</span><br><span class=\"line\">two</span><br><span class=\"line\">three</span><br><span class=\"line\"></span><br><span class=\"line\">$ <span class=\"built_in\">ls</span></span><br><span class=\"line\">one two three</span><br></pre></td></tr></table></figure>\n<p>上面代码中，<code>foo.txt</code>是一个三行的文本文件。我们希望对每一项命令行参数，执行两个命令（<code>echo</code>和<code>mkdir</code>），使用<code>-I file</code>表示<code>file</code>是命令行参数的替代字符串。执行命令时，具体的参数会替代掉<code>echo file; mkdir file</code>里面的两个<code>file</code>。</p>\n<h2 id=\"—max-procs-参数\"><a href=\"#—max-procs-参数\" class=\"headerlink\" title=\"—max-procs 参数\"></a>—max-procs 参数</h2><p><code>xargs</code>默认只用一个进程执行命令。如果命令要执行多次，必须等上一次执行完，才能执行下一次。</p>\n<p><code>--max-procs</code>参数指定同时用多少个进程并行执行命令。<code>--max-procs 2</code>表示同时最多使用两个进程，<code>--max-procs 0</code>表示不限制进程数。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker ps -q | xargs -n 1 --max-procs 0 docker <span class=\"built_in\">kill</span></span><br></pre></td></tr></table></figure>\n<p>上面命令表示，同时关闭尽可能多的 Docker 容器，这样运行速度会快很多。</p>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><ul>\n<li><a href=\"https://dhashe.com/xargs-is-the-inverse-function-of-echo.html\">xargs is the inverse function of echo</a></li>\n<li><a href=\"https://shapeshed.com/unix-xargs/\">Linux and Unix xargs command tutorial with examples</a>, George Ornbo</li>\n<li><a href=\"https://www.howtoforge.com/tutorial/linux-xargs-command/\">8 Practical Examples of Linux Xargs Command for Beginners</a>, Himanshu Arora</li>\n</ul>\n"},{"title":"在Linux后台运行指定程序的几种方法","abbrlink":"program-run-in-background","date":"2023-07-15T01:40:25.000Z","updated":"2023-07-15T01:40:25.000Z","_content":"\n<div class=\"note info\">在Linux系统中，将程序在后台运行可以释放终端，让您继续执行其他操作。下面介绍几种常用的方法：</div>\n\n### 1. **直接添加 & 符号**\n\n* **最简单的方法**：在命令末尾加上 `&` 符号，即可将程序放入后台运行。\n* **示例**：\n  ```bash\n  python my_script.py &\n  ```\n* **注意**：\n    - 该方法适用于大多数命令。\n    - 退出终端后，后台程序会随之终止。\n\n### 2. **使用 nohup 命令**\n\n* **忽略挂断信号**：`nohup` 命令可以使程序在用户退出终端后继续运行。\n* **示例**：\n  ```bash\n  nohup python my_script.py &\n  ```\n* **输出重定向**：通常将输出重定向到一个文件中，以避免输出丢失。\n  ```bash\n  nohup python my_script.py > output.log 2>&1 &\n  ```\n    - `> output.log` 将标准输出重定向到 `output.log` 文件。\n    - `2>&1` 将标准错误重定向到标准输出，即也写入 `output.log` 文件。\n\n### 3. **使用 screen 或 tmux**\n\n* **创建虚拟终端**：screen 和 tmux 可以创建多个虚拟终端，您可以在这些终端中运行程序，即使关闭了原始终端，这些虚拟终端中的程序也会继续运行。\n* **示例**：\n  ```bash\n  screen\n  # 在screen中运行程序\n  python my_script.py\n  # 退出screen但不终止程序\n  Ctrl+a d\n  ```\n* **恢复screen**：\n  ```bash\n  screen -r\n  ```\n\n### 4. **使用 systemd**\n\n* **系统服务管理**：systemd 是 Linux 系统的初始化系统和服务管理器，可以用来管理后台服务。\n* **创建服务单元文件**：编写一个 `.service` 文件，定义服务的行为。\n* **启动服务**：使用 `systemctl` 命令启动服务。\n* **较为复杂**，适合长期运行的服务。\n\n### 5. **使用 jobs 和 bg 命令**\n\n* **将前台进程转为后台**：\n    - `Ctrl+Z`：将当前前台进程挂起。\n    - `jobs`：查看后台作业。\n    - `bg %job_number`：将指定作业放入后台运行。\n\n### **其他注意事项**\n\n* **查看后台进程**：使用 `ps` 命令查看当前正在运行的进程。\n* **终止后台进程**：使用 `kill` 命令终止指定进程。\n* **日志**：对于长时间运行的程序，建议将输出重定向到日志文件中，以便查看运行情况。\n\n**选择合适的方法**\n\n* **临时任务**：直接添加 `&` 或使用 `jobs` 和 `bg` 命令。\n* **长期运行**：使用 `nohup`、`screen`、`tmux` 或 `systemd`。\n* **复杂管理**：使用 `systemd`。\n\n**示例：**\n\n假设您有一个 Python 脚本 `my_script.py`，要将其在后台运行，并把输出重定向到 `script.log` 文件。您可以使用以下命令：\n\n```bash\nnohup python my_script.py > script.log 2>&1 &\n```\n\n**总结**\n\nLinux 提供了多种方法将程序在后台运行，选择哪种方法取决于我们的具体需求和环境。\n","source":"_posts/运维/Linux/在Linux后台运行指定程序的几种方法.md","raw":"---\ntitle: 在Linux后台运行指定程序的几种方法\ntags: [Linux,后台运行]\ncategories: [运维]\nabbrlink: 'program-run-in-background'\ndate: 2023-07-15 09:40:25\nupdated: 2023-07-15 09:40:25\n---\n\n<div class=\"note info\">在Linux系统中，将程序在后台运行可以释放终端，让您继续执行其他操作。下面介绍几种常用的方法：</div>\n\n### 1. **直接添加 & 符号**\n\n* **最简单的方法**：在命令末尾加上 `&` 符号，即可将程序放入后台运行。\n* **示例**：\n  ```bash\n  python my_script.py &\n  ```\n* **注意**：\n    - 该方法适用于大多数命令。\n    - 退出终端后，后台程序会随之终止。\n\n### 2. **使用 nohup 命令**\n\n* **忽略挂断信号**：`nohup` 命令可以使程序在用户退出终端后继续运行。\n* **示例**：\n  ```bash\n  nohup python my_script.py &\n  ```\n* **输出重定向**：通常将输出重定向到一个文件中，以避免输出丢失。\n  ```bash\n  nohup python my_script.py > output.log 2>&1 &\n  ```\n    - `> output.log` 将标准输出重定向到 `output.log` 文件。\n    - `2>&1` 将标准错误重定向到标准输出，即也写入 `output.log` 文件。\n\n### 3. **使用 screen 或 tmux**\n\n* **创建虚拟终端**：screen 和 tmux 可以创建多个虚拟终端，您可以在这些终端中运行程序，即使关闭了原始终端，这些虚拟终端中的程序也会继续运行。\n* **示例**：\n  ```bash\n  screen\n  # 在screen中运行程序\n  python my_script.py\n  # 退出screen但不终止程序\n  Ctrl+a d\n  ```\n* **恢复screen**：\n  ```bash\n  screen -r\n  ```\n\n### 4. **使用 systemd**\n\n* **系统服务管理**：systemd 是 Linux 系统的初始化系统和服务管理器，可以用来管理后台服务。\n* **创建服务单元文件**：编写一个 `.service` 文件，定义服务的行为。\n* **启动服务**：使用 `systemctl` 命令启动服务。\n* **较为复杂**，适合长期运行的服务。\n\n### 5. **使用 jobs 和 bg 命令**\n\n* **将前台进程转为后台**：\n    - `Ctrl+Z`：将当前前台进程挂起。\n    - `jobs`：查看后台作业。\n    - `bg %job_number`：将指定作业放入后台运行。\n\n### **其他注意事项**\n\n* **查看后台进程**：使用 `ps` 命令查看当前正在运行的进程。\n* **终止后台进程**：使用 `kill` 命令终止指定进程。\n* **日志**：对于长时间运行的程序，建议将输出重定向到日志文件中，以便查看运行情况。\n\n**选择合适的方法**\n\n* **临时任务**：直接添加 `&` 或使用 `jobs` 和 `bg` 命令。\n* **长期运行**：使用 `nohup`、`screen`、`tmux` 或 `systemd`。\n* **复杂管理**：使用 `systemd`。\n\n**示例：**\n\n假设您有一个 Python 脚本 `my_script.py`，要将其在后台运行，并把输出重定向到 `script.log` 文件。您可以使用以下命令：\n\n```bash\nnohup python my_script.py > script.log 2>&1 &\n```\n\n**总结**\n\nLinux 提供了多种方法将程序在后台运行，选择哪种方法取决于我们的具体需求和环境。\n","slug":"运维/Linux/在Linux后台运行指定程序的几种方法","published":1,"comments":1,"layout":"post","photos":[],"_id":"cm3iee2xf00ljoshg948g4sz9","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><div class=\"note info\">在Linux系统中，将程序在后台运行可以释放终端，让您继续执行其他操作。下面介绍几种常用的方法：</div>\n\n<h3 id=\"1-直接添加-amp-符号\"><a href=\"#1-直接添加-amp-符号\" class=\"headerlink\" title=\"1. 直接添加 &amp; 符号\"></a>1. <strong>直接添加 &amp; 符号</strong></h3><ul>\n<li><strong>最简单的方法</strong>：在命令末尾加上 <code>&amp;</code> 符号，即可将程序放入后台运行。</li>\n<li><strong>示例</strong>：<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python my_script.py &amp;</span><br></pre></td></tr></tbody></table></figure></li>\n<li><strong>注意</strong>：<ul>\n<li>该方法适用于大多数命令。</li>\n<li>退出终端后，后台程序会随之终止。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-使用-nohup-命令\"><a href=\"#2-使用-nohup-命令\" class=\"headerlink\" title=\"2. 使用 nohup 命令\"></a>2. <strong>使用 nohup 命令</strong></h3><ul>\n<li><strong>忽略挂断信号</strong>：<code>nohup</code> 命令可以使程序在用户退出终端后继续运行。</li>\n<li><strong>示例</strong>：<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">nohup</span> python my_script.py &amp;</span><br></pre></td></tr></tbody></table></figure></li>\n<li><strong>输出重定向</strong>：通常将输出重定向到一个文件中，以避免输出丢失。<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">nohup</span> python my_script.py &gt; output.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></tbody></table></figure>\n<ul>\n<li><code>&gt; output.log</code> 将标准输出重定向到 <code>output.log</code> 文件。</li>\n<li><code>2&gt;&amp;1</code> 将标准错误重定向到标准输出，即也写入 <code>output.log</code> 文件。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-使用-screen-或-tmux\"><a href=\"#3-使用-screen-或-tmux\" class=\"headerlink\" title=\"3. 使用 screen 或 tmux\"></a>3. <strong>使用 screen 或 tmux</strong></h3><ul>\n<li><strong>创建虚拟终端</strong>：screen 和 tmux 可以创建多个虚拟终端，您可以在这些终端中运行程序，即使关闭了原始终端，这些虚拟终端中的程序也会继续运行。</li>\n<li><strong>示例</strong>：<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">screen</span><br><span class=\"line\"><span class=\"comment\"># 在screen中运行程序</span></span><br><span class=\"line\">python my_script.py</span><br><span class=\"line\"><span class=\"comment\"># 退出screen但不终止程序</span></span><br><span class=\"line\">Ctrl+a d</span><br></pre></td></tr></tbody></table></figure></li>\n<li><strong>恢复screen</strong>：<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">screen -r</span><br></pre></td></tr></tbody></table></figure>\n</li>\n</ul>\n<h3 id=\"4-使用-systemd\"><a href=\"#4-使用-systemd\" class=\"headerlink\" title=\"4. 使用 systemd\"></a>4. <strong>使用 systemd</strong></h3><ul>\n<li><strong>系统服务管理</strong>：systemd 是 Linux 系统的初始化系统和服务管理器，可以用来管理后台服务。</li>\n<li><strong>创建服务单元文件</strong>：编写一个 <code>.service</code> 文件，定义服务的行为。</li>\n<li><strong>启动服务</strong>：使用 <code>systemctl</code> 命令启动服务。</li>\n<li><strong>较为复杂</strong>，适合长期运行的服务。</li>\n</ul>\n<h3 id=\"5-使用-jobs-和-bg-命令\"><a href=\"#5-使用-jobs-和-bg-命令\" class=\"headerlink\" title=\"5. 使用 jobs 和 bg 命令\"></a>5. <strong>使用 jobs 和 bg 命令</strong></h3><ul>\n<li><strong>将前台进程转为后台</strong>：<ul>\n<li><code>Ctrl+Z</code>：将当前前台进程挂起。</li>\n<li><code>jobs</code>：查看后台作业。</li>\n<li><code>bg %job_number</code>：将指定作业放入后台运行。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"其他注意事项\"><a href=\"#其他注意事项\" class=\"headerlink\" title=\"其他注意事项\"></a><strong>其他注意事项</strong></h3><ul>\n<li><strong>查看后台进程</strong>：使用 <code>ps</code> 命令查看当前正在运行的进程。</li>\n<li><strong>终止后台进程</strong>：使用 <code>kill</code> 命令终止指定进程。</li>\n<li><strong>日志</strong>：对于长时间运行的程序，建议将输出重定向到日志文件中，以便查看运行情况。</li>\n</ul>\n<p><strong>选择合适的方法</strong></p>\n<ul>\n<li><strong>临时任务</strong>：直接添加 <code>&amp;</code> 或使用 <code>jobs</code> 和 <code>bg</code> 命令。</li>\n<li><strong>长期运行</strong>：使用 <code>nohup</code>、<code>screen</code>、<code>tmux</code> 或 <code>systemd</code>。</li>\n<li><strong>复杂管理</strong>：使用 <code>systemd</code>。</li>\n</ul>\n<p><strong>示例：</strong></p>\n<p>假设您有一个 Python 脚本 <code>my_script.py</code>，要将其在后台运行，并把输出重定向到 <code>script.log</code> 文件。您可以使用以下命令：</p>\n<figure class=\"highlight bash\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">nohup</span> python my_script.py &gt; script.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></tbody></table></figure>\n<p><strong>总结</strong></p>\n<p>Linux 提供了多种方法将程序在后台运行，选择哪种方法取决于我们的具体需求和环境。</p>\n","excerpt":"","more":"<div class=\"note info\">在Linux系统中，将程序在后台运行可以释放终端，让您继续执行其他操作。下面介绍几种常用的方法：</div>\n\n<h3 id=\"1-直接添加-amp-符号\"><a href=\"#1-直接添加-amp-符号\" class=\"headerlink\" title=\"1. 直接添加 &amp; 符号\"></a>1. <strong>直接添加 &amp; 符号</strong></h3><ul>\n<li><strong>最简单的方法</strong>：在命令末尾加上 <code>&amp;</code> 符号，即可将程序放入后台运行。</li>\n<li><strong>示例</strong>：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python my_script.py &amp;</span><br></pre></td></tr></table></figure></li>\n<li><strong>注意</strong>：<ul>\n<li>该方法适用于大多数命令。</li>\n<li>退出终端后，后台程序会随之终止。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2-使用-nohup-命令\"><a href=\"#2-使用-nohup-命令\" class=\"headerlink\" title=\"2. 使用 nohup 命令\"></a>2. <strong>使用 nohup 命令</strong></h3><ul>\n<li><strong>忽略挂断信号</strong>：<code>nohup</code> 命令可以使程序在用户退出终端后继续运行。</li>\n<li><strong>示例</strong>：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">nohup</span> python my_script.py &amp;</span><br></pre></td></tr></table></figure></li>\n<li><strong>输出重定向</strong>：通常将输出重定向到一个文件中，以避免输出丢失。<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">nohup</span> python my_script.py &gt; output.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>&gt; output.log</code> 将标准输出重定向到 <code>output.log</code> 文件。</li>\n<li><code>2&gt;&amp;1</code> 将标准错误重定向到标准输出，即也写入 <code>output.log</code> 文件。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-使用-screen-或-tmux\"><a href=\"#3-使用-screen-或-tmux\" class=\"headerlink\" title=\"3. 使用 screen 或 tmux\"></a>3. <strong>使用 screen 或 tmux</strong></h3><ul>\n<li><strong>创建虚拟终端</strong>：screen 和 tmux 可以创建多个虚拟终端，您可以在这些终端中运行程序，即使关闭了原始终端，这些虚拟终端中的程序也会继续运行。</li>\n<li><strong>示例</strong>：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">screen</span><br><span class=\"line\"><span class=\"comment\"># 在screen中运行程序</span></span><br><span class=\"line\">python my_script.py</span><br><span class=\"line\"><span class=\"comment\"># 退出screen但不终止程序</span></span><br><span class=\"line\">Ctrl+a d</span><br></pre></td></tr></table></figure></li>\n<li><strong>恢复screen</strong>：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">screen -r</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"4-使用-systemd\"><a href=\"#4-使用-systemd\" class=\"headerlink\" title=\"4. 使用 systemd\"></a>4. <strong>使用 systemd</strong></h3><ul>\n<li><strong>系统服务管理</strong>：systemd 是 Linux 系统的初始化系统和服务管理器，可以用来管理后台服务。</li>\n<li><strong>创建服务单元文件</strong>：编写一个 <code>.service</code> 文件，定义服务的行为。</li>\n<li><strong>启动服务</strong>：使用 <code>systemctl</code> 命令启动服务。</li>\n<li><strong>较为复杂</strong>，适合长期运行的服务。</li>\n</ul>\n<h3 id=\"5-使用-jobs-和-bg-命令\"><a href=\"#5-使用-jobs-和-bg-命令\" class=\"headerlink\" title=\"5. 使用 jobs 和 bg 命令\"></a>5. <strong>使用 jobs 和 bg 命令</strong></h3><ul>\n<li><strong>将前台进程转为后台</strong>：<ul>\n<li><code>Ctrl+Z</code>：将当前前台进程挂起。</li>\n<li><code>jobs</code>：查看后台作业。</li>\n<li><code>bg %job_number</code>：将指定作业放入后台运行。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"其他注意事项\"><a href=\"#其他注意事项\" class=\"headerlink\" title=\"其他注意事项\"></a><strong>其他注意事项</strong></h3><ul>\n<li><strong>查看后台进程</strong>：使用 <code>ps</code> 命令查看当前正在运行的进程。</li>\n<li><strong>终止后台进程</strong>：使用 <code>kill</code> 命令终止指定进程。</li>\n<li><strong>日志</strong>：对于长时间运行的程序，建议将输出重定向到日志文件中，以便查看运行情况。</li>\n</ul>\n<p><strong>选择合适的方法</strong></p>\n<ul>\n<li><strong>临时任务</strong>：直接添加 <code>&amp;</code> 或使用 <code>jobs</code> 和 <code>bg</code> 命令。</li>\n<li><strong>长期运行</strong>：使用 <code>nohup</code>、<code>screen</code>、<code>tmux</code> 或 <code>systemd</code>。</li>\n<li><strong>复杂管理</strong>：使用 <code>systemd</code>。</li>\n</ul>\n<p><strong>示例：</strong></p>\n<p>假设您有一个 Python 脚本 <code>my_script.py</code>，要将其在后台运行，并把输出重定向到 <code>script.log</code> 文件。您可以使用以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">nohup</span> python my_script.py &gt; script.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>\n<p><strong>总结</strong></p>\n<p>Linux 提供了多种方法将程序在后台运行，选择哪种方法取决于我们的具体需求和环境。</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cm3iee2su0001oshg3mbgg7ue","category_id":"cm3iee2sz0004oshg773n1pw5","_id":"cm3iee2t7000joshga37z1364"},{"post_id":"cm3iee2sy0003oshgg4rn7824","category_id":"cm3iee2t4000coshg9lxa83t9","_id":"cm3iee2ta000soshg89gx8t5h"},{"post_id":"cm3iee2t10007oshggyup0d0k","category_id":"cm3iee2sz0004oshg773n1pw5","_id":"cm3iee2tc000zoshg16ks26ka"},{"post_id":"cm3iee2t20009oshgg3gmg618","category_id":"cm3iee2ta000roshgg74y11vd","_id":"cm3iee2tf0018oshg3d40ajq8"},{"post_id":"cm3iee2t4000boshg3f0r4hcm","category_id":"cm3iee2ta000roshgg74y11vd","_id":"cm3iee2tg001eoshg0hokg0zt"},{"post_id":"cm3iee2t5000goshg8sd17e8h","category_id":"cm3iee2tf0017oshge4j0586q","_id":"cm3iee2ti001koshg4ypi2m8e"},{"post_id":"cm3iee2t6000ioshgh31wbgo0","category_id":"cm3iee2tg001foshg37y2efcd","_id":"cm3iee2tk001roshggvdw8xjt"},{"post_id":"cm3iee2t8000noshg3ym28w9z","category_id":"cm3iee2ti001moshg2mkc1i62","_id":"cm3iee2tl001xoshg1pnj95ph"},{"post_id":"cm3iee2tk001uoshg81y76wgr","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2tm0023oshgart380lq"},{"post_id":"cm3iee2t9000qoshg5gwu1h8b","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2tn0027oshg27qs1rxz"},{"post_id":"cm3iee2tl001woshg41os5r7c","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2to002boshg7y482kv6"},{"post_id":"cm3iee2tl001zoshg3d9k1zr4","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2tp002foshg7d3yevb2"},{"post_id":"cm3iee2tb000voshg1nf6ev7s","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2tq002joshgakg1gqq1"},{"post_id":"cm3iee2tm0022oshg0jjv4hrz","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2tr002noshgbj6pgye7"},{"post_id":"cm3iee2tn0026oshgeuhm04qw","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2ts002qoshg0ibwe2ms"},{"post_id":"cm3iee2tc000yoshgb8ke3yb4","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2ts002uoshgd7z0g7gb"},{"post_id":"cm3iee2tp002eoshgc0zohrk8","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2tt002woshgb0pbc3fj"},{"post_id":"cm3iee2td0013oshg4xiu70d8","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2tu0031oshgf8i301nx"},{"post_id":"cm3iee2te0016oshg7h75f1ks","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2tu0033oshggurebg3c"},{"post_id":"cm3iee2tf001aoshg61sg392s","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2tw0038oshgdqbddqtd"},{"post_id":"cm3iee2ts002voshgb321fwjb","category_id":"cm3iee2sz0004oshg773n1pw5","_id":"cm3iee2tx003aoshg8h1qf6b4"},{"post_id":"cm3iee2tg001doshgh6ocbihf","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2ty003eoshg1qprco1w"},{"post_id":"cm3iee2th001goshge7sxg1ux","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2tz003joshgaji45ziu"},{"post_id":"cm3iee2th001ioshgcn6a45mx","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2u0003poshgcsnh019m"},{"post_id":"cm3iee2ty003goshg53r2enss","category_id":"cm3iee2sz0004oshg773n1pw5","_id":"cm3iee2u1003soshg0x4u8myb"},{"post_id":"cm3iee2tz003koshgh4tl6c60","category_id":"cm3iee2sz0004oshg773n1pw5","_id":"cm3iee2u2003woshg76sd8q0w"},{"post_id":"cm3iee2ti001loshg3m8u4nhr","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2u2003zoshgc1js3oi5"},{"post_id":"cm3iee2tz003moshg0ikndvsw","category_id":"cm3iee2sz0004oshg773n1pw5","_id":"cm3iee2u30042oshg38b9gsfe"},{"post_id":"cm3iee2u0003qoshgg0kdgg1i","category_id":"cm3iee2sz0004oshg773n1pw5","_id":"cm3iee2u40046oshg0mcee1na"},{"post_id":"cm3iee2tj001ooshggli8by9w","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2u50048oshgblxkdx4v"},{"post_id":"cm3iee2u1003toshgcmp524gb","category_id":"cm3iee2sz0004oshg773n1pw5","_id":"cm3iee2u6004doshgawrt989r"},{"post_id":"cm3iee2u2003xoshg6qmlf2bq","category_id":"cm3iee2sz0004oshg773n1pw5","_id":"cm3iee2u7004foshg1m0m71vk"},{"post_id":"cm3iee2tj001qoshg0xqm1cxl","category_id":"cm3iee2tk001soshg5kh8gxjg","_id":"cm3iee2u8004joshg3au9gofr"},{"post_id":"cm3iee2to002aoshg9kd314d6","category_id":"cm3iee2u30041oshgawre3rv9","_id":"cm3iee2u8004moshg6tf956yg"},{"post_id":"cm3iee2tp002ioshgawnq7qz0","category_id":"cm3iee2u5004aoshggmoygh37","_id":"cm3iee2u9004qoshgby7g14vn"},{"post_id":"cm3iee2tq002moshgc20l7wk6","category_id":"cm3iee2u8004ioshg16lecwv7","_id":"cm3iee2ua004uoshgfybjhlzz"},{"post_id":"cm3iee2u8004noshg8nmvdryg","category_id":"cm3iee2sz0004oshg773n1pw5","_id":"cm3iee2ub004zoshgawjl5ykq"},{"post_id":"cm3iee2tr002poshg2lfy00kq","category_id":"cm3iee2u9004poshg3z8t1b2z","_id":"cm3iee2uc0051oshge4pwggsx"},{"post_id":"cm3iee2ts002toshg0d7o43fk","category_id":"cm3iee2ua004woshg6pehdy44","_id":"cm3iee2ud0057oshgcziv3nhf"},{"post_id":"cm3iee2tt0030oshggbh586ec","category_id":"cm3iee2uc0053oshg0lab01nh","_id":"cm3iee2uk005foshgb10b7gzm"},{"post_id":"cm3iee2tu0032oshgf2vcez3u","category_id":"cm3iee2uc0053oshg0lab01nh","_id":"cm3iee2ul005koshg0mx81tsr"},{"post_id":"cm3iee2tw0037oshgciqc0tj0","category_id":"cm3iee2uk005eoshgef4b4sbp","_id":"cm3iee2um005roshg19w7c03j"},{"post_id":"cm3iee2tw0039oshg9e86dvc7","category_id":"cm3iee2uk005eoshgef4b4sbp","_id":"cm3iee2un005xoshgea169mnn"},{"post_id":"cm3iee2tx003doshgag5r9y0z","category_id":"cm3iee2uk005eoshgef4b4sbp","_id":"cm3iee2uo0062oshg9ctp3opb"},{"post_id":"cm3iee2u20040oshg56we0qcy","category_id":"cm3iee2un005woshge39s8tyb","_id":"cm3iee2uq0069oshgggfpe3zm"},{"post_id":"cm3iee2u30044oshg3b14ehd1","category_id":"cm3iee2un005woshge39s8tyb","_id":"cm3iee2ur006foshgf4yw4jic"},{"post_id":"cm3iee2u40047oshgf1mx9w28","category_id":"cm3iee2un005woshge39s8tyb","_id":"cm3iee2us006koshg60dz69vj"},{"post_id":"cm3iee2u5004boshg411x5sxs","category_id":"cm3iee2ur006eoshgh24o3gw9","_id":"cm3iee2ut006qoshgdmaqfben"},{"post_id":"cm3iee2u6004eoshg4dbb3xuh","category_id":"cm3iee2us006loshggllv6m0f","_id":"cm3iee2uv006yoshg1wbghwe4"},{"post_id":"cm3iee2u7004hoshgelok857e","category_id":"cm3iee2us006loshggllv6m0f","_id":"cm3iee2uw0073oshg3ycphv65"},{"post_id":"cm3iee2u8004loshg6gcm7p2f","category_id":"cm3iee2uv006xoshg1d4egdoo","_id":"cm3iee2ux0079oshgd2431rpb"},{"post_id":"cm3iee2u9004soshg4e3w2xby","category_id":"cm3iee2uw0074oshg0drzhhqi","_id":"cm3iee2uz007foshg6ualelaz"},{"post_id":"cm3iee2ua004toshg9cov0ph3","category_id":"cm3iee2ux007aoshg2ljj506d","_id":"cm3iee2v0007moshg0xlj2p2l"},{"post_id":"cm3iee2ub004xoshg42ox7zgj","category_id":"cm3iee2ux007aoshg2ljj506d","_id":"cm3iee2v1007roshg272bhmwz"},{"post_id":"cm3iee2ub0050oshgeloz7qnr","category_id":"cm3iee2ux007aoshg2ljj506d","_id":"cm3iee2v3007xoshg1pak74wu"},{"post_id":"cm3iee2uc0054oshg7mav9lt6","category_id":"cm3iee2ux007aoshg2ljj506d","_id":"cm3iee2v40083oshgbheza8k3"},{"post_id":"cm3iee2ud0056oshgbvte1ihn","category_id":"cm3iee2ux007aoshg2ljj506d","_id":"cm3iee2v50089oshg4r0f1qlz"},{"post_id":"cm3iee2ud0059oshgfk4ahrql","category_id":"cm3iee2ux007aoshg2ljj506d","_id":"cm3iee2v6008eoshgd6acfd9t"},{"post_id":"cm3iee2ue005coshgg8c600gi","category_id":"cm3iee2v50088oshggz6g3n59","_id":"cm3iee2v8008moshgea856kmb"},{"post_id":"cm3iee2uj005doshg5f95hwjv","category_id":"cm3iee2us006loshggllv6m0f","_id":"cm3iee2v9008soshgfpzohs0y"},{"post_id":"cm3iee2uk005ioshg9cr779n7","category_id":"cm3iee2ux007aoshg2ljj506d","_id":"cm3iee2va008yoshgbsm8a4bc"},{"post_id":"cm3iee2ul005joshgdgpkhoy5","category_id":"cm3iee2ux007aoshg2ljj506d","_id":"cm3iee2vc0094oshggtsahn9v"},{"post_id":"cm3iee2ul005noshgd0f08ft2","category_id":"cm3iee2us006loshggllv6m0f","_id":"cm3iee2vd0098oshg4rjvbx8n"},{"post_id":"cm3iee2vc0096oshg9v7308ac","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2ve009doshg82zm81lm"},{"post_id":"cm3iee2um005poshgakk9erj1","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vf009goshgep1r7yta"},{"post_id":"cm3iee2vc0097oshg6p7a6nxu","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vf009joshg6wrshyqb"},{"post_id":"cm3iee2um005toshgb4ih7syk","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vg009noshg01ararz4"},{"post_id":"cm3iee2un005voshgawin5fz6","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vh009toshg39v34ooc"},{"post_id":"cm3iee2uo005zoshg8dq882kd","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vi009zoshg07uof91e"},{"post_id":"cm3iee2uo0061oshgelpq00og","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vk00a4oshg5yfzfxw9"},{"post_id":"cm3iee2up0064oshg46876gj5","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vl00aboshgb2dh8qy4"},{"post_id":"cm3iee2up0067oshghaa29bmv","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vn00agoshg2phh40gj"},{"post_id":"cm3iee2uq006aoshgah76fgdw","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vo00amoshg4fq61ft6"},{"post_id":"cm3iee2ur006doshg1xob2mm9","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vp00asoshgcux79ncc"},{"post_id":"cm3iee2ur006goshgd44t7c0i","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vq00ayoshga6lw35if"},{"post_id":"cm3iee2us006ioshgflkm9z7t","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vs00b4oshg3wtq97wz"},{"post_id":"cm3iee2us006moshgal9jcdr3","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vt00baoshgbasv5cdw"},{"post_id":"cm3iee2ut006ooshg5exgab3b","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vu00bgoshg4vfj2ang"},{"post_id":"cm3iee2uu006roshg094y88ze","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vw00bmoshg8lpd9ikk"},{"post_id":"cm3iee2uu006uoshgdvrdeaxn","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vx00broshg8gwqavc7"},{"post_id":"cm3iee2uv006woshge5f9c8n1","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2vz00bxoshggc79eaym"},{"post_id":"cm3iee2uv006zoshg7oe420tr","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2w000c4oshgg6sn5hw5"},{"post_id":"cm3iee2uw0072oshg7co809u9","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2w100c9oshg7wt27wm8"},{"post_id":"cm3iee2uw0075oshg3r7e9hr8","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2w200cfoshgdxtkdy28"},{"post_id":"cm3iee2ux0077oshg599fax5m","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2w400closhgb80kcsz3"},{"post_id":"cm3iee2uy007boshg5l2ugdym","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2w500csoshgf6ix53ic"},{"post_id":"cm3iee2uy007doshg5jwfg1z7","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2w600czoshg2mana9yp"},{"post_id":"cm3iee2uz007hoshg7kh23zkd","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2w700d4oshg6157fx99"},{"post_id":"cm3iee2uz007joshg8qoqd21m","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2w700d8oshgd5345mgj"},{"post_id":"cm3iee2v0007noshgcljufdwx","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2w800dcoshgf7e97oem"},{"post_id":"cm3iee2v1007ooshg0l34dcvn","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2w800dgoshgcya0eiak"},{"post_id":"cm3iee2v1007toshg2nmqd1qu","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2w900djoshg53027y0g"},{"post_id":"cm3iee2v2007uoshg4o0u8fpj","category_id":"cm3iee2w800dfoshg4eqvc8pk","_id":"cm3iee2w900dooshgcnujehog"},{"post_id":"cm3iee2v3007yoshg5kcd8gco","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2wa00dsoshg0ijq3l17"},{"post_id":"cm3iee2v30080oshgffmthj0e","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2wa00dwoshg097o5iql"},{"post_id":"cm3iee2v40084oshg3c7z4n2z","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2wb00e0oshgceb2f7m1"},{"post_id":"cm3iee2v40086oshggsrl9o2r","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2wb00e3oshg056hbm8k"},{"post_id":"cm3iee2v5008aoshg1e3i5ipj","category_id":"cm3iee2wb00dzoshgbz4gch8s","_id":"cm3iee2wc00e8oshg6z5234y3"},{"post_id":"cm3iee2v6008coshg238o9h3a","category_id":"cm3iee2wb00dzoshgbz4gch8s","_id":"cm3iee2wc00ecoshgd5qjdl0p"},{"post_id":"cm3iee2v6008goshg0uga0rri","category_id":"cm3iee2wb00dzoshgbz4gch8s","_id":"cm3iee2wd00egoshg0jky2wo7"},{"post_id":"cm3iee2v7008joshg6jq8bido","category_id":"cm3iee2wb00dzoshgbz4gch8s","_id":"cm3iee2wd00ejoshg6chjcvo7"},{"post_id":"cm3iee2v7008koshg1gx6gti9","category_id":"cm3iee2wb00dzoshgbz4gch8s","_id":"cm3iee2we00emoshgfaoyhtdd"},{"post_id":"cm3iee2v8008poshgf2013cdu","category_id":"cm3iee2wd00eioshg31pi806t","_id":"cm3iee2we00esoshgayqnd949"},{"post_id":"cm3iee2v9008qoshg61zzdv2s","category_id":"cm3iee2wd00eioshg31pi806t","_id":"cm3iee2wf00euoshg0o6fhg48"},{"post_id":"cm3iee2va008uoshg3ttm2icn","category_id":"cm3iee2we00eroshg7dh3eru2","_id":"cm3iee2wf00f0oshgdxmofto1"},{"post_id":"cm3iee2va008woshg6nng042r","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2wg00f3oshg9tr15new"},{"post_id":"cm3iee2vb0090oshg88a224bl","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2wg00f7oshgfdu46szq"},{"post_id":"cm3iee2vb0092oshg9qajead5","category_id":"cm3iee2vc0093oshgg5bu2274","_id":"cm3iee2wg00faoshgfe7idr2r"},{"post_id":"cm3iee2vd009aoshg8uos7jfu","category_id":"cm3iee2wg00f6oshg3lgi0m9k","_id":"cm3iee2wh00ffoshg3ufkfqig"},{"post_id":"cm3iee2ve009coshgclzu0ztd","category_id":"cm3iee2wg00f6oshg3lgi0m9k","_id":"cm3iee2wh00fjoshg03245o9i"},{"post_id":"cm3iee2ve009foshghxnh5p0g","category_id":"cm3iee2wg00f6oshg3lgi0m9k","_id":"cm3iee2wi00floshg7iiz3vk2"},{"post_id":"cm3iee2vf009ioshghs0lh4mp","category_id":"cm3iee2wh00fioshgfq553f5v","_id":"cm3iee2wi00fposhgfisbeqa4"},{"post_id":"cm3iee2vg009moshg3wblgadb","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wi00ftoshg63hmbgjt"},{"post_id":"cm3iee2vg009qoshg19kigiun","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wj00fyoshg3s6j9stt"},{"post_id":"cm3iee2vh009uoshg5pge94sl","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wk00g2oshg2y4pe0he"},{"post_id":"cm3iee2vi009xoshg4o1c2m68","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wk00g6oshg497w2otu"},{"post_id":"cm3iee2vj00a0oshg4cx7czvb","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wl00gaoshgah75e0tg"},{"post_id":"cm3iee2vj00a2oshg8ggehrjm","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wl00geoshgh4rj2atx"},{"post_id":"cm3iee2vk00a6oshga68050x1","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wm00gioshge9rf7gu3"},{"post_id":"cm3iee2vk00a8oshg65u3dbpj","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wm00gmoshger4y3zd0"},{"post_id":"cm3iee2vl00adoshgdwcs76vd","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wn00gqoshgbqkndx6t"},{"post_id":"cm3iee2vm00aeoshgggzfgip4","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wn00guoshg8num1gsn"},{"post_id":"cm3iee2vn00aioshgfzs00rdr","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wo00gyoshg462k9sgd"},{"post_id":"cm3iee2vn00akoshg81a3frwv","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wo00h1oshg4tcf4q7n"},{"post_id":"cm3iee2vo00aooshg9aaxa1y7","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wp00h5oshg23ikgdzb"},{"post_id":"cm3iee2vp00aqoshg893l3ikq","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wp00h9oshg18nwd2wm"},{"post_id":"cm3iee2vp00auoshg8itbhvz6","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wq00hdoshg85d5ex1u"},{"post_id":"cm3iee2vq00awoshg2t071pnw","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wq00hhoshg4ezzgruw"},{"post_id":"cm3iee2vr00b0oshggpf2fam2","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wr00hloshg59ylhuvt"},{"post_id":"cm3iee2vr00b2oshg3qmu2s3y","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wr00hposhg85up7jhi"},{"post_id":"cm3iee2vs00b6oshghi0q36vw","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2ws00htoshg3tnk0fwk"},{"post_id":"cm3iee2vt00b8oshg5tt80ye6","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2ws00hwoshg7m9tfen4"},{"post_id":"cm3iee2vt00bboshgfahmag2m","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wt00i0oshgbmvo1hu2"},{"post_id":"cm3iee2vu00beoshg4ewsgk6t","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wt00i4oshg7f0hehte"},{"post_id":"cm3iee2vv00bhoshg1hqd65cl","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wu00i8oshg6asb98ok"},{"post_id":"cm3iee2vv00bjoshgc1q726bl","category_id":"cm3iee2wi00fnoshg0lds3h31","_id":"cm3iee2wu00iboshg9s4iaa4q"},{"post_id":"cm3iee2vw00bnoshghkop3ala","category_id":"cm3iee2wt00i7oshg1e240f75","_id":"cm3iee2wu00ifoshgfmz21a02"},{"post_id":"cm3iee2vx00bposhgdvryf55p","category_id":"cm3iee2wu00icoshg98one64t","_id":"cm3iee2wv00ikoshgaipfhzw6"},{"post_id":"cm3iee2vx00btoshg4ibw6zmv","category_id":"cm3iee2wt00i7oshg1e240f75","_id":"cm3iee2wv00inoshg0cfw44zj"},{"post_id":"cm3iee2vy00bvoshg0xui8zy6","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2ww00isoshg6dddfmmt"},{"post_id":"cm3iee2vz00bzoshg3lad68yx","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2wx00ivoshghyuf8r85"},{"post_id":"cm3iee2vz00c1oshg17lyh1ae","category_id":"cm3iee2ww00iroshg4hg720fr","_id":"cm3iee2wx00j1oshg2pz9a8sg"},{"post_id":"cm3iee2w000c6oshghoqob7n9","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2wy00j5oshggxqf9mpm"},{"post_id":"cm3iee2w000c7oshg319l042o","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2wy00j9oshg43yz5npv"},{"post_id":"cm3iee2w100cboshg3gut6cmn","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2wz00jdoshg0tiphosm"},{"post_id":"cm3iee2w200cdoshgdycmgumj","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2x000jhoshg8m3fbotc"},{"post_id":"cm3iee2w300choshgh5xc5fue","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2x000jloshg6cv1gd0i"},{"post_id":"cm3iee2w300cjoshggtavfxt4","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2x100jposhg751pa25a"},{"post_id":"cm3iee2w400cqoshg2u8z2z67","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2x200jwoshg65ey7o9c"},{"post_id":"cm3iee2w500cvoshga67jeefq","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2x200jzoshg33r644k6"},{"post_id":"cm3iee2w600cxoshg7fog4a87","category_id":"cm3iee2x200jvoshgbgy0d5es","_id":"cm3iee2x300k3oshg7v8k0txb"},{"post_id":"cm3iee2w400cooshg4yjgd3f4","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2x400k6oshghzr82ihu"},{"post_id":"cm3iee2w400cooshg4yjgd3f4","category_id":"cm3iee2x300k0oshg2w9bdrb8","_id":"cm3iee2x400k8oshgeqwxg277"},{"post_id":"cm3iee2xd00lgoshg0j2dfnbu","category_id":"cm3iee2wv00ijoshgfv1t78lc","_id":"cm3iee2xf00lloshghbra1r5z"},{"post_id":"cm3iee2xf00ljoshg948g4sz9","category_id":"cm3iee2wt00i7oshg1e240f75","_id":"cm3iee2xg00looshg6h7ph1lr"},{"post_id":"cm3iee2xe00lhoshg4lwr79zc","category_id":"cm3iee2xf00lkoshg77c51kr0","_id":"cm3iee2xg00lqoshgay0k8bpv"}],"PostTag":[{"post_id":"cm3iee2su0001oshg3mbgg7ue","tag_id":"cm3iee2t00005oshg2onvhzg7","_id":"cm3iee2t5000eoshgc9uw799q"},{"post_id":"cm3iee2sy0003oshgg4rn7824","tag_id":"cm3iee2t4000doshgh1b2en2c","_id":"cm3iee2t9000ooshg23op265z"},{"post_id":"cm3iee2t10007oshggyup0d0k","tag_id":"cm3iee2t7000loshgb9o6f7yx","_id":"cm3iee2tb000woshg6rz65vwr"},{"post_id":"cm3iee2t20009oshgg3gmg618","tag_id":"cm3iee2ta000toshg2mva7cu8","_id":"cm3iee2te0014oshg79oi8nuu"},{"post_id":"cm3iee2t4000boshg3f0r4hcm","tag_id":"cm3iee2td0011oshg8tgj0ryz","_id":"cm3iee2tg001coshg8wx1bxlz"},{"post_id":"cm3iee2t5000goshg8sd17e8h","tag_id":"cm3iee2tg001boshg44175j4z","_id":"cm3iee2ti001joshge7s7d8l3"},{"post_id":"cm3iee2t6000ioshgh31wbgo0","tag_id":"cm3iee2th001hoshg12wbbf2t","_id":"cm3iee2tj001poshg9yhqb66f"},{"post_id":"cm3iee2t8000noshg3ym28w9z","tag_id":"cm3iee2tj001noshgemw8607h","_id":"cm3iee2tk001voshg7dn9ce9c"},{"post_id":"cm3iee2t9000qoshg5gwu1h8b","tag_id":"cm3iee2tk001toshg3zhzcmdq","_id":"cm3iee2tm0021oshg9kgybfk7"},{"post_id":"cm3iee2tl001zoshg3d9k1zr4","tag_id":"cm3iee2tk001toshg3zhzcmdq","_id":"cm3iee2tn0025oshgg55fdt55"},{"post_id":"cm3iee2tm0022oshg0jjv4hrz","tag_id":"cm3iee2tk001toshg3zhzcmdq","_id":"cm3iee2to0029oshgeppv2zea"},{"post_id":"cm3iee2tb000voshg1nf6ev7s","tag_id":"cm3iee2tm0020oshg53nk58ay","_id":"cm3iee2tp002doshgda9113d1"},{"post_id":"cm3iee2tn0026oshgeuhm04qw","tag_id":"cm3iee2tk001toshg3zhzcmdq","_id":"cm3iee2tp002hoshg8geq1soc"},{"post_id":"cm3iee2tc000yoshgb8ke3yb4","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2tq002loshgdka3h2ig"},{"post_id":"cm3iee2td0013oshg4xiu70d8","tag_id":"cm3iee2tp002goshg5nkt3x0j","_id":"cm3iee2ts002soshggmm4dgud"},{"post_id":"cm3iee2te0016oshg7h75f1ks","tag_id":"cm3iee2tr002ooshg8g3k847d","_id":"cm3iee2tt002zoshg09c03c20"},{"post_id":"cm3iee2tf001aoshg61sg392s","tag_id":"cm3iee2tk001toshg3zhzcmdq","_id":"cm3iee2tw0036oshgfwwkfo1e"},{"post_id":"cm3iee2tg001doshgh6ocbihf","tag_id":"cm3iee2tv0034oshgh0b8cuuh","_id":"cm3iee2ty003foshg96az1ic0"},{"post_id":"cm3iee2th001goshge7sxg1ux","tag_id":"cm3iee2tk001toshg3zhzcmdq","_id":"cm3iee2tz003loshg2fvw7fi9"},{"post_id":"cm3iee2th001ioshgcn6a45mx","tag_id":"cm3iee2tk001toshg3zhzcmdq","_id":"cm3iee2u1003roshg64j9600z"},{"post_id":"cm3iee2ti001loshg3m8u4nhr","tag_id":"cm3iee2tk001toshg3zhzcmdq","_id":"cm3iee2u2003yoshg1rmiem6l"},{"post_id":"cm3iee2tj001ooshggli8by9w","tag_id":"cm3iee2u1003uoshg3d7d9gda","_id":"cm3iee2u40045oshg0efp9yno"},{"post_id":"cm3iee2tj001qoshg0xqm1cxl","tag_id":"cm3iee2tk001toshg3zhzcmdq","_id":"cm3iee2u6004coshg5v46cumx"},{"post_id":"cm3iee2tk001uoshg81y76wgr","tag_id":"cm3iee2u50049oshgexls6gz2","_id":"cm3iee2u8004koshg61pzbofh"},{"post_id":"cm3iee2tl001woshg41os5r7c","tag_id":"cm3iee2u7004goshgb2v6f9d5","_id":"cm3iee2u9004roshgf0qz4wdl"},{"post_id":"cm3iee2to002aoshg9kd314d6","tag_id":"cm3iee2u9004ooshg9x5lh3gi","_id":"cm3iee2ub004yoshgapry8ayq"},{"post_id":"cm3iee2tp002eoshgc0zohrk8","tag_id":"cm3iee2ua004voshge9ambcfu","_id":"cm3iee2ud0055oshga2j0315o"},{"post_id":"cm3iee2tp002ioshgawnq7qz0","tag_id":"cm3iee2uc0052oshg4ojkgq2w","_id":"cm3iee2ue005boshg1nhwatkk"},{"post_id":"cm3iee2tq002moshgc20l7wk6","tag_id":"cm3iee2ud0058oshg4l7va96w","_id":"cm3iee2uk005hoshg116vdu0k"},{"post_id":"cm3iee2tr002poshg2lfy00kq","tag_id":"cm3iee2uk005goshgbu4c2hmn","_id":"cm3iee2um005ooshgf9czgyic"},{"post_id":"cm3iee2ts002toshg0d7o43fk","tag_id":"cm3iee2ul005moshg5zb11vqe","_id":"cm3iee2un005uoshg1a59700t"},{"post_id":"cm3iee2ts002voshgb321fwjb","tag_id":"cm3iee2um005soshga0m06yrj","_id":"cm3iee2uo0060oshg9lz1f5r2"},{"post_id":"cm3iee2tt0030oshggbh586ec","tag_id":"cm3iee2uo005yoshgem76dqss","_id":"cm3iee2up0066oshge8mbfdsm"},{"post_id":"cm3iee2tu0032oshgf2vcez3u","tag_id":"cm3iee2uo005yoshgem76dqss","_id":"cm3iee2ur006coshgeqem6wie"},{"post_id":"cm3iee2tw0037oshgciqc0tj0","tag_id":"cm3iee2uq006boshg44vi32dd","_id":"cm3iee2us006joshg1ne1hmoc"},{"post_id":"cm3iee2tw0039oshg9e86dvc7","tag_id":"cm3iee2us006hoshg55f2hfn0","_id":"cm3iee2ut006poshg32ch37ca"},{"post_id":"cm3iee2tx003doshgag5r9y0z","tag_id":"cm3iee2ut006noshgenfjh35o","_id":"cm3iee2uv006voshgai5e2i1p"},{"post_id":"cm3iee2ty003goshg53r2enss","tag_id":"cm3iee2uu006toshg7jeshdlh","_id":"cm3iee2uw0071oshg8t0t1fn9"},{"post_id":"cm3iee2tz003koshgh4tl6c60","tag_id":"cm3iee2uw0070oshg6jwgboj7","_id":"cm3iee2ux0078oshg7tl02y4x"},{"post_id":"cm3iee2tz003moshg0ikndvsw","tag_id":"cm3iee2ux0076oshgcfqrb5mx","_id":"cm3iee2uz007eoshg11v2bfbs"},{"post_id":"cm3iee2u0003qoshgg0kdgg1i","tag_id":"cm3iee2uy007coshgh58d92ym","_id":"cm3iee2v0007koshgau9c3vdt"},{"post_id":"cm3iee2u1003toshgcmp524gb","tag_id":"cm3iee2uz007ioshgcb9fexwq","_id":"cm3iee2v1007soshgdx0scdla"},{"post_id":"cm3iee2u2003xoshg6qmlf2bq","tag_id":"cm3iee2v1007poshgamc65vkz","_id":"cm3iee2v3007zoshgbitf6tt5"},{"post_id":"cm3iee2u20040oshg56we0qcy","tag_id":"cm3iee2v2007voshg44y27osp","_id":"cm3iee2v40085oshg0stgaphs"},{"post_id":"cm3iee2u30044oshg3b14ehd1","tag_id":"cm3iee2v2007voshg44y27osp","_id":"cm3iee2v6008boshg4q9vemzn"},{"post_id":"cm3iee2v5008aoshg1e3i5ipj","tag_id":"cm3iee2uc0052oshg4ojkgq2w","_id":"cm3iee2v6008doshg8sgl40ut"},{"post_id":"cm3iee2u40047oshgf1mx9w28","tag_id":"cm3iee2v50087oshg1itg9xj1","_id":"cm3iee2v7008ioshg9pqpaq3l"},{"post_id":"cm3iee2u5004boshg411x5sxs","tag_id":"cm3iee2v6008foshg1nhsa33f","_id":"cm3iee2v8008ooshg0emk7k2f"},{"post_id":"cm3iee2u6004eoshg4dbb3xuh","tag_id":"cm3iee2v8008noshg43ty8mkb","_id":"cm3iee2va008voshg4ua61u6s"},{"post_id":"cm3iee2u7004hoshgelok857e","tag_id":"cm3iee2v9008toshg3fvj6ajg","_id":"cm3iee2vb0091oshg8jpbhetb"},{"post_id":"cm3iee2u8004loshg6gcm7p2f","tag_id":"cm3iee2vb008zoshg8p8c61oe","_id":"cm3iee2vf009koshg0dvqd2gp"},{"post_id":"cm3iee2u8004loshg6gcm7p2f","tag_id":"cm3iee2vc0095oshgcxou7e0e","_id":"cm3iee2vg009ooshg37yah4n6"},{"post_id":"cm3iee2u8004loshg6gcm7p2f","tag_id":"cm3iee2vd009boshg1b04akoe","_id":"cm3iee2vh009roshg5z6cbk5a"},{"post_id":"cm3iee2u8004noshg8nmvdryg","tag_id":"cm3iee2vf009hoshga9hj1gcg","_id":"cm3iee2vi009voshgauyq5egs"},{"post_id":"cm3iee2u9004soshg4e3w2xby","tag_id":"cm3iee2vb008zoshg8p8c61oe","_id":"cm3iee2vk00a5oshg3by7bvvw"},{"post_id":"cm3iee2u9004soshg4e3w2xby","tag_id":"cm3iee2vi009woshgd6u07adf","_id":"cm3iee2vk00a7oshg3ljg9j3c"},{"post_id":"cm3iee2ua004toshg9cov0ph3","tag_id":"cm3iee2vj00a1oshgghv40eq4","_id":"cm3iee2vl00acoshg91pf7r7h"},{"post_id":"cm3iee2ub004xoshg42ox7zgj","tag_id":"cm3iee2vl00a9oshg1srw7w7j","_id":"cm3iee2vn00ajoshg1viw921r"},{"post_id":"cm3iee2ub0050oshgeloz7qnr","tag_id":"cm3iee2vn00ahoshg1enf3h0o","_id":"cm3iee2vp00aposhg20lc6p2x"},{"post_id":"cm3iee2uc0054oshg7mav9lt6","tag_id":"cm3iee2vo00anoshgbje5b5qv","_id":"cm3iee2vq00avoshgfea0dyf0"},{"post_id":"cm3iee2ud0056oshgbvte1ihn","tag_id":"cm3iee2vo00anoshgbje5b5qv","_id":"cm3iee2vr00b1oshg826b3346"},{"post_id":"cm3iee2ud0059oshgfk4ahrql","tag_id":"cm3iee2vl00a9oshg1srw7w7j","_id":"cm3iee2vt00b7oshgbquphfk7"},{"post_id":"cm3iee2ue005coshgg8c600gi","tag_id":"cm3iee2vs00b5oshg06regqtg","_id":"cm3iee2vu00bdoshg9n4fbf2o"},{"post_id":"cm3iee2uj005doshg5f95hwjv","tag_id":"cm3iee2vu00bcoshg1x0y05wp","_id":"cm3iee2vw00bkoshg005j1i5m"},{"post_id":"cm3iee2uk005ioshg9cr779n7","tag_id":"cm3iee2vv00bioshg6jfmdrsr","_id":"cm3iee2vx00bsoshghgsg44se"},{"post_id":"cm3iee2ul005joshgdgpkhoy5","tag_id":"cm3iee2vw00booshg5m75cq6r","_id":"cm3iee2vz00byoshg8pkf2r3l"},{"post_id":"cm3iee2vy00bvoshg0xui8zy6","tag_id":"cm3iee2vb008zoshg8p8c61oe","_id":"cm3iee2vz00c0oshg27ge0nwv"},{"post_id":"cm3iee2ul005noshgd0f08ft2","tag_id":"cm3iee2vy00buoshg7ppldjra","_id":"cm3iee2w000c5oshg3bd01dia"},{"post_id":"cm3iee2um005poshgakk9erj1","tag_id":"cm3iee2w000c2oshgefw83uah","_id":"cm3iee2w200ccoshgbwzubkfk"},{"post_id":"cm3iee2um005toshgb4ih7syk","tag_id":"cm3iee2w000c2oshgefw83uah","_id":"cm3iee2w300cioshgd410d7uj"},{"post_id":"cm3iee2w300choshgh5xc5fue","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2w400cnoshgadau1pdr"},{"post_id":"cm3iee2un005voshgawin5fz6","tag_id":"cm3iee2w000c2oshgefw83uah","_id":"cm3iee2w400cposhgftni3l9r"},{"post_id":"cm3iee2w300cjoshggtavfxt4","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2w500cuoshgfogn8cru"},{"post_id":"cm3iee2uo005zoshg8dq882kd","tag_id":"cm3iee2w000c2oshgefw83uah","_id":"cm3iee2w600cwoshg1ztw2eos"},{"post_id":"cm3iee2w400cqoshg2u8z2z67","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2w700d1oshgdjy09ydv"},{"post_id":"cm3iee2uo0061oshgelpq00og","tag_id":"cm3iee2w000c2oshgefw83uah","_id":"cm3iee2w700d2oshgcuv8025n"},{"post_id":"cm3iee2up0064oshg46876gj5","tag_id":"cm3iee2w600d0oshgdxj8d0ms","_id":"cm3iee2w700d6oshg13qe5h77"},{"post_id":"cm3iee2up0067oshghaa29bmv","tag_id":"cm3iee2w700d5oshg35mk0h7l","_id":"cm3iee2w800daoshgclpkhuqk"},{"post_id":"cm3iee2uq006aoshgah76fgdw","tag_id":"cm3iee2w800d9oshg5ry8f5r4","_id":"cm3iee2w800deoshgggudfeqw"},{"post_id":"cm3iee2ur006doshg1xob2mm9","tag_id":"cm3iee2w800ddoshg7r3cf3ho","_id":"cm3iee2w900dioshg1958bybv"},{"post_id":"cm3iee2ur006goshgd44t7c0i","tag_id":"cm3iee2w800dhoshg3gybaqf0","_id":"cm3iee2w900dmoshg93xh5xl1"},{"post_id":"cm3iee2us006ioshgflkm9z7t","tag_id":"cm3iee2w800ddoshg7r3cf3ho","_id":"cm3iee2wa00dqoshg4ijha8ds"},{"post_id":"cm3iee2us006moshgal9jcdr3","tag_id":"cm3iee2w800ddoshg7r3cf3ho","_id":"cm3iee2wa00duoshg3bvr0xfd"},{"post_id":"cm3iee2ut006ooshg5exgab3b","tag_id":"cm3iee2w800ddoshg7r3cf3ho","_id":"cm3iee2wb00dyoshgdy5y2uyd"},{"post_id":"cm3iee2uu006roshg094y88ze","tag_id":"cm3iee2vb008zoshg8p8c61oe","_id":"cm3iee2wb00e2oshg82nyha00"},{"post_id":"cm3iee2uu006uoshgdvrdeaxn","tag_id":"cm3iee2vb008zoshg8p8c61oe","_id":"cm3iee2wc00e6oshgc4mkd6dn"},{"post_id":"cm3iee2uv006woshge5f9c8n1","tag_id":"cm3iee2w800ddoshg7r3cf3ho","_id":"cm3iee2wc00eaoshgac0jbfsu"},{"post_id":"cm3iee2uv006zoshg7oe420tr","tag_id":"cm3iee2w800ddoshg7r3cf3ho","_id":"cm3iee2wd00eeoshgbkmsd612"},{"post_id":"cm3iee2uw0072oshg7co809u9","tag_id":"cm3iee2vb008zoshg8p8c61oe","_id":"cm3iee2we00eloshg2vlg1ge7"},{"post_id":"cm3iee2uw0072oshg7co809u9","tag_id":"cm3iee2wd00ehoshgaztrhqwp","_id":"cm3iee2we00eooshgbg9n4udd"},{"post_id":"cm3iee2uw0075oshg3r7e9hr8","tag_id":"cm3iee2wd00ekoshg7t5cd4xm","_id":"cm3iee2we00eqoshgd7wugfbb"},{"post_id":"cm3iee2ux0077oshg599fax5m","tag_id":"cm3iee2we00eposhg0f3n8ado","_id":"cm3iee2wf00evoshg3a38ckvu"},{"post_id":"cm3iee2uy007boshg5l2ugdym","tag_id":"cm3iee2vc0095oshgcxou7e0e","_id":"cm3iee2wf00eyoshgf4252dq9"},{"post_id":"cm3iee2uy007doshg5jwfg1z7","tag_id":"cm3iee2wf00exoshg0z2ofb5c","_id":"cm3iee2wg00f4oshg8vne6b1x"},{"post_id":"cm3iee2uz007hoshg7kh23zkd","tag_id":"cm3iee2w800ddoshg7r3cf3ho","_id":"cm3iee2wg00f8oshgbp6975t5"},{"post_id":"cm3iee2uz007joshg8qoqd21m","tag_id":"cm3iee2wg00f5oshg1vzz3qar","_id":"cm3iee2wh00fcoshg8drgeosl"},{"post_id":"cm3iee2v0007noshgcljufdwx","tag_id":"cm3iee2wg00f9oshgerrkdx0g","_id":"cm3iee2wh00fgoshg67r1dc0u"},{"post_id":"cm3iee2v1007ooshg0l34dcvn","tag_id":"cm3iee2wh00fdoshg143rd6ps","_id":"cm3iee2wi00fkoshg59zwdxkv"},{"post_id":"cm3iee2v1007toshg2nmqd1qu","tag_id":"cm3iee2wh00fhoshg7kgx9bwa","_id":"cm3iee2wi00fooshg29lk7xca"},{"post_id":"cm3iee2v2007uoshg4o0u8fpj","tag_id":"cm3iee2wi00fmoshg99ql9lnm","_id":"cm3iee2wj00fvoshg82cb0001"},{"post_id":"cm3iee2v2007uoshg4o0u8fpj","tag_id":"cm3iee2wi00fqoshghv0q1fqr","_id":"cm3iee2wj00fwoshgaeui3go2"},{"post_id":"cm3iee2v3007yoshg5kcd8gco","tag_id":"cm3iee2wj00fuoshge3095720","_id":"cm3iee2wj00g0oshg8kgy2q8k"},{"post_id":"cm3iee2v30080oshgffmthj0e","tag_id":"cm3iee2vb008zoshg8p8c61oe","_id":"cm3iee2wk00g4oshg517ce725"},{"post_id":"cm3iee2v40084oshg3c7z4n2z","tag_id":"cm3iee2wk00g3oshg4yw951jt","_id":"cm3iee2wk00g8oshghiq71cmy"},{"post_id":"cm3iee2v40086oshggsrl9o2r","tag_id":"cm3iee2vb008zoshg8p8c61oe","_id":"cm3iee2wl00gcoshgde187pxu"},{"post_id":"cm3iee2v6008coshg238o9h3a","tag_id":"cm3iee2wl00gboshg53cabtrj","_id":"cm3iee2wl00ggoshg62c36v0s"},{"post_id":"cm3iee2v6008goshg0uga0rri","tag_id":"cm3iee2wl00gboshg53cabtrj","_id":"cm3iee2wm00gkoshg613v22n1"},{"post_id":"cm3iee2v7008joshg6jq8bido","tag_id":"cm3iee2wl00gboshg53cabtrj","_id":"cm3iee2wm00gooshgf6a79wfy"},{"post_id":"cm3iee2v7008koshg1gx6gti9","tag_id":"cm3iee2wl00gboshg53cabtrj","_id":"cm3iee2wn00gsoshgh0vid7ua"},{"post_id":"cm3iee2v8008poshgf2013cdu","tag_id":"cm3iee2wn00groshgcto52nce","_id":"cm3iee2wn00gwoshg88z44q3o"},{"post_id":"cm3iee2v9008qoshg61zzdv2s","tag_id":"cm3iee2wn00gvoshg32fkhsbm","_id":"cm3iee2wo00h2oshg6qpc70jg"},{"post_id":"cm3iee2va008uoshg3ttm2icn","tag_id":"cm3iee2wo00gzoshg43bebqpu","_id":"cm3iee2wp00h6oshg217n4nuj"},{"post_id":"cm3iee2va008woshg6nng042r","tag_id":"cm3iee2wi00fmoshg99ql9lnm","_id":"cm3iee2wp00haoshg6gzterb8"},{"post_id":"cm3iee2vb0090oshg88a224bl","tag_id":"cm3iee2wi00fmoshg99ql9lnm","_id":"cm3iee2wq00heoshg8adp5n3f"},{"post_id":"cm3iee2vb0092oshg9qajead5","tag_id":"cm3iee2wi00fmoshg99ql9lnm","_id":"cm3iee2wq00hioshgfw3x666y"},{"post_id":"cm3iee2vc0096oshg9v7308ac","tag_id":"cm3iee2wi00fmoshg99ql9lnm","_id":"cm3iee2wr00hmoshgazx42p3s"},{"post_id":"cm3iee2vc0097oshg6p7a6nxu","tag_id":"cm3iee2wi00fmoshg99ql9lnm","_id":"cm3iee2wr00hqoshg3x30h6ep"},{"post_id":"cm3iee2vd009aoshg8uos7jfu","tag_id":"cm3iee2wr00hnoshg4ovccq54","_id":"cm3iee2ws00huoshgdn3k3g0u"},{"post_id":"cm3iee2ve009coshgclzu0ztd","tag_id":"cm3iee2wr00hroshg3hsm7f22","_id":"cm3iee2ws00hyoshg5x274blm"},{"post_id":"cm3iee2ve009foshghxnh5p0g","tag_id":"cm3iee2ws00hxoshga2lh0oz8","_id":"cm3iee2wt00i2oshggr3ehc0f"},{"post_id":"cm3iee2vf009ioshghs0lh4mp","tag_id":"cm3iee2wt00i1oshgbp576yek","_id":"cm3iee2wt00i6oshg3wtwaqr4"},{"post_id":"cm3iee2vg009moshg3wblgadb","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2wu00iaoshg24l18gkx"},{"post_id":"cm3iee2vg009qoshg19kigiun","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2wu00ieoshg7jyscm8o"},{"post_id":"cm3iee2vh009uoshg5pge94sl","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2wv00iioshgd91v9qz6"},{"post_id":"cm3iee2vi009xoshg4o1c2m68","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2wv00imoshg3s20foaa"},{"post_id":"cm3iee2vj00a0oshg4cx7czvb","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2ww00iqoshgh0h7d4y5"},{"post_id":"cm3iee2vj00a2oshg8ggehrjm","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2ww00iuoshg9kc54lj8"},{"post_id":"cm3iee2vk00a6oshga68050x1","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2wx00iyoshg8ra05xu5"},{"post_id":"cm3iee2vk00a8oshg65u3dbpj","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2wy00j2oshg57lxgh1c"},{"post_id":"cm3iee2vl00adoshgdwcs76vd","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2wy00j6oshg0se0h0ud"},{"post_id":"cm3iee2vm00aeoshgggzfgip4","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2wz00jaoshg6tg742t9"},{"post_id":"cm3iee2vn00aioshgfzs00rdr","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2wz00jeoshg56dj2f7u"},{"post_id":"cm3iee2vn00akoshg81a3frwv","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x000jioshg0we4eyw1"},{"post_id":"cm3iee2vo00aooshg9aaxa1y7","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x000jmoshg6af944tf"},{"post_id":"cm3iee2vp00aqoshg893l3ikq","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x100jqoshgcegs178d"},{"post_id":"cm3iee2vp00auoshg8itbhvz6","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x200jtoshgfjox9s8g"},{"post_id":"cm3iee2vq00awoshg2t071pnw","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x200jxoshgbe8m7wq6"},{"post_id":"cm3iee2vr00b0oshggpf2fam2","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x300k1oshg0i6j8ppa"},{"post_id":"cm3iee2vr00b2oshg3qmu2s3y","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x300k4oshg64f53o4s"},{"post_id":"cm3iee2vs00b6oshghi0q36vw","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x400k7oshgblncd8wy"},{"post_id":"cm3iee2vt00b8oshg5tt80ye6","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x400kaoshg6mpj94oi"},{"post_id":"cm3iee2vt00bboshgfahmag2m","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x400kcoshg0p7yh6ul"},{"post_id":"cm3iee2vu00beoshg4ewsgk6t","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x500keoshgb8txdt24"},{"post_id":"cm3iee2vv00bhoshg1hqd65cl","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x500kgoshg9q5l0hw2"},{"post_id":"cm3iee2vv00bjoshgc1q726bl","tag_id":"cm3iee2wt00i5oshghx8f444f","_id":"cm3iee2x500kioshg52zrdqtn"},{"post_id":"cm3iee2vw00bnoshghkop3ala","tag_id":"cm3iee2x500khoshgfsol49r6","_id":"cm3iee2x600kloshgauzl67dn"},{"post_id":"cm3iee2vw00bnoshghkop3ala","tag_id":"cm3iee2x500kjoshg2hai0ny1","_id":"cm3iee2x600kmoshg2lqo01bo"},{"post_id":"cm3iee2vx00bposhgdvryf55p","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2x600kooshgfbng3x1z"},{"post_id":"cm3iee2vx00bposhgdvryf55p","tag_id":"cm3iee2x500kkoshggzp3bdnl","_id":"cm3iee2x600kposhgfbms5hnd"},{"post_id":"cm3iee2vx00btoshg4ibw6zmv","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2x600kroshgdcux8kfy"},{"post_id":"cm3iee2vx00btoshg4ibw6zmv","tag_id":"cm3iee2x600knoshgd4u079hb","_id":"cm3iee2x600ksoshg4ixd9rvq"},{"post_id":"cm3iee2vz00bzoshg3lad68yx","tag_id":"cm3iee2x600kqoshg40otdtpg","_id":"cm3iee2x600kuoshg2joocncw"},{"post_id":"cm3iee2vz00c1oshg17lyh1ae","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2x700kwoshgdk4j1bby"},{"post_id":"cm3iee2vz00c1oshg17lyh1ae","tag_id":"cm3iee2x600ktoshg6v102c8k","_id":"cm3iee2x700kxoshgf5t488qu"},{"post_id":"cm3iee2w000c6oshghoqob7n9","tag_id":"cm3iee2x600kvoshghvyf25qq","_id":"cm3iee2x700kzoshgguac1hoq"},{"post_id":"cm3iee2w000c7oshg319l042o","tag_id":"cm3iee2x700kyoshggnfwcahg","_id":"cm3iee2x700l1oshghxis267y"},{"post_id":"cm3iee2w100cboshg3gut6cmn","tag_id":"cm3iee2x700l0oshg753w83hw","_id":"cm3iee2x700l3oshg06fxg2hh"},{"post_id":"cm3iee2w200cdoshgdycmgumj","tag_id":"cm3iee2x700l2oshg7fme5bj2","_id":"cm3iee2x700l5oshggrv82ete"},{"post_id":"cm3iee2w400cooshg4yjgd3f4","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2x800l8oshgew1jew7h"},{"post_id":"cm3iee2w400cooshg4yjgd3f4","tag_id":"cm3iee2wh00fhoshg7kgx9bwa","_id":"cm3iee2x800l9oshg7976dfu6"},{"post_id":"cm3iee2w400cooshg4yjgd3f4","tag_id":"cm3iee2x700l6oshg38gaefl3","_id":"cm3iee2x800lboshga3qu5it2"},{"post_id":"cm3iee2w500cvoshga67jeefq","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2x800lcoshg1nt6ctrl"},{"post_id":"cm3iee2w500cvoshga67jeefq","tag_id":"cm3iee2x800l7oshghrtw4uey","_id":"cm3iee2x800ldoshgaxi0bsmk"},{"post_id":"cm3iee2w600cxoshg7fog4a87","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2x800leoshg4flk85zu"},{"post_id":"cm3iee2w600cxoshg7fog4a87","tag_id":"cm3iee2x800laoshg6mve2ean","_id":"cm3iee2x800lfoshgenq33hd8"},{"post_id":"cm3iee2xd00lgoshg0j2dfnbu","tag_id":"cm3iee2xe00lioshgg5mt4ok2","_id":"cm3iee2xg00lnoshg11tg2kp4"},{"post_id":"cm3iee2xe00lhoshg4lwr79zc","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2xg00lroshgd6ir729r"},{"post_id":"cm3iee2xe00lhoshg4lwr79zc","tag_id":"cm3iee2xf00lmoshg1npu22ph","_id":"cm3iee2xg00lsoshg43yn08aq"},{"post_id":"cm3iee2xf00ljoshg948g4sz9","tag_id":"cm3iee2tn0028oshg5vut3f32","_id":"cm3iee2xg00ltoshgghv37lly"},{"post_id":"cm3iee2xf00ljoshg948g4sz9","tag_id":"cm3iee2xg00lposhg8n855p8a","_id":"cm3iee2xg00luoshgavia5oat"}],"Tag":[{"name":"GitBook","_id":"cm3iee2t00005oshg2onvhzg7"},{"name":"Git","_id":"cm3iee2t4000doshgh1b2en2c"},{"name":"Hexo","_id":"cm3iee2t7000loshgb9o6f7yx"},{"name":"Goframe","_id":"cm3iee2ta000toshg2mva7cu8"},{"name":"Go","_id":"cm3iee2td0011oshg8tgj0ryz"},{"name":"Lua","_id":"cm3iee2tg001boshg44175j4z"},{"name":"Markdown","_id":"cm3iee2th001hoshg12wbbf2t"},{"name":"MongoDB","_id":"cm3iee2tj001noshgemw8607h"},{"name":"MySQL","_id":"cm3iee2tk001toshg3zhzcmdq"},{"name":"DOS命令","_id":"cm3iee2tm0020oshg53nk58ay"},{"name":"Linux","_id":"cm3iee2tn0028oshg5vut3f32"},{"name":"JSON","_id":"cm3iee2tp002goshg5nkt3x0j"},{"name":"binlog","_id":"cm3iee2tr002ooshg8g3k847d"},{"name":"数据库优化","_id":"cm3iee2tv0034oshgh0b8cuuh"},{"name":"架构设计","_id":"cm3iee2u1003uoshg3d7d9gda"},{"name":"索引","_id":"cm3iee2u50049oshgexls6gz2"},{"name":"联表查询","_id":"cm3iee2u7004goshgb2v6f9d5"},{"name":"数据库","_id":"cm3iee2u9004ooshg9x5lh3gi"},{"name":"聚簇索引","_id":"cm3iee2ua004voshge9ambcfu"},{"name":"Excel","_id":"cm3iee2uc0052oshg4ojkgq2w"},{"name":"Oracle","_id":"cm3iee2ud0058oshg4l7va96w"},{"name":"R","_id":"cm3iee2uk005goshgbu4c2hmn"},{"name":"Prolog","_id":"cm3iee2ul005moshg5zb11vqe"},{"name":"SEO","_id":"cm3iee2um005soshga0m06yrj"},{"name":"Redis","_id":"cm3iee2uo005yoshgem76dqss"},{"name":"产品设计","_id":"cm3iee2uq006boshg44vi32dd"},{"name":"云闪付","_id":"cm3iee2us006hoshg55f2hfn0"},{"name":"锚定效应","_id":"cm3iee2ut006noshgenfjh35o"},{"name":"心跳包","_id":"cm3iee2uu006toshg7jeshdlh"},{"name":"工具","_id":"cm3iee2uw0070oshg6jwgboj7"},{"name":"数据","_id":"cm3iee2ux0076oshgcfqrb5mx"},{"name":"死锁","_id":"cm3iee2uy007coshgh58d92ym"},{"name":"池化技术","_id":"cm3iee2uz007ioshgcb9fexwq"},{"name":"线程安全","_id":"cm3iee2v1007poshgamc65vkz"},{"name":"杂谈","_id":"cm3iee2v2007voshg44y27osp"},{"name":"书籍","_id":"cm3iee2v50087oshg1itg9xj1"},{"name":"ab.exe","_id":"cm3iee2v6008foshg1nhsa33f"},{"name":"七牛云","_id":"cm3iee2v8008noshg43ty8mkb"},{"name":"消息推送","_id":"cm3iee2v9008toshg3fvj6ajg"},{"name":"PHP","_id":"cm3iee2vb008zoshg8p8c61oe"},{"name":"算法","_id":"cm3iee2vc0095oshgcxou7e0e"},{"name":"滑动窗口","_id":"cm3iee2vd009boshg1b04akoe"},{"name":"Notepad++","_id":"cm3iee2vf009hoshga9hj1gcg"},{"name":"熔断","_id":"cm3iee2vi009woshgd6u07adf"},{"name":"CSS","_id":"cm3iee2vj00a1oshgghv40eq4"},{"name":"Jquery","_id":"cm3iee2vl00a9oshg1srw7w7j"},{"name":"JQuery","_id":"cm3iee2vn00ahoshg1enf3h0o"},{"name":"JavaScript","_id":"cm3iee2vo00anoshgbje5b5qv"},{"name":"HTML","_id":"cm3iee2vs00b5oshg06regqtg"},{"name":"富文本编辑器","_id":"cm3iee2vu00bcoshg1x0y05wp"},{"name":"跨域","_id":"cm3iee2vv00bioshg6jfmdrsr"},{"name":"前端","_id":"cm3iee2vw00booshg5m75cq6r"},{"name":"高德地图","_id":"cm3iee2vy00buoshg7ppldjra"},{"name":"ThinkPHP","_id":"cm3iee2w000c2oshgefw83uah"},{"name":"composer","_id":"cm3iee2w600d0oshgdxj8d0ms"},{"name":"trait","_id":"cm3iee2w700d5oshg35mk0h7l"},{"name":"PHPExcel","_id":"cm3iee2w800d9oshg5ry8f5r4"},{"name":"PHP笔记","_id":"cm3iee2w800ddoshg7r3cf3ho"},{"name":"define与const","_id":"cm3iee2w800dhoshg3gybaqf0"},{"name":"lock","_id":"cm3iee2wd00ehoshgaztrhqwp"},{"name":"elasticsearch","_id":"cm3iee2wd00ekoshg7t5cd4xm"},{"name":"加解密","_id":"cm3iee2we00eposhg0f3n8ado"},{"name":"魔术方法","_id":"cm3iee2wf00exoshg0z2ofb5c"},{"name":"面试","_id":"cm3iee2wg00f5oshg1vzz3qar"},{"name":"数据字典","_id":"cm3iee2wg00f9oshgerrkdx0g"},{"name":"Yii2","_id":"cm3iee2wh00fdoshg143rd6ps"},{"name":"运维","_id":"cm3iee2wh00fhoshg7kgx9bwa"},{"name":"phpStorm","_id":"cm3iee2wi00fmoshg99ql9lnm"},{"name":"xdebug","_id":"cm3iee2wi00fqoshghv0q1fqr"},{"name":"RPC","_id":"cm3iee2wj00fuoshge3095720"},{"name":"PHP函数","_id":"cm3iee2wk00g3oshg4yw951jt"},{"name":"Windows","_id":"cm3iee2wl00gboshg53cabtrj"},{"name":"目标管理","_id":"cm3iee2wn00groshgcto52nce"},{"name":"职场之道","_id":"cm3iee2wn00gvoshg32fkhsbm"},{"name":"代码规范","_id":"cm3iee2wo00gzoshg43bebqpu"},{"name":"软件架构","_id":"cm3iee2wr00hnoshg4ovccq54"},{"name":"系统设计","_id":"cm3iee2wr00hroshg3hsm7f22"},{"name":"高并发","_id":"cm3iee2ws00hxoshga2lh0oz8"},{"name":"Docker","_id":"cm3iee2wt00i1oshgbp576yek"},{"name":"设计模式","_id":"cm3iee2wt00i5oshghx8f444f"},{"name":"Nginx","_id":"cm3iee2x500khoshgfsol49r6"},{"name":"日志","_id":"cm3iee2x500kjoshg2hai0ny1"},{"name":"Cron","_id":"cm3iee2x500kkoshggzp3bdnl"},{"name":"tee","_id":"cm3iee2x600knoshgd4u079hb"},{"name":"curl","_id":"cm3iee2x600kqoshg40otdtpg"},{"name":"ntpdate","_id":"cm3iee2x600ktoshg6v102c8k"},{"name":"Cacti","_id":"cm3iee2x600kvoshghvyf25qq"},{"name":"网络","_id":"cm3iee2x700kyoshggnfwcahg"},{"name":"nodejs","_id":"cm3iee2x700l0oshg753w83hw"},{"name":"rz/sz","_id":"cm3iee2x700l2oshg7fme5bj2"},{"name":"cpu","_id":"cm3iee2x700l6oshg38gaefl3"},{"name":"grep","_id":"cm3iee2x800l7oshghrtw4uey"},{"name":"SystemD","_id":"cm3iee2x800laoshg6mve2ean"},{"name":"mysql","_id":"cm3iee2xe00lioshgg5mt4ok2"},{"name":"xargs","_id":"cm3iee2xf00lmoshg1npu22ph"},{"name":"后台运行","_id":"cm3iee2xg00lposhg8n855p8a"}]}}